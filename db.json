{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/images/11-300x286.png","path":"images/11-300x286.png","modified":1,"renderable":0},{"_id":"source/images/2-250x300.png","path":"images/2-250x300.png","modified":1,"renderable":0},{"_id":"source/images/DOC8GFX6-300x139.png","path":"images/DOC8GFX6-300x139.png","modified":1,"renderable":0},{"_id":"source/images/apachetest-300x89.png","path":"images/apachetest-300x89.png","modified":1,"renderable":0},{"_id":"source/images/clipboard.png","path":"images/clipboard.png","modified":1,"renderable":0},{"_id":"source/images/clipboard1-300x134-20190917165133735.png","path":"images/clipboard1-300x134-20190917165133735.png","modified":1,"renderable":0},{"_id":"source/images/clipboard1-300x134.png","path":"images/clipboard1-300x134.png","modified":1,"renderable":0},{"_id":"source/images/clipboard2-246x300.png","path":"images/clipboard2-246x300.png","modified":1,"renderable":0},{"_id":"source/images/ha.png","path":"images/ha.png","modified":1,"renderable":0},{"_id":"source/images/ha2.png","path":"images/ha2.png","modified":1,"renderable":0},{"_id":"source/images/hainstall.png","path":"images/hainstall.png","modified":1,"renderable":0},{"_id":"source/images/http-cache-control.png","path":"images/http-cache-control.png","modified":1,"renderable":0},{"_id":"source/images/image-20191021135643975.png","path":"images/image-20191021135643975.png","modified":1,"renderable":0},{"_id":"source/images/image.png","path":"images/image.png","modified":1,"renderable":0},{"_id":"source/images/img_56f4a9789a5c5.png","path":"images/img_56f4a9789a5c5.png","modified":1,"renderable":0},{"_id":"source/images/img_56f4a99aa9435.png","path":"images/img_56f4a99aa9435.png","modified":1,"renderable":0},{"_id":"source/images/img_56f4a9875257e.png","path":"images/img_56f4a9875257e.png","modified":1,"renderable":0},{"_id":"source/images/img_56f4a9ab888d0.png","path":"images/img_56f4a9ab888d0.png","modified":1,"renderable":0},{"_id":"source/images/img_56f4aa6c69a26-20190917143633077.png","path":"images/img_56f4aa6c69a26-20190917143633077.png","modified":1,"renderable":0},{"_id":"source/images/img_56f4aa8c14ae0-20190917143633236.png","path":"images/img_56f4aa8c14ae0-20190917143633236.png","modified":1,"renderable":0},{"_id":"source/images/img_56f4aa8c14ae0-20190917145027287.png","path":"images/img_56f4aa8c14ae0-20190917145027287.png","modified":1,"renderable":0},{"_id":"source/images/img_56f4aa989af5e-20190917143633212.png","path":"images/img_56f4aa989af5e-20190917143633212.png","modified":1,"renderable":0},{"_id":"source/images/img_570da13048078.png","path":"images/img_570da13048078.png","modified":1,"renderable":0},{"_id":"source/images/img_570da1465a8dc.png","path":"images/img_570da1465a8dc.png","modified":1,"renderable":0},{"_id":"source/images/img_570da15f9ead1.png","path":"images/img_570da15f9ead1.png","modified":1,"renderable":0},{"_id":"source/images/img_5773310c679a1.png","path":"images/img_5773310c679a1.png","modified":1,"renderable":0},{"_id":"source/images/img_5877344e51cd6.png","path":"images/img_5877344e51cd6.png","modified":1,"renderable":0},{"_id":"source/images/img_587dde19b6b47.png","path":"images/img_587dde19b6b47.png","modified":1,"renderable":0},{"_id":"source/images/img_58802ffca93b9.png","path":"images/img_58802ffca93b9.png","modified":1,"renderable":0},{"_id":"source/images/img_588031f4a62e1.png","path":"images/img_588031f4a62e1.png","modified":1,"renderable":0},{"_id":"source/images/img_58803215d9370.png","path":"images/img_58803215d9370.png","modified":1,"renderable":0},{"_id":"source/images/img_5880322f10890.png","path":"images/img_5880322f10890.png","modified":1,"renderable":0},{"_id":"source/images/img_58ddc18a1993a.png","path":"images/img_58ddc18a1993a.png","modified":1,"renderable":0},{"_id":"source/images/img_58ddc1b2d8078.png","path":"images/img_58ddc1b2d8078.png","modified":1,"renderable":0},{"_id":"source/images/img_58ddc20c6f8c3.png","path":"images/img_58ddc20c6f8c3.png","modified":1,"renderable":0},{"_id":"source/images/img_59b269634a216.png","path":"images/img_59b269634a216.png","modified":1,"renderable":0},{"_id":"source/images/img_59b2698d5658f.png","path":"images/img_59b2698d5658f.png","modified":1,"renderable":0},{"_id":"source/images/img_59b26b3126991.png","path":"images/img_59b26b3126991.png","modified":1,"renderable":0},{"_id":"source/images/img_59c35cd9ab71b.png","path":"images/img_59c35cd9ab71b.png","modified":1,"renderable":0},{"_id":"source/images/img_59c35d1d930c1.png","path":"images/img_59c35d1d930c1.png","modified":1,"renderable":0},{"_id":"source/images/lvsnat.png","path":"images/lvsnat.png","modified":1,"renderable":0},{"_id":"source/images/tomcat-300x84.png","path":"images/tomcat-300x84.png","modified":1,"renderable":0},{"_id":"themes/pure/source/favicon.png","path":"favicon.png","modified":1,"renderable":1},{"_id":"source/images/image-20191018151450374.png","path":"images/image-20191018151450374.png","modified":1,"renderable":0},{"_id":"source/images/image-20191018172515467.png","path":"images/image-20191018172515467.png","modified":1,"renderable":0},{"_id":"source/images/image-20191021135659882.png","path":"images/image-20191021135659882.png","modified":1,"renderable":0},{"_id":"source/images/image-20191021135714997.png","path":"images/image-20191021135714997.png","modified":1,"renderable":0},{"_id":"source/images/image-20191021135724279.png","path":"images/image-20191021135724279.png","modified":1,"renderable":0},{"_id":"source/images/img_56f4aa5d219ba-20190917143633356.png","path":"images/img_56f4aa5d219ba-20190917143633356.png","modified":1,"renderable":0},{"_id":"source/images/img_56f4aa815cb3c-20190917143633401.png","path":"images/img_56f4aa815cb3c-20190917143633401.png","modified":1,"renderable":0},{"_id":"source/images/img_570da173ef401.png","path":"images/img_570da173ef401.png","modified":1,"renderable":0},{"_id":"source/images/img_577330e1e5d06.png","path":"images/img_577330e1e5d06.png","modified":1,"renderable":0},{"_id":"source/images/img_577330f8871b5.png","path":"images/img_577330f8871b5.png","modified":1,"renderable":0},{"_id":"source/images/img_5773313591d94.png","path":"images/img_5773313591d94.png","modified":1,"renderable":0},{"_id":"source/images/img_57733153a13cb.png","path":"images/img_57733153a13cb.png","modified":1,"renderable":0},{"_id":"source/images/img_587733a5ae0ba.png","path":"images/img_587733a5ae0ba.png","modified":1,"renderable":0},{"_id":"source/images/img_5877340a43dea.png","path":"images/img_5877340a43dea.png","modified":1,"renderable":0},{"_id":"source/images/img_587ddd23c02a3.png","path":"images/img_587ddd23c02a3.png","modified":1,"renderable":0},{"_id":"source/images/img_59b26b4437729.png","path":"images/img_59b26b4437729.png","modified":1,"renderable":0},{"_id":"source/images/img_5a66a577176c8.png","path":"images/img_5a66a577176c8.png","modified":1,"renderable":0},{"_id":"source/images/img_59c35d389b1c5.png","path":"images/img_59c35d389b1c5.png","modified":1,"renderable":0},{"_id":"source/images/san.png","path":"images/san.png","modified":1,"renderable":0},{"_id":"source/images/QQ20161220-0.png","path":"images/QQ20161220-0.png","modified":1,"renderable":0},{"_id":"source/images/img_577330bdc322e.png","path":"images/img_577330bdc322e.png","modified":1,"renderable":0},{"_id":"themes/pure/source/fonts/README.md","path":"fonts/README.md","modified":1,"renderable":1},{"_id":"themes/pure/source/fonts/iconfont.eot","path":"fonts/iconfont.eot","modified":1,"renderable":1},{"_id":"themes/pure/source/fonts/iconfont.ttf","path":"fonts/iconfont.ttf","modified":1,"renderable":1},{"_id":"themes/pure/source/fonts/iconfont.woff","path":"fonts/iconfont.woff","modified":1,"renderable":1},{"_id":"themes/pure/source/images/thumb-default.png","path":"images/thumb-default.png","modified":1,"renderable":1},{"_id":"themes/pure/source/images/xingqiu-qrcode.jpg","path":"images/xingqiu-qrcode.jpg","modified":1,"renderable":1},{"_id":"themes/pure/source/js/application.js","path":"js/application.js","modified":1,"renderable":1},{"_id":"themes/pure/source/js/application.min.js","path":"js/application.min.js","modified":1,"renderable":1},{"_id":"themes/pure/source/js/insight.js","path":"js/insight.js","modified":1,"renderable":1},{"_id":"source/images/1.png","path":"images/1.png","modified":1,"renderable":0},{"_id":"source/images/img_57b1811567e55.png","path":"images/img_57b1811567e55.png","modified":1,"renderable":0},{"_id":"themes/pure/source/js/plugin.min.js","path":"js/plugin.min.js","modified":1,"renderable":1},{"_id":"source/images/img_5b5184bfd49e3.png","path":"images/img_5b5184bfd49e3.png","modified":1,"renderable":0},{"_id":"source/images/img_5bbefa0f833d9.png","path":"images/img_5bbefa0f833d9.png","modified":1,"renderable":0},{"_id":"themes/pure/source/css/style.min.css","path":"css/style.min.css","modified":1,"renderable":1},{"_id":"themes/pure/source/images/avatar.jpg","path":"images/avatar.jpg","modified":1,"renderable":1},{"_id":"themes/pure/source/images/donate/alipayimg.png","path":"images/donate/alipayimg.png","modified":1,"renderable":1},{"_id":"themes/pure/source/images/donate/wechatpayimg.png","path":"images/donate/wechatpayimg.png","modified":1,"renderable":1},{"_id":"themes/pure/source/images/favatar/SzsFox-logo.png","path":"images/favatar/SzsFox-logo.png","modified":1,"renderable":1},{"_id":"themes/pure/source/images/favatar/chuangzaoshi-logo.png","path":"images/favatar/chuangzaoshi-logo.png","modified":1,"renderable":1},{"_id":"themes/pure/source/images/favatar/idesign-logo.png","path":"images/favatar/idesign-logo.png","modified":1,"renderable":1},{"_id":"themes/pure/source/js/jquery.min.js","path":"js/jquery.min.js","modified":1,"renderable":1},{"_id":"themes/pure/source/js/plugin.js.map","path":"js/plugin.js.map","modified":1,"renderable":1},{"_id":"themes/pure/source/js/plugin.js","path":"js/plugin.js","modified":1,"renderable":1},{"_id":"source/images/img_5bbef98529a61.png","path":"images/img_5bbef98529a61.png","modified":1,"renderable":0},{"_id":"themes/pure/source/css/style.css","path":"css/style.css","modified":1,"renderable":1},{"_id":"themes/pure/source/fonts/iconfont.svg","path":"fonts/iconfont.svg","modified":1,"renderable":1},{"_id":"source/images/img_5b5183b84d4dd.png","path":"images/img_5b5183b84d4dd.png","modified":1,"renderable":0},{"_id":"source/images/img_5b5184fb1c8d4.png","path":"images/img_5b5184fb1c8d4.png","modified":1,"renderable":0},{"_id":"source/images/img_59b26b60dc7e7.png","path":"images/img_59b26b60dc7e7.png","modified":1,"renderable":0},{"_id":"source/images/img_59b2697b89208.png","path":"images/img_59b2697b89208.png","modified":1,"renderable":0},{"_id":"source/images/image-20190917165314461.png","path":"images/image-20190917165314461.png","modified":1,"renderable":0},{"_id":"themes/pure/source/images/avatar.png","path":"images/avatar.png","modified":1,"renderable":1},{"_id":"source/images/img_5b518515e4fe7.png","path":"images/img_5b518515e4fe7.png","modified":1,"renderable":0}],"Cache":[{"_id":"source/.DS_Store","hash":"c1c836de9ed247345e9e00a9562288408ee15638","modified":1571470624440},{"_id":"themes/pure/.gitignore","hash":"dbb41a2f30c98cb9de173d82736c46266c901cda","modified":1569565286651},{"_id":"themes/pure/LICENSE","hash":"c480fce396b23997ee23cc535518ffaaf7f458f8","modified":1569565286651},{"_id":"themes/pure/README.cn.md","hash":"a634af4addbb57088935e060e8ec6035ea7bab76","modified":1569565286652},{"_id":"themes/pure/README.md","hash":"5861cec81712af9197a210fd5212d007aad8b0de","modified":1569565286652},{"_id":"themes/pure/_config.yml","hash":"e3be3ec4feb81d999c61c26f04762ddc8532fb64","modified":1572335011748},{"_id":"themes/pure/_config.yml.example","hash":"4714f87fdb6d4a6ea5ece84f4fe37f922337f14d","modified":1569565286653},{"_id":"themes/pure/package.json","hash":"a61723eead5cae2c4d9f0f05cf40d2de7c286fee","modified":1569565286675},{"_id":"source/about/index.md","hash":"69d55cfe8a7f2fe8082dee70ee8dde67ebc1a053","modified":1576134610337},{"_id":"source/categories/index.md","hash":"5d2a4f103d27bebbe3eef1604649d0f5c6d86ac6","modified":1569567292017},{"_id":"source/_posts/Three-shared-storage-comparisons.md","hash":"db56d42ce80a24e73ead69a26c86b869c3ab7444","modified":1571641063060},{"_id":"source/_posts/.DS_Store","hash":"e33573346915414fbc92309321e2db134c67d6c8","modified":1571487123359},{"_id":"source/_posts/apache-auth.md","hash":"e8dd690e7730b1fa9ed6bca7cfe19dc88e06f4a2","modified":1571641062835},{"_id":"source/_posts/apache-configure.md","hash":"c7377ce497d3aee8761a569df8167de9ed91dee3","modified":1571641062923},{"_id":"source/_posts/apache-running-mode.md","hash":"83d2bcc3e2cf02bdbc401558e7719a10912c3f17","modified":1571641063061},{"_id":"source/_posts/apache-webserver.md","hash":"bd4d894b2adcb5586865b92b8b16b006e191276b","modified":1571641062835},{"_id":"source/_posts/apachetop.md","hash":"96d2f16d07414ef26705a4beb299908379139b9b","modified":1571627992562},{"_id":"source/_posts/apppool-0x80-error.md","hash":"2fbdd9f1b94dfe4202dd7fcc876b57138702636b","modified":1571648529437},{"_id":"source/_posts/aws-edge-lambda-modify-origin-host.md","hash":"01528031fbe83ce15ef27e88dd81ffd3afb2c445","modified":1571641063061},{"_id":"source/_posts/build-mysql-proxy.md","hash":"228d2c6e3e09e6190c3dc8811da145cf527e7688","modified":1571641062921},{"_id":"source/_posts/cloud-not-run-curl-config.md","hash":"a499e2120706852fc29d502212db6242e54aaefa","modified":1571641063013},{"_id":"source/_posts/cpulimit.md","hash":"bd0d450f3173d8129f177d03fe86a6dcf031402a","modified":1571641062386},{"_id":"source/_posts/dedecms-yanzhenma.md","hash":"20cb4dbb6d098559ebeda276d6f8803d1066080e","modified":1571641062669},{"_id":"source/_posts/deploy-zabbix_agent-to-windows.md","hash":"aa5f1cc8a16dc458b97bad204ed247cc74490f22","modified":1571641063013},{"_id":"source/_posts/django-reset-admin-password.md","hash":"4501de3d6616ddbaf342f3ba8f7ceac5ba911f74","modified":1571641062570},{"_id":"source/_posts/dns-server.md","hash":"33f4c45949de1ea178d322a3302fe47030149532","modified":1571641062819},{"_id":"source/_posts/dns-view.md","hash":"46a14c5b186deb1ed9f816b10c81b08863281756","modified":1571641062921},{"_id":"source/_posts/docker-privileged.md","hash":"0fec3ef29a2cabd35ad8f7318ea33056d614cad1","modified":1571641063060},{"_id":"source/_posts/domain-status-code.md","hash":"7aa75cbf0c6c2b75bcf143d93d386d9b0f5f1fbb","modified":1571641063047},{"_id":"source/_posts/fix-zabbix-item-not-supported.md","hash":"c3bd1bba5167717748ebfa9eaa2fef201bf75483","modified":1571641062898},{"_id":"source/_posts/graphite_relay-sharding.md","hash":"4b65a77ae92f5f282d618e251b43b5fdea86075d","modified":1571641063060},{"_id":"source/_posts/http-cache.md","hash":"8d78e2f658a05a4126d7350d6e2131d893780b23","modified":1571641062935},{"_id":"source/_posts/iis-auth.md","hash":"494879082ba4a2f9675e5c3b043c5b2f2ec1e7ab","modified":1571648511365},{"_id":"source/_posts/iis-backup-restore.md","hash":"0a2e26180b1dedc2856f73bc32ad362ef8d80883","modified":1571641063060},{"_id":"source/_posts/iis-get-pid.md","hash":"c9221392faabc7c70b584d17b7525a84179bed29","modified":1571641062478},{"_id":"source/_posts/iis-set-urlrewrite.md","hash":"92c1c75387ebc994a3523b55cc411e5cccc0b1fd","modified":1571648399559},{"_id":"source/_posts/iptables-count.md","hash":"0651670e509542a8551365519a4560ad229d609d","modified":1571641062886},{"_id":"source/_posts/iscsi-store.md","hash":"a9af46400acd72f74f77063f65714cdedc47102a","modified":1571641062442},{"_id":"source/_posts/k8s-ingress-nginx.md","hash":"defb867af0a5c7236f1ef3b245c4c14f243435c3","modified":1571641062989},{"_id":"source/_posts/k8s-tcpdump.md","hash":"116768bf717e3cd69a9fb8ca525dadac3926d919","modified":1576134308737},{"_id":"source/_posts/keepalived-multi-server.md","hash":"7911f1133c2a1563ac5da090e601a5e24e4bc802","modified":1571641063061},{"_id":"source/_posts/keepalived-not-support-IPVS.md","hash":"d6aaa54992eaa02991372fccae915d779d82be24","modified":1571641062989},{"_id":"source/_posts/linux-boot-workflow.md","hash":"0b7cc308d99ff8ccb7c39c40a0a49b2c53316edd","modified":1571641062697},{"_id":"source/_posts/linux-crontab-and-at.md","hash":"dd4098f22265421dc4d152d1fc27b9ede65898f3","modified":1571641063061},{"_id":"source/_posts/linux-disable-arp.md","hash":"521a3e6acd19a1ae677680a67bb18858a51b84fc","modified":1571641062477},{"_id":"source/_posts/linux-disk-quota.md","hash":"44b73d9a90d18cc301e3306884a7550b4d68b061","modified":1571641063047},{"_id":"source/_posts/linux-find-commands.md","hash":"58c7f3932b4a1c8ddf794693988bccd0cee5959a","modified":1571641062716},{"_id":"source/_posts/linux-kernal-paramenter.md","hash":"cbff94265911959a9fb1aed1bdee36b0cb021634","modified":1571641063061},{"_id":"source/_posts/linux-limit-tools.md","hash":"8d9f82a4c59c8a4ff933bbbbc7993af79a9bfa25","modified":1571641062327},{"_id":"source/_posts/linux-ln.md","hash":"f183272511a84663eb1bc152648c8b4dd86214f4","modified":1571641062819},{"_id":"source/_posts/linux-log-system.md","hash":"8c2a53db62a6c8a60ccd318c5bf02866d776f094","modified":1571641062910},{"_id":"source/_posts/linux-lvm.md","hash":"908d778a42bb86cc018df23f1d780df9ec646989","modified":1571641062989},{"_id":"source/_posts/linux-nf-conntrack-drop-package.md","hash":"d812c75a86236373e438e39766d3c72536c568fc","modified":1571641062328},{"_id":"source/_posts/linux-premissions-and-acl.md","hash":"4153dd05f1efa034c4cef1a6b289a89e76fec23f","modified":1571641063061},{"_id":"source/_posts/linux-process-manager.md","hash":"ddb1e6875ce2d28e79a68758d2f6a3a04d3cc119","modified":1571641063011},{"_id":"source/_posts/linux-process-status.md","hash":"dd06da3af10c9cf0014871a22636a32bdd02a35c","modified":1571641062805},{"_id":"source/_posts/linux-start-stop-daemon.md","hash":"67997c1963a72700e0b2bfe5fa74e31241172d16","modified":1571641062835},{"_id":"source/_posts/linux-stdin-stdout-stderr.md","hash":"5180f7b5a5ab33ba06dd1902776609adc58ff0ec","modified":1571641063061},{"_id":"source/_posts/linux-tree.md","hash":"138a8cc807f7c991807d4452fcd865573a6b3d9d","modified":1571641063061},{"_id":"source/_posts/linux-user-and-group.md","hash":"d78a04316508a47f293b800a64d050dc4d040356","modified":1571641063061},{"_id":"source/_posts/linux-yum-repo.md","hash":"985ea7988a722d4617e7d36c75c33a8d842fee01","modified":1571641063060},{"_id":"source/_posts/lvs-dr.md","hash":"aebd79918cd3b3791970b6765d8d891be3df9014","modified":1571641063047},{"_id":"source/_posts/lvs-nat-cluster.md","hash":"bfa3eb35a203abcf4b98c247263ea40f629c4417","modified":1571641062819},{"_id":"source/_posts/lvs-three-mode.md","hash":"7d7c13370b48d18b9eae9efa2186bf480eef8ea7","modified":1571641062620},{"_id":"source/_posts/magent-create-memcache-cluster.md","hash":"4357db085c7f48704a39d91e94bd1615e3237fad","modified":1571641062620},{"_id":"source/_posts/mime-type.md","hash":"fa73bd2f96a64c5d7c898ed50bb07bcf8065164b","modified":1571648413031},{"_id":"source/_posts/mssql-deny-save.md","hash":"86e645a4d7b300c237ce5abfd51a621fb4edd4f8","modified":1571648421279},{"_id":"source/_posts/multi-tomcat-server.md","hash":"424dbf2474c01e6e6827ecd008ecb39a639c9b5d","modified":1571641063013},{"_id":"source/_posts/mysql-binlog-recovery-data.md","hash":"46961d51f56ac4a639392fdd150464fe0254a54a","modified":1571641062910},{"_id":"source/_posts/mysql-lock-table.md","hash":"57b044518c0fca222cf5c9c08b7f4c0fc14d39b2","modified":1571641063061},{"_id":"source/_posts/mysql-master-master.md","hash":"8300f36251803c8c482ea83d704f8046c5dbece8","modified":1571641063060},{"_id":"source/_posts/mysql-master-slave.md","hash":"8c6044a5b0f6880a03dc01e8d0a4b3029ff1e34c","modified":1571641062697},{"_id":"source/_posts/mysql-proxy-amoeba.md","hash":"16b7e9e3709c875e24b52b3f1fddc54cf3065e24","modified":1571728425997},{"_id":"source/_posts/mysqlcheck.md","hash":"8648ee3f94dc6ecf4ff37126d74d3fac2b2faeb2","modified":1571648516752},{"_id":"source/_posts/mysqldump-error.md","hash":"1dbba936a7daebbd6d41d0d6184837ac48a9d20e","modified":1571480548240},{"_id":"source/_posts/nginx-referer.md","hash":"28c9171c941a31486d2278aa9f6bfb1209f83a38","modified":1571479949779},{"_id":"source/_posts/nginx-remote-port-is-null.md","hash":"9b18080d126d50d70d6a9aaef329b7e5ffe6499e","modified":1576134412916},{"_id":"source/_posts/nginx-server_name_hash_bucket_size.md","hash":"0fa41a295319819d2b7a15fe6ac65b1fb53386a4","modified":1571641063017},{"_id":"source/_posts/nginx-uwsgi-deploy-django.md","hash":"e33d6ca580bbb50876ff3d3303a7135666713ed7","modified":1571641062570},{"_id":"source/_posts/nginx-websocket-proxying.md","hash":"00edcb45d2b43ff3b0a5bffb714733d3d85560a3","modified":1571641062989},{"_id":"source/_posts/ntp-server.md","hash":"cf3682274b58286e141f944461d3d87f765aa7b5","modified":1571641062386},{"_id":"source/_posts/php-data-timezone.md","hash":"417f4274386362b1bdcf104468dcc54304273959","modified":1571641062386},{"_id":"source/_posts/php_curl.md","hash":"e00f52a0e09579fdab4676b3426126e177289a3a","modified":1571641062702},{"_id":"source/_posts/phpcms-v9-password-retry-too-more.md","hash":"0689a27220c5a2e07f9ea338ba82a28ae385b76c","modified":1571648534347},{"_id":"source/_posts/phpmyadmin-upload-limit-size.md","hash":"8a1b995bedc514dc0ff2bbb55fcdb80d5b1f6c05","modified":1571648522048},{"_id":"source/_posts/postgresql-replica-status.md","hash":"9da3e5c4c1fee73fa8f3bd3277d78bd685b4e5c3","modified":1571478034388},{"_id":"source/_posts/pxe-kickstart.md","hash":"99ad47153bf4795feeb760abf17db7acfe8d9bf5","modified":1571641063002},{"_id":"source/_posts/python-code-socket.md","hash":"ea4ec2b3b83b4e8a7c0674d7212bc2f9e0a7499d","modified":1571641062386},{"_id":"source/_posts/python-is.md","hash":"b9b50a3f926649789988542890c2c9679b65b136","modified":1571641062910},{"_id":"source/_posts/python-send-mail.md","hash":"0e614dbfb8595f8c1389633ee808bfa2cf035fac","modified":1571641063061},{"_id":"source/_posts/python-tab.md","hash":"b5f1d34b3efeeb31ac70b0a80e30f20382af5e3b","modified":1571477236679},{"_id":"source/_posts/rbash-add-readonly-user.md","hash":"a6e15fa2fccd50bd1487bbcda0640353977f9702","modified":1571641062831},{"_id":"source/_posts/redis-dump.md","hash":"4f413f55689aeb47452085756053cb28efde4a15","modified":1571476144060},{"_id":"source/_posts/redis-maxmemory-policy.md","hash":"3b8385e13809e5db9de5228f9a5fc789675a0851","modified":1571476282213},{"_id":"source/_posts/redis-repl_diskless_replication.md","hash":"660c960ff464635c01fd4c32186f2acea0bac044","modified":1571641062620},{"_id":"source/_posts/redis-slave-replica.md","hash":"0a55334a4b16b5fcab891f3c869b3303db804117","modified":1571474621709},{"_id":"source/_posts/redis-trib-rb-create-cluster.md","hash":"47c180f0c3e7cd51d67fb9f0cd27a274e7e00569","modified":1571641062922},{"_id":"source/_posts/redis-trib-rb.md","hash":"87b879e221c7a462f035c24e8b1d0c2d9c33b3ba","modified":1571641062989},{"_id":"source/_posts/repcache-magent.md","hash":"11300e503326085461501c416cf2f68707391db7","modified":1571641062570},{"_id":"source/_posts/rhcs-ha-cluster.md","hash":"c3d70daf29f6178293e362e6614cdeae4ac7d304","modified":1571473629995},{"_id":"source/_posts/session_start-error.md","hash":"4ba7bc0b551b9802b45563c9ea5896596f1b32bb","modified":1571648555142},{"_id":"source/_posts/shell-advance-variable.md","hash":"76a4f26533613428cb929046437c2b62fde897a3","modified":1571641062989},{"_id":"source/_posts/shell-command-watch.md","hash":"90e609617f9d27977fa66df4b0fefa8b68356a52","modified":1571641062819},{"_id":"source/_posts/shell-special-env-variable.md","hash":"54cc5c90ae67f247399ae6a75d4cdf7330d904d6","modified":1571472382355},{"_id":"source/_posts/slb-502-debug.md","hash":"f812518051edfe6cd48af38788cbf1d0524b474f","modified":1571472707770},{"_id":"source/_posts/ssh-authorizedkeyscommand.md","hash":"ba403afdfb215394d65992d2a09447386eff51be","modified":1571641063061},{"_id":"source/_posts/statsd-cluster-proxy.md","hash":"2188629e28d325d041a130182da3f4265fc9e4db","modified":1571641062329},{"_id":"source/_posts/tcp-state.md","hash":"4455aea22e2a1ac79498ed4d77949af8da39caab","modified":1571641062714},{"_id":"source/_posts/tcp-time_wait.md","hash":"f7b803a615582b2e37cfac2072db3dee24d3fc62","modified":1571470803304},{"_id":"source/_posts/tomcat-change-webroot.md","hash":"7ceaf8ec7736874036377b9e733fb419aa3bb95d","modified":1571469886748},{"_id":"source/_posts/tomcat-permgen-space.md","hash":"b059ea769938d034cd3f1535410182869ceca12b","modified":1571641062570},{"_id":"source/_posts/tomcat-server-name-alias.md","hash":"c290f4f9e75aab22aeaaee5fc0e2b7175bf14066","modified":1571641062989},{"_id":"source/_posts/tomcat-server.md","hash":"41a98dcef70ef90518f11e5a134ca1a7e43be80b","modified":1571641063018},{"_id":"source/_posts/tomcat-virtual-host.md","hash":"c24d3b3e5e23844c00f2f889d4cc82385ba76d89","modified":1571469612516},{"_id":"source/_posts/transaction-isolation-level.md","hash":"7802763be224fdd517b81c194d5f3623ff4f172e","modified":1571726898709},{"_id":"source/_posts/twemproxu.md","hash":"bf3197f649e2dc17245a62d86938ea84a83ac00e","modified":1571641062606},{"_id":"source/_posts/twemproxy-configure.md","hash":"bf240a155fe5704bc3af6402fe91c558a0e8a8bf","modified":1571641062989},{"_id":"source/_posts/udev.md","hash":"c1954146ca4f2dfc75fc8453505de821dbd5d679","modified":1571641062910},{"_id":"source/_posts/uwsgi-invalid-option-x-getopt_long-error.md","hash":"5f4db1c760289c2ec3c40a722e1ffa63d8cc97c8","modified":1571641062571},{"_id":"source/_posts/vagrant-mulit-vm.md","hash":"90428d956ea1283c7e462e653b0770b82ebf7b93","modified":1571641062570},{"_id":"source/_posts/vagrant.md","hash":"e5aff4a05201df85aef5bfb97a7ab37bd517672c","modified":1571641062697},{"_id":"source/_posts/vagrantfile.md","hash":"45330e90deb16230b20a1abeeb489fb5861bf91a","modified":1571641062922},{"_id":"source/_posts/vcenter-expand-disk-to-linux.md","hash":"c2c7df044f80053d71deb604e2c4ca85f9f8d42e","modified":1571641062697},{"_id":"source/_posts/vcenter-expand-disk-to-windows.md","hash":"60e92d47a5a1a660dde77d1f893b046d67977440","modified":1571641062593},{"_id":"source/_posts/website-download-apk.md","hash":"1f86a4e2fca5df1230c75fda6e5814481df3d920","modified":1571648539371},{"_id":"source/_posts/window-force-delete-file.md","hash":"7aac78a6048c92ebbdeeb24a77e268142e90a92d","modified":1571728374182},{"_id":"source/_posts/windows-cant-open-contral.md","hash":"f5bbe2db4bdbc9df90f31003279a86a68dc42765","modified":1571648544150},{"_id":"source/_posts/windows-server-memory-limit.md","hash":"bdfb8b07bdaa9f06d54f2f520c4c76f45472dc46","modified":1571648549360},{"_id":"source/_posts/zabbix-alert-to-wechat-script.md","hash":"06599a9a32ce880fd0cc9d8e5a0b2f4c5e3bba34","modified":1571641063061},{"_id":"source/_posts/zabbix-distrubuted-monitor.md","hash":"064cd795c39b3c58947e03bc5a28aa590323f36e","modified":1571641062570},{"_id":"source/_posts/zabbix-less-than-25-free-in-the-configuration-cache.md","hash":"109f4174237067c645df98dad1be643db073622d","modified":1571641062921},{"_id":"source/_posts/zabbix-monitor-memcache.md","hash":"a92b062aa325946c8654e5cd47575a841214c145","modified":1571641062702},{"_id":"source/_posts/zabbix-monitor-mongo.md","hash":"699ce84be4e96c4432270f7c8dc81f47e7817ddd","modified":1571641063061},{"_id":"source/_posts/zabbix-monitor-port.md","hash":"68a36cc910472b5803ad67d88cf403b819317809","modified":1571641062819},{"_id":"source/_posts/zabbix-monitor-process.md","hash":"993e13ffa11bd57c44b62d1c24489338a83c44ea","modified":1571641062493},{"_id":"source/_posts/zabbix-monitor-redis.md","hash":"d044084fc6617e552b6993b9b66a0db2fbab70b2","modified":1571641062697},{"_id":"source/_posts/zabbix-monitor-ssl-cert.md","hash":"ad1a6cf206e327a093f9daad03d3bce6f72bd9b6","modified":1571641063061},{"_id":"source/_posts/zabbix-server-configure.md","hash":"8e794ea63caefcc71bb3b408d39524a9efbc70f9","modified":1571641063061},{"_id":"source/_posts/zabbix-trigger-function.md","hash":"b6ee7ce758df9b28c1ecb9f7d8deba9328716a58","modified":1571641062328},{"_id":"source/_posts/zentaopms-deployment.md","hash":"4300bd9fedf18fb0691e115ef80c805c5f24f4d3","modified":1571641063061},{"_id":"source/links/index.md","hash":"826e230a39513d3e6d5d2940388d11f82235433e","modified":1571650400417},{"_id":"source/images/11-300x286.png","hash":"1b12c82d7e221312540e39d99c91f6a8357df045","modified":1571637001151},{"_id":"source/images/2-250x300.png","hash":"2e1cd3283898c2f7c5825ca123a2a97c1e381fc9","modified":1571637001133},{"_id":"source/images/DOC8GFX6-300x139.png","hash":"f40599b0599fcd031a74342e9d0d1c37f8778a9c","modified":1571637001137},{"_id":"source/images/apachetest-300x89.png","hash":"3a0b80e416b6294476ff50d2e22d50163ac57039","modified":1571628310088},{"_id":"source/images/clipboard.png","hash":"db17335ae3dc732502a3ff4dddacbd85e9a04414","modified":1571483202441},{"_id":"source/images/clipboard1-300x134-20190917165133735.png","hash":"2f35aad40c96d7428f7f920b344c69d667590eae","modified":1569486916577},{"_id":"source/images/clipboard1-300x134.png","hash":"2f35aad40c96d7428f7f920b344c69d667590eae","modified":1569486916598},{"_id":"source/images/clipboard2-246x300.png","hash":"496568a3c79a421c35ee076cdd967d566ec074dd","modified":1571637001183},{"_id":"source/images/ha.png","hash":"59ffdc2daf448ab87e8bb9b24514ce094e058816","modified":1571473152476},{"_id":"source/images/ha2.png","hash":"22419e7881858256a0ed8e34b648201308864dae","modified":1571473152460},{"_id":"source/images/hainstall.png","hash":"46f87efb34cb01db975e87cf9bb6e9f7262b20c0","modified":1571473152477},{"_id":"source/images/http-cache-control.png","hash":"6593afbbabcb0996359e27a77353998aa9759f1b","modified":1571499140901},{"_id":"source/images/image-20191021135643975.png","hash":"f6dacb60c8ef4f12205c7d0abada960dbe0159c5","modified":1571637403976},{"_id":"source/images/image.png","hash":"2dead1110ec1f44037aae6b3477cf63674a7044c","modified":1571499140245},{"_id":"source/images/img_56f4a9789a5c5.png","hash":"f841b8b06e115c191f755aad6efc96b652cdb038","modified":1571630316650},{"_id":"source/images/img_56f4a99aa9435.png","hash":"9a81670acdac1c8a9e71a21c62ff0c664febf18f","modified":1571630316666},{"_id":"source/images/img_56f4a9875257e.png","hash":"53ffc7aeb28fa2bb3d6f139410ca4effd516b0a1","modified":1571630317030},{"_id":"source/images/img_56f4a9ab888d0.png","hash":"a3384d08c417ce42df34a4d847eed880a896acf7","modified":1571630316680},{"_id":"source/images/img_56f4aa6c69a26-20190917143633077.png","hash":"1854be7b0916af4648c9a314593c8b8990d751c0","modified":1569486916597},{"_id":"source/images/img_56f4aa8c14ae0-20190917143633236.png","hash":"09c4d00f74e00656eb1bef1140adc7802b785777","modified":1569486916574},{"_id":"source/images/img_56f4aa8c14ae0-20190917145027287.png","hash":"09c4d00f74e00656eb1bef1140adc7802b785777","modified":1569486916578},{"_id":"source/images/img_56f4aa989af5e-20190917143633212.png","hash":"f810f94576d604af90d0bd665323e784a5eb7bcc","modified":1569486916568},{"_id":"source/images/img_570da13048078.png","hash":"0292f0426e9a4ec009abc39964e81c6814273394","modified":1569486916566},{"_id":"source/images/img_570da1465a8dc.png","hash":"561da3e1edaaff1999fa203bd938bdf89967d980","modified":1569486916579},{"_id":"source/images/img_570da15f9ead1.png","hash":"c256a1f98473d58727b1aa2258c8b298eaf5d052","modified":1569486916580},{"_id":"source/images/img_5773310c679a1.png","hash":"84ddd7cd21942ad93875be02c5952db2eb9491bb","modified":1569486916571},{"_id":"source/images/img_5877344e51cd6.png","hash":"b47b4cd849a434480681e14bc9b0e63bbb939e8c","modified":1569486916611},{"_id":"source/images/img_587dde19b6b47.png","hash":"766c8be87b4ea15ac8f367049ef2721b93d2cfa7","modified":1571623665167},{"_id":"source/images/img_58802ffca93b9.png","hash":"6920935b7932b8eb29931460f184c8b20e0ee264","modified":1569486916583},{"_id":"source/images/img_588031f4a62e1.png","hash":"c51c318af01f841991aa58a499fc57962931d891","modified":1569486916590},{"_id":"source/images/img_58803215d9370.png","hash":"41db0b6faee076ba536348173c572f39ed14d4f8","modified":1569486916601},{"_id":"source/images/img_5880322f10890.png","hash":"e73fa0d077b8972d69073abfa0782067d672730c","modified":1569486916569},{"_id":"source/images/img_58ddc18a1993a.png","hash":"e3e303a981a79e6480b9289198baafa631369c2c","modified":1571623469019},{"_id":"source/images/img_58ddc1b2d8078.png","hash":"53f19404471eb2437000d50dafdadab98bbb80ef","modified":1571623469063},{"_id":"source/images/img_58ddc20c6f8c3.png","hash":"6637028cc18d347669ffdd962580203d19b12cc2","modified":1571623469064},{"_id":"source/images/img_59b269634a216.png","hash":"51c6094920e288cb233d611dabcc247659ea8d3e","modified":1571470923027},{"_id":"source/images/img_59b2698d5658f.png","hash":"c7308db8045ee884af54a6d83c767e8c6d4e7274","modified":1571470922966},{"_id":"source/images/img_59b26b3126991.png","hash":"5c2aed7fcc584c781e2b59ed657ee83be98b8218","modified":1571499469134},{"_id":"source/images/img_59c35cd9ab71b.png","hash":"602cda8dd6854cb3e6f0d7d80ca6af569a49d02b","modified":1569486916586},{"_id":"source/images/img_59c35d1d930c1.png","hash":"299bbc1a1fb906d810f706e7a3e292e5cb98df99","modified":1569486916585},{"_id":"source/images/lvsnat.png","hash":"d1248d59fdedefb0f4d8189cdb31e2206bd19cfb","modified":1569486916608},{"_id":"source/images/tomcat-300x84.png","hash":"41ef0d0d8c20b8f12e845db1b342633b6c9e24c2","modified":1571390811653},{"_id":"source/repository/index.md","hash":"ed0e082c30f233dd5c140d188f1e4bce44bdbf79","modified":1569567301567},{"_id":"source/tags/index.md","hash":"22dd3308e0a3db852e008fa8c8d526142e790dcb","modified":1569490386254},{"_id":"source/tips/index.md","hash":"dfbdc60b84c51dd11d375c8dd48e80dbdf662df0","modified":1571648284018},{"_id":"themes/pure/languages/default.yml","hash":"167ea0db98f4db156ea68c4644f64c0287ae2b6f","modified":1569565286655},{"_id":"themes/pure/languages/en.yml","hash":"167ea0db98f4db156ea68c4644f64c0287ae2b6f","modified":1569565286655},{"_id":"themes/pure/languages/zh-CN.yml","hash":"057ebc043f09449af9768791c89c86dfc2938365","modified":1569565286655},{"_id":"themes/pure/languages/zh-TW.yml","hash":"6d27c3114be539b8783ffce944f68b2e26a8c3b9","modified":1569565286656},{"_id":"themes/pure/layout/about.ejs","hash":"4f5c769e183249b12eb9d3141432bc0039519730","modified":1569565286672},{"_id":"themes/pure/layout/archive.ejs","hash":"ded5d953b35666e30f4c6e48e2d2c62af8d95ebf","modified":1569565286672},{"_id":"themes/pure/layout/books.ejs","hash":"6c64719cd7071b5319b01339aa524fdaab391385","modified":1569565286672},{"_id":"themes/pure/layout/categories.ejs","hash":"22a2bc1712dd9ba1a3027e875d636132d334fb00","modified":1569565286673},{"_id":"themes/pure/layout/category.ejs","hash":"3ca5651bbce7b0c280c906468f2eb18c2e55ebcb","modified":1569565286673},{"_id":"themes/pure/layout/index.ejs","hash":"07825d8d8b21eb7b694f5585567b9df5c5a91a60","modified":1569565286674},{"_id":"themes/pure/layout/layout.ejs","hash":"a29ab2e881954a252bfc0dc1a7eb5aa52768dd2a","modified":1569565286674},{"_id":"themes/pure/layout/links.ejs","hash":"77c5d1561e2c606c5b3bb39610133d84324074df","modified":1569565286674},{"_id":"themes/pure/layout/page.ejs","hash":"5c27475c176627e6e2e6a16172eb6980e56bcaff","modified":1569565286674},{"_id":"themes/pure/layout/post.ejs","hash":"5c27475c176627e6e2e6a16172eb6980e56bcaff","modified":1569565286674},{"_id":"themes/pure/layout/repository.ejs","hash":"fe4b3e051a8b0debe9ee22c2cc2cc935d92ee23f","modified":1569565286674},{"_id":"themes/pure/layout/tag.ejs","hash":"df60564c162f7ad3422f8959dfea19351857a7cd","modified":1569565286674},{"_id":"themes/pure/layout/tags.ejs","hash":"29f19a6ed10f8b1f069259a7aeaaacddcfaa2ed4","modified":1569565286675},{"_id":"themes/pure/scripts/thumbnail.js","hash":"e667a611f9baac270281b765832020d50bf8fb7f","modified":1569565286689},{"_id":"themes/pure/source/favicon.png","hash":"8ee63c36da95b5e2083a84c7798d16c045fc71b6","modified":1571294817480},{"_id":"source/images/image-20191018151450374.png","hash":"30058eb5e01ed0926dea58791fd0b508c5758735","modified":1571382890374},{"_id":"source/images/image-20191018172515467.png","hash":"21fb97c079dd7e42e3f740e0fc067a5ac8722159","modified":1571390715469},{"_id":"source/images/image-20191021135659882.png","hash":"bafb09c042885b8954e23b19dfd195742c836e92","modified":1571637419882},{"_id":"source/images/image-20191021135714997.png","hash":"f4261de4235e16a616bae98494b6898e5b3147cf","modified":1571637434998},{"_id":"source/images/image-20191021135724279.png","hash":"4eee96043d0eb02254acff5b183f3a5ee6eae784","modified":1571637444279},{"_id":"source/images/img_56f4aa5d219ba-20190917143633356.png","hash":"32aaa1e95a4f871499b08b384eeaeeec34518d0c","modified":1569486916566},{"_id":"source/images/img_56f4aa815cb3c-20190917143633401.png","hash":"85842619f56096d94dc496b659e8e9c7d1cf02d3","modified":1569486916610},{"_id":"source/images/img_570da173ef401.png","hash":"722a7d3c25090830d23aa2656d7f262f8db5de34","modified":1569486916595},{"_id":"source/images/img_577330e1e5d06.png","hash":"2ad2f39c516a0b62a7b9fd2b9e2099d01e0efa24","modified":1569486916576},{"_id":"source/images/img_577330f8871b5.png","hash":"d545dc4f729b5d7a5e5d24d20f8dfe609be300d9","modified":1569486916588},{"_id":"source/images/img_5773313591d94.png","hash":"77e4c5b14a0dcda0e86977ba0bf899e4b7124947","modified":1569486916582},{"_id":"source/images/img_57733153a13cb.png","hash":"beb066fff61bdfe490890a847b21f3a42dcbdc12","modified":1569486916609},{"_id":"source/images/img_587733a5ae0ba.png","hash":"ef234d83dfbb9d3346bc271b3d49cb081cd046e9","modified":1569486916603},{"_id":"source/images/img_5877340a43dea.png","hash":"02d0360688cddd0d1490df01a0282bd793d63dce","modified":1569486916599},{"_id":"source/images/img_587ddd23c02a3.png","hash":"0b3ec3f54e9057bda815651e0806dc5acdeec335","modified":1571623665294},{"_id":"source/images/img_59b26b4437729.png","hash":"4948ab6dee9db76e37dd56547ca3d45249ae5190","modified":1571499469133},{"_id":"source/images/img_5a66a577176c8.png","hash":"d623866b5c05e05f905c1fc739f23d2234249784","modified":1571470580793},{"_id":"source/images/img_59c35d389b1c5.png","hash":"50a728e86b1f9ef5e7e012db3f43cf3244a38927","modified":1569486916584},{"_id":"source/images/san.png","hash":"e468f9b1f14503d51842dc8f56edb9b5fc75e9b2","modified":1571499791803},{"_id":"themes/pure/screenshot/pure-theme-black.png","hash":"10b40f398af7eb7e8ba2bf2f2a959d8779fc1fe1","modified":1569565286676},{"_id":"themes/pure/screenshot/pure-theme-blue.png","hash":"6146890a68d5ea9d343c48d50151ddd5a2a1872c","modified":1569565286677},{"_id":"themes/pure/screenshot/pure-theme-green.png","hash":"12ec0c6033cb2762839fdf75434bbb4fbf946022","modified":1569565286678},{"_id":"themes/pure/screenshot/pure-theme-purple.png","hash":"9855d2eb0acd23370209354f232471df8f4f72e2","modified":1569565286679},{"_id":"themes/pure/screenshot/pure.png","hash":"8f4cfd8d7edfa4fbffdf375291302d9807f5cc1c","modified":1569565286680},{"_id":"source/images/QQ20161220-0.png","hash":"41308380ef4ee41f73f776300e1595b9d7f63189","modified":1571629328805},{"_id":"source/images/img_577330bdc322e.png","hash":"8e6e049cb4c08d9c845ee1a08220fd7b30dc9c9a","modified":1569486916593},{"_id":"themes/pure/_source/404/index.md","hash":"8d493f624fdd29c8d0266767e56f343d549e16d8","modified":1569565286653},{"_id":"themes/pure/_source/_data/gallery.yml","hash":"e2b3fad87be3d1cfde1effa655d39678ee90907e","modified":1569565286654},{"_id":"themes/pure/_source/_data/links.yml","hash":"aa443a4508550820c77c2a4f6abff1d38ad85054","modified":1569565286654},{"_id":"themes/pure/_source/about/index.md","hash":"9c95cabb533409d06daefc4295021ad199761efc","modified":1569565286654},{"_id":"themes/pure/_source/categories/index.md","hash":"5d2a4f103d27bebbe3eef1604649d0f5c6d86ac6","modified":1569565286654},{"_id":"themes/pure/_source/books/index.md","hash":"cf4163959c23244059cbbbc1c0fe379cc3b2cb73","modified":1569565286654},{"_id":"themes/pure/_source/links/index.md","hash":"febcf87eb0ab3c5080578275d25f3970bba39625","modified":1569565286655},{"_id":"themes/pure/_source/repository/index.md","hash":"ed0e082c30f233dd5c140d188f1e4bce44bdbf79","modified":1569565286655},{"_id":"themes/pure/_source/tags/index.md","hash":"42e9c904ea63b0a7dd4033e2e8f153225bc5cda5","modified":1569565286655},{"_id":"themes/pure/layout/_common/footer.ejs","hash":"61ec9d04eaafc44b702294951c3ae03bb53df201","modified":1571653652891},{"_id":"themes/pure/layout/_common/head.ejs","hash":"560eb7b9a52f5ec0b3d7a3b133e49baa56c62cd2","modified":1571654034582},{"_id":"themes/pure/layout/_common/header.ejs","hash":"eb98e355f7785bb9befc2bd3ea0a1311ddbb1c69","modified":1571647939770},{"_id":"themes/pure/layout/_common/script.ejs","hash":"0031114d2a58f8601c2869f78ceedc75a10be90d","modified":1569565286657},{"_id":"themes/pure/layout/_common/social.ejs","hash":"a35a2610e9da762df96587b76b51470507a88cad","modified":1569565286657},{"_id":"themes/pure/layout/_partial/archive-book.ejs","hash":"977f97f3636947006ad738e502858c46d4cd5ec7","modified":1569565286657},{"_id":"themes/pure/layout/_partial/archive-category.ejs","hash":"9c364fd6b5172890784141802f5f466241d233fd","modified":1569565286657},{"_id":"themes/pure/layout/_partial/archive-link.ejs","hash":"fe4d9bf526d8176683cea89b8561ced571374db0","modified":1569565286657},{"_id":"themes/pure/layout/_partial/archive-list.ejs","hash":"c66c86d6a6a90e00494c380603426fc0f4006311","modified":1569565286658},{"_id":"themes/pure/layout/_partial/archive-post.ejs","hash":"13039fec017332029122ef99901755fcecbfc8ea","modified":1569565286658},{"_id":"themes/pure/layout/_partial/archive-repository.ejs","hash":"e39dc762d9fe238cede462532e40eaa3d8651122","modified":1569565286658},{"_id":"themes/pure/layout/_partial/archive-tag.ejs","hash":"5de90244c3cedad531cccc03c40e5f9a3aef3c61","modified":1569565286658},{"_id":"themes/pure/layout/_partial/archive.ejs","hash":"4d6793f50d41fbd47dc50aa36b24d496006bba6c","modified":1569565286658},{"_id":"themes/pure/layout/_partial/article-about.ejs","hash":"7b80319daeb63401d1745b81cd9a6d1d21a4fb60","modified":1569565286658},{"_id":"themes/pure/layout/_partial/article.ejs","hash":"06186553b96d89b9bdfd2342cdab63a7ebeaf6ac","modified":1571737351208},{"_id":"themes/pure/layout/_partial/item-post.ejs","hash":"9f755b0da1ea928dece32c2050d8a04b3a9fb13b","modified":1569565286659},{"_id":"themes/pure/layout/_partial/pagination.ejs","hash":"cbd4ce1472c89c07a09f0ebaa268559c08d42104","modified":1571732374013},{"_id":"themes/pure/layout/_partial/sidebar-about.ejs","hash":"e10ea0176ba87e64888234bafedc01c92544352c","modified":1569565286662},{"_id":"themes/pure/layout/_partial/sidebar-toc.ejs","hash":"152538ceceb0fdef65c46470ebf0189f7b891c5b","modified":1569565286662},{"_id":"themes/pure/layout/_partial/sidebar.ejs","hash":"2aa8a9f90838e7c105e75e6d3d03cbf860bb1239","modified":1569565286662},{"_id":"themes/pure/layout/_script/analytics.ejs","hash":"e756a81f8c20a187fb863b9689f2f1fa15e2f4e1","modified":1569565286665},{"_id":"themes/pure/layout/_script/comment.ejs","hash":"6f951510bab9dc15474b6664e0329defccf29a30","modified":1569565286666},{"_id":"themes/pure/layout/_script/douban.ejs","hash":"143087db0573772b0bdaf7f93312553158942ec7","modified":1569565286666},{"_id":"themes/pure/layout/_script/fancybox.ejs","hash":"8f1be01e70a15b2c31ae57d8c6bce54622ebf8a7","modified":1569565286666},{"_id":"themes/pure/layout/_script/mathjax.ejs","hash":"f618393ab971b2faa80d541f2e6a553d9ace9816","modified":1569565286666},{"_id":"themes/pure/layout/_script/pv.ejs","hash":"fb9b5f16029f2ccef4b83cf4facfdcdd748b65b4","modified":1569565286667},{"_id":"themes/pure/layout/_script/repository.ejs","hash":"14f2e7d4c1055ff6a5f5867dc0e9a9f6f4c28fe1","modified":1569565286667},{"_id":"themes/pure/layout/_script/search.ejs","hash":"7be33dc260ce788aa1a2cd3bd0386d95057533cb","modified":1569565286667},{"_id":"themes/pure/layout/_search/baidu.ejs","hash":"67aab280a3ea34429f086cc5c3de7de17727c567","modified":1569565286667},{"_id":"themes/pure/layout/_search/index-mobile.ejs","hash":"c726e234c0166da69fdfbd3dd613a5eaf4c80258","modified":1569565286667},{"_id":"themes/pure/layout/_search/index.ejs","hash":"f8d5a9c3f777250f5fb6512bba585307f784d5cd","modified":1569565286668},{"_id":"themes/pure/layout/_search/insight.ejs","hash":"4af3e92ef98bedba9680d45699cb04dde4640536","modified":1569565286668},{"_id":"themes/pure/layout/_search/swiftype.ejs","hash":"4baeca36e410181300ae7d47ba1fb4755bcfcff0","modified":1569565286668},{"_id":"themes/pure/layout/_widget/archive.ejs","hash":"af8ad7f62877764b75d5272d9d899fd6c8e3845c","modified":1569565286668},{"_id":"themes/pure/layout/_widget/category.ejs","hash":"331b7642a0f58b9088b937436ab39076a4c5dd7e","modified":1569565286671},{"_id":"themes/pure/layout/_widget/board.ejs","hash":"acd27451be52703e670ce0b313f2da6fa24071e4","modified":1569565286668},{"_id":"themes/pure/layout/_widget/recent_posts.ejs","hash":"8942d60311797a591ba2d157c5cdd23e85ceb694","modified":1569565286671},{"_id":"themes/pure/layout/_widget/tag.ejs","hash":"487628925da5fcac91463cdad3d9e55d071bd5ed","modified":1569565286672},{"_id":"themes/pure/layout/_widget/tagcloud.ejs","hash":"3291108e5411c48b2c5b3e17adace6ffa90d1c29","modified":1569565286672},{"_id":"themes/pure/source/fonts/README.md","hash":"c5772b99ad81291fb137b330813f866bdceea0a3","modified":1569565286696},{"_id":"themes/pure/source/fonts/iconfont.eot","hash":"6819d9bb643bdeafc17bfecb0746ae641b018fdf","modified":1569565286697},{"_id":"themes/pure/source/fonts/iconfont.ttf","hash":"9b8837f9f79cf6ab794736301d0665345183a20c","modified":1569565286699},{"_id":"themes/pure/source/fonts/iconfont.woff","hash":"78d29194287b8885d25212048c4f787705212a6e","modified":1569565286700},{"_id":"themes/pure/source/images/thumb-default.png","hash":"e8403b97ed9251f9f5207765b0ce796c5000b4ba","modified":1569565286702},{"_id":"themes/pure/source/images/xingqiu-qrcode.jpg","hash":"ef2c2848dc79db6df7c752510651ed8ba57f2daf","modified":1569565286702},{"_id":"themes/pure/source/js/application.js","hash":"46d1fb207ce5f0acb83803f927985dfcea86f9ef","modified":1569565286702},{"_id":"themes/pure/source/js/application.min.js","hash":"34d765e982c7d6360c37f82202d99f63ac40e408","modified":1569565286702},{"_id":"themes/pure/source/js/insight.js","hash":"078880783984873abc0f53701f6a92295b81f9b1","modified":1571728088567},{"_id":"source/images/1.png","hash":"fbe8f2067ce2f6c7423cfef7f7a5b6639da08662","modified":1571483202558},{"_id":"source/images/img_57b1811567e55.png","hash":"f57f2b990ca2dafd270adf4461ccf1c6b64172dc","modified":1571627974751},{"_id":"themes/pure/source/js/plugin.min.js","hash":"07fe34638f9832702c5f81d8583c5e4e8b3d9659","modified":1569565286707},{"_id":"source/images/img_5b5184bfd49e3.png","hash":"bee215303308e2cede55ddbba94846ebfaab7de1","modified":1571471894772},{"_id":"source/images/img_5bbefa0f833d9.png","hash":"3b368170e1f12c845932f3fdafa8be65da7c111e","modified":1571631118261},{"_id":"themes/pure/layout/_partial/post/category.ejs","hash":"fcee6b4aef8b6c4627831ff8dbb2d73478511426","modified":1569565286659},{"_id":"themes/pure/layout/_partial/post/comment.ejs","hash":"3c0da69fcea6ccfd97b82d50e740107a88eec5c4","modified":1569565286659},{"_id":"themes/pure/layout/_partial/post/copyright.ejs","hash":"abcd8d3ea9fc962f83fdf75f6e7c1a0916a3a28c","modified":1571737887232},{"_id":"themes/pure/layout/_partial/post/date.ejs","hash":"7d4979652998abf92a64bfae8157b70d6e514057","modified":1569565286660},{"_id":"themes/pure/layout/_partial/post/donate.ejs","hash":"a251dc34d660601a2e8b7d98b3bfe2b9023dbbce","modified":1569565286661},{"_id":"themes/pure/layout/_partial/post/gallery.ejs","hash":"3d9d81a3c693ff2378ef06ddb6810254e509de5b","modified":1569565286661},{"_id":"themes/pure/layout/_partial/post/nav.ejs","hash":"95eabc0fe4033ec61b240a16eeaf7dc62a9e3da1","modified":1569565286661},{"_id":"themes/pure/layout/_partial/post/pv.ejs","hash":"ec3ccf322432afc2761f860c5a3000ac34d46e4c","modified":1569565286661},{"_id":"themes/pure/layout/_partial/post/tag.ejs","hash":"39f53ead07f75c181a7ba93e586dd1b8171620f1","modified":1569565286661},{"_id":"themes/pure/layout/_partial/post/thumbnail.ejs","hash":"080d5c5f3e95accf51893a7092695fe32d34a087","modified":1569565286661},{"_id":"themes/pure/layout/_partial/post/title.ejs","hash":"2f275739b6f1193c123646a5a31f37d48644c667","modified":1569565286661},{"_id":"themes/pure/layout/_partial/post/wordcount.ejs","hash":"bd06c4c8449ed96aabf655fe1ae3be1f0707b81e","modified":1569565286661},{"_id":"themes/pure/layout/_script/_analytics/baidu-analytics.ejs","hash":"f314be7860c1d5930f1600d010e3120ba5c85325","modified":1569565286662},{"_id":"themes/pure/layout/_script/_analytics/google-analytics.ejs","hash":"54f1dc9375cbdb65464e0ac1b58847aa5e8bc6a5","modified":1569565286662},{"_id":"themes/pure/layout/_script/_analytics/tencent-analytics.ejs","hash":"77defb41a1613a758ff5a6a5128c6107fc584190","modified":1569565286663},{"_id":"themes/pure/layout/_script/_comment/disqus.ejs","hash":"a051e3eddc75586e69131c29ab8c89d69626e0fd","modified":1569565286663},{"_id":"themes/pure/layout/_script/_comment/gitalk.ejs","hash":"fb01f1631c3ae7fe6211dc03233506cb344229be","modified":1569565286663},{"_id":"themes/pure/layout/_script/_comment/gitment.ejs","hash":"4773905f82fa173432495507969725a0dba4fc49","modified":1571655216292},{"_id":"themes/pure/layout/_script/_comment/livere.ejs","hash":"5ab997d5ee4475d2f89f882fab4a52648dbe0e30","modified":1569565286663},{"_id":"themes/pure/layout/_script/_comment/valine.ejs","hash":"acf81f9a59dc45f197d723f70484de5fcd166577","modified":1569565286664},{"_id":"themes/pure/layout/_script/_comment/youyan.ejs","hash":"095649a173573d03b5845c2e331ec7be976b152a","modified":1569565286665},{"_id":"themes/pure/layout/_script/_search/baidu.ejs","hash":"9b60ffa2e2725a993e9cecfb81ddedd9b9361011","modified":1569565286665},{"_id":"themes/pure/layout/_script/_search/insight.ejs","hash":"3543c11d060feaf9381b5d87564b01ffef0e0a59","modified":1569565286665},{"_id":"themes/pure/source/css/style.min.css","hash":"1d23abc76726ebe042f7df4749f00f8f73338444","modified":1569565286695},{"_id":"themes/pure/source/images/avatar.jpg","hash":"8ebc792488e45126aa195dc065ef2a9590d0908b","modified":1571294911088},{"_id":"themes/pure/source/images/donate/alipayimg.png","hash":"9562f23f2eb57841c65dc769b6cc43a2cf0efa94","modified":1569565286700},{"_id":"themes/pure/source/images/donate/wechatpayimg.png","hash":"c0844d9a633696cb00ae64fde06f0f924f63b596","modified":1569565286700},{"_id":"themes/pure/source/images/favatar/SzsFox-logo.png","hash":"d71fcc73b7bc2a439d8c7ba461137856d190bd76","modified":1569565286701},{"_id":"themes/pure/source/images/favatar/chuangzaoshi-logo.png","hash":"7fa5734072050952159a02d330bbc008b5a99122","modified":1569565286701},{"_id":"themes/pure/source/images/favatar/idesign-logo.png","hash":"6b150a2dbb9912b7a7662255c27e4d4baaecee71","modified":1569565286701},{"_id":"themes/pure/source/js/jquery.min.js","hash":"5a9dcfbef655a2668e78baebeaa8dc6f41d8dabb","modified":1569565286703},{"_id":"themes/pure/source/js/plugin.js.map","hash":"1730c0cc660f863120aca0a439d7264e2e245fc5","modified":1569565286706},{"_id":"themes/pure/source/js/plugin.js","hash":"a8524d42b8621bfaa06602a163c6a1f82702b91d","modified":1569565286704},{"_id":"source/images/img_5bbef98529a61.png","hash":"b450adb8c2210f032bbb3ba3d740982ce29a8b94","modified":1571631118272},{"_id":"themes/pure/source/css/style.css","hash":"3b693ce41c2e35ece4773593e94b4c17aeaee02f","modified":1569565286693},{"_id":"themes/pure/source/fonts/iconfont.svg","hash":"25929e6e74f7027acd1f6467a67e95b153bcd8d5","modified":1569565286699},{"_id":"source/images/img_5b5183b84d4dd.png","hash":"6899405fd33e268a2907b14319433729a80040f1","modified":1571471895005},{"_id":"source/images/img_5b5184fb1c8d4.png","hash":"4a6cc38b8b70dac09cd6f976101e5c07ed8430c5","modified":1571471895076},{"_id":"source/images/img_59b26b60dc7e7.png","hash":"d46319756f42ddaae0c56e765ad5a54f1c859099","modified":1571499469258},{"_id":"source/images/img_59b2697b89208.png","hash":"a94e2009abc1ea6919fe8dba1201072879180f53","modified":1571470923206},{"_id":"source/images/image-20190917165314461.png","hash":"1cf6dfb86d084ced7cbc466aa87d137d9ad838a7","modified":1569486916606},{"_id":"themes/pure/source/images/avatar.png","hash":"97ec5ba51935886e732368bfd59e3a6d4ddff421","modified":1571295425512},{"_id":"themes/pure/screenshot/pure.psd","hash":"a31cea40b45bdc31f051fca2f1e2f4ecbaee1a94","modified":1569565286688},{"_id":"source/images/img_5b518515e4fe7.png","hash":"1dce10cf18b5a9ad7336ad661e46b134944fde81","modified":1571471895638},{"_id":"public/baidusitemap.xml","hash":"bbba73de3efc170052fd96874aaa9d3f59311205","modified":1576134796569},{"_id":"public/atom.xml","hash":"c12c9865f692c71205cb730a461faaa8fb5025b7","modified":1576134796571},{"_id":"public/content.json","hash":"0acbd09052b40364ba5eb587ff0277ecf00f925e","modified":1576134798639},{"_id":"public/search.json","hash":"3c23517c823cfa9130946a33a080d597cd617d63","modified":1576134798641},{"_id":"public/sitemap.xml","hash":"80e4bb49c82990c26d2b700c247cd82b534f917b","modified":1576134798695},{"_id":"public/about/index.html","hash":"c8a8614f7ef65369a1344e99dd68066822f891ec","modified":1576134798725},{"_id":"public/categories/index.html","hash":"de596a5a37c9fef06ee4a1316a180f47f7a8d70e","modified":1576134798725},{"_id":"public/links/index.html","hash":"8ae0875c17fe9ac6f411cbfd071223a0b5d9e10b","modified":1576134798725},{"_id":"public/repository/index.html","hash":"c814dd91a418db010007bd66e2c5cfde2080d1a7","modified":1576134798726},{"_id":"public/tags/index.html","hash":"dd9f7ad74803a95100c8f77ddfa8658abea01f19","modified":1576134798726},{"_id":"public/tips/index.html","hash":"2ef1e50dcbd1fffb36c1261b84596900ca7c5417","modified":1576134798726},{"_id":"public/2019/12/12/nginx-remote-port-is-null/index.html","hash":"2cfa9c68f5e5d9908bc11acf6d24e1e1f0bd02a4","modified":1576134798726},{"_id":"public/2019/12/12/k8s-tcpdump/index.html","hash":"97056e120d75273a6bcf40f136c20f6eed9da0d2","modified":1576134798726},{"_id":"public/2019/09/16/k8s-ingress-nginx/index.html","hash":"ba66efa8cf47fddfd69bbc461bc8aecd408bd521","modified":1576134798726},{"_id":"public/2019/07/08/postgresql-replica-status/index.html","hash":"d43277d717418b86dc7395117b694a2abedcc06b","modified":1576134798726},{"_id":"public/2019/05/13/http-cache/index.html","hash":"f0875444fe872fa8adf2a0f8328f11c4690f3d6e","modified":1576134798726},{"_id":"public/2019/05/06/mysqldump-error/index.html","hash":"d878f00e675d0f265f9e4b711dc091f9050becec","modified":1576134798726},{"_id":"public/2019/05/06/redis-dump/index.html","hash":"352d47e8217a0134b2011139ca08225941709c16","modified":1576134798726},{"_id":"public/2019/05/06/ssh-authorizedkeyscommand/index.html","hash":"1ba5fa275e1502a4f00d1decaa335c89345d9d11","modified":1576134798726},{"_id":"public/2018/10/11/aws-edge-lambda-modify-origin-host/index.html","hash":"932716c61b55c7b5027fb2a45d3b4cbb86e15cb3","modified":1576134798726},{"_id":"public/2018/07/20/slb-502-debug/index.html","hash":"60d0297148b1c6afa9caa437f8f5c7bc309987eb","modified":1576134798726},{"_id":"public/2018/01/23/tcp-state/index.html","hash":"ce13962fc3b3860337bdba7bc681381ab56132eb","modified":1576134798727},{"_id":"public/2018/01/23/tcp-time_wait/index.html","hash":"138fa78eceb5d8d2cbc52428ea11843f702c9279","modified":1576134798727},{"_id":"public/2017/09/21/zabbix-distrubuted-monitor/index.html","hash":"dd642b3a3650fb6d5f9d7645efe1dd2c4dc74cfd","modified":1576134798727},{"_id":"public/2017/09/08/graphite_relay-sharding/index.html","hash":"3492000694137580c26ff1a135b7622fda19fed9","modified":1576134798727},{"_id":"public/2017/09/08/statsd-cluster-proxy/index.html","hash":"5ebe9fb6c3e7b16a2195bb788219930d788b4c73","modified":1576134798727},{"_id":"public/2017/07/14/redis-maxmemory-policy/index.html","hash":"ff8ec5251db2c6f4a69d4f1174a4c1e5abc64c26","modified":1576134798727},{"_id":"public/2017/04/11/iptables-count/index.html","hash":"03288e74fb10a428d68da2d128082de606e3fca7","modified":1576134798727},{"_id":"public/2017/03/31/iis-backup-restore/index.html","hash":"6164a403191ba409a8dc002dfb5beb7794bc3055","modified":1576134798727},{"_id":"public/2017/03/29/linux-process-status/index.html","hash":"571e971518b3677c2a445da5a8d59ffedeb6d19c","modified":1576134798727},{"_id":"public/2017/03/06/redis-repl_diskless_replication/index.html","hash":"385dbeee782dbf741a2648f25a9de35def954371","modified":1576134798727},{"_id":"public/2017/02/27/redis-trib-rb/index.html","hash":"ec6772818f116c0d9a2b8705779756ced9b44646","modified":1576134798727},{"_id":"public/2017/02/27/redis-trib-rb-create-cluster/index.html","hash":"d29b9fed294bd101f28002b5d229e5fd8253148e","modified":1576134798727},{"_id":"public/2017/02/09/magent-create-memcache-cluster/index.html","hash":"23d5191f506ca98acf7e885a3419bd6d1a586029","modified":1576134798727},{"_id":"public/2017/02/09/repcache-magent/index.html","hash":"e73ced47083ab3ed0b371bd7c24ede59bc592492","modified":1576134798727},{"_id":"public/2017/02/09/vagrant-mulit-vm/index.html","hash":"841e3ad934ec5f387836a4584c85429c13f30fb5","modified":1576134798727},{"_id":"public/2017/02/09/vagrant/index.html","hash":"1b776d94acbd63fd7b001989d040d532a095ba16","modified":1576134798728},{"_id":"public/2017/02/09/twemproxy-configure/index.html","hash":"c986a8c9abfa9abb804b22b096891f9965c3b54c","modified":1576134798728},{"_id":"public/2017/02/09/twemproxu/index.html","hash":"8c36b669c7750785f53cb1a7d5aedc4f70a325e6","modified":1576134798728},{"_id":"public/2017/02/09/vagrantfile/index.html","hash":"83d840563d2bf0d9304cc2d95d5057c666b95257","modified":1576134798728},{"_id":"public/2017/01/19/vcenter-expand-disk-to-linux/index.html","hash":"9c675898bfec7084f5dc68ec784b92223a129c89","modified":1576134798728},{"_id":"public/2017/01/18/nginx-server_name_hash_bucket_size/index.html","hash":"7141b435bc020ead0f2b8207e2861b16d6613bbd","modified":1576134798728},{"_id":"public/2017/01/18/nginx-referer/index.html","hash":"b7882eba30d6d2a29693997b7d263a2f4372bcf7","modified":1576134798728},{"_id":"public/2017/01/18/docker-privileged/index.html","hash":"381eaaefae5e0758a46f856db2fb87884946f7b1","modified":1576134798728},{"_id":"public/2017/01/17/iis-get-pid/index.html","hash":"47e26cb193134d4adf7378b68a7a19116179a38d","modified":1576134798728},{"_id":"public/2017/01/12/vcenter-expand-disk-to-windows/index.html","hash":"843fab10262fc6dac19d7f544a3479542ed3690d","modified":1576134798728},{"_id":"public/2017/01/07/linux-start-stop-daemon/index.html","hash":"4b2d4024c1d6b8c929f580736d28e78daa08c52b","modified":1576134798728},{"_id":"public/2016/12/20/linux-nf-conntrack-drop-package/index.html","hash":"de6f76a842f4c54fb7eb3fd8706935e72182b8a1","modified":1576134798728},{"_id":"public/2016/12/19/zabbix-monitor-redis/index.html","hash":"6a2e17746f37eae7132e5944d498d71a5d579095","modified":1576134798728},{"_id":"public/2016/12/19/zabbix-monitor-mongo/index.html","hash":"3948f6b5f49abdd621b299f24787622cc3e702a5","modified":1576134798728},{"_id":"public/2016/12/19/zabbix-monitor-memcache/index.html","hash":"1bdcb5a7d5c572e26eb6928900f4f1d19419c36d","modified":1576134798728},{"_id":"public/2016/12/14/nginx-websocket-proxying/index.html","hash":"a754a676589cdece712a689d7bfe30b22fab5ba8","modified":1576134798728},{"_id":"public/2016/12/05/zabbix-monitor-ssl-cert/index.html","hash":"7a9ee8b02b9c1620d36ce8d71bacaa5f46fdb4a1","modified":1576134798729},{"_id":"public/2016/12/05/zabbix-trigger-function/index.html","hash":"9b3e2903c6b7ac94a531f085177e35a4ca8583c5","modified":1576134798729},{"_id":"public/2016/11/23/fix-zabbix-item-not-supported/index.html","hash":"8ddda812d2a339cf5fa22da645d596236f2fe270","modified":1576134798729},{"_id":"public/2016/09/29/django-reset-admin-password/index.html","hash":"6b682996b1eb1218c94374a3d6f46c1a25c0238a","modified":1576134798729},{"_id":"public/2016/09/01/zabbix-server-configure/index.html","hash":"e589832fd087150e5b917cde9f7aa58d17e0c1d7","modified":1576134798729},{"_id":"public/2016/08/24/keepalived-not-support-IPVS/index.html","hash":"eb5e1a9ae33c2527138e2c75051ed2dc87e085de","modified":1576134798729},{"_id":"public/2016/08/24/keepalived-multi-server/index.html","hash":"29425f6dbc4c31117ee5079d3e062ad0793b0e6d","modified":1576134798729},{"_id":"public/2016/08/18/tomcat-change-webroot/index.html","hash":"03252a5dac387c9e5d8cc0d93411d0244d212946","modified":1576134798729},{"_id":"public/2016/08/15/apachetop/index.html","hash":"983dfa77aa8b417877e4a21ec5f756936180dee9","modified":1576134798729},{"_id":"public/2016/08/11/shell-command-watch/index.html","hash":"9d7a33c7137ff57ecf99a5612827cc898019e487","modified":1576134798729},{"_id":"public/2016/08/11/linux-disable-arp/index.html","hash":"2661250bcdab99c0d72a30a61b68ae1507d6aa00","modified":1576134798730},{"_id":"public/2016/08/09/zabbix-less-than-25-free-in-the-configuration-cache/index.html","hash":"74618868b70caa62ee7647834d82fc22d0a0b25f","modified":1576134798730},{"_id":"public/2016/08/02/mysql-lock-table/index.html","hash":"a94ef3996b54dbc4f3d2e31e74e7d70e669edf03","modified":1576134798730},{"_id":"public/2016/07/27/domain-status-code/index.html","hash":"9563ea397876084a691e8d618eaf21711bde29fe","modified":1576134798730},{"_id":"public/2016/07/26/uwsgi-invalid-option-x-getopt_long-error/index.html","hash":"0257d7ff2068fa79164878977b4b2f15c2d4e6ae","modified":1576134798730},{"_id":"public/2016/07/26/nginx-uwsgi-deploy-django/index.html","hash":"301ec9ac410107a5e85c51256d9afc58ea1b0c8a","modified":1576134798730},{"_id":"public/2016/07/11/linux-limit-tools/index.html","hash":"005041318259660784f11cdafd2564c29dab1dd6","modified":1576134798730},{"_id":"public/2016/07/06/cpulimit/index.html","hash":"59049e4cb3bbf494f03d234c9369ac941d7602d9","modified":1576134798730},{"_id":"public/2016/07/06/php_curl/index.html","hash":"82d8ea1c3222dcde28a1a1a117dbdc2006496ecc","modified":1576134798730},{"_id":"public/2016/06/29/zabbix-alert-to-wechat-script/index.html","hash":"56244afe0f5d269de89cce33954bda6ce5eab6ef","modified":1576134798730},{"_id":"public/2016/06/29/zabbix-monitor-port/index.html","hash":"0427441cea053d5f976b331551e059700373ce3c","modified":1576134798730},{"_id":"public/2016/06/29/shell-advance-variable/index.html","hash":"4c45c866ed43b0d03c84607eca2b89cf7f41b31e","modified":1576134798730},{"_id":"public/2016/06/29/shell-special-env-variable/index.html","hash":"fd96cd35415111a8b687acb99d760517a8afa160","modified":1576134798730},{"_id":"public/2016/06/02/rbash-add-readonly-user/index.html","hash":"04babcc66ba72cf0588a9d681eed4850b4d38444","modified":1576134798730},{"_id":"public/2016/05/27/cloud-not-run-curl-config/index.html","hash":"3683f80fd07e169e53b5bc873081d0bfe228beb3","modified":1576134798730},{"_id":"public/2016/05/26/dedecms-yanzhenma/index.html","hash":"ea5b321ef017d40be5684060bdee868e74c9031d","modified":1576134798730},{"_id":"public/2016/05/23/redis-slave-replica/index.html","hash":"f65be8ac3306b6a8d33f81559fbadb57909b7010","modified":1576134798730},{"_id":"public/2016/05/23/linux-kernal-paramenter/index.html","hash":"ff4a172b1f62e47e844a9212c1c892a7a5bbf150","modified":1576134798731},{"_id":"public/2016/04/28/python-send-mail/index.html","hash":"2c522e3691d407018ec2ba1f7cda7e3cc00aaa94","modified":1576134798731},{"_id":"public/2016/04/28/python-code-socket/index.html","hash":"edceb091e6e16ffb7afcf9a350b063f04c67823a","modified":1576134798731},{"_id":"public/2016/04/13/deploy-zabbix_agent-to-windows/index.html","hash":"9b6a54ffb7bfb7c6633cb80acf6de656aa676239","modified":1576134798731},{"_id":"public/2016/04/13/tomcat-server-name-alias/index.html","hash":"46292800375932e7458fe8acb87ee7bb7d164820","modified":1576134798731},{"_id":"public/2016/03/29/tomcat-permgen-space/index.html","hash":"5679f8457925f57d524acd3aa94ca87e8a5184f4","modified":1576134798731},{"_id":"public/2016/03/29/python-is/index.html","hash":"9171e09f6dfaa033113c132215ba52898fc49521","modified":1576134798731},{"_id":"public/2016/03/25/zentaopms-deployment/index.html","hash":"4be1c4e9469800ada637558090c74f30789d062b","modified":1576134798731},{"_id":"public/2016/03/25/zabbix-monitor-process/index.html","hash":"fa53c89206e199ce8a36864a7dbc3f3fa7b09128","modified":1576134798731},{"_id":"public/2016/03/04/python-tab/index.html","hash":"6f8df7f7e8fe8238eed5e55e53016108b49476b2","modified":1576134798731},{"_id":"public/2016/02/18/build-mysql-proxy/index.html","hash":"e55920b930c9c099b01d8d86286eaab42075653c","modified":1576134798731},{"_id":"public/2016/02/18/mysql-proxy-amoeba/index.html","hash":"d3d65adafda68578dc1a6972c6caac7666a95752","modified":1576134798731},{"_id":"public/2016/02/18/udev/index.html","hash":"a6f814d1a300a9a196721058662d5485ea170179","modified":1576134798731},{"_id":"public/2016/02/18/Three-shared-storage-comparisons/index.html","hash":"c63f9eb1b1d71a65f64f40e82adc22d5dd60ea67","modified":1576134798731},{"_id":"public/2016/02/18/iscsi-store/index.html","hash":"1156c3ed40ea5bbcebda0145d6650ee682de032f","modified":1576134798731},{"_id":"public/2016/02/18/lvs-dr/index.html","hash":"8b516bb61d682296236d01e34f80c7e1aa237e07","modified":1576134798732},{"_id":"public/2016/02/18/lvs-nat-cluster/index.html","hash":"acf42643cd9b17008488bf4de5ba8c8333cf5dfb","modified":1576134798732},{"_id":"public/2016/02/18/lvs-three-mode/index.html","hash":"fbf82a592584d4209d4b07ec415e82257dca6441","modified":1576134798732},{"_id":"public/2016/02/01/rhcs-ha-cluster/index.html","hash":"b0b6b81caab1c720b19f18777b5302a2e4b9284c","modified":1576134798732},{"_id":"public/2016/01/31/mysql-master-slave/index.html","hash":"bd9736c4a8c1ff49e49b61552045d9ec60045508","modified":1576134798732},{"_id":"public/2016/01/31/mysql-master-master/index.html","hash":"c137f9526cc2a2569943f7d9847785028327ae66","modified":1576134798732},{"_id":"public/2016/01/31/dns-view/index.html","hash":"0f328024dadfc49e70b3373b3d0ee984af86b3ea","modified":1576134798732},{"_id":"public/2016/01/31/transaction-isolation-level/index.html","hash":"4d49b68c1cf2c7d07a5372b85494651a3c1fa80a","modified":1576134798732},{"_id":"public/2016/01/30/mysql-binlog-recovery-data/index.html","hash":"40e5f106a0edea23774dd874feee983cbd19fea3","modified":1576134798732},{"_id":"public/2016/01/30/multi-tomcat-server/index.html","hash":"8d6bebc849a613fd1e33fe1c82195080eed3f246","modified":1576134798732},{"_id":"public/2016/01/30/tomcat-virtual-host/index.html","hash":"c47e7379cc09c130954ef8ae93efcea173ec7a5c","modified":1576134798732},{"_id":"public/2016/01/24/tomcat-server/index.html","hash":"6ebde5869fef339259667f21237d878e68428070","modified":1576134798732},{"_id":"public/2016/01/17/apache-configure/index.html","hash":"5553708723786b860d87a309d526bf124e661175","modified":1576134798733},{"_id":"public/2016/01/17/apache-running-mode/index.html","hash":"9505537df09fef4d8fe0f114ca97323da4a09be0","modified":1576134798733},{"_id":"public/2016/01/17/apache-webserver/index.html","hash":"2d7bcc688ab74f4e1aec175e4f04ba7f02d30007","modified":1576134798733},{"_id":"public/2016/01/17/apache-auth/index.html","hash":"a353fdeb0308275d6e340aac57a913c7227ea8de","modified":1576134798733},{"_id":"public/2016/01/17/pxe-kickstart/index.html","hash":"710581cb1071788a5ca8e902fe451e9741592919","modified":1576134798733},{"_id":"public/2015/11/30/dns-server/index.html","hash":"c86b20792ef869a9971217f3abb10f8367b7e197","modified":1576134798733},{"_id":"public/2015/11/29/ntp-server/index.html","hash":"6925d31a2b668c953bb160861b62feaa02aae142","modified":1576134798733},{"_id":"public/2015/11/29/linux-disk-quota/index.html","hash":"1c1a44ca1cac2296156891ba3d4682bad4102ff0","modified":1576134798733},{"_id":"public/2015/11/29/linux-lvm/index.html","hash":"ef189b9ff23ea0e61eac7ac4d7ebcb4cc93814be","modified":1576134798733},{"_id":"public/2015/11/28/linux-crontab-and-at/index.html","hash":"bb6e324598761f5f692d49e43428d60d016a562d","modified":1576134798733},{"_id":"public/2015/11/28/linux-log-system/index.html","hash":"86339e953e4d4ef575308ee6202c6304e172d62a","modified":1576134798733},{"_id":"public/2015/11/15/linux-boot-workflow/index.html","hash":"e5779117b41bd00f89ecf8c41f09333c0cfe856d","modified":1576134798733},{"_id":"public/2015/11/15/linux-process-manager/index.html","hash":"dbfd3b4c9a0366e27eb6199cad5dd9832995e07e","modified":1576134798733},{"_id":"public/2015/11/09/linux-yum-repo/index.html","hash":"dcda61d344cb1153947b1cd26ff976d847e0c880","modified":1576134798733},{"_id":"public/2015/11/07/linux-tree/index.html","hash":"8712174d826b8f7bb4eb68294018526e8277feb1","modified":1576134798733},{"_id":"public/2015/11/07/linux-stdin-stdout-stderr/index.html","hash":"c63944a4de87242e393ae12ef12d5c423720104b","modified":1576134798733},{"_id":"public/2015/11/05/linux-premissions-and-acl/index.html","hash":"f18e1379b089f9f41832581768c7bc277565282d","modified":1576134798734},{"_id":"public/2015/11/05/linux-ln/index.html","hash":"e14cbaaeabd66e8dc4cd47a51f6c1295ce011139","modified":1576134798734},{"_id":"public/2015/11/05/linux-user-and-group/index.html","hash":"3d0539df7dc81d14dd4d85713efa98843fa79ba5","modified":1576134798734},{"_id":"public/2015/10/16/linux-find-commands/index.html","hash":"cb29f89478132d0b4ad968313afb491d77e68ff6","modified":1576134798734},{"_id":"public/2015/10/11/php-data-timezone/index.html","hash":"681a0240312cf3bbb5993ca07b7c4bb29edd8cc0","modified":1576134798734},{"_id":"public/2015/10/08/window-force-delete-file/index.html","hash":"3228cd81c3a70d5b40ab802722cc775bf845b45b","modified":1576134798734},{"_id":"public/2015/09/30/session_start-error/index.html","hash":"804a8dfccbb23b22af57ff86bf070cef6fca4ee5","modified":1576134798734},{"_id":"public/2015/09/29/windows-cant-open-contral/index.html","hash":"f89b25ef0d8230755bc723cecf9ecb355a55b529","modified":1576134798734},{"_id":"public/2015/09/29/apppool-0x80-error/index.html","hash":"d53c98e3581c3b39291c787dcf8b3a14708d45ea","modified":1576134798734},{"_id":"public/2015/09/29/website-download-apk/index.html","hash":"3ff04704dd48dad01d47b8f7e4ff9afbb4747f52","modified":1576134798734},{"_id":"public/2015/09/29/phpcms-v9-password-retry-too-more/index.html","hash":"0a4fcb1b751af13da573196821f2f3bc17559314","modified":1576134798734},{"_id":"public/2015/09/29/windows-server-memory-limit/index.html","hash":"0c4a121787841818e6535d42af4f1995c2286a9f","modified":1576134798734},{"_id":"public/2015/08/24/iis-auth/index.html","hash":"994e5ef31334b3175016df1e1adda10420011a5f","modified":1576134798734},{"_id":"public/2015/08/24/phpmyadmin-upload-limit-size/index.html","hash":"8d3e9940db899fdb89e689f905c21206ad69120e","modified":1576134798734},{"_id":"public/2015/08/24/mysqlcheck/index.html","hash":"d874900135099ae5ab602e6eb48eccabd079d519","modified":1576134798734},{"_id":"public/2015/08/21/iis-set-urlrewrite/index.html","hash":"45e055a24c15a41d571d790378c2c1102b4690e3","modified":1576134798734},{"_id":"public/2015/08/21/mssql-deny-save/index.html","hash":"d6c81a365ce7f9f1d9630a3f82b4b6e0e06519d9","modified":1576134798734},{"_id":"public/2015/08/21/mime-type/index.html","hash":"22326416622e30c7819a19f75d1b60981703ed08","modified":1576134798735},{"_id":"public/archive/index.html","hash":"599c88d930238cc0e9ab5df81d5e1c921e26ead4","modified":1576134798735},{"_id":"public/archive/page/2/index.html","hash":"0a7be3acd07fd0ef9ddfd27a15bd43fca8a3072f","modified":1576134798735},{"_id":"public/archive/page/3/index.html","hash":"c9d97df9e8ca796ff7b2f4e54e3755543079e1b9","modified":1576134798735},{"_id":"public/archive/page/4/index.html","hash":"2c871f8a7555935ef3f721a9f634ded83aeb48bd","modified":1576134798735},{"_id":"public/archive/page/5/index.html","hash":"343d0284ada6eeae09c12e08d637e66094f55508","modified":1576134798735},{"_id":"public/archive/page/6/index.html","hash":"be33c859946d846b8a2719740aa6f72d96cc1857","modified":1576134798735},{"_id":"public/archive/page/7/index.html","hash":"b2b735e4a0f3afd2a712191f0ba298e7c6ae539a","modified":1576134798735},{"_id":"public/archive/page/8/index.html","hash":"2441662240fb9b6a6ea31ebf13ea1073650d8800","modified":1576134798735},{"_id":"public/archive/page/9/index.html","hash":"63eaba50d6fdf38b63686bd0537b1fe0a259b4e0","modified":1576134798735},{"_id":"public/archive/page/10/index.html","hash":"d7539c351029c2a806b22e2eb84b04ba9aa8ee79","modified":1576134798735},{"_id":"public/archive/page/11/index.html","hash":"e73da9bea8a98591b55a61d62e009227551bebbc","modified":1576134798735},{"_id":"public/archive/page/12/index.html","hash":"0ed27b8f33d4ce78d261b9e5d3829a17b4474d40","modified":1576134798735},{"_id":"public/archive/page/13/index.html","hash":"f241a2a3697b3e7374c29c780201f9dca00bb327","modified":1576134798735},{"_id":"public/archive/2015/index.html","hash":"2e8da7968a2bdba8cb0bb44d4c9722b070ff62b3","modified":1576134798735},{"_id":"public/archive/2015/page/2/index.html","hash":"157f591bbf2c122e746ef11ba152bd3cfec4963e","modified":1576134798735},{"_id":"public/archive/2015/page/3/index.html","hash":"ca64fa30b5ad06184d9b82e909076b71cd36b773","modified":1576134798735},{"_id":"public/archive/2015/08/index.html","hash":"361399848ad80c308560e6d5923e21d4f8277d36","modified":1576134798736},{"_id":"public/archive/2015/09/index.html","hash":"bf4b8f3fae3542f4ffaca13b1d461c4efe92020d","modified":1576134798736},{"_id":"public/archive/2015/10/index.html","hash":"baa4acc577d84fa8f4d0307045f5d078f36e584d","modified":1576134798736},{"_id":"public/archive/2015/11/index.html","hash":"4ba26b5af6fc1d12cd9239f3d2c1ffd1ee48b847","modified":1576134798736},{"_id":"public/archive/2015/11/page/2/index.html","hash":"9fd0cfccd6e7ac75fdf337b897ca8661ac4dd4a4","modified":1576134798736},{"_id":"public/archive/2016/index.html","hash":"640c547f70c576bd3f3863493128d78acddd16df","modified":1576134798736},{"_id":"public/archive/2016/page/2/index.html","hash":"adc6e9b1814e98cafeaa98c65ed54ccb6979b99b","modified":1576134798736},{"_id":"public/archive/2016/page/3/index.html","hash":"dfc1d75d9366cb618a4fd6309e3f4dc640ff7104","modified":1576134798736},{"_id":"public/archive/2016/page/4/index.html","hash":"0847e36c8b91a611d4172b0c41f04293ff019f9e","modified":1576134798736},{"_id":"public/archive/2016/page/5/index.html","hash":"5ee5c4893156986cfaeee56d43ed71bb19ac33ed","modified":1576134798737},{"_id":"public/archive/2016/page/6/index.html","hash":"68af03030912e4fd790fc6e93619d2de386c35a2","modified":1576134798737},{"_id":"public/archive/2016/page/7/index.html","hash":"63cc073833a5e3650fd8a31296cc0c41526a5273","modified":1576134798737},{"_id":"public/archive/2016/01/index.html","hash":"59816a40d1dfe77b86e2731198f5fc02beb2a1b7","modified":1576134798737},{"_id":"public/archive/2016/01/page/2/index.html","hash":"9bcc45b636daebb3649d600ae64190499695fe90","modified":1576134798737},{"_id":"public/archive/2016/02/index.html","hash":"1b6d66d0b67d3575771c16eaadbf87d7db7f6a69","modified":1576134798737},{"_id":"public/archive/2016/03/index.html","hash":"c0d86573412b03f526a45184a672b71d2571ddbb","modified":1576134798737},{"_id":"public/archive/2016/04/index.html","hash":"db815c54811320c0b85232208fecf73ebdfc205f","modified":1576134798737},{"_id":"public/archive/2016/05/index.html","hash":"f0d73d8e2a44296dcd88833fa462aa4d75c15e5b","modified":1576134798737},{"_id":"public/archive/2016/06/index.html","hash":"e7b98d5789599352dc9ac0c44b07c394d86b4486","modified":1576134798737},{"_id":"public/archive/2016/07/index.html","hash":"a59a3626fd835f3441eca1fd4864dd388c14ccb8","modified":1576134798737},{"_id":"public/archive/2016/08/index.html","hash":"e2490d8276015742d2de806819d29e276b03475b","modified":1576134798737},{"_id":"public/archive/2016/09/index.html","hash":"c1bf058a43f9c7320f276104a691f72ea94e7dc2","modified":1576134798738},{"_id":"public/archive/2016/11/index.html","hash":"af2aacd83ef6b26b3e3514098d98bb5e4f5e192d","modified":1576134798738},{"_id":"public/archive/2016/12/index.html","hash":"971da444800ce6e548b5bfa04d0acf5351415a06","modified":1576134798738},{"_id":"public/archive/2017/index.html","hash":"cbac84336dc1d9f6d33e24fa6df6c5bed8a2132d","modified":1576134798738},{"_id":"public/archive/2017/page/2/index.html","hash":"d1ad2030da09959888a3fc179b52078a974aec38","modified":1576134798738},{"_id":"public/archive/2017/page/3/index.html","hash":"dc2e7604a8bb1c5791a3ea69be5cc61cae5f2370","modified":1576134798738},{"_id":"public/archive/2017/01/index.html","hash":"a8683c89ac87d96fe06dbce2112ccf47c2f59ce4","modified":1576134798738},{"_id":"public/archive/2017/02/index.html","hash":"52aeb9cc1e1a139a771ebe1096fd595e3d9bf5c6","modified":1576134798738},{"_id":"public/archive/2017/03/index.html","hash":"c64cd357816fac88f0a889e546669d6c9f18384e","modified":1576134798738},{"_id":"public/archive/2017/04/index.html","hash":"af86e225cf323628d5b5ab200ac719928cb6d84f","modified":1576134798738},{"_id":"public/archive/2017/07/index.html","hash":"d4cf3b00f52ee9f1320f8672e3f40d4ad2390df3","modified":1576134798739},{"_id":"public/archive/2017/09/index.html","hash":"9640dcc3f108983dadb3ff084176ddef874407b5","modified":1576134798739},{"_id":"public/archive/2018/index.html","hash":"27f80eb8cdd6068667ba4afd86c8ea9c74a663aa","modified":1576134798739},{"_id":"public/archive/2018/01/index.html","hash":"f6c2fb8fd4c0f2d602497ba7ae3c46485f09a5fd","modified":1576134798739},{"_id":"public/archive/2018/07/index.html","hash":"aa4e58e1283d2d79a152a91174b5c13326573b14","modified":1576134798739},{"_id":"public/archive/2018/10/index.html","hash":"1c41fb2cc71eeedb1e341c4a8c9a6e74599f52e9","modified":1576134798739},{"_id":"public/archive/2019/index.html","hash":"03f7c433bbe432fa9bd85c47a46ae42b62388d84","modified":1576134798739},{"_id":"public/archive/2019/05/index.html","hash":"d4d985b34c8cc82d8a2730fc308d44219b2b22b5","modified":1576134798739},{"_id":"public/archive/2019/07/index.html","hash":"e3f0f6b0a72f84d7259109ec2b12fdeda34e3a86","modified":1576134798739},{"_id":"public/archive/2019/09/index.html","hash":"5867ef322225f118d0e544268445ed16818bbb97","modified":1576134798739},{"_id":"public/archive/2019/12/index.html","hash":"82973a2a071b027a07f8dad591800ee43407d2cd","modified":1576134798739},{"_id":"public/categories/storage/index.html","hash":"6bd3cdcc6826f6e17a0bcf67fc4589919cdbeab8","modified":1576134798739},{"_id":"public/categories/apache/index.html","hash":"fa546f8dc784d9ce6dab97b5e33628ba2a3f44bf","modified":1576134798739},{"_id":"public/categories/iis/index.html","hash":"5c1d56d477fa0f7e46a51519af06c1481bcb117a","modified":1576134798739},{"_id":"public/categories/aws/index.html","hash":"b8b06629320b86ea479ca1369578db463fb724c3","modified":1576134798740},{"_id":"public/categories/mysql/index.html","hash":"49429ed282142add5d755ab6ca407054d69c7274","modified":1576134798740},{"_id":"public/categories/linux/index.html","hash":"aebffb37525d9f3c9b68ddc4b59168ef158e1099","modified":1576134798740},{"_id":"public/categories/linux/page/2/index.html","hash":"513380b04e49036fa5d2c9ea0cac882f86179448","modified":1576134798740},{"_id":"public/categories/linux/page/3/index.html","hash":"0896afda6d6ca5bd96126e4cba2916f907c813c1","modified":1576134798740},{"_id":"public/categories/linux/page/4/index.html","hash":"2f8443a3edcae9db99c0df92adc68375635fd5c6","modified":1576134798740},{"_id":"public/categories/php/index.html","hash":"a85acbfb3920153c4ce2ce11d773846ade87c6a1","modified":1576134798740},{"_id":"public/categories/zabbix/index.html","hash":"edb4ebbfbe329503c39b202a1ad583e7adb554ff","modified":1576134798740},{"_id":"public/categories/zabbix/page/2/index.html","hash":"aa8f3bac1aea0594ede5bcef2e441f6ba80756ec","modified":1576134798740},{"_id":"public/categories/python/index.html","hash":"2c2a9b07d2664a62584eac17da2d9d0199a60151","modified":1576134798740},{"_id":"public/categories/dns/index.html","hash":"b6707706f4dd1e61de9c530d8c71ef2152184cf5","modified":1576134798740},{"_id":"public/categories/iis/windows/index.html","hash":"6c0b0e7e51259bddf9cdb97a3fe8a15aab0090e2","modified":1576134798740},{"_id":"public/categories/docker/index.html","hash":"9f05f0b2dc65472576785cea66dc52618c08567a","modified":1576134798740},{"_id":"public/categories/domain/index.html","hash":"89d4ad52fd6519170ea14e18814cda16921966a4","modified":1576134798740},{"_id":"public/categories/statsd/index.html","hash":"532bd8c6d0f65d2801ed7ca1351014318e5341b4","modified":1576134798740},{"_id":"public/categories/http/index.html","hash":"b58bff175e18e0b594812be1c5bc628476ad2306","modified":1576134798741},{"_id":"public/categories/windows/index.html","hash":"4a7795bd3af28d3b3e78da3e61d60113911ccec3","modified":1576134798741},{"_id":"public/categories/k8s/index.html","hash":"ba100499715a8db60ab818c63ac445257079d214","modified":1576134798741},{"_id":"public/categories/keepalived/index.html","hash":"56ff914291898fcc107f06cdc6e2683927aa9c1e","modified":1576134798741},{"_id":"public/categories/zabbix/issue/index.html","hash":"eec99555b3671661ca763da4e76a7e198be8963c","modified":1576134798741},{"_id":"public/categories/statsd/graphite/index.html","hash":"43426ff70e71265ec66fbf9836a726e2bb0cf78a","modified":1576134798741},{"_id":"public/categories/lvs/index.html","hash":"2874a76a0ffb9aa508f6b3f376c7463de4373608","modified":1576134798741},{"_id":"public/categories/memcached/index.html","hash":"36930047bc41e61169259ebc30042251c35f5146","modified":1576134798741},{"_id":"public/categories/windows/iis/index.html","hash":"e2bdab4e7053dfd8166ff912efe046e46309a33d","modified":1576134798741},{"_id":"public/categories/http/mime-type/index.html","hash":"f664041761384772e037265421a4a563372c8144","modified":1576134798741},{"_id":"public/categories/mssql/index.html","hash":"e73d0511001c128b8591aae0f14a68eb8a321861","modified":1576134798741},{"_id":"public/categories/tomcat/index.html","hash":"515ea4f2ae1e94588ba212df5d98fc7eb0bf6487","modified":1576134798741},{"_id":"public/categories/nginx/index.html","hash":"4baa28c8e1fbc4c97a44997dfa7b9b06645a9103","modified":1576134798741},{"_id":"public/categories/python/uwsgi/index.html","hash":"727abbea80a9ff77fa202294b3601fb0b30fe3a9","modified":1576134798741},{"_id":"public/categories/postgresql/index.html","hash":"99811eeafa9314b06f17424b8c2b9234978ee46d","modified":1576134798741},{"_id":"public/categories/redis/index.html","hash":"71f93e9ebb3cad48cd7cfdf77504b774941a702f","modified":1576134798741},{"_id":"public/categories/cluster/index.html","hash":"6b24511ec6fc87421bae52cc3e0959dab044449f","modified":1576134798741},{"_id":"public/categories/php/debug/index.html","hash":"eca77a3748835d645ea04e4a10d1da9cd13808d7","modified":1576134798742},{"_id":"public/categories/shell/index.html","hash":"16eca2d29ad46664521d193d3859f6205dff0a42","modified":1576134798742},{"_id":"public/categories/command/index.html","hash":"c2c55a56eb6e6992ff6d8b41b1615f97d719e7ff","modified":1576134798742},{"_id":"public/categories/memcached/redis/index.html","hash":"a498dae0f7f7b643093af0a2c11980403a9d3fb4","modified":1576134798742},{"_id":"public/categories/uwsgi/index.html","hash":"7b1ea26035ab01242446eca37cf2bb178cf052cf","modified":1576134798742},{"_id":"public/categories/vagrant/index.html","hash":"2ed74ad19075dc9cd83c28026c1c6a0a619b1838","modified":1576134798742},{"_id":"public/categories/vcenter/index.html","hash":"3fd311f7241823c646fc4de195f735ec8147811a","modified":1576134798742},{"_id":"public/categories/windows/vcenter/index.html","hash":"4b7a2755587fd851cce30ae00d978ead76655b7d","modified":1576134798742},{"_id":"public/categories/iis/nginx/index.html","hash":"52d259b64b7ed97a4e0dccf00859119ed7f0baad","modified":1576134798742},{"_id":"public/categories/shell/linux/index.html","hash":"cba6fbb355bec059dff99912be793e4c01dadcaf","modified":1576134798742},{"_id":"public/categories/zentaopms/index.html","hash":"d24690897df7c0a6cdef34d9e8aaf8d21a428810","modified":1576134798742},{"_id":"public/categories/uwsgi/python/index.html","hash":"a805e4279185fe5a2e25a5689375e5313b1db63e","modified":1576134798742},{"_id":"public/categories/zentaopms/deployment/index.html","hash":"31af9042eee9b330dfd86120e35bf7a85276e705","modified":1576134798742},{"_id":"public/categories/linux/nginx/index.html","hash":"54d6a08742707da21669e916ee9112476edfacca","modified":1576134798742},{"_id":"public/categories/linux/nginx/debug/index.html","hash":"3bbbd2f3256c62235d0139a21362a3f962b1e773","modified":1576134798742},{"_id":"public/index.html","hash":"a67d4c1f426937497c2447488691cc3a58a1ec65","modified":1576134798742},{"_id":"public/page/2/index.html","hash":"116ad26c284e86d04941b5b81d6e4d229e3756ca","modified":1576134798742},{"_id":"public/page/3/index.html","hash":"f6906b9a6e608c59f9cc4a9b8b6828f8869f3a8a","modified":1576134798742},{"_id":"public/page/4/index.html","hash":"9be5a1c9cd1200452d60800f52d6733ebc5cc89a","modified":1576134798742},{"_id":"public/page/5/index.html","hash":"aa7752ead513dc602742e3f4ef70720108651c17","modified":1576134798743},{"_id":"public/page/6/index.html","hash":"de7fe713b429f18287e145ed44631ac648e7c27d","modified":1576134798743},{"_id":"public/page/7/index.html","hash":"7b024e29afd3d84cf1a0a6b9e6fe8b9c355df825","modified":1576134798743},{"_id":"public/page/8/index.html","hash":"7af9f0e2ff5a131f2d5ac6a4319098e9c8e9a5d8","modified":1576134798743},{"_id":"public/page/9/index.html","hash":"c9ef2ad3ec5de935179364bb1040dce7a407229f","modified":1576134798743},{"_id":"public/page/10/index.html","hash":"1d57f69ef85d70cb20ecc120383ce28f2c1cbecc","modified":1576134798743},{"_id":"public/page/11/index.html","hash":"1ce88ad82ef8c933afa50f156f91c59b7cdc52a1","modified":1576134798743},{"_id":"public/page/12/index.html","hash":"035b220074db7265b3fc886d9607ab1d8fcc2797","modified":1576134798743},{"_id":"public/page/13/index.html","hash":"5f2eb7831b5bcd2e014589e3894e885ea6d75416","modified":1576134798743},{"_id":"public/tags/apache/index.html","hash":"60bde749f90f46ffedc96a3003103f06cb584ff1","modified":1576134798743},{"_id":"public/tags/webserver/index.html","hash":"3e99cb23398693e0bc79577d0fe6e34f93e1dfb9","modified":1576134798743},{"_id":"public/tags/webserver/page/2/index.html","hash":"25fe351d83ff1b22cc78badaf87d15f67feaadd7","modified":1576134798743},{"_id":"public/tags/command/index.html","hash":"f4cca49f0c790535cea2853e3bde620a53c77e9e","modified":1576134798743},{"_id":"public/tags/iis/index.html","hash":"0fcd6bdb3040006886e1293780bcc356383d2900","modified":1576134798743},{"_id":"public/tags/windows/index.html","hash":"6467b41aecc229be9b16fd6a1376f787d591da8b","modified":1576134798743},{"_id":"public/tags/debug/index.html","hash":"4c90e911ffd629faf7e400c9fdad5b8d4e94997f","modified":1576134798743},{"_id":"public/tags/debug/page/2/index.html","hash":"2b3dd2e2627398a87813e87adae8f03502ec1176","modified":1576134798743},{"_id":"public/tags/aws/index.html","hash":"dd845e172e35da36f9dd2d1bec40670f2d2a10c6","modified":1576134798744},{"_id":"public/tags/lambda/index.html","hash":"bc739de9d849b9abf01a53231b08cae719286087","modified":1576134798744},{"_id":"public/tags/cloudfront/index.html","hash":"7c576e9c8ddb5d089923b6fb3ae3a006b6a27a07","modified":1576134798744},{"_id":"public/tags/mysql/index.html","hash":"46c19000e45c91f435001c8cb65b40b407f7087a","modified":1576134798744},{"_id":"public/tags/mysql-proxy/index.html","hash":"7fb7ff2094f18b61d6b44fddc74a3bbff40fd829","modified":1576134798744},{"_id":"public/tags/linux/index.html","hash":"88ecae5a1fe4da0e04d1f6139ff89d9e128f66a0","modified":1576134798744},{"_id":"public/tags/linux/page/2/index.html","hash":"0f4ccaaac0172dfaffff7c71ea22659275925153","modified":1576134798744},{"_id":"public/tags/linux/page/3/index.html","hash":"3cdb1be65be85cb66f1ab77a4d28fbb6f5ddc5f7","modified":1576134798744},{"_id":"public/tags/linux/page/4/index.html","hash":"255f965d097a9a506b65b1de4f9a7228eeda3e00","modified":1576134798744},{"_id":"public/tags/cpulimit/index.html","hash":"ad251d2f35460248404b6c01561991d3cc2f5d4c","modified":1576134798744},{"_id":"public/tags/php/index.html","hash":"9707d1ba9d4ab4f7d11193f315a05b83749fe4aa","modified":1576134798744},{"_id":"public/tags/dedecms/index.html","hash":"84c1e666a7e2f2ec31340ad987c4a3f8fbaf0ee1","modified":1576134798744},{"_id":"public/tags/zabbix/index.html","hash":"f90303d2a37bc9f1123235708b6e2a78ab54e4e1","modified":1576134798744},{"_id":"public/tags/python/index.html","hash":"5afff4e2904529045584835059e7eefe51e2b061","modified":1576134798744},{"_id":"public/tags/django/index.html","hash":"dcbb8f585cda29beb2326f62c05b116c678b8888","modified":1576134798744},{"_id":"public/tags/dns/index.html","hash":"01c6bd92b76e9a09933193bc74914c04d97a33d6","modified":1576134798744},{"_id":"public/tags/view/index.html","hash":"f8b7cbdc99eb268aef1d1ee1a1e0ff52948dc7c5","modified":1576134798744},{"_id":"public/tags/domain/index.html","hash":"31a9ab5258affb6e765863249c298ce3adb869c4","modified":1576134798744},{"_id":"public/tags/statusCode/index.html","hash":"8a05124107d3968870ad17e306738d8ae5dd921c","modified":1576134798744},{"_id":"public/tags/http/index.html","hash":"ff546c8e2f4108b295f69cf745bd188c4bb67e82","modified":1576134798744},{"_id":"public/tags/cache/index.html","hash":"745f040be81e5c5879bab54c39306bdc8ab71be9","modified":1576134798744},{"_id":"public/tags/iptables/index.html","hash":"6f9b76f0651edf3bcbcfe065a70849878542524e","modified":1576134798744},{"_id":"public/tags/iscsi/index.html","hash":"463bb426eb392d0f18d1144f3f79707465e5687b","modified":1576134798744},{"_id":"public/tags/store/index.html","hash":"a434c0d020ff8604f90f1a155d868fb587f5a911","modified":1576134798745},{"_id":"public/tags/k8s/index.html","hash":"08980e6a716af46d25bf1e0d624ff01c5f7fb888","modified":1576134798745},{"_id":"public/tags/tcpdump/index.html","hash":"ffe4e9dd357e39027b439e4aecec1c9d4139fd85","modified":1576134798745},{"_id":"public/tags/network/index.html","hash":"8169431e972013e21531d4230ff0dd355e0e9706","modified":1576134798745},{"_id":"public/tags/keepalived/index.html","hash":"225b6b517a8ebf6edab84b882261504eb9825439","modified":1576134798745},{"_id":"public/tags/cluster/index.html","hash":"842e526c1e7a06898d2994895f2d84b0b8702f71","modified":1576134798745},{"_id":"public/tags/arp/index.html","hash":"e68fcc6231014b2af3ee61057b34e569124a59c8","modified":1576134798745},{"_id":"public/tags/kernal/index.html","hash":"5a13c619d5d4b7c61b09ad9c6a5fcc8d4e19ea84","modified":1576134798745},{"_id":"public/tags/acl/index.html","hash":"8548f0e2b031ba70af71a50321297924ed1fe9f7","modified":1576134798745},{"_id":"public/tags/commands/index.html","hash":"b7e5057fa983e49b308e17020f3b33e73f2fc5fc","modified":1576134798745},{"_id":"public/tags/yum/index.html","hash":"a1789d50252edeba067961d599988f6a590fee35","modified":1576134798745},{"_id":"public/tags/lvs/index.html","hash":"81bd9a6f40e992d01cde0017bf5f10b703782e52","modified":1576134798745},{"_id":"public/tags/memcached/index.html","hash":"93a65b4f8bdc860185b5909cd1d2012aa37f9722","modified":1576134798745},{"_id":"public/tags/database/index.html","hash":"5f2d4c1aa293f5a59e2f8f0027405073108741a0","modified":1576134798745},{"_id":"public/tags/mime-type/index.html","hash":"8174a715cccd93ab0bdfb52a7e59a27f2ed1ae4d","modified":1576134798745},{"_id":"public/tags/mssql/index.html","hash":"d3ec1650eaad00c009c60b540a647dac54454342","modified":1576134798745},{"_id":"public/tags/tomcat/index.html","hash":"a2731ab5cb0eae8538bddbb43b5df7aa6585bff0","modified":1576134798745},{"_id":"public/tags/binlog/index.html","hash":"0d03f1ebb3d61bcff254a623ee9746a2e4de715c","modified":1576134798745},{"_id":"public/tags/amoeba/index.html","hash":"36645c11541b459b5281b2c562ba0dedfefe82ec","modified":1576134798745},{"_id":"public/tags/mysqlcheck/index.html","hash":"b77842e0ae2b589c48abbac98f2a81573a78cbda","modified":1576134798746},{"_id":"public/tags/tool/index.html","hash":"79dd4e53e36b4e2221ab1e72171fefddf4f81103","modified":1576134798746},{"_id":"public/tags/nginx/index.html","hash":"1b7a8090205f6f359c90b516ab3d9f87ef9c5e80","modified":1576134798746},{"_id":"public/tags/uwsgi/index.html","hash":"bd48c666b0894abe7964e0be6470fa3bcdf4e189","modified":1576134798746},{"_id":"public/tags/websocket/index.html","hash":"4d9973f9995b555dd82767dd54ea449a53d2357d","modified":1576134798746},{"_id":"public/tags/ntp/index.html","hash":"5d389ea0ec0e7a036b455c1bc625f1b1603b8221","modified":1576134798746},{"_id":"public/tags/CMS/index.html","hash":"cbdf087fe99e21e478850614542e2e9eb1cb3da7","modified":1576134798746},{"_id":"public/tags/phpmyadmin/index.html","hash":"4ec87e1568e6f8ab8b6977e6da7ad840cfed4588","modified":1576134798746},{"_id":"public/tags/postgresql/index.html","hash":"8ab767b425e427785bc979e861a68a77f6974bec","modified":1576134798746},{"_id":"public/tags/pxe/index.html","hash":"1e7f894edb135305980777e2c9ec0df96863cb54","modified":1576134798746},{"_id":"public/tags/kickstart/index.html","hash":"63cc13e6ac4c4c87123ef4edd1b11ac498b1785c","modified":1576134798746},{"_id":"public/tags/socket/index.html","hash":"78871072bd18e007ae601315bfc6e2bf26160b6a","modified":1576134798746},{"_id":"public/tags/mail/index.html","hash":"c23e1f4acb6876a7ff61f3ff098e324bee70340a","modified":1576134798746},{"_id":"public/tags/rbash/index.html","hash":"6662f335a5b2817bfb07316ab532065df0fdba9d","modified":1576134798746},{"_id":"public/tags/bash/index.html","hash":"aa0e9aa6be7fa53f2d07bdd2e384510bf387b572","modified":1576134798746},{"_id":"public/tags/redis/index.html","hash":"cc6e4112d404104413b6826140204fda2f3aa5dc","modified":1576134798746},{"_id":"public/tags/repcache/index.html","hash":"4771dad2e01a1efda9e844a0cddf7a9596fe9da8","modified":1576134798746},{"_id":"public/tags/magent/index.html","hash":"b3152dcf9671bbfce087cd288f52652420c7d2ce","modified":1576134798746},{"_id":"public/tags/rhcs/index.html","hash":"04441a98b436e61a9a7ed989969dc7c4bb41e6b5","modified":1576134798746},{"_id":"public/tags/shell/index.html","hash":"086d1ab5c8956374fcd6a6c65c70af91eb6b1abc","modified":1576134798746},{"_id":"public/tags/ssh/index.html","hash":"1ae9ddbaf0f9958d66bad91985a200be30d0f677","modified":1576134798746},{"_id":"public/tags/statsd/index.html","hash":"521dbab610003c294eed81e042233cb70610b11a","modified":1576134798747},{"_id":"public/tags/graphite/index.html","hash":"25095922036f4b2bf89c2df22e3e0c01fa5bea36","modified":1576134798747},{"_id":"public/tags/monitor/index.html","hash":"ccd5e241cd7f58aab2ec35668dfce3eb1e81a7ac","modified":1576134798747},{"_id":"public/tags/tcp/index.html","hash":"3c420599871352751a612dd42a306b945735d0ce","modified":1576134798747},{"_id":"public/tags/twemproxy/index.html","hash":"3c41442eaa93208615e21e747725cf82a3a7d859","modified":1576134798747},{"_id":"public/tags/memcache/index.html","hash":"c662c1cf15916b525d00a5f890b25d70e9a76559","modified":1576134798747},{"_id":"public/tags/issue/index.html","hash":"4faab2f65e172529a1a464465012a67eed3b09ad","modified":1576134798747},{"_id":"public/tags/vagrant/index.html","hash":"b723f65e1cb93bc816be11069c9fc86de400a141","modified":1576134798747},{"_id":"public/tags/vcenter/index.html","hash":"82902e43f89863b747ef1ebc5b71691dc219c40e","modified":1576134798747},{"_id":"public/tags/mongo/index.html","hash":"2b0f024c6aa77bc12b6cfcc9467cdf68c9aeafe3","modified":1576134798747},{"_id":"public/tags/scripts/index.html","hash":"64f09d5e722f32b8e390952af06278372c78cc4b","modified":1576134798747},{"_id":"public/tags/zentaopms/index.html","hash":"cb8435d87ee4a1a8e729376537104a486a8adee3","modified":1576134798747},{"_id":"public/tags/deployment/index.html","hash":"e6e8dccfeadcf2e124ce008d02bbf6f1729e1d60","modified":1576134798747},{"_id":"public/tags/ingress/index.html","hash":"411a73187bfad11287db7fdbc56bde07d2798087","modified":1576134798748},{"_id":"public/tags/lvm/index.html","hash":"8a4cd7e3d9e5dc23c42c7a1ebf1ada1e74fe34d4","modified":1576134798748},{"_id":"public/tags/udev/index.html","hash":"78152c98d021d863e6a44259dd8fa5826d02eaf6","modified":1576134798748},{"_id":"public/images/11-300x286.png","hash":"1b12c82d7e221312540e39d99c91f6a8357df045","modified":1576134798806},{"_id":"public/images/2-250x300.png","hash":"2e1cd3283898c2f7c5825ca123a2a97c1e381fc9","modified":1576134798806},{"_id":"public/images/DOC8GFX6-300x139.png","hash":"f40599b0599fcd031a74342e9d0d1c37f8778a9c","modified":1576134798806},{"_id":"public/images/apachetest-300x89.png","hash":"3a0b80e416b6294476ff50d2e22d50163ac57039","modified":1576134798806},{"_id":"public/images/clipboard.png","hash":"db17335ae3dc732502a3ff4dddacbd85e9a04414","modified":1576134798806},{"_id":"public/images/clipboard1-300x134-20190917165133735.png","hash":"2f35aad40c96d7428f7f920b344c69d667590eae","modified":1576134798806},{"_id":"public/images/clipboard1-300x134.png","hash":"2f35aad40c96d7428f7f920b344c69d667590eae","modified":1576134798806},{"_id":"public/images/clipboard2-246x300.png","hash":"496568a3c79a421c35ee076cdd967d566ec074dd","modified":1576134798806},{"_id":"public/images/ha.png","hash":"59ffdc2daf448ab87e8bb9b24514ce094e058816","modified":1576134798807},{"_id":"public/images/http-cache-control.png","hash":"6593afbbabcb0996359e27a77353998aa9759f1b","modified":1576134798807},{"_id":"public/images/hainstall.png","hash":"46f87efb34cb01db975e87cf9bb6e9f7262b20c0","modified":1576134798807},{"_id":"public/images/ha2.png","hash":"22419e7881858256a0ed8e34b648201308864dae","modified":1576134798807},{"_id":"public/images/image-20191021135643975.png","hash":"f6dacb60c8ef4f12205c7d0abada960dbe0159c5","modified":1576134798807},{"_id":"public/images/img_56f4a9789a5c5.png","hash":"f841b8b06e115c191f755aad6efc96b652cdb038","modified":1576134798807},{"_id":"public/images/image.png","hash":"2dead1110ec1f44037aae6b3477cf63674a7044c","modified":1576134798807},{"_id":"public/images/img_56f4a99aa9435.png","hash":"9a81670acdac1c8a9e71a21c62ff0c664febf18f","modified":1576134798807},{"_id":"public/images/img_56f4a9875257e.png","hash":"53ffc7aeb28fa2bb3d6f139410ca4effd516b0a1","modified":1576134798807},{"_id":"public/images/img_56f4a9ab888d0.png","hash":"a3384d08c417ce42df34a4d847eed880a896acf7","modified":1576134798807},{"_id":"public/images/img_56f4aa6c69a26-20190917143633077.png","hash":"1854be7b0916af4648c9a314593c8b8990d751c0","modified":1576134798807},{"_id":"public/images/img_570da13048078.png","hash":"0292f0426e9a4ec009abc39964e81c6814273394","modified":1576134798807},{"_id":"public/images/img_56f4aa8c14ae0-20190917143633236.png","hash":"09c4d00f74e00656eb1bef1140adc7802b785777","modified":1576134798807},{"_id":"public/images/img_56f4aa8c14ae0-20190917145027287.png","hash":"09c4d00f74e00656eb1bef1140adc7802b785777","modified":1576134798808},{"_id":"public/images/img_570da1465a8dc.png","hash":"561da3e1edaaff1999fa203bd938bdf89967d980","modified":1576134798808},{"_id":"public/images/img_56f4aa989af5e-20190917143633212.png","hash":"f810f94576d604af90d0bd665323e784a5eb7bcc","modified":1576134798808},{"_id":"public/images/img_570da15f9ead1.png","hash":"c256a1f98473d58727b1aa2258c8b298eaf5d052","modified":1576134798808},{"_id":"public/images/img_5773310c679a1.png","hash":"84ddd7cd21942ad93875be02c5952db2eb9491bb","modified":1576134798808},{"_id":"public/images/img_5877344e51cd6.png","hash":"b47b4cd849a434480681e14bc9b0e63bbb939e8c","modified":1576134798808},{"_id":"public/images/img_587dde19b6b47.png","hash":"766c8be87b4ea15ac8f367049ef2721b93d2cfa7","modified":1576134798808},{"_id":"public/images/img_58802ffca93b9.png","hash":"6920935b7932b8eb29931460f184c8b20e0ee264","modified":1576134798808},{"_id":"public/images/img_588031f4a62e1.png","hash":"c51c318af01f841991aa58a499fc57962931d891","modified":1576134798808},{"_id":"public/images/img_58803215d9370.png","hash":"41db0b6faee076ba536348173c572f39ed14d4f8","modified":1576134798808},{"_id":"public/images/img_5880322f10890.png","hash":"e73fa0d077b8972d69073abfa0782067d672730c","modified":1576134798808},{"_id":"public/images/img_58ddc18a1993a.png","hash":"e3e303a981a79e6480b9289198baafa631369c2c","modified":1576134798808},{"_id":"public/images/img_58ddc1b2d8078.png","hash":"53f19404471eb2437000d50dafdadab98bbb80ef","modified":1576134798808},{"_id":"public/images/img_58ddc20c6f8c3.png","hash":"6637028cc18d347669ffdd962580203d19b12cc2","modified":1576134798809},{"_id":"public/images/img_59b269634a216.png","hash":"51c6094920e288cb233d611dabcc247659ea8d3e","modified":1576134798809},{"_id":"public/images/img_59b2698d5658f.png","hash":"c7308db8045ee884af54a6d83c767e8c6d4e7274","modified":1576134798809},{"_id":"public/images/img_59b26b3126991.png","hash":"5c2aed7fcc584c781e2b59ed657ee83be98b8218","modified":1576134798809},{"_id":"public/images/img_59c35d1d930c1.png","hash":"299bbc1a1fb906d810f706e7a3e292e5cb98df99","modified":1576134798809},{"_id":"public/images/img_59c35cd9ab71b.png","hash":"602cda8dd6854cb3e6f0d7d80ca6af569a49d02b","modified":1576134798809},{"_id":"public/images/lvsnat.png","hash":"d1248d59fdedefb0f4d8189cdb31e2206bd19cfb","modified":1576134798810},{"_id":"public/images/tomcat-300x84.png","hash":"41ef0d0d8c20b8f12e845db1b342633b6c9e24c2","modified":1576134798810},{"_id":"public/favicon.png","hash":"8ee63c36da95b5e2083a84c7798d16c045fc71b6","modified":1576134798810},{"_id":"public/fonts/iconfont.ttf","hash":"9b8837f9f79cf6ab794736301d0665345183a20c","modified":1576134798810},{"_id":"public/fonts/iconfont.eot","hash":"6819d9bb643bdeafc17bfecb0746ae641b018fdf","modified":1576134798810},{"_id":"public/fonts/iconfont.woff","hash":"78d29194287b8885d25212048c4f787705212a6e","modified":1576134798810},{"_id":"public/images/thumb-default.png","hash":"e8403b97ed9251f9f5207765b0ce796c5000b4ba","modified":1576134798810},{"_id":"public/images/xingqiu-qrcode.jpg","hash":"ef2c2848dc79db6df7c752510651ed8ba57f2daf","modified":1576134798811},{"_id":"public/images/donate/alipayimg.png","hash":"9562f23f2eb57841c65dc769b6cc43a2cf0efa94","modified":1576134798811},{"_id":"public/images/donate/wechatpayimg.png","hash":"c0844d9a633696cb00ae64fde06f0f924f63b596","modified":1576134798811},{"_id":"public/images/favatar/SzsFox-logo.png","hash":"d71fcc73b7bc2a439d8c7ba461137856d190bd76","modified":1576134798811},{"_id":"public/images/favatar/chuangzaoshi-logo.png","hash":"7fa5734072050952159a02d330bbc008b5a99122","modified":1576134798811},{"_id":"public/images/favatar/idesign-logo.png","hash":"6b150a2dbb9912b7a7662255c27e4d4baaecee71","modified":1576134798811},{"_id":"public/images/image-20191018151450374.png","hash":"30058eb5e01ed0926dea58791fd0b508c5758735","modified":1576134798832},{"_id":"public/images/image-20191018172515467.png","hash":"21fb97c079dd7e42e3f740e0fc067a5ac8722159","modified":1576134798832},{"_id":"public/images/image-20191021135659882.png","hash":"bafb09c042885b8954e23b19dfd195742c836e92","modified":1576134798833},{"_id":"public/images/image-20191021135714997.png","hash":"f4261de4235e16a616bae98494b6898e5b3147cf","modified":1576134798833},{"_id":"public/images/image-20191021135724279.png","hash":"4eee96043d0eb02254acff5b183f3a5ee6eae784","modified":1576134798833},{"_id":"public/images/img_56f4aa5d219ba-20190917143633356.png","hash":"32aaa1e95a4f871499b08b384eeaeeec34518d0c","modified":1576134798833},{"_id":"public/images/img_56f4aa815cb3c-20190917143633401.png","hash":"85842619f56096d94dc496b659e8e9c7d1cf02d3","modified":1576134798833},{"_id":"public/images/img_570da173ef401.png","hash":"722a7d3c25090830d23aa2656d7f262f8db5de34","modified":1576134798833},{"_id":"public/images/img_577330e1e5d06.png","hash":"2ad2f39c516a0b62a7b9fd2b9e2099d01e0efa24","modified":1576134798833},{"_id":"public/images/img_577330f8871b5.png","hash":"d545dc4f729b5d7a5e5d24d20f8dfe609be300d9","modified":1576134798833},{"_id":"public/images/img_5773313591d94.png","hash":"77e4c5b14a0dcda0e86977ba0bf899e4b7124947","modified":1576134798833},{"_id":"public/images/img_57733153a13cb.png","hash":"beb066fff61bdfe490890a847b21f3a42dcbdc12","modified":1576134798833},{"_id":"public/images/img_587733a5ae0ba.png","hash":"ef234d83dfbb9d3346bc271b3d49cb081cd046e9","modified":1576134798833},{"_id":"public/images/img_5877340a43dea.png","hash":"02d0360688cddd0d1490df01a0282bd793d63dce","modified":1576134798833},{"_id":"public/images/img_587ddd23c02a3.png","hash":"0b3ec3f54e9057bda815651e0806dc5acdeec335","modified":1576134798833},{"_id":"public/images/img_5a66a577176c8.png","hash":"d623866b5c05e05f905c1fc739f23d2234249784","modified":1576134798833},{"_id":"public/images/img_59b26b4437729.png","hash":"4948ab6dee9db76e37dd56547ca3d45249ae5190","modified":1576134798833},{"_id":"public/images/img_59c35d389b1c5.png","hash":"50a728e86b1f9ef5e7e012db3f43cf3244a38927","modified":1576134798833},{"_id":"public/images/san.png","hash":"e468f9b1f14503d51842dc8f56edb9b5fc75e9b2","modified":1576134798834},{"_id":"public/images/avatar.jpg","hash":"8ebc792488e45126aa195dc065ef2a9590d0908b","modified":1576134798834},{"_id":"public/js/application.js","hash":"46d1fb207ce5f0acb83803f927985dfcea86f9ef","modified":1576134798859},{"_id":"public/js/application.min.js","hash":"34d765e982c7d6360c37f82202d99f63ac40e408","modified":1576134798859},{"_id":"public/fonts/README.html","hash":"7c1128fed284d2fb7fee743e8a739da99385b358","modified":1576134798859},{"_id":"public/images/QQ20161220-0.png","hash":"41308380ef4ee41f73f776300e1595b9d7f63189","modified":1576134798859},{"_id":"public/images/img_577330bdc322e.png","hash":"8e6e049cb4c08d9c845ee1a08220fd7b30dc9c9a","modified":1576134798859},{"_id":"public/js/plugin.js.map","hash":"1730c0cc660f863120aca0a439d7264e2e245fc5","modified":1576134798859},{"_id":"public/fonts/iconfont.svg","hash":"25929e6e74f7027acd1f6467a67e95b153bcd8d5","modified":1576134798859},{"_id":"public/js/insight.js","hash":"078880783984873abc0f53701f6a92295b81f9b1","modified":1576134798919},{"_id":"public/images/img_57b1811567e55.png","hash":"f57f2b990ca2dafd270adf4461ccf1c6b64172dc","modified":1576134798919},{"_id":"public/images/img_5bbefa0f833d9.png","hash":"3b368170e1f12c845932f3fdafa8be65da7c111e","modified":1576134798919},{"_id":"public/images/img_5b5184bfd49e3.png","hash":"bee215303308e2cede55ddbba94846ebfaab7de1","modified":1576134798948},{"_id":"public/images/img_5bbef98529a61.png","hash":"b450adb8c2210f032bbb3ba3d740982ce29a8b94","modified":1576134798949},{"_id":"public/images/1.png","hash":"fbe8f2067ce2f6c7423cfef7f7a5b6639da08662","modified":1576134798971},{"_id":"public/images/img_5b5183b84d4dd.png","hash":"6899405fd33e268a2907b14319433729a80040f1","modified":1576134799043},{"_id":"public/images/img_5b5184fb1c8d4.png","hash":"4a6cc38b8b70dac09cd6f976101e5c07ed8430c5","modified":1576134799088},{"_id":"public/images/img_59b26b60dc7e7.png","hash":"d46319756f42ddaae0c56e765ad5a54f1c859099","modified":1576134799088},{"_id":"public/js/plugin.min.js","hash":"07fe34638f9832702c5f81d8583c5e4e8b3d9659","modified":1576134799216},{"_id":"public/images/img_59b2697b89208.png","hash":"a94e2009abc1ea6919fe8dba1201072879180f53","modified":1576134799216},{"_id":"public/js/jquery.min.js","hash":"5a9dcfbef655a2668e78baebeaa8dc6f41d8dabb","modified":1576134799231},{"_id":"public/images/image-20190917165314461.png","hash":"1cf6dfb86d084ced7cbc466aa87d137d9ad838a7","modified":1576134799234},{"_id":"public/js/plugin.js","hash":"a8524d42b8621bfaa06602a163c6a1f82702b91d","modified":1576134799236},{"_id":"public/css/style.min.css","hash":"1d23abc76726ebe042f7df4749f00f8f73338444","modified":1576134799239},{"_id":"public/images/avatar.png","hash":"97ec5ba51935886e732368bfd59e3a6d4ddff421","modified":1576134799239},{"_id":"public/css/style.css","hash":"3b693ce41c2e35ece4773593e94b4c17aeaee02f","modified":1576134799244},{"_id":"public/images/img_5b518515e4fe7.png","hash":"1dce10cf18b5a9ad7336ad661e46b134944fde81","modified":1576134799267}],"Category":[{"name":"storage","_id":"ck42dyic20004u9urn060qw0z"},{"name":"apache","_id":"ck42dyica000cu9ur2jlf7mul"},{"name":"iis","_id":"ck42dyico000zu9ur9oq9njcj"},{"name":"aws","_id":"ck42dyicq0017u9urzxp10y94"},{"name":"mysql","_id":"ck42dyics001cu9urpi9o1eby"},{"name":"linux","_id":"ck42dyicv001iu9ur046nlayu"},{"name":"php","_id":"ck42dyid0001uu9urvlag5v12"},{"name":"zabbix","_id":"ck42dyid20022u9uraijfbn3j"},{"name":"python","_id":"ck42dyid7002bu9urpi1q1uss"},{"name":"dns","_id":"ck42dyidc002ku9ur5y2ypmi8"},{"name":"windows","parent":"ck42dyico000zu9ur9oq9njcj","_id":"ck42dyidf002su9ur4xlllc96"},{"name":"docker","_id":"ck42dyidi0030u9urnrqcnnmc"},{"name":"domain","_id":"ck42dyidk0039u9ur4zat4odc"},{"name":"statsd","_id":"ck42dyidq003ru9urdqh8wg31"},{"name":"http","_id":"ck42dyidv003zu9urpunktu88"},{"name":"windows","_id":"ck42dyidx0047u9urivti2y1b"},{"name":"k8s","_id":"ck42dyie70054u9ur023qs6p4"},{"name":"keepalived","_id":"ck42dyieb005eu9urm9h1r9sw"},{"name":"issue","parent":"ck42dyid20022u9uraijfbn3j","_id":"ck42dyiej005uu9urifl1vh09"},{"name":"graphite","parent":"ck42dyidq003ru9urdqh8wg31","_id":"ck42dyiem0062u9ura1veaetp"},{"name":"lvs","_id":"ck42dyieo006bu9ur5ieuh1nw"},{"name":"memcached","_id":"ck42dyiez0071u9urtp6vor4p"},{"name":"iis","parent":"ck42dyidx0047u9urivti2y1b","_id":"ck42dyif20079u9ur78i2ztmp"},{"name":"mime-type","parent":"ck42dyidv003zu9urpunktu88","_id":"ck42dyif7007hu9ur3qe50ju3"},{"name":"mssql","_id":"ck42dyifc007pu9ur7wg10ds8"},{"name":"tomcat","_id":"ck42dyift0084u9urzsnovddf"},{"name":"nginx","_id":"ck42dyig0008ju9uray42j70i"},{"name":"uwsgi","parent":"ck42dyid7002bu9urpi1q1uss","_id":"ck42dyiga0093u9urwv251ism"},{"name":"postgresql","_id":"ck42dyigf009ju9urkgmg7f4q"},{"name":"redis","_id":"ck42dyigj009uu9ur9wgtgpof"},{"name":"cluster","_id":"ck42dyigw00avu9ur2bqhr7x9"},{"name":"debug","parent":"ck42dyid0001uu9urvlag5v12","_id":"ck42dyigy00b4u9ure176buoh"},{"name":"shell","_id":"ck42dyih000bcu9urasxfsqo7"},{"name":"command","_id":"ck42dyih500bmu9ur6pqwm4ex"},{"name":"redis","parent":"ck42dyiez0071u9urtp6vor4p","_id":"ck42dyih900c1u9urpqdei5ce"},{"name":"uwsgi","_id":"ck42dyihb00ceu9urc46zok81"},{"name":"vagrant","_id":"ck42dyihc00cku9urbo0awjda"},{"name":"vcenter","_id":"ck42dyihf00d3u9urvpy0g54n"},{"name":"vcenter","parent":"ck42dyidx0047u9urivti2y1b","_id":"ck42dyihf00d8u9ur0sagxhsq"},{"name":"nginx","parent":"ck42dyico000zu9ur9oq9njcj","_id":"ck42dyihg00dcu9urynz8jxy3"},{"name":"linux","parent":"ck42dyih000bcu9urasxfsqo7","_id":"ck42dyihh00dhu9urf4h8kvcs"},{"name":"zentaopms","_id":"ck42dyihh00dou9ur31w11awk"},{"name":"python","parent":"ck42dyihb00ceu9urc46zok81","_id":"ck42dyihj00dyu9urz7m104fc"},{"name":"deployment","parent":"ck42dyihh00dou9ur31w11awk","_id":"ck42dyihj00e3u9urm7dk3xb7"},{"name":"nginx","parent":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyijx00kcu9urlkd37pye"},{"name":"debug","parent":"ck42dyijx00kcu9urlkd37pye","_id":"ck42dyijy00kju9ur0juzld8b"}],"Data":[],"Page":[{"layout":"about","_content":"#### \n-------------\n- [x]    : http://www.foooooot.com/trip/3067492/\n- [x]    \n- [x] \n- [ ] \n- [ ] \n- [ ] \n- [x] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [x]   : http://foooooot.com/trip/3169829/\n- [x]  : http://foooooot.com/trip/3169859/\n\n-------------\nPS","source":"about/index.md","raw":"---\nlayout: \"about\"\n# title: \"About me\"\n---\n#### \n-------------\n- [x]    : http://www.foooooot.com/trip/3067492/\n- [x]    \n- [x] \n- [ ] \n- [ ] \n- [ ] \n- [x] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [ ] \n- [x]   : http://foooooot.com/trip/3169829/\n- [x]  : http://foooooot.com/trip/3169859/\n\n-------------\nPS","date":"2019-12-12T07:10:10.337Z","updated":"2019-12-12T07:10:10.337Z","path":"about/index.html","title":"","comments":1,"_id":"ck42dyibu0000u9uroxtc4nj7","content":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr>\n<ul>\n<li><input checked disabled type=\"checkbox\">    : <a href=\"http://www.foooooot.com/trip/3067492/\" target=\"_blank\" rel=\"noopener\">http://www.foooooot.com/trip/3067492/</a></li>\n<li><input checked disabled type=\"checkbox\">    </li>\n<li><input checked disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input checked disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input checked disabled type=\"checkbox\">   : <a href=\"http://foooooot.com/trip/3169829/\" target=\"_blank\" rel=\"noopener\">http://foooooot.com/trip/3169829/</a></li>\n<li><input checked disabled type=\"checkbox\">  : <a href=\"http://foooooot.com/trip/3169859/\" target=\"_blank\" rel=\"noopener\">http://foooooot.com/trip/3169859/</a></li>\n</ul>\n<hr>\n<p>PS</p>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr>\n<ul>\n<li><input checked disabled type=\"checkbox\">    : <a href=\"http://www.foooooot.com/trip/3067492/\" target=\"_blank\" rel=\"noopener\">http://www.foooooot.com/trip/3067492/</a></li>\n<li><input checked disabled type=\"checkbox\">    </li>\n<li><input checked disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input checked disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input disabled type=\"checkbox\"> </li>\n<li><input checked disabled type=\"checkbox\">   : <a href=\"http://foooooot.com/trip/3169829/\" target=\"_blank\" rel=\"noopener\">http://foooooot.com/trip/3169829/</a></li>\n<li><input checked disabled type=\"checkbox\">  : <a href=\"http://foooooot.com/trip/3169859/\" target=\"_blank\" rel=\"noopener\">http://foooooot.com/trip/3169859/</a></li>\n</ul>\n<hr>\n<p>PS</p>\n"},{"title":"","layout":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"---\ntitle: \nlayout: categories\ncomments: false\n---\n","date":"2019-09-27T06:54:52.021Z","updated":"2019-09-27T06:54:52.017Z","path":"categories/index.html","_id":"ck42dyibz0002u9ur0wap6coi","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"Favorite site","layout":"post","comments":1,"sidebar":"none","_content":"[sameersbn/docker-gitlab: Dockerized GitLab](https://github.com/sameersbn/docker-gitlab)\n\n[jamesrwhite/minicron: A system to manage and monitor cron jobs](https://github.com/jamesrwhite/minicron)\n\n[samwierema/go-qr-generator: A QR code generator written in Golang](https://github.com/samwierema/go-qr-generator)\n\n[jumpserver/jumpserver: ():,,,](https://github.com/jumpserver/jumpserver)\n\n[etsy/statsd: Daemon for easy but powerful stats aggregation](https://github.com/etsy/statsd)\n\n[mobtitude/docker-vpn-pptp](https://github.com/mobtitude/docker-vpn-pptp)\n\n[adnanh/webhook: webhook is a lightweight configurable tool written in Go, that allows you to easily create HTTP endpoints (hooks) on your server, which you can use to execute configured commands.](https://github.com/adnanh/webhook)\n\n[TonnyL/Awesome_APIs: A collection of APIs](https://github.com/TonnyL/Awesome_APIs)\n\n[henices/Tcp-DNS-proxy: A TCP dns proxy which can get the RIGHT ip address](https://github.com/henices/Tcp-DNS-proxy)\n\n[robbyrussell/oh-my-zsh: A delightful community-driven (with 1,000+ contributors) framework for managing your zsh configuration. Includes 200+ optional plugins (rails, git, OSX, hub, capistrano, brew, ant, php, python, etc), over 140 themes to spice up your morning, and an auto-update tool so that makes it easy to keep up with the latest updates from the community.](https://github.com/robbyrussell/oh-my-zsh)\n\n[kylemanna/docker-openvpn:  OpenVPN server in a Docker container complete with an EasyRSA PKI CA](https://github.com/kylemanna/docker-openvpn)\n\n[oddrationale/docker-shadowsocks: shadowsocks Docker image](https://github.com/oddrationale/docker-shadowsocks)","source":"links/index.md","raw":"---\ntitle: Favorite site\nlayout: post\ncomments: true\nsidebar: none\n---\n[sameersbn/docker-gitlab: Dockerized GitLab](https://github.com/sameersbn/docker-gitlab)\n\n[jamesrwhite/minicron: A system to manage and monitor cron jobs](https://github.com/jamesrwhite/minicron)\n\n[samwierema/go-qr-generator: A QR code generator written in Golang](https://github.com/samwierema/go-qr-generator)\n\n[jumpserver/jumpserver: ():,,,](https://github.com/jumpserver/jumpserver)\n\n[etsy/statsd: Daemon for easy but powerful stats aggregation](https://github.com/etsy/statsd)\n\n[mobtitude/docker-vpn-pptp](https://github.com/mobtitude/docker-vpn-pptp)\n\n[adnanh/webhook: webhook is a lightweight configurable tool written in Go, that allows you to easily create HTTP endpoints (hooks) on your server, which you can use to execute configured commands.](https://github.com/adnanh/webhook)\n\n[TonnyL/Awesome_APIs: A collection of APIs](https://github.com/TonnyL/Awesome_APIs)\n\n[henices/Tcp-DNS-proxy: A TCP dns proxy which can get the RIGHT ip address](https://github.com/henices/Tcp-DNS-proxy)\n\n[robbyrussell/oh-my-zsh: A delightful community-driven (with 1,000+ contributors) framework for managing your zsh configuration. Includes 200+ optional plugins (rails, git, OSX, hub, capistrano, brew, ant, php, python, etc), over 140 themes to spice up your morning, and an auto-update tool so that makes it easy to keep up with the latest updates from the community.](https://github.com/robbyrussell/oh-my-zsh)\n\n[kylemanna/docker-openvpn:  OpenVPN server in a Docker container complete with an EasyRSA PKI CA](https://github.com/kylemanna/docker-openvpn)\n\n[oddrationale/docker-shadowsocks: shadowsocks Docker image](https://github.com/oddrationale/docker-shadowsocks)","date":"2019-10-21T09:33:20.417Z","updated":"2019-10-21T09:33:20.417Z","path":"links/index.html","_id":"ck42dyic30005u9ur6smw59aa","content":"<p><a href=\"https://github.com/sameersbn/docker-gitlab\" target=\"_blank\" rel=\"noopener\">sameersbn/docker-gitlab: Dockerized GitLab</a></p>\n<p><a href=\"https://github.com/jamesrwhite/minicron\" target=\"_blank\" rel=\"noopener\">jamesrwhite/minicron: A system to manage and monitor cron jobs</a></p>\n<p><a href=\"https://github.com/samwierema/go-qr-generator\" target=\"_blank\" rel=\"noopener\">samwierema/go-qr-generator: A QR code generator written in Golang</a></p>\n<p><a href=\"https://github.com/jumpserver/jumpserver\" target=\"_blank\" rel=\"noopener\">jumpserver/jumpserver: ():,,,</a></p>\n<p><a href=\"https://github.com/etsy/statsd\" target=\"_blank\" rel=\"noopener\">etsy/statsd: Daemon for easy but powerful stats aggregation</a></p>\n<p><a href=\"https://github.com/mobtitude/docker-vpn-pptp\" target=\"_blank\" rel=\"noopener\">mobtitude/docker-vpn-pptp</a></p>\n<p><a href=\"https://github.com/adnanh/webhook\" target=\"_blank\" rel=\"noopener\">adnanh/webhook: webhook is a lightweight configurable tool written in Go, that allows you to easily create HTTP endpoints (hooks) on your server, which you can use to execute configured commands.</a></p>\n<p><a href=\"https://github.com/TonnyL/Awesome_APIs\" target=\"_blank\" rel=\"noopener\">TonnyL/Awesome_APIs: A collection of APIs</a></p>\n<p><a href=\"https://github.com/henices/Tcp-DNS-proxy\" target=\"_blank\" rel=\"noopener\">henices/Tcp-DNS-proxy: A TCP dns proxy which can get the RIGHT ip address</a></p>\n<p><a href=\"https://github.com/robbyrussell/oh-my-zsh\" target=\"_blank\" rel=\"noopener\">robbyrussell/oh-my-zsh: A delightful community-driven (with 1,000+ contributors) framework for managing your zsh configuration. Includes 200+ optional plugins (rails, git, OSX, hub, capistrano, brew, ant, php, python, etc), over 140 themes to spice up your morning, and an auto-update tool so that makes it easy to keep up with the latest updates from the community.</a></p>\n<p><a href=\"https://github.com/kylemanna/docker-openvpn\" target=\"_blank\" rel=\"noopener\">kylemanna/docker-openvpn:  OpenVPN server in a Docker container complete with an EasyRSA PKI CA</a></p>\n<p><a href=\"https://github.com/oddrationale/docker-shadowsocks\" target=\"_blank\" rel=\"noopener\">oddrationale/docker-shadowsocks: shadowsocks Docker image</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/sameersbn/docker-gitlab\" target=\"_blank\" rel=\"noopener\">sameersbn/docker-gitlab: Dockerized GitLab</a></p>\n<p><a href=\"https://github.com/jamesrwhite/minicron\" target=\"_blank\" rel=\"noopener\">jamesrwhite/minicron: A system to manage and monitor cron jobs</a></p>\n<p><a href=\"https://github.com/samwierema/go-qr-generator\" target=\"_blank\" rel=\"noopener\">samwierema/go-qr-generator: A QR code generator written in Golang</a></p>\n<p><a href=\"https://github.com/jumpserver/jumpserver\" target=\"_blank\" rel=\"noopener\">jumpserver/jumpserver: ():,,,</a></p>\n<p><a href=\"https://github.com/etsy/statsd\" target=\"_blank\" rel=\"noopener\">etsy/statsd: Daemon for easy but powerful stats aggregation</a></p>\n<p><a href=\"https://github.com/mobtitude/docker-vpn-pptp\" target=\"_blank\" rel=\"noopener\">mobtitude/docker-vpn-pptp</a></p>\n<p><a href=\"https://github.com/adnanh/webhook\" target=\"_blank\" rel=\"noopener\">adnanh/webhook: webhook is a lightweight configurable tool written in Go, that allows you to easily create HTTP endpoints (hooks) on your server, which you can use to execute configured commands.</a></p>\n<p><a href=\"https://github.com/TonnyL/Awesome_APIs\" target=\"_blank\" rel=\"noopener\">TonnyL/Awesome_APIs: A collection of APIs</a></p>\n<p><a href=\"https://github.com/henices/Tcp-DNS-proxy\" target=\"_blank\" rel=\"noopener\">henices/Tcp-DNS-proxy: A TCP dns proxy which can get the RIGHT ip address</a></p>\n<p><a href=\"https://github.com/robbyrussell/oh-my-zsh\" target=\"_blank\" rel=\"noopener\">robbyrussell/oh-my-zsh: A delightful community-driven (with 1,000+ contributors) framework for managing your zsh configuration. Includes 200+ optional plugins (rails, git, OSX, hub, capistrano, brew, ant, php, python, etc), over 140 themes to spice up your morning, and an auto-update tool so that makes it easy to keep up with the latest updates from the community.</a></p>\n<p><a href=\"https://github.com/kylemanna/docker-openvpn\" target=\"_blank\" rel=\"noopener\">kylemanna/docker-openvpn:  OpenVPN server in a Docker container complete with an EasyRSA PKI CA</a></p>\n<p><a href=\"https://github.com/oddrationale/docker-shadowsocks\" target=\"_blank\" rel=\"noopener\">oddrationale/docker-shadowsocks: shadowsocks Docker image</a></p>\n"},{"title":"Repositories","layout":"repository","comments":0,"sidebar":"none","_content":"","source":"repository/index.md","raw":"---\ntitle: Repositories\nlayout: repository\ncomments: false\nsidebar: none\n---\n","date":"2019-09-27T06:55:01.568Z","updated":"2019-09-27T06:55:01.567Z","path":"repository/index.html","_id":"ck42dyic60008u9ur5sj9ldk8","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"tags","title":"Tags","_content":"","source":"tags/index.md","raw":"---\nlayout: \"tags\"\ntitle: \"Tags\"\n---","date":"2019-09-26T09:33:06.254Z","updated":"2019-09-26T09:33:06.254Z","path":"tags/index.html","comments":1,"_id":"ck42dyic9000au9ur7jja2owx","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"Commands Tips","layout":"post","comments":1,"_content":"\n\n```\n#region\nfor i in $(aws ec2 describe-regions | grep RegionName| awk -F\"[\\\"]+\" '{print $4}');do echo -n \"$i:  \"; AWS_PROFILE=jp aws --region=$i ec2 describe-instances|grep InstanceId|wc -l;done;\n\n#tag.nameprivateIP\naws ec2 describe-instances --filters \"Name=tag:Service,Values=eos\" --query \"Reservations[*].Instances[*].[PrivateIpAddress,Tags[?Key=='Name'].Value]\" --output text\n\n#simple http server\npython -m SimperHTTPServer 60123\n\n#ssh\nssh -v -N -L 0.0.0.0:60123:192.168.10.195:60123 203.175.165.66\n\n#rsa\nssh-keygen -y -f id_rsa > id_rsa.pub\n\n#wget \nwget -c -t 0 -O backup_2018_01_01_050000_9591273.bak http://47.88.192.116:12312/backup_2018_01_01_050000_9591273.bak\n\n\n#rsync+ssh proxy\nrsync -av -P -e \"ssh -o 'ProxyCommand ssh 123.206.197.235 nc %h %p'\" 2018-03-06_03-05.sql.gz 10.86.48.8:/data/backup\n\n#consul-template\n/srv/consul/consul-template -consul 192.168.10.123:8500 -template /srv/consul/my.ctmpl:/srv/consul/conf.d/my.conf:/etc/init.d/nginx reload -once\n\n#iptables forward\niptables -t nat -A PREROUTING -d 192.168.10.226 -p tcp -dport 6386 -j DNAT --to-destination 192.168.10.81:6386\niptables -t nat -I POSTROUTING  -j MASQUERADE\n\n#wireshark\nssh -o 'ProxyCommand ssh 123.206.197.235 nc %h %p' 192.168.199.63 \"sudo tcpdump -vv -i eth0 port 80 -w -\" | wireshark -k -i -\n\n#git diffcommit\ngit diff --name-status 128e72a28ea38d1c8691a22a28937356e7adf736^ 128e72a28ea38d1c8691a22a28937356e7adf736\n\n#docker log-opt\n--log-driver syslog --log-opt tag=\"eos-producer\"\n--log-driver json-file --log-opt max-size=500m\n\nsudo docker run --log-driver=awslogs --log-opt awslogs-region=ap-southeast-1 --log-opt awslogs-group=eos-log --log-opt awslogs-datetime-format='\\[%b %d, %Y %H:%M:%S\\]'  -d  -p 8898:80 nginx\n\ndocker run -d -p 9876:9876 -p 80:8888 --name eos --log-driver gelf --log-opt gelf-address=udp://10.188.10.145:15155  -v /data/eos/:/eos  eoslaomao/eos:1.3.0 /opt/eosio/bin/nodeos --data-dir=/eos/data --config-dir=/eos/conf\n\ndocker run -d -p 9876:9876 -p 8888:8888 --name eos --log-driver json-file --log-opt max-size=1g  -v /data/eos/:/eos gcr.io/eosasia-testnet/eos:v1.5.3-patch /opt/eosio/bin/nodeos --data-dir=/eos/data --config-dir=/eos/conf\n\n#pigz\napt install pigz\ntar --use-compress-program=pigz -cvpf package.tgz ./package\ntar --use-compress-program=pigz -xvpf package.tgz -C ./package\n\n#aws elb reg/unreg instance\naws elbv2 register-targets --target-group-arn=arn:aws:elasticloadbalancing:ap-northeast-1:908572518:targetgroup/e-api-1/65c430c260d1556e --targets Id=i-00b7f498a742cd\naws elbv2 deregister-targets --target-group-arn=arn:aws:elasticloadbalancing:ap-northeast-1:908572518:targetgroup/e-api-1/65c430c260d1556e --targets Id=i-00b7f498a742cd\n\n#pmm\ndocker run -d \\\n   -p 80:81 \\\n   --volumes-from pmm-data \\\n   --name pmm-server \\\n   --restart always \\\n   percona/pmm-server:latest\n\n#git private key clone\nGIT_SSH_COMMAND=\"ssh -i ~/.ssh/id_rsa\" git clone git@cd.i.ly.com:ly/cat.git\n\n\n#K8S \nkubectl -n test port-forward $(kubectl -n test get endpoints prometheus -o jsonpath='{.subsets[0].addresses[0].targetRef.name}') 9090:9090\n\n#jp \njq  '.members[]|{\"id\": .id, \"Name\": .fullName}' trello.json\njq  '.cards[]|if .idList == \"5c64e37e57ba1c20f62751ce\" then .idMembers else .xxx end' trello.json\n\n#websocket\ns = new WebSocket('wss://www.staging.strikingly.com/livechat-ws')\ns.onclose = (e) => { console.log(e)}\n\n# postgresql scheme\nselect * from information_schema.schemata;\n\n# - postgresql\nSELECT a.attname as name, a.attnotnull as notnull\nFROM pg_class as c,pg_attribute as a\nwhere c.relname = 'mini_program_accounts' and a.attrelid = c.oid and a.attnum>0\n\n#postgresql dump database\npg_dump -U vi -d vi -h rm-j.pg.rds.aliyuncs.com -p 3433 --no-owner --no-privileges -f vi.sql\n\n#mysqldump\nmysqldump --host rm-j.mysql.rds.aliyuncs.com -u vi -p --databases via --column-statistics=0 > vi.sql\n\n# \nselect count(*) from pg_stat_activity;\n\n# idle\nselect pg_terminate_backend(pid) from pg_stat_activity where state='idle';\n\n# \nSELECT  \nschemaname as schema,  \ntablename as table_name,  \npg_size_pretty(pg_relation_size(schemaname || '.' || tablename)) AS size_p,  \npg_total_relation_size(schemaname || '.' || tablename) AS siz,  \npg_size_pretty(pg_total_relation_size(schemaname || '.' || tablename)) AS ,  \npg_total_relation_size(schemaname || '.' || tablename) - pg_relation_size(schemaname || '.' || tablename) AS ,  \n(100*(pg_total_relation_size(schemaname || '.' || tablename) - pg_relation_size(schemaname || '.' || tablename)))/CASE WHEN pg_total_relation_size(schemaname || '.' || tablename) = 0 THEN 1 ELSE pg_total_relation_size(schemaname || '.' || tablename) END || '%' AS index_pct  \nFROM pg_tables  \nORDER BY siz DESC  \n```","source":"tips/index.md","raw":"---\ntitle: Commands Tips\nlayout: post\ncomments: true\n---\n\n\n```\n#region\nfor i in $(aws ec2 describe-regions | grep RegionName| awk -F\"[\\\"]+\" '{print $4}');do echo -n \"$i:  \"; AWS_PROFILE=jp aws --region=$i ec2 describe-instances|grep InstanceId|wc -l;done;\n\n#tag.nameprivateIP\naws ec2 describe-instances --filters \"Name=tag:Service,Values=eos\" --query \"Reservations[*].Instances[*].[PrivateIpAddress,Tags[?Key=='Name'].Value]\" --output text\n\n#simple http server\npython -m SimperHTTPServer 60123\n\n#ssh\nssh -v -N -L 0.0.0.0:60123:192.168.10.195:60123 203.175.165.66\n\n#rsa\nssh-keygen -y -f id_rsa > id_rsa.pub\n\n#wget \nwget -c -t 0 -O backup_2018_01_01_050000_9591273.bak http://47.88.192.116:12312/backup_2018_01_01_050000_9591273.bak\n\n\n#rsync+ssh proxy\nrsync -av -P -e \"ssh -o 'ProxyCommand ssh 123.206.197.235 nc %h %p'\" 2018-03-06_03-05.sql.gz 10.86.48.8:/data/backup\n\n#consul-template\n/srv/consul/consul-template -consul 192.168.10.123:8500 -template /srv/consul/my.ctmpl:/srv/consul/conf.d/my.conf:/etc/init.d/nginx reload -once\n\n#iptables forward\niptables -t nat -A PREROUTING -d 192.168.10.226 -p tcp -dport 6386 -j DNAT --to-destination 192.168.10.81:6386\niptables -t nat -I POSTROUTING  -j MASQUERADE\n\n#wireshark\nssh -o 'ProxyCommand ssh 123.206.197.235 nc %h %p' 192.168.199.63 \"sudo tcpdump -vv -i eth0 port 80 -w -\" | wireshark -k -i -\n\n#git diffcommit\ngit diff --name-status 128e72a28ea38d1c8691a22a28937356e7adf736^ 128e72a28ea38d1c8691a22a28937356e7adf736\n\n#docker log-opt\n--log-driver syslog --log-opt tag=\"eos-producer\"\n--log-driver json-file --log-opt max-size=500m\n\nsudo docker run --log-driver=awslogs --log-opt awslogs-region=ap-southeast-1 --log-opt awslogs-group=eos-log --log-opt awslogs-datetime-format='\\[%b %d, %Y %H:%M:%S\\]'  -d  -p 8898:80 nginx\n\ndocker run -d -p 9876:9876 -p 80:8888 --name eos --log-driver gelf --log-opt gelf-address=udp://10.188.10.145:15155  -v /data/eos/:/eos  eoslaomao/eos:1.3.0 /opt/eosio/bin/nodeos --data-dir=/eos/data --config-dir=/eos/conf\n\ndocker run -d -p 9876:9876 -p 8888:8888 --name eos --log-driver json-file --log-opt max-size=1g  -v /data/eos/:/eos gcr.io/eosasia-testnet/eos:v1.5.3-patch /opt/eosio/bin/nodeos --data-dir=/eos/data --config-dir=/eos/conf\n\n#pigz\napt install pigz\ntar --use-compress-program=pigz -cvpf package.tgz ./package\ntar --use-compress-program=pigz -xvpf package.tgz -C ./package\n\n#aws elb reg/unreg instance\naws elbv2 register-targets --target-group-arn=arn:aws:elasticloadbalancing:ap-northeast-1:908572518:targetgroup/e-api-1/65c430c260d1556e --targets Id=i-00b7f498a742cd\naws elbv2 deregister-targets --target-group-arn=arn:aws:elasticloadbalancing:ap-northeast-1:908572518:targetgroup/e-api-1/65c430c260d1556e --targets Id=i-00b7f498a742cd\n\n#pmm\ndocker run -d \\\n   -p 80:81 \\\n   --volumes-from pmm-data \\\n   --name pmm-server \\\n   --restart always \\\n   percona/pmm-server:latest\n\n#git private key clone\nGIT_SSH_COMMAND=\"ssh -i ~/.ssh/id_rsa\" git clone git@cd.i.ly.com:ly/cat.git\n\n\n#K8S \nkubectl -n test port-forward $(kubectl -n test get endpoints prometheus -o jsonpath='{.subsets[0].addresses[0].targetRef.name}') 9090:9090\n\n#jp \njq  '.members[]|{\"id\": .id, \"Name\": .fullName}' trello.json\njq  '.cards[]|if .idList == \"5c64e37e57ba1c20f62751ce\" then .idMembers else .xxx end' trello.json\n\n#websocket\ns = new WebSocket('wss://www.staging.strikingly.com/livechat-ws')\ns.onclose = (e) => { console.log(e)}\n\n# postgresql scheme\nselect * from information_schema.schemata;\n\n# - postgresql\nSELECT a.attname as name, a.attnotnull as notnull\nFROM pg_class as c,pg_attribute as a\nwhere c.relname = 'mini_program_accounts' and a.attrelid = c.oid and a.attnum>0\n\n#postgresql dump database\npg_dump -U vi -d vi -h rm-j.pg.rds.aliyuncs.com -p 3433 --no-owner --no-privileges -f vi.sql\n\n#mysqldump\nmysqldump --host rm-j.mysql.rds.aliyuncs.com -u vi -p --databases via --column-statistics=0 > vi.sql\n\n# \nselect count(*) from pg_stat_activity;\n\n# idle\nselect pg_terminate_backend(pid) from pg_stat_activity where state='idle';\n\n# \nSELECT  \nschemaname as schema,  \ntablename as table_name,  \npg_size_pretty(pg_relation_size(schemaname || '.' || tablename)) AS size_p,  \npg_total_relation_size(schemaname || '.' || tablename) AS siz,  \npg_size_pretty(pg_total_relation_size(schemaname || '.' || tablename)) AS ,  \npg_total_relation_size(schemaname || '.' || tablename) - pg_relation_size(schemaname || '.' || tablename) AS ,  \n(100*(pg_total_relation_size(schemaname || '.' || tablename) - pg_relation_size(schemaname || '.' || tablename)))/CASE WHEN pg_total_relation_size(schemaname || '.' || tablename) = 0 THEN 1 ELSE pg_total_relation_size(schemaname || '.' || tablename) END || '%' AS index_pct  \nFROM pg_tables  \nORDER BY siz DESC  \n```","date":"2019-10-21T08:58:04.018Z","updated":"2019-10-21T08:58:04.018Z","path":"tips/index.html","_id":"ck42dyicb000du9urc3gchcuw","content":"<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#region</span></span><br><span class=\"line\">for i in $(aws ec2 <span class=\"keyword\">describe</span>-regions | grep RegionName| awk -F<span class=\"string\">\"[\\\"]+\"</span> <span class=\"string\">'&#123;print $4&#125;'</span>);<span class=\"keyword\">do</span> echo -n <span class=\"string\">\"$i:  \"</span>; AWS_PROFILE=jp aws <span class=\"comment\">--region=$i ec2 describe-instances|grep InstanceId|wc -l;done;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#tag.nameprivateIP</span></span><br><span class=\"line\">aws ec2 <span class=\"keyword\">describe</span>-instances <span class=\"comment\">--filters \"Name=tag:Service,Values=eos\" --query \"Reservations[*].Instances[*].[PrivateIpAddress,Tags[?Key=='Name'].Value]\" --output text</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#simple http server</span></span><br><span class=\"line\">python -m SimperHTTPServer <span class=\"number\">60123</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#ssh</span></span><br><span class=\"line\">ssh -v -N -L <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>:<span class=\"number\">60123</span>:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.195</span>:<span class=\"number\">60123</span> <span class=\"number\">203.175</span><span class=\"number\">.165</span><span class=\"number\">.66</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#rsa</span></span><br><span class=\"line\">ssh-keygen -y -f id_rsa &gt; id_rsa.pub</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#wget </span></span><br><span class=\"line\">wget -c -t <span class=\"number\">0</span> -O backup_2018_01_01_050000_9591273.bak <span class=\"keyword\">http</span>://<span class=\"number\">47.88</span><span class=\"number\">.192</span><span class=\"number\">.116</span>:<span class=\"number\">12312</span>/backup_2018_01_01_050000_9591273.bak</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#rsync+ssh proxy</span></span><br><span class=\"line\">rsync -av -P -e <span class=\"string\">\"ssh -o 'ProxyCommand ssh 123.206.197.235 nc %h %p'\"</span> <span class=\"number\">2018</span><span class=\"number\">-03</span><span class=\"number\">-06</span>_03<span class=\"number\">-05.</span>sql.gz <span class=\"number\">10.86</span><span class=\"number\">.48</span><span class=\"number\">.8</span>:/<span class=\"keyword\">data</span>/<span class=\"keyword\">backup</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#consul-template</span></span><br><span class=\"line\">/srv/consul/consul-<span class=\"keyword\">template</span> -consul <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.123</span>:<span class=\"number\">8500</span> -<span class=\"keyword\">template</span> /srv/consul/my.ctmpl:/srv/consul/conf.d/my.conf:/etc/init.d/nginx reload -once</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#iptables forward</span></span><br><span class=\"line\">iptables -t nat -A PREROUTING -d <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span> -p tcp -dport <span class=\"number\">6386</span> -j DNAT <span class=\"comment\">--to-destination 192.168.10.81:6386</span></span><br><span class=\"line\">iptables -t nat -I POSTROUTING  -j MASQUERADE</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#wireshark</span></span><br><span class=\"line\">ssh -o <span class=\"string\">'ProxyCommand ssh 123.206.197.235 nc %h %p'</span> <span class=\"number\">192.168</span><span class=\"number\">.199</span><span class=\"number\">.63</span> <span class=\"string\">\"sudo tcpdump -vv -i eth0 port 80 -w -\"</span> | wireshark -k -i -</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#git diffcommit</span></span><br><span class=\"line\">git diff <span class=\"comment\">--name-status 128e72a28ea38d1c8691a22a28937356e7adf736^ 128e72a28ea38d1c8691a22a28937356e7adf736</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#docker log-opt</span></span><br><span class=\"line\"><span class=\"comment\">--log-driver syslog --log-opt tag=\"eos-producer\"</span></span><br><span class=\"line\"><span class=\"comment\">--log-driver json-file --log-opt max-size=500m</span></span><br><span class=\"line\"></span><br><span class=\"line\">sudo docker run <span class=\"comment\">--log-driver=awslogs --log-opt awslogs-region=ap-southeast-1 --log-opt awslogs-group=eos-log --log-opt awslogs-datetime-format='\\[%b %d, %Y %H:%M:%S\\]'  -d  -p 8898:80 nginx</span></span><br><span class=\"line\"></span><br><span class=\"line\">docker run -d -p <span class=\"number\">9876</span>:<span class=\"number\">9876</span> -p <span class=\"number\">80</span>:<span class=\"number\">8888</span> <span class=\"comment\">--name eos --log-driver gelf --log-opt gelf-address=udp://10.188.10.145:15155  -v /data/eos/:/eos  eoslaomao/eos:1.3.0 /opt/eosio/bin/nodeos --data-dir=/eos/data --config-dir=/eos/conf</span></span><br><span class=\"line\"></span><br><span class=\"line\">docker run -d -p <span class=\"number\">9876</span>:<span class=\"number\">9876</span> -p <span class=\"number\">8888</span>:<span class=\"number\">8888</span> <span class=\"comment\">--name eos --log-driver json-file --log-opt max-size=1g  -v /data/eos/:/eos gcr.io/eosasia-testnet/eos:v1.5.3-patch /opt/eosio/bin/nodeos --data-dir=/eos/data --config-dir=/eos/conf</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#pigz</span></span><br><span class=\"line\">apt <span class=\"keyword\">install</span> pigz</span><br><span class=\"line\">tar <span class=\"comment\">--use-compress-program=pigz -cvpf package.tgz ./package</span></span><br><span class=\"line\">tar <span class=\"comment\">--use-compress-program=pigz -xvpf package.tgz -C ./package</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#aws elb reg/unreg instance</span></span><br><span class=\"line\">aws elbv2 <span class=\"keyword\">register</span>-targets <span class=\"comment\">--target-group-arn=arn:aws:elasticloadbalancing:ap-northeast-1:908572518:targetgroup/e-api-1/65c430c260d1556e --targets Id=i-00b7f498a742cd</span></span><br><span class=\"line\">aws elbv2 deregister-targets <span class=\"comment\">--target-group-arn=arn:aws:elasticloadbalancing:ap-northeast-1:908572518:targetgroup/e-api-1/65c430c260d1556e --targets Id=i-00b7f498a742cd</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#pmm</span></span><br><span class=\"line\">docker run -d \\</span><br><span class=\"line\">   -p <span class=\"number\">80</span>:<span class=\"number\">81</span> \\</span><br><span class=\"line\">   <span class=\"comment\">--volumes-from pmm-data \\</span></span><br><span class=\"line\">   <span class=\"comment\">--name pmm-server \\</span></span><br><span class=\"line\">   <span class=\"comment\">--restart always \\</span></span><br><span class=\"line\">   percona/pmm-<span class=\"keyword\">server</span>:latest</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#git private key clone</span></span><br><span class=\"line\">GIT_SSH_COMMAND=<span class=\"string\">\"ssh -i ~/.ssh/id_rsa\"</span> git <span class=\"keyword\">clone</span> git@cd.i.ly.com:ly/cat.git</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#K8S </span></span><br><span class=\"line\">kubectl -n <span class=\"keyword\">test</span> port-forward $(kubectl -n <span class=\"keyword\">test</span> <span class=\"keyword\">get</span> endpoints prometheus -o jsonpath=<span class=\"string\">'&#123;.subsets[0].addresses[0].targetRef.name&#125;'</span>) <span class=\"number\">9090</span>:<span class=\"number\">9090</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#jp </span></span><br><span class=\"line\">jq  <span class=\"string\">'.members[]|&#123;\"id\": .id, \"Name\": .fullName&#125;'</span> trello.json</span><br><span class=\"line\">jq  <span class=\"string\">'.cards[]|if .idList == \"5c64e37e57ba1c20f62751ce\" then .idMembers else .xxx end'</span> trello.json</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#websocket</span></span><br><span class=\"line\">s = <span class=\"keyword\">new</span> WebSocket(<span class=\"string\">'wss://www.staging.strikingly.com/livechat-ws'</span>)</span><br><span class=\"line\">s.onclose = (e) =&gt; &#123; console.log(e)&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># postgresql scheme</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> information_schema.schemata;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># - postgresql</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> a.attname <span class=\"keyword\">as</span> <span class=\"keyword\">name</span>, a.attnotnull <span class=\"keyword\">as</span> <span class=\"keyword\">notnull</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span> pg_class <span class=\"keyword\">as</span> c,pg_attribute <span class=\"keyword\">as</span> a</span><br><span class=\"line\"><span class=\"keyword\">where</span> c.relname = <span class=\"string\">'mini_program_accounts'</span> <span class=\"keyword\">and</span> a.attrelid = c.oid <span class=\"keyword\">and</span> a.attnum&gt;<span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#postgresql dump database</span></span><br><span class=\"line\">pg_dump -U vi -d vi -h rm-j.pg.rds.aliyuncs.com -p <span class=\"number\">3433</span> <span class=\"comment\">--no-owner --no-privileges -f vi.sql</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#mysqldump</span></span><br><span class=\"line\">mysqldump <span class=\"comment\">--host rm-j.mysql.rds.aliyuncs.com -u vi -p --databases via --column-statistics=0 &gt; vi.sql</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">count</span>(*) <span class=\"keyword\">from</span> pg_stat_activity;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># idle</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> pg_terminate_backend(pid) <span class=\"keyword\">from</span> pg_stat_activity <span class=\"keyword\">where</span> state=<span class=\"string\">'idle'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span>  </span><br><span class=\"line\">schemaname <span class=\"keyword\">as</span> <span class=\"keyword\">schema</span>,  </span><br><span class=\"line\">tablename <span class=\"keyword\">as</span> table_name,  </span><br><span class=\"line\">pg_size_pretty(pg_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename)) <span class=\"keyword\">AS</span> size_p,  </span><br><span class=\"line\">pg_total_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename) <span class=\"keyword\">AS</span> siz,  </span><br><span class=\"line\">pg_size_pretty(pg_total_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename)) <span class=\"keyword\">AS</span> ,  </span><br><span class=\"line\">pg_total_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename) - pg_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename) <span class=\"keyword\">AS</span> ,  </span><br><span class=\"line\">(<span class=\"number\">100</span>*(pg_total_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename) - pg_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename)))/<span class=\"keyword\">CASE</span> <span class=\"keyword\">WHEN</span> pg_total_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename) = <span class=\"number\">0</span> <span class=\"keyword\">THEN</span> <span class=\"number\">1</span> <span class=\"keyword\">ELSE</span> pg_total_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename) <span class=\"keyword\">END</span> || <span class=\"string\">'%'</span> <span class=\"keyword\">AS</span> index_pct  </span><br><span class=\"line\"><span class=\"keyword\">FROM</span> pg_tables  </span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> siz <span class=\"keyword\">DESC</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#region</span></span><br><span class=\"line\">for i in $(aws ec2 <span class=\"keyword\">describe</span>-regions | grep RegionName| awk -F<span class=\"string\">\"[\\\"]+\"</span> <span class=\"string\">'&#123;print $4&#125;'</span>);<span class=\"keyword\">do</span> echo -n <span class=\"string\">\"$i:  \"</span>; AWS_PROFILE=jp aws <span class=\"comment\">--region=$i ec2 describe-instances|grep InstanceId|wc -l;done;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#tag.nameprivateIP</span></span><br><span class=\"line\">aws ec2 <span class=\"keyword\">describe</span>-instances <span class=\"comment\">--filters \"Name=tag:Service,Values=eos\" --query \"Reservations[*].Instances[*].[PrivateIpAddress,Tags[?Key=='Name'].Value]\" --output text</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#simple http server</span></span><br><span class=\"line\">python -m SimperHTTPServer <span class=\"number\">60123</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#ssh</span></span><br><span class=\"line\">ssh -v -N -L <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>:<span class=\"number\">60123</span>:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.195</span>:<span class=\"number\">60123</span> <span class=\"number\">203.175</span><span class=\"number\">.165</span><span class=\"number\">.66</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#rsa</span></span><br><span class=\"line\">ssh-keygen -y -f id_rsa &gt; id_rsa.pub</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#wget </span></span><br><span class=\"line\">wget -c -t <span class=\"number\">0</span> -O backup_2018_01_01_050000_9591273.bak <span class=\"keyword\">http</span>://<span class=\"number\">47.88</span><span class=\"number\">.192</span><span class=\"number\">.116</span>:<span class=\"number\">12312</span>/backup_2018_01_01_050000_9591273.bak</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#rsync+ssh proxy</span></span><br><span class=\"line\">rsync -av -P -e <span class=\"string\">\"ssh -o 'ProxyCommand ssh 123.206.197.235 nc %h %p'\"</span> <span class=\"number\">2018</span><span class=\"number\">-03</span><span class=\"number\">-06</span>_03<span class=\"number\">-05.</span>sql.gz <span class=\"number\">10.86</span><span class=\"number\">.48</span><span class=\"number\">.8</span>:/<span class=\"keyword\">data</span>/<span class=\"keyword\">backup</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#consul-template</span></span><br><span class=\"line\">/srv/consul/consul-<span class=\"keyword\">template</span> -consul <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.123</span>:<span class=\"number\">8500</span> -<span class=\"keyword\">template</span> /srv/consul/my.ctmpl:/srv/consul/conf.d/my.conf:/etc/init.d/nginx reload -once</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#iptables forward</span></span><br><span class=\"line\">iptables -t nat -A PREROUTING -d <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span> -p tcp -dport <span class=\"number\">6386</span> -j DNAT <span class=\"comment\">--to-destination 192.168.10.81:6386</span></span><br><span class=\"line\">iptables -t nat -I POSTROUTING  -j MASQUERADE</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#wireshark</span></span><br><span class=\"line\">ssh -o <span class=\"string\">'ProxyCommand ssh 123.206.197.235 nc %h %p'</span> <span class=\"number\">192.168</span><span class=\"number\">.199</span><span class=\"number\">.63</span> <span class=\"string\">\"sudo tcpdump -vv -i eth0 port 80 -w -\"</span> | wireshark -k -i -</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#git diffcommit</span></span><br><span class=\"line\">git diff <span class=\"comment\">--name-status 128e72a28ea38d1c8691a22a28937356e7adf736^ 128e72a28ea38d1c8691a22a28937356e7adf736</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#docker log-opt</span></span><br><span class=\"line\"><span class=\"comment\">--log-driver syslog --log-opt tag=\"eos-producer\"</span></span><br><span class=\"line\"><span class=\"comment\">--log-driver json-file --log-opt max-size=500m</span></span><br><span class=\"line\"></span><br><span class=\"line\">sudo docker run <span class=\"comment\">--log-driver=awslogs --log-opt awslogs-region=ap-southeast-1 --log-opt awslogs-group=eos-log --log-opt awslogs-datetime-format='\\[%b %d, %Y %H:%M:%S\\]'  -d  -p 8898:80 nginx</span></span><br><span class=\"line\"></span><br><span class=\"line\">docker run -d -p <span class=\"number\">9876</span>:<span class=\"number\">9876</span> -p <span class=\"number\">80</span>:<span class=\"number\">8888</span> <span class=\"comment\">--name eos --log-driver gelf --log-opt gelf-address=udp://10.188.10.145:15155  -v /data/eos/:/eos  eoslaomao/eos:1.3.0 /opt/eosio/bin/nodeos --data-dir=/eos/data --config-dir=/eos/conf</span></span><br><span class=\"line\"></span><br><span class=\"line\">docker run -d -p <span class=\"number\">9876</span>:<span class=\"number\">9876</span> -p <span class=\"number\">8888</span>:<span class=\"number\">8888</span> <span class=\"comment\">--name eos --log-driver json-file --log-opt max-size=1g  -v /data/eos/:/eos gcr.io/eosasia-testnet/eos:v1.5.3-patch /opt/eosio/bin/nodeos --data-dir=/eos/data --config-dir=/eos/conf</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#pigz</span></span><br><span class=\"line\">apt <span class=\"keyword\">install</span> pigz</span><br><span class=\"line\">tar <span class=\"comment\">--use-compress-program=pigz -cvpf package.tgz ./package</span></span><br><span class=\"line\">tar <span class=\"comment\">--use-compress-program=pigz -xvpf package.tgz -C ./package</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#aws elb reg/unreg instance</span></span><br><span class=\"line\">aws elbv2 <span class=\"keyword\">register</span>-targets <span class=\"comment\">--target-group-arn=arn:aws:elasticloadbalancing:ap-northeast-1:908572518:targetgroup/e-api-1/65c430c260d1556e --targets Id=i-00b7f498a742cd</span></span><br><span class=\"line\">aws elbv2 deregister-targets <span class=\"comment\">--target-group-arn=arn:aws:elasticloadbalancing:ap-northeast-1:908572518:targetgroup/e-api-1/65c430c260d1556e --targets Id=i-00b7f498a742cd</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#pmm</span></span><br><span class=\"line\">docker run -d \\</span><br><span class=\"line\">   -p <span class=\"number\">80</span>:<span class=\"number\">81</span> \\</span><br><span class=\"line\">   <span class=\"comment\">--volumes-from pmm-data \\</span></span><br><span class=\"line\">   <span class=\"comment\">--name pmm-server \\</span></span><br><span class=\"line\">   <span class=\"comment\">--restart always \\</span></span><br><span class=\"line\">   percona/pmm-<span class=\"keyword\">server</span>:latest</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#git private key clone</span></span><br><span class=\"line\">GIT_SSH_COMMAND=<span class=\"string\">\"ssh -i ~/.ssh/id_rsa\"</span> git <span class=\"keyword\">clone</span> git@cd.i.ly.com:ly/cat.git</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#K8S </span></span><br><span class=\"line\">kubectl -n <span class=\"keyword\">test</span> port-forward $(kubectl -n <span class=\"keyword\">test</span> <span class=\"keyword\">get</span> endpoints prometheus -o jsonpath=<span class=\"string\">'&#123;.subsets[0].addresses[0].targetRef.name&#125;'</span>) <span class=\"number\">9090</span>:<span class=\"number\">9090</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#jp </span></span><br><span class=\"line\">jq  <span class=\"string\">'.members[]|&#123;\"id\": .id, \"Name\": .fullName&#125;'</span> trello.json</span><br><span class=\"line\">jq  <span class=\"string\">'.cards[]|if .idList == \"5c64e37e57ba1c20f62751ce\" then .idMembers else .xxx end'</span> trello.json</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#websocket</span></span><br><span class=\"line\">s = <span class=\"keyword\">new</span> WebSocket(<span class=\"string\">'wss://www.staging.strikingly.com/livechat-ws'</span>)</span><br><span class=\"line\">s.onclose = (e) =&gt; &#123; console.log(e)&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># postgresql scheme</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> * <span class=\"keyword\">from</span> information_schema.schemata;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># - postgresql</span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> a.attname <span class=\"keyword\">as</span> <span class=\"keyword\">name</span>, a.attnotnull <span class=\"keyword\">as</span> <span class=\"keyword\">notnull</span></span><br><span class=\"line\"><span class=\"keyword\">FROM</span> pg_class <span class=\"keyword\">as</span> c,pg_attribute <span class=\"keyword\">as</span> a</span><br><span class=\"line\"><span class=\"keyword\">where</span> c.relname = <span class=\"string\">'mini_program_accounts'</span> <span class=\"keyword\">and</span> a.attrelid = c.oid <span class=\"keyword\">and</span> a.attnum&gt;<span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#postgresql dump database</span></span><br><span class=\"line\">pg_dump -U vi -d vi -h rm-j.pg.rds.aliyuncs.com -p <span class=\"number\">3433</span> <span class=\"comment\">--no-owner --no-privileges -f vi.sql</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#mysqldump</span></span><br><span class=\"line\">mysqldump <span class=\"comment\">--host rm-j.mysql.rds.aliyuncs.com -u vi -p --databases via --column-statistics=0 &gt; vi.sql</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">select</span> <span class=\"keyword\">count</span>(*) <span class=\"keyword\">from</span> pg_stat_activity;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># idle</span></span><br><span class=\"line\"><span class=\"keyword\">select</span> pg_terminate_backend(pid) <span class=\"keyword\">from</span> pg_stat_activity <span class=\"keyword\">where</span> state=<span class=\"string\">'idle'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span>  </span><br><span class=\"line\">schemaname <span class=\"keyword\">as</span> <span class=\"keyword\">schema</span>,  </span><br><span class=\"line\">tablename <span class=\"keyword\">as</span> table_name,  </span><br><span class=\"line\">pg_size_pretty(pg_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename)) <span class=\"keyword\">AS</span> size_p,  </span><br><span class=\"line\">pg_total_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename) <span class=\"keyword\">AS</span> siz,  </span><br><span class=\"line\">pg_size_pretty(pg_total_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename)) <span class=\"keyword\">AS</span> ,  </span><br><span class=\"line\">pg_total_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename) - pg_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename) <span class=\"keyword\">AS</span> ,  </span><br><span class=\"line\">(<span class=\"number\">100</span>*(pg_total_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename) - pg_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename)))/<span class=\"keyword\">CASE</span> <span class=\"keyword\">WHEN</span> pg_total_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename) = <span class=\"number\">0</span> <span class=\"keyword\">THEN</span> <span class=\"number\">1</span> <span class=\"keyword\">ELSE</span> pg_total_relation_size(schemaname || <span class=\"string\">'.'</span> || tablename) <span class=\"keyword\">END</span> || <span class=\"string\">'%'</span> <span class=\"keyword\">AS</span> index_pct  </span><br><span class=\"line\"><span class=\"keyword\">FROM</span> pg_tables  </span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> siz <span class=\"keyword\">DESC</span></span><br></pre></td></tr></table></figure>"}],"Post":[{"layout":"post","title":"","published":1,"author":"xiemx","comments":1,"date":"2016-02-17T20:02:44.000Z","_content":"\n### ShareStorage\n\n  1. NAS(NetworkAttachedStorage)\n  2. SAN(StorageAreaNetwork)\n  3. iSAN(internetStorageAreaNetwork),san\n\n#### NAS(NetworkAttachedStorage)\n  1. tcp/ip\n  2. \n\n#### SAN(StorageAreaNetwork)\n  1. sisc/\n  2. /block\n\n#### iSAN(internetStorageAreaNetwork)\n  1. tcp/ip,scsi\n  2. /block","source":"_posts/Three-shared-storage-comparisons.md","raw":"---\nlayout: post\ntitle: \npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-02-18 04:02:44\ntags: [ ]\ncategories:\n    - 'storage'\n#permalink: '/2016/02/18/Three-shared-storage-comparisons'\n---\n\n### ShareStorage\n\n  1. NAS(NetworkAttachedStorage)\n  2. SAN(StorageAreaNetwork)\n  3. iSAN(internetStorageAreaNetwork),san\n\n#### NAS(NetworkAttachedStorage)\n  1. tcp/ip\n  2. \n\n#### SAN(StorageAreaNetwork)\n  1. sisc/\n  2. /block\n\n#### iSAN(internetStorageAreaNetwork)\n  1. tcp/ip,scsi\n  2. /block","slug":"Three-shared-storage-comparisons","updated":"2019-10-21T06:57:43.060Z","photos":[],"link":"","_id":"ck42dyibv0001u9ury6xzlk2i","content":"<h3 id=\"Share-Storage\"><a href=\"#Share-Storage\" class=\"headerlink\" title=\"Share Storage\"></a>Share Storage</h3><ol>\n<li>NAS(Network Attached Storage)</li>\n<li>SAN (Storage Area Network)</li>\n<li>iSAN (internet Storage Area Network ),san</li>\n</ol>\n<h4 id=\"NAS-Network-Attached-Storage\"><a href=\"#NAS-Network-Attached-Storage\" class=\"headerlink\" title=\"NAS(Network Attached Storage)\"></a>NAS(Network Attached Storage)</h4><ol>\n<li>tcp/ip</li>\n<li></li>\n</ol>\n<h4 id=\"SAN-Storage-Area-Network\"><a href=\"#SAN-Storage-Area-Network\" class=\"headerlink\" title=\"SAN (Storage Area Network)\"></a>SAN (Storage Area Network)</h4><ol>\n<li>sisc/</li>\n<li>/block</li>\n</ol>\n<h4 id=\"iSAN-internet-Storage-Area-Network\"><a href=\"#iSAN-internet-Storage-Area-Network\" class=\"headerlink\" title=\"iSAN (internet Storage Area Network )\"></a>iSAN (internet Storage Area Network )</h4><ol>\n<li>tcp/ip , scsi</li>\n<li>/block</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Share-Storage\"><a href=\"#Share-Storage\" class=\"headerlink\" title=\"Share Storage\"></a>Share Storage</h3><ol>\n<li>NAS(Network Attached Storage)</li>\n<li>SAN (Storage Area Network)</li>\n<li>iSAN (internet Storage Area Network ),san</li>\n</ol>\n<h4 id=\"NAS-Network-Attached-Storage\"><a href=\"#NAS-Network-Attached-Storage\" class=\"headerlink\" title=\"NAS(Network Attached Storage)\"></a>NAS(Network Attached Storage)</h4><ol>\n<li>tcp/ip</li>\n<li></li>\n</ol>\n<h4 id=\"SAN-Storage-Area-Network\"><a href=\"#SAN-Storage-Area-Network\" class=\"headerlink\" title=\"SAN (Storage Area Network)\"></a>SAN (Storage Area Network)</h4><ol>\n<li>sisc/</li>\n<li>/block</li>\n</ol>\n<h4 id=\"iSAN-internet-Storage-Area-Network\"><a href=\"#iSAN-internet-Storage-Area-Network\" class=\"headerlink\" title=\"iSAN (internet Storage Area Network )\"></a>iSAN (internet Storage Area Network )</h4><ol>\n<li>tcp/ip , scsi</li>\n<li>/block</li>\n</ol>\n"},{"layout":"post","title":"Apache","published":1,"author":"xiemx","comments":1,"date":"2016-01-17T02:01:04.000Z","_content":"Apache\n\n* \n```\n<Directory /some/dir>\norder allow,deny\ndeny from all\n</Directory >\n```\n \n\nIP\n\n* \n```\n<Directory /some/dir>\nAuthType Basic\nAuthName \"My Auth File\"\nAuthUserFile /some/file/path\nRequire valid-user\n</Directory >\n```\n","source":"_posts/apache-auth.md","raw":"---\nlayout: post\ntitle: Apache\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-01-17 10:01:04\ntags: [ apache, webserver ]\ncategories:\n    - apache\n---\nApache\n\n* \n```\n<Directory /some/dir>\norder allow,deny\ndeny from all\n</Directory >\n```\n \n\nIP\n\n* \n```\n<Directory /some/dir>\nAuthType Basic\nAuthName \"My Auth File\"\nAuthUserFile /some/file/path\nRequire valid-user\n</Directory >\n```\n","slug":"apache-auth","updated":"2019-10-21T06:57:42.835Z","photos":[],"link":"","_id":"ck42dyic00003u9urbjdbc0c7","content":"<p>Apache</p>\n<ul>\n<li><figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">&lt;Directory /some/dir&gt;</span></span><br><span class=\"line\"><span class=\"attribute\"><span class=\"nomarkup\">order</span></span> allow,deny</span><br><span class=\"line\"><span class=\"attribute\"><span class=\"nomarkup\">deny</span></span> from <span class=\"literal\">all</span></span><br><span class=\"line\"><span class=\"section\">&lt;/Directory &gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n</li>\n</ul>\n<p>IP</p>\n<ul>\n<li><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Directory /<span class=\"keyword\">some</span>/dir&gt;</span><br><span class=\"line\">AuthType Basic</span><br><span class=\"line\">AuthName \"My Auth File\"</span><br><span class=\"line\">AuthUserFile /<span class=\"keyword\">some</span>/file/<span class=\"type\">path</span></span><br><span class=\"line\">Require <span class=\"keyword\">valid</span>-<span class=\"keyword\">user</span></span><br><span class=\"line\">&lt;/Directory &gt;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Apache</p>\n<ul>\n<li><figure class=\"highlight apache\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">&lt;Directory /some/dir&gt;</span></span><br><span class=\"line\"><span class=\"attribute\"><span class=\"nomarkup\">order</span></span> allow,deny</span><br><span class=\"line\"><span class=\"attribute\"><span class=\"nomarkup\">deny</span></span> from <span class=\"literal\">all</span></span><br><span class=\"line\"><span class=\"section\">&lt;/Directory &gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n</li>\n</ul>\n<p>IP</p>\n<ul>\n<li><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Directory /<span class=\"keyword\">some</span>/dir&gt;</span><br><span class=\"line\">AuthType Basic</span><br><span class=\"line\">AuthName \"My Auth File\"</span><br><span class=\"line\">AuthUserFile /<span class=\"keyword\">some</span>/file/<span class=\"type\">path</span></span><br><span class=\"line\">Require <span class=\"keyword\">valid</span>-<span class=\"keyword\">user</span></span><br><span class=\"line\">&lt;/Directory &gt;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p></p>\n"},{"layout":"post","title":"Apachepreforkworker","published":1,"author":"xiemx","comments":1,"date":"2016-01-17T03:01:18.000Z","_content":"#### \n* prefork\nMaxClients\n\n* worker\nMPMMPMThreadsPerChildMaxClients\n\n#### preforkworker\n\n[root@localhost ~]# rpm -ql httpd | grep worker\n/usr/sbin/httpd.worker\n\nprefork/usr/sbin/2\n\n1. prefork\n```\nmv httpd httpd.prefork\n```\n2. worker\n```\nmv httpd.worker httpd\n```\n3. Apache\n```\nvim /etc/httpd/conf/httpd.conf\n\n<IfModule prefork.c>\nStartServers 8\nMinSpareServers 5\nMaxSpareServers 20\nServerLimit 256\nMaxClients 256\nMaxRequestsPerChild 4000\n</IfModule>\n```\napache2preforkphpworkerredhat linuxphp\n\n#### preforkworker\npreforkPrefork MPMWorker MPMpreforkworker \n\nworker HTTPWorker MPMWorker MPMPrefork MPMworker MPM\"\".\" \"\n\npreforkworkercpumemorywokerwokerprefork\n\n#### prefork\n```\n<IfModule prefork.c>\nServerLimit 256\nStartServers 5\nMinSpareServers 8\nMaxSpareServers 10\nMaxClients 256\nMaxRequestsPerChild 4000\n</IfModule>\nServerLimit\nMaxClient256,ServerLimit20000ServerLimitapache,Apache\n\n\nStartServers\nprefork8\n\nMinSpareServers\n5MinSpareServers Apache\n\nMaxSpareServers\n10MaxSpareServers MinSpareServersApache\"MinSpareServers+1\"\n\nMaxClients\n()256MaxClients,ServerLimit\n\nMaxRequestsPerChild\n10000.MaxRequestsPerChild MaxRequestsPerChild\"0\"MaxRequestsPerChild\n1.()\n2.\n\nworker\n<IfModule worker.c>\nStartServers 4\nMaxClients 150\nMinSpareThreads 25\nMaxSpareThreads 75\nThreadsPerChild 25\nMaxRequestsPerChild 0\n</IfModule>\n\nStartServers\n\"3\"\n\nMaxClients\n()MaxClients \"400\",16(ServerLimit)25(ThreadsPerChild)MaxClients ServerLimit\n\nMinSpareThreads\n,\"75\"MPM\n\nMaxSpareThreads\n\"250\"MPM MaxSpareThreadsApacheworker MinSpareThreadsThreadsPerChild\n\nThreadsPerChild\n25\n\nMaxRequestsPerChild\nMaxRequestsPerChildMaxRequestsPerChild\"0\"MaxRequestsPerChild\n1.()\n2.\nKeepAlive\n```","source":"_posts/apache-running-mode.md","raw":"---\nlayout: post\ntitle: Apachepreforkworker\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-01-17 11:01:18\ntags: [ ]\ncategories:\n    - apache\n---\n#### \n* prefork\nMaxClients\n\n* worker\nMPMMPMThreadsPerChildMaxClients\n\n#### preforkworker\n\n[root@localhost ~]# rpm -ql httpd | grep worker\n/usr/sbin/httpd.worker\n\nprefork/usr/sbin/2\n\n1. prefork\n```\nmv httpd httpd.prefork\n```\n2. worker\n```\nmv httpd.worker httpd\n```\n3. Apache\n```\nvim /etc/httpd/conf/httpd.conf\n\n<IfModule prefork.c>\nStartServers 8\nMinSpareServers 5\nMaxSpareServers 20\nServerLimit 256\nMaxClients 256\nMaxRequestsPerChild 4000\n</IfModule>\n```\napache2preforkphpworkerredhat linuxphp\n\n#### preforkworker\npreforkPrefork MPMWorker MPMpreforkworker \n\nworker HTTPWorker MPMWorker MPMPrefork MPMworker MPM\"\".\" \"\n\npreforkworkercpumemorywokerwokerprefork\n\n#### prefork\n```\n<IfModule prefork.c>\nServerLimit 256\nStartServers 5\nMinSpareServers 8\nMaxSpareServers 10\nMaxClients 256\nMaxRequestsPerChild 4000\n</IfModule>\nServerLimit\nMaxClient256,ServerLimit20000ServerLimitapache,Apache\n\n\nStartServers\nprefork8\n\nMinSpareServers\n5MinSpareServers Apache\n\nMaxSpareServers\n10MaxSpareServers MinSpareServersApache\"MinSpareServers+1\"\n\nMaxClients\n()256MaxClients,ServerLimit\n\nMaxRequestsPerChild\n10000.MaxRequestsPerChild MaxRequestsPerChild\"0\"MaxRequestsPerChild\n1.()\n2.\n\nworker\n<IfModule worker.c>\nStartServers 4\nMaxClients 150\nMinSpareThreads 25\nMaxSpareThreads 75\nThreadsPerChild 25\nMaxRequestsPerChild 0\n</IfModule>\n\nStartServers\n\"3\"\n\nMaxClients\n()MaxClients \"400\",16(ServerLimit)25(ThreadsPerChild)MaxClients ServerLimit\n\nMinSpareThreads\n,\"75\"MPM\n\nMaxSpareThreads\n\"250\"MPM MaxSpareThreadsApacheworker MinSpareThreadsThreadsPerChild\n\nThreadsPerChild\n25\n\nMaxRequestsPerChild\nMaxRequestsPerChildMaxRequestsPerChild\"0\"MaxRequestsPerChild\n1.()\n2.\nKeepAlive\n```","slug":"apache-running-mode","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyic40006u9urfrforoeg","content":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><p>prefork<br>MaxClients</p>\n</li>\n<li><p>worker<br>MPMMPMThreadsPerChildMaxClients</p>\n</li>\n</ul>\n<h4 id=\"preforkworker\"><a href=\"#preforkworker\" class=\"headerlink\" title=\"preforkworker\"></a>preforkworker</h4><p>[root@localhost ~]# rpm -ql httpd | grep worker<br>/usr/sbin/httpd.worker</p>\n<p>prefork/usr/sbin/2</p>\n<ol>\n<li><p>prefork</p>\n<figure class=\"highlight cos\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">mv</span> httpd httpd.prefork</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>worker</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv httpd<span class=\"selector-class\">.worker</span> httpd</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Apache</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">vim</span> <span class=\"string\">/etc/httpd/conf/httpd.conf</span></span><br><span class=\"line\"><span class=\"attr\"></span></span><br><span class=\"line\"><span class=\"meta\">&lt;IfModule</span> <span class=\"string\">prefork.c&gt;</span></span><br><span class=\"line\"><span class=\"attr\">StartServers</span> <span class=\"string\">8</span></span><br><span class=\"line\"><span class=\"attr\">MinSpareServers</span> <span class=\"string\">5</span></span><br><span class=\"line\"><span class=\"attr\">MaxSpareServers</span> <span class=\"string\">20</span></span><br><span class=\"line\"><span class=\"attr\">ServerLimit</span> <span class=\"string\">256</span></span><br><span class=\"line\"><span class=\"attr\">MaxClients</span> <span class=\"string\">256</span></span><br><span class=\"line\"><span class=\"attr\">MaxRequestsPerChild</span> <span class=\"string\">4000</span></span><br><span class=\"line\"><span class=\"attr\">&lt;/IfModule&gt;</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<p>apache2preforkphpworkerredhat linuxphp</p>\n<h4 id=\"preforkworker\"><a href=\"#preforkworker\" class=\"headerlink\" title=\"preforkworker\"></a>preforkworker</h4><p>preforkPrefork MPMWorker MPMpreforkworker </p>\n<p>worker HTTPWorker MPMWorker MPMPrefork MPMworker MPM. </p>\n<p>preforkworkercpumemorywokerwokerprefork</p>\n<h4 id=\"prefork\"><a href=\"#prefork\" class=\"headerlink\" title=\"prefork\"></a>prefork</h4><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;IfModule prefork.c&gt;</span><br><span class=\"line\">ServerLimit <span class=\"number\">256</span></span><br><span class=\"line\">StartServers <span class=\"number\">5</span></span><br><span class=\"line\">MinSpareServers <span class=\"number\">8</span></span><br><span class=\"line\">MaxSpareServers <span class=\"number\">10</span></span><br><span class=\"line\">MaxClients <span class=\"number\">256</span></span><br><span class=\"line\">MaxRequestsPerChild <span class=\"number\">4000</span></span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\">ServerLimit</span><br><span class=\"line\">MaxClient<span class=\"number\">256</span>,ServerLimit<span class=\"number\">20000</span>ServerLimitapache,Apache</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">StartServers</span><br><span class=\"line\">prefork<span class=\"number\">8</span></span><br><span class=\"line\"></span><br><span class=\"line\">MinSpareServers</span><br><span class=\"line\"><span class=\"number\">5</span>MinSpareServers Apache</span><br><span class=\"line\"></span><br><span class=\"line\">MaxSpareServers</span><br><span class=\"line\"><span class=\"number\">10</span>MaxSpareServers MinSpareServersApache<span class=\"string\">\"MinSpareServers+1\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">MaxClients</span><br><span class=\"line\">()<span class=\"number\">256</span>MaxClients,ServerLimit</span><br><span class=\"line\"></span><br><span class=\"line\">MaxRequestsPerChild</span><br><span class=\"line\"><span class=\"number\">10000.</span>MaxRequestsPerChild MaxRequestsPerChild<span class=\"string\">\"0\"</span>MaxRequestsPerChild</span><br><span class=\"line\"><span class=\"number\">1.</span>()</span><br><span class=\"line\"><span class=\"number\">2.</span></span><br><span class=\"line\"></span><br><span class=\"line\">worker</span><br><span class=\"line\">&lt;IfModule worker.c&gt;</span><br><span class=\"line\">StartServers <span class=\"number\">4</span></span><br><span class=\"line\">MaxClients <span class=\"number\">150</span></span><br><span class=\"line\">MinSpareThreads <span class=\"number\">25</span></span><br><span class=\"line\">MaxSpareThreads <span class=\"number\">75</span></span><br><span class=\"line\">ThreadsPerChild <span class=\"number\">25</span></span><br><span class=\"line\">MaxRequestsPerChild <span class=\"number\">0</span></span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">StartServers</span><br><span class=\"line\"><span class=\"string\">\"3\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">MaxClients</span><br><span class=\"line\">()MaxClients <span class=\"string\">\"400\"</span>,<span class=\"number\">16</span>(ServerLimit)<span class=\"number\">25</span>(ThreadsPerChild)MaxClients ServerLimit</span><br><span class=\"line\"></span><br><span class=\"line\">MinSpareThreads</span><br><span class=\"line\">,<span class=\"string\">\"75\"</span>MPM</span><br><span class=\"line\"></span><br><span class=\"line\">MaxSpareThreads</span><br><span class=\"line\"><span class=\"string\">\"250\"</span>MPM MaxSpareThreadsApacheworker MinSpareThreadsThreadsPerChild</span><br><span class=\"line\"></span><br><span class=\"line\">ThreadsPerChild</span><br><span class=\"line\"><span class=\"number\">25</span></span><br><span class=\"line\"></span><br><span class=\"line\">MaxRequestsPerChild</span><br><span class=\"line\">MaxRequestsPerChildMaxRequestsPerChild<span class=\"string\">\"0\"</span>MaxRequestsPerChild</span><br><span class=\"line\"><span class=\"number\">1.</span>()</span><br><span class=\"line\"><span class=\"number\">2.</span></span><br><span class=\"line\">KeepAlive</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li><p>prefork<br>MaxClients</p>\n</li>\n<li><p>worker<br>MPMMPMThreadsPerChildMaxClients</p>\n</li>\n</ul>\n<h4 id=\"preforkworker\"><a href=\"#preforkworker\" class=\"headerlink\" title=\"preforkworker\"></a>preforkworker</h4><p>[root@localhost ~]# rpm -ql httpd | grep worker<br>/usr/sbin/httpd.worker</p>\n<p>prefork/usr/sbin/2</p>\n<ol>\n<li><p>prefork</p>\n<figure class=\"highlight cos\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">mv</span> httpd httpd.prefork</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>worker</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv httpd<span class=\"selector-class\">.worker</span> httpd</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Apache</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">vim</span> <span class=\"string\">/etc/httpd/conf/httpd.conf</span></span><br><span class=\"line\"><span class=\"attr\"></span></span><br><span class=\"line\"><span class=\"meta\">&lt;IfModule</span> <span class=\"string\">prefork.c&gt;</span></span><br><span class=\"line\"><span class=\"attr\">StartServers</span> <span class=\"string\">8</span></span><br><span class=\"line\"><span class=\"attr\">MinSpareServers</span> <span class=\"string\">5</span></span><br><span class=\"line\"><span class=\"attr\">MaxSpareServers</span> <span class=\"string\">20</span></span><br><span class=\"line\"><span class=\"attr\">ServerLimit</span> <span class=\"string\">256</span></span><br><span class=\"line\"><span class=\"attr\">MaxClients</span> <span class=\"string\">256</span></span><br><span class=\"line\"><span class=\"attr\">MaxRequestsPerChild</span> <span class=\"string\">4000</span></span><br><span class=\"line\"><span class=\"attr\">&lt;/IfModule&gt;</span></span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<p>apache2preforkphpworkerredhat linuxphp</p>\n<h4 id=\"preforkworker\"><a href=\"#preforkworker\" class=\"headerlink\" title=\"preforkworker\"></a>preforkworker</h4><p>preforkPrefork MPMWorker MPMpreforkworker </p>\n<p>worker HTTPWorker MPMWorker MPMPrefork MPMworker MPM. </p>\n<p>preforkworkercpumemorywokerwokerprefork</p>\n<h4 id=\"prefork\"><a href=\"#prefork\" class=\"headerlink\" title=\"prefork\"></a>prefork</h4><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;IfModule prefork.c&gt;</span><br><span class=\"line\">ServerLimit <span class=\"number\">256</span></span><br><span class=\"line\">StartServers <span class=\"number\">5</span></span><br><span class=\"line\">MinSpareServers <span class=\"number\">8</span></span><br><span class=\"line\">MaxSpareServers <span class=\"number\">10</span></span><br><span class=\"line\">MaxClients <span class=\"number\">256</span></span><br><span class=\"line\">MaxRequestsPerChild <span class=\"number\">4000</span></span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\">ServerLimit</span><br><span class=\"line\">MaxClient<span class=\"number\">256</span>,ServerLimit<span class=\"number\">20000</span>ServerLimitapache,Apache</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">StartServers</span><br><span class=\"line\">prefork<span class=\"number\">8</span></span><br><span class=\"line\"></span><br><span class=\"line\">MinSpareServers</span><br><span class=\"line\"><span class=\"number\">5</span>MinSpareServers Apache</span><br><span class=\"line\"></span><br><span class=\"line\">MaxSpareServers</span><br><span class=\"line\"><span class=\"number\">10</span>MaxSpareServers MinSpareServersApache<span class=\"string\">\"MinSpareServers+1\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">MaxClients</span><br><span class=\"line\">()<span class=\"number\">256</span>MaxClients,ServerLimit</span><br><span class=\"line\"></span><br><span class=\"line\">MaxRequestsPerChild</span><br><span class=\"line\"><span class=\"number\">10000.</span>MaxRequestsPerChild MaxRequestsPerChild<span class=\"string\">\"0\"</span>MaxRequestsPerChild</span><br><span class=\"line\"><span class=\"number\">1.</span>()</span><br><span class=\"line\"><span class=\"number\">2.</span></span><br><span class=\"line\"></span><br><span class=\"line\">worker</span><br><span class=\"line\">&lt;IfModule worker.c&gt;</span><br><span class=\"line\">StartServers <span class=\"number\">4</span></span><br><span class=\"line\">MaxClients <span class=\"number\">150</span></span><br><span class=\"line\">MinSpareThreads <span class=\"number\">25</span></span><br><span class=\"line\">MaxSpareThreads <span class=\"number\">75</span></span><br><span class=\"line\">ThreadsPerChild <span class=\"number\">25</span></span><br><span class=\"line\">MaxRequestsPerChild <span class=\"number\">0</span></span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">StartServers</span><br><span class=\"line\"><span class=\"string\">\"3\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">MaxClients</span><br><span class=\"line\">()MaxClients <span class=\"string\">\"400\"</span>,<span class=\"number\">16</span>(ServerLimit)<span class=\"number\">25</span>(ThreadsPerChild)MaxClients ServerLimit</span><br><span class=\"line\"></span><br><span class=\"line\">MinSpareThreads</span><br><span class=\"line\">,<span class=\"string\">\"75\"</span>MPM</span><br><span class=\"line\"></span><br><span class=\"line\">MaxSpareThreads</span><br><span class=\"line\"><span class=\"string\">\"250\"</span>MPM MaxSpareThreadsApacheworker MinSpareThreadsThreadsPerChild</span><br><span class=\"line\"></span><br><span class=\"line\">ThreadsPerChild</span><br><span class=\"line\"><span class=\"number\">25</span></span><br><span class=\"line\"></span><br><span class=\"line\">MaxRequestsPerChild</span><br><span class=\"line\">MaxRequestsPerChildMaxRequestsPerChild<span class=\"string\">\"0\"</span>MaxRequestsPerChild</span><br><span class=\"line\"><span class=\"number\">1.</span>()</span><br><span class=\"line\"><span class=\"number\">2.</span></span><br><span class=\"line\">KeepAlive</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"Apacheweb","published":1,"author":"xiemx","comments":1,"date":"2016-01-17T02:01:16.000Z","_content":"linuxwebapachenginxtomcatlinuxapachewebhttpd\n\n1. \n```shell\nyum install httpd -y\n\n[root@localhost ~]# rpm -ql httpd | grep 'httpd\\.conf'\n/etc/httpd/conf/httpd.conf    apache\n\n[root@localhost ~]# grep -v '^#\\|^$\\|#' /etc/httpd/conf/httpd.conf\nListen 80     \nInclude conf.d/*.conf    \nUser apache\nGroup apache  \nDocumentRoot \"/var/www/html\"    \nDirectoryIndex index.html index.html.var  \n```\n\n2. /var/www/html\n\n```shell\n[root@localhost ~]# echo \"test page\" > /var/www/html/index.html\n[root@localhost ~]# /etc/init.d/httpd start\nStarting httpd:                        [OK]\n```\n3. \n\n[![apachetest](/images/apachetest-300x89.png)](/images/apachetest-300x89.png)","source":"_posts/apache-webserver.md","raw":"---\nlayout: post\ntitle: Apacheweb\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-01-17 10:01:16\ntags: [ apache, webserver ]\ncategories:\n    - apache\n---\nlinuxwebapachenginxtomcatlinuxapachewebhttpd\n\n1. \n```shell\nyum install httpd -y\n\n[root@localhost ~]# rpm -ql httpd | grep 'httpd\\.conf'\n/etc/httpd/conf/httpd.conf    apache\n\n[root@localhost ~]# grep -v '^#\\|^$\\|#' /etc/httpd/conf/httpd.conf\nListen 80     \nInclude conf.d/*.conf    \nUser apache\nGroup apache  \nDocumentRoot \"/var/www/html\"    \nDirectoryIndex index.html index.html.var  \n```\n\n2. /var/www/html\n\n```shell\n[root@localhost ~]# echo \"test page\" > /var/www/html/index.html\n[root@localhost ~]# /etc/init.d/httpd start\nStarting httpd:                        [OK]\n```\n3. \n\n[![apachetest](/images/apachetest-300x89.png)](/images/apachetest-300x89.png)","slug":"apache-webserver","updated":"2019-10-21T06:57:42.835Z","photos":[],"link":"","_id":"ck42dyic80009u9ur9e992f7x","content":"<p>linuxwebapachenginxtomcatlinuxapachewebhttpd</p>\n<ol>\n<li><p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install httpd -y</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# rpm -ql httpd | grep 'httpd\\.conf'</span><br><span class=\"line\">/etc/httpd/conf/httpd.conf    apache</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# grep -v '^#\\|^$\\|#' /etc/httpd/conf/httpd.conf</span><br><span class=\"line\">Listen 80     </span><br><span class=\"line\">Include conf.d/*.conf    </span><br><span class=\"line\">User apache</span><br><span class=\"line\">Group apache  </span><br><span class=\"line\">DocumentRoot \"/var/www/html\"    </span><br><span class=\"line\">DirectoryIndex index.html index.html.var  </span><br></pre></td></tr></table></figure>\n</li>\n<li><p>/var/www/html</p>\n</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# echo \"test page\" &gt; /var/www/html/index.html</span><br><span class=\"line\">[root@localhost ~]# /etc/init.d/httpd start</span><br><span class=\"line\">Starting httpd:                        [OK]</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li></li>\n</ol>\n<p><a href=\"/images/apachetest-300x89.png\"><img src=\"/images/apachetest-300x89.png\" alt=\"apachetest\"></a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>linuxwebapachenginxtomcatlinuxapachewebhttpd</p>\n<ol>\n<li><p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install httpd -y</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# rpm -ql httpd | grep 'httpd\\.conf'</span><br><span class=\"line\">/etc/httpd/conf/httpd.conf    apache</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# grep -v '^#\\|^$\\|#' /etc/httpd/conf/httpd.conf</span><br><span class=\"line\">Listen 80     </span><br><span class=\"line\">Include conf.d/*.conf    </span><br><span class=\"line\">User apache</span><br><span class=\"line\">Group apache  </span><br><span class=\"line\">DocumentRoot \"/var/www/html\"    </span><br><span class=\"line\">DirectoryIndex index.html index.html.var  </span><br></pre></td></tr></table></figure>\n</li>\n<li><p>/var/www/html</p>\n</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# echo \"test page\" &gt; /var/www/html/index.html</span><br><span class=\"line\">[root@localhost ~]# /etc/init.d/httpd start</span><br><span class=\"line\">Starting httpd:                        [OK]</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li></li>\n</ol>\n<p><a href=\"/images/apachetest-300x89.png\"><img src=\"/images/apachetest-300x89.png\" alt=\"apachetest\"></a></p>\n"},{"layout":"post","title":"apachetop  web","published":1,"author":"xiemx","comments":1,"date":"2016-08-14T20:08:47.000Z","_content":"\napachetop  web\n\nApachetopApache webhttp\n\nstats, hits, requests, request detailsweb\n\nNginxapachetop\n\n\n```shell\n$ sudo apt-get install apachetop \n```\n\n\n![img](/images/img_57b1811567e55.png)","source":"_posts/apachetop.md","raw":"---\nlayout: post\ntitle: apachetop  web\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-08-15 04:08:47\ntags: [ apache, command ]\ncategories:\n    - apache\n---\n\napachetop  web\n\nApachetopApache webhttp\n\nstats, hits, requests, request detailsweb\n\nNginxapachetop\n\n\n```shell\n$ sudo apt-get install apachetop \n```\n\n\n![img](/images/img_57b1811567e55.png)","slug":"apachetop","updated":"2019-10-21T03:19:52.562Z","photos":[],"link":"","_id":"ck42dyic9000bu9urpw04vjel","content":"<p>apachetop  web</p>\n<p>ApachetopApache webhttp</p>\n<p>stats, hits, requests, request detailsweb</p>\n<p>Nginxapachetop</p>\n<p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo apt-get install apachetop</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/images/img_57b1811567e55.png\" alt=\"img\"></p>\n","site":{"data":{}},"excerpt":"","more":"<p>apachetop  web</p>\n<p>ApachetopApache webhttp</p>\n<p>stats, hits, requests, request detailsweb</p>\n<p>Nginxapachetop</p>\n<p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo apt-get install apachetop</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/images/img_57b1811567e55.png\" alt=\"img\"></p>\n"},{"layout":"post","title":"0x80","published":1,"author":"xiemx","comments":1,"date":"2015-09-28T18:09:58.000Z","_content":"ID'0x80':\n```\nHKEY_LOCAL_MACHINE\\System\\CurrentControlSet\\Services\\W3SVC\\ParametersDWORDUseSharedWPDesktop1 IIS\n\n```\n","source":"_posts/apppool-0x80-error.md","raw":"---\nlayout: post\ntitle: 0x80\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-09-29 02:09:58\ntags: [ iis, windows, debug ]\ncategories:\n    - iis\n    - windows\n---\nID'0x80':\n```\nHKEY_LOCAL_MACHINE\\System\\CurrentControlSet\\Services\\W3SVC\\ParametersDWORDUseSharedWPDesktop1 IIS\n\n```\n","slug":"apppool-0x80-error","updated":"2019-10-21T09:02:09.437Z","photos":[],"link":"","_id":"ck42dyicc000eu9urg4wl2tc5","content":"<p>ID0x80:</p>\n<figure class=\"highlight taggerscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HKEY_LOCAL_MACHINE<span class=\"symbol\">\\S</span>ystem<span class=\"symbol\">\\C</span>urrentControlSet<span class=\"symbol\">\\S</span>ervices<span class=\"symbol\">\\W</span>3SVC<span class=\"symbol\">\\P</span>arametersDWORDUseSharedWPDesktop1 IIS</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p>ID0x80:</p>\n<figure class=\"highlight taggerscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HKEY_LOCAL_MACHINE<span class=\"symbol\">\\S</span>ystem<span class=\"symbol\">\\C</span>urrentControlSet<span class=\"symbol\">\\S</span>ervices<span class=\"symbol\">\\W</span>3SVC<span class=\"symbol\">\\P</span>arametersDWORDUseSharedWPDesktop1 IIS</span><br></pre></td></tr></table></figure>\n\n"},{"layout":"post","title":"lambdaAWS CloudFronthost","published":1,"author":"xiemx","comments":1,"date":"2018-10-10T19:10:17.000Z","_content":"aws cloudfrontcloudfrontHosthost+ipawslambda@edgerequestheaderhost\n\naws lambda@edgehttps://docs.aws.amazon.com/zh_cn/lambda/latest/dg/lambda-edge.html\n\n1. lambdaus-east-1cloudfront\n\n![img](/images/img_5bbef98529a61.png)\n\n```\n'use strict';\n\n// force a specific Host header to be sent to the origin\n\nexports.handler = (event, context, callback) => {\n    const request = event.Records[0].cf.request;\n    request.headers.host[0].value = 'www.xiemx.com';\n    return callback(null, request);\n};\n```\n\n2. cloudfrontBehavior\n\n![img](/images/img_5bbefa0f833d9.png)\n\n3. deploy cdncdn","source":"_posts/aws-edge-lambda-modify-origin-host.md","raw":"---\nlayout: post\ntitle: lambdaAWS CloudFronthost\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2018-10-11 03:10:17\ntags: [ aws, lambda, cloudfront ]\ncategories:\n    - aws\n---\naws cloudfrontcloudfrontHosthost+ipawslambda@edgerequestheaderhost\n\naws lambda@edgehttps://docs.aws.amazon.com/zh_cn/lambda/latest/dg/lambda-edge.html\n\n1. lambdaus-east-1cloudfront\n\n![img](/images/img_5bbef98529a61.png)\n\n```\n'use strict';\n\n// force a specific Host header to be sent to the origin\n\nexports.handler = (event, context, callback) => {\n    const request = event.Records[0].cf.request;\n    request.headers.host[0].value = 'www.xiemx.com';\n    return callback(null, request);\n};\n```\n\n2. cloudfrontBehavior\n\n![img](/images/img_5bbefa0f833d9.png)\n\n3. deploy cdncdn","slug":"aws-edge-lambda-modify-origin-host","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyice000gu9urjxfc7eto","content":"<p>aws cloudfrontcloudfrontHosthost+ipawslambda@edgerequestheaderhost</p>\n<p>aws lambda@edge<a href=\"https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/lambda-edge.html\" target=\"_blank\" rel=\"noopener\">https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/lambda-edge.html</a></p>\n<ol>\n<li>lambdaus-east-1cloudfront</li>\n</ol>\n<p><img src=\"/images/img_5bbef98529a61.png\" alt=\"img\"></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// force a specific Host header to be sent to the origin</span></span><br><span class=\"line\"></span><br><span class=\"line\">exports.handler = <span class=\"function\">(<span class=\"params\">event, context, callback</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> request = event.Records[<span class=\"number\">0</span>].cf.request;</span><br><span class=\"line\">    request.headers.host[<span class=\"number\">0</span>].value = <span class=\"string\">'www.xiemx.com'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> callback(<span class=\"literal\">null</span>, request);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>cloudfrontBehavior</li>\n</ol>\n<p><img src=\"/images/img_5bbefa0f833d9.png\" alt=\"img\"></p>\n<ol start=\"3\">\n<li>deploy cdncdn</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<p>aws cloudfrontcloudfrontHosthost+ipawslambda@edgerequestheaderhost</p>\n<p>aws lambda@edge<a href=\"https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/lambda-edge.html\" target=\"_blank\" rel=\"noopener\">https://docs.aws.amazon.com/zh_cn/lambda/latest/dg/lambda-edge.html</a></p>\n<ol>\n<li>lambdaus-east-1cloudfront</li>\n</ol>\n<p><img src=\"/images/img_5bbef98529a61.png\" alt=\"img\"></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// force a specific Host header to be sent to the origin</span></span><br><span class=\"line\"></span><br><span class=\"line\">exports.handler = <span class=\"function\">(<span class=\"params\">event, context, callback</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> request = event.Records[<span class=\"number\">0</span>].cf.request;</span><br><span class=\"line\">    request.headers.host[<span class=\"number\">0</span>].value = <span class=\"string\">'www.xiemx.com'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> callback(<span class=\"literal\">null</span>, request);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>cloudfrontBehavior</li>\n</ol>\n<p><img src=\"/images/img_5bbefa0f833d9.png\" alt=\"img\"></p>\n<ol start=\"3\">\n<li>deploy cdncdn</li>\n</ol>\n"},{"layout":"post","title":"Mysql-proxy","published":1,"author":"xiemx","comments":1,"date":"2016-02-17T22:02:43.000Z","_content":"1Luaglibpkg-configlibeventGCCmake\n\n2mysql-proxy\n```shell\ntar xzf mysql-proxy-0.8.1.tar.gz\ncd mysql-proxy-0.8.1\n./configure  --prefix=/usr/local/mysql-proxy[root@node1 bin]# /usr/local/mysql-proxy/bin/mysql-proxy     --help-all\nUsage:\nmysql-proxy [OPTION...] - MySQL Proxy\nHelp Options:\n-h, --help                                              Show help options\n--help-all                                              Show all help options\n--help-proxy                                            Show options for the proxy-module\n\nproxy-module\n  -P, --proxy-address=<host:port>                         listening address:port of the proxy-server (default: :4040)\n  -r, --proxy-read-only-backend-addresses=<host:port>     address:port of the remote slave-server (default: not set)\n  -b, --proxy-backend-addresses=<host:port>               address:port of the remote backend-servers (default: 127.0.0.1:3306)\n--proxy-skip-profiling                                  disables profiling of queries (default: enabled)\n--proxy-fix-bug-25371                                   fix bug #25371 (mysqld > 5.1.12) for older libmysql versions\n-s, --proxy-lua-script=<file>                           filename of the lua script (default: not set)\n--no-proxy                                              don't start the proxy-module (default: enabled)\n--proxy-pool-no-change-user                             don't use CHANGE_USER to reset the connection coming from the pool (default: enabled)\n--proxy-connect-timeout                                 connect timeout in seconds (default: 2.0 seconds)\n--proxy-read-timeout                                    read timeout in seconds (default: 8 hours)\n--proxy-write-timeout                                   write timeout in seconds (default: 8 hours)\n\nApplication Options:\n-V, --version                                           Show version\n--defaults-file=<file>                                  configuration file\n--verbose-shutdown                                      Always log the exit code when shutting down\n--daemon                                                Start in daemon-mode\n--user=<user>                                           Run mysql-proxy as user\n--basedir=<absolute path>                               Base directory to prepend to relative paths in the config\n--pid-file=<file>                                       PID file in case we are started as daemon\n--plugin-dir=<path>                                     path to the plugins\n--plugins=<name>                                        plugins to load\n--log-level=(error|warning|info|message|debug)          log all messages of level ... or higher\n--log-file=<file>                                       log all messages in a file\n--log-use-syslog                                        log all messages to syslog\n--log-backtrace-on-crash                                try to invoke debugger on crash\n--keepalive                                             try to restart the proxy if it crashed\n--max-open-files                                        maximum number of open files (ulimit -n)\n--event-threads                                         number of event-handling threads (default: 1)\n--lua-path=<...>                                        set the LUA_PATH\n--lua-cpath=<...>                                       set the LUA_CPATH\n```","source":"_posts/build-mysql-proxy.md","raw":"---\nlayout: post\ntitle: Mysql-proxy\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-02-18 06:02:43\ntags: [ mysql, mysql-proxy ]\ncategories:\n    - mysql\n---\n1Luaglibpkg-configlibeventGCCmake\n\n2mysql-proxy\n```shell\ntar xzf mysql-proxy-0.8.1.tar.gz\ncd mysql-proxy-0.8.1\n./configure  --prefix=/usr/local/mysql-proxy[root@node1 bin]# /usr/local/mysql-proxy/bin/mysql-proxy     --help-all\nUsage:\nmysql-proxy [OPTION...] - MySQL Proxy\nHelp Options:\n-h, --help                                              Show help options\n--help-all                                              Show all help options\n--help-proxy                                            Show options for the proxy-module\n\nproxy-module\n  -P, --proxy-address=<host:port>                         listening address:port of the proxy-server (default: :4040)\n  -r, --proxy-read-only-backend-addresses=<host:port>     address:port of the remote slave-server (default: not set)\n  -b, --proxy-backend-addresses=<host:port>               address:port of the remote backend-servers (default: 127.0.0.1:3306)\n--proxy-skip-profiling                                  disables profiling of queries (default: enabled)\n--proxy-fix-bug-25371                                   fix bug #25371 (mysqld > 5.1.12) for older libmysql versions\n-s, --proxy-lua-script=<file>                           filename of the lua script (default: not set)\n--no-proxy                                              don't start the proxy-module (default: enabled)\n--proxy-pool-no-change-user                             don't use CHANGE_USER to reset the connection coming from the pool (default: enabled)\n--proxy-connect-timeout                                 connect timeout in seconds (default: 2.0 seconds)\n--proxy-read-timeout                                    read timeout in seconds (default: 8 hours)\n--proxy-write-timeout                                   write timeout in seconds (default: 8 hours)\n\nApplication Options:\n-V, --version                                           Show version\n--defaults-file=<file>                                  configuration file\n--verbose-shutdown                                      Always log the exit code when shutting down\n--daemon                                                Start in daemon-mode\n--user=<user>                                           Run mysql-proxy as user\n--basedir=<absolute path>                               Base directory to prepend to relative paths in the config\n--pid-file=<file>                                       PID file in case we are started as daemon\n--plugin-dir=<path>                                     path to the plugins\n--plugins=<name>                                        plugins to load\n--log-level=(error|warning|info|message|debug)          log all messages of level ... or higher\n--log-file=<file>                                       log all messages in a file\n--log-use-syslog                                        log all messages to syslog\n--log-backtrace-on-crash                                try to invoke debugger on crash\n--keepalive                                             try to restart the proxy if it crashed\n--max-open-files                                        maximum number of open files (ulimit -n)\n--event-threads                                         number of event-handling threads (default: 1)\n--lua-path=<...>                                        set the LUA_PATH\n--lua-cpath=<...>                                       set the LUA_CPATH\n```","slug":"build-mysql-proxy","updated":"2019-10-21T06:57:42.921Z","photos":[],"link":"","_id":"ck42dyich000ju9urruujtm2p","content":"<p>1Luaglibpkg-configlibeventGCCmake</p>\n<p>2mysql-proxy</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xzf mysql-proxy-0.8.1.tar.gz</span><br><span class=\"line\">cd mysql-proxy-0.8.1</span><br><span class=\"line\">./configure  --prefix=/usr/local/mysql-proxy[root@node1 bin]# /usr/local/mysql-proxy/bin/mysql-proxy     --help-all</span><br><span class=\"line\">Usage:</span><br><span class=\"line\">mysql-proxy [OPTION...] - MySQL Proxy</span><br><span class=\"line\">Help Options:</span><br><span class=\"line\">-h, --help                                              Show help options</span><br><span class=\"line\">--help-all                                              Show all help options</span><br><span class=\"line\">--help-proxy                                            Show options for the proxy-module</span><br><span class=\"line\"></span><br><span class=\"line\">proxy-module</span><br><span class=\"line\">  -P, --proxy-address=&lt;host:port&gt;                         listening address:port of the proxy-server (default: :4040)</span><br><span class=\"line\">  -r, --proxy-read-only-backend-addresses=&lt;host:port&gt;     address:port of the remote slave-server (default: not set)</span><br><span class=\"line\">  -b, --proxy-backend-addresses=&lt;host:port&gt;               address:port of the remote backend-servers (default: 127.0.0.1:3306)</span><br><span class=\"line\">--proxy-skip-profiling                                  disables profiling of queries (default: enabled)</span><br><span class=\"line\">--proxy-fix-bug-25371                                   fix bug #25371 (mysqld &gt; 5.1.12) for older libmysql versions</span><br><span class=\"line\">-s, --proxy-lua-script=&lt;file&gt;                           filename of the lua script (default: not set)</span><br><span class=\"line\">--no-proxy                                              don't start the proxy-module (default: enabled)</span><br><span class=\"line\">--proxy-pool-no-change-user                             don't use CHANGE_USER to reset the connection coming from the pool (default: enabled)</span><br><span class=\"line\">--proxy-connect-timeout                                 connect timeout in seconds (default: 2.0 seconds)</span><br><span class=\"line\">--proxy-read-timeout                                    read timeout in seconds (default: 8 hours)</span><br><span class=\"line\">--proxy-write-timeout                                   write timeout in seconds (default: 8 hours)</span><br><span class=\"line\"></span><br><span class=\"line\">Application Options:</span><br><span class=\"line\">-V, --version                                           Show version</span><br><span class=\"line\">--defaults-file=&lt;file&gt;                                  configuration file</span><br><span class=\"line\">--verbose-shutdown                                      Always log the exit code when shutting down</span><br><span class=\"line\">--daemon                                                Start in daemon-mode</span><br><span class=\"line\">--user=&lt;user&gt;                                           Run mysql-proxy as user</span><br><span class=\"line\">--basedir=&lt;absolute path&gt;                               Base directory to prepend to relative paths in the config</span><br><span class=\"line\">--pid-file=&lt;file&gt;                                       PID file in case we are started as daemon</span><br><span class=\"line\">--plugin-dir=&lt;path&gt;                                     path to the plugins</span><br><span class=\"line\">--plugins=&lt;name&gt;                                        plugins to load</span><br><span class=\"line\">--log-level=(error|warning|info|message|debug)          log all messages of level ... or higher</span><br><span class=\"line\">--log-file=&lt;file&gt;                                       log all messages in a file</span><br><span class=\"line\">--log-use-syslog                                        log all messages to syslog</span><br><span class=\"line\">--log-backtrace-on-crash                                try to invoke debugger on crash</span><br><span class=\"line\">--keepalive                                             try to restart the proxy if it crashed</span><br><span class=\"line\">--max-open-files                                        maximum number of open files (ulimit -n)</span><br><span class=\"line\">--event-threads                                         number of event-handling threads (default: 1)</span><br><span class=\"line\">--lua-path=&lt;...&gt;                                        set the LUA_PATH</span><br><span class=\"line\">--lua-cpath=&lt;...&gt;                                       set the LUA_CPATH</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>1Luaglibpkg-configlibeventGCCmake</p>\n<p>2mysql-proxy</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xzf mysql-proxy-0.8.1.tar.gz</span><br><span class=\"line\">cd mysql-proxy-0.8.1</span><br><span class=\"line\">./configure  --prefix=/usr/local/mysql-proxy[root@node1 bin]# /usr/local/mysql-proxy/bin/mysql-proxy     --help-all</span><br><span class=\"line\">Usage:</span><br><span class=\"line\">mysql-proxy [OPTION...] - MySQL Proxy</span><br><span class=\"line\">Help Options:</span><br><span class=\"line\">-h, --help                                              Show help options</span><br><span class=\"line\">--help-all                                              Show all help options</span><br><span class=\"line\">--help-proxy                                            Show options for the proxy-module</span><br><span class=\"line\"></span><br><span class=\"line\">proxy-module</span><br><span class=\"line\">  -P, --proxy-address=&lt;host:port&gt;                         listening address:port of the proxy-server (default: :4040)</span><br><span class=\"line\">  -r, --proxy-read-only-backend-addresses=&lt;host:port&gt;     address:port of the remote slave-server (default: not set)</span><br><span class=\"line\">  -b, --proxy-backend-addresses=&lt;host:port&gt;               address:port of the remote backend-servers (default: 127.0.0.1:3306)</span><br><span class=\"line\">--proxy-skip-profiling                                  disables profiling of queries (default: enabled)</span><br><span class=\"line\">--proxy-fix-bug-25371                                   fix bug #25371 (mysqld &gt; 5.1.12) for older libmysql versions</span><br><span class=\"line\">-s, --proxy-lua-script=&lt;file&gt;                           filename of the lua script (default: not set)</span><br><span class=\"line\">--no-proxy                                              don't start the proxy-module (default: enabled)</span><br><span class=\"line\">--proxy-pool-no-change-user                             don't use CHANGE_USER to reset the connection coming from the pool (default: enabled)</span><br><span class=\"line\">--proxy-connect-timeout                                 connect timeout in seconds (default: 2.0 seconds)</span><br><span class=\"line\">--proxy-read-timeout                                    read timeout in seconds (default: 8 hours)</span><br><span class=\"line\">--proxy-write-timeout                                   write timeout in seconds (default: 8 hours)</span><br><span class=\"line\"></span><br><span class=\"line\">Application Options:</span><br><span class=\"line\">-V, --version                                           Show version</span><br><span class=\"line\">--defaults-file=&lt;file&gt;                                  configuration file</span><br><span class=\"line\">--verbose-shutdown                                      Always log the exit code when shutting down</span><br><span class=\"line\">--daemon                                                Start in daemon-mode</span><br><span class=\"line\">--user=&lt;user&gt;                                           Run mysql-proxy as user</span><br><span class=\"line\">--basedir=&lt;absolute path&gt;                               Base directory to prepend to relative paths in the config</span><br><span class=\"line\">--pid-file=&lt;file&gt;                                       PID file in case we are started as daemon</span><br><span class=\"line\">--plugin-dir=&lt;path&gt;                                     path to the plugins</span><br><span class=\"line\">--plugins=&lt;name&gt;                                        plugins to load</span><br><span class=\"line\">--log-level=(error|warning|info|message|debug)          log all messages of level ... or higher</span><br><span class=\"line\">--log-file=&lt;file&gt;                                       log all messages in a file</span><br><span class=\"line\">--log-use-syslog                                        log all messages to syslog</span><br><span class=\"line\">--log-backtrace-on-crash                                try to invoke debugger on crash</span><br><span class=\"line\">--keepalive                                             try to restart the proxy if it crashed</span><br><span class=\"line\">--max-open-files                                        maximum number of open files (ulimit -n)</span><br><span class=\"line\">--event-threads                                         number of event-handling threads (default: 1)</span><br><span class=\"line\">--lua-path=&lt;...&gt;                                        set the LUA_PATH</span><br><span class=\"line\">--lua-cpath=&lt;...&gt;                                       set the LUA_CPATH</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"Could not run curl-config: [Errno 2] No such file or directory","published":1,"author":"xiemx","comments":1,"date":"2016-05-26T21:05:22.000Z","_content":"```shell\nroot@06f95000953c:~/phantomjs# pip install pycurl\nDownloading/unpacking pycurl\n Downloading pycurl-7.43.0.tar.gz (182kB): 182kB downloaded\n Running setup.py (path:/tmp/pip-build-XGZuU8/pycurl/setup.py) egg_info for package pycurl\n Traceback (most recent call last):\n File \"\", line 17, in \n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 823, in \n ext = get_extension(sys.argv, split_extension_source=split_extension_source)\n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 497, in get_extension\n ext_config = ExtensionConfiguration(argv)\n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 71, in __init__\n self.configure()\n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 107, in configure_unix\n raise ConfigurationError(msg)\n __main__.ConfigurationError: Could not run curl-config: [Errno 2] No such file or directory\n Complete output from command python setup.py egg_info:\n Traceback (most recent call last):\n\n File \"\", line 17, in \n\n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 823, in \n\n ext = get_extension(sys.argv, split_extension_source=split_extension_source)\n\n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 497, in get_extension\n\n ext_config = ExtensionConfiguration(argv)\n\n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 71, in __init__\n\n self.configure()\n\n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 107, in configure_unix\n\n raise ConfigurationError(msg)\n\n__main__.ConfigurationError: Could not run curl-config: [Errno 2] No such file or directory\n\n----------------------------------------\nCleaning up...\nCommand python setup.py egg_info failed with error code 1 in /tmp/pip-build-XGZuU8/pycurl\nStoring debug log for failure in /root/.pip/pip.log\n\nroot@06f95000953c:~/phantomjs# apt-get install libcurl4-openssl-dev\nReading package lists... Done\nBuilding dependency tree \nReading state information... Done\nSuggested packages:\n libcurl4-doc libcurl3-dbg libidn11-dev libkrb5-dev libldap2-dev librtmp-dev\nThe following NEW packages will be installed:\n libcurl4-openssl-dev\n0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 253 kB of archives.\nAfter this operation, 1262 kB of additional disk space will be used.\nGet:1 http://mirrors.163.com/ubuntu/ vivid-security/main libcurl4-openssl-dev amd64 7.38.0-3ubuntu2.2 [253 kB]\nFetched 253 kB in 5s (47.1 kB/s) \ndebconf: delaying package configuration, since apt-utils is not installed\nSelecting previously unselected package libcurl4-openssl-dev:amd64.\n(Reading database ... 25480 files and directories currently installed.)\nPreparing to unpack .../libcurl4-openssl-dev_7.38.0-3ubuntu2.2_amd64.deb ...\nUnpacking libcurl4-openssl-dev:amd64 (7.38.0-3ubuntu2.2) ...\nSetting up libcurl4-openssl-dev:amd64 (7.38.0-3ubuntu2.2) ...\nroot@06f95000953c:~/phantomjs# \nroot@06f95000953c:~/phantomjs# \nroot@06f95000953c:~/phantomjs# curl\ncurl curl-config \nroot@06f95000953c:~/phantomjs# \n```\n\n\nlibcurl4-openssl-dev\n```\nsudo apt-get install libcurl4-openssl-dev\n```","source":"_posts/cloud-not-run-curl-config.md","raw":"---\nlayout: post\ntitle: 'Could not run curl-config: [Errno 2] No such file or directory'\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-05-27 05:05:22\ntags: [ linux, debug ]\ncategories:\n    - linux\n---\n```shell\nroot@06f95000953c:~/phantomjs# pip install pycurl\nDownloading/unpacking pycurl\n Downloading pycurl-7.43.0.tar.gz (182kB): 182kB downloaded\n Running setup.py (path:/tmp/pip-build-XGZuU8/pycurl/setup.py) egg_info for package pycurl\n Traceback (most recent call last):\n File \"\", line 17, in \n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 823, in \n ext = get_extension(sys.argv, split_extension_source=split_extension_source)\n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 497, in get_extension\n ext_config = ExtensionConfiguration(argv)\n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 71, in __init__\n self.configure()\n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 107, in configure_unix\n raise ConfigurationError(msg)\n __main__.ConfigurationError: Could not run curl-config: [Errno 2] No such file or directory\n Complete output from command python setup.py egg_info:\n Traceback (most recent call last):\n\n File \"\", line 17, in \n\n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 823, in \n\n ext = get_extension(sys.argv, split_extension_source=split_extension_source)\n\n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 497, in get_extension\n\n ext_config = ExtensionConfiguration(argv)\n\n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 71, in __init__\n\n self.configure()\n\n File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 107, in configure_unix\n\n raise ConfigurationError(msg)\n\n__main__.ConfigurationError: Could not run curl-config: [Errno 2] No such file or directory\n\n----------------------------------------\nCleaning up...\nCommand python setup.py egg_info failed with error code 1 in /tmp/pip-build-XGZuU8/pycurl\nStoring debug log for failure in /root/.pip/pip.log\n\nroot@06f95000953c:~/phantomjs# apt-get install libcurl4-openssl-dev\nReading package lists... Done\nBuilding dependency tree \nReading state information... Done\nSuggested packages:\n libcurl4-doc libcurl3-dbg libidn11-dev libkrb5-dev libldap2-dev librtmp-dev\nThe following NEW packages will be installed:\n libcurl4-openssl-dev\n0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 253 kB of archives.\nAfter this operation, 1262 kB of additional disk space will be used.\nGet:1 http://mirrors.163.com/ubuntu/ vivid-security/main libcurl4-openssl-dev amd64 7.38.0-3ubuntu2.2 [253 kB]\nFetched 253 kB in 5s (47.1 kB/s) \ndebconf: delaying package configuration, since apt-utils is not installed\nSelecting previously unselected package libcurl4-openssl-dev:amd64.\n(Reading database ... 25480 files and directories currently installed.)\nPreparing to unpack .../libcurl4-openssl-dev_7.38.0-3ubuntu2.2_amd64.deb ...\nUnpacking libcurl4-openssl-dev:amd64 (7.38.0-3ubuntu2.2) ...\nSetting up libcurl4-openssl-dev:amd64 (7.38.0-3ubuntu2.2) ...\nroot@06f95000953c:~/phantomjs# \nroot@06f95000953c:~/phantomjs# \nroot@06f95000953c:~/phantomjs# curl\ncurl curl-config \nroot@06f95000953c:~/phantomjs# \n```\n\n\nlibcurl4-openssl-dev\n```\nsudo apt-get install libcurl4-openssl-dev\n```","slug":"cloud-not-run-curl-config","updated":"2019-10-21T06:57:43.013Z","photos":[],"link":"","_id":"ck42dyici000lu9urqupfwrpm","content":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@06f95000953c:~/phantomjs# pip install pycurl</span><br><span class=\"line\">Downloading/unpacking pycurl</span><br><span class=\"line\"> Downloading pycurl-7.43.0.tar.gz (182kB): 182kB downloaded</span><br><span class=\"line\"> Running setup.py (path:/tmp/pip-build-XGZuU8/pycurl/setup.py) egg_info for package pycurl</span><br><span class=\"line\"> Traceback (most recent call last):</span><br><span class=\"line\"> File \"\", line 17, in </span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 823, in </span><br><span class=\"line\"> ext = get_extension(sys.argv, split_extension_source=split_extension_source)</span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 497, in get_extension</span><br><span class=\"line\"> ext_config = ExtensionConfiguration(argv)</span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 71, in __init__</span><br><span class=\"line\"> self.configure()</span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 107, in configure_unix</span><br><span class=\"line\"> raise ConfigurationError(msg)</span><br><span class=\"line\"> __main__.ConfigurationError: Could not run curl-config: [Errno 2] No such file or directory</span><br><span class=\"line\"> Complete output from command python setup.py egg_info:</span><br><span class=\"line\"> Traceback (most recent call last):</span><br><span class=\"line\"></span><br><span class=\"line\"> File \"\", line 17, in </span><br><span class=\"line\"></span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 823, in </span><br><span class=\"line\"></span><br><span class=\"line\"> ext = get_extension(sys.argv, split_extension_source=split_extension_source)</span><br><span class=\"line\"></span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 497, in get_extension</span><br><span class=\"line\"></span><br><span class=\"line\"> ext_config = ExtensionConfiguration(argv)</span><br><span class=\"line\"></span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 71, in __init__</span><br><span class=\"line\"></span><br><span class=\"line\"> self.configure()</span><br><span class=\"line\"></span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 107, in configure_unix</span><br><span class=\"line\"></span><br><span class=\"line\"> raise ConfigurationError(msg)</span><br><span class=\"line\"></span><br><span class=\"line\">__main__.ConfigurationError: Could not run curl-config: [Errno 2] No such file or directory</span><br><span class=\"line\"></span><br><span class=\"line\">----------------------------------------</span><br><span class=\"line\">Cleaning up...</span><br><span class=\"line\">Command python setup.py egg_info failed with error code 1 in /tmp/pip-build-XGZuU8/pycurl</span><br><span class=\"line\">Storing debug log for failure in /root/.pip/pip.log</span><br><span class=\"line\"></span><br><span class=\"line\">root@06f95000953c:~/phantomjs# apt-get install libcurl4-openssl-dev</span><br><span class=\"line\">Reading package lists... Done</span><br><span class=\"line\">Building dependency tree </span><br><span class=\"line\">Reading state information... Done</span><br><span class=\"line\">Suggested packages:</span><br><span class=\"line\"> libcurl4-doc libcurl3-dbg libidn11-dev libkrb5-dev libldap2-dev librtmp-dev</span><br><span class=\"line\">The following NEW packages will be installed:</span><br><span class=\"line\"> libcurl4-openssl-dev</span><br><span class=\"line\">0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.</span><br><span class=\"line\">Need to get 253 kB of archives.</span><br><span class=\"line\">After this operation, 1262 kB of additional disk space will be used.</span><br><span class=\"line\">Get:1 http://mirrors.163.com/ubuntu/ vivid-security/main libcurl4-openssl-dev amd64 7.38.0-3ubuntu2.2 [253 kB]</span><br><span class=\"line\">Fetched 253 kB in 5s (47.1 kB/s) </span><br><span class=\"line\">debconf: delaying package configuration, since apt-utils is not installed</span><br><span class=\"line\">Selecting previously unselected package libcurl4-openssl-dev:amd64.</span><br><span class=\"line\">(Reading database ... 25480 files and directories currently installed.)</span><br><span class=\"line\">Preparing to unpack .../libcurl4-openssl-dev_7.38.0-3ubuntu2.2_amd64.deb ...</span><br><span class=\"line\">Unpacking libcurl4-openssl-dev:amd64 (7.38.0-3ubuntu2.2) ...</span><br><span class=\"line\">Setting up libcurl4-openssl-dev:amd64 (7.38.0-3ubuntu2.2) ...</span><br><span class=\"line\">root@06f95000953c:~/phantomjs# </span><br><span class=\"line\">root@06f95000953c:~/phantomjs# </span><br><span class=\"line\">root@06f95000953c:~/phantomjs# curl</span><br><span class=\"line\">curl curl-config </span><br><span class=\"line\">root@06f95000953c:~/phantomjs#</span><br></pre></td></tr></table></figure>\n\n<p>libcurl4-openssl-dev</p>\n<figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-<span class=\"built_in\">get</span> install libcurl4-openssl-<span class=\"built_in\">dev</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@06f95000953c:~/phantomjs# pip install pycurl</span><br><span class=\"line\">Downloading/unpacking pycurl</span><br><span class=\"line\"> Downloading pycurl-7.43.0.tar.gz (182kB): 182kB downloaded</span><br><span class=\"line\"> Running setup.py (path:/tmp/pip-build-XGZuU8/pycurl/setup.py) egg_info for package pycurl</span><br><span class=\"line\"> Traceback (most recent call last):</span><br><span class=\"line\"> File \"\", line 17, in </span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 823, in </span><br><span class=\"line\"> ext = get_extension(sys.argv, split_extension_source=split_extension_source)</span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 497, in get_extension</span><br><span class=\"line\"> ext_config = ExtensionConfiguration(argv)</span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 71, in __init__</span><br><span class=\"line\"> self.configure()</span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 107, in configure_unix</span><br><span class=\"line\"> raise ConfigurationError(msg)</span><br><span class=\"line\"> __main__.ConfigurationError: Could not run curl-config: [Errno 2] No such file or directory</span><br><span class=\"line\"> Complete output from command python setup.py egg_info:</span><br><span class=\"line\"> Traceback (most recent call last):</span><br><span class=\"line\"></span><br><span class=\"line\"> File \"\", line 17, in </span><br><span class=\"line\"></span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 823, in </span><br><span class=\"line\"></span><br><span class=\"line\"> ext = get_extension(sys.argv, split_extension_source=split_extension_source)</span><br><span class=\"line\"></span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 497, in get_extension</span><br><span class=\"line\"></span><br><span class=\"line\"> ext_config = ExtensionConfiguration(argv)</span><br><span class=\"line\"></span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 71, in __init__</span><br><span class=\"line\"></span><br><span class=\"line\"> self.configure()</span><br><span class=\"line\"></span><br><span class=\"line\"> File \"/tmp/pip-build-XGZuU8/pycurl/setup.py\", line 107, in configure_unix</span><br><span class=\"line\"></span><br><span class=\"line\"> raise ConfigurationError(msg)</span><br><span class=\"line\"></span><br><span class=\"line\">__main__.ConfigurationError: Could not run curl-config: [Errno 2] No such file or directory</span><br><span class=\"line\"></span><br><span class=\"line\">----------------------------------------</span><br><span class=\"line\">Cleaning up...</span><br><span class=\"line\">Command python setup.py egg_info failed with error code 1 in /tmp/pip-build-XGZuU8/pycurl</span><br><span class=\"line\">Storing debug log for failure in /root/.pip/pip.log</span><br><span class=\"line\"></span><br><span class=\"line\">root@06f95000953c:~/phantomjs# apt-get install libcurl4-openssl-dev</span><br><span class=\"line\">Reading package lists... Done</span><br><span class=\"line\">Building dependency tree </span><br><span class=\"line\">Reading state information... Done</span><br><span class=\"line\">Suggested packages:</span><br><span class=\"line\"> libcurl4-doc libcurl3-dbg libidn11-dev libkrb5-dev libldap2-dev librtmp-dev</span><br><span class=\"line\">The following NEW packages will be installed:</span><br><span class=\"line\"> libcurl4-openssl-dev</span><br><span class=\"line\">0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.</span><br><span class=\"line\">Need to get 253 kB of archives.</span><br><span class=\"line\">After this operation, 1262 kB of additional disk space will be used.</span><br><span class=\"line\">Get:1 http://mirrors.163.com/ubuntu/ vivid-security/main libcurl4-openssl-dev amd64 7.38.0-3ubuntu2.2 [253 kB]</span><br><span class=\"line\">Fetched 253 kB in 5s (47.1 kB/s) </span><br><span class=\"line\">debconf: delaying package configuration, since apt-utils is not installed</span><br><span class=\"line\">Selecting previously unselected package libcurl4-openssl-dev:amd64.</span><br><span class=\"line\">(Reading database ... 25480 files and directories currently installed.)</span><br><span class=\"line\">Preparing to unpack .../libcurl4-openssl-dev_7.38.0-3ubuntu2.2_amd64.deb ...</span><br><span class=\"line\">Unpacking libcurl4-openssl-dev:amd64 (7.38.0-3ubuntu2.2) ...</span><br><span class=\"line\">Setting up libcurl4-openssl-dev:amd64 (7.38.0-3ubuntu2.2) ...</span><br><span class=\"line\">root@06f95000953c:~/phantomjs# </span><br><span class=\"line\">root@06f95000953c:~/phantomjs# </span><br><span class=\"line\">root@06f95000953c:~/phantomjs# curl</span><br><span class=\"line\">curl curl-config </span><br><span class=\"line\">root@06f95000953c:~/phantomjs#</span><br></pre></td></tr></table></figure>\n\n<p>libcurl4-openssl-dev</p>\n<figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-<span class=\"built_in\">get</span> install libcurl4-openssl-<span class=\"built_in\">dev</span></span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"CPU","published":1,"author":"xiemx","comments":1,"date":"2016-07-06T02:07:20.000Z","_content":"\n1. cpulimit\n\n```shell\napt-get install cpulimit\nyum install cpulimit\n### epelyum.\n```\n\n2. cpulimit\n\n```\n### ID\ncpulimit -p 1234 -l 40\nID123440%cpu\n\n### \ncpulimit -e nginx -l 50\nnginx50%cpu\n```\n\n3. \n-lnginxcpu25%cpu412.5%cpu.root.\n\nhttp://cpulimit.sourceforge.net/","source":"_posts/cpulimit.md","raw":"---\nlayout: post\ntitle: CPU\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-07-06 10:07:20\ntags: [ linux, command, cpulimit ]\ncategories:\n    - linux\n---\n\n1. cpulimit\n\n```shell\napt-get install cpulimit\nyum install cpulimit\n### epelyum.\n```\n\n2. cpulimit\n\n```\n### ID\ncpulimit -p 1234 -l 40\nID123440%cpu\n\n### \ncpulimit -e nginx -l 50\nnginx50%cpu\n```\n\n3. \n-lnginxcpu25%cpu412.5%cpu.root.\n\nhttp://cpulimit.sourceforge.net/","slug":"cpulimit","updated":"2019-10-21T06:57:42.386Z","photos":[],"link":"","_id":"ck42dyick000pu9uri0nvpo0n","content":"<ol>\n<li>cpulimit</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install cpulimit</span><br><span class=\"line\">yum install cpulimit</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">## epelyum.</span></span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>cpulimit</li>\n</ol>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">### ID</span><br><span class=\"line\">cpulimit -p <span class=\"number\">1234</span> -l <span class=\"number\">40</span></span><br><span class=\"line\">ID<span class=\"number\">1234</span><span class=\"number\">40</span>%cpu</span><br><span class=\"line\"></span><br><span class=\"line\">### </span><br><span class=\"line\">cpulimit -e nginx -l <span class=\"number\">50</span></span><br><span class=\"line\">nginx<span class=\"number\">50</span>%cpu</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li><br>-lnginxcpu25%cpu412.5%cpu.root.</li>\n</ol>\n<p><a href=\"http://cpulimit.sourceforge.net/\" target=\"_blank\" rel=\"noopener\">http://cpulimit.sourceforge.net/</a></p>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li>cpulimit</li>\n</ol>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get install cpulimit</span><br><span class=\"line\">yum install cpulimit</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">## epelyum.</span></span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>cpulimit</li>\n</ol>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">### ID</span><br><span class=\"line\">cpulimit -p <span class=\"number\">1234</span> -l <span class=\"number\">40</span></span><br><span class=\"line\">ID<span class=\"number\">1234</span><span class=\"number\">40</span>%cpu</span><br><span class=\"line\"></span><br><span class=\"line\">### </span><br><span class=\"line\">cpulimit -e nginx -l <span class=\"number\">50</span></span><br><span class=\"line\">nginx<span class=\"number\">50</span>%cpu</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li><br>-lnginxcpu25%cpu412.5%cpu.root.</li>\n</ol>\n<p><a href=\"http://cpulimit.sourceforge.net/\" target=\"_blank\" rel=\"noopener\">http://cpulimit.sourceforge.net/</a></p>\n"},{"layout":"post","title":"dedecms","published":1,"author":"xiemx","comments":1,"date":"2016-05-25T18:05:40.000Z","_content":"sessions\n\n/data/sessions/sess_***777chmod 777 filename\n\nvdimgck.php\n\nvdimgck.phpDEDE/include/vdimgck.php vdimgck.php\n\n\n  \ndata\\safe\\inc_safe_config.php \n\n$safe_gdopen = 1,2,3,5,6; []\n\n(GB)data\\safe\\inc_safe_config.php $safe_gdopen = 1,2,3,5,6; 6","source":"_posts/dedecms-yanzhenma.md","raw":"---\nlayout: post\ntitle: dedecms\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-05-26 02:05:40\ntags: [ php, debug, dedecms ]\ncategories:\n    - php\n# permalink: '/2016/05/26/dedecms%e7%bb%87%e6%a2%a6%e9%aa%8c%e8%af%81%e7%a0%81%e6%97%a0%e6%b3%95%e6%ad%a3%e5%b8%b8%e6%98%be%e7%a4%ba'\n---\nsessions\n\n/data/sessions/sess_***777chmod 777 filename\n\nvdimgck.php\n\nvdimgck.phpDEDE/include/vdimgck.php vdimgck.php\n\n\n  \ndata\\safe\\inc_safe_config.php \n\n$safe_gdopen = 1,2,3,5,6; []\n\n(GB)data\\safe\\inc_safe_config.php $safe_gdopen = 1,2,3,5,6; 6","slug":"dedecms-yanzhenma","updated":"2019-10-21T06:57:42.669Z","photos":[],"link":"","_id":"ck42dyicl000su9urkvrd0s52","content":"<p>sessions</p>\n<p>/data/sessions/sess_***777chmod 777 filename</p>\n<p>vdimgck.php</p>\n<p>vdimgck.phpDEDE/include/vdimgck.php vdimgck.php</p>\n<p></p>\n<p>data\\safe\\inc_safe_config.php </p>\n<p>$safe_gdopen = 1,2,3,5,6; []</p>\n<p>(GB)data\\safe\\inc_safe_config.php $safe_gdopen = 1,2,3,5,6; 6</p>\n","site":{"data":{}},"excerpt":"","more":"<p>sessions</p>\n<p>/data/sessions/sess_***777chmod 777 filename</p>\n<p>vdimgck.php</p>\n<p>vdimgck.phpDEDE/include/vdimgck.php vdimgck.php</p>\n<p></p>\n<p>data\\safe\\inc_safe_config.php </p>\n<p>$safe_gdopen = 1,2,3,5,6; []</p>\n<p>(GB)data\\safe\\inc_safe_config.php $safe_gdopen = 1,2,3,5,6; 6</p>\n"},{"layout":"post","title":"windowZabbix_agent","published":1,"author":"xiemx","comments":1,"date":"2016-04-13T01:04:53.000Z","_content":"\n1.windowsagent\n\n\t![img](/images/img_570da13048078.png)\n\n2.conf\n\n```shell\nServer=serverIP\n\nServerActive=serverIP\n\nHostName=\n```\n\n![img](/images/img_570da1465a8dc.png)\n\n3.Zabbix_agent\n\n```shell\n# \n\ncd  C:\\zabbix_agents\\bin\\win64\n\n#\n\nzabbix_agentd.exe c c:\\zabbix\\zabbix_agentd.conf -i\n\n#\n\nzabbix_agentd.exe c c:\\zabbix\\zabbix_agentd.conf -s\n\n```\n\n![img](/images/img_570da15f9ead1.png)\n\n\n```markdown\n\n-c    \n-i     \n-s    \n-x    \n-d    \n```\n\n\n4.agentconf\n\n![img](/images/img_570da173ef401.png)\n\n ","source":"_posts/deploy-zabbix_agent-to-windows.md","raw":"---\nlayout: post\ntitle: windowZabbix_agent\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-04-13 09:04:53\ntags: [ zabbix, windows ]\ncategories:\n    - zabbix\n#permalink: '/2016/04/13/deploy-zabbix_agent-to-windows'\n---\n\n1.windowsagent\n\n\t![img](/images/img_570da13048078.png)\n\n2.conf\n\n```shell\nServer=serverIP\n\nServerActive=serverIP\n\nHostName=\n```\n\n![img](/images/img_570da1465a8dc.png)\n\n3.Zabbix_agent\n\n```shell\n# \n\ncd  C:\\zabbix_agents\\bin\\win64\n\n#\n\nzabbix_agentd.exe c c:\\zabbix\\zabbix_agentd.conf -i\n\n#\n\nzabbix_agentd.exe c c:\\zabbix\\zabbix_agentd.conf -s\n\n```\n\n![img](/images/img_570da15f9ead1.png)\n\n\n```markdown\n\n-c    \n-i     \n-s    \n-x    \n-d    \n```\n\n\n4.agentconf\n\n![img](/images/img_570da173ef401.png)\n\n ","slug":"deploy-zabbix_agent-to-windows","updated":"2019-10-21T06:57:43.013Z","photos":[],"link":"","_id":"ck42dyicm000vu9ur536spgsb","content":"<p>1.windowsagent</p>\n<pre><code>![img](/images/img_570da13048078.png)</code></pre><p>2.conf</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Server=serverIP</span><br><span class=\"line\"></span><br><span class=\"line\">ServerActive=serverIP</span><br><span class=\"line\"></span><br><span class=\"line\">HostName=</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/images/img_570da1465a8dc.png\" alt=\"img\"></p>\n<p>3.Zabbix_agent</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> </span></span><br><span class=\"line\"></span><br><span class=\"line\">cd  C:\\zabbix_agents\\bin\\win64</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"></span></span><br><span class=\"line\"></span><br><span class=\"line\">zabbix_agentd.exe c c:\\zabbix\\zabbix_agentd.conf -i</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"></span></span><br><span class=\"line\"></span><br><span class=\"line\">zabbix_agentd.exe c c:\\zabbix\\zabbix_agentd.conf -s</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/images/img_570da15f9ead1.png\" alt=\"img\"></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">-c    </span><br><span class=\"line\">-i     </span><br><span class=\"line\">-s    </span><br><span class=\"line\">-x    </span><br><span class=\"line\">-d    </span><br></pre></td></tr></table></figure>\n\n<p>4.agentconf</p>\n<p><img src=\"/images/img_570da173ef401.png\" alt=\"img\"></p>\n","site":{"data":{}},"excerpt":"","more":"<p>1.windowsagent</p>\n<pre><code>![img](/images/img_570da13048078.png)</code></pre><p>2.conf</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Server=serverIP</span><br><span class=\"line\"></span><br><span class=\"line\">ServerActive=serverIP</span><br><span class=\"line\"></span><br><span class=\"line\">HostName=</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/images/img_570da1465a8dc.png\" alt=\"img\"></p>\n<p>3.Zabbix_agent</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> </span></span><br><span class=\"line\"></span><br><span class=\"line\">cd  C:\\zabbix_agents\\bin\\win64</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"></span></span><br><span class=\"line\"></span><br><span class=\"line\">zabbix_agentd.exe c c:\\zabbix\\zabbix_agentd.conf -i</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"></span></span><br><span class=\"line\"></span><br><span class=\"line\">zabbix_agentd.exe c c:\\zabbix\\zabbix_agentd.conf -s</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/images/img_570da15f9ead1.png\" alt=\"img\"></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">-c    </span><br><span class=\"line\">-i     </span><br><span class=\"line\">-s    </span><br><span class=\"line\">-x    </span><br><span class=\"line\">-d    </span><br></pre></td></tr></table></figure>\n\n<p>4.agentconf</p>\n<p><img src=\"/images/img_570da173ef401.png\" alt=\"img\"></p>\n"},{"layout":"post","title":"django","published":1,"author":"xiemx","comments":1,"date":"2016-09-28T19:09:37.000Z","_content":"Django\n```\n> cd /you/project/path # \n> python manage.py shell # django shell\n\n>from django.contrib.auth.models import User\n> user =User.objects.get(username='admin')\n> user.set_password('123456')\n> user.save()\n```\n123456","source":"_posts/django-reset-admin-password.md","raw":"---\nlayout: post\ntitle: django\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-09-29 03:09:37\ntags: [ python, django, webserver ]\ncategories:\n    - python\n---\nDjango\n```\n> cd /you/project/path # \n> python manage.py shell # django shell\n\n>from django.contrib.auth.models import User\n> user =User.objects.get(username='admin')\n> user.set_password('123456')\n> user.save()\n```\n123456","slug":"django-reset-admin-password","updated":"2019-10-21T06:57:42.570Z","photos":[],"link":"","_id":"ck42dyico000xu9ury32lrnad","content":"<p>Django</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; cd /you/project/path <span class=\"comment\"># </span></span><br><span class=\"line\">&gt; python manage.py <span class=\"keyword\">shell</span><span class=\"bash\"> <span class=\"comment\"># django shell</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">&gt;<span class=\"keyword\">from</span> django.contrib.auth.models import <span class=\"keyword\">User</span></span><br><span class=\"line\">&gt; <span class=\"keyword\">user</span> =<span class=\"keyword\">User</span>.objects.get(username=<span class=\"string\">'admin'</span>)</span><br><span class=\"line\">&gt; <span class=\"keyword\">user</span>.set_password(<span class=\"string\">'123456'</span>)</span><br><span class=\"line\">&gt; <span class=\"keyword\">user</span>.save()</span><br></pre></td></tr></table></figure>\n\n<p>123456</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Django</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; cd /you/project/path <span class=\"comment\"># </span></span><br><span class=\"line\">&gt; python manage.py <span class=\"keyword\">shell</span><span class=\"bash\"> <span class=\"comment\"># django shell</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">&gt;<span class=\"keyword\">from</span> django.contrib.auth.models import <span class=\"keyword\">User</span></span><br><span class=\"line\">&gt; <span class=\"keyword\">user</span> =<span class=\"keyword\">User</span>.objects.get(username=<span class=\"string\">'admin'</span>)</span><br><span class=\"line\">&gt; <span class=\"keyword\">user</span>.set_password(<span class=\"string\">'123456'</span>)</span><br><span class=\"line\">&gt; <span class=\"keyword\">user</span>.save()</span><br></pre></td></tr></table></figure>\n\n<p>123456</p>\n"},{"layout":"post","title":"dns view","published":1,"author":"xiemx","comments":1,"date":"2016-01-30T23:01:54.000Z","_content":"webispipispispipdnsdnsipdnsview\n\n\n```\nview \"-view\"{\nmatch-clients { ip1 };#ip/\nzone \"abc.com\" {\ntype master;\nfile \"dx.abc.com.zone\";zoneipaddmatch-clientsisp\n};\ninclude \"/etc/named.rfc1912.zones\";#\n}\n\nview \"-view\"{\nmatch-clients { ip2 };#ip/\nzone \"abc.com\" {\ntype master;\nfile \"wt.abc.com.zone\";zoneipaddmatch-clientsisp\n};\ninclude \"/etc/named.rfc1912.zones\";#\n}\n\nview \"other-view\"{\nmatch-clients { any };#ip\nzone \"abc.com\" {\ntype master;\nfile \"other.abc.com.zone\";\n};\ninclude \"/etc/named.rfc1912.zones\";#\n}\n```\nviewdns","source":"_posts/dns-view.md","raw":"---\nlayout: post\ntitle: dns view\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-01-31 07:01:54\ntags: [ dns, view ]\ncategories:\n    - dns\n---\nwebispipispispipdnsdnsipdnsview\n\n\n```\nview \"-view\"{\nmatch-clients { ip1 };#ip/\nzone \"abc.com\" {\ntype master;\nfile \"dx.abc.com.zone\";zoneipaddmatch-clientsisp\n};\ninclude \"/etc/named.rfc1912.zones\";#\n}\n\nview \"-view\"{\nmatch-clients { ip2 };#ip/\nzone \"abc.com\" {\ntype master;\nfile \"wt.abc.com.zone\";zoneipaddmatch-clientsisp\n};\ninclude \"/etc/named.rfc1912.zones\";#\n}\n\nview \"other-view\"{\nmatch-clients { any };#ip\nzone \"abc.com\" {\ntype master;\nfile \"other.abc.com.zone\";\n};\ninclude \"/etc/named.rfc1912.zones\";#\n}\n```\nviewdns","slug":"dns-view","updated":"2019-10-21T06:57:42.921Z","photos":[],"link":"","_id":"ck42dyicp0011u9ur16of6nsm","content":"<p>webispipispispipdnsdnsipdnsview</p>\n<p></p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">view <span class=\"string\">\"-view\"</span>&#123;</span><br><span class=\"line\">match-clients &#123; ip1 &#125;;#ip/</span><br><span class=\"line\">zone <span class=\"string\">\"abc.com\"</span> &#123;</span><br><span class=\"line\">type master;</span><br><span class=\"line\">file <span class=\"string\">\"dx.abc.com.zone\"</span>;zoneipaddmatch-clientsisp</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">include <span class=\"string\">\"/etc/named.rfc1912.zones\"</span>;#</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">view <span class=\"string\">\"-view\"</span>&#123;</span><br><span class=\"line\">match-clients &#123; ip2 &#125;;#ip/</span><br><span class=\"line\">zone <span class=\"string\">\"abc.com\"</span> &#123;</span><br><span class=\"line\">type master;</span><br><span class=\"line\">file <span class=\"string\">\"wt.abc.com.zone\"</span>;zoneipaddmatch-clientsisp</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">include <span class=\"string\">\"/etc/named.rfc1912.zones\"</span>;#</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">view <span class=\"string\">\"other-view\"</span>&#123;</span><br><span class=\"line\">match-clients &#123; any &#125;;#ip</span><br><span class=\"line\">zone <span class=\"string\">\"abc.com\"</span> &#123;</span><br><span class=\"line\">type master;</span><br><span class=\"line\">file <span class=\"string\">\"other.abc.com.zone\"</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">include <span class=\"string\">\"/etc/named.rfc1912.zones\"</span>;#</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>viewdns</p>\n","site":{"data":{}},"excerpt":"","more":"<p>webispipispispipdnsdnsipdnsview</p>\n<p></p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">view <span class=\"string\">\"-view\"</span>&#123;</span><br><span class=\"line\">match-clients &#123; ip1 &#125;;#ip/</span><br><span class=\"line\">zone <span class=\"string\">\"abc.com\"</span> &#123;</span><br><span class=\"line\">type master;</span><br><span class=\"line\">file <span class=\"string\">\"dx.abc.com.zone\"</span>;zoneipaddmatch-clientsisp</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">include <span class=\"string\">\"/etc/named.rfc1912.zones\"</span>;#</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">view <span class=\"string\">\"-view\"</span>&#123;</span><br><span class=\"line\">match-clients &#123; ip2 &#125;;#ip/</span><br><span class=\"line\">zone <span class=\"string\">\"abc.com\"</span> &#123;</span><br><span class=\"line\">type master;</span><br><span class=\"line\">file <span class=\"string\">\"wt.abc.com.zone\"</span>;zoneipaddmatch-clientsisp</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">include <span class=\"string\">\"/etc/named.rfc1912.zones\"</span>;#</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">view <span class=\"string\">\"other-view\"</span>&#123;</span><br><span class=\"line\">match-clients &#123; any &#125;;#ip</span><br><span class=\"line\">zone <span class=\"string\">\"abc.com\"</span> &#123;</span><br><span class=\"line\">type master;</span><br><span class=\"line\">file <span class=\"string\">\"other.abc.com.zone\"</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">include <span class=\"string\">\"/etc/named.rfc1912.zones\"</span>;#</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>viewdns</p>\n"},{"layout":"post","title":"docker privileged","published":1,"author":"xiemx","comments":1,"date":"2017-01-17T17:01:49.000Z","_content":"#### docker \n```\n$ docker help run \n...\n--privileged=false         Give extended privileges to this container\n...\n```\ncontainerrootrootcontainerrootprivilegedhostmount,iptablesdockerdocker\n    \n    \n* privileged\n```\n[root@localhost ~]# docker run -t -i centos:latest bash\n[root@65acccbba42f /]# ls /dev\nconsole  fd  full  fuse  kcore  null  ptmx  pts  random  shm  stderr  stdin  stdout  tty  urandom  zero\n[root@65acccbba42f /]# mkdir /home/test/\n[root@65acccbba42f /]# mkdir /home/test2/\n[root@65acccbba42f /]# mount -o bind /home/test  /home/test2\nmount: permission denied\n```\n\n* privileged\n```\n[root@localhost ~]# docker run -t -i --privileged centos:latest bash\n[root@c39330902b45 /]# ls /dev/\nautofs           dm-1  hidraw0       loop1               null    ptp3    sg0  shm       tty10  tty19  tty27  tty35  tty43  tty51  tty6   ttyS1    usbmon3  vcs5   vfio\nbsg              dm-2  hidraw1       loop2               nvram   pts     sg1  snapshot  tty11  tty2   tty28  tty36  tty44  tty52  tty60  ttyS2    usbmon4  vcs6   vga_arbiter\nbtrfs-control    dm-3  hpet          loop3               oldmem  random  sg2  snd       tty12  tty20  tty29  tty37  tty45  tty53  tty61  ttyS3    usbmon5  vcsa   vhost-net\nbus              dm-4  input         mapper              port    raw     sg3  stderr    tty13  tty21  tty3   tty38  tty46  tty54  tty62  uhid     usbmon6  vcsa1  watchdog\nconsole          dm-5  kcore         mcelog              ppp     rtc0    sg4  stdin     tty14  tty22  tty30  tty39  tty47  tty55  tty63  uinput   vcs      vcsa2  watchdog0\ncpu              dm-6  kmsg          mem                 ptmx    sda     sg5  stdout    tty15  tty23  tty31  tty4   tty48  tty56  tty7   urandom  vcs1     vcsa3  zero\ncpu_dma_latency  fd    kvm           net                 ptp0    sda1    sg6  tty       tty16  tty24  tty32  tty40  tty49  tty57  tty8   usbmon0  vcs2     vcsa4\ncrash            full  loop-control  network_latency     ptp1    sda2    sg7  tty0      tty17  tty25  tty33  tty41  tty5   tty58  tty9   usbmon1  vcs3     vcsa5\ndm-0             fuse  loop0         network_throughput  ptp2    sda3    sg8  tty1      tty18  tty26  tty34  tty42  tty50  tty59  ttyS0  usbmon2  vcs4     vcsa6\n[root@c39330902b45 /]# mkdir /home/test/\n[root@c39330902b45 /]# mkdir /home/test2/\n[root@c39330902b45 /]# mount -o bind /home/test  /home/test2\n```","source":"_posts/docker-privileged.md","raw":"---\nlayout: post\ntitle: docker privileged\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-01-18 01:01:49\ntags: [ ]\ncategories:\n    - docker\n---\n#### docker \n```\n$ docker help run \n...\n--privileged=false         Give extended privileges to this container\n...\n```\ncontainerrootrootcontainerrootprivilegedhostmount,iptablesdockerdocker\n    \n    \n* privileged\n```\n[root@localhost ~]# docker run -t -i centos:latest bash\n[root@65acccbba42f /]# ls /dev\nconsole  fd  full  fuse  kcore  null  ptmx  pts  random  shm  stderr  stdin  stdout  tty  urandom  zero\n[root@65acccbba42f /]# mkdir /home/test/\n[root@65acccbba42f /]# mkdir /home/test2/\n[root@65acccbba42f /]# mount -o bind /home/test  /home/test2\nmount: permission denied\n```\n\n* privileged\n```\n[root@localhost ~]# docker run -t -i --privileged centos:latest bash\n[root@c39330902b45 /]# ls /dev/\nautofs           dm-1  hidraw0       loop1               null    ptp3    sg0  shm       tty10  tty19  tty27  tty35  tty43  tty51  tty6   ttyS1    usbmon3  vcs5   vfio\nbsg              dm-2  hidraw1       loop2               nvram   pts     sg1  snapshot  tty11  tty2   tty28  tty36  tty44  tty52  tty60  ttyS2    usbmon4  vcs6   vga_arbiter\nbtrfs-control    dm-3  hpet          loop3               oldmem  random  sg2  snd       tty12  tty20  tty29  tty37  tty45  tty53  tty61  ttyS3    usbmon5  vcsa   vhost-net\nbus              dm-4  input         mapper              port    raw     sg3  stderr    tty13  tty21  tty3   tty38  tty46  tty54  tty62  uhid     usbmon6  vcsa1  watchdog\nconsole          dm-5  kcore         mcelog              ppp     rtc0    sg4  stdin     tty14  tty22  tty30  tty39  tty47  tty55  tty63  uinput   vcs      vcsa2  watchdog0\ncpu              dm-6  kmsg          mem                 ptmx    sda     sg5  stdout    tty15  tty23  tty31  tty4   tty48  tty56  tty7   urandom  vcs1     vcsa3  zero\ncpu_dma_latency  fd    kvm           net                 ptp0    sda1    sg6  tty       tty16  tty24  tty32  tty40  tty49  tty57  tty8   usbmon0  vcs2     vcsa4\ncrash            full  loop-control  network_latency     ptp1    sda2    sg7  tty0      tty17  tty25  tty33  tty41  tty5   tty58  tty9   usbmon1  vcs3     vcsa5\ndm-0             fuse  loop0         network_throughput  ptp2    sda3    sg8  tty1      tty18  tty26  tty34  tty42  tty50  tty59  ttyS0  usbmon2  vcs4     vcsa6\n[root@c39330902b45 /]# mkdir /home/test/\n[root@c39330902b45 /]# mkdir /home/test2/\n[root@c39330902b45 /]# mount -o bind /home/test  /home/test2\n```","slug":"docker-privileged","updated":"2019-10-21T06:57:43.060Z","photos":[],"link":"","_id":"ck42dyicp0014u9urx2uw9z9d","content":"<h4 id=\"docker-\"><a href=\"#docker-\" class=\"headerlink\" title=\"docker \"></a>docker </h4><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ docker help <span class=\"builtin-name\">run</span> </span><br><span class=\"line\"><span class=\"built_in\">..</span>.</span><br><span class=\"line\"><span class=\"attribute\">--privileged</span>=<span class=\"literal\">false</span>         Give extended privileges <span class=\"keyword\">to</span> this container</span><br><span class=\"line\"><span class=\"built_in\">..</span>.</span><br></pre></td></tr></table></figure>\n\n<p>containerrootrootcontainerrootprivilegedhostmount,iptablesdockerdocker</p>\n<ul>\n<li><p>privileged</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# docker <span class=\"builtin-name\">run</span> -t -i centos:latest bash</span><br><span class=\"line\">[root@65acccbba42f /]# ls /dev</span><br><span class=\"line\">console  fd  full  fuse  kcore  <span class=\"literal\">null</span>  ptmx  pts  random  shm  stderr  stdin  stdout  tty  urandom  zero</span><br><span class=\"line\">[root@65acccbba42f /]# mkdir /home/test/</span><br><span class=\"line\">[root@65acccbba42f /]# mkdir /home/test2/</span><br><span class=\"line\">[root@65acccbba42f /]# mount -o bind /home/test  /home/test2</span><br><span class=\"line\">mount: permission denied</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>privileged</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# docker <span class=\"builtin-name\">run</span> -t -i --privileged centos:latest bash</span><br><span class=\"line\">[root@c39330902b45 /]# ls /dev/</span><br><span class=\"line\">autofs           dm-1  hidraw0       loop1               <span class=\"literal\">null</span>    ptp3    sg0  shm       tty10  tty19  tty27  tty35  tty43  tty51  tty6   ttyS1    usbmon3  vcs5   vfio</span><br><span class=\"line\">bsg              dm-2  hidraw1       loop2               nvram   pts     sg1  snapshot  tty11  tty2   tty28  tty36  tty44  tty52  tty60  ttyS2    usbmon4  vcs6   vga_arbiter</span><br><span class=\"line\">btrfs-control    dm-3  hpet          loop3               oldmem  random  sg2  snd       tty12  tty20  tty29  tty37  tty45  tty53  tty61  ttyS3    usbmon5  vcsa   vhost-net</span><br><span class=\"line\">bus              dm-4  input         mapper             <span class=\"built_in\"> port </span>  <span class=\"built_in\"> raw </span>    sg3  stderr    tty13  tty21  tty3   tty38  tty46  tty54  tty62  uhid     usbmon6  vcsa1  watchdog</span><br><span class=\"line\">console          dm-5  kcore         mcelog             <span class=\"built_in\"> ppp </span>    rtc0    sg4  stdin     tty14  tty22  tty30  tty39  tty47  tty55  tty63  uinput   vcs      vcsa2  watchdog0</span><br><span class=\"line\">cpu              dm-6  kmsg          mem                 ptmx    sda     sg5  stdout    tty15  tty23  tty31  tty4   tty48  tty56  tty7   urandom  vcs1     vcsa3  zero</span><br><span class=\"line\">cpu_dma_latency  fd    kvm           net                 ptp0    sda1    sg6  tty       tty16  tty24  tty32  tty40  tty49  tty57  tty8   usbmon0  vcs2     vcsa4</span><br><span class=\"line\">crash            full  loop-control  network_latency     ptp1    sda2    sg7  tty0      tty17  tty25  tty33  tty41  tty5   tty58  tty9   usbmon1  vcs3     vcsa5</span><br><span class=\"line\">dm-0             fuse  loop0         network_throughput  ptp2    sda3    sg8  tty1      tty18  tty26  tty34  tty42  tty50  tty59  ttyS0  usbmon2  vcs4     vcsa6</span><br><span class=\"line\">[root@c39330902b45 /]# mkdir /home/test/</span><br><span class=\"line\">[root@c39330902b45 /]# mkdir /home/test2/</span><br><span class=\"line\">[root@c39330902b45 /]# mount -o bind /home/test  /home/test2</span><br></pre></td></tr></table></figure></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"docker-\"><a href=\"#docker-\" class=\"headerlink\" title=\"docker \"></a>docker </h4><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ docker help <span class=\"builtin-name\">run</span> </span><br><span class=\"line\"><span class=\"built_in\">..</span>.</span><br><span class=\"line\"><span class=\"attribute\">--privileged</span>=<span class=\"literal\">false</span>         Give extended privileges <span class=\"keyword\">to</span> this container</span><br><span class=\"line\"><span class=\"built_in\">..</span>.</span><br></pre></td></tr></table></figure>\n\n<p>containerrootrootcontainerrootprivilegedhostmount,iptablesdockerdocker</p>\n<ul>\n<li><p>privileged</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# docker <span class=\"builtin-name\">run</span> -t -i centos:latest bash</span><br><span class=\"line\">[root@65acccbba42f /]# ls /dev</span><br><span class=\"line\">console  fd  full  fuse  kcore  <span class=\"literal\">null</span>  ptmx  pts  random  shm  stderr  stdin  stdout  tty  urandom  zero</span><br><span class=\"line\">[root@65acccbba42f /]# mkdir /home/test/</span><br><span class=\"line\">[root@65acccbba42f /]# mkdir /home/test2/</span><br><span class=\"line\">[root@65acccbba42f /]# mount -o bind /home/test  /home/test2</span><br><span class=\"line\">mount: permission denied</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>privileged</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# docker <span class=\"builtin-name\">run</span> -t -i --privileged centos:latest bash</span><br><span class=\"line\">[root@c39330902b45 /]# ls /dev/</span><br><span class=\"line\">autofs           dm-1  hidraw0       loop1               <span class=\"literal\">null</span>    ptp3    sg0  shm       tty10  tty19  tty27  tty35  tty43  tty51  tty6   ttyS1    usbmon3  vcs5   vfio</span><br><span class=\"line\">bsg              dm-2  hidraw1       loop2               nvram   pts     sg1  snapshot  tty11  tty2   tty28  tty36  tty44  tty52  tty60  ttyS2    usbmon4  vcs6   vga_arbiter</span><br><span class=\"line\">btrfs-control    dm-3  hpet          loop3               oldmem  random  sg2  snd       tty12  tty20  tty29  tty37  tty45  tty53  tty61  ttyS3    usbmon5  vcsa   vhost-net</span><br><span class=\"line\">bus              dm-4  input         mapper             <span class=\"built_in\"> port </span>  <span class=\"built_in\"> raw </span>    sg3  stderr    tty13  tty21  tty3   tty38  tty46  tty54  tty62  uhid     usbmon6  vcsa1  watchdog</span><br><span class=\"line\">console          dm-5  kcore         mcelog             <span class=\"built_in\"> ppp </span>    rtc0    sg4  stdin     tty14  tty22  tty30  tty39  tty47  tty55  tty63  uinput   vcs      vcsa2  watchdog0</span><br><span class=\"line\">cpu              dm-6  kmsg          mem                 ptmx    sda     sg5  stdout    tty15  tty23  tty31  tty4   tty48  tty56  tty7   urandom  vcs1     vcsa3  zero</span><br><span class=\"line\">cpu_dma_latency  fd    kvm           net                 ptp0    sda1    sg6  tty       tty16  tty24  tty32  tty40  tty49  tty57  tty8   usbmon0  vcs2     vcsa4</span><br><span class=\"line\">crash            full  loop-control  network_latency     ptp1    sda2    sg7  tty0      tty17  tty25  tty33  tty41  tty5   tty58  tty9   usbmon1  vcs3     vcsa5</span><br><span class=\"line\">dm-0             fuse  loop0         network_throughput  ptp2    sda3    sg8  tty1      tty18  tty26  tty34  tty42  tty50  tty59  ttyS0  usbmon2  vcs4     vcsa6</span><br><span class=\"line\">[root@c39330902b45 /]# mkdir /home/test/</span><br><span class=\"line\">[root@c39330902b45 /]# mkdir /home/test2/</span><br><span class=\"line\">[root@c39330902b45 /]# mount -o bind /home/test  /home/test2</span><br></pre></td></tr></table></figure></li>\n</ul>\n"},{"layout":"post","title":"","published":1,"author":"xiemx","comments":1,"date":"2016-07-27T03:07:26.000Z","_content":"\n\n|||\n|:---|:-|\n|addPeriod| 5 5 |\n|ok|OK |\n\n\n\n|||\n|:---|:-|\n|clientDeleteProhibited||\n|serverDeleteProhibited||\n|clientUpdateProhibited|////DNS |\n|serverUpdateProhibited|////DNS |\n|clientTransferProhibited||\n|serverTransferProhibited| 60 60 |\n\n\n\n|||\n|:---|:-|\n|pendingVerification| 5 5  ServerHold |\n|clientHold||\n|serverHold|.cn |\n|inactive| DNS DNS|\n|clientRenewProhibited/serverRenewProhibited||\n|pendingTransfer||\n|redemptionPeriod||\n|pendingDelete|/|\n","source":"_posts/domain-status-code.md","raw":"---\nlayout: post\ntitle: \npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-07-27 11:07:26\ntags: [ domain, statusCode ]\ncategories:\n    - 'domain'\n#permalink: '/2016/07/27/domain-status-code'\n---\n\n\n|||\n|:---|:-|\n|addPeriod| 5 5 |\n|ok|OK |\n\n\n\n|||\n|:---|:-|\n|clientDeleteProhibited||\n|serverDeleteProhibited||\n|clientUpdateProhibited|////DNS |\n|serverUpdateProhibited|////DNS |\n|clientTransferProhibited||\n|serverTransferProhibited| 60 60 |\n\n\n\n|||\n|:---|:-|\n|pendingVerification| 5 5  ServerHold |\n|clientHold||\n|serverHold|.cn |\n|inactive| DNS DNS|\n|clientRenewProhibited/serverRenewProhibited||\n|pendingTransfer||\n|redemptionPeriod||\n|pendingDelete|/|\n","slug":"domain-status-code","updated":"2019-10-21T06:57:43.047Z","photos":[],"link":"","_id":"ck42dyicq0018u9urk6r2fp4k","content":"<p></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">addPeriod</td>\n<td align=\"left\"> 5 5 </td>\n</tr>\n<tr>\n<td align=\"left\">ok</td>\n<td align=\"left\">OK </td>\n</tr>\n</tbody></table>\n<p></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">clientDeleteProhibited</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">serverDeleteProhibited</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">clientUpdateProhibited</td>\n<td align=\"left\">////DNS </td>\n</tr>\n<tr>\n<td align=\"left\">serverUpdateProhibited</td>\n<td align=\"left\">////DNS </td>\n</tr>\n<tr>\n<td align=\"left\">clientTransferProhibited</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">serverTransferProhibited</td>\n<td align=\"left\"> 60 60 </td>\n</tr>\n</tbody></table>\n<p></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">pendingVerification</td>\n<td align=\"left\"> 5 5  ServerHold </td>\n</tr>\n<tr>\n<td align=\"left\">clientHold</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">serverHold</td>\n<td align=\"left\">.cn </td>\n</tr>\n<tr>\n<td align=\"left\">inactive</td>\n<td align=\"left\"> DNS DNS</td>\n</tr>\n<tr>\n<td align=\"left\">clientRenewProhibited/serverRenewProhibited</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">pendingTransfer</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">redemptionPeriod</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">pendingDelete</td>\n<td align=\"left\">/</td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"excerpt":"","more":"<p></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">addPeriod</td>\n<td align=\"left\"> 5 5 </td>\n</tr>\n<tr>\n<td align=\"left\">ok</td>\n<td align=\"left\">OK </td>\n</tr>\n</tbody></table>\n<p></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">clientDeleteProhibited</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">serverDeleteProhibited</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">clientUpdateProhibited</td>\n<td align=\"left\">////DNS </td>\n</tr>\n<tr>\n<td align=\"left\">serverUpdateProhibited</td>\n<td align=\"left\">////DNS </td>\n</tr>\n<tr>\n<td align=\"left\">clientTransferProhibited</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">serverTransferProhibited</td>\n<td align=\"left\"> 60 60 </td>\n</tr>\n</tbody></table>\n<p></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">pendingVerification</td>\n<td align=\"left\"> 5 5  ServerHold </td>\n</tr>\n<tr>\n<td align=\"left\">clientHold</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">serverHold</td>\n<td align=\"left\">.cn </td>\n</tr>\n<tr>\n<td align=\"left\">inactive</td>\n<td align=\"left\"> DNS DNS</td>\n</tr>\n<tr>\n<td align=\"left\">clientRenewProhibited/serverRenewProhibited</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">pendingTransfer</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">redemptionPeriod</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">pendingDelete</td>\n<td align=\"left\">/</td>\n</tr>\n</tbody></table>\n"},{"layout":"post","title":"ZabbixItem Not Supported,\n","published":1,"author":"xiemx","comments":1,"date":"2016-11-22T20:11:59.000Z","_content":"\nZabbixItem\n`Item Not Supported`\nZabbix Agent`3`Item\n\n\n```shell\nvim /etc/zabbix/zabbix_agent.conf\n#Range: 1-30\nTimeout=8\n\n###zabbix-agent\n/etc/init.d/zabbix-agent restart\n```","source":"_posts/fix-zabbix-item-not-supported.md","raw":"---\nlayout: post\ntitle: >\n    ZabbixItem Not\n    Supported,\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-11-23 04:11:59\ntags: [ zabbix ]\ncategories:\n    - zabbix\n    - issue\n#permalink: '/2016/11/23/fix-zabbix-item-not-supported'\n---\n\nZabbixItem\n`Item Not Supported`\nZabbix Agent`3`Item\n\n\n```shell\nvim /etc/zabbix/zabbix_agent.conf\n#Range: 1-30\nTimeout=8\n\n###zabbix-agent\n/etc/init.d/zabbix-agent restart\n```","slug":"fix-zabbix-item-not-supported","updated":"2019-10-21T06:57:42.898Z","photos":[],"link":"","_id":"ck42dyicr001bu9urtidh4qd1","content":"<p>ZabbixItem<br><code>Item Not Supported</code><br>Zabbix Agent<code>3</code>Item</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/zabbix/zabbix_agent.conf</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">Range: 1-30</span></span><br><span class=\"line\">Timeout=8</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">##zabbix-agent</span></span></span><br><span class=\"line\">/etc/init.d/zabbix-agent restart</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>ZabbixItem<br><code>Item Not Supported</code><br>Zabbix Agent<code>3</code>Item</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/zabbix/zabbix_agent.conf</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">Range: 1-30</span></span><br><span class=\"line\">Timeout=8</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">##zabbix-agent</span></span></span><br><span class=\"line\">/etc/init.d/zabbix-agent restart</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"graphite_relay sharding","published":1,"author":"xiemx","comments":1,"date":"2017-09-07T22:09:47.000Z","_content":"\nstatsdmetricsgraphitegraphiteconsistent-hashingbackendconsistent-hashing\n\n\n\n```\ncarbon-relay.py serves two distinct purposes: replication and sharding.\n\nWhen running with RELAY_METHOD = rules, a carbon-relay.py instance can run in place of a carbon-cache.py server and relay all incoming metrics to multiple backend carbon-cache.pys running on different ports or hosts.\n\nIn RELAY_METHOD = consistent-hashing mode, a DESTINATIONS setting defines a sharding strategy across multiple carbon-cache.py backends. The same consistent hashing list can be provided to the graphite webapp via CARBONLINK_HOSTS to spread reads across the multiple backends.\ncarbon-cache instance.,carbon-cache.py instance\n\nconfig\n#####carbon.conf\n[cache:a]\nLINE_RECEIVER_PORT = 2203\nPICKLE_RECEIVER_PORT = 2204\nCACHE_QUERY_PORT = 7102\nLOCAL_DATA_DIR = /opt/graphite/storage/whisper_a/\n[cache:b]\nLINE_RECEIVER_PORT = 2205\nPICKLE_RECEIVER_PORT = 2206\nCACHE_QUERY_PORT = 7202\nLOCAL_DATA_DIR = /opt/graphite/storage/whisper_b/\n[relay]\nLINE_RECEIVER_INTERFACE = 0.0.0.0\nLINE_RECEIVER_PORT = 2003\nPICKLE_RECEIVER_INTERFACE = 0.0.0.0\nPICKLE_RECEIVER_PORT = 2004\nDESTINATIONS = 127.0.0.1:2204:a, 127.0.0.1:2206:b \n\n\ninstance:a\nxmx@xiemx-test:/opt/graphisudo ./carbon-cache.py --instance=a --config=/opt/graphite/conf/carbon.conf start\nStarting carbon-cache (instance a)\n\ninstance:b\nxmx@xiemx-test:/opt/graphite/bin$ sudo ./carbon-cache.py --instance=b --config=/opt/graphite/conf/carbon.conf start\nStarting carbon-cache (instance b)\n\nrelay:\nxmx@xiemx-test:/opt/graphite/conf$ sudo /opt/graphite/bin/carbon-relay.py --debug --config=/opt/graphite/conf/carbon.conf start\nStarting carbon-relay (instance a)\n08/09/2017 16:02:16 :: [console] Using sorted write strategy for cache\n08/09/2017 16:02:16 :: [clients] connecting to carbon daemon at 127.0.0.1:2204:a\n08/09/2017 16:02:16 :: [clients] connecting to carbon daemon at 127.0.0.1:2206:b\n08/09/2017 16:02:16 :: [console] twistd 16.4.1 (/usr/bin/python 2.7.6) starting up.\n08/09/2017 16:02:16 :: [console] reactor class: twisted.internet.epollreactor.EPollReactor.\n08/09/2017 16:02:16 :: [console] Starting factory CarbonClientFactory(127.0.0.1:2206:b)\n08/09/2017 16:02:16 :: [clients] CarbonClientFactory(127.0.0.1:2206:b)::startedConnecting (127.0.0.1:2206)\n08/09/2017 16:02:16 :: [console] Starting factory CarbonClientFactory(127.0.0.1:2204:a)\n08/09/2017 16:02:16 :: [clients] CarbonClientFactory(127.0.0.1:2204:a)::startedConnecting (127.0.0.1:2204)\n08/09/2017 16:02:16 :: [console] CarbonReceiverFactory starting on 2003\n08/09/2017 16:02:16 :: [console] Starting factory \n08/09/2017 16:02:16 :: [console] CarbonReceiverFactory starting on 2004\n08/09/2017 16:02:16 :: [console] Starting factory \n08/09/2017 16:02:16 :: [clients] CarbonClientProtocol(127.0.0.1:2206:b)::connectionMade\n08/09/2017 16:02:16 :: [clients] CarbonClientFactory(127.0.0.1:2206:b)::connectionMade (CarbonClientProtocol(127.0.0.1:2206:b))\n08/09/2017 16:02:16 :: [clients] Destination is up: 127.0.0.1:2206:b\n08/09/2017 16:02:16 :: [clients] CarbonClientProtocol(127.0.0.1:2204:a)::connectionMade\n08/09/2017 16:02:16 :: [clients] CarbonClientFactory(127.0.0.1:2204:a)::connectionMade (CarbonClientProtocol(127.0.0.1:2204:a))\n08/09/2017 16:02:16 :: [clients] Destination is up: 127.0.0.1:2204:a\n```\n\n\n\n5100key\n\n![img](/images/img_59b26b3126991.png)\n\n![img](/images/img_59b26b4437729.png)\n\nnode\n\n![img](/images/img_59b26b60dc7e7.png)\n\ngraphite-web\n\n```\nlocal_settings.py\nCARBONLINK_HOSTS = [\"127.0.0.1:7102:a\", \"127.0.0.1:7202:b\"]\n\ndjango\nsudo PYTHONPATH=/opt/graphite/webapp django-admin.py runserver 0.0.0.0:5000 --settings\n```","source":"_posts/graphite_relay-sharding.md","raw":"---\nlayout: post\ntitle: graphite_relay sharding\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-09-08 06:09:47\ntags: [ ]\ncategories:\n    - statsd\n    - graphite\n---\n\nstatsdmetricsgraphitegraphiteconsistent-hashingbackendconsistent-hashing\n\n\n\n```\ncarbon-relay.py serves two distinct purposes: replication and sharding.\n\nWhen running with RELAY_METHOD = rules, a carbon-relay.py instance can run in place of a carbon-cache.py server and relay all incoming metrics to multiple backend carbon-cache.pys running on different ports or hosts.\n\nIn RELAY_METHOD = consistent-hashing mode, a DESTINATIONS setting defines a sharding strategy across multiple carbon-cache.py backends. The same consistent hashing list can be provided to the graphite webapp via CARBONLINK_HOSTS to spread reads across the multiple backends.\ncarbon-cache instance.,carbon-cache.py instance\n\nconfig\n#####carbon.conf\n[cache:a]\nLINE_RECEIVER_PORT = 2203\nPICKLE_RECEIVER_PORT = 2204\nCACHE_QUERY_PORT = 7102\nLOCAL_DATA_DIR = /opt/graphite/storage/whisper_a/\n[cache:b]\nLINE_RECEIVER_PORT = 2205\nPICKLE_RECEIVER_PORT = 2206\nCACHE_QUERY_PORT = 7202\nLOCAL_DATA_DIR = /opt/graphite/storage/whisper_b/\n[relay]\nLINE_RECEIVER_INTERFACE = 0.0.0.0\nLINE_RECEIVER_PORT = 2003\nPICKLE_RECEIVER_INTERFACE = 0.0.0.0\nPICKLE_RECEIVER_PORT = 2004\nDESTINATIONS = 127.0.0.1:2204:a, 127.0.0.1:2206:b \n\n\ninstance:a\nxmx@xiemx-test:/opt/graphisudo ./carbon-cache.py --instance=a --config=/opt/graphite/conf/carbon.conf start\nStarting carbon-cache (instance a)\n\ninstance:b\nxmx@xiemx-test:/opt/graphite/bin$ sudo ./carbon-cache.py --instance=b --config=/opt/graphite/conf/carbon.conf start\nStarting carbon-cache (instance b)\n\nrelay:\nxmx@xiemx-test:/opt/graphite/conf$ sudo /opt/graphite/bin/carbon-relay.py --debug --config=/opt/graphite/conf/carbon.conf start\nStarting carbon-relay (instance a)\n08/09/2017 16:02:16 :: [console] Using sorted write strategy for cache\n08/09/2017 16:02:16 :: [clients] connecting to carbon daemon at 127.0.0.1:2204:a\n08/09/2017 16:02:16 :: [clients] connecting to carbon daemon at 127.0.0.1:2206:b\n08/09/2017 16:02:16 :: [console] twistd 16.4.1 (/usr/bin/python 2.7.6) starting up.\n08/09/2017 16:02:16 :: [console] reactor class: twisted.internet.epollreactor.EPollReactor.\n08/09/2017 16:02:16 :: [console] Starting factory CarbonClientFactory(127.0.0.1:2206:b)\n08/09/2017 16:02:16 :: [clients] CarbonClientFactory(127.0.0.1:2206:b)::startedConnecting (127.0.0.1:2206)\n08/09/2017 16:02:16 :: [console] Starting factory CarbonClientFactory(127.0.0.1:2204:a)\n08/09/2017 16:02:16 :: [clients] CarbonClientFactory(127.0.0.1:2204:a)::startedConnecting (127.0.0.1:2204)\n08/09/2017 16:02:16 :: [console] CarbonReceiverFactory starting on 2003\n08/09/2017 16:02:16 :: [console] Starting factory \n08/09/2017 16:02:16 :: [console] CarbonReceiverFactory starting on 2004\n08/09/2017 16:02:16 :: [console] Starting factory \n08/09/2017 16:02:16 :: [clients] CarbonClientProtocol(127.0.0.1:2206:b)::connectionMade\n08/09/2017 16:02:16 :: [clients] CarbonClientFactory(127.0.0.1:2206:b)::connectionMade (CarbonClientProtocol(127.0.0.1:2206:b))\n08/09/2017 16:02:16 :: [clients] Destination is up: 127.0.0.1:2206:b\n08/09/2017 16:02:16 :: [clients] CarbonClientProtocol(127.0.0.1:2204:a)::connectionMade\n08/09/2017 16:02:16 :: [clients] CarbonClientFactory(127.0.0.1:2204:a)::connectionMade (CarbonClientProtocol(127.0.0.1:2204:a))\n08/09/2017 16:02:16 :: [clients] Destination is up: 127.0.0.1:2204:a\n```\n\n\n\n5100key\n\n![img](/images/img_59b26b3126991.png)\n\n![img](/images/img_59b26b4437729.png)\n\nnode\n\n![img](/images/img_59b26b60dc7e7.png)\n\ngraphite-web\n\n```\nlocal_settings.py\nCARBONLINK_HOSTS = [\"127.0.0.1:7102:a\", \"127.0.0.1:7202:b\"]\n\ndjango\nsudo PYTHONPATH=/opt/graphite/webapp django-admin.py runserver 0.0.0.0:5000 --settings\n```","slug":"graphite_relay-sharding","updated":"2019-10-21T06:57:43.060Z","photos":[],"link":"","_id":"ck42dyics001du9urdlxrvzk2","content":"<p>statsdmetricsgraphitegraphiteconsistent-hashingbackendconsistent-hashing</p>\n<p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">carbon-relay.py serves two distinct purposes: replication and sharding.</span><br><span class=\"line\"></span><br><span class=\"line\">When running <span class=\"keyword\">with</span> RELAY_METHOD = <span class=\"keyword\">rules</span>, a carbon-relay.py <span class=\"keyword\">instance</span> can run <span class=\"keyword\">in</span> place <span class=\"keyword\">of</span> a carbon-cache.py <span class=\"keyword\">server</span> <span class=\"keyword\">and</span> relay <span class=\"keyword\">all</span> incoming metrics <span class=\"keyword\">to</span> multiple backend carbon-cache.pys running <span class=\"keyword\">on</span> different ports <span class=\"keyword\">or</span> hosts.</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">In</span> RELAY_METHOD = <span class=\"keyword\">consistent</span>-hashing <span class=\"keyword\">mode</span>, a DESTINATIONS setting defines a sharding strategy across multiple carbon-cache.py backends. The same <span class=\"keyword\">consistent</span> hashing <span class=\"keyword\">list</span> can be provided <span class=\"keyword\">to</span> the graphite webapp via CARBONLINK_HOSTS <span class=\"keyword\">to</span> spread <span class=\"keyword\">reads</span> across the multiple backends.</span><br><span class=\"line\">carbon-<span class=\"keyword\">cache</span> instance.,carbon-cache.py <span class=\"keyword\">instance</span></span><br><span class=\"line\"></span><br><span class=\"line\">config</span><br><span class=\"line\"><span class=\"comment\">#####carbon.conf</span></span><br><span class=\"line\">[<span class=\"keyword\">cache</span>:a]</span><br><span class=\"line\">LINE_RECEIVER_PORT = <span class=\"number\">2203</span></span><br><span class=\"line\">PICKLE_RECEIVER_PORT = <span class=\"number\">2204</span></span><br><span class=\"line\">CACHE_QUERY_PORT = <span class=\"number\">7102</span></span><br><span class=\"line\">LOCAL_DATA_DIR = /opt/graphite/<span class=\"keyword\">storage</span>/whisper_a/</span><br><span class=\"line\">[<span class=\"keyword\">cache</span>:b]</span><br><span class=\"line\">LINE_RECEIVER_PORT = <span class=\"number\">2205</span></span><br><span class=\"line\">PICKLE_RECEIVER_PORT = <span class=\"number\">2206</span></span><br><span class=\"line\">CACHE_QUERY_PORT = <span class=\"number\">7202</span></span><br><span class=\"line\">LOCAL_DATA_DIR = /opt/graphite/<span class=\"keyword\">storage</span>/whisper_b/</span><br><span class=\"line\">[relay]</span><br><span class=\"line\">LINE_RECEIVER_INTERFACE = <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span></span><br><span class=\"line\">LINE_RECEIVER_PORT = <span class=\"number\">2003</span></span><br><span class=\"line\">PICKLE_RECEIVER_INTERFACE = <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span></span><br><span class=\"line\">PICKLE_RECEIVER_PORT = <span class=\"number\">2004</span></span><br><span class=\"line\">DESTINATIONS = <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a, <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">instance</span>:a</span><br><span class=\"line\">xmx@xiemx-<span class=\"keyword\">test</span>:/opt/graphisudo ./carbon-cache.py <span class=\"comment\">--instance=a --config=/opt/graphite/conf/carbon.conf start</span></span><br><span class=\"line\"><span class=\"keyword\">Starting</span> carbon-<span class=\"keyword\">cache</span> (<span class=\"keyword\">instance</span> a)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">instance</span>:b</span><br><span class=\"line\">xmx@xiemx-<span class=\"keyword\">test</span>:/opt/graphite/<span class=\"keyword\">bin</span>$ sudo ./carbon-cache.py <span class=\"comment\">--instance=b --config=/opt/graphite/conf/carbon.conf start</span></span><br><span class=\"line\"><span class=\"keyword\">Starting</span> carbon-<span class=\"keyword\">cache</span> (<span class=\"keyword\">instance</span> b)</span><br><span class=\"line\"></span><br><span class=\"line\">relay:</span><br><span class=\"line\">xmx@xiemx-<span class=\"keyword\">test</span>:/opt/graphite/conf$ sudo /opt/graphite/<span class=\"keyword\">bin</span>/carbon-relay.py <span class=\"comment\">--debug --config=/opt/graphite/conf/carbon.conf start</span></span><br><span class=\"line\"><span class=\"keyword\">Starting</span> carbon-relay (<span class=\"keyword\">instance</span> a)</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] <span class=\"keyword\">Using</span> sorted write strategy <span class=\"keyword\">for</span> <span class=\"keyword\">cache</span></span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] connecting <span class=\"keyword\">to</span> carbon daemon <span class=\"keyword\">at</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] connecting <span class=\"keyword\">to</span> carbon daemon <span class=\"keyword\">at</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] twistd <span class=\"number\">16.4</span><span class=\"number\">.1</span> (/usr/<span class=\"keyword\">bin</span>/python <span class=\"number\">2.7</span><span class=\"number\">.6</span>) <span class=\"keyword\">starting</span> up.</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] reactor <span class=\"keyword\">class</span>: twisted.internet.epollreactor.EPollReactor.</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] <span class=\"keyword\">Starting</span> factory CarbonClientFactory(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b)</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] CarbonClientFactory(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b)::startedConnecting (<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>)</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] <span class=\"keyword\">Starting</span> factory CarbonClientFactory(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a)</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] CarbonClientFactory(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a)::startedConnecting (<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>)</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] CarbonReceiverFactory <span class=\"keyword\">starting</span> <span class=\"keyword\">on</span> <span class=\"number\">2003</span></span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] <span class=\"keyword\">Starting</span> factory </span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] CarbonReceiverFactory <span class=\"keyword\">starting</span> <span class=\"keyword\">on</span> <span class=\"number\">2004</span></span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] <span class=\"keyword\">Starting</span> factory </span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] CarbonClientProtocol(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b)::connectionMade</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] CarbonClientFactory(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b)::connectionMade (CarbonClientProtocol(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b))</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] Destination <span class=\"keyword\">is</span> up: <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] CarbonClientProtocol(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a)::connectionMade</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] CarbonClientFactory(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a)::connectionMade (CarbonClientProtocol(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a))</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] Destination <span class=\"keyword\">is</span> up: <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p>5100key</p>\n<p><img src=\"/images/img_59b26b3126991.png\" alt=\"img\"></p>\n<p><img src=\"/images/img_59b26b4437729.png\" alt=\"img\"></p>\n<p>node</p>\n<p><img src=\"/images/img_59b26b60dc7e7.png\" alt=\"img\"></p>\n<p>graphite-web</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">local_settings.py</span><br><span class=\"line\">CARBONLINK_HOSTS = [<span class=\"string\">\"127.0.0.1:7102:a\"</span>, <span class=\"string\">\"127.0.0.1:7202:b\"</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">django</span><br><span class=\"line\">sudo PYTHONPATH=/opt/graphite/webapp django-admin<span class=\"selector-class\">.py</span> runserver <span class=\"number\">0.0</span>.<span class=\"number\">0.0</span>:<span class=\"number\">5000</span> --settings</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>statsdmetricsgraphitegraphiteconsistent-hashingbackendconsistent-hashing</p>\n<p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">carbon-relay.py serves two distinct purposes: replication and sharding.</span><br><span class=\"line\"></span><br><span class=\"line\">When running <span class=\"keyword\">with</span> RELAY_METHOD = <span class=\"keyword\">rules</span>, a carbon-relay.py <span class=\"keyword\">instance</span> can run <span class=\"keyword\">in</span> place <span class=\"keyword\">of</span> a carbon-cache.py <span class=\"keyword\">server</span> <span class=\"keyword\">and</span> relay <span class=\"keyword\">all</span> incoming metrics <span class=\"keyword\">to</span> multiple backend carbon-cache.pys running <span class=\"keyword\">on</span> different ports <span class=\"keyword\">or</span> hosts.</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">In</span> RELAY_METHOD = <span class=\"keyword\">consistent</span>-hashing <span class=\"keyword\">mode</span>, a DESTINATIONS setting defines a sharding strategy across multiple carbon-cache.py backends. The same <span class=\"keyword\">consistent</span> hashing <span class=\"keyword\">list</span> can be provided <span class=\"keyword\">to</span> the graphite webapp via CARBONLINK_HOSTS <span class=\"keyword\">to</span> spread <span class=\"keyword\">reads</span> across the multiple backends.</span><br><span class=\"line\">carbon-<span class=\"keyword\">cache</span> instance.,carbon-cache.py <span class=\"keyword\">instance</span></span><br><span class=\"line\"></span><br><span class=\"line\">config</span><br><span class=\"line\"><span class=\"comment\">#####carbon.conf</span></span><br><span class=\"line\">[<span class=\"keyword\">cache</span>:a]</span><br><span class=\"line\">LINE_RECEIVER_PORT = <span class=\"number\">2203</span></span><br><span class=\"line\">PICKLE_RECEIVER_PORT = <span class=\"number\">2204</span></span><br><span class=\"line\">CACHE_QUERY_PORT = <span class=\"number\">7102</span></span><br><span class=\"line\">LOCAL_DATA_DIR = /opt/graphite/<span class=\"keyword\">storage</span>/whisper_a/</span><br><span class=\"line\">[<span class=\"keyword\">cache</span>:b]</span><br><span class=\"line\">LINE_RECEIVER_PORT = <span class=\"number\">2205</span></span><br><span class=\"line\">PICKLE_RECEIVER_PORT = <span class=\"number\">2206</span></span><br><span class=\"line\">CACHE_QUERY_PORT = <span class=\"number\">7202</span></span><br><span class=\"line\">LOCAL_DATA_DIR = /opt/graphite/<span class=\"keyword\">storage</span>/whisper_b/</span><br><span class=\"line\">[relay]</span><br><span class=\"line\">LINE_RECEIVER_INTERFACE = <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span></span><br><span class=\"line\">LINE_RECEIVER_PORT = <span class=\"number\">2003</span></span><br><span class=\"line\">PICKLE_RECEIVER_INTERFACE = <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span></span><br><span class=\"line\">PICKLE_RECEIVER_PORT = <span class=\"number\">2004</span></span><br><span class=\"line\">DESTINATIONS = <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a, <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">instance</span>:a</span><br><span class=\"line\">xmx@xiemx-<span class=\"keyword\">test</span>:/opt/graphisudo ./carbon-cache.py <span class=\"comment\">--instance=a --config=/opt/graphite/conf/carbon.conf start</span></span><br><span class=\"line\"><span class=\"keyword\">Starting</span> carbon-<span class=\"keyword\">cache</span> (<span class=\"keyword\">instance</span> a)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">instance</span>:b</span><br><span class=\"line\">xmx@xiemx-<span class=\"keyword\">test</span>:/opt/graphite/<span class=\"keyword\">bin</span>$ sudo ./carbon-cache.py <span class=\"comment\">--instance=b --config=/opt/graphite/conf/carbon.conf start</span></span><br><span class=\"line\"><span class=\"keyword\">Starting</span> carbon-<span class=\"keyword\">cache</span> (<span class=\"keyword\">instance</span> b)</span><br><span class=\"line\"></span><br><span class=\"line\">relay:</span><br><span class=\"line\">xmx@xiemx-<span class=\"keyword\">test</span>:/opt/graphite/conf$ sudo /opt/graphite/<span class=\"keyword\">bin</span>/carbon-relay.py <span class=\"comment\">--debug --config=/opt/graphite/conf/carbon.conf start</span></span><br><span class=\"line\"><span class=\"keyword\">Starting</span> carbon-relay (<span class=\"keyword\">instance</span> a)</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] <span class=\"keyword\">Using</span> sorted write strategy <span class=\"keyword\">for</span> <span class=\"keyword\">cache</span></span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] connecting <span class=\"keyword\">to</span> carbon daemon <span class=\"keyword\">at</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] connecting <span class=\"keyword\">to</span> carbon daemon <span class=\"keyword\">at</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] twistd <span class=\"number\">16.4</span><span class=\"number\">.1</span> (/usr/<span class=\"keyword\">bin</span>/python <span class=\"number\">2.7</span><span class=\"number\">.6</span>) <span class=\"keyword\">starting</span> up.</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] reactor <span class=\"keyword\">class</span>: twisted.internet.epollreactor.EPollReactor.</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] <span class=\"keyword\">Starting</span> factory CarbonClientFactory(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b)</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] CarbonClientFactory(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b)::startedConnecting (<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>)</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] <span class=\"keyword\">Starting</span> factory CarbonClientFactory(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a)</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] CarbonClientFactory(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a)::startedConnecting (<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>)</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] CarbonReceiverFactory <span class=\"keyword\">starting</span> <span class=\"keyword\">on</span> <span class=\"number\">2003</span></span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] <span class=\"keyword\">Starting</span> factory </span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] CarbonReceiverFactory <span class=\"keyword\">starting</span> <span class=\"keyword\">on</span> <span class=\"number\">2004</span></span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [console] <span class=\"keyword\">Starting</span> factory </span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] CarbonClientProtocol(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b)::connectionMade</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] CarbonClientFactory(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b)::connectionMade (CarbonClientProtocol(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b))</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] Destination <span class=\"keyword\">is</span> up: <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2206</span>:b</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] CarbonClientProtocol(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a)::connectionMade</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] CarbonClientFactory(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a)::connectionMade (CarbonClientProtocol(<span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a))</span><br><span class=\"line\"><span class=\"number\">08</span>/<span class=\"number\">09</span>/<span class=\"number\">2017</span> <span class=\"number\">16</span>:<span class=\"number\">02</span>:<span class=\"number\">16</span> :: [clients] Destination <span class=\"keyword\">is</span> up: <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">2204</span>:a</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p>5100key</p>\n<p><img src=\"/images/img_59b26b3126991.png\" alt=\"img\"></p>\n<p><img src=\"/images/img_59b26b4437729.png\" alt=\"img\"></p>\n<p>node</p>\n<p><img src=\"/images/img_59b26b60dc7e7.png\" alt=\"img\"></p>\n<p>graphite-web</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">local_settings.py</span><br><span class=\"line\">CARBONLINK_HOSTS = [<span class=\"string\">\"127.0.0.1:7102:a\"</span>, <span class=\"string\">\"127.0.0.1:7202:b\"</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">django</span><br><span class=\"line\">sudo PYTHONPATH=/opt/graphite/webapp django-admin<span class=\"selector-class\">.py</span> runserver <span class=\"number\">0.0</span>.<span class=\"number\">0.0</span>:<span class=\"number\">5000</span> --settings</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"http cache","published":1,"author":"xiemx","comments":1,"date":"2019-05-13T03:05:02.000Z","_content":"#### **cache**\n\n![img](/images/image.png)\n\n### no-cacheno-store\n\nno-cache  (ETag)no-cache \n\nno-store \n\n### public private\n\npublic HTTP  publicmax-age\n\nprivate  HTML  CDN \n\n### max-age\n\n max-age=60 60 \n\n##  ETag \n\n\"ETag\" http() 120  max-age, \"If-None-Match\"http Etag304\n\n![HTTP Cache-Control ](/images/http-cache-control.png)\n\n https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching","source":"_posts/http-cache.md","raw":"---\nlayout: post\ntitle: http cache\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2019-05-13 11:05:02\ntags: [ http, cache ]\ncategories:\n    - http\n---\n#### **cache**\n\n![img](/images/image.png)\n\n### no-cacheno-store\n\nno-cache  (ETag)no-cache \n\nno-store \n\n### public private\n\npublic HTTP  publicmax-age\n\nprivate  HTML  CDN \n\n### max-age\n\n max-age=60 60 \n\n##  ETag \n\n\"ETag\" http() 120  max-age, \"If-None-Match\"http Etag304\n\n![HTTP Cache-Control ](/images/http-cache-control.png)\n\n https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching","slug":"http-cache","updated":"2019-10-21T06:57:42.935Z","photos":[],"link":"","_id":"ck42dyict001eu9urhj3axxnw","content":"<h4 id=\"cache\"><a href=\"#cache\" class=\"headerlink\" title=\"cache\"></a><strong>cache</strong></h4><p><img src=\"/images/image.png\" alt=\"img\"></p>\n<h3 id=\"no-cacheno-store\"><a href=\"#no-cacheno-store\" class=\"headerlink\" title=\"no-cacheno-store\"></a>no-cacheno-store</h3><p>no-cache  (ETag)no-cache </p>\n<p>no-store </p>\n<h3 id=\"public-private\"><a href=\"#public-private\" class=\"headerlink\" title=\"public private\"></a>public private</h3><p>public HTTP  publicmax-age</p>\n<p>private  HTML  CDN </p>\n<h3 id=\"max-age\"><a href=\"#max-age\" class=\"headerlink\" title=\"max-age\"></a>max-age</h3><p> max-age=60 60 </p>\n<h2 id=\"-ETag-\"><a href=\"#-ETag-\" class=\"headerlink\" title=\" ETag \"></a> ETag </h2><p>ETag http() 120  max-age, If-None-Matchhttp Etag304</p>\n<p><img src=\"/images/http-cache-control.png\" alt=\"HTTP Cache-Control \"></p>\n<p> <a href=\"https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching\" target=\"_blank\" rel=\"noopener\">https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"cache\"><a href=\"#cache\" class=\"headerlink\" title=\"cache\"></a><strong>cache</strong></h4><p><img src=\"/images/image.png\" alt=\"img\"></p>\n<h3 id=\"no-cacheno-store\"><a href=\"#no-cacheno-store\" class=\"headerlink\" title=\"no-cacheno-store\"></a>no-cacheno-store</h3><p>no-cache  (ETag)no-cache </p>\n<p>no-store </p>\n<h3 id=\"public-private\"><a href=\"#public-private\" class=\"headerlink\" title=\"public private\"></a>public private</h3><p>public HTTP  publicmax-age</p>\n<p>private  HTML  CDN </p>\n<h3 id=\"max-age\"><a href=\"#max-age\" class=\"headerlink\" title=\"max-age\"></a>max-age</h3><p> max-age=60 60 </p>\n<h2 id=\"-ETag-\"><a href=\"#-ETag-\" class=\"headerlink\" title=\" ETag \"></a> ETag </h2><p>ETag http() 120  max-age, If-None-Matchhttp Etag304</p>\n<p><img src=\"/images/http-cache-control.png\" alt=\"HTTP Cache-Control \"></p>\n<p> <a href=\"https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching\" target=\"_blank\" rel=\"noopener\">https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching</a></p>\n"},{"layout":"post","title":"","published":1,"author":"xiemx","comments":1,"date":"2015-08-23T18:08:15.000Z","_content":"\n![image-20191021135643975](/images/image-20191021135643975.png)\n\n### 1\n\n1. Internet\n![image-20191021135659882](/images/image-20191021135659882.png)\n\n2. ()\n![image-20191021135714997](/images/image-20191021135714997.png)\n\n### 2\n\n1. \n![image-20191021135724279](/images/image-20191021135724279.png)\n\n","source":"_posts/iis-auth.md","raw":"---\nlayout: post\ntitle: \npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-08-24 02:08:15\ntags: [ windows, iis]\ncategories:\n    - windows\n    - iis\n---\n\n![image-20191021135643975](/images/image-20191021135643975.png)\n\n### 1\n\n1. Internet\n![image-20191021135659882](/images/image-20191021135659882.png)\n\n2. ()\n![image-20191021135714997](/images/image-20191021135714997.png)\n\n### 2\n\n1. \n![image-20191021135724279](/images/image-20191021135724279.png)\n\n","slug":"iis-auth","updated":"2019-10-21T09:01:51.365Z","photos":[],"link":"","_id":"ck42dyicu001hu9uri210uk9c","content":"<p><br><img src=\"/images/image-20191021135643975.png\" alt=\"image-20191021135643975\"></p>\n<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><ol>\n<li><p>Internet<br><img src=\"/images/image-20191021135659882.png\" alt=\"image-20191021135659882\"></p>\n</li>\n<li><p>()<br><img src=\"/images/image-20191021135714997.png\" alt=\"image-20191021135714997\"></p>\n</li>\n</ol>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><ol>\n<li><br><img src=\"/images/image-20191021135724279.png\" alt=\"image-20191021135724279\"></li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<p><br><img src=\"/images/image-20191021135643975.png\" alt=\"image-20191021135643975\"></p>\n<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><ol>\n<li><p>Internet<br><img src=\"/images/image-20191021135659882.png\" alt=\"image-20191021135659882\"></p>\n</li>\n<li><p>()<br><img src=\"/images/image-20191021135714997.png\" alt=\"image-20191021135714997\"></p>\n</li>\n</ol>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><ol>\n<li><br><img src=\"/images/image-20191021135724279.png\" alt=\"image-20191021135724279\"></li>\n</ol>\n"},{"layout":"post","title":"iis","published":1,"author":"xiemx","comments":1,"date":"2017-03-31T02:03:43.000Z","_content":"\n1. IIS\n\n![img](/images/img_58ddc18a1993a.png)\n\n2. 8administration.configapplicationHost.configconfigEncKey.key33IIS\n\n![img](/images/img_58ddc1b2d8078.png)\n\n3. IISadministration.configapplicationHost.configconfigEncKey.key3IISIIS\n\n![img](/images/img_58ddc20c6f8c3.png)\n\n4. IIS ","source":"_posts/iis-backup-restore.md","raw":"---\nlayout: post\ntitle: iis\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-03-31 10:03:43\ntags: [ windows, iis, webserver]\ncategories:\n    - windows\n    - iis\n---\n\n1. IIS\n\n![img](/images/img_58ddc18a1993a.png)\n\n2. 8administration.configapplicationHost.configconfigEncKey.key33IIS\n\n![img](/images/img_58ddc1b2d8078.png)\n\n3. IISadministration.configapplicationHost.configconfigEncKey.key3IISIIS\n\n![img](/images/img_58ddc20c6f8c3.png)\n\n4. IIS ","slug":"iis-backup-restore","updated":"2019-10-21T06:57:43.060Z","photos":[],"link":"","_id":"ck42dyicw001ju9urrx4klupl","content":"<ol>\n<li>IIS</li>\n</ol>\n<p><img src=\"/images/img_58ddc18a1993a.png\" alt=\"img\"></p>\n<ol start=\"2\">\n<li>8administration.configapplicationHost.configconfigEncKey.key33IIS</li>\n</ol>\n<p><img src=\"/images/img_58ddc1b2d8078.png\" alt=\"img\"></p>\n<ol start=\"3\">\n<li>IISadministration.configapplicationHost.configconfigEncKey.key3IISIIS</li>\n</ol>\n<p><img src=\"/images/img_58ddc20c6f8c3.png\" alt=\"img\"></p>\n<ol start=\"4\">\n<li>IIS </li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li>IIS</li>\n</ol>\n<p><img src=\"/images/img_58ddc18a1993a.png\" alt=\"img\"></p>\n<ol start=\"2\">\n<li>8administration.configapplicationHost.configconfigEncKey.key33IIS</li>\n</ol>\n<p><img src=\"/images/img_58ddc1b2d8078.png\" alt=\"img\"></p>\n<ol start=\"3\">\n<li>IISadministration.configapplicationHost.configconfigEncKey.key3IISIIS</li>\n</ol>\n<p><img src=\"/images/img_58ddc20c6f8c3.png\" alt=\"img\"></p>\n<ol start=\"4\">\n<li>IIS </li>\n</ol>\n"},{"layout":"post","title":"iis7","published":1,"author":"xiemx","comments":1,"date":"2017-01-16T21:01:45.000Z","_content":"1.pid\n\n![img](/images/img_587ddd23c02a3.png)\n\n2.pidapplicationpool\n\n```\n%windir%/system32/inetsrv/appcmd list wp \n```\n\n![img](/images/img_587dde19b6b47.png)","source":"_posts/iis-get-pid.md","raw":"---\nlayout: post\ntitle: iis7\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-01-17 05:01:45\ntags: [ windows, iis, webserver ]\ncategories:\n    - windows\n    - iis\n---\n1.pid\n\n![img](/images/img_587ddd23c02a3.png)\n\n2.pidapplicationpool\n\n```\n%windir%/system32/inetsrv/appcmd list wp \n```\n\n![img](/images/img_587dde19b6b47.png)","slug":"iis-get-pid","updated":"2019-10-21T06:57:42.478Z","photos":[],"link":"","_id":"ck42dyicx001mu9urdb2amxe5","content":"<p>1.pid</p>\n<p><img src=\"/images/img_587ddd23c02a3.png\" alt=\"img\"></p>\n<p>2.pidapplicationpool</p>\n<figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">%<span class=\"selector-tag\">windir</span></span>%/system32/inetsrv/appcmd list wp</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/images/img_587dde19b6b47.png\" alt=\"img\"></p>\n","site":{"data":{}},"excerpt":"","more":"<p>1.pid</p>\n<p><img src=\"/images/img_587ddd23c02a3.png\" alt=\"img\"></p>\n<p>2.pidapplicationpool</p>\n<figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">%<span class=\"selector-tag\">windir</span></span>%/system32/inetsrv/appcmd list wp</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/images/img_587dde19b6b47.png\" alt=\"img\"></p>\n"},{"layout":"post","title":"URLRewriterConfigIIS","published":1,"author":"xiemx","comments":1,"date":"2015-08-21T02:08:51.000Z","_content":"\nconfig\n\n```xml\n <configSections>\n\n   <section name=\"RewriterConfig\" requirePermission=\"false\" type=\"URLRewriter.Config.RewriterConfigSerializerSectionHandler, URLRewriter\"/>\n\n </configSections>\n\n <system.web>\n\n   <httpModules>\n     <add type=\"URLRewriter.ModuleRewriter, URLRewriter\" name=\"ModuleRewriter\"/>\n\n   </httpModules>\n\n </system.web>\n\n```\n\nIIS\n\n 1.IIS\n\n 2.\n\n 3.\n\n 4./\n\n\taspnet_isapi.dllDLLC:\\WINDOWS\\Microsoft.NET\\Framework\\v2.0.50727(\n\n 5..html\n\n 6.GET,POST\n\n 7.\n\n![image-20190917165314461](/images/image-20190917165314461.png)","source":"_posts/iis-set-urlrewrite.md","raw":"---\nlayout: post\ntitle: URLRewriterConfigIIS\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-08-21 10:08:51\ntags: [ windows, iis]\ncategories:\n    - 'iis'\n    - 'windows'\n#permalink: '/2015/08/21/iis-set-urlrewrite'\n---\n\nconfig\n\n```xml\n <configSections>\n\n   <section name=\"RewriterConfig\" requirePermission=\"false\" type=\"URLRewriter.Config.RewriterConfigSerializerSectionHandler, URLRewriter\"/>\n\n </configSections>\n\n <system.web>\n\n   <httpModules>\n     <add type=\"URLRewriter.ModuleRewriter, URLRewriter\" name=\"ModuleRewriter\"/>\n\n   </httpModules>\n\n </system.web>\n\n```\n\nIIS\n\n 1.IIS\n\n 2.\n\n 3.\n\n 4./\n\n\taspnet_isapi.dllDLLC:\\WINDOWS\\Microsoft.NET\\Framework\\v2.0.50727(\n\n 5..html\n\n 6.GET,POST\n\n 7.\n\n![image-20190917165314461](/images/image-20190917165314461.png)","slug":"iis-set-urlrewrite","updated":"2019-10-21T08:59:59.559Z","photos":[],"link":"","_id":"ck42dyicy001qu9urk625v11n","content":"<p>config</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configSections</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">section</span> <span class=\"attr\">name</span>=<span class=\"string\">\"RewriterConfig\"</span> <span class=\"attr\">requirePermission</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"URLRewriter.Config.RewriterConfigSerializerSectionHandler, URLRewriter\"</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configSections</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">system.web</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">httpModules</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">type</span>=<span class=\"string\">\"URLRewriter.ModuleRewriter, URLRewriter\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ModuleRewriter\"</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">httpModules</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">system.web</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>IIS</p>\n<p> 1.IIS</p>\n<p> 2.</p>\n<p> 3.</p>\n<p> 4./</p>\n<p>    aspnet_isapi.dllDLLC:\\WINDOWS\\Microsoft.NET\\Framework\\v2.0.50727(</p>\n<p> 5..html</p>\n<p> 6.GET,POST</p>\n<p> 7.</p>\n<p><img src=\"/images/image-20190917165314461.png\" alt=\"image-20190917165314461\"></p>\n","site":{"data":{}},"excerpt":"","more":"<p>config</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configSections</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">section</span> <span class=\"attr\">name</span>=<span class=\"string\">\"RewriterConfig\"</span> <span class=\"attr\">requirePermission</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"URLRewriter.Config.RewriterConfigSerializerSectionHandler, URLRewriter\"</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configSections</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">system.web</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">httpModules</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">add</span> <span class=\"attr\">type</span>=<span class=\"string\">\"URLRewriter.ModuleRewriter, URLRewriter\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ModuleRewriter\"</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">httpModules</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">system.web</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>IIS</p>\n<p> 1.IIS</p>\n<p> 2.</p>\n<p> 3.</p>\n<p> 4./</p>\n<p>    aspnet_isapi.dllDLLC:\\WINDOWS\\Microsoft.NET\\Framework\\v2.0.50727(</p>\n<p> 5..html</p>\n<p> 6.GET,POST</p>\n<p> 7.</p>\n<p><img src=\"/images/image-20190917165314461.png\" alt=\"image-20190917165314461\"></p>\n"},{"layout":"post","title":"iptables count","published":1,"author":"xiemx","comments":1,"date":"2017-04-10T21:04:23.000Z","_content":"```\n\n  --verbose\t-v\t\tverbose mode\n  --zero    -Z [chain [rulenum]]  Zero counters in chain or all chains\n\n\np-hsg-cache-6% sudo iptables -nL -v -t nat\nChain PREROUTING (policy ACCEPT 50741 packets, 2370K bytes)\n pkts bytes target     prot opt in     out     source               destination\n  436 22672 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6379 to:192.168.10.82:6379\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6380 to:192.168.10.81:6380\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6381 to:192.168.10.81:6381\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6382 to:192.168.10.81:6382\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6383 to:192.168.10.81:6383\n\nChain INPUT (policy ACCEPT 18988 packets, 1082K bytes)\n pkts bytes target     prot opt in     out     source               destination\n\nChain OUTPUT (policy ACCEPT 10532 packets, 549K bytes)\n pkts bytes target     prot opt in     out     source               destination\n\nChain POSTROUTING (policy ACCEPT 0 packets, 0 bytes)\n pkts bytes target     prot opt in     out     source               destination\n10968  572K MASQUERADE  all  --  *      *       0.0.0.0/0            0.0.0.0/0\n\np-hsg-cache-6% sudo iptables -Z -t nat\n\np-hsg-cache-6% sudo iptables -nL -v -t nat\nChain PREROUTING (policy ACCEPT 12 packets, 624 bytes)\n pkts bytes target     prot opt in     out     source               destination\n    1    52 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6379 to:192.168.10.82:6379\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6380 to:192.168.10.81:6380\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6381 to:192.168.10.81:6381\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6382 to:192.168.10.81:6382\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6383 to:192.168.10.81:6383\n\nChain INPUT (policy ACCEPT 12 packets, 624 bytes)\n pkts bytes target     prot opt in     out     source               destination\n\nChain OUTPUT (policy ACCEPT 6 packets, 312 bytes)\n pkts bytes target     prot opt in     out     source               destination\n\nChain POSTROUTING (policy ACCEPT 0 packets, 0 bytes)\n pkts bytes target     prot opt in     out     source               destination\n    7   364 MASQUERADE  all  --  *      *       0.0.0.0/0            0.0.0.0/0\np-hsg-cache-6%\n\n```","source":"_posts/iptables-count.md","raw":"---\nlayout: post\ntitle: iptables count\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-04-11 05:04:23\ntags: [ linux, iptables ]\ncategories:\n    - linux\n---\n```\n\n  --verbose\t-v\t\tverbose mode\n  --zero    -Z [chain [rulenum]]  Zero counters in chain or all chains\n\n\np-hsg-cache-6% sudo iptables -nL -v -t nat\nChain PREROUTING (policy ACCEPT 50741 packets, 2370K bytes)\n pkts bytes target     prot opt in     out     source               destination\n  436 22672 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6379 to:192.168.10.82:6379\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6380 to:192.168.10.81:6380\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6381 to:192.168.10.81:6381\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6382 to:192.168.10.81:6382\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6383 to:192.168.10.81:6383\n\nChain INPUT (policy ACCEPT 18988 packets, 1082K bytes)\n pkts bytes target     prot opt in     out     source               destination\n\nChain OUTPUT (policy ACCEPT 10532 packets, 549K bytes)\n pkts bytes target     prot opt in     out     source               destination\n\nChain POSTROUTING (policy ACCEPT 0 packets, 0 bytes)\n pkts bytes target     prot opt in     out     source               destination\n10968  572K MASQUERADE  all  --  *      *       0.0.0.0/0            0.0.0.0/0\n\np-hsg-cache-6% sudo iptables -Z -t nat\n\np-hsg-cache-6% sudo iptables -nL -v -t nat\nChain PREROUTING (policy ACCEPT 12 packets, 624 bytes)\n pkts bytes target     prot opt in     out     source               destination\n    1    52 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6379 to:192.168.10.82:6379\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6380 to:192.168.10.81:6380\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6381 to:192.168.10.81:6381\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6382 to:192.168.10.81:6382\n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            192.168.10.226       tcp dpt:6383 to:192.168.10.81:6383\n\nChain INPUT (policy ACCEPT 12 packets, 624 bytes)\n pkts bytes target     prot opt in     out     source               destination\n\nChain OUTPUT (policy ACCEPT 6 packets, 312 bytes)\n pkts bytes target     prot opt in     out     source               destination\n\nChain POSTROUTING (policy ACCEPT 0 packets, 0 bytes)\n pkts bytes target     prot opt in     out     source               destination\n    7   364 MASQUERADE  all  --  *      *       0.0.0.0/0            0.0.0.0/0\np-hsg-cache-6%\n\n```","slug":"iptables-count","updated":"2019-10-21T06:57:42.886Z","photos":[],"link":"","_id":"ck42dyicz001tu9ur7bv6ouxw","content":"<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">  --verbose\t-v\t\tverbose mode</span><br><span class=\"line\">  --zero    -Z [chain [rulenum]]  Zero counters <span class=\"keyword\">in</span> chain <span class=\"keyword\">or</span> all chains</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">p-hsg-cache<span class=\"number\">-6</span>% sudo iptables -nL -v -t nat</span><br><span class=\"line\">Chain PREROUTING (policy ACCEPT <span class=\"number\">50741</span> packets, <span class=\"number\">2370</span>K bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\">  <span class=\"number\">436</span> <span class=\"number\">22672</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6379</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.82</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6380</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6380</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6381</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6381</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6382</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6382</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6383</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6383</span></span><br><span class=\"line\"></span><br><span class=\"line\">Chain INPUT (policy ACCEPT <span class=\"number\">18988</span> packets, <span class=\"number\">1082</span>K bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\"></span><br><span class=\"line\">Chain OUTPUT (policy ACCEPT <span class=\"number\">10532</span> packets, <span class=\"number\">549</span>K bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\"></span><br><span class=\"line\">Chain POSTROUTING (policy ACCEPT <span class=\"number\">0</span> packets, <span class=\"number\">0</span> bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\"><span class=\"number\">10968</span>  <span class=\"number\">572</span>K MASQUERADE  all  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">p-hsg-cache<span class=\"number\">-6</span>% sudo iptables -Z -t nat</span><br><span class=\"line\"></span><br><span class=\"line\">p-hsg-cache<span class=\"number\">-6</span>% sudo iptables -nL -v -t nat</span><br><span class=\"line\">Chain PREROUTING (policy ACCEPT <span class=\"number\">12</span> packets, <span class=\"number\">624</span> bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\">    <span class=\"number\">1</span>    <span class=\"number\">52</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6379</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.82</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6380</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6380</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6381</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6381</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6382</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6382</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6383</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6383</span></span><br><span class=\"line\"></span><br><span class=\"line\">Chain INPUT (policy ACCEPT <span class=\"number\">12</span> packets, <span class=\"number\">624</span> bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\"></span><br><span class=\"line\">Chain OUTPUT (policy ACCEPT <span class=\"number\">6</span> packets, <span class=\"number\">312</span> bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\"></span><br><span class=\"line\">Chain POSTROUTING (policy ACCEPT <span class=\"number\">0</span> packets, <span class=\"number\">0</span> bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\">    <span class=\"number\">7</span>   <span class=\"number\">364</span> MASQUERADE  all  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span></span><br><span class=\"line\">p-hsg-cache<span class=\"number\">-6</span>%</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">  --verbose\t-v\t\tverbose mode</span><br><span class=\"line\">  --zero    -Z [chain [rulenum]]  Zero counters <span class=\"keyword\">in</span> chain <span class=\"keyword\">or</span> all chains</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">p-hsg-cache<span class=\"number\">-6</span>% sudo iptables -nL -v -t nat</span><br><span class=\"line\">Chain PREROUTING (policy ACCEPT <span class=\"number\">50741</span> packets, <span class=\"number\">2370</span>K bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\">  <span class=\"number\">436</span> <span class=\"number\">22672</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6379</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.82</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6380</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6380</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6381</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6381</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6382</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6382</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6383</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6383</span></span><br><span class=\"line\"></span><br><span class=\"line\">Chain INPUT (policy ACCEPT <span class=\"number\">18988</span> packets, <span class=\"number\">1082</span>K bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\"></span><br><span class=\"line\">Chain OUTPUT (policy ACCEPT <span class=\"number\">10532</span> packets, <span class=\"number\">549</span>K bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\"></span><br><span class=\"line\">Chain POSTROUTING (policy ACCEPT <span class=\"number\">0</span> packets, <span class=\"number\">0</span> bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\"><span class=\"number\">10968</span>  <span class=\"number\">572</span>K MASQUERADE  all  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">p-hsg-cache<span class=\"number\">-6</span>% sudo iptables -Z -t nat</span><br><span class=\"line\"></span><br><span class=\"line\">p-hsg-cache<span class=\"number\">-6</span>% sudo iptables -nL -v -t nat</span><br><span class=\"line\">Chain PREROUTING (policy ACCEPT <span class=\"number\">12</span> packets, <span class=\"number\">624</span> bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\">    <span class=\"number\">1</span>    <span class=\"number\">52</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6379</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.82</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6380</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6380</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6381</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6381</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6382</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6382</span></span><br><span class=\"line\">    <span class=\"number\">0</span>     <span class=\"number\">0</span> DNAT       tcp  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.226</span>       tcp dpt:<span class=\"number\">6383</span> to:<span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.81</span>:<span class=\"number\">6383</span></span><br><span class=\"line\"></span><br><span class=\"line\">Chain INPUT (policy ACCEPT <span class=\"number\">12</span> packets, <span class=\"number\">624</span> bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\"></span><br><span class=\"line\">Chain OUTPUT (policy ACCEPT <span class=\"number\">6</span> packets, <span class=\"number\">312</span> bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\"></span><br><span class=\"line\">Chain POSTROUTING (policy ACCEPT <span class=\"number\">0</span> packets, <span class=\"number\">0</span> bytes)</span><br><span class=\"line\"> pkts bytes target     prot opt <span class=\"keyword\">in</span>     <span class=\"keyword\">out</span>     source               destination</span><br><span class=\"line\">    <span class=\"number\">7</span>   <span class=\"number\">364</span> MASQUERADE  all  --  *      *       <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span>            <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.0</span>/<span class=\"number\">0</span></span><br><span class=\"line\">p-hsg-cache<span class=\"number\">-6</span>%</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"ISCSI","published":1,"author":"xiemx","comments":1,"date":"2016-02-17T20:02:11.000Z","_content":"iscsisan\n\n[![san](/images/san.png)](http://www.xiemx.com/wp-content/uploads/2016/02/san.png)\n\n#### iSCSI \n*  I/O (Initiator)\n*  I/O (Target)\n\n#### iSCSI\n\n* target\n* initiator\n* initiator\n* initiator\n\n#### iSCSI\ntargetscsi-target-utils\ninitiatoriscsi-initiator-utils\n\n### \n```\nyum insitall scsi-target-utils\nyum insitall iscsi-initiator-utils\n```\n \n```\n[root@rhel6 ~]# grep -v '#\\|^$' /etc/tgt/targets.conf\ndefault-driver iscsi\n<target iqn.2015-10.com.example-f30:vdb1-1g>\n  backing-store /dev/vdb1\n</target>\n```\n tgtd\n```shell\n[root@rhel6 ~]# /etc/init.d/tgtd start\nStarting SCSI target daemon:                [ OK ]\n\n ```\n\n/dev/sda\n```shell\n[root@rhel6 ~]# ll /dev/sda\nls: cannot access /dev/sda: No such file or directory\n```\ntarget\n```shell\n[root@rhel6 ~]# iscsiadm -m discovery -t st -p 172.25.30.10\n172.25.30.10:3260,1 iqn.2015-10.com.example-f30:vdb1-1g\n```\n target\n```shell\n[root@rhel6 ~]# iscsiadm -m node -l\nLogging in to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] (multiple)\nLogin to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] successful.\n```\n /dev/sda\n```shell\n[root@rhel6 ~]# ll /dev/sda\nbrw-rw----. 1 root disk 8, 0 Jan 14 14:51 /dev/sda\n```\n\n```shell\n[root@rhel6 nodes]# ll /dev/sd*\nbrw-rw----. 1 root disk 8, 0 Jan 14 14:53 /dev/sda\nbrw-rw----. 1 root disk 8, 16 Jan 14 15:35 /dev/sdb\nbrw-rw----. 1 root disk 8, 17 Jan 14 15:35 /dev/sdb1\n\n[root@rhel6 nodes]# iscsiadm -m node -T iqn.2016-01-14.com.example.node4-f24:vdb1-1G -u\nLogging out of session [sid: 2, target: iqn.2016-01-14.com.example.node4-f24:vdb1-1G, portal: 172.25.24.13,3260]\nLogout of [sid: 2, target: iqn.2016-01-14.com.example.node4-f24:vdb1-1G, portal: 172.25.24.13,3260] successful.\n\n[root@rhel6 nodes]# ll /dev/sd*\nbrw-rw----. 1 root disk 8, 0 Jan 14 14:53 /dev/sda\n```\n### iSCSIacl\n\ntarget\n```\n[root@rhel6 ~]# grep -v '#\\|^$' /etc/tgt/targets.conf\ndefault-driver iscsi\n<target iqn.2015-10.com.example-f30:vdb1-1g>\n  backing-store /dev/vdb1\n</target>\n\n<target iqn.2015-10.com.example-f30:vdb2-2g>\n  backing-store /dev/vdb2\n  initiator-address 172.25.30.0/24\n  incominguser xiemx uplooking\n</target>\n```\n\n```\n/etc/init.d/tgtd   reload\n/etc/init.d/tgtd   force-reload\n```\n \n\n\n```shell\n[root@rhel6 ~]# tgtadm --lld iscsi --mode target --op show\nTarget 1: iqn.2015-10.com.example-f30:vdb1-1g\n  System information:\n    Driver: iscsi\n    State: ready\n  I_T nexus information:\n  LUN information:\n    LUN: 0\n      Type: controller\n      SCSI ID: IET   00010000\n      SCSI SN: beaf10\n      Size: 0 MB, Block size: 1\n      Online: Yes\n      Removable media: No\n      Prevent removal: No\n      Readonly: No\n      Backing store type: null\n      Backing store path: None\n      Backing store flags:\n    LUN: 1\n      Type: disk\n      SCSI ID: IET   00010001\n      SCSI SN: beaf11\n      Size: 1074 MB, Block size: 512\n      Online: Yes\n      Removable media: No\n      Prevent removal: No\n      Readonly: No\n      Backing store type: rdwr\n      Backing store path: /dev/vdb1\n      Backing store flags:\n  Account information:\n  ACL information:\n    ALL\n Target 2: iqn.2015-10.com.example-f30:vdb2-2g\n  System information:\n     Driver: iscsi\n     State: ready\n  I_T nexus information:\n  LUN information:\n    LUN: 0\n      Type: controller\n      SCSI ID: IET   00020000\n      SCSI SN: beaf20\n      Size: 0 MB, Block size: 1\n      Online: Yes\n      Removable media: No\n      Prevent removal: No\n      Readonly: No\n      Backing store type: null\n      Backing store path: None\n      Backing store flags:\n    LUN: 1\n      Type: disk\n      SCSI ID: IET   00020001\n      SCSI SN: beaf21\n      Size: 2148 MB, Block size: 512\n      Online: Yes\n      Removable media: No\n      Prevent removal: No\n      Readonly: No\n      Backing store type: rdwr\n      Backing store path: /dev/vdb2\n      Backing store flags:\n  Account information:\n     xiemx\n  ACL information:\n    172.25.30.0/24\n\n```\n\ninitiatorCHAP\n\n```shell\n[root@rhel6 ~]grep -v '^#\\|^$' /etc/iscsi/iscsid.conf\niscsid.startup = /etc/rc.d/init.d/iscsid force-start\nnode.startup = automatic\nnode.leading_login = No\nnode.session.auth.authmethod = CHAP\nnode.session.auth.username = xiemx\nnode.session.auth.password = uplooking\nnode.session.timeo.replacement_timeout = 120\nnode.conn[0].timeo.login_timeout = 15\nnode.conn[0].timeo.logout_timeout = 15\nnode.conn[0].timeo.noop_out_interval = 5\nnode.conn[0].timeo.noop_out_timeout = 5\nnode.session.err_timeo.abort_timeout = 15\nnode.session.err_timeo.lu_reset_timeout = 30\nnode.session.err_timeo.tgt_reset_timeout = 30\nnode.session.initial_login_retry_max = 8\nnode.session.cmds_max = 128\nnode.session.queue_depth = 32\nnode.session.xmit_thread_priority = -20\nnode.session.iscsi.InitialR2T = No\nnode.session.iscsi.ImmediateData = Yes\nnode.session.iscsi.FirstBurstLength = 262144\nnode.session.iscsi.MaxBurstLength = 16776192\nnode.conn[0].iscsi.MaxRecvDataSegmentLength = 262144\nnode.conn[0].iscsi.MaxXmitDataSegmentLength = 0\ndiscovery.sendtargets.iscsi.MaxRecvDataSegmentLength = 32768\nnode.conn[0].iscsi.HeaderDigest = None\nnode.session.nr_sessions = 1\nnode.session.iscsi.FastAbort = Yes\n\n```\n\ninitiator\n\n```shell\n[root@rhel6 nodes]# iscsiadm -m discovery -t st -p 172.25.30.10\n172.25.30.10:3260,1 iqn.2015-10.com.example-f30:vdb1-1g\n172.25.30.10:3260,1 iqn.2015-10.com.example-f30:vdb2-2g\n\n[root@rhel6 nodes]# iscsiadm -m node -T iqn.2015-10.com.example-f30:vdb1-1g -l\nLogging in to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] (multiple)\nLogin to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] successful.\n\n[root@rhel6 nodes]# iscsiadm -m node -T iqn.2015-10.com.example-f30:vdb2-2g -l\nLogging in to [iface: default, target: iqn.2015-10.com.example-f30:vdb2-2g, portal: 172.25.30.10,3260] (multiple)\nLogin to [iface: default, target: iqn.2015-10.com.example-f30:vdb2-2g, portal: 172.25.30.10,3260] successful.\n\n[root@rhel6 nodes]# ll /dev/sd*\nbrw-rw----. 1 root disk 8, 16 Jan 14 16:04 /dev/sdb\nbrw-rw----. 1 root disk 8, 32 Jan 14 16:04 /dev/sdc\n```","source":"_posts/iscsi-store.md","raw":"---\nlayout: post\ntitle: ISCSI\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-02-18 04:02:11\ntags: [ iscsi, linux, store ]\ncategories:\n    - linux\n---\niscsisan\n\n[![san](/images/san.png)](http://www.xiemx.com/wp-content/uploads/2016/02/san.png)\n\n#### iSCSI \n*  I/O (Initiator)\n*  I/O (Target)\n\n#### iSCSI\n\n* target\n* initiator\n* initiator\n* initiator\n\n#### iSCSI\ntargetscsi-target-utils\ninitiatoriscsi-initiator-utils\n\n### \n```\nyum insitall scsi-target-utils\nyum insitall iscsi-initiator-utils\n```\n \n```\n[root@rhel6 ~]# grep -v '#\\|^$' /etc/tgt/targets.conf\ndefault-driver iscsi\n<target iqn.2015-10.com.example-f30:vdb1-1g>\n  backing-store /dev/vdb1\n</target>\n```\n tgtd\n```shell\n[root@rhel6 ~]# /etc/init.d/tgtd start\nStarting SCSI target daemon:                [ OK ]\n\n ```\n\n/dev/sda\n```shell\n[root@rhel6 ~]# ll /dev/sda\nls: cannot access /dev/sda: No such file or directory\n```\ntarget\n```shell\n[root@rhel6 ~]# iscsiadm -m discovery -t st -p 172.25.30.10\n172.25.30.10:3260,1 iqn.2015-10.com.example-f30:vdb1-1g\n```\n target\n```shell\n[root@rhel6 ~]# iscsiadm -m node -l\nLogging in to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] (multiple)\nLogin to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] successful.\n```\n /dev/sda\n```shell\n[root@rhel6 ~]# ll /dev/sda\nbrw-rw----. 1 root disk 8, 0 Jan 14 14:51 /dev/sda\n```\n\n```shell\n[root@rhel6 nodes]# ll /dev/sd*\nbrw-rw----. 1 root disk 8, 0 Jan 14 14:53 /dev/sda\nbrw-rw----. 1 root disk 8, 16 Jan 14 15:35 /dev/sdb\nbrw-rw----. 1 root disk 8, 17 Jan 14 15:35 /dev/sdb1\n\n[root@rhel6 nodes]# iscsiadm -m node -T iqn.2016-01-14.com.example.node4-f24:vdb1-1G -u\nLogging out of session [sid: 2, target: iqn.2016-01-14.com.example.node4-f24:vdb1-1G, portal: 172.25.24.13,3260]\nLogout of [sid: 2, target: iqn.2016-01-14.com.example.node4-f24:vdb1-1G, portal: 172.25.24.13,3260] successful.\n\n[root@rhel6 nodes]# ll /dev/sd*\nbrw-rw----. 1 root disk 8, 0 Jan 14 14:53 /dev/sda\n```\n### iSCSIacl\n\ntarget\n```\n[root@rhel6 ~]# grep -v '#\\|^$' /etc/tgt/targets.conf\ndefault-driver iscsi\n<target iqn.2015-10.com.example-f30:vdb1-1g>\n  backing-store /dev/vdb1\n</target>\n\n<target iqn.2015-10.com.example-f30:vdb2-2g>\n  backing-store /dev/vdb2\n  initiator-address 172.25.30.0/24\n  incominguser xiemx uplooking\n</target>\n```\n\n```\n/etc/init.d/tgtd   reload\n/etc/init.d/tgtd   force-reload\n```\n \n\n\n```shell\n[root@rhel6 ~]# tgtadm --lld iscsi --mode target --op show\nTarget 1: iqn.2015-10.com.example-f30:vdb1-1g\n  System information:\n    Driver: iscsi\n    State: ready\n  I_T nexus information:\n  LUN information:\n    LUN: 0\n      Type: controller\n      SCSI ID: IET   00010000\n      SCSI SN: beaf10\n      Size: 0 MB, Block size: 1\n      Online: Yes\n      Removable media: No\n      Prevent removal: No\n      Readonly: No\n      Backing store type: null\n      Backing store path: None\n      Backing store flags:\n    LUN: 1\n      Type: disk\n      SCSI ID: IET   00010001\n      SCSI SN: beaf11\n      Size: 1074 MB, Block size: 512\n      Online: Yes\n      Removable media: No\n      Prevent removal: No\n      Readonly: No\n      Backing store type: rdwr\n      Backing store path: /dev/vdb1\n      Backing store flags:\n  Account information:\n  ACL information:\n    ALL\n Target 2: iqn.2015-10.com.example-f30:vdb2-2g\n  System information:\n     Driver: iscsi\n     State: ready\n  I_T nexus information:\n  LUN information:\n    LUN: 0\n      Type: controller\n      SCSI ID: IET   00020000\n      SCSI SN: beaf20\n      Size: 0 MB, Block size: 1\n      Online: Yes\n      Removable media: No\n      Prevent removal: No\n      Readonly: No\n      Backing store type: null\n      Backing store path: None\n      Backing store flags:\n    LUN: 1\n      Type: disk\n      SCSI ID: IET   00020001\n      SCSI SN: beaf21\n      Size: 2148 MB, Block size: 512\n      Online: Yes\n      Removable media: No\n      Prevent removal: No\n      Readonly: No\n      Backing store type: rdwr\n      Backing store path: /dev/vdb2\n      Backing store flags:\n  Account information:\n     xiemx\n  ACL information:\n    172.25.30.0/24\n\n```\n\ninitiatorCHAP\n\n```shell\n[root@rhel6 ~]grep -v '^#\\|^$' /etc/iscsi/iscsid.conf\niscsid.startup = /etc/rc.d/init.d/iscsid force-start\nnode.startup = automatic\nnode.leading_login = No\nnode.session.auth.authmethod = CHAP\nnode.session.auth.username = xiemx\nnode.session.auth.password = uplooking\nnode.session.timeo.replacement_timeout = 120\nnode.conn[0].timeo.login_timeout = 15\nnode.conn[0].timeo.logout_timeout = 15\nnode.conn[0].timeo.noop_out_interval = 5\nnode.conn[0].timeo.noop_out_timeout = 5\nnode.session.err_timeo.abort_timeout = 15\nnode.session.err_timeo.lu_reset_timeout = 30\nnode.session.err_timeo.tgt_reset_timeout = 30\nnode.session.initial_login_retry_max = 8\nnode.session.cmds_max = 128\nnode.session.queue_depth = 32\nnode.session.xmit_thread_priority = -20\nnode.session.iscsi.InitialR2T = No\nnode.session.iscsi.ImmediateData = Yes\nnode.session.iscsi.FirstBurstLength = 262144\nnode.session.iscsi.MaxBurstLength = 16776192\nnode.conn[0].iscsi.MaxRecvDataSegmentLength = 262144\nnode.conn[0].iscsi.MaxXmitDataSegmentLength = 0\ndiscovery.sendtargets.iscsi.MaxRecvDataSegmentLength = 32768\nnode.conn[0].iscsi.HeaderDigest = None\nnode.session.nr_sessions = 1\nnode.session.iscsi.FastAbort = Yes\n\n```\n\ninitiator\n\n```shell\n[root@rhel6 nodes]# iscsiadm -m discovery -t st -p 172.25.30.10\n172.25.30.10:3260,1 iqn.2015-10.com.example-f30:vdb1-1g\n172.25.30.10:3260,1 iqn.2015-10.com.example-f30:vdb2-2g\n\n[root@rhel6 nodes]# iscsiadm -m node -T iqn.2015-10.com.example-f30:vdb1-1g -l\nLogging in to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] (multiple)\nLogin to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] successful.\n\n[root@rhel6 nodes]# iscsiadm -m node -T iqn.2015-10.com.example-f30:vdb2-2g -l\nLogging in to [iface: default, target: iqn.2015-10.com.example-f30:vdb2-2g, portal: 172.25.30.10,3260] (multiple)\nLogin to [iface: default, target: iqn.2015-10.com.example-f30:vdb2-2g, portal: 172.25.30.10,3260] successful.\n\n[root@rhel6 nodes]# ll /dev/sd*\nbrw-rw----. 1 root disk 8, 16 Jan 14 16:04 /dev/sdb\nbrw-rw----. 1 root disk 8, 32 Jan 14 16:04 /dev/sdc\n```","slug":"iscsi-store","updated":"2019-10-21T06:57:42.442Z","photos":[],"link":"","_id":"ck42dyid0001xu9ura4dhdhr0","content":"<p>iscsisan</p>\n<p><a href=\"http://www.xiemx.com/wp-content/uploads/2016/02/san.png\"><img src=\"/images/san.png\" alt=\"san\"></a></p>\n<h4 id=\"iSCSI-\"><a href=\"#iSCSI-\" class=\"headerlink\" title=\"iSCSI \"></a>iSCSI </h4><ul>\n<li> I/O (Initiator)</li>\n<li> I/O (Target)</li>\n</ul>\n<h4 id=\"iSCSI\"><a href=\"#iSCSI\" class=\"headerlink\" title=\"iSCSI\"></a>iSCSI</h4><ul>\n<li>target</li>\n<li>initiator</li>\n<li>initiator</li>\n<li>initiator</li>\n</ul>\n<h4 id=\"iSCSI\"><a href=\"#iSCSI\" class=\"headerlink\" title=\"iSCSI\"></a>iSCSI</h4><p>targetscsi-target-utils<br>initiatoriscsi-initiator-utils</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum <span class=\"keyword\">insitall </span><span class=\"keyword\">scsi-target-utils</span></span><br><span class=\"line\"><span class=\"keyword\">yum </span><span class=\"keyword\">insitall </span>iscsi-initiator-utils</span><br></pre></td></tr></table></figure>\n\n<p> </p>\n<figure class=\"highlight llvm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"title\">@rhel6</span> ~]# grep -v '#\\|^$' /etc/tgt/targets.conf</span><br><span class=\"line\"><span class=\"keyword\">default</span>-driver iscsi</span><br><span class=\"line\">&lt;<span class=\"keyword\">target</span> iqn.<span class=\"number\">2015</span><span class=\"number\">-10</span>.com.example-f<span class=\"number\">30</span>:vdb<span class=\"number\">1</span><span class=\"number\">-1</span>g&gt;</span><br><span class=\"line\">  backing-<span class=\"keyword\">store</span> /dev/vdb<span class=\"number\">1</span></span><br><span class=\"line\">&lt;/<span class=\"keyword\">target</span>&gt;</span><br></pre></td></tr></table></figure>\n\n<p> tgtd</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]# /etc/init.d/tgtd start</span><br><span class=\"line\">Starting SCSI target daemon:                [ OK ]</span><br></pre></td></tr></table></figure>\n\n<p>/dev/sda</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]# ll /dev/sda</span><br><span class=\"line\">ls: cannot access /dev/sda: No such file or directory</span><br></pre></td></tr></table></figure>\n\n<p>target</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]# iscsiadm -m discovery -t st -p 172.25.30.10</span><br><span class=\"line\">172.25.30.10:3260,1 iqn.2015-10.com.example-f30:vdb1-1g</span><br></pre></td></tr></table></figure>\n\n<p> target</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]# iscsiadm -m node -l</span><br><span class=\"line\">Logging in to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] (multiple)</span><br><span class=\"line\">Login to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] successful.</span><br></pre></td></tr></table></figure>\n\n<p> /dev/sda</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]# ll /dev/sda</span><br><span class=\"line\">brw-rw----. 1 root disk 8, 0 Jan 14 14:51 /dev/sda</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 nodes]# ll /dev/sd*</span><br><span class=\"line\">brw-rw----. 1 root disk 8, 0 Jan 14 14:53 /dev/sda</span><br><span class=\"line\">brw-rw----. 1 root disk 8, 16 Jan 14 15:35 /dev/sdb</span><br><span class=\"line\">brw-rw----. 1 root disk 8, 17 Jan 14 15:35 /dev/sdb1</span><br><span class=\"line\"></span><br><span class=\"line\">[root@rhel6 nodes]# iscsiadm -m node -T iqn.2016-01-14.com.example.node4-f24:vdb1-1G -u</span><br><span class=\"line\">Logging out of session [sid: 2, target: iqn.2016-01-14.com.example.node4-f24:vdb1-1G, portal: 172.25.24.13,3260]</span><br><span class=\"line\">Logout of [sid: 2, target: iqn.2016-01-14.com.example.node4-f24:vdb1-1G, portal: 172.25.24.13,3260] successful.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@rhel6 nodes]# ll /dev/sd*</span><br><span class=\"line\">brw-rw----. 1 root disk 8, 0 Jan 14 14:53 /dev/sda</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"iSCSIacl\"><a href=\"#iSCSIacl\" class=\"headerlink\" title=\"iSCSIacl\"></a>iSCSIacl</h3><p>target</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>rhel6 ~]# grep -v <span class=\"string\">'#\\|^$'</span> /etc/tgt/targets.conf</span><br><span class=\"line\"><span class=\"keyword\">default</span>-driver iscsi</span><br><span class=\"line\">&lt;target iqn<span class=\"number\">.2015</span><span class=\"number\">-10.</span>com.example-f30:vdb1<span class=\"number\">-1</span>g&gt;</span><br><span class=\"line\">  backing-store /dev/vdb1</span><br><span class=\"line\">&lt;/target&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;target iqn<span class=\"number\">.2015</span><span class=\"number\">-10.</span>com.example-f30:vdb2<span class=\"number\">-2</span>g&gt;</span><br><span class=\"line\">  backing-store /dev/vdb2</span><br><span class=\"line\">  initiator-address <span class=\"number\">172.25</span><span class=\"number\">.30</span><span class=\"number\">.0</span>/<span class=\"number\">24</span></span><br><span class=\"line\">  incominguser xiemx uplooking</span><br><span class=\"line\">&lt;/target&gt;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight jboss-cli\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">/etc/init.d/tgtd</span>   <span class=\"keyword\">reload</span></span><br><span class=\"line\"><span class=\"string\">/etc/init.d/tgtd</span>   force-reload</span><br></pre></td></tr></table></figure>\n\n\n\n<p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]# tgtadm --lld iscsi --mode target --op show</span><br><span class=\"line\">Target 1: iqn.2015-10.com.example-f30:vdb1-1g</span><br><span class=\"line\">  System information:</span><br><span class=\"line\">    Driver: iscsi</span><br><span class=\"line\">    State: ready</span><br><span class=\"line\">  I_T nexus information:</span><br><span class=\"line\">  LUN information:</span><br><span class=\"line\">    LUN: 0</span><br><span class=\"line\">      Type: controller</span><br><span class=\"line\">      SCSI ID: IET   00010000</span><br><span class=\"line\">      SCSI SN: beaf10</span><br><span class=\"line\">      Size: 0 MB, Block size: 1</span><br><span class=\"line\">      Online: Yes</span><br><span class=\"line\">      Removable media: No</span><br><span class=\"line\">      Prevent removal: No</span><br><span class=\"line\">      Readonly: No</span><br><span class=\"line\">      Backing store type: null</span><br><span class=\"line\">      Backing store path: None</span><br><span class=\"line\">      Backing store flags:</span><br><span class=\"line\">    LUN: 1</span><br><span class=\"line\">      Type: disk</span><br><span class=\"line\">      SCSI ID: IET   00010001</span><br><span class=\"line\">      SCSI SN: beaf11</span><br><span class=\"line\">      Size: 1074 MB, Block size: 512</span><br><span class=\"line\">      Online: Yes</span><br><span class=\"line\">      Removable media: No</span><br><span class=\"line\">      Prevent removal: No</span><br><span class=\"line\">      Readonly: No</span><br><span class=\"line\">      Backing store type: rdwr</span><br><span class=\"line\">      Backing store path: /dev/vdb1</span><br><span class=\"line\">      Backing store flags:</span><br><span class=\"line\">  Account information:</span><br><span class=\"line\">  ACL information:</span><br><span class=\"line\">    ALL</span><br><span class=\"line\"> Target 2: iqn.2015-10.com.example-f30:vdb2-2g</span><br><span class=\"line\">  System information:</span><br><span class=\"line\">     Driver: iscsi</span><br><span class=\"line\">     State: ready</span><br><span class=\"line\">  I_T nexus information:</span><br><span class=\"line\">  LUN information:</span><br><span class=\"line\">    LUN: 0</span><br><span class=\"line\">      Type: controller</span><br><span class=\"line\">      SCSI ID: IET   00020000</span><br><span class=\"line\">      SCSI SN: beaf20</span><br><span class=\"line\">      Size: 0 MB, Block size: 1</span><br><span class=\"line\">      Online: Yes</span><br><span class=\"line\">      Removable media: No</span><br><span class=\"line\">      Prevent removal: No</span><br><span class=\"line\">      Readonly: No</span><br><span class=\"line\">      Backing store type: null</span><br><span class=\"line\">      Backing store path: None</span><br><span class=\"line\">      Backing store flags:</span><br><span class=\"line\">    LUN: 1</span><br><span class=\"line\">      Type: disk</span><br><span class=\"line\">      SCSI ID: IET   00020001</span><br><span class=\"line\">      SCSI SN: beaf21</span><br><span class=\"line\">      Size: 2148 MB, Block size: 512</span><br><span class=\"line\">      Online: Yes</span><br><span class=\"line\">      Removable media: No</span><br><span class=\"line\">      Prevent removal: No</span><br><span class=\"line\">      Readonly: No</span><br><span class=\"line\">      Backing store type: rdwr</span><br><span class=\"line\">      Backing store path: /dev/vdb2</span><br><span class=\"line\">      Backing store flags:</span><br><span class=\"line\">  Account information:</span><br><span class=\"line\">     xiemx</span><br><span class=\"line\">  ACL information:</span><br><span class=\"line\">    172.25.30.0/24</span><br></pre></td></tr></table></figure>\n\n<p>initiatorCHAP</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]grep -v '^#\\|^$' /etc/iscsi/iscsid.conf</span><br><span class=\"line\">iscsid.startup = /etc/rc.d/init.d/iscsid force-start</span><br><span class=\"line\">node.startup = automatic</span><br><span class=\"line\">node.leading_login = No</span><br><span class=\"line\">node.session.auth.authmethod = CHAP</span><br><span class=\"line\">node.session.auth.username = xiemx</span><br><span class=\"line\">node.session.auth.password = uplooking</span><br><span class=\"line\">node.session.timeo.replacement_timeout = 120</span><br><span class=\"line\">node.conn[0].timeo.login_timeout = 15</span><br><span class=\"line\">node.conn[0].timeo.logout_timeout = 15</span><br><span class=\"line\">node.conn[0].timeo.noop_out_interval = 5</span><br><span class=\"line\">node.conn[0].timeo.noop_out_timeout = 5</span><br><span class=\"line\">node.session.err_timeo.abort_timeout = 15</span><br><span class=\"line\">node.session.err_timeo.lu_reset_timeout = 30</span><br><span class=\"line\">node.session.err_timeo.tgt_reset_timeout = 30</span><br><span class=\"line\">node.session.initial_login_retry_max = 8</span><br><span class=\"line\">node.session.cmds_max = 128</span><br><span class=\"line\">node.session.queue_depth = 32</span><br><span class=\"line\">node.session.xmit_thread_priority = -20</span><br><span class=\"line\">node.session.iscsi.InitialR2T = No</span><br><span class=\"line\">node.session.iscsi.ImmediateData = Yes</span><br><span class=\"line\">node.session.iscsi.FirstBurstLength = 262144</span><br><span class=\"line\">node.session.iscsi.MaxBurstLength = 16776192</span><br><span class=\"line\">node.conn[0].iscsi.MaxRecvDataSegmentLength = 262144</span><br><span class=\"line\">node.conn[0].iscsi.MaxXmitDataSegmentLength = 0</span><br><span class=\"line\">discovery.sendtargets.iscsi.MaxRecvDataSegmentLength = 32768</span><br><span class=\"line\">node.conn[0].iscsi.HeaderDigest = None</span><br><span class=\"line\">node.session.nr_sessions = 1</span><br><span class=\"line\">node.session.iscsi.FastAbort = Yes</span><br></pre></td></tr></table></figure>\n\n<p>initiator</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 nodes]# iscsiadm -m discovery -t st -p 172.25.30.10</span><br><span class=\"line\">172.25.30.10:3260,1 iqn.2015-10.com.example-f30:vdb1-1g</span><br><span class=\"line\">172.25.30.10:3260,1 iqn.2015-10.com.example-f30:vdb2-2g</span><br><span class=\"line\"></span><br><span class=\"line\">[root@rhel6 nodes]# iscsiadm -m node -T iqn.2015-10.com.example-f30:vdb1-1g -l</span><br><span class=\"line\">Logging in to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] (multiple)</span><br><span class=\"line\">Login to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] successful.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@rhel6 nodes]# iscsiadm -m node -T iqn.2015-10.com.example-f30:vdb2-2g -l</span><br><span class=\"line\">Logging in to [iface: default, target: iqn.2015-10.com.example-f30:vdb2-2g, portal: 172.25.30.10,3260] (multiple)</span><br><span class=\"line\">Login to [iface: default, target: iqn.2015-10.com.example-f30:vdb2-2g, portal: 172.25.30.10,3260] successful.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@rhel6 nodes]# ll /dev/sd*</span><br><span class=\"line\">brw-rw----. 1 root disk 8, 16 Jan 14 16:04 /dev/sdb</span><br><span class=\"line\">brw-rw----. 1 root disk 8, 32 Jan 14 16:04 /dev/sdc</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>iscsisan</p>\n<p><a href=\"http://www.xiemx.com/wp-content/uploads/2016/02/san.png\"><img src=\"/images/san.png\" alt=\"san\"></a></p>\n<h4 id=\"iSCSI-\"><a href=\"#iSCSI-\" class=\"headerlink\" title=\"iSCSI \"></a>iSCSI </h4><ul>\n<li> I/O (Initiator)</li>\n<li> I/O (Target)</li>\n</ul>\n<h4 id=\"iSCSI\"><a href=\"#iSCSI\" class=\"headerlink\" title=\"iSCSI\"></a>iSCSI</h4><ul>\n<li>target</li>\n<li>initiator</li>\n<li>initiator</li>\n<li>initiator</li>\n</ul>\n<h4 id=\"iSCSI\"><a href=\"#iSCSI\" class=\"headerlink\" title=\"iSCSI\"></a>iSCSI</h4><p>targetscsi-target-utils<br>initiatoriscsi-initiator-utils</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum <span class=\"keyword\">insitall </span><span class=\"keyword\">scsi-target-utils</span></span><br><span class=\"line\"><span class=\"keyword\">yum </span><span class=\"keyword\">insitall </span>iscsi-initiator-utils</span><br></pre></td></tr></table></figure>\n\n<p> </p>\n<figure class=\"highlight llvm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"title\">@rhel6</span> ~]# grep -v '#\\|^$' /etc/tgt/targets.conf</span><br><span class=\"line\"><span class=\"keyword\">default</span>-driver iscsi</span><br><span class=\"line\">&lt;<span class=\"keyword\">target</span> iqn.<span class=\"number\">2015</span><span class=\"number\">-10</span>.com.example-f<span class=\"number\">30</span>:vdb<span class=\"number\">1</span><span class=\"number\">-1</span>g&gt;</span><br><span class=\"line\">  backing-<span class=\"keyword\">store</span> /dev/vdb<span class=\"number\">1</span></span><br><span class=\"line\">&lt;/<span class=\"keyword\">target</span>&gt;</span><br></pre></td></tr></table></figure>\n\n<p> tgtd</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]# /etc/init.d/tgtd start</span><br><span class=\"line\">Starting SCSI target daemon:                [ OK ]</span><br></pre></td></tr></table></figure>\n\n<p>/dev/sda</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]# ll /dev/sda</span><br><span class=\"line\">ls: cannot access /dev/sda: No such file or directory</span><br></pre></td></tr></table></figure>\n\n<p>target</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]# iscsiadm -m discovery -t st -p 172.25.30.10</span><br><span class=\"line\">172.25.30.10:3260,1 iqn.2015-10.com.example-f30:vdb1-1g</span><br></pre></td></tr></table></figure>\n\n<p> target</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]# iscsiadm -m node -l</span><br><span class=\"line\">Logging in to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] (multiple)</span><br><span class=\"line\">Login to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] successful.</span><br></pre></td></tr></table></figure>\n\n<p> /dev/sda</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]# ll /dev/sda</span><br><span class=\"line\">brw-rw----. 1 root disk 8, 0 Jan 14 14:51 /dev/sda</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 nodes]# ll /dev/sd*</span><br><span class=\"line\">brw-rw----. 1 root disk 8, 0 Jan 14 14:53 /dev/sda</span><br><span class=\"line\">brw-rw----. 1 root disk 8, 16 Jan 14 15:35 /dev/sdb</span><br><span class=\"line\">brw-rw----. 1 root disk 8, 17 Jan 14 15:35 /dev/sdb1</span><br><span class=\"line\"></span><br><span class=\"line\">[root@rhel6 nodes]# iscsiadm -m node -T iqn.2016-01-14.com.example.node4-f24:vdb1-1G -u</span><br><span class=\"line\">Logging out of session [sid: 2, target: iqn.2016-01-14.com.example.node4-f24:vdb1-1G, portal: 172.25.24.13,3260]</span><br><span class=\"line\">Logout of [sid: 2, target: iqn.2016-01-14.com.example.node4-f24:vdb1-1G, portal: 172.25.24.13,3260] successful.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@rhel6 nodes]# ll /dev/sd*</span><br><span class=\"line\">brw-rw----. 1 root disk 8, 0 Jan 14 14:53 /dev/sda</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"iSCSIacl\"><a href=\"#iSCSIacl\" class=\"headerlink\" title=\"iSCSIacl\"></a>iSCSIacl</h3><p>target</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>rhel6 ~]# grep -v <span class=\"string\">'#\\|^$'</span> /etc/tgt/targets.conf</span><br><span class=\"line\"><span class=\"keyword\">default</span>-driver iscsi</span><br><span class=\"line\">&lt;target iqn<span class=\"number\">.2015</span><span class=\"number\">-10.</span>com.example-f30:vdb1<span class=\"number\">-1</span>g&gt;</span><br><span class=\"line\">  backing-store /dev/vdb1</span><br><span class=\"line\">&lt;/target&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;target iqn<span class=\"number\">.2015</span><span class=\"number\">-10.</span>com.example-f30:vdb2<span class=\"number\">-2</span>g&gt;</span><br><span class=\"line\">  backing-store /dev/vdb2</span><br><span class=\"line\">  initiator-address <span class=\"number\">172.25</span><span class=\"number\">.30</span><span class=\"number\">.0</span>/<span class=\"number\">24</span></span><br><span class=\"line\">  incominguser xiemx uplooking</span><br><span class=\"line\">&lt;/target&gt;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight jboss-cli\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">/etc/init.d/tgtd</span>   <span class=\"keyword\">reload</span></span><br><span class=\"line\"><span class=\"string\">/etc/init.d/tgtd</span>   force-reload</span><br></pre></td></tr></table></figure>\n\n\n\n<p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]# tgtadm --lld iscsi --mode target --op show</span><br><span class=\"line\">Target 1: iqn.2015-10.com.example-f30:vdb1-1g</span><br><span class=\"line\">  System information:</span><br><span class=\"line\">    Driver: iscsi</span><br><span class=\"line\">    State: ready</span><br><span class=\"line\">  I_T nexus information:</span><br><span class=\"line\">  LUN information:</span><br><span class=\"line\">    LUN: 0</span><br><span class=\"line\">      Type: controller</span><br><span class=\"line\">      SCSI ID: IET   00010000</span><br><span class=\"line\">      SCSI SN: beaf10</span><br><span class=\"line\">      Size: 0 MB, Block size: 1</span><br><span class=\"line\">      Online: Yes</span><br><span class=\"line\">      Removable media: No</span><br><span class=\"line\">      Prevent removal: No</span><br><span class=\"line\">      Readonly: No</span><br><span class=\"line\">      Backing store type: null</span><br><span class=\"line\">      Backing store path: None</span><br><span class=\"line\">      Backing store flags:</span><br><span class=\"line\">    LUN: 1</span><br><span class=\"line\">      Type: disk</span><br><span class=\"line\">      SCSI ID: IET   00010001</span><br><span class=\"line\">      SCSI SN: beaf11</span><br><span class=\"line\">      Size: 1074 MB, Block size: 512</span><br><span class=\"line\">      Online: Yes</span><br><span class=\"line\">      Removable media: No</span><br><span class=\"line\">      Prevent removal: No</span><br><span class=\"line\">      Readonly: No</span><br><span class=\"line\">      Backing store type: rdwr</span><br><span class=\"line\">      Backing store path: /dev/vdb1</span><br><span class=\"line\">      Backing store flags:</span><br><span class=\"line\">  Account information:</span><br><span class=\"line\">  ACL information:</span><br><span class=\"line\">    ALL</span><br><span class=\"line\"> Target 2: iqn.2015-10.com.example-f30:vdb2-2g</span><br><span class=\"line\">  System information:</span><br><span class=\"line\">     Driver: iscsi</span><br><span class=\"line\">     State: ready</span><br><span class=\"line\">  I_T nexus information:</span><br><span class=\"line\">  LUN information:</span><br><span class=\"line\">    LUN: 0</span><br><span class=\"line\">      Type: controller</span><br><span class=\"line\">      SCSI ID: IET   00020000</span><br><span class=\"line\">      SCSI SN: beaf20</span><br><span class=\"line\">      Size: 0 MB, Block size: 1</span><br><span class=\"line\">      Online: Yes</span><br><span class=\"line\">      Removable media: No</span><br><span class=\"line\">      Prevent removal: No</span><br><span class=\"line\">      Readonly: No</span><br><span class=\"line\">      Backing store type: null</span><br><span class=\"line\">      Backing store path: None</span><br><span class=\"line\">      Backing store flags:</span><br><span class=\"line\">    LUN: 1</span><br><span class=\"line\">      Type: disk</span><br><span class=\"line\">      SCSI ID: IET   00020001</span><br><span class=\"line\">      SCSI SN: beaf21</span><br><span class=\"line\">      Size: 2148 MB, Block size: 512</span><br><span class=\"line\">      Online: Yes</span><br><span class=\"line\">      Removable media: No</span><br><span class=\"line\">      Prevent removal: No</span><br><span class=\"line\">      Readonly: No</span><br><span class=\"line\">      Backing store type: rdwr</span><br><span class=\"line\">      Backing store path: /dev/vdb2</span><br><span class=\"line\">      Backing store flags:</span><br><span class=\"line\">  Account information:</span><br><span class=\"line\">     xiemx</span><br><span class=\"line\">  ACL information:</span><br><span class=\"line\">    172.25.30.0/24</span><br></pre></td></tr></table></figure>\n\n<p>initiatorCHAP</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]grep -v '^#\\|^$' /etc/iscsi/iscsid.conf</span><br><span class=\"line\">iscsid.startup = /etc/rc.d/init.d/iscsid force-start</span><br><span class=\"line\">node.startup = automatic</span><br><span class=\"line\">node.leading_login = No</span><br><span class=\"line\">node.session.auth.authmethod = CHAP</span><br><span class=\"line\">node.session.auth.username = xiemx</span><br><span class=\"line\">node.session.auth.password = uplooking</span><br><span class=\"line\">node.session.timeo.replacement_timeout = 120</span><br><span class=\"line\">node.conn[0].timeo.login_timeout = 15</span><br><span class=\"line\">node.conn[0].timeo.logout_timeout = 15</span><br><span class=\"line\">node.conn[0].timeo.noop_out_interval = 5</span><br><span class=\"line\">node.conn[0].timeo.noop_out_timeout = 5</span><br><span class=\"line\">node.session.err_timeo.abort_timeout = 15</span><br><span class=\"line\">node.session.err_timeo.lu_reset_timeout = 30</span><br><span class=\"line\">node.session.err_timeo.tgt_reset_timeout = 30</span><br><span class=\"line\">node.session.initial_login_retry_max = 8</span><br><span class=\"line\">node.session.cmds_max = 128</span><br><span class=\"line\">node.session.queue_depth = 32</span><br><span class=\"line\">node.session.xmit_thread_priority = -20</span><br><span class=\"line\">node.session.iscsi.InitialR2T = No</span><br><span class=\"line\">node.session.iscsi.ImmediateData = Yes</span><br><span class=\"line\">node.session.iscsi.FirstBurstLength = 262144</span><br><span class=\"line\">node.session.iscsi.MaxBurstLength = 16776192</span><br><span class=\"line\">node.conn[0].iscsi.MaxRecvDataSegmentLength = 262144</span><br><span class=\"line\">node.conn[0].iscsi.MaxXmitDataSegmentLength = 0</span><br><span class=\"line\">discovery.sendtargets.iscsi.MaxRecvDataSegmentLength = 32768</span><br><span class=\"line\">node.conn[0].iscsi.HeaderDigest = None</span><br><span class=\"line\">node.session.nr_sessions = 1</span><br><span class=\"line\">node.session.iscsi.FastAbort = Yes</span><br></pre></td></tr></table></figure>\n\n<p>initiator</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 nodes]# iscsiadm -m discovery -t st -p 172.25.30.10</span><br><span class=\"line\">172.25.30.10:3260,1 iqn.2015-10.com.example-f30:vdb1-1g</span><br><span class=\"line\">172.25.30.10:3260,1 iqn.2015-10.com.example-f30:vdb2-2g</span><br><span class=\"line\"></span><br><span class=\"line\">[root@rhel6 nodes]# iscsiadm -m node -T iqn.2015-10.com.example-f30:vdb1-1g -l</span><br><span class=\"line\">Logging in to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] (multiple)</span><br><span class=\"line\">Login to [iface: default, target: iqn.2015-10.com.example-f30:vdb1-1g, portal: 172.25.30.10,3260] successful.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@rhel6 nodes]# iscsiadm -m node -T iqn.2015-10.com.example-f30:vdb2-2g -l</span><br><span class=\"line\">Logging in to [iface: default, target: iqn.2015-10.com.example-f30:vdb2-2g, portal: 172.25.30.10,3260] (multiple)</span><br><span class=\"line\">Login to [iface: default, target: iqn.2015-10.com.example-f30:vdb2-2g, portal: 172.25.30.10,3260] successful.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@rhel6 nodes]# ll /dev/sd*</span><br><span class=\"line\">brw-rw----. 1 root disk 8, 16 Jan 14 16:04 /dev/sdb</span><br><span class=\"line\">brw-rw----. 1 root disk 8, 32 Jan 14 16:04 /dev/sdc</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"K8SPOD","published":1,"author":"xiemx","comments":1,"date":"2019-12-12T02:01:04.000Z","_content":"### K8SPOD\n\n1. kubectl get pod -o wide podnode\n```shell\n  Documents kubectl get pod -o wide \nNAME                                                 READY   STATUS             RESTARTS   AGE   IP             NODE                                              NOMINATED NODE\ninternal-nginx-ingress-controller-7fdf7f457d-bd59z   1/1     Running            0          42m   10.200.1.83    ip-10-200-1-202.ap-northeast-1.compute.internal   <none>\n\n2. kubectl describe pod/podname podcontainid\n```shell\n  Documents k get pod -o jsonpath='{.status.containerStatuses[*].containerID}' internal-nginx-ingress-controller-7fdf7f457d-bd59z\ndocker://ae9a6df60584e797e56cc64d0df02e64d7731a0d852026fab0a76c920c608cbe\n```\n\n3. nodecontainereth0ID\n```shell\n[ec2-user@ip-10-200-1-202 net]$ docker exec -it ae9a6df60584e797e56cc64d0df02e64d7731a0d852026fab0a76c920c608cbe cat /sys/class/net/eth0/iflink\n88\n```\n\n4. ID\n```\n[ec2-user@ip-10-200-1-202 net]$ cd /sys/class/net; for i in $(ls);do echo $i ;grep 88 $i/ifindex;done\neni0143b083c86\neni154a5470c40\neni1c162323f07\neni1d3e2ba2ce1\neni3fbceb3330b\neni457702aeb41\neni45f360a240e\neni50431e3a94f\neni619e29d4bac\neni66339821adf\neni6fe679d6356\neni79708a78f8b\neni7cc26b0b7d2\neni855ca0ba49b\neni8799376f27c\neni90208382a7b\neni909411bbf11\neni94c3d2bb833\nenia14f5f7c3e9\nenib70b44b2399\nenic2ad9523b38 ###\n88\nenid60e48c6616\nenid8f13b5dd06\nenida858799e91\nenieee4f7696a1\nenif0d5e81d420\neth0\neth1\nlo\n```\n\n5. tcpdump \n```shell\n  ssh-keys git:(master)  ssh -F ~/.matrix/jp/ssh.aux.config 10.200.1.202 -l ec2-user \"sudo tcpdump -vvv -i enic2ad9523b38 tcp port 80 -w -\" | wireshark -k -i -\nWarning: Permanently added '10.200.1.4' (ECDSA) to the list of known hosts.\nWarning: Permanently added '10.200.1.202' (ECDSA) to the list of known hosts.\ntcpdump: listening on eni86f5b593a42, link-type EN10MB (Ethernet), capture size 262144 bytes\ntcpdump: pcap_loop: The interface went down\n7408 packets captured\n7408 packets received by filter\n0 packets dropped by kernel\n```","source":"_posts/k8s-tcpdump.md","raw":"---\nlayout: post\ntitle: K8SPOD\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2019-12-12 10:01:04\ntags: [ k8s, tcpdump, linux, network]\ncategories:\n    - k8s\n---\n### K8SPOD\n\n1. kubectl get pod -o wide podnode\n```shell\n  Documents kubectl get pod -o wide \nNAME                                                 READY   STATUS             RESTARTS   AGE   IP             NODE                                              NOMINATED NODE\ninternal-nginx-ingress-controller-7fdf7f457d-bd59z   1/1     Running            0          42m   10.200.1.83    ip-10-200-1-202.ap-northeast-1.compute.internal   <none>\n\n2. kubectl describe pod/podname podcontainid\n```shell\n  Documents k get pod -o jsonpath='{.status.containerStatuses[*].containerID}' internal-nginx-ingress-controller-7fdf7f457d-bd59z\ndocker://ae9a6df60584e797e56cc64d0df02e64d7731a0d852026fab0a76c920c608cbe\n```\n\n3. nodecontainereth0ID\n```shell\n[ec2-user@ip-10-200-1-202 net]$ docker exec -it ae9a6df60584e797e56cc64d0df02e64d7731a0d852026fab0a76c920c608cbe cat /sys/class/net/eth0/iflink\n88\n```\n\n4. ID\n```\n[ec2-user@ip-10-200-1-202 net]$ cd /sys/class/net; for i in $(ls);do echo $i ;grep 88 $i/ifindex;done\neni0143b083c86\neni154a5470c40\neni1c162323f07\neni1d3e2ba2ce1\neni3fbceb3330b\neni457702aeb41\neni45f360a240e\neni50431e3a94f\neni619e29d4bac\neni66339821adf\neni6fe679d6356\neni79708a78f8b\neni7cc26b0b7d2\neni855ca0ba49b\neni8799376f27c\neni90208382a7b\neni909411bbf11\neni94c3d2bb833\nenia14f5f7c3e9\nenib70b44b2399\nenic2ad9523b38 ###\n88\nenid60e48c6616\nenid8f13b5dd06\nenida858799e91\nenieee4f7696a1\nenif0d5e81d420\neth0\neth1\nlo\n```\n\n5. tcpdump \n```shell\n  ssh-keys git:(master)  ssh -F ~/.matrix/jp/ssh.aux.config 10.200.1.202 -l ec2-user \"sudo tcpdump -vvv -i enic2ad9523b38 tcp port 80 -w -\" | wireshark -k -i -\nWarning: Permanently added '10.200.1.4' (ECDSA) to the list of known hosts.\nWarning: Permanently added '10.200.1.202' (ECDSA) to the list of known hosts.\ntcpdump: listening on eni86f5b593a42, link-type EN10MB (Ethernet), capture size 262144 bytes\ntcpdump: pcap_loop: The interface went down\n7408 packets captured\n7408 packets received by filter\n0 packets dropped by kernel\n```","slug":"k8s-tcpdump","updated":"2019-12-12T07:05:08.737Z","photos":[],"link":"","_id":"ck42dyid20020u9urrxn2hq0e","content":"<h3 id=\"K8SPOD\"><a href=\"#K8SPOD\" class=\"headerlink\" title=\"K8SPOD\"></a>K8SPOD</h3><ol>\n<li><p>kubectl get pod -o wide podnode</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  Documents kubectl get pod -o wide </span><br><span class=\"line\">NAME                                                 READY   STATUS             RESTARTS   AGE   IP             NODE                                              NOMINATED NODE</span><br><span class=\"line\">internal-nginx-ingress-controller-7fdf7f457d-bd59z   1/1     Running            0          42m   10.200.1.83    ip-10-200-1-202.ap-northeast-1.compute.internal   &lt;none&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">2. kubectl describe pod/podname podcontainid</span><br><span class=\"line\">```shell</span><br><span class=\"line\">  Documents k get pod -o jsonpath='&#123;.status.containerStatuses[*].containerID&#125;' internal-nginx-ingress-controller-7fdf7f457d-bd59z</span><br><span class=\"line\">docker://ae9a6df60584e797e56cc64d0df02e64d7731a0d852026fab0a76c920c608cbe</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>nodecontainereth0ID</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[ec2-user@ip-10-200-1-202 net]$ docker exec -it ae9a6df60584e797e56cc64d0df02e64d7731a0d852026fab0a76c920c608cbe cat /sys/class/net/eth0/iflink</span><br><span class=\"line\">88</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ID</p>\n<figure class=\"highlight llvm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[ec<span class=\"number\">2</span>-user<span class=\"title\">@ip-10-200-1-202</span> net]$ cd /sys/class/net<span class=\"comment\">; for i in $(ls);do echo $i ;grep 88 $i/ifindex;done</span></span><br><span class=\"line\"><span class=\"comment\">eni0143b083c86</span></span><br><span class=\"line\"><span class=\"comment\">eni154a5470c40</span></span><br><span class=\"line\"><span class=\"comment\">eni1c162323f07</span></span><br><span class=\"line\"><span class=\"comment\">eni1d3e2ba2ce1</span></span><br><span class=\"line\"><span class=\"comment\">eni3fbceb3330b</span></span><br><span class=\"line\"><span class=\"comment\">eni457702aeb41</span></span><br><span class=\"line\"><span class=\"comment\">eni45f360a240e</span></span><br><span class=\"line\"><span class=\"comment\">eni50431e3a94f</span></span><br><span class=\"line\"><span class=\"comment\">eni619e29d4bac</span></span><br><span class=\"line\"><span class=\"comment\">eni66339821adf</span></span><br><span class=\"line\"><span class=\"comment\">eni6fe679d6356</span></span><br><span class=\"line\"><span class=\"comment\">eni79708a78f8b</span></span><br><span class=\"line\"><span class=\"comment\">eni7cc26b0b7d2</span></span><br><span class=\"line\"><span class=\"comment\">eni855ca0ba49b</span></span><br><span class=\"line\"><span class=\"comment\">eni8799376f27c</span></span><br><span class=\"line\"><span class=\"comment\">eni90208382a7b</span></span><br><span class=\"line\"><span class=\"comment\">eni909411bbf11</span></span><br><span class=\"line\"><span class=\"comment\">eni94c3d2bb833</span></span><br><span class=\"line\"><span class=\"comment\">enia14f5f7c3e9</span></span><br><span class=\"line\"><span class=\"comment\">enib70b44b2399</span></span><br><span class=\"line\"><span class=\"comment\">enic2ad9523b38 ###</span></span><br><span class=\"line\"><span class=\"comment\">88</span></span><br><span class=\"line\"><span class=\"comment\">enid60e48c6616</span></span><br><span class=\"line\"><span class=\"comment\">enid8f13b5dd06</span></span><br><span class=\"line\"><span class=\"comment\">enida858799e91</span></span><br><span class=\"line\"><span class=\"comment\">enieee4f7696a1</span></span><br><span class=\"line\"><span class=\"comment\">enif0d5e81d420</span></span><br><span class=\"line\"><span class=\"comment\">eth0</span></span><br><span class=\"line\"><span class=\"comment\">eth1</span></span><br><span class=\"line\"><span class=\"comment\">lo</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>tcpdump </p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  ssh-keys git:(master)  ssh -F ~/.matrix/jp/ssh.aux.config 10.200.1.202 -l ec2-user \"sudo tcpdump -vvv -i enic2ad9523b38 tcp port 80 -w -\" | wireshark -k -i -</span><br><span class=\"line\">Warning: Permanently added '10.200.1.4' (ECDSA) to the list of known hosts.</span><br><span class=\"line\">Warning: Permanently added '10.200.1.202' (ECDSA) to the list of known hosts.</span><br><span class=\"line\">tcpdump: listening on eni86f5b593a42, link-type EN10MB (Ethernet), capture size 262144 bytes</span><br><span class=\"line\">tcpdump: pcap_loop: The interface went down</span><br><span class=\"line\">7408 packets captured</span><br><span class=\"line\">7408 packets received by filter</span><br><span class=\"line\">0 packets dropped by kernel</span><br></pre></td></tr></table></figure></li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"K8SPOD\"><a href=\"#K8SPOD\" class=\"headerlink\" title=\"K8SPOD\"></a>K8SPOD</h3><ol>\n<li><p>kubectl get pod -o wide podnode</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  Documents kubectl get pod -o wide </span><br><span class=\"line\">NAME                                                 READY   STATUS             RESTARTS   AGE   IP             NODE                                              NOMINATED NODE</span><br><span class=\"line\">internal-nginx-ingress-controller-7fdf7f457d-bd59z   1/1     Running            0          42m   10.200.1.83    ip-10-200-1-202.ap-northeast-1.compute.internal   &lt;none&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">2. kubectl describe pod/podname podcontainid</span><br><span class=\"line\">```shell</span><br><span class=\"line\">  Documents k get pod -o jsonpath='&#123;.status.containerStatuses[*].containerID&#125;' internal-nginx-ingress-controller-7fdf7f457d-bd59z</span><br><span class=\"line\">docker://ae9a6df60584e797e56cc64d0df02e64d7731a0d852026fab0a76c920c608cbe</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>nodecontainereth0ID</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[ec2-user@ip-10-200-1-202 net]$ docker exec -it ae9a6df60584e797e56cc64d0df02e64d7731a0d852026fab0a76c920c608cbe cat /sys/class/net/eth0/iflink</span><br><span class=\"line\">88</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>ID</p>\n<figure class=\"highlight llvm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[ec<span class=\"number\">2</span>-user<span class=\"title\">@ip-10-200-1-202</span> net]$ cd /sys/class/net<span class=\"comment\">; for i in $(ls);do echo $i ;grep 88 $i/ifindex;done</span></span><br><span class=\"line\"><span class=\"comment\">eni0143b083c86</span></span><br><span class=\"line\"><span class=\"comment\">eni154a5470c40</span></span><br><span class=\"line\"><span class=\"comment\">eni1c162323f07</span></span><br><span class=\"line\"><span class=\"comment\">eni1d3e2ba2ce1</span></span><br><span class=\"line\"><span class=\"comment\">eni3fbceb3330b</span></span><br><span class=\"line\"><span class=\"comment\">eni457702aeb41</span></span><br><span class=\"line\"><span class=\"comment\">eni45f360a240e</span></span><br><span class=\"line\"><span class=\"comment\">eni50431e3a94f</span></span><br><span class=\"line\"><span class=\"comment\">eni619e29d4bac</span></span><br><span class=\"line\"><span class=\"comment\">eni66339821adf</span></span><br><span class=\"line\"><span class=\"comment\">eni6fe679d6356</span></span><br><span class=\"line\"><span class=\"comment\">eni79708a78f8b</span></span><br><span class=\"line\"><span class=\"comment\">eni7cc26b0b7d2</span></span><br><span class=\"line\"><span class=\"comment\">eni855ca0ba49b</span></span><br><span class=\"line\"><span class=\"comment\">eni8799376f27c</span></span><br><span class=\"line\"><span class=\"comment\">eni90208382a7b</span></span><br><span class=\"line\"><span class=\"comment\">eni909411bbf11</span></span><br><span class=\"line\"><span class=\"comment\">eni94c3d2bb833</span></span><br><span class=\"line\"><span class=\"comment\">enia14f5f7c3e9</span></span><br><span class=\"line\"><span class=\"comment\">enib70b44b2399</span></span><br><span class=\"line\"><span class=\"comment\">enic2ad9523b38 ###</span></span><br><span class=\"line\"><span class=\"comment\">88</span></span><br><span class=\"line\"><span class=\"comment\">enid60e48c6616</span></span><br><span class=\"line\"><span class=\"comment\">enid8f13b5dd06</span></span><br><span class=\"line\"><span class=\"comment\">enida858799e91</span></span><br><span class=\"line\"><span class=\"comment\">enieee4f7696a1</span></span><br><span class=\"line\"><span class=\"comment\">enif0d5e81d420</span></span><br><span class=\"line\"><span class=\"comment\">eth0</span></span><br><span class=\"line\"><span class=\"comment\">eth1</span></span><br><span class=\"line\"><span class=\"comment\">lo</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>tcpdump </p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  ssh-keys git:(master)  ssh -F ~/.matrix/jp/ssh.aux.config 10.200.1.202 -l ec2-user \"sudo tcpdump -vvv -i enic2ad9523b38 tcp port 80 -w -\" | wireshark -k -i -</span><br><span class=\"line\">Warning: Permanently added '10.200.1.4' (ECDSA) to the list of known hosts.</span><br><span class=\"line\">Warning: Permanently added '10.200.1.202' (ECDSA) to the list of known hosts.</span><br><span class=\"line\">tcpdump: listening on eni86f5b593a42, link-type EN10MB (Ethernet), capture size 262144 bytes</span><br><span class=\"line\">tcpdump: pcap_loop: The interface went down</span><br><span class=\"line\">7408 packets captured</span><br><span class=\"line\">7408 packets received by filter</span><br><span class=\"line\">0 packets dropped by kernel</span><br></pre></td></tr></table></figure></li>\n</ol>\n"},{"layout":"post","title":"keepalived","published":1,"author":"xiemx","comments":1,"date":"2016-08-23T20:08:05.000Z","_content":"\n  \nkeepalived\n\n1  wget http://www.keepalived.org/software/keepalived-1.2.23.tar.gz\n  \n2  tar xf keepalived-1.2.23.tar.gz\n  \n3  cd keepalived-1.2.23\n  \n4  ./configure prefix=/opt/keepalived keepalived ipvs \n  \nconfigure \n```\nKeepalived configuration\n------------------------\nKeepalived version : 1.2.23\nCompiler : gcc\nCompiler flags : -g -O2\nExtra Lib : -lpopt -lssl -lcrypto\nUse IPVS Framework : Yes\nIPVS sync daemon support : Yes\nUse VRRP Framework : Yes\nUse LinkWatch : No\nUse Debug flags : No\n```\n5  \nmake&&make install\n6 \n```\ncd /opt/keepalived/\nmkdir /etc/keepalived/\ncp sbin/keepalived /usr/sbin/\ncp etc/keepalived/keepalived.conf /etc/keepalived/\ncp etc/sysconfig/keepalived /etc/sysconfig/\ncp etc/rc.d/init.d/keepalived /etc/init.d/\n```\n7keepalived\n```\n[root@cluster-node1 keepalived]# /etc/init.d/keepalived start\nStarting keepalived (via systemctl):  [  OK  ]\n[root@cluster-node1 keepalived]# ps -ef | grep keepalived\nroot       4662      1  0 01:22 ?        00:00:00 keepalived -D\nroot       4664   4662  0 01:22 ?        00:00:00 keepalived -D\nroot       4665   4662  0 01:22 ?        00:00:00 keepalived -D\nroot      16435   2705  0 01:37 pts/0    00:00:00 grep --color=auto keepalived\n```\n8\n```\n[root@cluster-node1 keepalived]# cat /etc/keepalived/keepalived.conf \n! Configuration File for keepalived\n\nglobal_defs {\n   notification_email {\n     acassen@firewall.loc\n     failover@firewall.loc\n     sysadmin@firewall.loc\n   }\n   notification_email_from Alexandre.Cassen@firewall.loc\n   smtp_server 192.168.200.1\n   smtp_connect_timeout 30\n   router_id node1\n   vrrp_skip_check_adv_addr\n   vrrp_strict\n   vrrp_garp_interval 0\n   vrrp_gna_interval 0\n}\n\nvrrp_instance VI_1 {\n    state MASTER\n    interface eno16777736 \n    virtual_router_id 51\n    priority 100\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        10.0.0.1/24\n    }\n}\nvrrp_instance VI_2 {\n    state BACKUP\n    interface eno16777736 \n    virtual_router_id 52\n    priority 50\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        10.0.1.1/24\n    }\n}\n```\n```\n[root@cluster-node2 keepalived]# cat /etc/keepalived/keepalived.conf \n! Configuration File for keepalived\n\nglobal_defs {\n   notification_email {\n     acassen@firewall.loc\n     failover@firewall.loc\n     sysadmin@firewall.loc\n   }\n   notification_email_from Alexandre.Cassen@firewall.loc\n   smtp_server 192.168.200.1\n   smtp_connect_timeout 30\n   router_id node2\n   vrrp_skip_check_adv_addr\n   vrrp_strict\n   vrrp_garp_interval 0\n   vrrp_gna_interval 0\n}\n\nvrrp_instance VI_1 {\n    state BACKUP\n    interface eno16777736\n    virtual_router_id 51\n    priority 50\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        10.0.0.1/24\n    }\n}\nvrrp_instance VI_2 {\n    state MASTER\n    interface eno16777736\n    virtual_router_id 52\n    priority 100\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        10.0.1.1/24\n    }\n}\n```\n9keepalivedvip\n```\n[root@cluster-node1 keepalived]# ip add | egrep \"0.1|1.1\"\n inet 127.0.0.1/8 scope host lo\n inet6 ::1/128 scope host \n inet 10.0.0.1/24 scope global eno16777736\n[root@cluster-node2 keepalived]# ip add | egrep \"0.1|1.1\"\n inet 127.0.0.1/8 scope host lo\n inet6 ::1/128 scope host \n inet 10.0.1.1/24 scope global eno16777736\n```\n","source":"_posts/keepalived-multi-server.md","raw":"---\nlayout: post\ntitle: keepalived\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-08-24 04:08:05\ntags: [ keepalived, cluster]\ncategories:\n    - keepalived\n---\n\n  \nkeepalived\n\n1  wget http://www.keepalived.org/software/keepalived-1.2.23.tar.gz\n  \n2  tar xf keepalived-1.2.23.tar.gz\n  \n3  cd keepalived-1.2.23\n  \n4  ./configure prefix=/opt/keepalived keepalived ipvs \n  \nconfigure \n```\nKeepalived configuration\n------------------------\nKeepalived version : 1.2.23\nCompiler : gcc\nCompiler flags : -g -O2\nExtra Lib : -lpopt -lssl -lcrypto\nUse IPVS Framework : Yes\nIPVS sync daemon support : Yes\nUse VRRP Framework : Yes\nUse LinkWatch : No\nUse Debug flags : No\n```\n5  \nmake&&make install\n6 \n```\ncd /opt/keepalived/\nmkdir /etc/keepalived/\ncp sbin/keepalived /usr/sbin/\ncp etc/keepalived/keepalived.conf /etc/keepalived/\ncp etc/sysconfig/keepalived /etc/sysconfig/\ncp etc/rc.d/init.d/keepalived /etc/init.d/\n```\n7keepalived\n```\n[root@cluster-node1 keepalived]# /etc/init.d/keepalived start\nStarting keepalived (via systemctl):  [  OK  ]\n[root@cluster-node1 keepalived]# ps -ef | grep keepalived\nroot       4662      1  0 01:22 ?        00:00:00 keepalived -D\nroot       4664   4662  0 01:22 ?        00:00:00 keepalived -D\nroot       4665   4662  0 01:22 ?        00:00:00 keepalived -D\nroot      16435   2705  0 01:37 pts/0    00:00:00 grep --color=auto keepalived\n```\n8\n```\n[root@cluster-node1 keepalived]# cat /etc/keepalived/keepalived.conf \n! Configuration File for keepalived\n\nglobal_defs {\n   notification_email {\n     acassen@firewall.loc\n     failover@firewall.loc\n     sysadmin@firewall.loc\n   }\n   notification_email_from Alexandre.Cassen@firewall.loc\n   smtp_server 192.168.200.1\n   smtp_connect_timeout 30\n   router_id node1\n   vrrp_skip_check_adv_addr\n   vrrp_strict\n   vrrp_garp_interval 0\n   vrrp_gna_interval 0\n}\n\nvrrp_instance VI_1 {\n    state MASTER\n    interface eno16777736 \n    virtual_router_id 51\n    priority 100\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        10.0.0.1/24\n    }\n}\nvrrp_instance VI_2 {\n    state BACKUP\n    interface eno16777736 \n    virtual_router_id 52\n    priority 50\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        10.0.1.1/24\n    }\n}\n```\n```\n[root@cluster-node2 keepalived]# cat /etc/keepalived/keepalived.conf \n! Configuration File for keepalived\n\nglobal_defs {\n   notification_email {\n     acassen@firewall.loc\n     failover@firewall.loc\n     sysadmin@firewall.loc\n   }\n   notification_email_from Alexandre.Cassen@firewall.loc\n   smtp_server 192.168.200.1\n   smtp_connect_timeout 30\n   router_id node2\n   vrrp_skip_check_adv_addr\n   vrrp_strict\n   vrrp_garp_interval 0\n   vrrp_gna_interval 0\n}\n\nvrrp_instance VI_1 {\n    state BACKUP\n    interface eno16777736\n    virtual_router_id 51\n    priority 50\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        10.0.0.1/24\n    }\n}\nvrrp_instance VI_2 {\n    state MASTER\n    interface eno16777736\n    virtual_router_id 52\n    priority 100\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        10.0.1.1/24\n    }\n}\n```\n9keepalivedvip\n```\n[root@cluster-node1 keepalived]# ip add | egrep \"0.1|1.1\"\n inet 127.0.0.1/8 scope host lo\n inet6 ::1/128 scope host \n inet 10.0.0.1/24 scope global eno16777736\n[root@cluster-node2 keepalived]# ip add | egrep \"0.1|1.1\"\n inet 127.0.0.1/8 scope host lo\n inet6 ::1/128 scope host \n inet 10.0.1.1/24 scope global eno16777736\n```\n","slug":"keepalived-multi-server","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyid30024u9urt26wtcft","content":"<p>keepalived</p>\n<p>1  wget <a href=\"http://www.keepalived.org/software/keepalived-1.2.23.tar.gz\" target=\"_blank\" rel=\"noopener\">http://www.keepalived.org/software/keepalived-1.2.23.tar.gz</a></p>\n<p>2  tar xf keepalived-1.2.23.tar.gz</p>\n<p>3  cd keepalived-1.2.23</p>\n<p>4  ./configure prefix=/opt/keepalived keepalived ipvs </p>\n<p>configure </p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Keepalived configuration</span><br><span class=\"line\">------------------------</span><br><span class=\"line\">Keepalived version : 1.2.23</span><br><span class=\"line\">Compiler : gcc</span><br><span class=\"line\">Compiler flags : -g -O2</span><br><span class=\"line\">Extra Lib : -lpopt -lssl -lcrypto</span><br><span class=\"line\">Use IPVS Framework : <span class=\"literal\">Yes</span></span><br><span class=\"line\">IPVS sync daemon support : <span class=\"literal\">Yes</span></span><br><span class=\"line\">Use<span class=\"built_in\"> VRRP </span>Framework : <span class=\"literal\">Yes</span></span><br><span class=\"line\">Use LinkWatch : <span class=\"literal\">No</span></span><br><span class=\"line\">Use <span class=\"builtin-name\">Debug</span> flags : <span class=\"literal\">No</span></span><br></pre></td></tr></table></figure>\n\n<p>5 <br>make&amp;&amp;make install<br>6 </p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd <span class=\"regexp\">/opt/</span>keepalived/</span><br><span class=\"line\">mkdir <span class=\"regexp\">/etc/</span>keepalived/</span><br><span class=\"line\">cp sbin<span class=\"regexp\">/keepalived /</span>usr<span class=\"regexp\">/sbin/</span></span><br><span class=\"line\">cp etc<span class=\"regexp\">/keepalived/</span>keepalived.conf <span class=\"regexp\">/etc/</span>keepalived/</span><br><span class=\"line\">cp etc<span class=\"regexp\">/sysconfig/</span>keepalived <span class=\"regexp\">/etc/</span>sysconfig/</span><br><span class=\"line\">cp etc<span class=\"regexp\">/rc.d/</span>init.d<span class=\"regexp\">/keepalived /</span>etc<span class=\"regexp\">/init.d/</span></span><br></pre></td></tr></table></figure>\n\n<p>7keepalived</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>cluster-node1 keepalived]# /etc/init.d/keepalived start</span><br><span class=\"line\">Starting keepalived (via systemctl):  [  OK  ]</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>cluster-node1 keepalived]# ps -ef | grep keepalived</span><br><span class=\"line\">root       <span class=\"number\">4662</span>      <span class=\"number\">1</span>  <span class=\"number\">0</span> <span class=\"number\">01</span>:<span class=\"number\">22</span> ?        <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> keepalived -D</span><br><span class=\"line\">root       <span class=\"number\">4664</span>   <span class=\"number\">4662</span>  <span class=\"number\">0</span> <span class=\"number\">01</span>:<span class=\"number\">22</span> ?        <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> keepalived -D</span><br><span class=\"line\">root       <span class=\"number\">4665</span>   <span class=\"number\">4662</span>  <span class=\"number\">0</span> <span class=\"number\">01</span>:<span class=\"number\">22</span> ?        <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> keepalived -D</span><br><span class=\"line\">root      <span class=\"number\">16435</span>   <span class=\"number\">2705</span>  <span class=\"number\">0</span> <span class=\"number\">01</span>:<span class=\"number\">37</span> pts/<span class=\"number\">0</span>    <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> grep --color=<span class=\"built_in\">auto</span> keepalived</span><br></pre></td></tr></table></figure>\n\n<p>8</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>cluster-node1 keepalived]# cat /etc/keepalived/keepalived.conf </span><br><span class=\"line\">! Configuration File <span class=\"keyword\">for</span> keepalived</span><br><span class=\"line\"></span><br><span class=\"line\">global_defs &#123;</span><br><span class=\"line\">   notification_email &#123;</span><br><span class=\"line\">     <span class=\"symbol\">acassen@</span>firewall.loc</span><br><span class=\"line\">     <span class=\"symbol\">failover@</span>firewall.loc</span><br><span class=\"line\">     <span class=\"symbol\">sysadmin@</span>firewall.loc</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   notification_email_from Alexandre.<span class=\"symbol\">Cassen@</span>firewall.loc</span><br><span class=\"line\">   smtp_server <span class=\"number\">192.168</span><span class=\"number\">.200</span><span class=\"number\">.1</span></span><br><span class=\"line\">   smtp_connect_timeout <span class=\"number\">30</span></span><br><span class=\"line\">   router_id node1</span><br><span class=\"line\">   vrrp_skip_check_adv_addr</span><br><span class=\"line\">   vrrp_strict</span><br><span class=\"line\">   vrrp_garp_interval <span class=\"number\">0</span></span><br><span class=\"line\">   vrrp_gna_interval <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">vrrp_instance VI_1 &#123;</span><br><span class=\"line\">    state MASTER</span><br><span class=\"line\">    <span class=\"keyword\">interface</span> <span class=\"symbol\">eno16777736</span> </span><br><span class=\"line\">    <span class=\"symbol\">virtual_router_id</span> <span class=\"symbol\">51</span></span><br><span class=\"line\">    <span class=\"symbol\">priority</span> <span class=\"symbol\">100</span></span><br><span class=\"line\">    <span class=\"symbol\">advert_int</span> <span class=\"symbol\">1</span></span><br><span class=\"line\">    <span class=\"symbol\">authentication</span> &#123;</span><br><span class=\"line\">        auth_type PASS</span><br><span class=\"line\">        auth_pass <span class=\"number\">1111</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    virtual_ipaddress &#123;</span><br><span class=\"line\">        <span class=\"number\">10.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>/<span class=\"number\">24</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">vrrp_instance VI_2 &#123;</span><br><span class=\"line\">    state BACKUP</span><br><span class=\"line\">    <span class=\"keyword\">interface</span> <span class=\"symbol\">eno16777736</span> </span><br><span class=\"line\">    <span class=\"symbol\">virtual_router_id</span> <span class=\"symbol\">52</span></span><br><span class=\"line\">    <span class=\"symbol\">priority</span> <span class=\"symbol\">50</span></span><br><span class=\"line\">    <span class=\"symbol\">advert_int</span> <span class=\"symbol\">1</span></span><br><span class=\"line\">    <span class=\"symbol\">authentication</span> &#123;</span><br><span class=\"line\">        auth_type PASS</span><br><span class=\"line\">        auth_pass <span class=\"number\">1111</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    virtual_ipaddress &#123;</span><br><span class=\"line\">        <span class=\"number\">10.0</span><span class=\"number\">.1</span><span class=\"number\">.1</span>/<span class=\"number\">24</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>cluster-node2 keepalived]# cat /etc/keepalived/keepalived.conf </span><br><span class=\"line\">! Configuration File <span class=\"keyword\">for</span> keepalived</span><br><span class=\"line\"></span><br><span class=\"line\">global_defs &#123;</span><br><span class=\"line\">   notification_email &#123;</span><br><span class=\"line\">     <span class=\"symbol\">acassen@</span>firewall.loc</span><br><span class=\"line\">     <span class=\"symbol\">failover@</span>firewall.loc</span><br><span class=\"line\">     <span class=\"symbol\">sysadmin@</span>firewall.loc</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   notification_email_from Alexandre.<span class=\"symbol\">Cassen@</span>firewall.loc</span><br><span class=\"line\">   smtp_server <span class=\"number\">192.168</span><span class=\"number\">.200</span><span class=\"number\">.1</span></span><br><span class=\"line\">   smtp_connect_timeout <span class=\"number\">30</span></span><br><span class=\"line\">   router_id node2</span><br><span class=\"line\">   vrrp_skip_check_adv_addr</span><br><span class=\"line\">   vrrp_strict</span><br><span class=\"line\">   vrrp_garp_interval <span class=\"number\">0</span></span><br><span class=\"line\">   vrrp_gna_interval <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">vrrp_instance VI_1 &#123;</span><br><span class=\"line\">    state BACKUP</span><br><span class=\"line\">    <span class=\"keyword\">interface</span> <span class=\"symbol\">eno16777736</span></span><br><span class=\"line\">    <span class=\"symbol\">virtual_router_id</span> <span class=\"symbol\">51</span></span><br><span class=\"line\">    <span class=\"symbol\">priority</span> <span class=\"symbol\">50</span></span><br><span class=\"line\">    <span class=\"symbol\">advert_int</span> <span class=\"symbol\">1</span></span><br><span class=\"line\">    <span class=\"symbol\">authentication</span> &#123;</span><br><span class=\"line\">        auth_type PASS</span><br><span class=\"line\">        auth_pass <span class=\"number\">1111</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    virtual_ipaddress &#123;</span><br><span class=\"line\">        <span class=\"number\">10.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>/<span class=\"number\">24</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">vrrp_instance VI_2 &#123;</span><br><span class=\"line\">    state MASTER</span><br><span class=\"line\">    <span class=\"keyword\">interface</span> <span class=\"symbol\">eno16777736</span></span><br><span class=\"line\">    <span class=\"symbol\">virtual_router_id</span> <span class=\"symbol\">52</span></span><br><span class=\"line\">    <span class=\"symbol\">priority</span> <span class=\"symbol\">100</span></span><br><span class=\"line\">    <span class=\"symbol\">advert_int</span> <span class=\"symbol\">1</span></span><br><span class=\"line\">    <span class=\"symbol\">authentication</span> &#123;</span><br><span class=\"line\">        auth_type PASS</span><br><span class=\"line\">        auth_pass <span class=\"number\">1111</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    virtual_ipaddress &#123;</span><br><span class=\"line\">        <span class=\"number\">10.0</span><span class=\"number\">.1</span><span class=\"number\">.1</span>/<span class=\"number\">24</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>9keepalivedvip</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@cluster-node1 keepalived]#<span class=\"built_in\"> ip </span><span class=\"builtin-name\">add</span> | egrep <span class=\"string\">\"0.1|1.1\"</span></span><br><span class=\"line\"> inet 127.0.0.1/8 scope host lo</span><br><span class=\"line\"> inet6 ::1/128 scope host </span><br><span class=\"line\"> inet 10.0.0.1/24 scope global eno16777736</span><br><span class=\"line\">[root@cluster-node2 keepalived]#<span class=\"built_in\"> ip </span><span class=\"builtin-name\">add</span> | egrep <span class=\"string\">\"0.1|1.1\"</span></span><br><span class=\"line\"> inet 127.0.0.1/8 scope host lo</span><br><span class=\"line\"> inet6 ::1/128 scope host </span><br><span class=\"line\"> inet 10.0.1.1/24 scope global eno16777736</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p>keepalived</p>\n<p>1  wget <a href=\"http://www.keepalived.org/software/keepalived-1.2.23.tar.gz\" target=\"_blank\" rel=\"noopener\">http://www.keepalived.org/software/keepalived-1.2.23.tar.gz</a></p>\n<p>2  tar xf keepalived-1.2.23.tar.gz</p>\n<p>3  cd keepalived-1.2.23</p>\n<p>4  ./configure prefix=/opt/keepalived keepalived ipvs </p>\n<p>configure </p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Keepalived configuration</span><br><span class=\"line\">------------------------</span><br><span class=\"line\">Keepalived version : 1.2.23</span><br><span class=\"line\">Compiler : gcc</span><br><span class=\"line\">Compiler flags : -g -O2</span><br><span class=\"line\">Extra Lib : -lpopt -lssl -lcrypto</span><br><span class=\"line\">Use IPVS Framework : <span class=\"literal\">Yes</span></span><br><span class=\"line\">IPVS sync daemon support : <span class=\"literal\">Yes</span></span><br><span class=\"line\">Use<span class=\"built_in\"> VRRP </span>Framework : <span class=\"literal\">Yes</span></span><br><span class=\"line\">Use LinkWatch : <span class=\"literal\">No</span></span><br><span class=\"line\">Use <span class=\"builtin-name\">Debug</span> flags : <span class=\"literal\">No</span></span><br></pre></td></tr></table></figure>\n\n<p>5 <br>make&amp;&amp;make install<br>6 </p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd <span class=\"regexp\">/opt/</span>keepalived/</span><br><span class=\"line\">mkdir <span class=\"regexp\">/etc/</span>keepalived/</span><br><span class=\"line\">cp sbin<span class=\"regexp\">/keepalived /</span>usr<span class=\"regexp\">/sbin/</span></span><br><span class=\"line\">cp etc<span class=\"regexp\">/keepalived/</span>keepalived.conf <span class=\"regexp\">/etc/</span>keepalived/</span><br><span class=\"line\">cp etc<span class=\"regexp\">/sysconfig/</span>keepalived <span class=\"regexp\">/etc/</span>sysconfig/</span><br><span class=\"line\">cp etc<span class=\"regexp\">/rc.d/</span>init.d<span class=\"regexp\">/keepalived /</span>etc<span class=\"regexp\">/init.d/</span></span><br></pre></td></tr></table></figure>\n\n<p>7keepalived</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>cluster-node1 keepalived]# /etc/init.d/keepalived start</span><br><span class=\"line\">Starting keepalived (via systemctl):  [  OK  ]</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>cluster-node1 keepalived]# ps -ef | grep keepalived</span><br><span class=\"line\">root       <span class=\"number\">4662</span>      <span class=\"number\">1</span>  <span class=\"number\">0</span> <span class=\"number\">01</span>:<span class=\"number\">22</span> ?        <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> keepalived -D</span><br><span class=\"line\">root       <span class=\"number\">4664</span>   <span class=\"number\">4662</span>  <span class=\"number\">0</span> <span class=\"number\">01</span>:<span class=\"number\">22</span> ?        <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> keepalived -D</span><br><span class=\"line\">root       <span class=\"number\">4665</span>   <span class=\"number\">4662</span>  <span class=\"number\">0</span> <span class=\"number\">01</span>:<span class=\"number\">22</span> ?        <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> keepalived -D</span><br><span class=\"line\">root      <span class=\"number\">16435</span>   <span class=\"number\">2705</span>  <span class=\"number\">0</span> <span class=\"number\">01</span>:<span class=\"number\">37</span> pts/<span class=\"number\">0</span>    <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> grep --color=<span class=\"built_in\">auto</span> keepalived</span><br></pre></td></tr></table></figure>\n\n<p>8</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>cluster-node1 keepalived]# cat /etc/keepalived/keepalived.conf </span><br><span class=\"line\">! Configuration File <span class=\"keyword\">for</span> keepalived</span><br><span class=\"line\"></span><br><span class=\"line\">global_defs &#123;</span><br><span class=\"line\">   notification_email &#123;</span><br><span class=\"line\">     <span class=\"symbol\">acassen@</span>firewall.loc</span><br><span class=\"line\">     <span class=\"symbol\">failover@</span>firewall.loc</span><br><span class=\"line\">     <span class=\"symbol\">sysadmin@</span>firewall.loc</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   notification_email_from Alexandre.<span class=\"symbol\">Cassen@</span>firewall.loc</span><br><span class=\"line\">   smtp_server <span class=\"number\">192.168</span><span class=\"number\">.200</span><span class=\"number\">.1</span></span><br><span class=\"line\">   smtp_connect_timeout <span class=\"number\">30</span></span><br><span class=\"line\">   router_id node1</span><br><span class=\"line\">   vrrp_skip_check_adv_addr</span><br><span class=\"line\">   vrrp_strict</span><br><span class=\"line\">   vrrp_garp_interval <span class=\"number\">0</span></span><br><span class=\"line\">   vrrp_gna_interval <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">vrrp_instance VI_1 &#123;</span><br><span class=\"line\">    state MASTER</span><br><span class=\"line\">    <span class=\"keyword\">interface</span> <span class=\"symbol\">eno16777736</span> </span><br><span class=\"line\">    <span class=\"symbol\">virtual_router_id</span> <span class=\"symbol\">51</span></span><br><span class=\"line\">    <span class=\"symbol\">priority</span> <span class=\"symbol\">100</span></span><br><span class=\"line\">    <span class=\"symbol\">advert_int</span> <span class=\"symbol\">1</span></span><br><span class=\"line\">    <span class=\"symbol\">authentication</span> &#123;</span><br><span class=\"line\">        auth_type PASS</span><br><span class=\"line\">        auth_pass <span class=\"number\">1111</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    virtual_ipaddress &#123;</span><br><span class=\"line\">        <span class=\"number\">10.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>/<span class=\"number\">24</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">vrrp_instance VI_2 &#123;</span><br><span class=\"line\">    state BACKUP</span><br><span class=\"line\">    <span class=\"keyword\">interface</span> <span class=\"symbol\">eno16777736</span> </span><br><span class=\"line\">    <span class=\"symbol\">virtual_router_id</span> <span class=\"symbol\">52</span></span><br><span class=\"line\">    <span class=\"symbol\">priority</span> <span class=\"symbol\">50</span></span><br><span class=\"line\">    <span class=\"symbol\">advert_int</span> <span class=\"symbol\">1</span></span><br><span class=\"line\">    <span class=\"symbol\">authentication</span> &#123;</span><br><span class=\"line\">        auth_type PASS</span><br><span class=\"line\">        auth_pass <span class=\"number\">1111</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    virtual_ipaddress &#123;</span><br><span class=\"line\">        <span class=\"number\">10.0</span><span class=\"number\">.1</span><span class=\"number\">.1</span>/<span class=\"number\">24</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>cluster-node2 keepalived]# cat /etc/keepalived/keepalived.conf </span><br><span class=\"line\">! Configuration File <span class=\"keyword\">for</span> keepalived</span><br><span class=\"line\"></span><br><span class=\"line\">global_defs &#123;</span><br><span class=\"line\">   notification_email &#123;</span><br><span class=\"line\">     <span class=\"symbol\">acassen@</span>firewall.loc</span><br><span class=\"line\">     <span class=\"symbol\">failover@</span>firewall.loc</span><br><span class=\"line\">     <span class=\"symbol\">sysadmin@</span>firewall.loc</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   notification_email_from Alexandre.<span class=\"symbol\">Cassen@</span>firewall.loc</span><br><span class=\"line\">   smtp_server <span class=\"number\">192.168</span><span class=\"number\">.200</span><span class=\"number\">.1</span></span><br><span class=\"line\">   smtp_connect_timeout <span class=\"number\">30</span></span><br><span class=\"line\">   router_id node2</span><br><span class=\"line\">   vrrp_skip_check_adv_addr</span><br><span class=\"line\">   vrrp_strict</span><br><span class=\"line\">   vrrp_garp_interval <span class=\"number\">0</span></span><br><span class=\"line\">   vrrp_gna_interval <span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">vrrp_instance VI_1 &#123;</span><br><span class=\"line\">    state BACKUP</span><br><span class=\"line\">    <span class=\"keyword\">interface</span> <span class=\"symbol\">eno16777736</span></span><br><span class=\"line\">    <span class=\"symbol\">virtual_router_id</span> <span class=\"symbol\">51</span></span><br><span class=\"line\">    <span class=\"symbol\">priority</span> <span class=\"symbol\">50</span></span><br><span class=\"line\">    <span class=\"symbol\">advert_int</span> <span class=\"symbol\">1</span></span><br><span class=\"line\">    <span class=\"symbol\">authentication</span> &#123;</span><br><span class=\"line\">        auth_type PASS</span><br><span class=\"line\">        auth_pass <span class=\"number\">1111</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    virtual_ipaddress &#123;</span><br><span class=\"line\">        <span class=\"number\">10.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>/<span class=\"number\">24</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">vrrp_instance VI_2 &#123;</span><br><span class=\"line\">    state MASTER</span><br><span class=\"line\">    <span class=\"keyword\">interface</span> <span class=\"symbol\">eno16777736</span></span><br><span class=\"line\">    <span class=\"symbol\">virtual_router_id</span> <span class=\"symbol\">52</span></span><br><span class=\"line\">    <span class=\"symbol\">priority</span> <span class=\"symbol\">100</span></span><br><span class=\"line\">    <span class=\"symbol\">advert_int</span> <span class=\"symbol\">1</span></span><br><span class=\"line\">    <span class=\"symbol\">authentication</span> &#123;</span><br><span class=\"line\">        auth_type PASS</span><br><span class=\"line\">        auth_pass <span class=\"number\">1111</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    virtual_ipaddress &#123;</span><br><span class=\"line\">        <span class=\"number\">10.0</span><span class=\"number\">.1</span><span class=\"number\">.1</span>/<span class=\"number\">24</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>9keepalivedvip</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@cluster-node1 keepalived]#<span class=\"built_in\"> ip </span><span class=\"builtin-name\">add</span> | egrep <span class=\"string\">\"0.1|1.1\"</span></span><br><span class=\"line\"> inet 127.0.0.1/8 scope host lo</span><br><span class=\"line\"> inet6 ::1/128 scope host </span><br><span class=\"line\"> inet 10.0.0.1/24 scope global eno16777736</span><br><span class=\"line\">[root@cluster-node2 keepalived]#<span class=\"built_in\"> ip </span><span class=\"builtin-name\">add</span> | egrep <span class=\"string\">\"0.1|1.1\"</span></span><br><span class=\"line\"> inet 127.0.0.1/8 scope host lo</span><br><span class=\"line\"> inet6 ::1/128 scope host </span><br><span class=\"line\"> inet 10.0.1.1/24 scope global eno16777736</span><br></pre></td></tr></table></figure>\n\n"},{"layout":"post","title":"keepalivedIPVS","published":1,"author":"xiemx","comments":1,"date":"2016-08-23T21:08:21.000Z","_content":"keepalivedkeepalivedip_vs\n  \nkeepalived/usr/src/linux`/usr/src/kernels/$(uname -r)/`kernel-devel)\n  \n\n  ```\nln -s /usr/src/kernels/`uname -r`/ /usr/src/linux\n --with-kernel-dir=/usr/src/kernels/`uname -r`/\nkeepalived\n```\n","source":"_posts/keepalived-not-support-IPVS.md","raw":"---\nlayout: post\ntitle: keepalivedIPVS\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-08-24 05:08:21\ntags: [ keepalived, cluster]\ncategories:\n    - keepalived\n---\nkeepalivedkeepalivedip_vs\n  \nkeepalived/usr/src/linux`/usr/src/kernels/$(uname -r)/`kernel-devel)\n  \n\n  ```\nln -s /usr/src/kernels/`uname -r`/ /usr/src/linux\n --with-kernel-dir=/usr/src/kernels/`uname -r`/\nkeepalived\n```\n","slug":"keepalived-not-support-IPVS","updated":"2019-10-21T06:57:42.989Z","photos":[],"link":"","_id":"ck42dyid60027u9urhtb9rqg1","content":"<p>keepalivedkeepalivedip_vs</p>\n<p>keepalived/usr/src/linux<code>/usr/src/kernels/$(uname -r)/</code>kernel-devel)</p>\n<p><br>  <figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s <span class=\"regexp\">/usr/</span>src<span class=\"regexp\">/kernels/</span>`uname -r`<span class=\"regexp\">/ /</span>usr<span class=\"regexp\">/src/</span>linux</span><br><span class=\"line\"> --with-kernel-dir=<span class=\"regexp\">/usr/</span>src<span class=\"regexp\">/kernels/</span>`uname -r`/</span><br><span class=\"line\">keepalived</span><br></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<p>keepalivedkeepalivedip_vs</p>\n<p>keepalived/usr/src/linux<code>/usr/src/kernels/$(uname -r)/</code>kernel-devel)</p>\n<p><br>  <figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s <span class=\"regexp\">/usr/</span>src<span class=\"regexp\">/kernels/</span>`uname -r`<span class=\"regexp\">/ /</span>usr<span class=\"regexp\">/src/</span>linux</span><br><span class=\"line\"> --with-kernel-dir=<span class=\"regexp\">/usr/</span>src<span class=\"regexp\">/kernels/</span>`uname -r`/</span><br><span class=\"line\">keepalived</span><br></pre></td></tr></table></figure></p>\n"},{"layout":"post","title":"Linux","published":1,"author":"xiemx","comments":1,"date":"2015-11-14T20:11:22.000Z","_content":"1. postBIOS\n  \ncpuBIOSbiosU\n\n2. MBR\n  \n0MBRMaster Boot Record512446boots loader642\n  \nBIOSMBR07c00Boot Loaderboot loader grublilo\n\n3. Boot Loader\n  \ngrubmenu.lstgrub.lst\n\n4. \n  \ngrub.confinitrd\n\n5. init\n  \n/sbin/init/etc/init/rc.Scanf,/etc/rc.d/rc.sysinit/etc/inittab\n\n6. inittab\n  \nrc0.drc6.d/etc/rc.d/rcX.d/\n\n7. /etc/rc.d/rc.local\n  \n/etc/rc.d/rcX.d/rc.local\n  \n8. /bin/login\n  \n\n\nboot loader\n","source":"_posts/linux-boot-workflow.md","raw":"---\nlayout: post\ntitle: Linux\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-11-15 04:11:22\ntags: [ linux ]\ncategories:\n    - linux\n---\n1. postBIOS\n  \ncpuBIOSbiosU\n\n2. MBR\n  \n0MBRMaster Boot Record512446boots loader642\n  \nBIOSMBR07c00Boot Loaderboot loader grublilo\n\n3. Boot Loader\n  \ngrubmenu.lstgrub.lst\n\n4. \n  \ngrub.confinitrd\n\n5. init\n  \n/sbin/init/etc/init/rc.Scanf,/etc/rc.d/rc.sysinit/etc/inittab\n\n6. inittab\n  \nrc0.drc6.d/etc/rc.d/rcX.d/\n\n7. /etc/rc.d/rc.local\n  \n/etc/rc.d/rcX.d/rc.local\n  \n8. /bin/login\n  \n\n\nboot loader\n","slug":"linux-boot-workflow","updated":"2019-10-21T06:57:42.697Z","photos":[],"link":"","_id":"ck42dyid7002cu9urkz2saysu","content":"<ol>\n<li>postBIOS</li>\n</ol>\n<p>cpuBIOSbiosU</p>\n<ol start=\"2\">\n<li>MBR</li>\n</ol>\n<p>0MBRMaster Boot Record512446boots loader642</p>\n<p>BIOSMBR07c00Boot Loaderboot loader grublilo</p>\n<ol start=\"3\">\n<li>Boot Loader</li>\n</ol>\n<p>grubmenu.lstgrub.lst</p>\n<ol start=\"4\">\n<li></li>\n</ol>\n<p>grub.confinitrd</p>\n<ol start=\"5\">\n<li>init</li>\n</ol>\n<p>/sbin/init/etc/init/rc.Scanf,/etc/rc.d/rc.sysinit/etc/inittab</p>\n<ol start=\"6\">\n<li>inittab</li>\n</ol>\n<p>rc0.drc6.d/etc/rc.d/rcX.d/</p>\n<ol start=\"7\">\n<li>/etc/rc.d/rc.local</li>\n</ol>\n<p>/etc/rc.d/rcX.d/rc.local</p>\n<ol start=\"8\">\n<li>/bin/login</li>\n</ol>\n<p></p>\n<p>boot loader</p>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li>postBIOS</li>\n</ol>\n<p>cpuBIOSbiosU</p>\n<ol start=\"2\">\n<li>MBR</li>\n</ol>\n<p>0MBRMaster Boot Record512446boots loader642</p>\n<p>BIOSMBR07c00Boot Loaderboot loader grublilo</p>\n<ol start=\"3\">\n<li>Boot Loader</li>\n</ol>\n<p>grubmenu.lstgrub.lst</p>\n<ol start=\"4\">\n<li></li>\n</ol>\n<p>grub.confinitrd</p>\n<ol start=\"5\">\n<li>init</li>\n</ol>\n<p>/sbin/init/etc/init/rc.Scanf,/etc/rc.d/rc.sysinit/etc/inittab</p>\n<ol start=\"6\">\n<li>inittab</li>\n</ol>\n<p>rc0.drc6.d/etc/rc.d/rcX.d/</p>\n<ol start=\"7\">\n<li>/etc/rc.d/rc.local</li>\n</ol>\n<p>/etc/rc.d/rcX.d/rc.local</p>\n<ol start=\"8\">\n<li>/bin/login</li>\n</ol>\n<p></p>\n<p>boot loader</p>\n"},{"layout":"post","title":"Linux","published":1,"author":"xiemx","comments":1,"date":"2015-11-28T03:11:05.000Z","_content":"\n* atatd\n* croncrond\n\n#### at\n\nvar/spool/at/batchbatchat\n\n\n```\nroot@localhost ~]# at  now + 5 minutes\n  at> /bin/mail  root -s \"testing at job\" < /root/.bashrc\n  at> <EOF>         <== [ctrl] + d var/spool/at/\n\n[root@localhost ~]# atq\n5 2015-11-25 23:00 a root\n[root@localhost ~]# atrm 5\n```\nman pageatqatrmetc/at.allowetc/at.denyatatallowatdeny\n\n#### cron\n\ncrondvar/spool/cron/etc/cron.allowetc/cron.denyetc/crontab crontab eetc/crontabcrontab\n\n\n```\ncrontab   \n-u  root / crontab \n-e  crontab vivivar/spool/cron\n-l  crontab \n-r  crontab  -e \n\nroot@localhost #crontab  -u  testuser  -e    #testuservi\n```\n\n```\n###\",\" \"-\" \"/\",\n30 * * * *           <==30hello\n*/10  *  *  *      <==10\n30 12 * * 1,3,5      <==1 3 51230\n30 12 1 3-5 *        <==3 4 511230\n```\n\netc/crontab ``cronetc/crontabcrontab4`run-parts`locatelogrotate\n```\n[root@localhost ~]# cat /etc/crontab\nSHELL=/bin/bash\nPATH=/sbin:/bin:/usr/sbin:/usr/bin\nMAILTO=root\nHOME=/\n\n# run-parts\n01 * * * * root run-parts /etc/cron.hourly <==\n02 4 * * * root run-parts /etc/cron.daily <==\n22 4 * * 0 root run-parts /etc/cron.weekly <==\n42 4 1 * * root run-parts /etc/cron.monthly <== 1 \n\n###run-parts which/usr/bin/run-partsman\n```\n","source":"_posts/linux-crontab-and-at.md","raw":"---\nlayout: post\ntitle: Linux\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-11-28 11:11:05\ntags: [ linux, command ]\ncategories:\n    - linux\n---\n\n* atatd\n* croncrond\n\n#### at\n\nvar/spool/at/batchbatchat\n\n\n```\nroot@localhost ~]# at  now + 5 minutes\n  at> /bin/mail  root -s \"testing at job\" < /root/.bashrc\n  at> <EOF>         <== [ctrl] + d var/spool/at/\n\n[root@localhost ~]# atq\n5 2015-11-25 23:00 a root\n[root@localhost ~]# atrm 5\n```\nman pageatqatrmetc/at.allowetc/at.denyatatallowatdeny\n\n#### cron\n\ncrondvar/spool/cron/etc/cron.allowetc/cron.denyetc/crontab crontab eetc/crontabcrontab\n\n\n```\ncrontab   \n-u  root / crontab \n-e  crontab vivivar/spool/cron\n-l  crontab \n-r  crontab  -e \n\nroot@localhost #crontab  -u  testuser  -e    #testuservi\n```\n\n```\n###\",\" \"-\" \"/\",\n30 * * * *           <==30hello\n*/10  *  *  *      <==10\n30 12 * * 1,3,5      <==1 3 51230\n30 12 1 3-5 *        <==3 4 511230\n```\n\netc/crontab ``cronetc/crontabcrontab4`run-parts`locatelogrotate\n```\n[root@localhost ~]# cat /etc/crontab\nSHELL=/bin/bash\nPATH=/sbin:/bin:/usr/sbin:/usr/bin\nMAILTO=root\nHOME=/\n\n# run-parts\n01 * * * * root run-parts /etc/cron.hourly <==\n02 4 * * * root run-parts /etc/cron.daily <==\n22 4 * * 0 root run-parts /etc/cron.weekly <==\n42 4 1 * * root run-parts /etc/cron.monthly <== 1 \n\n###run-parts which/usr/bin/run-partsman\n```\n","slug":"linux-crontab-and-at","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyid9002fu9urfuauibzy","content":"<p></p>\n<ul>\n<li>atatd</li>\n<li>croncrond</li>\n</ul>\n<h4 id=\"at\"><a href=\"#at\" class=\"headerlink\" title=\"at\"></a>at</h4><p>var/spool/at/batchbatchat</p>\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">root@</span>localhost ~]# at  now + <span class=\"number\">5</span> minutes</span><br><span class=\"line\">  at&gt; /bin/mail  root -s <span class=\"string\">\"testing at job\"</span> &lt; /root/.bashrc</span><br><span class=\"line\">  at&gt; &lt;EOF&gt;         &lt;== [ctrl] + d var/spool/at/</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# atq</span><br><span class=\"line\"><span class=\"number\">5</span> <span class=\"number\">2015</span><span class=\"number\">-11</span><span class=\"number\">-25</span> <span class=\"number\">23</span>:<span class=\"number\">00</span> a root</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# atrm <span class=\"number\">5</span></span><br></pre></td></tr></table></figure>\n\n<p>man pageatqatrmetc/at.allowetc/at.denyatatallowatdeny</p>\n<h4 id=\"cron\"><a href=\"#cron\" class=\"headerlink\" title=\"cron\"></a>cron</h4><p>crondvar/spool/cron/etc/cron.allowetc/cron.denyetc/crontab crontab eetc/crontabcrontab</p>\n<p></p>\n<figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab   </span><br><span class=\"line\"><span class=\"deletion\">-u  root / crontab </span></span><br><span class=\"line\"><span class=\"deletion\">-e  crontab vivivar/spool/cron</span></span><br><span class=\"line\"><span class=\"deletion\">-l  crontab </span></span><br><span class=\"line\"><span class=\"deletion\">-r  crontab  -e </span></span><br><span class=\"line\"></span><br><span class=\"line\">root@localhost #crontab  -u  testuser  -e    #testuservi</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">###<span class=\"string\">\",\"</span> <span class=\"string\">\"-\"</span> <span class=\"string\">\"/\"</span>,</span><br><span class=\"line\"><span class=\"number\">30</span> * * * *           &lt;==<span class=\"number\">30</span>hello</span><br><span class=\"line\">*/<span class=\"number\">10</span>  *  *  *      &lt;==<span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"number\">30</span> <span class=\"number\">12</span> * * <span class=\"number\">1</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>      &lt;==<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">5</span><span class=\"number\">12</span><span class=\"number\">30</span></span><br><span class=\"line\"><span class=\"number\">30</span> <span class=\"number\">12</span> <span class=\"number\">1</span> <span class=\"number\">3</span><span class=\"number\">-5</span> *        &lt;==<span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span><span class=\"number\">1</span><span class=\"number\">12</span><span class=\"number\">30</span></span><br></pre></td></tr></table></figure>\n\n<p>etc/crontab <code></code>cronetc/crontabcrontab4<code>run-parts</code>locatelogrotate</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># cat /etc/crontab</span></span><br><span class=\"line\"><span class=\"keyword\">SHELL</span><span class=\"bash\">=/bin/bash</span></span><br><span class=\"line\">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class=\"line\">MAILTO=root</span><br><span class=\"line\">HOME=/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># run-parts</span></span><br><span class=\"line\"><span class=\"number\">01</span> * * * * root <span class=\"keyword\">run</span><span class=\"bash\">-parts /etc/cron.hourly &lt;==</span></span><br><span class=\"line\"><span class=\"number\">02</span> <span class=\"number\">4</span> * * * root <span class=\"keyword\">run</span><span class=\"bash\">-parts /etc/cron.daily &lt;==</span></span><br><span class=\"line\"><span class=\"number\">22</span> <span class=\"number\">4</span> * * <span class=\"number\">0</span> root <span class=\"keyword\">run</span><span class=\"bash\">-parts /etc/cron.weekly &lt;==</span></span><br><span class=\"line\"><span class=\"number\">42</span> <span class=\"number\">4</span> <span class=\"number\">1</span> * * root <span class=\"keyword\">run</span><span class=\"bash\">-parts /etc/cron.monthly &lt;== 1 </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###run-parts which/usr/bin/run-partsman</span></span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p></p>\n<ul>\n<li>atatd</li>\n<li>croncrond</li>\n</ul>\n<h4 id=\"at\"><a href=\"#at\" class=\"headerlink\" title=\"at\"></a>at</h4><p>var/spool/at/batchbatchat</p>\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">root@</span>localhost ~]# at  now + <span class=\"number\">5</span> minutes</span><br><span class=\"line\">  at&gt; /bin/mail  root -s <span class=\"string\">\"testing at job\"</span> &lt; /root/.bashrc</span><br><span class=\"line\">  at&gt; &lt;EOF&gt;         &lt;== [ctrl] + d var/spool/at/</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# atq</span><br><span class=\"line\"><span class=\"number\">5</span> <span class=\"number\">2015</span><span class=\"number\">-11</span><span class=\"number\">-25</span> <span class=\"number\">23</span>:<span class=\"number\">00</span> a root</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# atrm <span class=\"number\">5</span></span><br></pre></td></tr></table></figure>\n\n<p>man pageatqatrmetc/at.allowetc/at.denyatatallowatdeny</p>\n<h4 id=\"cron\"><a href=\"#cron\" class=\"headerlink\" title=\"cron\"></a>cron</h4><p>crondvar/spool/cron/etc/cron.allowetc/cron.denyetc/crontab crontab eetc/crontabcrontab</p>\n<p></p>\n<figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab   </span><br><span class=\"line\"><span class=\"deletion\">-u  root / crontab </span></span><br><span class=\"line\"><span class=\"deletion\">-e  crontab vivivar/spool/cron</span></span><br><span class=\"line\"><span class=\"deletion\">-l  crontab </span></span><br><span class=\"line\"><span class=\"deletion\">-r  crontab  -e </span></span><br><span class=\"line\"></span><br><span class=\"line\">root@localhost #crontab  -u  testuser  -e    #testuservi</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">###<span class=\"string\">\",\"</span> <span class=\"string\">\"-\"</span> <span class=\"string\">\"/\"</span>,</span><br><span class=\"line\"><span class=\"number\">30</span> * * * *           &lt;==<span class=\"number\">30</span>hello</span><br><span class=\"line\">*/<span class=\"number\">10</span>  *  *  *      &lt;==<span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"number\">30</span> <span class=\"number\">12</span> * * <span class=\"number\">1</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>      &lt;==<span class=\"number\">1</span> <span class=\"number\">3</span> <span class=\"number\">5</span><span class=\"number\">12</span><span class=\"number\">30</span></span><br><span class=\"line\"><span class=\"number\">30</span> <span class=\"number\">12</span> <span class=\"number\">1</span> <span class=\"number\">3</span><span class=\"number\">-5</span> *        &lt;==<span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span><span class=\"number\">1</span><span class=\"number\">12</span><span class=\"number\">30</span></span><br></pre></td></tr></table></figure>\n\n<p>etc/crontab <code></code>cronetc/crontabcrontab4<code>run-parts</code>locatelogrotate</p>\n<figure class=\"highlight dockerfile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># cat /etc/crontab</span></span><br><span class=\"line\"><span class=\"keyword\">SHELL</span><span class=\"bash\">=/bin/bash</span></span><br><span class=\"line\">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class=\"line\">MAILTO=root</span><br><span class=\"line\">HOME=/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># run-parts</span></span><br><span class=\"line\"><span class=\"number\">01</span> * * * * root <span class=\"keyword\">run</span><span class=\"bash\">-parts /etc/cron.hourly &lt;==</span></span><br><span class=\"line\"><span class=\"number\">02</span> <span class=\"number\">4</span> * * * root <span class=\"keyword\">run</span><span class=\"bash\">-parts /etc/cron.daily &lt;==</span></span><br><span class=\"line\"><span class=\"number\">22</span> <span class=\"number\">4</span> * * <span class=\"number\">0</span> root <span class=\"keyword\">run</span><span class=\"bash\">-parts /etc/cron.weekly &lt;==</span></span><br><span class=\"line\"><span class=\"number\">42</span> <span class=\"number\">4</span> <span class=\"number\">1</span> * * root <span class=\"keyword\">run</span><span class=\"bash\">-parts /etc/cron.monthly &lt;== 1 </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">###run-parts which/usr/bin/run-partsman</span></span><br></pre></td></tr></table></figure>\n\n"},{"layout":"post","title":"arp_ignorearp_announce","published":1,"author":"xiemx","comments":1,"date":"2016-08-10T20:08:15.000Z","_content":"lvsDRreal serverarpsysctl.conf\n```\nnet.ipv4.conf.lo.arp_ignore = 1\nnet.ipv4.conf.lo.arp_announce = 2\nnet.ipv4.conf.all.arp_ignore = 1\nnet.ipv4.conf.all.arp_announce = 2\narp_ignore:IPARP0 \n\n0 - (): IParp \n1 - IPARP \n2 -IPARP,IP \n3 - arp \n4-7 -  \n8 -arp\n\narp_announce:IPARP: ,IPArp \n\n0 - () eth0,eth1lo \n1 -arp. ARPIP.IPip.IP,2. \n2 - .IP.IP. ,ARP.\n```\n","source":"_posts/linux-disable-arp.md","raw":"---\nlayout: post\ntitle: arp_ignorearp_announce\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-08-11 04:08:15\ntags: [ linux, arp ]\ncategories:\n    - linux\n---\nlvsDRreal serverarpsysctl.conf\n```\nnet.ipv4.conf.lo.arp_ignore = 1\nnet.ipv4.conf.lo.arp_announce = 2\nnet.ipv4.conf.all.arp_ignore = 1\nnet.ipv4.conf.all.arp_announce = 2\narp_ignore:IPARP0 \n\n0 - (): IParp \n1 - IPARP \n2 -IPARP,IP \n3 - arp \n4-7 -  \n8 -arp\n\narp_announce:IPARP: ,IPArp \n\n0 - () eth0,eth1lo \n1 -arp. ARPIP.IPip.IP,2. \n2 - .IP.IP. ,ARP.\n```\n","slug":"linux-disable-arp","updated":"2019-10-21T06:57:42.477Z","photos":[],"link":"","_id":"ck42dyidb002ju9uri74fw4sh","content":"<p>lvsDRreal serverarpsysctl.conf</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">net<span class=\"selector-class\">.ipv4</span><span class=\"selector-class\">.conf</span><span class=\"selector-class\">.lo</span><span class=\"selector-class\">.arp_ignore</span> = <span class=\"number\">1</span></span><br><span class=\"line\">net<span class=\"selector-class\">.ipv4</span><span class=\"selector-class\">.conf</span><span class=\"selector-class\">.lo</span><span class=\"selector-class\">.arp_announce</span> = <span class=\"number\">2</span></span><br><span class=\"line\">net<span class=\"selector-class\">.ipv4</span><span class=\"selector-class\">.conf</span><span class=\"selector-class\">.all</span><span class=\"selector-class\">.arp_ignore</span> = <span class=\"number\">1</span></span><br><span class=\"line\">net<span class=\"selector-class\">.ipv4</span><span class=\"selector-class\">.conf</span><span class=\"selector-class\">.all</span><span class=\"selector-class\">.arp_announce</span> = <span class=\"number\">2</span></span><br><span class=\"line\">arp_ignore:IPARP<span class=\"number\">0</span> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">0</span> - (): IParp </span><br><span class=\"line\"><span class=\"number\">1</span> - IPARP </span><br><span class=\"line\"><span class=\"number\">2</span> -IPARP,IP </span><br><span class=\"line\"><span class=\"number\">3</span> - arp </span><br><span class=\"line\"><span class=\"number\">4</span>-<span class=\"number\">7</span> -  </span><br><span class=\"line\"><span class=\"number\">8</span> -arp</span><br><span class=\"line\"></span><br><span class=\"line\">arp_announce:IPARP: ,IPArp </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">0</span> - () eth0,eth1lo </span><br><span class=\"line\"><span class=\"number\">1</span> -arp. ARPIP.IPip.IP,<span class=\"number\">2</span>. </span><br><span class=\"line\"><span class=\"number\">2</span> - .IP.IP. ,ARP.</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p>lvsDRreal serverarpsysctl.conf</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">net<span class=\"selector-class\">.ipv4</span><span class=\"selector-class\">.conf</span><span class=\"selector-class\">.lo</span><span class=\"selector-class\">.arp_ignore</span> = <span class=\"number\">1</span></span><br><span class=\"line\">net<span class=\"selector-class\">.ipv4</span><span class=\"selector-class\">.conf</span><span class=\"selector-class\">.lo</span><span class=\"selector-class\">.arp_announce</span> = <span class=\"number\">2</span></span><br><span class=\"line\">net<span class=\"selector-class\">.ipv4</span><span class=\"selector-class\">.conf</span><span class=\"selector-class\">.all</span><span class=\"selector-class\">.arp_ignore</span> = <span class=\"number\">1</span></span><br><span class=\"line\">net<span class=\"selector-class\">.ipv4</span><span class=\"selector-class\">.conf</span><span class=\"selector-class\">.all</span><span class=\"selector-class\">.arp_announce</span> = <span class=\"number\">2</span></span><br><span class=\"line\">arp_ignore:IPARP<span class=\"number\">0</span> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">0</span> - (): IParp </span><br><span class=\"line\"><span class=\"number\">1</span> - IPARP </span><br><span class=\"line\"><span class=\"number\">2</span> -IPARP,IP </span><br><span class=\"line\"><span class=\"number\">3</span> - arp </span><br><span class=\"line\"><span class=\"number\">4</span>-<span class=\"number\">7</span> -  </span><br><span class=\"line\"><span class=\"number\">8</span> -arp</span><br><span class=\"line\"></span><br><span class=\"line\">arp_announce:IPARP: ,IPArp </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">0</span> - () eth0,eth1lo </span><br><span class=\"line\"><span class=\"number\">1</span> -arp. ARPIP.IPip.IP,<span class=\"number\">2</span>. </span><br><span class=\"line\"><span class=\"number\">2</span> - .IP.IP. ,ARP.</span><br></pre></td></tr></table></figure>\n\n"},{"layout":"post","title":"Linux","published":1,"author":"xiemx","comments":1,"date":"2015-10-16T02:10:31.000Z","_content":"1. find\n\ngoogle\n\n2. locate\n\nlocate\"find -name\"/var/lib/mlocate/mlocate.db Linuxlocate locateupdatedb\n\n\n\nlocate /etc/sh* etcsh\n\nlocate -i ~/m*m\n\n3. whereis\n\nwhereis-bman-m-s\n\n4. which\n\nwhichPATHwhich\n","source":"_posts/linux-find-commands.md","raw":"---\nlayout: post\ntitle: Linux\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-10-16 10:10:31\ntags: [ linux, command ]\ncategories:\n  - linux\n---\n1. find\n\ngoogle\n\n2. locate\n\nlocate\"find -name\"/var/lib/mlocate/mlocate.db Linuxlocate locateupdatedb\n\n\n\nlocate /etc/sh* etcsh\n\nlocate -i ~/m*m\n\n3. whereis\n\nwhereis-bman-m-s\n\n4. which\n\nwhichPATHwhich\n","slug":"linux-find-commands","updated":"2019-10-21T06:57:42.716Z","photos":[],"link":"","_id":"ck42dyidc002mu9ur0c8xnl9e","content":"<ol>\n<li>find</li>\n</ol>\n<p>google</p>\n<ol start=\"2\">\n<li>locate</li>\n</ol>\n<p>locatefind -name/var/lib/mlocate/mlocate.db Linuxlocate locateupdatedb</p>\n<p></p>\n<p>locate /etc/sh* etcsh</p>\n<p>locate -i ~/m*m</p>\n<ol start=\"3\">\n<li>whereis</li>\n</ol>\n<p>whereis-bman-m-s</p>\n<ol start=\"4\">\n<li>which</li>\n</ol>\n<p>whichPATHwhich</p>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li>find</li>\n</ol>\n<p>google</p>\n<ol start=\"2\">\n<li>locate</li>\n</ol>\n<p>locatefind -name/var/lib/mlocate/mlocate.db Linuxlocate locateupdatedb</p>\n<p></p>\n<p>locate /etc/sh* etcsh</p>\n<p>locate -i ~/m*m</p>\n<ol start=\"3\">\n<li>whereis</li>\n</ol>\n<p>whereis-bman-m-s</p>\n<ol start=\"4\">\n<li>which</li>\n</ol>\n<p>whichPATHwhich</p>\n"},{"layout":"post","title":"Linux","published":1,"author":"xiemx","comments":1,"date":"2016-05-23T03:05:07.000Z","_content":"#()\nnet.core.rmem_default = 262144\n\n#()\n\nnet.core.rmem_max = 16777216\n\n#()\n\nnet.core.wmem_default = 262144\n\n#()\n\nnet.core.wmem_max = 16777216\n\n#(LISTEN)\n\nnet.core.somaxconn = 262144\n\n#\n\nnet.core.netdev_max_backlog = 262144\n\n#TCPDoS\n\nnet.ipv4.tcp_max_orphans = 262144\n\n#SYN1024262144\n\nnet.ipv4.tcp_max_syn_backlog = 262144\n\n#TIME_WAITTIME_WAITDoSTIME_WAIT\n\nnet.ipv4.tcp_max_tw_buckets = 10000\n\n#\n\nnet.ipv4.ip_local_port_range = 1024 65500\n\n#TIME_WAIT\n\n#TCPTIME_WAIT0\n\nnet.ipv4.tcp_tw_recycle = 1\n\n#TIME_WAITTCP,0\n\nnet.ipv4.tcp_tw_reuse = 1\n\n#SYNcookiesSYN0\n\nnet.ipv4.tcp_syncookies = 1\n\n#SYNSYNSYNACKSYN+ACK\n\nnet.ipv4.tcp_synack_retries = 1\n\n#SYN\n\nnet.ipv4.tcp_syn_retries = 1\n\n#FIN-WAIT-2\n\nnet.ipv4.tcp_fin_timeout = 30\n\n#keepaliveTCPkeepalive2\n\nnet.ipv4.tcp_keepalive_time = 600\n\n#75\n\nnet.ipv4.tcp_keepalive_intvl = 30\n\n#TCPkeepalive9tcp_keepalive_intvlkeepalive\n\nnet.ipv4.tcp_keepalive_probes = 3\n\n#TCP4KB7864324/1024/1024=3G10485764/1024/1024=4G1572864*4/1024/1024=6G\n\nnet.ipv4.tcp_mem = 786432 1048576 1572864\n\n#I/O\n\nfs.aio-max-nr = 1048576\n\n#linux\n\nfs.file-max = 6815744\n\n#swap\n\nvm.swappiness = 0","source":"_posts/linux-kernal-paramenter.md","raw":"---\nlayout: post\ntitle: Linux\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-05-23 11:05:07\ntags: [ linux, kernal]\ncategories:\n    - linux\n---\n#()\nnet.core.rmem_default = 262144\n\n#()\n\nnet.core.rmem_max = 16777216\n\n#()\n\nnet.core.wmem_default = 262144\n\n#()\n\nnet.core.wmem_max = 16777216\n\n#(LISTEN)\n\nnet.core.somaxconn = 262144\n\n#\n\nnet.core.netdev_max_backlog = 262144\n\n#TCPDoS\n\nnet.ipv4.tcp_max_orphans = 262144\n\n#SYN1024262144\n\nnet.ipv4.tcp_max_syn_backlog = 262144\n\n#TIME_WAITTIME_WAITDoSTIME_WAIT\n\nnet.ipv4.tcp_max_tw_buckets = 10000\n\n#\n\nnet.ipv4.ip_local_port_range = 1024 65500\n\n#TIME_WAIT\n\n#TCPTIME_WAIT0\n\nnet.ipv4.tcp_tw_recycle = 1\n\n#TIME_WAITTCP,0\n\nnet.ipv4.tcp_tw_reuse = 1\n\n#SYNcookiesSYN0\n\nnet.ipv4.tcp_syncookies = 1\n\n#SYNSYNSYNACKSYN+ACK\n\nnet.ipv4.tcp_synack_retries = 1\n\n#SYN\n\nnet.ipv4.tcp_syn_retries = 1\n\n#FIN-WAIT-2\n\nnet.ipv4.tcp_fin_timeout = 30\n\n#keepaliveTCPkeepalive2\n\nnet.ipv4.tcp_keepalive_time = 600\n\n#75\n\nnet.ipv4.tcp_keepalive_intvl = 30\n\n#TCPkeepalive9tcp_keepalive_intvlkeepalive\n\nnet.ipv4.tcp_keepalive_probes = 3\n\n#TCP4KB7864324/1024/1024=3G10485764/1024/1024=4G1572864*4/1024/1024=6G\n\nnet.ipv4.tcp_mem = 786432 1048576 1572864\n\n#I/O\n\nfs.aio-max-nr = 1048576\n\n#linux\n\nfs.file-max = 6815744\n\n#swap\n\nvm.swappiness = 0","slug":"linux-kernal-paramenter","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyide002qu9ur2bszti68","content":"<p>#()<br>net.core.rmem_default = 262144</p>\n<p>#()</p>\n<p>net.core.rmem_max = 16777216</p>\n<p>#()</p>\n<p>net.core.wmem_default = 262144</p>\n<p>#()</p>\n<p>net.core.wmem_max = 16777216</p>\n<p>#(LISTEN)</p>\n<p>net.core.somaxconn = 262144</p>\n<p>#</p>\n<p>net.core.netdev_max_backlog = 262144</p>\n<p>#TCPDoS</p>\n<p>net.ipv4.tcp_max_orphans = 262144</p>\n<p>#SYN1024262144</p>\n<p>net.ipv4.tcp_max_syn_backlog = 262144</p>\n<p>#TIME_WAITTIME_WAITDoSTIME_WAIT</p>\n<p>net.ipv4.tcp_max_tw_buckets = 10000</p>\n<p>#</p>\n<p>net.ipv4.ip_local_port_range = 1024 65500</p>\n<p>#TIME_WAIT</p>\n<p>#TCPTIME_WAIT0</p>\n<p>net.ipv4.tcp_tw_recycle = 1</p>\n<p>#TIME_WAITTCP,0</p>\n<p>net.ipv4.tcp_tw_reuse = 1</p>\n<p>#SYNcookiesSYN0</p>\n<p>net.ipv4.tcp_syncookies = 1</p>\n<p>#SYNSYNSYNACKSYN+ACK</p>\n<p>net.ipv4.tcp_synack_retries = 1</p>\n<p>#SYN</p>\n<p>net.ipv4.tcp_syn_retries = 1</p>\n<p>#FIN-WAIT-2</p>\n<p>net.ipv4.tcp_fin_timeout = 30</p>\n<p>#keepaliveTCPkeepalive2</p>\n<p>net.ipv4.tcp_keepalive_time = 600</p>\n<p>#75</p>\n<p>net.ipv4.tcp_keepalive_intvl = 30</p>\n<p>#TCPkeepalive9tcp_keepalive_intvlkeepalive</p>\n<p>net.ipv4.tcp_keepalive_probes = 3</p>\n<p>#TCP4KB7864324/1024/1024=3G10485764/1024/1024=4G1572864*4/1024/1024=6G</p>\n<p>net.ipv4.tcp_mem = 786432 1048576 1572864</p>\n<p>#I/O</p>\n<p>fs.aio-max-nr = 1048576</p>\n<p>#linux</p>\n<p>fs.file-max = 6815744</p>\n<p>#swap</p>\n<p>vm.swappiness = 0</p>\n","site":{"data":{}},"excerpt":"","more":"<p>#()<br>net.core.rmem_default = 262144</p>\n<p>#()</p>\n<p>net.core.rmem_max = 16777216</p>\n<p>#()</p>\n<p>net.core.wmem_default = 262144</p>\n<p>#()</p>\n<p>net.core.wmem_max = 16777216</p>\n<p>#(LISTEN)</p>\n<p>net.core.somaxconn = 262144</p>\n<p>#</p>\n<p>net.core.netdev_max_backlog = 262144</p>\n<p>#TCPDoS</p>\n<p>net.ipv4.tcp_max_orphans = 262144</p>\n<p>#SYN1024262144</p>\n<p>net.ipv4.tcp_max_syn_backlog = 262144</p>\n<p>#TIME_WAITTIME_WAITDoSTIME_WAIT</p>\n<p>net.ipv4.tcp_max_tw_buckets = 10000</p>\n<p>#</p>\n<p>net.ipv4.ip_local_port_range = 1024 65500</p>\n<p>#TIME_WAIT</p>\n<p>#TCPTIME_WAIT0</p>\n<p>net.ipv4.tcp_tw_recycle = 1</p>\n<p>#TIME_WAITTCP,0</p>\n<p>net.ipv4.tcp_tw_reuse = 1</p>\n<p>#SYNcookiesSYN0</p>\n<p>net.ipv4.tcp_syncookies = 1</p>\n<p>#SYNSYNSYNACKSYN+ACK</p>\n<p>net.ipv4.tcp_synack_retries = 1</p>\n<p>#SYN</p>\n<p>net.ipv4.tcp_syn_retries = 1</p>\n<p>#FIN-WAIT-2</p>\n<p>net.ipv4.tcp_fin_timeout = 30</p>\n<p>#keepaliveTCPkeepalive2</p>\n<p>net.ipv4.tcp_keepalive_time = 600</p>\n<p>#75</p>\n<p>net.ipv4.tcp_keepalive_intvl = 30</p>\n<p>#TCPkeepalive9tcp_keepalive_intvlkeepalive</p>\n<p>net.ipv4.tcp_keepalive_probes = 3</p>\n<p>#TCP4KB7864324/1024/1024=3G10485764/1024/1024=4G1572864*4/1024/1024=6G</p>\n<p>net.ipv4.tcp_mem = 786432 1048576 1572864</p>\n<p>#I/O</p>\n<p>fs.aio-max-nr = 1048576</p>\n<p>#linux</p>\n<p>fs.file-max = 6815744</p>\n<p>#swap</p>\n<p>vm.swappiness = 0</p>\n"},{"layout":"post","title":"linux","published":1,"author":"xiemx","comments":1,"date":"2016-07-11T01:07:34.000Z","_content":"```\n[root@iZ11eqvuvnqZ ~]# cat /etc/security/limits.conf \n# /etc/security/limits.conf\n#\n#This file sets the resource limits for the users logged in via PAM.\n#It does not affect resource limits of the system services.\n#\n#Also note that configuration files in /etc/security/limits.d directory,\n#which are read in alphabetical order, override the settings in this\n#file in case the domain is the same or more specific.\n#That means for example that setting a limit for wildcard domain here\n#can be overriden with a wildcard setting in a config file in the\n#subdirectory, but a user specific setting here can be overriden only\n#with a user specific setting in the subdirectory.\n#\n#Each line describes a limit for a user in the form:\n#\n#domain>type> item> value>\n#\n#Where:\n#domain> can be:\n# - a user name\n# - a group name, with @group syntax\n# - the wildcard *, for default entry\n# - the wildcard %, can be also used with %group syntax,\n# for maxlogin limit\n#\n#type> can have the two values:\n# - \"soft\" for enforcing the soft limits\n# - \"hard\" for enforcing hard limits\n#\n#item> can be one of the following:\n# - core - limits the core file size (KB)\n# - data - max data size (KB)\n# - fsize - maximum filesize (KB)\n# - memlock - max locked-in-memory address space (KB)\n# - nofile - max number of open files\n# - rss - max resident set size (KB)\n# - stack - max stack size (KB)\n# - cpu - max CPU time (MIN)\n# - nproc - max number of processes\n# - as - address space limit (KB)\n# - maxlogins - max number of logins for this user\n# - maxsyslogins - max number of logins on the system\n# - priority - the priority to run user process with\n# - locks - max number of file locks the user can hold\n# - sigpending - max number of pending signals\n# - msgqueue - max memory used by POSIX message queues (bytes)\n# - nice - max nice priority allowed to raise to values: [-20, 19]\n# - rtprio - max realtime priority\n#\n#domain> &lt;type> &lt;item> &lt;value>\n#\n\n#* soft core 0\n#* hard rss 10000\n#@student hard nproc 20\n#@faculty soft nproc 20\n#@faculty hard nproc 50\n#ftp hard nproc 0\n#@student - maxlogins 4\n\n# End of file\n* soft nofile 65535\n* hard nofile 65535\n\n\n``` ","source":"_posts/linux-limit-tools.md","raw":"---\nlayout: post\ntitle: linux\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-07-11 09:07:34\ntags: [ linux, command]\ncategories:\n    - linux\n---\n```\n[root@iZ11eqvuvnqZ ~]# cat /etc/security/limits.conf \n# /etc/security/limits.conf\n#\n#This file sets the resource limits for the users logged in via PAM.\n#It does not affect resource limits of the system services.\n#\n#Also note that configuration files in /etc/security/limits.d directory,\n#which are read in alphabetical order, override the settings in this\n#file in case the domain is the same or more specific.\n#That means for example that setting a limit for wildcard domain here\n#can be overriden with a wildcard setting in a config file in the\n#subdirectory, but a user specific setting here can be overriden only\n#with a user specific setting in the subdirectory.\n#\n#Each line describes a limit for a user in the form:\n#\n#domain>type> item> value>\n#\n#Where:\n#domain> can be:\n# - a user name\n# - a group name, with @group syntax\n# - the wildcard *, for default entry\n# - the wildcard %, can be also used with %group syntax,\n# for maxlogin limit\n#\n#type> can have the two values:\n# - \"soft\" for enforcing the soft limits\n# - \"hard\" for enforcing hard limits\n#\n#item> can be one of the following:\n# - core - limits the core file size (KB)\n# - data - max data size (KB)\n# - fsize - maximum filesize (KB)\n# - memlock - max locked-in-memory address space (KB)\n# - nofile - max number of open files\n# - rss - max resident set size (KB)\n# - stack - max stack size (KB)\n# - cpu - max CPU time (MIN)\n# - nproc - max number of processes\n# - as - address space limit (KB)\n# - maxlogins - max number of logins for this user\n# - maxsyslogins - max number of logins on the system\n# - priority - the priority to run user process with\n# - locks - max number of file locks the user can hold\n# - sigpending - max number of pending signals\n# - msgqueue - max memory used by POSIX message queues (bytes)\n# - nice - max nice priority allowed to raise to values: [-20, 19]\n# - rtprio - max realtime priority\n#\n#domain> &lt;type> &lt;item> &lt;value>\n#\n\n#* soft core 0\n#* hard rss 10000\n#@student hard nproc 20\n#@faculty soft nproc 20\n#@faculty hard nproc 50\n#ftp hard nproc 0\n#@student - maxlogins 4\n\n# End of file\n* soft nofile 65535\n* hard nofile 65535\n\n\n``` ","slug":"linux-limit-tools","updated":"2019-10-21T06:57:42.327Z","photos":[],"link":"","_id":"ck42dyidf002uu9ur6jevtphs","content":"<pre><code>[root@iZ11eqvuvnqZ ~]# cat /etc/security/limits.conf \n# /etc/security/limits.conf\n#\n#This file sets the resource limits for the users logged in via PAM.\n#It does not affect resource limits of the system services.\n#\n#Also note that configuration files in /etc/security/limits.d directory,\n#which are read in alphabetical order, override the settings in this\n#file in case the domain is the same or more specific.\n#That means for example that setting a limit for wildcard domain here\n#can be overriden with a wildcard setting in a config file in the\n#subdirectory, but a user specific setting here can be overriden only\n#with a user specific setting in the subdirectory.\n#\n#Each line describes a limit for a user in the form:\n#\n#domain&gt;       type&gt;  item&gt;  value&gt;\n#\n#Where:\n#domain&gt; can be:\n#        - a user name\n#        - a group name, with @group syntax\n#        - the wildcard *, for default entry\n#        - the wildcard %, can be also used with %group syntax,\n#                 for maxlogin limit\n#\n#type&gt; can have the two values:\n#        - &quot;soft&quot; for enforcing the soft limits\n#        - &quot;hard&quot; for enforcing hard limits\n#\n#item&gt; can be one of the following:\n#        - core - limits the core file size (KB)\n#        - data - max data size (KB)\n#        - fsize - maximum filesize (KB)\n#        - memlock - max locked-in-memory address space (KB)\n#        - nofile - max number of open files\n#        - rss - max resident set size (KB)\n#        - stack - max stack size (KB)\n#        - cpu - max CPU time (MIN)\n#        - nproc - max number of processes\n#        - as - address space limit (KB)\n#        - maxlogins - max number of logins for this user\n#        - maxsyslogins - max number of logins on the system\n#        - priority - the priority to run user process with\n#        - locks - max number of file locks the user can hold\n#        - sigpending - max number of pending signals\n#        - msgqueue - max memory used by POSIX message queues (bytes)\n#        - nice - max nice priority allowed to raise to values: [-20, 19]\n#        - rtprio - max realtime priority\n#\n#domain&gt;      &amp;lt;type&gt;  &amp;lt;item&gt;         &amp;lt;value&gt;\n#\n\n#*               soft    core            0\n#*               hard    rss             10000\n#@student        hard    nproc           20\n#@faculty        soft    nproc           20\n#@faculty        hard    nproc           50\n#ftp             hard    nproc           0\n#@student        -       maxlogins       4\n\n# End of file\n* soft nofile 65535\n* hard nofile 65535\n\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<pre><code>[root@iZ11eqvuvnqZ ~]# cat /etc/security/limits.conf \n# /etc/security/limits.conf\n#\n#This file sets the resource limits for the users logged in via PAM.\n#It does not affect resource limits of the system services.\n#\n#Also note that configuration files in /etc/security/limits.d directory,\n#which are read in alphabetical order, override the settings in this\n#file in case the domain is the same or more specific.\n#That means for example that setting a limit for wildcard domain here\n#can be overriden with a wildcard setting in a config file in the\n#subdirectory, but a user specific setting here can be overriden only\n#with a user specific setting in the subdirectory.\n#\n#Each line describes a limit for a user in the form:\n#\n#domain&gt;       type&gt;  item&gt;  value&gt;\n#\n#Where:\n#domain&gt; can be:\n#        - a user name\n#        - a group name, with @group syntax\n#        - the wildcard *, for default entry\n#        - the wildcard %, can be also used with %group syntax,\n#                 for maxlogin limit\n#\n#type&gt; can have the two values:\n#        - &quot;soft&quot; for enforcing the soft limits\n#        - &quot;hard&quot; for enforcing hard limits\n#\n#item&gt; can be one of the following:\n#        - core - limits the core file size (KB)\n#        - data - max data size (KB)\n#        - fsize - maximum filesize (KB)\n#        - memlock - max locked-in-memory address space (KB)\n#        - nofile - max number of open files\n#        - rss - max resident set size (KB)\n#        - stack - max stack size (KB)\n#        - cpu - max CPU time (MIN)\n#        - nproc - max number of processes\n#        - as - address space limit (KB)\n#        - maxlogins - max number of logins for this user\n#        - maxsyslogins - max number of logins on the system\n#        - priority - the priority to run user process with\n#        - locks - max number of file locks the user can hold\n#        - sigpending - max number of pending signals\n#        - msgqueue - max memory used by POSIX message queues (bytes)\n#        - nice - max nice priority allowed to raise to values: [-20, 19]\n#        - rtprio - max realtime priority\n#\n#domain&gt;      &amp;lt;type&gt;  &amp;lt;item&gt;         &amp;lt;value&gt;\n#\n\n#*               soft    core            0\n#*               hard    rss             10000\n#@student        hard    nproc           20\n#@faculty        soft    nproc           20\n#@faculty        hard    nproc           50\n#ftp             hard    nproc           0\n#@student        -       maxlogins       4\n\n# End of file\n* soft nofile 65535\n* hard nofile 65535\n\n</code></pre>"},{"layout":"post","title":"Linuxln","published":1,"author":"xiemx","comments":1,"date":"2015-11-05T01:11:15.000Z","_content":"Linux,`inode` inodeinodeblockblockAB2blockinodeLinux\n\n### \n* (Hard Link)\n* (Soft Link)Symbolic link\n\n#### \n\ninodeinodeinode+1\n\n  \n```\n  ln  \n```\n  \n```\n  ln /tmp/testdir/testdir2/testfile1 /tmp/testfile1\n  ls -i /tmp/testdir/testdir2/testfile1 /tmp/testfile1\n  1491138   -rw-rr    1 root   root   48    11-14 14:10    /tmp/testdir/testdir2/testfile1\n  1491138   -rw-rr    1 root   root   48    11-14 14:29    /tmp/testfile1\n```\n\n  \n  1.inode\n  2.\n  3.-11\n  4.\n\n#### \n\n\n\n  :\n```\n  ln -s  \n```\n  \n```\n  ln -s /tmp/testfile /testfilesoft\n  ls -i /tmp/testfile /testfilesoft\n  1491138   -rw-rr    1 root   root   48    11-14 14:17    /tmp/testfile 1491140 lrwxrwxrwx 1     root   root 13  11-14 14:24    /testfilesoft -> /tmp/testfile\n```\n  1313/tmp/testfile\"\n\n  \n\n  1.\n  2.\n  3.\n  4.\n\nLinux","source":"_posts/linux-ln.md","raw":"---\nlayout: post\ntitle: Linuxln\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-11-05 09:11:15\ntags: [ linux, command ]\ncategories:\n    - linux\n---\nLinux,`inode` inodeinodeblockblockAB2blockinodeLinux\n\n### \n* (Hard Link)\n* (Soft Link)Symbolic link\n\n#### \n\ninodeinodeinode+1\n\n  \n```\n  ln  \n```\n  \n```\n  ln /tmp/testdir/testdir2/testfile1 /tmp/testfile1\n  ls -i /tmp/testdir/testdir2/testfile1 /tmp/testfile1\n  1491138   -rw-rr    1 root   root   48    11-14 14:10    /tmp/testdir/testdir2/testfile1\n  1491138   -rw-rr    1 root   root   48    11-14 14:29    /tmp/testfile1\n```\n\n  \n  1.inode\n  2.\n  3.-11\n  4.\n\n#### \n\n\n\n  :\n```\n  ln -s  \n```\n  \n```\n  ln -s /tmp/testfile /testfilesoft\n  ls -i /tmp/testfile /testfilesoft\n  1491138   -rw-rr    1 root   root   48    11-14 14:17    /tmp/testfile 1491140 lrwxrwxrwx 1     root   root 13  11-14 14:24    /testfilesoft -> /tmp/testfile\n```\n  1313/tmp/testfile\"\n\n  \n\n  1.\n  2.\n  3.\n  4.\n\nLinux","slug":"linux-ln","updated":"2019-10-21T06:57:42.819Z","photos":[],"link":"","_id":"ck42dyidg002yu9urxu56xz59","content":"<p>Linux,<code>inode</code> inodeinodeblockblockAB2blockinodeLinux</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>(Hard Link)</li>\n<li>(Soft Link)Symbolic link</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>inodeinodeinode+1</p>\n<p>  </p>\n<figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">ln</span>  </span><br></pre></td></tr></table></figure>\n\n<p>  </p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln /tmp/testdir/testdir2/testfile1 /tmp/testfile1</span><br><span class=\"line\">ls -i /tmp/testdir/testdir2/testfile1 /tmp/testfile1</span><br><span class=\"line\"><span class=\"number\">1491138</span>   -rw-rr    <span class=\"number\">1</span> root   root   <span class=\"number\">48</span>    <span class=\"number\">11</span><span class=\"number\">-14</span> <span class=\"number\">14</span>:<span class=\"number\">10</span>    /tmp/testdir/testdir2/testfile1</span><br><span class=\"line\"><span class=\"number\">1491138</span>   -rw-rr    <span class=\"number\">1</span> root   root   <span class=\"number\">48</span>    <span class=\"number\">11</span><span class=\"number\">-14</span> <span class=\"number\">14</span>:<span class=\"number\">29</span>    /tmp/testfile1</span><br></pre></td></tr></table></figure>\n\n<p>  <br>  1.inode<br>  2.<br>  3.-11<br>  4.</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>  :</p>\n<figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">ln</span> -s  </span><br></pre></td></tr></table></figure>\n\n<p>  </p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /tmp/testfile /testfilesoft</span><br><span class=\"line\">ls -i /tmp/testfile /testfilesoft</span><br><span class=\"line\"><span class=\"number\">1491138</span>   -rw-rr    <span class=\"number\">1</span> root   root   <span class=\"number\">48</span>    <span class=\"number\">11</span><span class=\"number\">-14</span> <span class=\"number\">14</span>:<span class=\"number\">17</span>    /tmp/testfile <span class=\"number\">1491140</span> lrwxrwxrwx <span class=\"number\">1</span>     root   root <span class=\"number\">13</span>  <span class=\"number\">11</span><span class=\"number\">-14</span> <span class=\"number\">14</span>:<span class=\"number\">24</span>    /testfilesoft -&gt; /tmp/testfile</span><br></pre></td></tr></table></figure>\n\n<p>  1313/tmp/testfile</p>\n<p>  </p>\n<p>  1.<br>  2.<br>  3.<br>  4.</p>\n<p>Linux</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Linux,<code>inode</code> inodeinodeblockblockAB2blockinodeLinux</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>(Hard Link)</li>\n<li>(Soft Link)Symbolic link</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>inodeinodeinode+1</p>\n<p>  </p>\n<figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">ln</span>  </span><br></pre></td></tr></table></figure>\n\n<p>  </p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln /tmp/testdir/testdir2/testfile1 /tmp/testfile1</span><br><span class=\"line\">ls -i /tmp/testdir/testdir2/testfile1 /tmp/testfile1</span><br><span class=\"line\"><span class=\"number\">1491138</span>   -rw-rr    <span class=\"number\">1</span> root   root   <span class=\"number\">48</span>    <span class=\"number\">11</span><span class=\"number\">-14</span> <span class=\"number\">14</span>:<span class=\"number\">10</span>    /tmp/testdir/testdir2/testfile1</span><br><span class=\"line\"><span class=\"number\">1491138</span>   -rw-rr    <span class=\"number\">1</span> root   root   <span class=\"number\">48</span>    <span class=\"number\">11</span><span class=\"number\">-14</span> <span class=\"number\">14</span>:<span class=\"number\">29</span>    /tmp/testfile1</span><br></pre></td></tr></table></figure>\n\n<p>  <br>  1.inode<br>  2.<br>  3.-11<br>  4.</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>  :</p>\n<figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">ln</span> -s  </span><br></pre></td></tr></table></figure>\n\n<p>  </p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /tmp/testfile /testfilesoft</span><br><span class=\"line\">ls -i /tmp/testfile /testfilesoft</span><br><span class=\"line\"><span class=\"number\">1491138</span>   -rw-rr    <span class=\"number\">1</span> root   root   <span class=\"number\">48</span>    <span class=\"number\">11</span><span class=\"number\">-14</span> <span class=\"number\">14</span>:<span class=\"number\">17</span>    /tmp/testfile <span class=\"number\">1491140</span> lrwxrwxrwx <span class=\"number\">1</span>     root   root <span class=\"number\">13</span>  <span class=\"number\">11</span><span class=\"number\">-14</span> <span class=\"number\">14</span>:<span class=\"number\">24</span>    /testfilesoft -&gt; /tmp/testfile</span><br></pre></td></tr></table></figure>\n\n<p>  1313/tmp/testfile</p>\n<p>  </p>\n<p>  1.<br>  2.<br>  3.<br>  4.</p>\n<p>Linux</p>\n"},{"layout":"post","title":"Linux","published":1,"author":"xiemx","comments":1,"date":"2015-11-28T02:11:40.000Z","_content":"Linux\n\n* --/var/log/wtmp/var/run/utmploginwtmputmp\n* --pacctacct\n* --syslogd8syslog3/var/log/messagesUNIXHTTPFTP\n\nLinuxsyslog/var/logsyslog/etc/syslog.conf/etc/syslog.conf\n```\n.                  \nauthpriv.info                /var/log/secure\n```\n```\nroot@localhost #cat /etc/syslog.conf\n\n//info/var/log/messagesmail\n//*none\n*.info;mail.none;authpriv.none /var/log/messages\n//authpirv/var/log/secure\nauthpriv.* /var/log/secure\n//mail/var/log/maillog\nmail.* /var/log/maillog\n//cron/var/log/cron\ncron.* /var/log/cron\n//emerg\n*.emerg *\n//uucpnewscrit/var/log/spooler\nuucp,news.crit /var/log/spooler\n///var/log/boot.log\nlocal7.* /var/log/boot.log\n```\n##### \n\nkern\nUser\nDamon\nMail\nAuth\nLpr\nNews\nUucpUucp\nCron\nwtmp\nAuthpriv\n\n##### \n\nemerg\nalert\nCirt\nwarning\nerr\nnotice\ninfo\nDebug\nNone\n\n##### \n\ncron: crontab\ndmesg: , dmesg \nlastlog:  lastlog \nmaillog: \nmessages  \nsecure  \nwtmpfaillog: (wtmp)(faillog)\nhttpd, samba  \nutmpwtmplastlogUNIX--utmpwtmplastlogwtmploginlastlogUIDloginlastloglastlogutmputmputmpwhowusersfinger loginwtmputmputmpwtmplastac\n\n### logrotate\n\nLinuxlogrotate/etc/logrotate.conf/etc/logrotate.d/logrotate/etc/cron.daily\n```\n[root@localhost ~]# cat /etc/logrotate.conf\n\nweekly                        #\nrotate 4                      #\ncreate                         #\n#compress                #\ninclude /etc/logrotate.d  #/etc/logrotate.d\n/var/log/wtmp {               #wtmp\nmonthly                              #\nminsize 1M                         #1M\ncreate 0664 root utmp     #\nrotate 1                                #\n}\n```\n \n","source":"_posts/linux-log-system.md","raw":"---\nlayout: post\ntitle: Linux\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-11-28 10:11:40\ntags: [ linux ]\ncategories:\n    - linux\n---\nLinux\n\n* --/var/log/wtmp/var/run/utmploginwtmputmp\n* --pacctacct\n* --syslogd8syslog3/var/log/messagesUNIXHTTPFTP\n\nLinuxsyslog/var/logsyslog/etc/syslog.conf/etc/syslog.conf\n```\n.                  \nauthpriv.info                /var/log/secure\n```\n```\nroot@localhost #cat /etc/syslog.conf\n\n//info/var/log/messagesmail\n//*none\n*.info;mail.none;authpriv.none /var/log/messages\n//authpirv/var/log/secure\nauthpriv.* /var/log/secure\n//mail/var/log/maillog\nmail.* /var/log/maillog\n//cron/var/log/cron\ncron.* /var/log/cron\n//emerg\n*.emerg *\n//uucpnewscrit/var/log/spooler\nuucp,news.crit /var/log/spooler\n///var/log/boot.log\nlocal7.* /var/log/boot.log\n```\n##### \n\nkern\nUser\nDamon\nMail\nAuth\nLpr\nNews\nUucpUucp\nCron\nwtmp\nAuthpriv\n\n##### \n\nemerg\nalert\nCirt\nwarning\nerr\nnotice\ninfo\nDebug\nNone\n\n##### \n\ncron: crontab\ndmesg: , dmesg \nlastlog:  lastlog \nmaillog: \nmessages  \nsecure  \nwtmpfaillog: (wtmp)(faillog)\nhttpd, samba  \nutmpwtmplastlogUNIX--utmpwtmplastlogwtmploginlastlogUIDloginlastloglastlogutmputmputmpwhowusersfinger loginwtmputmputmpwtmplastac\n\n### logrotate\n\nLinuxlogrotate/etc/logrotate.conf/etc/logrotate.d/logrotate/etc/cron.daily\n```\n[root@localhost ~]# cat /etc/logrotate.conf\n\nweekly                        #\nrotate 4                      #\ncreate                         #\n#compress                #\ninclude /etc/logrotate.d  #/etc/logrotate.d\n/var/log/wtmp {               #wtmp\nmonthly                              #\nminsize 1M                         #1M\ncreate 0664 root utmp     #\nrotate 1                                #\n}\n```\n \n","slug":"linux-log-system","updated":"2019-10-21T06:57:42.910Z","photos":[],"link":"","_id":"ck42dyidi0032u9urmkcnrojw","content":"<p>Linux</p>\n<ul>\n<li>/var/log/wtmp/var/run/utmploginwtmputmp</li>\n<li>pacctacct</li>\n<li>syslogd8syslog3/var/log/messagesUNIXHTTPFTP</li>\n</ul>\n<p>Linuxsyslog/var/logsyslog/etc/syslog.conf/etc/syslog.conf</p>\n<figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.                  </span><br><span class=\"line\">authpriv.info                /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/secure</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@localhost #cat /etc/syslog.conf</span><br><span class=\"line\"></span><br><span class=\"line\">//<span class=\"built_in\">info</span>/<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/messagesmail</span><br><span class=\"line\">//*none</span><br><span class=\"line\">*.<span class=\"built_in\">info</span>;mail.none;authpriv.none /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/messages</span><br><span class=\"line\">//authpirv/<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/secure</span><br><span class=\"line\">authpriv.* /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/secure</span><br><span class=\"line\">//mail/<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/maillog</span><br><span class=\"line\">mail.* /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/maillog</span><br><span class=\"line\">//cron/<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/cron</span><br><span class=\"line\">cron.* /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/cron</span><br><span class=\"line\">//emerg</span><br><span class=\"line\">*.emerg *</span><br><span class=\"line\">//uucpnewscrit/<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/spooler</span><br><span class=\"line\">uucp,news.crit /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/spooler</span><br><span class=\"line\">///<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/boot.log</span><br><span class=\"line\">local7.* /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/boot.log</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>kern<br>User<br>Damon<br>Mail<br>Auth<br>Lpr<br>News<br>UucpUucp<br>Cron<br>wtmp<br>Authpriv</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>emerg<br>alert<br>Cirt<br>warning<br>err<br>notice<br>info<br>Debug<br>None</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>cron: crontab<br>dmesg: , dmesg <br>lastlog:  lastlog <br>maillog: <br>messages  <br>secure  <br>wtmpfaillog: (wtmp)(faillog)<br>httpd, samba  <br>utmpwtmplastlogUNIXutmpwtmplastlogwtmploginlastlogUIDloginlastloglastlogutmputmputmpwhowusersfinger loginwtmputmputmpwtmplastac</p>\n<h3 id=\"logrotate\"><a href=\"#logrotate\" class=\"headerlink\" title=\"logrotate\"></a>logrotate</h3><p>Linuxlogrotate/etc/logrotate.conf/etc/logrotate.d/logrotate/etc/cron.daily</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># cat /etc/logrotate.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\">weekly                        <span class=\"comment\">#</span></span><br><span class=\"line\">rotate 4                      <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"keyword\">create</span>                         <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#compress                #</span></span><br><span class=\"line\"><span class=\"keyword\">include</span> /etc/logrotate.d  <span class=\"comment\">#/etc/logrotate.d</span></span><br><span class=\"line\">/<span class=\"keyword\">var</span>/<span class=\"keyword\">log</span>/wtmp &#123;               <span class=\"comment\">#wtmp</span></span><br><span class=\"line\">monthly                              <span class=\"comment\">#</span></span><br><span class=\"line\">minsize <span class=\"number\">1</span>M                         <span class=\"comment\">#1M</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"number\">0664</span> root utmp     <span class=\"comment\">#</span></span><br><span class=\"line\">rotate <span class=\"number\">1</span>                                <span class=\"comment\">#</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n","site":{"data":{}},"excerpt":"","more":"<p>Linux</p>\n<ul>\n<li>/var/log/wtmp/var/run/utmploginwtmputmp</li>\n<li>pacctacct</li>\n<li>syslogd8syslog3/var/log/messagesUNIXHTTPFTP</li>\n</ul>\n<p>Linuxsyslog/var/logsyslog/etc/syslog.conf/etc/syslog.conf</p>\n<figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.                  </span><br><span class=\"line\">authpriv.info                /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/secure</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@localhost #cat /etc/syslog.conf</span><br><span class=\"line\"></span><br><span class=\"line\">//<span class=\"built_in\">info</span>/<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/messagesmail</span><br><span class=\"line\">//*none</span><br><span class=\"line\">*.<span class=\"built_in\">info</span>;mail.none;authpriv.none /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/messages</span><br><span class=\"line\">//authpirv/<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/secure</span><br><span class=\"line\">authpriv.* /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/secure</span><br><span class=\"line\">//mail/<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/maillog</span><br><span class=\"line\">mail.* /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/maillog</span><br><span class=\"line\">//cron/<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/cron</span><br><span class=\"line\">cron.* /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/cron</span><br><span class=\"line\">//emerg</span><br><span class=\"line\">*.emerg *</span><br><span class=\"line\">//uucpnewscrit/<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/spooler</span><br><span class=\"line\">uucp,news.crit /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/spooler</span><br><span class=\"line\">///<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/boot.log</span><br><span class=\"line\">local7.* /<span class=\"built_in\">var</span>/<span class=\"built_in\">log</span>/boot.log</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>kern<br>User<br>Damon<br>Mail<br>Auth<br>Lpr<br>News<br>UucpUucp<br>Cron<br>wtmp<br>Authpriv</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>emerg<br>alert<br>Cirt<br>warning<br>err<br>notice<br>info<br>Debug<br>None</p>\n<h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>cron: crontab<br>dmesg: , dmesg <br>lastlog:  lastlog <br>maillog: <br>messages  <br>secure  <br>wtmpfaillog: (wtmp)(faillog)<br>httpd, samba  <br>utmpwtmplastlogUNIXutmpwtmplastlogwtmploginlastlogUIDloginlastloglastlogutmputmputmpwhowusersfinger loginwtmputmputmpwtmplastac</p>\n<h3 id=\"logrotate\"><a href=\"#logrotate\" class=\"headerlink\" title=\"logrotate\"></a>logrotate</h3><p>Linuxlogrotate/etc/logrotate.conf/etc/logrotate.d/logrotate/etc/cron.daily</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># cat /etc/logrotate.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\">weekly                        <span class=\"comment\">#</span></span><br><span class=\"line\">rotate 4                      <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"keyword\">create</span>                         <span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#compress                #</span></span><br><span class=\"line\"><span class=\"keyword\">include</span> /etc/logrotate.d  <span class=\"comment\">#/etc/logrotate.d</span></span><br><span class=\"line\">/<span class=\"keyword\">var</span>/<span class=\"keyword\">log</span>/wtmp &#123;               <span class=\"comment\">#wtmp</span></span><br><span class=\"line\">monthly                              <span class=\"comment\">#</span></span><br><span class=\"line\">minsize <span class=\"number\">1</span>M                         <span class=\"comment\">#1M</span></span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"number\">0664</span> root utmp     <span class=\"comment\">#</span></span><br><span class=\"line\">rotate <span class=\"number\">1</span>                                <span class=\"comment\">#</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n"},{"layout":"post","title":"nf_conntrack","published":1,"author":"xiemx","comments":1,"date":"2016-12-19T17:12:44.000Z","_content":"#### \n\n![img](/images/QQ20161220-0.png)\n\nnf_conntrack/ip_conntrack  nat  established \n\nnf_conntrack: table full, dropping packetCONNTRACK_MAX 65535\n\n#### \n\n```\necho \"net.nf_conntrack_max=655350\" >> /etc/sysctl.conf&&sysctl -p \n```","source":"_posts/linux-nf-conntrack-drop-package.md","raw":"---\nlayout: post\ntitle: nf_conntrack\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-12-20 01:12:44\ntags: [ linux, debug ]\ncategories:\n    - linux\n---\n#### \n\n![img](/images/QQ20161220-0.png)\n\nnf_conntrack/ip_conntrack  nat  established \n\nnf_conntrack: table full, dropping packetCONNTRACK_MAX 65535\n\n#### \n\n```\necho \"net.nf_conntrack_max=655350\" >> /etc/sysctl.conf&&sysctl -p \n```","slug":"linux-nf-conntrack-drop-package","updated":"2019-10-21T06:57:42.328Z","photos":[],"link":"","_id":"ck42dyidj0036u9ur6fqwfpt3","content":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"/images/QQ20161220-0.png\" alt=\"img\"></p>\n<p>nf_conntrack/ip_conntrack  nat  established </p>\n<p>nf_conntrack: table full, dropping packetCONNTRACK_MAX 65535</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo <span class=\"string\">\"net.nf_conntrack_max=655350\"</span> &gt;&gt; <span class=\"meta-keyword\">/etc/</span>sysctl.conf&amp;<span class=\"variable\">&amp;sysctl</span> -p</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"/images/QQ20161220-0.png\" alt=\"img\"></p>\n<p>nf_conntrack/ip_conntrack  nat  established </p>\n<p>nf_conntrack: table full, dropping packetCONNTRACK_MAX 65535</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo <span class=\"string\">\"net.nf_conntrack_max=655350\"</span> &gt;&gt; <span class=\"meta-keyword\">/etc/</span>sysctl.conf&amp;<span class=\"variable\">&amp;sysctl</span> -p</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"Linuxacl","published":1,"author":"xiemx","comments":1,"date":"2015-11-05T01:11:28.000Z","_content":"### \n\nlinuxrwx3setuidsetgidstick bit\n\n#### setuid\n**root**\n\n```\nchmod u+s /tmp/testfile\nchmod u-s /tmp/testfile\n```\n\n```\n-rwsr-xr-x         1       root          root           22984          2015-11-04       /usr/bin/passwd\n```\n#### setgid\n\n\n:\n```\nchmod g+s /tmp/test/\nchmod g-s /tmp/test/\n```\n:\n```  \ndrwxr-sr-x         1       testuser         testadmin           22984          2015-11-04       /tmp/test/\n-rw-r--r--           1       root         testadmin          22984          2015-11-04       /tmp/test/file1  test\n```\n#### sticky bit\n\n\n\n```\nchmod +t /tmp\nchmod -t /tmp\n```\n setuid=4setgid=2sticky bit=1\n```\nchmod 4777 /test/file1 setuid\nchmod 2777 /test/file2 setgid\nchmod 1777 /test/      sticky bit\n```\n\n### attr\n\nroot\n\n\n```\n\nchattr     \n\n+ \n- \n= \nA atime (access time)(modified), I/O\nSI/Osync\naappendroot\nccompresse\ndno dumpdump\nii \njjournalmountdata=ordered  data=writeback  (journal)filesystem data=journal\nsblockinode\nusuundeletion\naiaisuperuser (root) CAP_LINUX_IMMUTABLE\n```\n\n```\nchattr +i /tmp/testfile1  i\nchattr +a /tmp/testfile1 a\n\nattrlsattr\nlsattr /tmp/testfile1   \n```\n#### ACL()\n\nLinux`-rwxrwxrwx.`LinuxACLUGO\n\nACL\n* R\n* W\n* X\n\naclUGORWX\n\n\n```\nsetfacl       \n-m   acl\n-x   acl\n-b    acl\n```\n\n```\nsetfacl  -m u:test:rwx /tmp/testfile1 testtestfile1RWX\nsetfacl  -x u:test /tmp/testfile1     testtestfile1acl\nsetfacl  -b /tmp/testfile1            testfile1acl\n```\naclls -l   +-rwxrwxrwx+aclgetfacl  /tmp/testfile1acl","source":"_posts/linux-premissions-and-acl.md","raw":"---\nlayout: post\ntitle: Linuxacl\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-11-05 09:11:28\ntags: [ linux, acl ]\ncategories:\n    - linux\n---\n### \n\nlinuxrwx3setuidsetgidstick bit\n\n#### setuid\n**root**\n\n```\nchmod u+s /tmp/testfile\nchmod u-s /tmp/testfile\n```\n\n```\n-rwsr-xr-x         1       root          root           22984          2015-11-04       /usr/bin/passwd\n```\n#### setgid\n\n\n:\n```\nchmod g+s /tmp/test/\nchmod g-s /tmp/test/\n```\n:\n```  \ndrwxr-sr-x         1       testuser         testadmin           22984          2015-11-04       /tmp/test/\n-rw-r--r--           1       root         testadmin          22984          2015-11-04       /tmp/test/file1  test\n```\n#### sticky bit\n\n\n\n```\nchmod +t /tmp\nchmod -t /tmp\n```\n setuid=4setgid=2sticky bit=1\n```\nchmod 4777 /test/file1 setuid\nchmod 2777 /test/file2 setgid\nchmod 1777 /test/      sticky bit\n```\n\n### attr\n\nroot\n\n\n```\n\nchattr     \n\n+ \n- \n= \nA atime (access time)(modified), I/O\nSI/Osync\naappendroot\nccompresse\ndno dumpdump\nii \njjournalmountdata=ordered  data=writeback  (journal)filesystem data=journal\nsblockinode\nusuundeletion\naiaisuperuser (root) CAP_LINUX_IMMUTABLE\n```\n\n```\nchattr +i /tmp/testfile1  i\nchattr +a /tmp/testfile1 a\n\nattrlsattr\nlsattr /tmp/testfile1   \n```\n#### ACL()\n\nLinux`-rwxrwxrwx.`LinuxACLUGO\n\nACL\n* R\n* W\n* X\n\naclUGORWX\n\n\n```\nsetfacl       \n-m   acl\n-x   acl\n-b    acl\n```\n\n```\nsetfacl  -m u:test:rwx /tmp/testfile1 testtestfile1RWX\nsetfacl  -x u:test /tmp/testfile1     testtestfile1acl\nsetfacl  -b /tmp/testfile1            testfile1acl\n```\naclls -l   +-rwxrwxrwx+aclgetfacl  /tmp/testfile1acl","slug":"linux-premissions-and-acl","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyidk003au9urkecby50t","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>linuxrwx3setuidsetgidstick bit</p>\n<h4 id=\"setuid\"><a href=\"#setuid\" class=\"headerlink\" title=\"setuid\"></a>setuid</h4><p><strong>root</strong><br></p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod u+s <span class=\"regexp\">/tmp/</span>testfile</span><br><span class=\"line\">chmod u-s <span class=\"regexp\">/tmp/</span>testfile</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-rwsr-xr-x         <span class=\"number\">1</span>       root          root           <span class=\"number\">22984</span>          <span class=\"number\">2015</span><span class=\"number\">-11</span><span class=\"number\">-04</span>       /usr/bin/passwd</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"setgid\"><a href=\"#setgid\" class=\"headerlink\" title=\"setgid\"></a>setgid</h4><p></p>\n<p>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod g+s /tmp/<span class=\"built_in\">test</span>/</span><br><span class=\"line\">chmod g<span class=\"_\">-s</span> /tmp/<span class=\"built_in\">test</span>/</span><br></pre></td></tr></table></figure>\n\n<p>:</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drwxr-sr-x         <span class=\"number\">1</span>       testuser         testadmin           <span class=\"number\">22984</span>          <span class=\"number\">2015</span><span class=\"number\">-11</span><span class=\"number\">-04</span>       /tmp/test/</span><br><span class=\"line\">-rw-r--r--           <span class=\"number\">1</span>       root         testadmin          <span class=\"number\">22984</span>          <span class=\"number\">2015</span><span class=\"number\">-11</span><span class=\"number\">-04</span>       /tmp/test/file1  test</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"sticky-bit\"><a href=\"#sticky-bit\" class=\"headerlink\" title=\"sticky bit\"></a>sticky bit</h4><p></p>\n<p></p>\n<figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod +<span class=\"built_in\">t</span> /tmp</span><br><span class=\"line\">chmod -<span class=\"built_in\">t</span> /tmp</span><br></pre></td></tr></table></figure>\n\n<p> setuid=4setgid=2sticky bit=1</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod <span class=\"number\">4777</span> /test/file1 setuid</span><br><span class=\"line\">chmod <span class=\"number\">2777</span> /test/file2 setgid</span><br><span class=\"line\">chmod <span class=\"number\">1777</span> /test/      sticky bit</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"attr\"><a href=\"#attr\" class=\"headerlink\" title=\"attr\"></a>attr</h3><p>root</p>\n<figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">chattr     </span><br><span class=\"line\"></span><br><span class=\"line\">+ </span><br><span class=\"line\"><span class=\"bullet\">- </span></span><br><span class=\"line\"><span class=\"section\">= </span></span><br><span class=\"line\">A atime (access time)(modified), I/O</span><br><span class=\"line\">SI/Osync</span><br><span class=\"line\">aappendroot</span><br><span class=\"line\">ccompresse</span><br><span class=\"line\">dno dumpdump</span><br><span class=\"line\">ii </span><br><span class=\"line\">jjournalmountdata=ordered  data=writeback  (journal)filesystem data=journal</span><br><span class=\"line\">sblockinode</span><br><span class=\"line\">usuundeletion</span><br><span class=\"line\">aiaisuperuser (root) CAP<span class=\"emphasis\">_LINUX_</span>IMMUTABLE</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chattr +<span class=\"selector-tag\">i</span> /tmp/testfile1  i</span><br><span class=\"line\">chattr +<span class=\"selector-tag\">a</span> /tmp/testfile1 a</span><br><span class=\"line\"></span><br><span class=\"line\">attrlsattr</span><br><span class=\"line\">lsattr /tmp/testfile1   </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ACL-\"><a href=\"#ACL-\" class=\"headerlink\" title=\"ACL()\"></a>ACL()</h4><p>Linux<code>-rwxrwxrwx.</code>LinuxACLUGO</p>\n<p>ACL</p>\n<ul>\n<li>R</li>\n<li>W</li>\n<li>X</li>\n</ul>\n<p>aclUGORWX</p>\n<p></p>\n<figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setfacl       </span><br><span class=\"line\"><span class=\"deletion\">-m   acl</span></span><br><span class=\"line\"><span class=\"deletion\">-x   acl</span></span><br><span class=\"line\"><span class=\"deletion\">-b    acl</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setfacl  -m <span class=\"string\">u:</span><span class=\"string\">test:</span>rwx <span class=\"regexp\">/tmp/</span>testfile1 testtestfile1RWX</span><br><span class=\"line\">setfacl  -x <span class=\"string\">u:</span>test <span class=\"regexp\">/tmp/</span>testfile1     testtestfile1acl</span><br><span class=\"line\">setfacl  -b <span class=\"regexp\">/tmp/</span>testfile1            testfile1acl</span><br></pre></td></tr></table></figure>\n\n<p>aclls -l   +-rwxrwxrwx+aclgetfacl  /tmp/testfile1acl</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>linuxrwx3setuidsetgidstick bit</p>\n<h4 id=\"setuid\"><a href=\"#setuid\" class=\"headerlink\" title=\"setuid\"></a>setuid</h4><p><strong>root</strong><br></p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod u+s <span class=\"regexp\">/tmp/</span>testfile</span><br><span class=\"line\">chmod u-s <span class=\"regexp\">/tmp/</span>testfile</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-rwsr-xr-x         <span class=\"number\">1</span>       root          root           <span class=\"number\">22984</span>          <span class=\"number\">2015</span><span class=\"number\">-11</span><span class=\"number\">-04</span>       /usr/bin/passwd</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"setgid\"><a href=\"#setgid\" class=\"headerlink\" title=\"setgid\"></a>setgid</h4><p></p>\n<p>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod g+s /tmp/<span class=\"built_in\">test</span>/</span><br><span class=\"line\">chmod g<span class=\"_\">-s</span> /tmp/<span class=\"built_in\">test</span>/</span><br></pre></td></tr></table></figure>\n\n<p>:</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drwxr-sr-x         <span class=\"number\">1</span>       testuser         testadmin           <span class=\"number\">22984</span>          <span class=\"number\">2015</span><span class=\"number\">-11</span><span class=\"number\">-04</span>       /tmp/test/</span><br><span class=\"line\">-rw-r--r--           <span class=\"number\">1</span>       root         testadmin          <span class=\"number\">22984</span>          <span class=\"number\">2015</span><span class=\"number\">-11</span><span class=\"number\">-04</span>       /tmp/test/file1  test</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"sticky-bit\"><a href=\"#sticky-bit\" class=\"headerlink\" title=\"sticky bit\"></a>sticky bit</h4><p></p>\n<p></p>\n<figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod +<span class=\"built_in\">t</span> /tmp</span><br><span class=\"line\">chmod -<span class=\"built_in\">t</span> /tmp</span><br></pre></td></tr></table></figure>\n\n<p> setuid=4setgid=2sticky bit=1</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod <span class=\"number\">4777</span> /test/file1 setuid</span><br><span class=\"line\">chmod <span class=\"number\">2777</span> /test/file2 setgid</span><br><span class=\"line\">chmod <span class=\"number\">1777</span> /test/      sticky bit</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"attr\"><a href=\"#attr\" class=\"headerlink\" title=\"attr\"></a>attr</h3><p>root</p>\n<figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">chattr     </span><br><span class=\"line\"></span><br><span class=\"line\">+ </span><br><span class=\"line\"><span class=\"bullet\">- </span></span><br><span class=\"line\"><span class=\"section\">= </span></span><br><span class=\"line\">A atime (access time)(modified), I/O</span><br><span class=\"line\">SI/Osync</span><br><span class=\"line\">aappendroot</span><br><span class=\"line\">ccompresse</span><br><span class=\"line\">dno dumpdump</span><br><span class=\"line\">ii </span><br><span class=\"line\">jjournalmountdata=ordered  data=writeback  (journal)filesystem data=journal</span><br><span class=\"line\">sblockinode</span><br><span class=\"line\">usuundeletion</span><br><span class=\"line\">aiaisuperuser (root) CAP<span class=\"emphasis\">_LINUX_</span>IMMUTABLE</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chattr +<span class=\"selector-tag\">i</span> /tmp/testfile1  i</span><br><span class=\"line\">chattr +<span class=\"selector-tag\">a</span> /tmp/testfile1 a</span><br><span class=\"line\"></span><br><span class=\"line\">attrlsattr</span><br><span class=\"line\">lsattr /tmp/testfile1   </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ACL-\"><a href=\"#ACL-\" class=\"headerlink\" title=\"ACL()\"></a>ACL()</h4><p>Linux<code>-rwxrwxrwx.</code>LinuxACLUGO</p>\n<p>ACL</p>\n<ul>\n<li>R</li>\n<li>W</li>\n<li>X</li>\n</ul>\n<p>aclUGORWX</p>\n<p></p>\n<figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setfacl       </span><br><span class=\"line\"><span class=\"deletion\">-m   acl</span></span><br><span class=\"line\"><span class=\"deletion\">-x   acl</span></span><br><span class=\"line\"><span class=\"deletion\">-b    acl</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setfacl  -m <span class=\"string\">u:</span><span class=\"string\">test:</span>rwx <span class=\"regexp\">/tmp/</span>testfile1 testtestfile1RWX</span><br><span class=\"line\">setfacl  -x <span class=\"string\">u:</span>test <span class=\"regexp\">/tmp/</span>testfile1     testtestfile1acl</span><br><span class=\"line\">setfacl  -b <span class=\"regexp\">/tmp/</span>testfile1            testfile1acl</span><br></pre></td></tr></table></figure>\n\n<p>aclls -l   +-rwxrwxrwx+aclgetfacl  /tmp/testfile1acl</p>\n"},{"layout":"post","title":"","published":1,"author":"xiemx","comments":1,"date":"2017-03-29T02:03:05.000Z","_content":"```\nD  IO\nR  \nS  \nT  sleep 10ctrl -z psT\nW 2.6xx \nX  \nZ  \n\nBSD\n<  \nN  \nL   \ns   \nl   \n+  \n```","source":"_posts/linux-process-status.md","raw":"---\nlayout: post\ntitle: \npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-03-29 10:03:05\ntags: [ linux ]\ncategories:\n    - linux\n---\n```\nD  IO\nR  \nS  \nT  sleep 10ctrl -z psT\nW 2.6xx \nX  \nZ  \n\nBSD\n<  \nN  \nL   \ns   \nl   \n+  \n```","slug":"linux-process-status","updated":"2019-10-21T06:57:42.805Z","photos":[],"link":"","_id":"ck42dyidm003eu9urqv3w1lov","content":"<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">D</span>  <span class=\"string\">IO</span></span><br><span class=\"line\"><span class=\"attr\">R</span>  <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">S</span>  <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">T</span>  <span class=\"string\">sleep 10ctrl -z psT</span></span><br><span class=\"line\"><span class=\"attr\">W</span> <span class=\"string\">2.6xx </span></span><br><span class=\"line\"><span class=\"attr\">X</span>  <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">Z</span>  <span class=\"string\"></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">BSD</span></span><br><span class=\"line\"><span class=\"meta\">&lt;</span>  <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">N</span>  <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">L</span>   <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">s</span>   <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">l</span>   <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"meta\">+</span>  <span class=\"string\"></span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">D</span>  <span class=\"string\">IO</span></span><br><span class=\"line\"><span class=\"attr\">R</span>  <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">S</span>  <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">T</span>  <span class=\"string\">sleep 10ctrl -z psT</span></span><br><span class=\"line\"><span class=\"attr\">W</span> <span class=\"string\">2.6xx </span></span><br><span class=\"line\"><span class=\"attr\">X</span>  <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">Z</span>  <span class=\"string\"></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">BSD</span></span><br><span class=\"line\"><span class=\"meta\">&lt;</span>  <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">N</span>  <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">L</span>   <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">s</span>   <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">l</span>   <span class=\"string\"></span></span><br><span class=\"line\"><span class=\"meta\">+</span>  <span class=\"string\"></span></span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"start-stop-daemon ","published":1,"author":"xiemx","comments":1,"date":"2017-01-07T03:01:59.000Z","_content":"start-stop-daemon/etc/init.d/\n```\n\n-S|--start -- <argument> ...  \n-K|--stop  \n-T|--status  \n-H|--help  \n-V|--version  \nMatching options (at least one is required): \n-p|--pidfile <pid-file> pid file to check \n-x|--exec <executable> program to start/check if it is running \n-n|--name <process-name> process name to check \n-u|--user <username|uid> process owner to check \nOptions: \n-g|--group <group|gid>  \n-c|--chuid <name|uid[:group|gid]> \n \n-s|--signal <signal> signal to send (default TERM) \n-a|--startas <pathname> program to start (default is <executable>) \n-r|--chroot <directory> chroot to <directory> before starting \n-d|--chdir <directory> change to <directory> (default is /) \n-N|--nicelevel <incr> add incr to the process' nice level \n-P|--procsched <policy[:prio]> \nuse <policy> with <prio> for the kernel \nprocess scheduler (default prio is 0) \n-I|--iosched <class[:prio]> use <class> with <prio> to set the IO \nscheduler (default prio is 4) \n-k|--umask <mask> <mask> \n-b|--background  \n-m|--make-pidfile pidfilestart-stop-daemon \n-R|--retry <schedule> timeoutKILL \n-t|--test  \n-o|--oknodo exit status 0 (not 1) if nothing done \n-q|--quiet  \n-v|--verbose  \n```\n\ndaemon \n```\nstart-stop-daemon --start --background --exec /test.py  -- -c /test.conf  \n# --  /test.py,/test.py -c /test.conf\n```\n\ndaemon \n```\nstart-stop-daemon --stop --name proxy.py\n```","source":"_posts/linux-start-stop-daemon.md","raw":"---\nlayout: post\ntitle: start-stop-daemon \npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-01-07 11:01:59\ntags: [ linux ]\ncategories:\n    - linux\n---\nstart-stop-daemon/etc/init.d/\n```\n\n-S|--start -- <argument> ...  \n-K|--stop  \n-T|--status  \n-H|--help  \n-V|--version  \nMatching options (at least one is required): \n-p|--pidfile <pid-file> pid file to check \n-x|--exec <executable> program to start/check if it is running \n-n|--name <process-name> process name to check \n-u|--user <username|uid> process owner to check \nOptions: \n-g|--group <group|gid>  \n-c|--chuid <name|uid[:group|gid]> \n \n-s|--signal <signal> signal to send (default TERM) \n-a|--startas <pathname> program to start (default is <executable>) \n-r|--chroot <directory> chroot to <directory> before starting \n-d|--chdir <directory> change to <directory> (default is /) \n-N|--nicelevel <incr> add incr to the process' nice level \n-P|--procsched <policy[:prio]> \nuse <policy> with <prio> for the kernel \nprocess scheduler (default prio is 0) \n-I|--iosched <class[:prio]> use <class> with <prio> to set the IO \nscheduler (default prio is 4) \n-k|--umask <mask> <mask> \n-b|--background  \n-m|--make-pidfile pidfilestart-stop-daemon \n-R|--retry <schedule> timeoutKILL \n-t|--test  \n-o|--oknodo exit status 0 (not 1) if nothing done \n-q|--quiet  \n-v|--verbose  \n```\n\ndaemon \n```\nstart-stop-daemon --start --background --exec /test.py  -- -c /test.conf  \n# --  /test.py,/test.py -c /test.conf\n```\n\ndaemon \n```\nstart-stop-daemon --stop --name proxy.py\n```","slug":"linux-start-stop-daemon","updated":"2019-10-21T06:57:42.835Z","photos":[],"link":"","_id":"ck42dyidn003hu9ur36j4sbko","content":"<p>start-stop-daemon/etc/init.d/</p>\n<figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">-<span class=\"ruby\">S<span class=\"params\">|--start -- &lt;argument&gt; ...  </span></span></span><br><span class=\"line\"><span class=\"ruby\">-K<span class=\"params\">|--stop  </span></span></span><br><span class=\"line\"><span class=\"ruby\">-T<span class=\"params\">|--status  </span></span></span><br><span class=\"line\"><span class=\"ruby\">-H<span class=\"params\">|--help  </span></span></span><br><span class=\"line\"><span class=\"ruby\">-V<span class=\"params\">|--version  </span></span></span><br><span class=\"line\"><span class=\"ruby\">Matching options (at least one is required): </span></span><br><span class=\"line\"><span class=\"ruby\">-p<span class=\"params\">|--pidfile &lt;pid-file&gt; pid file to check </span></span></span><br><span class=\"line\"><span class=\"ruby\">-x<span class=\"params\">|--exec &lt;executable&gt; program to start/check <span class=\"keyword\">if</span> it is running </span></span></span><br><span class=\"line\"><span class=\"ruby\">-n<span class=\"params\">|--name &lt;process-name&gt; process name to check </span></span></span><br><span class=\"line\"><span class=\"ruby\">-u<span class=\"params\">|--user &lt;username|</span>uid&gt; process owner to check </span></span><br><span class=\"line\"><span class=\"ruby\"><span class=\"symbol\">Options:</span> </span></span><br><span class=\"line\"><span class=\"ruby\">-g<span class=\"params\">|--group &lt;group|</span>gid&gt;  </span></span><br><span class=\"line\"><span class=\"ruby\">-c<span class=\"params\">|--chuid &lt;name|</span>uid[<span class=\"symbol\">:group|gid</span>]&gt; </span></span><br><span class=\"line\"><span class=\"ruby\"> </span></span><br><span class=\"line\"><span class=\"ruby\">-s<span class=\"params\">|--signal &lt;signal&gt; signal to send (default TERM) </span></span></span><br><span class=\"line\"><span class=\"ruby\">-a<span class=\"params\">|--startas &lt;pathname&gt; program to start (default is &lt;executable&gt;) </span></span></span><br><span class=\"line\"><span class=\"ruby\">-r<span class=\"params\">|--chroot &lt;directory&gt; chroot to &lt;directory&gt; before starting </span></span></span><br><span class=\"line\"><span class=\"ruby\">-d<span class=\"params\">|--chdir &lt;directory&gt; change to &lt;directory&gt; (default is /) </span></span></span><br><span class=\"line\"><span class=\"ruby\">-N<span class=\"params\">|--nicelevel &lt;incr&gt; add incr to the process' nice level </span></span></span><br><span class=\"line\"><span class=\"ruby\">-P<span class=\"params\">|--procsched &lt;policy[:prio]&gt; </span></span></span><br><span class=\"line\"><span class=\"ruby\">use &lt;policy&gt; with &lt;prio&gt; <span class=\"keyword\">for</span> the kernel </span></span><br><span class=\"line\"><span class=\"ruby\">process scheduler (default prio is <span class=\"number\">0</span>) </span></span><br><span class=\"line\"><span class=\"ruby\">-I<span class=\"params\">|--iosched &lt;<span class=\"keyword\">class</span>[:prio]&gt; use &lt;<span class=\"keyword\">class</span>&gt; with &lt;prio&gt; to set the IO </span></span></span><br><span class=\"line\"><span class=\"ruby\">scheduler (default prio is <span class=\"number\">4</span>) </span></span><br><span class=\"line\"><span class=\"ruby\">-k<span class=\"params\">|--umask &lt;mask&gt; &lt;mask&gt; </span></span></span><br><span class=\"line\"><span class=\"ruby\">-b<span class=\"params\">|--background  </span></span></span><br><span class=\"line\"><span class=\"ruby\">-m<span class=\"params\">|--make-pidfile pidfilestart-stop-daemon </span></span></span><br><span class=\"line\"><span class=\"ruby\">-R<span class=\"params\">|--<span class=\"keyword\">retry</span> &lt;schedule&gt; timeoutKILL </span></span></span><br><span class=\"line\"><span class=\"ruby\">-t<span class=\"params\">|--test  </span></span></span><br><span class=\"line\"><span class=\"ruby\">-o<span class=\"params\">|--oknodo exit status 0 (<span class=\"keyword\">not</span> 1) <span class=\"keyword\">if</span> nothing done </span></span></span><br><span class=\"line\"><span class=\"ruby\">-q<span class=\"params\">|--quiet  </span></span></span><br><span class=\"line\"><span class=\"ruby\">-v<span class=\"params\">|--verbose </span></span></span><br></pre></td></tr></table></figure>\n\n<p>daemon </p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">start-stop-daemon --start --background --exec /<span class=\"keyword\">test</span>.py  -- -c /<span class=\"keyword\">test</span>.<span class=\"keyword\">conf</span>  </span><br><span class=\"line\"># --  /<span class=\"keyword\">test</span>.py,/<span class=\"keyword\">test</span>.py -c /<span class=\"keyword\">test</span>.<span class=\"keyword\">conf</span></span><br></pre></td></tr></table></figure>\n\n<p>daemon </p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"literal\">start</span>-<span class=\"literal\">stop</span>-daemon --<span class=\"literal\">stop</span> --name proxy.py</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>start-stop-daemon/etc/init.d/</p>\n<figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">-<span class=\"ruby\">S<span class=\"params\">|--start -- &lt;argument&gt; ...  </span></span></span><br><span class=\"line\"><span class=\"ruby\">-K<span class=\"params\">|--stop  </span></span></span><br><span class=\"line\"><span class=\"ruby\">-T<span class=\"params\">|--status  </span></span></span><br><span class=\"line\"><span class=\"ruby\">-H<span class=\"params\">|--help  </span></span></span><br><span class=\"line\"><span class=\"ruby\">-V<span class=\"params\">|--version  </span></span></span><br><span class=\"line\"><span class=\"ruby\">Matching options (at least one is required): </span></span><br><span class=\"line\"><span class=\"ruby\">-p<span class=\"params\">|--pidfile &lt;pid-file&gt; pid file to check </span></span></span><br><span class=\"line\"><span class=\"ruby\">-x<span class=\"params\">|--exec &lt;executable&gt; program to start/check <span class=\"keyword\">if</span> it is running </span></span></span><br><span class=\"line\"><span class=\"ruby\">-n<span class=\"params\">|--name &lt;process-name&gt; process name to check </span></span></span><br><span class=\"line\"><span class=\"ruby\">-u<span class=\"params\">|--user &lt;username|</span>uid&gt; process owner to check </span></span><br><span class=\"line\"><span class=\"ruby\"><span class=\"symbol\">Options:</span> </span></span><br><span class=\"line\"><span class=\"ruby\">-g<span class=\"params\">|--group &lt;group|</span>gid&gt;  </span></span><br><span class=\"line\"><span class=\"ruby\">-c<span class=\"params\">|--chuid &lt;name|</span>uid[<span class=\"symbol\">:group|gid</span>]&gt; </span></span><br><span class=\"line\"><span class=\"ruby\"> </span></span><br><span class=\"line\"><span class=\"ruby\">-s<span class=\"params\">|--signal &lt;signal&gt; signal to send (default TERM) </span></span></span><br><span class=\"line\"><span class=\"ruby\">-a<span class=\"params\">|--startas &lt;pathname&gt; program to start (default is &lt;executable&gt;) </span></span></span><br><span class=\"line\"><span class=\"ruby\">-r<span class=\"params\">|--chroot &lt;directory&gt; chroot to &lt;directory&gt; before starting </span></span></span><br><span class=\"line\"><span class=\"ruby\">-d<span class=\"params\">|--chdir &lt;directory&gt; change to &lt;directory&gt; (default is /) </span></span></span><br><span class=\"line\"><span class=\"ruby\">-N<span class=\"params\">|--nicelevel &lt;incr&gt; add incr to the process' nice level </span></span></span><br><span class=\"line\"><span class=\"ruby\">-P<span class=\"params\">|--procsched &lt;policy[:prio]&gt; </span></span></span><br><span class=\"line\"><span class=\"ruby\">use &lt;policy&gt; with &lt;prio&gt; <span class=\"keyword\">for</span> the kernel </span></span><br><span class=\"line\"><span class=\"ruby\">process scheduler (default prio is <span class=\"number\">0</span>) </span></span><br><span class=\"line\"><span class=\"ruby\">-I<span class=\"params\">|--iosched &lt;<span class=\"keyword\">class</span>[:prio]&gt; use &lt;<span class=\"keyword\">class</span>&gt; with &lt;prio&gt; to set the IO </span></span></span><br><span class=\"line\"><span class=\"ruby\">scheduler (default prio is <span class=\"number\">4</span>) </span></span><br><span class=\"line\"><span class=\"ruby\">-k<span class=\"params\">|--umask &lt;mask&gt; &lt;mask&gt; </span></span></span><br><span class=\"line\"><span class=\"ruby\">-b<span class=\"params\">|--background  </span></span></span><br><span class=\"line\"><span class=\"ruby\">-m<span class=\"params\">|--make-pidfile pidfilestart-stop-daemon </span></span></span><br><span class=\"line\"><span class=\"ruby\">-R<span class=\"params\">|--<span class=\"keyword\">retry</span> &lt;schedule&gt; timeoutKILL </span></span></span><br><span class=\"line\"><span class=\"ruby\">-t<span class=\"params\">|--test  </span></span></span><br><span class=\"line\"><span class=\"ruby\">-o<span class=\"params\">|--oknodo exit status 0 (<span class=\"keyword\">not</span> 1) <span class=\"keyword\">if</span> nothing done </span></span></span><br><span class=\"line\"><span class=\"ruby\">-q<span class=\"params\">|--quiet  </span></span></span><br><span class=\"line\"><span class=\"ruby\">-v<span class=\"params\">|--verbose </span></span></span><br></pre></td></tr></table></figure>\n\n<p>daemon </p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">start-stop-daemon --start --background --exec /<span class=\"keyword\">test</span>.py  -- -c /<span class=\"keyword\">test</span>.<span class=\"keyword\">conf</span>  </span><br><span class=\"line\"># --  /<span class=\"keyword\">test</span>.py,/<span class=\"keyword\">test</span>.py -c /<span class=\"keyword\">test</span>.<span class=\"keyword\">conf</span></span><br></pre></td></tr></table></figure>\n\n<p>daemon </p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"literal\">start</span>-<span class=\"literal\">stop</span>-daemon --<span class=\"literal\">stop</span> --name proxy.py</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"Linux","published":1,"author":"xiemx","comments":1,"date":"2015-11-06T21:11:17.000Z","_content":"stdin,stdout,stderr)linux\n\n```\n[root@localhost ~]# ll /dev/stdin /dev/stdout /dev/stderr\nlrwxrwxrwx. 1 root root 15 Nov 8 01:03 /dev/stderr -> /proc/self/fd/2 \nlrwxrwxrwx. 1 root root 15 Nov 8 01:03 /dev/stdin -> /proc/self/fd/0 \nlrwxrwxrwx. 1 root root 15 Nov 8 01:03 /dev/stdout -> /proc/self/fd/1\n```\n\nlinux shell\n\n1.  (stdin)  0  < \n2.  (stdout) 1  >  >> \n3. (stderr) 2  2>  2>> \n\n`>` `>>`\n```shell\nls-l>testfile1##testfile1\n\necho123qwe321|passwd --stdin testuse\n###123qwe321passwdtestuser\n###--stdin/dev/stdin(stdin)\n\n\n## >\n## >>\n###>\n\necho \"\" > /tmp/testfile1 ##testfile1\n```","source":"_posts/linux-stdin-stdout-stderr.md","raw":"---\nlayout: post\ntitle: Linux\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-11-07 05:11:17\ntags: [ linux ]\ncategories:\n    - linux\n---\nstdin,stdout,stderr)linux\n\n```\n[root@localhost ~]# ll /dev/stdin /dev/stdout /dev/stderr\nlrwxrwxrwx. 1 root root 15 Nov 8 01:03 /dev/stderr -> /proc/self/fd/2 \nlrwxrwxrwx. 1 root root 15 Nov 8 01:03 /dev/stdin -> /proc/self/fd/0 \nlrwxrwxrwx. 1 root root 15 Nov 8 01:03 /dev/stdout -> /proc/self/fd/1\n```\n\nlinux shell\n\n1.  (stdin)  0  < \n2.  (stdout) 1  >  >> \n3. (stderr) 2  2>  2>> \n\n`>` `>>`\n```shell\nls-l>testfile1##testfile1\n\necho123qwe321|passwd --stdin testuse\n###123qwe321passwdtestuser\n###--stdin/dev/stdin(stdin)\n\n\n## >\n## >>\n###>\n\necho \"\" > /tmp/testfile1 ##testfile1\n```","slug":"linux-stdin-stdout-stderr","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyido003mu9ur15upc9gp","content":"<p>stdin,stdout,stderr)linux</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# ll /dev/stdin /dev/stdout /dev/stderr</span><br><span class=\"line\">lrwxrwxrwx. <span class=\"number\">1</span> root root <span class=\"number\">15</span> Nov <span class=\"number\">8</span> <span class=\"number\">01</span>:<span class=\"number\">03</span> /dev/stderr -&gt; /proc/self/fd/<span class=\"number\">2</span> </span><br><span class=\"line\">lrwxrwxrwx. <span class=\"number\">1</span> root root <span class=\"number\">15</span> Nov <span class=\"number\">8</span> <span class=\"number\">01</span>:<span class=\"number\">03</span> /dev/stdin -&gt; /proc/self/fd/<span class=\"number\">0</span> </span><br><span class=\"line\">lrwxrwxrwx. <span class=\"number\">1</span> root root <span class=\"number\">15</span> Nov <span class=\"number\">8</span> <span class=\"number\">01</span>:<span class=\"number\">03</span> /dev/stdout -&gt; /proc/self/fd/<span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n\n<p>linux shell</p>\n<ol>\n<li>   (stdin)  0  &lt; </li>\n<li>   (stdout) 1  &gt;  &gt;&gt; </li>\n<li>(stderr) 2  2&gt;  2&gt;&gt; </li>\n</ol>\n<p><code>&gt;</code> <code>&gt;&gt;</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls-l&gt;testfile1##testfile1</span><br><span class=\"line\"></span><br><span class=\"line\">echo123qwe321|passwd --stdin testuse</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">##123qwe321passwdtestuser</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">##--stdin/dev/stdin(stdin)</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\"># &gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\"># &gt;&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">##&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">echo \"\" &gt; /tmp/testfile1 ##testfile1</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>stdin,stdout,stderr)linux</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# ll /dev/stdin /dev/stdout /dev/stderr</span><br><span class=\"line\">lrwxrwxrwx. <span class=\"number\">1</span> root root <span class=\"number\">15</span> Nov <span class=\"number\">8</span> <span class=\"number\">01</span>:<span class=\"number\">03</span> /dev/stderr -&gt; /proc/self/fd/<span class=\"number\">2</span> </span><br><span class=\"line\">lrwxrwxrwx. <span class=\"number\">1</span> root root <span class=\"number\">15</span> Nov <span class=\"number\">8</span> <span class=\"number\">01</span>:<span class=\"number\">03</span> /dev/stdin -&gt; /proc/self/fd/<span class=\"number\">0</span> </span><br><span class=\"line\">lrwxrwxrwx. <span class=\"number\">1</span> root root <span class=\"number\">15</span> Nov <span class=\"number\">8</span> <span class=\"number\">01</span>:<span class=\"number\">03</span> /dev/stdout -&gt; /proc/self/fd/<span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n\n<p>linux shell</p>\n<ol>\n<li>   (stdin)  0  &lt; </li>\n<li>   (stdout) 1  &gt;  &gt;&gt; </li>\n<li>(stderr) 2  2&gt;  2&gt;&gt; </li>\n</ol>\n<p><code>&gt;</code> <code>&gt;&gt;</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls-l&gt;testfile1##testfile1</span><br><span class=\"line\"></span><br><span class=\"line\">echo123qwe321|passwd --stdin testuse</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">##123qwe321passwdtestuser</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">##--stdin/dev/stdin(stdin)</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\"># &gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\"># &gt;&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">##&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">echo \"\" &gt; /tmp/testfile1 ##testfile1</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"Linux","published":1,"author":"xiemx","comments":1,"date":"2015-11-07T04:11:03.000Z","_content":"```\n[root@localhost ~]# ls /\nbin  dev    home    lost+found mnt    proc     sbin srv     tmp    var\nboot     etc lib media opt    root selinux sys    usr\n\n/bin binBinary\n/boot Linux\n/dev devDevice()LinuxLinux\n/etc \n/home Linux\n/lib WindowsDLL\n/lost+found ext\n/media LinuxULinux\n/mnt /mnt/\n/opt ORACLE\n/proc \n/root \n/sbin \n/selinux Redhat/CentOSSelinuxwindowsselinux\n/srv \n/sys linux2.62.6 sysfs sysfs3procdevfsdevpts\n/tmp \n/usr windowsprogram files\n/usr/bin \n/usr/sbin \n/usr/src \n/var \n```","source":"_posts/linux-tree.md","raw":"---\nlayout: post\ntitle: Linux\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-11-07 12:11:03\ntags: [ linux ]\ncategories:\n    - linux\n---\n```\n[root@localhost ~]# ls /\nbin  dev    home    lost+found mnt    proc     sbin srv     tmp    var\nboot     etc lib media opt    root selinux sys    usr\n\n/bin binBinary\n/boot Linux\n/dev devDevice()LinuxLinux\n/etc \n/home Linux\n/lib WindowsDLL\n/lost+found ext\n/media LinuxULinux\n/mnt /mnt/\n/opt ORACLE\n/proc \n/root \n/sbin \n/selinux Redhat/CentOSSelinuxwindowsselinux\n/srv \n/sys linux2.62.6 sysfs sysfs3procdevfsdevpts\n/tmp \n/usr windowsprogram files\n/usr/bin \n/usr/sbin \n/usr/src \n/var \n```","slug":"linux-tree","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyidp003pu9urmqwa37dg","content":"<figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># ls /</span></span><br><span class=\"line\">bin  dev    home    lost+found mnt    proc     sbin srv     tmp    var</span><br><span class=\"line\">boot     etc <span class=\"class\"><span class=\"keyword\">lib</span> <span class=\"title\">media</span> <span class=\"title\">opt</span>    <span class=\"title\">root</span> <span class=\"title\">selinux</span> <span class=\"title\">sys</span>    <span class=\"title\">usr</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">/bin binBinary</span><br><span class=\"line\">/boot Linux</span><br><span class=\"line\">/dev devDevice()LinuxLinux</span><br><span class=\"line\">/etc </span><br><span class=\"line\">/home Linux</span><br><span class=\"line\">/<span class=\"class\"><span class=\"keyword\">lib</span> <span class=\"title\">Windows</span><span class=\"title\">DLL</span></span></span><br><span class=\"line\">/lost+found ext</span><br><span class=\"line\">/media LinuxULinux</span><br><span class=\"line\">/mnt /mnt/</span><br><span class=\"line\">/opt ORACLE</span><br><span class=\"line\">/proc </span><br><span class=\"line\">/root </span><br><span class=\"line\">/sbin </span><br><span class=\"line\">/selinux Redhat/CentOSSelinuxwindowsselinux</span><br><span class=\"line\">/srv </span><br><span class=\"line\">/sys linux2.<span class=\"number\">6</span><span class=\"number\">2.6</span> sysfs sysfs<span class=\"number\">3</span>procdevfsdevpts</span><br><span class=\"line\">/tmp </span><br><span class=\"line\">/usr windowsprogram files</span><br><span class=\"line\">/usr/bin </span><br><span class=\"line\">/usr/sbin </span><br><span class=\"line\">/usr/src </span><br><span class=\"line\">/var </span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight crystal\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]<span class=\"comment\"># ls /</span></span><br><span class=\"line\">bin  dev    home    lost+found mnt    proc     sbin srv     tmp    var</span><br><span class=\"line\">boot     etc <span class=\"class\"><span class=\"keyword\">lib</span> <span class=\"title\">media</span> <span class=\"title\">opt</span>    <span class=\"title\">root</span> <span class=\"title\">selinux</span> <span class=\"title\">sys</span>    <span class=\"title\">usr</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">/bin binBinary</span><br><span class=\"line\">/boot Linux</span><br><span class=\"line\">/dev devDevice()LinuxLinux</span><br><span class=\"line\">/etc </span><br><span class=\"line\">/home Linux</span><br><span class=\"line\">/<span class=\"class\"><span class=\"keyword\">lib</span> <span class=\"title\">Windows</span><span class=\"title\">DLL</span></span></span><br><span class=\"line\">/lost+found ext</span><br><span class=\"line\">/media LinuxULinux</span><br><span class=\"line\">/mnt /mnt/</span><br><span class=\"line\">/opt ORACLE</span><br><span class=\"line\">/proc </span><br><span class=\"line\">/root </span><br><span class=\"line\">/sbin </span><br><span class=\"line\">/selinux Redhat/CentOSSelinuxwindowsselinux</span><br><span class=\"line\">/srv </span><br><span class=\"line\">/sys linux2.<span class=\"number\">6</span><span class=\"number\">2.6</span> sysfs sysfs<span class=\"number\">3</span>procdevfsdevpts</span><br><span class=\"line\">/tmp </span><br><span class=\"line\">/usr windowsprogram files</span><br><span class=\"line\">/usr/bin </span><br><span class=\"line\">/usr/sbin </span><br><span class=\"line\">/usr/src </span><br><span class=\"line\">/var </span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"Linux","published":1,"author":"xiemx","comments":1,"date":"2015-11-04T23:11:13.000Z","_content":"### \nlinux\n* `/etc/passwd`\n* `/etc/shadow`\n* `/etc/group`\n* `/etc/gshadow`\n\n\n#### /etc/passwd7\n* **::ID:ID:::shell**\n\n```shell\n[mingxu.xie@cn-aux-cc ~]$ cat /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\n```\n#### /etc/shadowpasswd9\n* **::::::::**\n```shell\n[mingxu.xie@cn-aux-cc ~]$ sudo cat /etc/shadow\nroot:*LOCK*:14600::::::\nbin:*:16323:0:99999:7:::\ndaemon:*:16323:0:99999:7:::\nadm:*:16323:0:99999:7:::\nlp:*:16323:0:99999:7:::\ntest:$6$getqHfvX$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx:18185:0:99999:7:::\n```\n\n#### /etc/group34\n\n* **::ID:**\n```shell\n[mingxu.xie@cn-aux-cc ~]$ sudo cat /etc/group\nroot:x:0:\nbin:x:1:bin,daemon\ndaemon:x:2:bin,daemon\nsys:x:3:bin,adm\nadm:x:4:adm,daemon\ntty:x:5:\ndisk:x:6:\nlp:x:7:daemon\nmem:x:8:\nkmem:x:9:\nwheel:x:10:ec2-user,test\n```\n\n#### /etc/gshadowgroup4\n\n* **:::**\n```shell\n[mingxu.xie@cn-aux-cc ~]$ sudo cat /etc/gshadow\nroot:::\nbin:::bin,daemon\ndaemon:::bin,daemon\nsys:::bin,adm\nadm:::adm,daemon\n```\n**/sbin/nologinshell**\n\n### \n```shell\n1\n  useradd   \n\n   \n  -c comment \n  -d  -m \n  -g  \n  -G  \n  -s Shell \n  -u -o\n\nuseradd -G bin -g root -s /sbin/noloing -u 101 testuser\n\n2\n  groupadd   \n   \n  -g ID\n\ngroupadd -g 40000 testgrp\n\n3\n  groupmod \n  usermod \n  \n\n4\n  userdel testuser  testuser\n  userdel-r testuser \n  groupdeltestgrp \n\n5\n\n[mingxu.xie@cn-aux-cc ~]$ chage --help\nUsage: chage [options] [LOGIN]\n\nOptions:\n  -d, --lastday LAST_DAY        set date of last password change to LAST_DAY\n  -E, --expiredate EXPIRE_DATE  set account expiration date to EXPIRE_DATE\n  -h, --help                    display this help message and exit\n  -I, --inactive INACTIVE       set password inactive after expiration\n                                to INACTIVE\n  -l, --list                    show account aging information\n  -m, --mindays MIN_DAYS        set minimum number of days before password\n                                change to MIN_DAYS\n  -M, --maxdays MAX_DAYS        set maximim number of days before password\n                                change to MAX_DAYS\n  -W, --warndays WARN_DAYS      set expiration warning days to WARN_DAYS\n/etc/login.defs /etc/default/useradd\n\n```","source":"_posts/linux-user-and-group.md","raw":"---\nlayout: post\ntitle: Linux\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-11-05 07:11:13\ntags: [ linux, commands]\ncategories:\n    - linux\n---\n### \nlinux\n* `/etc/passwd`\n* `/etc/shadow`\n* `/etc/group`\n* `/etc/gshadow`\n\n\n#### /etc/passwd7\n* **::ID:ID:::shell**\n\n```shell\n[mingxu.xie@cn-aux-cc ~]$ cat /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\n```\n#### /etc/shadowpasswd9\n* **::::::::**\n```shell\n[mingxu.xie@cn-aux-cc ~]$ sudo cat /etc/shadow\nroot:*LOCK*:14600::::::\nbin:*:16323:0:99999:7:::\ndaemon:*:16323:0:99999:7:::\nadm:*:16323:0:99999:7:::\nlp:*:16323:0:99999:7:::\ntest:$6$getqHfvX$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx:18185:0:99999:7:::\n```\n\n#### /etc/group34\n\n* **::ID:**\n```shell\n[mingxu.xie@cn-aux-cc ~]$ sudo cat /etc/group\nroot:x:0:\nbin:x:1:bin,daemon\ndaemon:x:2:bin,daemon\nsys:x:3:bin,adm\nadm:x:4:adm,daemon\ntty:x:5:\ndisk:x:6:\nlp:x:7:daemon\nmem:x:8:\nkmem:x:9:\nwheel:x:10:ec2-user,test\n```\n\n#### /etc/gshadowgroup4\n\n* **:::**\n```shell\n[mingxu.xie@cn-aux-cc ~]$ sudo cat /etc/gshadow\nroot:::\nbin:::bin,daemon\ndaemon:::bin,daemon\nsys:::bin,adm\nadm:::adm,daemon\n```\n**/sbin/nologinshell**\n\n### \n```shell\n1\n  useradd   \n\n   \n  -c comment \n  -d  -m \n  -g  \n  -G  \n  -s Shell \n  -u -o\n\nuseradd -G bin -g root -s /sbin/noloing -u 101 testuser\n\n2\n  groupadd   \n   \n  -g ID\n\ngroupadd -g 40000 testgrp\n\n3\n  groupmod \n  usermod \n  \n\n4\n  userdel testuser  testuser\n  userdel-r testuser \n  groupdeltestgrp \n\n5\n\n[mingxu.xie@cn-aux-cc ~]$ chage --help\nUsage: chage [options] [LOGIN]\n\nOptions:\n  -d, --lastday LAST_DAY        set date of last password change to LAST_DAY\n  -E, --expiredate EXPIRE_DATE  set account expiration date to EXPIRE_DATE\n  -h, --help                    display this help message and exit\n  -I, --inactive INACTIVE       set password inactive after expiration\n                                to INACTIVE\n  -l, --list                    show account aging information\n  -m, --mindays MIN_DAYS        set minimum number of days before password\n                                change to MIN_DAYS\n  -M, --maxdays MAX_DAYS        set maximim number of days before password\n                                change to MAX_DAYS\n  -W, --warndays WARN_DAYS      set expiration warning days to WARN_DAYS\n/etc/login.defs /etc/default/useradd\n\n```","slug":"linux-user-and-group","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyidr003tu9ur1ps5pf9f","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>linux</p>\n<ul>\n<li><code>/etc/passwd</code></li>\n<li><code>/etc/shadow</code></li>\n<li><code>/etc/group</code></li>\n<li><code>/etc/gshadow</code></li>\n</ul>\n<h4 id=\"etc-passwd7\"><a href=\"#etc-passwd7\" class=\"headerlink\" title=\"/etc/passwd7\"></a>/etc/passwd7</h4><ul>\n<li><strong>::ID:ID:::shell</strong></li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mingxu.xie@cn-aux-cc ~]$ cat /etc/passwd</span><br><span class=\"line\">root:x:0:0:root:/root:/bin/bash</span><br><span class=\"line\">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class=\"line\">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class=\"line\">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class=\"line\">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"etc-shadowpasswd9\"><a href=\"#etc-shadowpasswd9\" class=\"headerlink\" title=\"/etc/shadowpasswd9\"></a>/etc/shadowpasswd9</h4><ul>\n<li><strong>::::::::</strong><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mingxu.xie@cn-aux-cc ~]$ sudo cat /etc/shadow</span><br><span class=\"line\">root:*LOCK*:14600::::::</span><br><span class=\"line\">bin:*:16323:0:99999:7:::</span><br><span class=\"line\">daemon:*:16323:0:99999:7:::</span><br><span class=\"line\">adm:*:16323:0:99999:7:::</span><br><span class=\"line\">lp:*:16323:0:99999:7:::</span><br><span class=\"line\">test:$6$getqHfvX$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx:18185:0:99999:7:::</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h4 id=\"etc-group34\"><a href=\"#etc-group34\" class=\"headerlink\" title=\"/etc/group34\"></a>/etc/group34</h4><ul>\n<li><strong>::ID:</strong><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mingxu.xie@cn-aux-cc ~]$ sudo cat /etc/group</span><br><span class=\"line\">root:x:0:</span><br><span class=\"line\">bin:x:1:bin,daemon</span><br><span class=\"line\">daemon:x:2:bin,daemon</span><br><span class=\"line\">sys:x:3:bin,adm</span><br><span class=\"line\">adm:x:4:adm,daemon</span><br><span class=\"line\">tty:x:5:</span><br><span class=\"line\">disk:x:6:</span><br><span class=\"line\">lp:x:7:daemon</span><br><span class=\"line\">mem:x:8:</span><br><span class=\"line\">kmem:x:9:</span><br><span class=\"line\">wheel:x:10:ec2-user,test</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h4 id=\"etc-gshadowgroup4\"><a href=\"#etc-gshadowgroup4\" class=\"headerlink\" title=\"/etc/gshadowgroup4\"></a>/etc/gshadowgroup4</h4><ul>\n<li><strong>:::</strong><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mingxu.xie@cn-aux-cc ~]$ sudo cat /etc/gshadow</span><br><span class=\"line\">root:::</span><br><span class=\"line\">bin:::bin,daemon</span><br><span class=\"line\">daemon:::bin,daemon</span><br><span class=\"line\">sys:::bin,adm</span><br><span class=\"line\">adm:::adm,daemon</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p><strong>/sbin/nologinshell</strong></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1</span><br><span class=\"line\">  useradd   </span><br><span class=\"line\"></span><br><span class=\"line\">   </span><br><span class=\"line\">  -c comment </span><br><span class=\"line\">  -d  -m </span><br><span class=\"line\">  -g  </span><br><span class=\"line\">  -G  </span><br><span class=\"line\">  -s Shell </span><br><span class=\"line\">  -u -o</span><br><span class=\"line\"></span><br><span class=\"line\">useradd -G bin -g root -s /sbin/noloing -u 101 testuser</span><br><span class=\"line\"></span><br><span class=\"line\">2</span><br><span class=\"line\">  groupadd   </span><br><span class=\"line\">   </span><br><span class=\"line\">  -g ID</span><br><span class=\"line\"></span><br><span class=\"line\">groupadd -g 40000 testgrp</span><br><span class=\"line\"></span><br><span class=\"line\">3</span><br><span class=\"line\">  groupmod </span><br><span class=\"line\">  usermod </span><br><span class=\"line\">  </span><br><span class=\"line\"></span><br><span class=\"line\">4</span><br><span class=\"line\">  userdel testuser  testuser</span><br><span class=\"line\">  userdel-r testuser </span><br><span class=\"line\">  groupdeltestgrp </span><br><span class=\"line\"></span><br><span class=\"line\">5</span><br><span class=\"line\"></span><br><span class=\"line\">[mingxu.xie@cn-aux-cc ~]$ chage --help</span><br><span class=\"line\">Usage: chage [options] [LOGIN]</span><br><span class=\"line\"></span><br><span class=\"line\">Options:</span><br><span class=\"line\">  -d, --lastday LAST_DAY        set date of last password change to LAST_DAY</span><br><span class=\"line\">  -E, --expiredate EXPIRE_DATE  set account expiration date to EXPIRE_DATE</span><br><span class=\"line\">  -h, --help                    display this help message and exit</span><br><span class=\"line\">  -I, --inactive INACTIVE       set password inactive after expiration</span><br><span class=\"line\">                                to INACTIVE</span><br><span class=\"line\">  -l, --list                    show account aging information</span><br><span class=\"line\">  -m, --mindays MIN_DAYS        set minimum number of days before password</span><br><span class=\"line\">                                change to MIN_DAYS</span><br><span class=\"line\">  -M, --maxdays MAX_DAYS        set maximim number of days before password</span><br><span class=\"line\">                                change to MAX_DAYS</span><br><span class=\"line\">  -W, --warndays WARN_DAYS      set expiration warning days to WARN_DAYS</span><br><span class=\"line\">/etc/login.defs /etc/default/useradd</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>linux</p>\n<ul>\n<li><code>/etc/passwd</code></li>\n<li><code>/etc/shadow</code></li>\n<li><code>/etc/group</code></li>\n<li><code>/etc/gshadow</code></li>\n</ul>\n<h4 id=\"etc-passwd7\"><a href=\"#etc-passwd7\" class=\"headerlink\" title=\"/etc/passwd7\"></a>/etc/passwd7</h4><ul>\n<li><strong>::ID:ID:::shell</strong></li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mingxu.xie@cn-aux-cc ~]$ cat /etc/passwd</span><br><span class=\"line\">root:x:0:0:root:/root:/bin/bash</span><br><span class=\"line\">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class=\"line\">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class=\"line\">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class=\"line\">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"etc-shadowpasswd9\"><a href=\"#etc-shadowpasswd9\" class=\"headerlink\" title=\"/etc/shadowpasswd9\"></a>/etc/shadowpasswd9</h4><ul>\n<li><strong>::::::::</strong><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mingxu.xie@cn-aux-cc ~]$ sudo cat /etc/shadow</span><br><span class=\"line\">root:*LOCK*:14600::::::</span><br><span class=\"line\">bin:*:16323:0:99999:7:::</span><br><span class=\"line\">daemon:*:16323:0:99999:7:::</span><br><span class=\"line\">adm:*:16323:0:99999:7:::</span><br><span class=\"line\">lp:*:16323:0:99999:7:::</span><br><span class=\"line\">test:$6$getqHfvX$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx:18185:0:99999:7:::</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h4 id=\"etc-group34\"><a href=\"#etc-group34\" class=\"headerlink\" title=\"/etc/group34\"></a>/etc/group34</h4><ul>\n<li><strong>::ID:</strong><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mingxu.xie@cn-aux-cc ~]$ sudo cat /etc/group</span><br><span class=\"line\">root:x:0:</span><br><span class=\"line\">bin:x:1:bin,daemon</span><br><span class=\"line\">daemon:x:2:bin,daemon</span><br><span class=\"line\">sys:x:3:bin,adm</span><br><span class=\"line\">adm:x:4:adm,daemon</span><br><span class=\"line\">tty:x:5:</span><br><span class=\"line\">disk:x:6:</span><br><span class=\"line\">lp:x:7:daemon</span><br><span class=\"line\">mem:x:8:</span><br><span class=\"line\">kmem:x:9:</span><br><span class=\"line\">wheel:x:10:ec2-user,test</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h4 id=\"etc-gshadowgroup4\"><a href=\"#etc-gshadowgroup4\" class=\"headerlink\" title=\"/etc/gshadowgroup4\"></a>/etc/gshadowgroup4</h4><ul>\n<li><strong>:::</strong><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mingxu.xie@cn-aux-cc ~]$ sudo cat /etc/gshadow</span><br><span class=\"line\">root:::</span><br><span class=\"line\">bin:::bin,daemon</span><br><span class=\"line\">daemon:::bin,daemon</span><br><span class=\"line\">sys:::bin,adm</span><br><span class=\"line\">adm:::adm,daemon</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p><strong>/sbin/nologinshell</strong></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1</span><br><span class=\"line\">  useradd   </span><br><span class=\"line\"></span><br><span class=\"line\">   </span><br><span class=\"line\">  -c comment </span><br><span class=\"line\">  -d  -m </span><br><span class=\"line\">  -g  </span><br><span class=\"line\">  -G  </span><br><span class=\"line\">  -s Shell </span><br><span class=\"line\">  -u -o</span><br><span class=\"line\"></span><br><span class=\"line\">useradd -G bin -g root -s /sbin/noloing -u 101 testuser</span><br><span class=\"line\"></span><br><span class=\"line\">2</span><br><span class=\"line\">  groupadd   </span><br><span class=\"line\">   </span><br><span class=\"line\">  -g ID</span><br><span class=\"line\"></span><br><span class=\"line\">groupadd -g 40000 testgrp</span><br><span class=\"line\"></span><br><span class=\"line\">3</span><br><span class=\"line\">  groupmod </span><br><span class=\"line\">  usermod </span><br><span class=\"line\">  </span><br><span class=\"line\"></span><br><span class=\"line\">4</span><br><span class=\"line\">  userdel testuser  testuser</span><br><span class=\"line\">  userdel-r testuser </span><br><span class=\"line\">  groupdeltestgrp </span><br><span class=\"line\"></span><br><span class=\"line\">5</span><br><span class=\"line\"></span><br><span class=\"line\">[mingxu.xie@cn-aux-cc ~]$ chage --help</span><br><span class=\"line\">Usage: chage [options] [LOGIN]</span><br><span class=\"line\"></span><br><span class=\"line\">Options:</span><br><span class=\"line\">  -d, --lastday LAST_DAY        set date of last password change to LAST_DAY</span><br><span class=\"line\">  -E, --expiredate EXPIRE_DATE  set account expiration date to EXPIRE_DATE</span><br><span class=\"line\">  -h, --help                    display this help message and exit</span><br><span class=\"line\">  -I, --inactive INACTIVE       set password inactive after expiration</span><br><span class=\"line\">                                to INACTIVE</span><br><span class=\"line\">  -l, --list                    show account aging information</span><br><span class=\"line\">  -m, --mindays MIN_DAYS        set minimum number of days before password</span><br><span class=\"line\">                                change to MIN_DAYS</span><br><span class=\"line\">  -M, --maxdays MAX_DAYS        set maximim number of days before password</span><br><span class=\"line\">                                change to MAX_DAYS</span><br><span class=\"line\">  -W, --warndays WARN_DAYS      set expiration warning days to WARN_DAYS</span><br><span class=\"line\">/etc/login.defs /etc/default/useradd</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"Linuxyum","published":1,"author":"xiemx","comments":1,"date":"2015-11-08T23:11:22.000Z","_content":"RhelrpmrpmLinuxyumyumyumyumrpmyumyum/etc/yum.repos.d/xxxxxxx.repo\n\n\n```\n[base]\nname=CentOS-$releasever - Base - mirrors.aliyun.com\nbaseurl=http://mirrors.aliyun.com/centos/$releasever/os/$basearch/\nenabled=1\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-6\n```\nyum\n\n\n\n[ ]\nname\nbaseurl \nenabled 10\ngpgcheck GPGREDHAT\ngpgkey gpgkeygpgcheck=1\n\nbaseurlbaseurl\n```\n[xiemx] \nname=xiemx \nbaseurl=file:///yumdatebase \nenabled=1 \ngpgcheck=0\n```\nyum clear all yum makecachebaseurl/yumdatebasegpgcheckftp://xxxxxxxxx\n\n\n","source":"_posts/linux-yum-repo.md","raw":"---\nlayout: post\ntitle: Linuxyum\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-11-09 07:11:22\ntags: [ linux, yum]\ncategories:\n    - linux\n---\nRhelrpmrpmLinuxyumyumyumyumrpmyumyum/etc/yum.repos.d/xxxxxxx.repo\n\n\n```\n[base]\nname=CentOS-$releasever - Base - mirrors.aliyun.com\nbaseurl=http://mirrors.aliyun.com/centos/$releasever/os/$basearch/\nenabled=1\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-6\n```\nyum\n\n\n\n[ ]\nname\nbaseurl \nenabled 10\ngpgcheck GPGREDHAT\ngpgkey gpgkeygpgcheck=1\n\nbaseurlbaseurl\n```\n[xiemx] \nname=xiemx \nbaseurl=file:///yumdatebase \nenabled=1 \ngpgcheck=0\n```\nyum clear all yum makecachebaseurl/yumdatebasegpgcheckftp://xxxxxxxxx\n\n\n","slug":"linux-yum-repo","updated":"2019-10-21T06:57:43.060Z","photos":[],"link":"","_id":"ck42dyidu003xu9urmzmktedr","content":"<p>RhelrpmrpmLinuxyumyumyumyumrpmyumyum/etc/yum.repos.d/xxxxxxx.repo</p>\n<p></p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[base]</span></span><br><span class=\"line\"><span class=\"attr\">name</span>=CentOS-<span class=\"variable\">$releasever</span> - Base - mirrors.aliyun.com</span><br><span class=\"line\"><span class=\"attr\">baseurl</span>=http://mirrors.aliyun.com/centos/<span class=\"variable\">$releasever</span>/os/<span class=\"variable\">$basearch</span>/</span><br><span class=\"line\"><span class=\"attr\">enabled</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">gpgcheck</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">gpgkey</span>=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-<span class=\"number\">6</span></span><br></pre></td></tr></table></figure>\n\n<p>yum</p>\n<p><br>[ ]<br>name<br>baseurl <br>enabled 10<br>gpgcheck GPGREDHAT<br>gpgkey gpgkeygpgcheck=1</p>\n<p>baseurlbaseurl</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[xiemx]</span> </span><br><span class=\"line\"><span class=\"attr\">name</span>=xiemx </span><br><span class=\"line\"><span class=\"attr\">baseurl</span>=file:///yumdatebase </span><br><span class=\"line\"><span class=\"attr\">enabled</span>=<span class=\"number\">1</span> </span><br><span class=\"line\"><span class=\"attr\">gpgcheck</span>=<span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n\n<p>yum clear all yum  makecachebaseurl/yumdatebasegpgcheck<a href=\"ftp://xxxxxxxxx\" target=\"_blank\" rel=\"noopener\">ftp://xxxxxxxxx</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>RhelrpmrpmLinuxyumyumyumyumrpmyumyum/etc/yum.repos.d/xxxxxxx.repo</p>\n<p></p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[base]</span></span><br><span class=\"line\"><span class=\"attr\">name</span>=CentOS-<span class=\"variable\">$releasever</span> - Base - mirrors.aliyun.com</span><br><span class=\"line\"><span class=\"attr\">baseurl</span>=http://mirrors.aliyun.com/centos/<span class=\"variable\">$releasever</span>/os/<span class=\"variable\">$basearch</span>/</span><br><span class=\"line\"><span class=\"attr\">enabled</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">gpgcheck</span>=<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">gpgkey</span>=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-<span class=\"number\">6</span></span><br></pre></td></tr></table></figure>\n\n<p>yum</p>\n<p><br>[ ]<br>name<br>baseurl <br>enabled 10<br>gpgcheck GPGREDHAT<br>gpgkey gpgkeygpgcheck=1</p>\n<p>baseurlbaseurl</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[xiemx]</span> </span><br><span class=\"line\"><span class=\"attr\">name</span>=xiemx </span><br><span class=\"line\"><span class=\"attr\">baseurl</span>=file:///yumdatebase </span><br><span class=\"line\"><span class=\"attr\">enabled</span>=<span class=\"number\">1</span> </span><br><span class=\"line\"><span class=\"attr\">gpgcheck</span>=<span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n\n<p>yum clear all yum  makecachebaseurl/yumdatebasegpgcheck<a href=\"ftp://xxxxxxxxx\" target=\"_blank\" rel=\"noopener\">ftp://xxxxxxxxx</a></p>\n"},{"layout":"post","title":"LVS-DR","published":1,"author":"xiemx","comments":1,"date":"2016-02-17T20:02:11.000Z","_content":"\n```shell\n#!/bin/bash\nVIP=$1\nIPTABLES=/sbin/iptables\n$IPTABLES-tmangle-APREROUTING-ptcp-d$VIP--dport80-jMARK--set-mark100\n$IPTABLES-tmangle-APREROUTING-ptcp-d$VIP--dport443-jMARK--set-mark100\n```\nARP\n```shell\n#!/bin/bash\nVIP=192.168.0.100\nRIP=192.168.0.x\nDGW=172.25.0.254\nDGWMAC=52:54:00:00:00:fe\narptables-F\narptables-AIN-d$VIP-jDROP\narptables-AOUT-s$VIP-jmangle--mangle-ip-s$RIP\n/sbin/ifconfigeth0:1$VIPbroadcast$VIPnetmask255.255.255.0up\narp-s$DGW$DGWMAC\n/sbin/routeadddefaultgw$DGW\n```\n\n```shell\n#!/bin/bash\n/usr/bin/links-dump1$1>/dev/null2>&1\nif[0-eq$?];then\nechook\nelse\nechofail\nfi\n```\n\n```conf\n[root@lvs-f30~]#cat/etc/sysconfig/ha/lvs.cf\nserial_no=25\nprimary=172.25.30.14\nprimary_private=192.168.122.246\nservice=lvs\nbackup_active=1\nbackup=172.25.30.15\nbackup_private=192.168.122.247\nheartbeat=1\nheartbeat_port=539\nkeepalive=6\ndeadtime=18\nnetwork=direct\ndebug_level=NONE\nmonitor_links=0\nsyncdaemon=0\nsyncd_iface=eth0\n\nvirtualhttp{\nactive=1\naddress=172.25.30.100eth0:1\nvip_nmask=255.255.255.0\nfwmark=100\nport=80\nsend=\"GET/HTTP/1.0\\r\\n\\r\\n\"\nexpect=\"ok\"\nuse_regex=0\nsend_program=\"/bin/testlink%h\"\nload_monitor=none\nscheduler=wlc\nprotocol=tcp\ntimeout=6\nreentry=15\nquiesce_server=0\n\nservernode1{\naddress=192.168.122.224\nactive=1\nport=80\nweight=1\n}\n\nservernode2{\naddress=192.168.122.245\nactive=1\nport=80\nweight=1\n}\n}\n\nvirtualhttps{\nactive=1\naddress=172.25.30.100eth0:1\nvip_nmask=255.255.255.0\nfwmark=100\nport=443\nsend=\"GET/HTTP/1.0\\r\\n\\r\\n\"\nexpect=\"HTTP\"\nuse_regex=0\nload_monitor=none\nscheduler=wlc\nprotocol=tcp\ntimeout=6\nreentry=15\nquiesce_server=0\n\nservernode1{\naddress=192.168.122.224\nactive=1\nport=443\nweight=1\n }\n\nservernode2{\naddress=192.168.122.245\nactive=1\nport=443\nweight=1\n}\n}\n```","source":"_posts/lvs-dr.md","raw":"---\nlayout: post\ntitle: LVS-DR\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-02-18 04:02:11\ntags: [ lvs, cluster ]\ncategories:\n    - lvs\n---\n\n```shell\n#!/bin/bash\nVIP=$1\nIPTABLES=/sbin/iptables\n$IPTABLES-tmangle-APREROUTING-ptcp-d$VIP--dport80-jMARK--set-mark100\n$IPTABLES-tmangle-APREROUTING-ptcp-d$VIP--dport443-jMARK--set-mark100\n```\nARP\n```shell\n#!/bin/bash\nVIP=192.168.0.100\nRIP=192.168.0.x\nDGW=172.25.0.254\nDGWMAC=52:54:00:00:00:fe\narptables-F\narptables-AIN-d$VIP-jDROP\narptables-AOUT-s$VIP-jmangle--mangle-ip-s$RIP\n/sbin/ifconfigeth0:1$VIPbroadcast$VIPnetmask255.255.255.0up\narp-s$DGW$DGWMAC\n/sbin/routeadddefaultgw$DGW\n```\n\n```shell\n#!/bin/bash\n/usr/bin/links-dump1$1>/dev/null2>&1\nif[0-eq$?];then\nechook\nelse\nechofail\nfi\n```\n\n```conf\n[root@lvs-f30~]#cat/etc/sysconfig/ha/lvs.cf\nserial_no=25\nprimary=172.25.30.14\nprimary_private=192.168.122.246\nservice=lvs\nbackup_active=1\nbackup=172.25.30.15\nbackup_private=192.168.122.247\nheartbeat=1\nheartbeat_port=539\nkeepalive=6\ndeadtime=18\nnetwork=direct\ndebug_level=NONE\nmonitor_links=0\nsyncdaemon=0\nsyncd_iface=eth0\n\nvirtualhttp{\nactive=1\naddress=172.25.30.100eth0:1\nvip_nmask=255.255.255.0\nfwmark=100\nport=80\nsend=\"GET/HTTP/1.0\\r\\n\\r\\n\"\nexpect=\"ok\"\nuse_regex=0\nsend_program=\"/bin/testlink%h\"\nload_monitor=none\nscheduler=wlc\nprotocol=tcp\ntimeout=6\nreentry=15\nquiesce_server=0\n\nservernode1{\naddress=192.168.122.224\nactive=1\nport=80\nweight=1\n}\n\nservernode2{\naddress=192.168.122.245\nactive=1\nport=80\nweight=1\n}\n}\n\nvirtualhttps{\nactive=1\naddress=172.25.30.100eth0:1\nvip_nmask=255.255.255.0\nfwmark=100\nport=443\nsend=\"GET/HTTP/1.0\\r\\n\\r\\n\"\nexpect=\"HTTP\"\nuse_regex=0\nload_monitor=none\nscheduler=wlc\nprotocol=tcp\ntimeout=6\nreentry=15\nquiesce_server=0\n\nservernode1{\naddress=192.168.122.224\nactive=1\nport=443\nweight=1\n }\n\nservernode2{\naddress=192.168.122.245\nactive=1\nport=443\nweight=1\n}\n}\n```","slug":"lvs-dr","updated":"2019-10-21T06:57:43.047Z","photos":[],"link":"","_id":"ck42dyidv0041u9urxy1z098x","content":"<p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">VIP=$1</span><br><span class=\"line\">IPTABLES=/sbin/iptables</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">IPTABLES-tmangle-APREROUTING-ptcp-d<span class=\"variable\">$VIP</span>--dport80-jMARK--<span class=\"built_in\">set</span>-mark100</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">IPTABLES-tmangle-APREROUTING-ptcp-d<span class=\"variable\">$VIP</span>--dport443-jMARK--<span class=\"built_in\">set</span>-mark100</span></span><br></pre></td></tr></table></figure>\n\n<p>ARP</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">VIP=192.168.0.100</span><br><span class=\"line\">RIP=192.168.0.x</span><br><span class=\"line\">DGW=172.25.0.254</span><br><span class=\"line\">DGWMAC=52:54:00:00:00:fe</span><br><span class=\"line\">arptables-F</span><br><span class=\"line\">arptables-AIN-d$VIP-jDROP</span><br><span class=\"line\">arptables-AOUT-s$VIP-jmangle--mangle-ip-s$RIP</span><br><span class=\"line\">/sbin/ifconfigeth0:1$VIPbroadcast$VIPnetmask255.255.255.0up</span><br><span class=\"line\">arp-s$DGW$DGWMAC</span><br><span class=\"line\">/sbin/routeadddefaultgw$DGW</span><br></pre></td></tr></table></figure>\n\n<p> </p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">/usr/bin/links-dump1$1&gt;/dev/null2&gt;&amp;1</span><br><span class=\"line\">if[0-eq$?];then</span><br><span class=\"line\">echook</span><br><span class=\"line\">else</span><br><span class=\"line\">echofail</span><br><span class=\"line\">fi</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@lvs-f30~]#cat/etc/sysconfig/ha/lvs.cf</span><br><span class=\"line\">serial_no=25</span><br><span class=\"line\">primary=172.25.30.14</span><br><span class=\"line\">primary_private=192.168.122.246</span><br><span class=\"line\">service=lvs</span><br><span class=\"line\">backup_active=1</span><br><span class=\"line\">backup=172.25.30.15</span><br><span class=\"line\">backup_private=192.168.122.247</span><br><span class=\"line\">heartbeat=1</span><br><span class=\"line\">heartbeat_port=539</span><br><span class=\"line\">keepalive=6</span><br><span class=\"line\">deadtime=18</span><br><span class=\"line\">network=direct</span><br><span class=\"line\">debug_level=NONE</span><br><span class=\"line\">monitor_links=0</span><br><span class=\"line\">syncdaemon=0</span><br><span class=\"line\">syncd_iface=eth0</span><br><span class=\"line\"></span><br><span class=\"line\">virtualhttp&#123;</span><br><span class=\"line\">active=1</span><br><span class=\"line\">address=172.25.30.100eth0:1</span><br><span class=\"line\">vip_nmask=255.255.255.0</span><br><span class=\"line\">fwmark=100</span><br><span class=\"line\">port=80</span><br><span class=\"line\">send=&quot;GET/HTTP/1.0\\r\\n\\r\\n&quot;</span><br><span class=\"line\">expect=&quot;ok&quot;</span><br><span class=\"line\">use_regex=0</span><br><span class=\"line\">send_program=&quot;/bin/testlink%h&quot;</span><br><span class=\"line\">load_monitor=none</span><br><span class=\"line\">scheduler=wlc</span><br><span class=\"line\">protocol=tcp</span><br><span class=\"line\">timeout=6</span><br><span class=\"line\">reentry=15</span><br><span class=\"line\">quiesce_server=0</span><br><span class=\"line\"></span><br><span class=\"line\">servernode1&#123;</span><br><span class=\"line\">address=192.168.122.224</span><br><span class=\"line\">active=1</span><br><span class=\"line\">port=80</span><br><span class=\"line\">weight=1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">servernode2&#123;</span><br><span class=\"line\">address=192.168.122.245</span><br><span class=\"line\">active=1</span><br><span class=\"line\">port=80</span><br><span class=\"line\">weight=1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">virtualhttps&#123;</span><br><span class=\"line\">active=1</span><br><span class=\"line\">address=172.25.30.100eth0:1</span><br><span class=\"line\">vip_nmask=255.255.255.0</span><br><span class=\"line\">fwmark=100</span><br><span class=\"line\">port=443</span><br><span class=\"line\">send=&quot;GET/HTTP/1.0\\r\\n\\r\\n&quot;</span><br><span class=\"line\">expect=&quot;HTTP&quot;</span><br><span class=\"line\">use_regex=0</span><br><span class=\"line\">load_monitor=none</span><br><span class=\"line\">scheduler=wlc</span><br><span class=\"line\">protocol=tcp</span><br><span class=\"line\">timeout=6</span><br><span class=\"line\">reentry=15</span><br><span class=\"line\">quiesce_server=0</span><br><span class=\"line\"></span><br><span class=\"line\">servernode1&#123;</span><br><span class=\"line\">address=192.168.122.224</span><br><span class=\"line\">active=1</span><br><span class=\"line\">port=443</span><br><span class=\"line\">weight=1</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">servernode2&#123;</span><br><span class=\"line\">address=192.168.122.245</span><br><span class=\"line\">active=1</span><br><span class=\"line\">port=443</span><br><span class=\"line\">weight=1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">VIP=$1</span><br><span class=\"line\">IPTABLES=/sbin/iptables</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">IPTABLES-tmangle-APREROUTING-ptcp-d<span class=\"variable\">$VIP</span>--dport80-jMARK--<span class=\"built_in\">set</span>-mark100</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">IPTABLES-tmangle-APREROUTING-ptcp-d<span class=\"variable\">$VIP</span>--dport443-jMARK--<span class=\"built_in\">set</span>-mark100</span></span><br></pre></td></tr></table></figure>\n\n<p>ARP</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">VIP=192.168.0.100</span><br><span class=\"line\">RIP=192.168.0.x</span><br><span class=\"line\">DGW=172.25.0.254</span><br><span class=\"line\">DGWMAC=52:54:00:00:00:fe</span><br><span class=\"line\">arptables-F</span><br><span class=\"line\">arptables-AIN-d$VIP-jDROP</span><br><span class=\"line\">arptables-AOUT-s$VIP-jmangle--mangle-ip-s$RIP</span><br><span class=\"line\">/sbin/ifconfigeth0:1$VIPbroadcast$VIPnetmask255.255.255.0up</span><br><span class=\"line\">arp-s$DGW$DGWMAC</span><br><span class=\"line\">/sbin/routeadddefaultgw$DGW</span><br></pre></td></tr></table></figure>\n\n<p> </p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">/usr/bin/links-dump1$1&gt;/dev/null2&gt;&amp;1</span><br><span class=\"line\">if[0-eq$?];then</span><br><span class=\"line\">echook</span><br><span class=\"line\">else</span><br><span class=\"line\">echofail</span><br><span class=\"line\">fi</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@lvs-f30~]#cat/etc/sysconfig/ha/lvs.cf</span><br><span class=\"line\">serial_no=25</span><br><span class=\"line\">primary=172.25.30.14</span><br><span class=\"line\">primary_private=192.168.122.246</span><br><span class=\"line\">service=lvs</span><br><span class=\"line\">backup_active=1</span><br><span class=\"line\">backup=172.25.30.15</span><br><span class=\"line\">backup_private=192.168.122.247</span><br><span class=\"line\">heartbeat=1</span><br><span class=\"line\">heartbeat_port=539</span><br><span class=\"line\">keepalive=6</span><br><span class=\"line\">deadtime=18</span><br><span class=\"line\">network=direct</span><br><span class=\"line\">debug_level=NONE</span><br><span class=\"line\">monitor_links=0</span><br><span class=\"line\">syncdaemon=0</span><br><span class=\"line\">syncd_iface=eth0</span><br><span class=\"line\"></span><br><span class=\"line\">virtualhttp&#123;</span><br><span class=\"line\">active=1</span><br><span class=\"line\">address=172.25.30.100eth0:1</span><br><span class=\"line\">vip_nmask=255.255.255.0</span><br><span class=\"line\">fwmark=100</span><br><span class=\"line\">port=80</span><br><span class=\"line\">send=&quot;GET/HTTP/1.0\\r\\n\\r\\n&quot;</span><br><span class=\"line\">expect=&quot;ok&quot;</span><br><span class=\"line\">use_regex=0</span><br><span class=\"line\">send_program=&quot;/bin/testlink%h&quot;</span><br><span class=\"line\">load_monitor=none</span><br><span class=\"line\">scheduler=wlc</span><br><span class=\"line\">protocol=tcp</span><br><span class=\"line\">timeout=6</span><br><span class=\"line\">reentry=15</span><br><span class=\"line\">quiesce_server=0</span><br><span class=\"line\"></span><br><span class=\"line\">servernode1&#123;</span><br><span class=\"line\">address=192.168.122.224</span><br><span class=\"line\">active=1</span><br><span class=\"line\">port=80</span><br><span class=\"line\">weight=1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">servernode2&#123;</span><br><span class=\"line\">address=192.168.122.245</span><br><span class=\"line\">active=1</span><br><span class=\"line\">port=80</span><br><span class=\"line\">weight=1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">virtualhttps&#123;</span><br><span class=\"line\">active=1</span><br><span class=\"line\">address=172.25.30.100eth0:1</span><br><span class=\"line\">vip_nmask=255.255.255.0</span><br><span class=\"line\">fwmark=100</span><br><span class=\"line\">port=443</span><br><span class=\"line\">send=&quot;GET/HTTP/1.0\\r\\n\\r\\n&quot;</span><br><span class=\"line\">expect=&quot;HTTP&quot;</span><br><span class=\"line\">use_regex=0</span><br><span class=\"line\">load_monitor=none</span><br><span class=\"line\">scheduler=wlc</span><br><span class=\"line\">protocol=tcp</span><br><span class=\"line\">timeout=6</span><br><span class=\"line\">reentry=15</span><br><span class=\"line\">quiesce_server=0</span><br><span class=\"line\"></span><br><span class=\"line\">servernode1&#123;</span><br><span class=\"line\">address=192.168.122.224</span><br><span class=\"line\">active=1</span><br><span class=\"line\">port=443</span><br><span class=\"line\">weight=1</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">servernode2&#123;</span><br><span class=\"line\">address=192.168.122.245</span><br><span class=\"line\">active=1</span><br><span class=\"line\">port=443</span><br><span class=\"line\">weight=1</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"LVS-NAT","published":1,"author":"xiemx","comments":1,"date":"2016-02-17T19:02:13.000Z","_content":"\nlvs\n\n```shell\n#\nyum groupinstall \"Load Balancer\"\n\n#\n/etc/init.d/piranha-gui start\n\n#piranha\npiranha-passwd\n\n#\n/etc/sysconfig/ha/lvs.cf\n\n#ip_vsip_vs*\n/etc/init.d/pulse start\n```\n```shell\n#/bin/testlink\n[root@lvs-f30 ~]# cat /bin/testlink\n#!/bin/bash\n/usr/bin/links -dump 1 $1 >/dev/null 2>&1\nif [ 0 -eq $? ] ; then\necho ok\nelse\necho fail\nfi\n```\n```conf\n[root@lvs-f30 ~]# cat /etc/sysconfig/ha/lvs.cf\nserial_no = 30\nprimary = 172.25.30.14\nprimary_private = 192.168.122.246\nservice = lvs\nbackup_active = 1\nbackup = 172.25.30.15\nbackup_private = 192.168.122.247\nheartbeat = 1\nheartbeat_port = 539\nkeepalive = 6\ndeadtime = 18\nnetwork = nat\nnat_router = 192.168.122.254 eth2\nnat_nmask = 255.255.255.255\ndebug_level = NONE\nmonitor_links = 0\nsyncdaemon = 0\nsyncd_iface = eth2\n\nvirtual http {\n\n    active = 1\n    address = 172.25.30.100 eth0:1\n    vip_nmask = 255.255.255.0\n    port = 80\n    send = \"GET / HTTP/1.0\\r\\n\\r\\n\"\n    expect = \"ok\"\n    use_regex = 0\n    send_program = \"/bin/testlink %h\"\n    load_monitor = none\n    scheduler = wlc\n    protocol = tcp\n    timeout = 6\n    reentry = 15\n    quiesce_server = 0\n\n    server node1 {\n\n        address = 192.168.122.224\n        active = 1\n        port = 80\n        weight = 1\n\n    }\n\n    server node2 {\n\n        address = 192.168.122.245\n        active = 1\n        port = 80\n        weight = 1\n\n    }\n\n}\n```\n[![lvsnat](/images/lvsnat.png)](lvsnat.png)","source":"_posts/lvs-nat-cluster.md","raw":"---\nlayout: post\ntitle: LVS-NAT\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-02-18 03:02:13\ntags: [ lvs, cluster ]\ncategories:\n    - lvs\n#permalink: '/2016/02/18/vs-nat-cluster'\n---\n\nlvs\n\n```shell\n#\nyum groupinstall \"Load Balancer\"\n\n#\n/etc/init.d/piranha-gui start\n\n#piranha\npiranha-passwd\n\n#\n/etc/sysconfig/ha/lvs.cf\n\n#ip_vsip_vs*\n/etc/init.d/pulse start\n```\n```shell\n#/bin/testlink\n[root@lvs-f30 ~]# cat /bin/testlink\n#!/bin/bash\n/usr/bin/links -dump 1 $1 >/dev/null 2>&1\nif [ 0 -eq $? ] ; then\necho ok\nelse\necho fail\nfi\n```\n```conf\n[root@lvs-f30 ~]# cat /etc/sysconfig/ha/lvs.cf\nserial_no = 30\nprimary = 172.25.30.14\nprimary_private = 192.168.122.246\nservice = lvs\nbackup_active = 1\nbackup = 172.25.30.15\nbackup_private = 192.168.122.247\nheartbeat = 1\nheartbeat_port = 539\nkeepalive = 6\ndeadtime = 18\nnetwork = nat\nnat_router = 192.168.122.254 eth2\nnat_nmask = 255.255.255.255\ndebug_level = NONE\nmonitor_links = 0\nsyncdaemon = 0\nsyncd_iface = eth2\n\nvirtual http {\n\n    active = 1\n    address = 172.25.30.100 eth0:1\n    vip_nmask = 255.255.255.0\n    port = 80\n    send = \"GET / HTTP/1.0\\r\\n\\r\\n\"\n    expect = \"ok\"\n    use_regex = 0\n    send_program = \"/bin/testlink %h\"\n    load_monitor = none\n    scheduler = wlc\n    protocol = tcp\n    timeout = 6\n    reentry = 15\n    quiesce_server = 0\n\n    server node1 {\n\n        address = 192.168.122.224\n        active = 1\n        port = 80\n        weight = 1\n\n    }\n\n    server node2 {\n\n        address = 192.168.122.245\n        active = 1\n        port = 80\n        weight = 1\n\n    }\n\n}\n```\n[![lvsnat](/images/lvsnat.png)](lvsnat.png)","slug":"lvs-nat-cluster","updated":"2019-10-21T06:57:42.819Z","photos":[],"link":"","_id":"ck42dyidw0045u9urcfwyebxy","content":"<p>lvs</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"></span></span><br><span class=\"line\">yum groupinstall \"Load Balancer\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"></span></span><br><span class=\"line\">/etc/init.d/piranha-gui start</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">piranha</span></span><br><span class=\"line\">piranha-passwd</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"></span></span><br><span class=\"line\">/etc/sysconfig/ha/lvs.cf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">ip_vsip_vs*</span></span><br><span class=\"line\">/etc/init.d/pulse start</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">/bin/testlink</span></span><br><span class=\"line\">[root@lvs-f30 ~]# cat /bin/testlink</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">/usr/bin/links -dump 1 $1 &gt;/dev/null 2&gt;&amp;1</span><br><span class=\"line\">if [ 0 -eq $? ] ; then</span><br><span class=\"line\">echo ok</span><br><span class=\"line\">else</span><br><span class=\"line\">echo fail</span><br><span class=\"line\">fi</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@lvs-f30 ~]# cat /etc/sysconfig/ha/lvs.cf</span><br><span class=\"line\">serial_no = 30</span><br><span class=\"line\">primary = 172.25.30.14</span><br><span class=\"line\">primary_private = 192.168.122.246</span><br><span class=\"line\">service = lvs</span><br><span class=\"line\">backup_active = 1</span><br><span class=\"line\">backup = 172.25.30.15</span><br><span class=\"line\">backup_private = 192.168.122.247</span><br><span class=\"line\">heartbeat = 1</span><br><span class=\"line\">heartbeat_port = 539</span><br><span class=\"line\">keepalive = 6</span><br><span class=\"line\">deadtime = 18</span><br><span class=\"line\">network = nat</span><br><span class=\"line\">nat_router = 192.168.122.254 eth2</span><br><span class=\"line\">nat_nmask = 255.255.255.255</span><br><span class=\"line\">debug_level = NONE</span><br><span class=\"line\">monitor_links = 0</span><br><span class=\"line\">syncdaemon = 0</span><br><span class=\"line\">syncd_iface = eth2</span><br><span class=\"line\"></span><br><span class=\"line\">virtual http &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    active = 1</span><br><span class=\"line\">    address = 172.25.30.100 eth0:1</span><br><span class=\"line\">    vip_nmask = 255.255.255.0</span><br><span class=\"line\">    port = 80</span><br><span class=\"line\">    send = &quot;GET / HTTP/1.0\\r\\n\\r\\n&quot;</span><br><span class=\"line\">    expect = &quot;ok&quot;</span><br><span class=\"line\">    use_regex = 0</span><br><span class=\"line\">    send_program = &quot;/bin/testlink %h&quot;</span><br><span class=\"line\">    load_monitor = none</span><br><span class=\"line\">    scheduler = wlc</span><br><span class=\"line\">    protocol = tcp</span><br><span class=\"line\">    timeout = 6</span><br><span class=\"line\">    reentry = 15</span><br><span class=\"line\">    quiesce_server = 0</span><br><span class=\"line\"></span><br><span class=\"line\">    server node1 &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        address = 192.168.122.224</span><br><span class=\"line\">        active = 1</span><br><span class=\"line\">        port = 80</span><br><span class=\"line\">        weight = 1</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    server node2 &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        address = 192.168.122.245</span><br><span class=\"line\">        active = 1</span><br><span class=\"line\">        port = 80</span><br><span class=\"line\">        weight = 1</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"lvsnat.png\"><img src=\"/images/lvsnat.png\" alt=\"lvsnat\"></a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>lvs</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"></span></span><br><span class=\"line\">yum groupinstall \"Load Balancer\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"></span></span><br><span class=\"line\">/etc/init.d/piranha-gui start</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">piranha</span></span><br><span class=\"line\">piranha-passwd</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"></span></span><br><span class=\"line\">/etc/sysconfig/ha/lvs.cf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">ip_vsip_vs*</span></span><br><span class=\"line\">/etc/init.d/pulse start</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">/bin/testlink</span></span><br><span class=\"line\">[root@lvs-f30 ~]# cat /bin/testlink</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">/usr/bin/links -dump 1 $1 &gt;/dev/null 2&gt;&amp;1</span><br><span class=\"line\">if [ 0 -eq $? ] ; then</span><br><span class=\"line\">echo ok</span><br><span class=\"line\">else</span><br><span class=\"line\">echo fail</span><br><span class=\"line\">fi</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@lvs-f30 ~]# cat /etc/sysconfig/ha/lvs.cf</span><br><span class=\"line\">serial_no = 30</span><br><span class=\"line\">primary = 172.25.30.14</span><br><span class=\"line\">primary_private = 192.168.122.246</span><br><span class=\"line\">service = lvs</span><br><span class=\"line\">backup_active = 1</span><br><span class=\"line\">backup = 172.25.30.15</span><br><span class=\"line\">backup_private = 192.168.122.247</span><br><span class=\"line\">heartbeat = 1</span><br><span class=\"line\">heartbeat_port = 539</span><br><span class=\"line\">keepalive = 6</span><br><span class=\"line\">deadtime = 18</span><br><span class=\"line\">network = nat</span><br><span class=\"line\">nat_router = 192.168.122.254 eth2</span><br><span class=\"line\">nat_nmask = 255.255.255.255</span><br><span class=\"line\">debug_level = NONE</span><br><span class=\"line\">monitor_links = 0</span><br><span class=\"line\">syncdaemon = 0</span><br><span class=\"line\">syncd_iface = eth2</span><br><span class=\"line\"></span><br><span class=\"line\">virtual http &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    active = 1</span><br><span class=\"line\">    address = 172.25.30.100 eth0:1</span><br><span class=\"line\">    vip_nmask = 255.255.255.0</span><br><span class=\"line\">    port = 80</span><br><span class=\"line\">    send = &quot;GET / HTTP/1.0\\r\\n\\r\\n&quot;</span><br><span class=\"line\">    expect = &quot;ok&quot;</span><br><span class=\"line\">    use_regex = 0</span><br><span class=\"line\">    send_program = &quot;/bin/testlink %h&quot;</span><br><span class=\"line\">    load_monitor = none</span><br><span class=\"line\">    scheduler = wlc</span><br><span class=\"line\">    protocol = tcp</span><br><span class=\"line\">    timeout = 6</span><br><span class=\"line\">    reentry = 15</span><br><span class=\"line\">    quiesce_server = 0</span><br><span class=\"line\"></span><br><span class=\"line\">    server node1 &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        address = 192.168.122.224</span><br><span class=\"line\">        active = 1</span><br><span class=\"line\">        port = 80</span><br><span class=\"line\">        weight = 1</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    server node2 &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        address = 192.168.122.245</span><br><span class=\"line\">        active = 1</span><br><span class=\"line\">        port = 80</span><br><span class=\"line\">        weight = 1</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><a href=\"lvsnat.png\"><img src=\"/images/lvsnat.png\" alt=\"lvsnat\"></a></p>\n"},{"layout":"post","title":"LVS","published":1,"author":"xiemx","comments":1,"date":"2016-02-17T19:02:10.000Z","_content":"\nLVS\n\n\n  1. Virtual Server via Network Address TranslationVS-NAT \n  2. Virtual Server via Direct RoutingVS-DR \n  3. Virtual Server via IP TunnelingVS-TUN\n\n","source":"_posts/lvs-three-mode.md","raw":"---\nlayout: post\ntitle: LVS\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-02-18 03:02:10\ntags: [ lvs, cluster ]\ncategories:\n    - lvs\n---\n\nLVS\n\n\n  1. Virtual Server via Network Address TranslationVS-NAT \n  2. Virtual Server via Direct RoutingVS-DR \n  3. Virtual Server via IP TunnelingVS-TUN\n\n","slug":"lvs-three-mode","updated":"2019-10-21T06:57:42.620Z","photos":[],"link":"","_id":"ck42dyidx0049u9urmn2e8brx","content":"<p>LVS</p>\n<ol>\n<li>Virtual Server via Network Address TranslationVS-NAT </li>\n<li>Virtual Server via Direct RoutingVS-DR </li>\n<li>Virtual Server via IP TunnelingVS-TUN</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<p>LVS</p>\n<ol>\n<li>Virtual Server via Network Address TranslationVS-NAT </li>\n<li>Virtual Server via Direct RoutingVS-DR </li>\n<li>Virtual Server via IP TunnelingVS-TUN</li>\n</ol>\n"},{"layout":"post","title":"magentmemcache","published":1,"author":"xiemx","comments":1,"date":"2017-02-08T23:02:18.000Z","_content":"magentproxymagenttwittertwemproxy[twemproxy](/2017/02/09/2017-02-09-twemproxu/)\n\n\n  \nmemcached\n  \nmagent[repcachemagentmemcache](/2017/02/09/2017-02-09-repcache-magent/)\n\n1. 3Memcached,112211122211223.\n```shell\n# memcached -u xiemx -d -p 11221\n# memcached -u xiemx -d -p 11222\n# memcached -u xiemx -d -p 11223\n\n```\n2. magent112111122111222master11223backup\n```shell\nmagent -p 12000 -s 127.0.0.1:11221 -s127.0.0.1:11222 -b 127.0.0.1:11223\n```\n\n3. telnet 11211magentset key1set key2key1/key211221/1122211213Memcached\n```shell\n[root@memcache ~]# telnet 127.0.0.1 11211\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\nstats\nmemcached agent v0.4\nmatrix 1 -> 127.0.0.1:11221, pool size 0\nmatrix 2 -> 127.0.0.1:11222, pool size 0\nEND\nset key1 0 0 1\n1\nSTORED\nset key2 0 0 1\n2\nSTORED\nquit\nConnection closed by foreign host.\n\n[root@memcache ~]# telnet 127.0.0.1 11221\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\nget key1\nEND\nget key2\nVALUE key2 0 1\n2\nEND\nquit\nConnection closed by foreign host.\n\n[root@memcache ~]# telnet 127.0.0.1 11222\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\nget key1\nVALUE key1 0 1\n1\nEND\nget key2\nEND\nquit\nConnection closed by foreign host.\n\n[root@memcache ~]# telnet 127.0.0.1 11223\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\nget key1\nVALUE key1 0 1\n1\nEND\nget key2\nVALUE key2 0 1\n2\nEND\nquit\nConnection closed by foreign host.\n```\n4. 1121111212Memcached  \n```shell\n[root@memcache ~]# ps -ef | grep memcached\nroot       6589    1   0 01:25 ?        00:00:00 memcached -u xiemx -d -p 11221\nroot       6591    1   0 01:25 ?        00:00:00 memcached -u xiemx -d -p 11222\nroot       6593    1   0 01:25 ?        00:00:00 memcached -u xiemx -d -p 11223\nroot       6609   6509   001:44 pts/0     00:00:00 grep memcached\n[root@memcache ~]# kill -9 6589\n[root@memcache ~]# kill -9 6591\n[root@memcache ~]# telnet 127.0.0.1 11211\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\nget key1 \nVALUE key1 0 1\n1\nEND\nget key2\nVALUE key2 0 1\n2\nEND\nquit\nConnection closed by foreign host.\n```\n\n5. 1121111212Memcached(memcache)\n```shell\n[root@memcache ~]# memcached -m 1 -u root -d -l 127.0.0.1 -p 11221\n[root@memcache ~]# memcached -m 1 -u root -d -l 127.0.0.1 -p 11222\n[root@memcache ~]# telnet 127.0.0.1 11211\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\nget key1\nEND\nget key2\nEND\nquit\nConnection closed by foreign host.\n```","source":"_posts/magent-create-memcache-cluster.md","raw":"---\nlayout: post\ntitle: magentmemcache\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-02-09 07:02:18\ntags: [ memcached, database, cluster ]\ncategories:\n    - memcached\n---\nmagentproxymagenttwittertwemproxy[twemproxy](/2017/02/09/2017-02-09-twemproxu/)\n\n\n  \nmemcached\n  \nmagent[repcachemagentmemcache](/2017/02/09/2017-02-09-repcache-magent/)\n\n1. 3Memcached,112211122211223.\n```shell\n# memcached -u xiemx -d -p 11221\n# memcached -u xiemx -d -p 11222\n# memcached -u xiemx -d -p 11223\n\n```\n2. magent112111122111222master11223backup\n```shell\nmagent -p 12000 -s 127.0.0.1:11221 -s127.0.0.1:11222 -b 127.0.0.1:11223\n```\n\n3. telnet 11211magentset key1set key2key1/key211221/1122211213Memcached\n```shell\n[root@memcache ~]# telnet 127.0.0.1 11211\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\nstats\nmemcached agent v0.4\nmatrix 1 -> 127.0.0.1:11221, pool size 0\nmatrix 2 -> 127.0.0.1:11222, pool size 0\nEND\nset key1 0 0 1\n1\nSTORED\nset key2 0 0 1\n2\nSTORED\nquit\nConnection closed by foreign host.\n\n[root@memcache ~]# telnet 127.0.0.1 11221\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\nget key1\nEND\nget key2\nVALUE key2 0 1\n2\nEND\nquit\nConnection closed by foreign host.\n\n[root@memcache ~]# telnet 127.0.0.1 11222\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\nget key1\nVALUE key1 0 1\n1\nEND\nget key2\nEND\nquit\nConnection closed by foreign host.\n\n[root@memcache ~]# telnet 127.0.0.1 11223\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\nget key1\nVALUE key1 0 1\n1\nEND\nget key2\nVALUE key2 0 1\n2\nEND\nquit\nConnection closed by foreign host.\n```\n4. 1121111212Memcached  \n```shell\n[root@memcache ~]# ps -ef | grep memcached\nroot       6589    1   0 01:25 ?        00:00:00 memcached -u xiemx -d -p 11221\nroot       6591    1   0 01:25 ?        00:00:00 memcached -u xiemx -d -p 11222\nroot       6593    1   0 01:25 ?        00:00:00 memcached -u xiemx -d -p 11223\nroot       6609   6509   001:44 pts/0     00:00:00 grep memcached\n[root@memcache ~]# kill -9 6589\n[root@memcache ~]# kill -9 6591\n[root@memcache ~]# telnet 127.0.0.1 11211\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\nget key1 \nVALUE key1 0 1\n1\nEND\nget key2\nVALUE key2 0 1\n2\nEND\nquit\nConnection closed by foreign host.\n```\n\n5. 1121111212Memcached(memcache)\n```shell\n[root@memcache ~]# memcached -m 1 -u root -d -l 127.0.0.1 -p 11221\n[root@memcache ~]# memcached -m 1 -u root -d -l 127.0.0.1 -p 11222\n[root@memcache ~]# telnet 127.0.0.1 11211\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\nget key1\nEND\nget key2\nEND\nquit\nConnection closed by foreign host.\n```","slug":"magent-create-memcache-cluster","updated":"2019-10-21T06:57:42.620Z","photos":[],"link":"","_id":"ck42dyidy004du9uri286utzh","content":"<p>magentproxymagenttwittertwemproxy<a href=\"/2017/02/09/2017-02-09-twemproxu/\">twemproxy</a></p>\n<p></p>\n<p>memcached</p>\n<p>magent<a href=\"/2017/02/09/2017-02-09-repcache-magent/\">repcachemagentmemcache</a></p>\n<ol>\n<li><p>3Memcached,112211122211223.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> memcached -u xiemx -d -p 11221</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> memcached -u xiemx -d -p 11222</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> memcached -u xiemx -d -p 11223</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>magent112111122111222master11223backup</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">magent -p 12000 -s 127.0.0.1:11221 -s127.0.0.1:11222 -b 127.0.0.1:11223</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>telnet 11211magentset key1set key2key1/key211221/1122211213Memcached</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@memcache ~]# telnet 127.0.0.1 11211</span><br><span class=\"line\">Trying 127.0.0.1...</span><br><span class=\"line\">Connected to 127.0.0.1.</span><br><span class=\"line\">Escape character is '^]'.</span><br><span class=\"line\">stats</span><br><span class=\"line\">memcached agent v0.4</span><br><span class=\"line\">matrix 1 -&gt; 127.0.0.1:11221, pool size 0</span><br><span class=\"line\">matrix 2 -&gt; 127.0.0.1:11222, pool size 0</span><br><span class=\"line\">END</span><br><span class=\"line\">set key1 0 0 1</span><br><span class=\"line\">1</span><br><span class=\"line\">STORED</span><br><span class=\"line\">set key2 0 0 1</span><br><span class=\"line\">2</span><br><span class=\"line\">STORED</span><br><span class=\"line\">quit</span><br><span class=\"line\">Connection closed by foreign host.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@memcache ~]# telnet 127.0.0.1 11221</span><br><span class=\"line\">Trying 127.0.0.1...</span><br><span class=\"line\">Connected to 127.0.0.1.</span><br><span class=\"line\">Escape character is '^]'.</span><br><span class=\"line\">get key1</span><br><span class=\"line\">END</span><br><span class=\"line\">get key2</span><br><span class=\"line\">VALUE key2 0 1</span><br><span class=\"line\">2</span><br><span class=\"line\">END</span><br><span class=\"line\">quit</span><br><span class=\"line\">Connection closed by foreign host.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@memcache ~]# telnet 127.0.0.1 11222</span><br><span class=\"line\">Trying 127.0.0.1...</span><br><span class=\"line\">Connected to 127.0.0.1.</span><br><span class=\"line\">Escape character is '^]'.</span><br><span class=\"line\">get key1</span><br><span class=\"line\">VALUE key1 0 1</span><br><span class=\"line\">1</span><br><span class=\"line\">END</span><br><span class=\"line\">get key2</span><br><span class=\"line\">END</span><br><span class=\"line\">quit</span><br><span class=\"line\">Connection closed by foreign host.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@memcache ~]# telnet 127.0.0.1 11223</span><br><span class=\"line\">Trying 127.0.0.1...</span><br><span class=\"line\">Connected to 127.0.0.1.</span><br><span class=\"line\">Escape character is '^]'.</span><br><span class=\"line\">get key1</span><br><span class=\"line\">VALUE key1 0 1</span><br><span class=\"line\">1</span><br><span class=\"line\">END</span><br><span class=\"line\">get key2</span><br><span class=\"line\">VALUE key2 0 1</span><br><span class=\"line\">2</span><br><span class=\"line\">END</span><br><span class=\"line\">quit</span><br><span class=\"line\">Connection closed by foreign host.</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>1121111212Memcached  </p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@memcache ~]# ps -ef | grep memcached</span><br><span class=\"line\">root       6589    1   0 01:25 ?        00:00:00 memcached -u xiemx -d -p 11221</span><br><span class=\"line\">root       6591    1   0 01:25 ?        00:00:00 memcached -u xiemx -d -p 11222</span><br><span class=\"line\">root       6593    1   0 01:25 ?        00:00:00 memcached -u xiemx -d -p 11223</span><br><span class=\"line\">root       6609   6509   001:44 pts/0     00:00:00 grep memcached</span><br><span class=\"line\">[root@memcache ~]# kill -9 6589</span><br><span class=\"line\">[root@memcache ~]# kill -9 6591</span><br><span class=\"line\">[root@memcache ~]# telnet 127.0.0.1 11211</span><br><span class=\"line\">Trying 127.0.0.1...</span><br><span class=\"line\">Connected to 127.0.0.1.</span><br><span class=\"line\">Escape character is '^]'.</span><br><span class=\"line\">get key1 </span><br><span class=\"line\">VALUE key1 0 1</span><br><span class=\"line\">1</span><br><span class=\"line\">END</span><br><span class=\"line\">get key2</span><br><span class=\"line\">VALUE key2 0 1</span><br><span class=\"line\">2</span><br><span class=\"line\">END</span><br><span class=\"line\">quit</span><br><span class=\"line\">Connection closed by foreign host.</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>1121111212Memcached(memcache)</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@memcache ~]# memcached -m 1 -u root -d -l 127.0.0.1 -p 11221</span><br><span class=\"line\">[root@memcache ~]# memcached -m 1 -u root -d -l 127.0.0.1 -p 11222</span><br><span class=\"line\">[root@memcache ~]# telnet 127.0.0.1 11211</span><br><span class=\"line\">Trying 127.0.0.1...</span><br><span class=\"line\">Connected to 127.0.0.1.</span><br><span class=\"line\">Escape character is '^]'.</span><br><span class=\"line\">get key1</span><br><span class=\"line\">END</span><br><span class=\"line\">get key2</span><br><span class=\"line\">END</span><br><span class=\"line\">quit</span><br><span class=\"line\">Connection closed by foreign host.</span><br></pre></td></tr></table></figure></li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<p>magentproxymagenttwittertwemproxy<a href=\"/2017/02/09/2017-02-09-twemproxu/\">twemproxy</a></p>\n<p></p>\n<p>memcached</p>\n<p>magent<a href=\"/2017/02/09/2017-02-09-repcache-magent/\">repcachemagentmemcache</a></p>\n<ol>\n<li><p>3Memcached,112211122211223.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> memcached -u xiemx -d -p 11221</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> memcached -u xiemx -d -p 11222</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> memcached -u xiemx -d -p 11223</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>magent112111122111222master11223backup</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">magent -p 12000 -s 127.0.0.1:11221 -s127.0.0.1:11222 -b 127.0.0.1:11223</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>telnet 11211magentset key1set key2key1/key211221/1122211213Memcached</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@memcache ~]# telnet 127.0.0.1 11211</span><br><span class=\"line\">Trying 127.0.0.1...</span><br><span class=\"line\">Connected to 127.0.0.1.</span><br><span class=\"line\">Escape character is '^]'.</span><br><span class=\"line\">stats</span><br><span class=\"line\">memcached agent v0.4</span><br><span class=\"line\">matrix 1 -&gt; 127.0.0.1:11221, pool size 0</span><br><span class=\"line\">matrix 2 -&gt; 127.0.0.1:11222, pool size 0</span><br><span class=\"line\">END</span><br><span class=\"line\">set key1 0 0 1</span><br><span class=\"line\">1</span><br><span class=\"line\">STORED</span><br><span class=\"line\">set key2 0 0 1</span><br><span class=\"line\">2</span><br><span class=\"line\">STORED</span><br><span class=\"line\">quit</span><br><span class=\"line\">Connection closed by foreign host.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@memcache ~]# telnet 127.0.0.1 11221</span><br><span class=\"line\">Trying 127.0.0.1...</span><br><span class=\"line\">Connected to 127.0.0.1.</span><br><span class=\"line\">Escape character is '^]'.</span><br><span class=\"line\">get key1</span><br><span class=\"line\">END</span><br><span class=\"line\">get key2</span><br><span class=\"line\">VALUE key2 0 1</span><br><span class=\"line\">2</span><br><span class=\"line\">END</span><br><span class=\"line\">quit</span><br><span class=\"line\">Connection closed by foreign host.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@memcache ~]# telnet 127.0.0.1 11222</span><br><span class=\"line\">Trying 127.0.0.1...</span><br><span class=\"line\">Connected to 127.0.0.1.</span><br><span class=\"line\">Escape character is '^]'.</span><br><span class=\"line\">get key1</span><br><span class=\"line\">VALUE key1 0 1</span><br><span class=\"line\">1</span><br><span class=\"line\">END</span><br><span class=\"line\">get key2</span><br><span class=\"line\">END</span><br><span class=\"line\">quit</span><br><span class=\"line\">Connection closed by foreign host.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@memcache ~]# telnet 127.0.0.1 11223</span><br><span class=\"line\">Trying 127.0.0.1...</span><br><span class=\"line\">Connected to 127.0.0.1.</span><br><span class=\"line\">Escape character is '^]'.</span><br><span class=\"line\">get key1</span><br><span class=\"line\">VALUE key1 0 1</span><br><span class=\"line\">1</span><br><span class=\"line\">END</span><br><span class=\"line\">get key2</span><br><span class=\"line\">VALUE key2 0 1</span><br><span class=\"line\">2</span><br><span class=\"line\">END</span><br><span class=\"line\">quit</span><br><span class=\"line\">Connection closed by foreign host.</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>1121111212Memcached  </p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@memcache ~]# ps -ef | grep memcached</span><br><span class=\"line\">root       6589    1   0 01:25 ?        00:00:00 memcached -u xiemx -d -p 11221</span><br><span class=\"line\">root       6591    1   0 01:25 ?        00:00:00 memcached -u xiemx -d -p 11222</span><br><span class=\"line\">root       6593    1   0 01:25 ?        00:00:00 memcached -u xiemx -d -p 11223</span><br><span class=\"line\">root       6609   6509   001:44 pts/0     00:00:00 grep memcached</span><br><span class=\"line\">[root@memcache ~]# kill -9 6589</span><br><span class=\"line\">[root@memcache ~]# kill -9 6591</span><br><span class=\"line\">[root@memcache ~]# telnet 127.0.0.1 11211</span><br><span class=\"line\">Trying 127.0.0.1...</span><br><span class=\"line\">Connected to 127.0.0.1.</span><br><span class=\"line\">Escape character is '^]'.</span><br><span class=\"line\">get key1 </span><br><span class=\"line\">VALUE key1 0 1</span><br><span class=\"line\">1</span><br><span class=\"line\">END</span><br><span class=\"line\">get key2</span><br><span class=\"line\">VALUE key2 0 1</span><br><span class=\"line\">2</span><br><span class=\"line\">END</span><br><span class=\"line\">quit</span><br><span class=\"line\">Connection closed by foreign host.</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>1121111212Memcached(memcache)</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@memcache ~]# memcached -m 1 -u root -d -l 127.0.0.1 -p 11221</span><br><span class=\"line\">[root@memcache ~]# memcached -m 1 -u root -d -l 127.0.0.1 -p 11222</span><br><span class=\"line\">[root@memcache ~]# telnet 127.0.0.1 11211</span><br><span class=\"line\">Trying 127.0.0.1...</span><br><span class=\"line\">Connected to 127.0.0.1.</span><br><span class=\"line\">Escape character is '^]'.</span><br><span class=\"line\">get key1</span><br><span class=\"line\">END</span><br><span class=\"line\">get key2</span><br><span class=\"line\">END</span><br><span class=\"line\">quit</span><br><span class=\"line\">Connection closed by foreign host.</span><br></pre></td></tr></table></figure></li>\n</ol>\n"},{"layout":"post","title":"MIME","published":1,"author":"xiemx","comments":1,"date":"2015-08-20T17:08:58.000Z","_content":"### MIME\nMIME[MIME Type](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types)\n\n#### MIME\n\n|  |  | MIME  |\n| :----- | :------ | ----: |\n| .aac | AAC audio | audio/aac |\n| .abw | AbiWord document | application/x-abiword |\n| .arc | Archive document (multiple files embedded) | application/x-freearc |\n| .avi | AVI: Audio Video Interleave | video/x-msvideo |\n| .azw | Amazon Kindle eBook format | application/vnd.amazon.ebook |\n| .bin | Any kind of binary data | application/octet-stream |\n| .bmp | Windows OS/2 Bitmap Graphics | image/bmp |\n| .bz | BZip archive | application/x-bzip |\n| .bz2 | BZip2 archive | application/x-bzip2 |\n| .csh | C-Shell script | application/x-csh |\n| .css | Cascading Style Sheets (CSS) | text/css |\n| .csv | Comma-separated values (CSV) | text/csv |\n| .doc | Microsoft Word | application/msword |\n| .epub | Electronic publication (EPUB) | application/epub+zip |\n| .gif | Graphics Interchange Format (GIF) | image/gif |\n| .html | HyperText Markup Language (HTML) | text/html |\n| .ico | Icon format | image/vnd.microsoft.icon |\n| .ics | iCalendar format | text/calendar |\n| .jar | Java Archive (JAR) | application/java-archive |\n| .jpeg | JPEG images | image/jpeg |\n| .js | JavaScript | text/javascript |\n| .json | JSON format | application/json |\n| .mjs | JavaScript module | text/javascript |\n| .mp3 | MP3 audio | audio/mpeg |\n| .mpeg | MPEG Video | video/mpeg |\n| .oga | OGG audio | audio/ogg |\n| .ogv | OGG video | video/ogg |\n| .ogx | OGG | application/ogg |\n| .otf | OpenType font | font/otf |\n| .png | Portable Network Graphics | image/png |\n| .pdf | Adobe Portable Document Format (PDF) | application/pdf |\n| .rar | RAR archive | application/x-rar-compressed |\n| .rtf | Rich Text Format (RTF) | application/rtf |\n| .sh | Bourne shell script | application/x-sh |\n| .svg | Scalable Vector Graphics (SVG) | image/svg+xml |\n| .tar | Tape Archive (TAR) | application/x-tar |\n| .tiff | Tagged Image File Format (TIFF) | image/tiff |\n| .ttf | TrueType Font | font/ttf |\n| .txt | Text, (generally ASCII or ISO 8859-n) | text/plain |\n| .vsd | Microsoft Visio | application/vnd.visio |\n| .wav | Waveform Audio Format | audio/wav |\n| .woff | Web Open Font Format (WOFF) | font/woff |\n| .woff2 | Web Open Font Format (WOFF) | font/woff2 |\n| .xhtml | XHTML | application/xhtml+xml |\n| .xls | Microsoft Excel | application/vnd.ms-excel |\n| .xml | XML | application/xml|\n| .zip | ZIP archive | application/zip |\n| .3gp | 3GPP audio/video container | video/3gpp |\n| .3g2 | 3GPP2 audio/video container | video/3gpp2 |\n| .7z | 7-zip archive | application/x-7z-compressed |\n\n#### \n```markdown\n# IIS\n-->http -->MIME-->-->\n\n# nginx\nconf/mime.types\n```","source":"_posts/mime-type.md","raw":"---\nlayout: post\ntitle: MIME\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-08-21 01:08:58\ntags: [ http, mime-type ]\ncategories:\n    - 'http'\n    - 'mime-type'\n# permalink: '/2015/08/21/mime-type'\n---\n### MIME\nMIME[MIME Type](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types)\n\n#### MIME\n\n|  |  | MIME  |\n| :----- | :------ | ----: |\n| .aac | AAC audio | audio/aac |\n| .abw | AbiWord document | application/x-abiword |\n| .arc | Archive document (multiple files embedded) | application/x-freearc |\n| .avi | AVI: Audio Video Interleave | video/x-msvideo |\n| .azw | Amazon Kindle eBook format | application/vnd.amazon.ebook |\n| .bin | Any kind of binary data | application/octet-stream |\n| .bmp | Windows OS/2 Bitmap Graphics | image/bmp |\n| .bz | BZip archive | application/x-bzip |\n| .bz2 | BZip2 archive | application/x-bzip2 |\n| .csh | C-Shell script | application/x-csh |\n| .css | Cascading Style Sheets (CSS) | text/css |\n| .csv | Comma-separated values (CSV) | text/csv |\n| .doc | Microsoft Word | application/msword |\n| .epub | Electronic publication (EPUB) | application/epub+zip |\n| .gif | Graphics Interchange Format (GIF) | image/gif |\n| .html | HyperText Markup Language (HTML) | text/html |\n| .ico | Icon format | image/vnd.microsoft.icon |\n| .ics | iCalendar format | text/calendar |\n| .jar | Java Archive (JAR) | application/java-archive |\n| .jpeg | JPEG images | image/jpeg |\n| .js | JavaScript | text/javascript |\n| .json | JSON format | application/json |\n| .mjs | JavaScript module | text/javascript |\n| .mp3 | MP3 audio | audio/mpeg |\n| .mpeg | MPEG Video | video/mpeg |\n| .oga | OGG audio | audio/ogg |\n| .ogv | OGG video | video/ogg |\n| .ogx | OGG | application/ogg |\n| .otf | OpenType font | font/otf |\n| .png | Portable Network Graphics | image/png |\n| .pdf | Adobe Portable Document Format (PDF) | application/pdf |\n| .rar | RAR archive | application/x-rar-compressed |\n| .rtf | Rich Text Format (RTF) | application/rtf |\n| .sh | Bourne shell script | application/x-sh |\n| .svg | Scalable Vector Graphics (SVG) | image/svg+xml |\n| .tar | Tape Archive (TAR) | application/x-tar |\n| .tiff | Tagged Image File Format (TIFF) | image/tiff |\n| .ttf | TrueType Font | font/ttf |\n| .txt | Text, (generally ASCII or ISO 8859-n) | text/plain |\n| .vsd | Microsoft Visio | application/vnd.visio |\n| .wav | Waveform Audio Format | audio/wav |\n| .woff | Web Open Font Format (WOFF) | font/woff |\n| .woff2 | Web Open Font Format (WOFF) | font/woff2 |\n| .xhtml | XHTML | application/xhtml+xml |\n| .xls | Microsoft Excel | application/vnd.ms-excel |\n| .xml | XML | application/xml|\n| .zip | ZIP archive | application/zip |\n| .3gp | 3GPP audio/video container | video/3gpp |\n| .3g2 | 3GPP2 audio/video container | video/3gpp2 |\n| .7z | 7-zip archive | application/x-7z-compressed |\n\n#### \n```markdown\n# IIS\n-->http -->MIME-->-->\n\n# nginx\nconf/mime.types\n```","slug":"mime-type","updated":"2019-10-21T09:00:13.031Z","photos":[],"link":"","_id":"ck42dyidz004hu9ur32sytjrf","content":"<h3 id=\"MIME\"><a href=\"#MIME\" class=\"headerlink\" title=\"MIME\"></a>MIME</h3><p>MIME<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types\" target=\"_blank\" rel=\"noopener\">MIME Type</a></p>\n<h4 id=\"MIME\"><a href=\"#MIME\" class=\"headerlink\" title=\"MIME\"></a>MIME</h4><table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\"></th>\n<th align=\"right\">MIME </th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">.aac</td>\n<td align=\"left\">AAC audio</td>\n<td align=\"right\">audio/aac</td>\n</tr>\n<tr>\n<td align=\"left\">.abw</td>\n<td align=\"left\">AbiWord document</td>\n<td align=\"right\">application/x-abiword</td>\n</tr>\n<tr>\n<td align=\"left\">.arc</td>\n<td align=\"left\">Archive document (multiple files embedded)</td>\n<td align=\"right\">application/x-freearc</td>\n</tr>\n<tr>\n<td align=\"left\">.avi</td>\n<td align=\"left\">AVI: Audio Video Interleave</td>\n<td align=\"right\">video/x-msvideo</td>\n</tr>\n<tr>\n<td align=\"left\">.azw</td>\n<td align=\"left\">Amazon Kindle eBook format</td>\n<td align=\"right\">application/vnd.amazon.ebook</td>\n</tr>\n<tr>\n<td align=\"left\">.bin</td>\n<td align=\"left\">Any kind of binary data</td>\n<td align=\"right\">application/octet-stream</td>\n</tr>\n<tr>\n<td align=\"left\">.bmp</td>\n<td align=\"left\">Windows OS/2 Bitmap Graphics</td>\n<td align=\"right\">image/bmp</td>\n</tr>\n<tr>\n<td align=\"left\">.bz</td>\n<td align=\"left\">BZip archive</td>\n<td align=\"right\">application/x-bzip</td>\n</tr>\n<tr>\n<td align=\"left\">.bz2</td>\n<td align=\"left\">BZip2 archive</td>\n<td align=\"right\">application/x-bzip2</td>\n</tr>\n<tr>\n<td align=\"left\">.csh</td>\n<td align=\"left\">C-Shell script</td>\n<td align=\"right\">application/x-csh</td>\n</tr>\n<tr>\n<td align=\"left\">.css</td>\n<td align=\"left\">Cascading Style Sheets (CSS)</td>\n<td align=\"right\">text/css</td>\n</tr>\n<tr>\n<td align=\"left\">.csv</td>\n<td align=\"left\">Comma-separated values (CSV)</td>\n<td align=\"right\">text/csv</td>\n</tr>\n<tr>\n<td align=\"left\">.doc</td>\n<td align=\"left\">Microsoft Word</td>\n<td align=\"right\">application/msword</td>\n</tr>\n<tr>\n<td align=\"left\">.epub</td>\n<td align=\"left\">Electronic publication (EPUB)</td>\n<td align=\"right\">application/epub+zip</td>\n</tr>\n<tr>\n<td align=\"left\">.gif</td>\n<td align=\"left\">Graphics Interchange Format (GIF)</td>\n<td align=\"right\">image/gif</td>\n</tr>\n<tr>\n<td align=\"left\">.html</td>\n<td align=\"left\">HyperText Markup Language (HTML)</td>\n<td align=\"right\">text/html</td>\n</tr>\n<tr>\n<td align=\"left\">.ico</td>\n<td align=\"left\">Icon format</td>\n<td align=\"right\">image/vnd.microsoft.icon</td>\n</tr>\n<tr>\n<td align=\"left\">.ics</td>\n<td align=\"left\">iCalendar format</td>\n<td align=\"right\">text/calendar</td>\n</tr>\n<tr>\n<td align=\"left\">.jar</td>\n<td align=\"left\">Java Archive (JAR)</td>\n<td align=\"right\">application/java-archive</td>\n</tr>\n<tr>\n<td align=\"left\">.jpeg</td>\n<td align=\"left\">JPEG images</td>\n<td align=\"right\">image/jpeg</td>\n</tr>\n<tr>\n<td align=\"left\">.js</td>\n<td align=\"left\">JavaScript</td>\n<td align=\"right\">text/javascript</td>\n</tr>\n<tr>\n<td align=\"left\">.json</td>\n<td align=\"left\">JSON format</td>\n<td align=\"right\">application/json</td>\n</tr>\n<tr>\n<td align=\"left\">.mjs</td>\n<td align=\"left\">JavaScript module</td>\n<td align=\"right\">text/javascript</td>\n</tr>\n<tr>\n<td align=\"left\">.mp3</td>\n<td align=\"left\">MP3 audio</td>\n<td align=\"right\">audio/mpeg</td>\n</tr>\n<tr>\n<td align=\"left\">.mpeg</td>\n<td align=\"left\">MPEG Video</td>\n<td align=\"right\">video/mpeg</td>\n</tr>\n<tr>\n<td align=\"left\">.oga</td>\n<td align=\"left\">OGG audio</td>\n<td align=\"right\">audio/ogg</td>\n</tr>\n<tr>\n<td align=\"left\">.ogv</td>\n<td align=\"left\">OGG video</td>\n<td align=\"right\">video/ogg</td>\n</tr>\n<tr>\n<td align=\"left\">.ogx</td>\n<td align=\"left\">OGG</td>\n<td align=\"right\">application/ogg</td>\n</tr>\n<tr>\n<td align=\"left\">.otf</td>\n<td align=\"left\">OpenType font</td>\n<td align=\"right\">font/otf</td>\n</tr>\n<tr>\n<td align=\"left\">.png</td>\n<td align=\"left\">Portable Network Graphics</td>\n<td align=\"right\">image/png</td>\n</tr>\n<tr>\n<td align=\"left\">.pdf</td>\n<td align=\"left\">Adobe Portable Document Format (PDF)</td>\n<td align=\"right\">application/pdf</td>\n</tr>\n<tr>\n<td align=\"left\">.rar</td>\n<td align=\"left\">RAR archive</td>\n<td align=\"right\">application/x-rar-compressed</td>\n</tr>\n<tr>\n<td align=\"left\">.rtf</td>\n<td align=\"left\">Rich Text Format (RTF)</td>\n<td align=\"right\">application/rtf</td>\n</tr>\n<tr>\n<td align=\"left\">.sh</td>\n<td align=\"left\">Bourne shell script</td>\n<td align=\"right\">application/x-sh</td>\n</tr>\n<tr>\n<td align=\"left\">.svg</td>\n<td align=\"left\">Scalable Vector Graphics (SVG)</td>\n<td align=\"right\">image/svg+xml</td>\n</tr>\n<tr>\n<td align=\"left\">.tar</td>\n<td align=\"left\">Tape Archive (TAR)</td>\n<td align=\"right\">application/x-tar</td>\n</tr>\n<tr>\n<td align=\"left\">.tiff</td>\n<td align=\"left\">Tagged Image File Format (TIFF)</td>\n<td align=\"right\">image/tiff</td>\n</tr>\n<tr>\n<td align=\"left\">.ttf</td>\n<td align=\"left\">TrueType Font</td>\n<td align=\"right\">font/ttf</td>\n</tr>\n<tr>\n<td align=\"left\">.txt</td>\n<td align=\"left\">Text, (generally ASCII or ISO 8859-n)</td>\n<td align=\"right\">text/plain</td>\n</tr>\n<tr>\n<td align=\"left\">.vsd</td>\n<td align=\"left\">Microsoft Visio</td>\n<td align=\"right\">application/vnd.visio</td>\n</tr>\n<tr>\n<td align=\"left\">.wav</td>\n<td align=\"left\">Waveform Audio Format</td>\n<td align=\"right\">audio/wav</td>\n</tr>\n<tr>\n<td align=\"left\">.woff</td>\n<td align=\"left\">Web Open Font Format (WOFF)</td>\n<td align=\"right\">font/woff</td>\n</tr>\n<tr>\n<td align=\"left\">.woff2</td>\n<td align=\"left\">Web Open Font Format (WOFF)</td>\n<td align=\"right\">font/woff2</td>\n</tr>\n<tr>\n<td align=\"left\">.xhtml</td>\n<td align=\"left\">XHTML</td>\n<td align=\"right\">application/xhtml+xml</td>\n</tr>\n<tr>\n<td align=\"left\">.xls</td>\n<td align=\"left\">Microsoft Excel</td>\n<td align=\"right\">application/vnd.ms-excel</td>\n</tr>\n<tr>\n<td align=\"left\">.xml</td>\n<td align=\"left\">XML</td>\n<td align=\"right\">application/xml</td>\n</tr>\n<tr>\n<td align=\"left\">.zip</td>\n<td align=\"left\">ZIP archive</td>\n<td align=\"right\">application/zip</td>\n</tr>\n<tr>\n<td align=\"left\">.3gp</td>\n<td align=\"left\">3GPP audio/video container</td>\n<td align=\"right\">video/3gpp</td>\n</tr>\n<tr>\n<td align=\"left\">.3g2</td>\n<td align=\"left\">3GPP2 audio/video container</td>\n<td align=\"right\">video/3gpp2</td>\n</tr>\n<tr>\n<td align=\"left\">.7z</td>\n<td align=\"left\">7-zip archive</td>\n<td align=\"right\">application/x-7z-compressed</td>\n</tr>\n</tbody></table>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\"># IIS</span></span><br><span class=\"line\">--&gt;http --&gt;MIME--&gt;--&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\"># nginx</span></span><br><span class=\"line\">conf/mime.types</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"MIME\"><a href=\"#MIME\" class=\"headerlink\" title=\"MIME\"></a>MIME</h3><p>MIME<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types\" target=\"_blank\" rel=\"noopener\">MIME Type</a></p>\n<h4 id=\"MIME\"><a href=\"#MIME\" class=\"headerlink\" title=\"MIME\"></a>MIME</h4><table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\"></th>\n<th align=\"right\">MIME </th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">.aac</td>\n<td align=\"left\">AAC audio</td>\n<td align=\"right\">audio/aac</td>\n</tr>\n<tr>\n<td align=\"left\">.abw</td>\n<td align=\"left\">AbiWord document</td>\n<td align=\"right\">application/x-abiword</td>\n</tr>\n<tr>\n<td align=\"left\">.arc</td>\n<td align=\"left\">Archive document (multiple files embedded)</td>\n<td align=\"right\">application/x-freearc</td>\n</tr>\n<tr>\n<td align=\"left\">.avi</td>\n<td align=\"left\">AVI: Audio Video Interleave</td>\n<td align=\"right\">video/x-msvideo</td>\n</tr>\n<tr>\n<td align=\"left\">.azw</td>\n<td align=\"left\">Amazon Kindle eBook format</td>\n<td align=\"right\">application/vnd.amazon.ebook</td>\n</tr>\n<tr>\n<td align=\"left\">.bin</td>\n<td align=\"left\">Any kind of binary data</td>\n<td align=\"right\">application/octet-stream</td>\n</tr>\n<tr>\n<td align=\"left\">.bmp</td>\n<td align=\"left\">Windows OS/2 Bitmap Graphics</td>\n<td align=\"right\">image/bmp</td>\n</tr>\n<tr>\n<td align=\"left\">.bz</td>\n<td align=\"left\">BZip archive</td>\n<td align=\"right\">application/x-bzip</td>\n</tr>\n<tr>\n<td align=\"left\">.bz2</td>\n<td align=\"left\">BZip2 archive</td>\n<td align=\"right\">application/x-bzip2</td>\n</tr>\n<tr>\n<td align=\"left\">.csh</td>\n<td align=\"left\">C-Shell script</td>\n<td align=\"right\">application/x-csh</td>\n</tr>\n<tr>\n<td align=\"left\">.css</td>\n<td align=\"left\">Cascading Style Sheets (CSS)</td>\n<td align=\"right\">text/css</td>\n</tr>\n<tr>\n<td align=\"left\">.csv</td>\n<td align=\"left\">Comma-separated values (CSV)</td>\n<td align=\"right\">text/csv</td>\n</tr>\n<tr>\n<td align=\"left\">.doc</td>\n<td align=\"left\">Microsoft Word</td>\n<td align=\"right\">application/msword</td>\n</tr>\n<tr>\n<td align=\"left\">.epub</td>\n<td align=\"left\">Electronic publication (EPUB)</td>\n<td align=\"right\">application/epub+zip</td>\n</tr>\n<tr>\n<td align=\"left\">.gif</td>\n<td align=\"left\">Graphics Interchange Format (GIF)</td>\n<td align=\"right\">image/gif</td>\n</tr>\n<tr>\n<td align=\"left\">.html</td>\n<td align=\"left\">HyperText Markup Language (HTML)</td>\n<td align=\"right\">text/html</td>\n</tr>\n<tr>\n<td align=\"left\">.ico</td>\n<td align=\"left\">Icon format</td>\n<td align=\"right\">image/vnd.microsoft.icon</td>\n</tr>\n<tr>\n<td align=\"left\">.ics</td>\n<td align=\"left\">iCalendar format</td>\n<td align=\"right\">text/calendar</td>\n</tr>\n<tr>\n<td align=\"left\">.jar</td>\n<td align=\"left\">Java Archive (JAR)</td>\n<td align=\"right\">application/java-archive</td>\n</tr>\n<tr>\n<td align=\"left\">.jpeg</td>\n<td align=\"left\">JPEG images</td>\n<td align=\"right\">image/jpeg</td>\n</tr>\n<tr>\n<td align=\"left\">.js</td>\n<td align=\"left\">JavaScript</td>\n<td align=\"right\">text/javascript</td>\n</tr>\n<tr>\n<td align=\"left\">.json</td>\n<td align=\"left\">JSON format</td>\n<td align=\"right\">application/json</td>\n</tr>\n<tr>\n<td align=\"left\">.mjs</td>\n<td align=\"left\">JavaScript module</td>\n<td align=\"right\">text/javascript</td>\n</tr>\n<tr>\n<td align=\"left\">.mp3</td>\n<td align=\"left\">MP3 audio</td>\n<td align=\"right\">audio/mpeg</td>\n</tr>\n<tr>\n<td align=\"left\">.mpeg</td>\n<td align=\"left\">MPEG Video</td>\n<td align=\"right\">video/mpeg</td>\n</tr>\n<tr>\n<td align=\"left\">.oga</td>\n<td align=\"left\">OGG audio</td>\n<td align=\"right\">audio/ogg</td>\n</tr>\n<tr>\n<td align=\"left\">.ogv</td>\n<td align=\"left\">OGG video</td>\n<td align=\"right\">video/ogg</td>\n</tr>\n<tr>\n<td align=\"left\">.ogx</td>\n<td align=\"left\">OGG</td>\n<td align=\"right\">application/ogg</td>\n</tr>\n<tr>\n<td align=\"left\">.otf</td>\n<td align=\"left\">OpenType font</td>\n<td align=\"right\">font/otf</td>\n</tr>\n<tr>\n<td align=\"left\">.png</td>\n<td align=\"left\">Portable Network Graphics</td>\n<td align=\"right\">image/png</td>\n</tr>\n<tr>\n<td align=\"left\">.pdf</td>\n<td align=\"left\">Adobe Portable Document Format (PDF)</td>\n<td align=\"right\">application/pdf</td>\n</tr>\n<tr>\n<td align=\"left\">.rar</td>\n<td align=\"left\">RAR archive</td>\n<td align=\"right\">application/x-rar-compressed</td>\n</tr>\n<tr>\n<td align=\"left\">.rtf</td>\n<td align=\"left\">Rich Text Format (RTF)</td>\n<td align=\"right\">application/rtf</td>\n</tr>\n<tr>\n<td align=\"left\">.sh</td>\n<td align=\"left\">Bourne shell script</td>\n<td align=\"right\">application/x-sh</td>\n</tr>\n<tr>\n<td align=\"left\">.svg</td>\n<td align=\"left\">Scalable Vector Graphics (SVG)</td>\n<td align=\"right\">image/svg+xml</td>\n</tr>\n<tr>\n<td align=\"left\">.tar</td>\n<td align=\"left\">Tape Archive (TAR)</td>\n<td align=\"right\">application/x-tar</td>\n</tr>\n<tr>\n<td align=\"left\">.tiff</td>\n<td align=\"left\">Tagged Image File Format (TIFF)</td>\n<td align=\"right\">image/tiff</td>\n</tr>\n<tr>\n<td align=\"left\">.ttf</td>\n<td align=\"left\">TrueType Font</td>\n<td align=\"right\">font/ttf</td>\n</tr>\n<tr>\n<td align=\"left\">.txt</td>\n<td align=\"left\">Text, (generally ASCII or ISO 8859-n)</td>\n<td align=\"right\">text/plain</td>\n</tr>\n<tr>\n<td align=\"left\">.vsd</td>\n<td align=\"left\">Microsoft Visio</td>\n<td align=\"right\">application/vnd.visio</td>\n</tr>\n<tr>\n<td align=\"left\">.wav</td>\n<td align=\"left\">Waveform Audio Format</td>\n<td align=\"right\">audio/wav</td>\n</tr>\n<tr>\n<td align=\"left\">.woff</td>\n<td align=\"left\">Web Open Font Format (WOFF)</td>\n<td align=\"right\">font/woff</td>\n</tr>\n<tr>\n<td align=\"left\">.woff2</td>\n<td align=\"left\">Web Open Font Format (WOFF)</td>\n<td align=\"right\">font/woff2</td>\n</tr>\n<tr>\n<td align=\"left\">.xhtml</td>\n<td align=\"left\">XHTML</td>\n<td align=\"right\">application/xhtml+xml</td>\n</tr>\n<tr>\n<td align=\"left\">.xls</td>\n<td align=\"left\">Microsoft Excel</td>\n<td align=\"right\">application/vnd.ms-excel</td>\n</tr>\n<tr>\n<td align=\"left\">.xml</td>\n<td align=\"left\">XML</td>\n<td align=\"right\">application/xml</td>\n</tr>\n<tr>\n<td align=\"left\">.zip</td>\n<td align=\"left\">ZIP archive</td>\n<td align=\"right\">application/zip</td>\n</tr>\n<tr>\n<td align=\"left\">.3gp</td>\n<td align=\"left\">3GPP audio/video container</td>\n<td align=\"right\">video/3gpp</td>\n</tr>\n<tr>\n<td align=\"left\">.3g2</td>\n<td align=\"left\">3GPP2 audio/video container</td>\n<td align=\"right\">video/3gpp2</td>\n</tr>\n<tr>\n<td align=\"left\">.7z</td>\n<td align=\"left\">7-zip archive</td>\n<td align=\"right\">application/x-7z-compressed</td>\n</tr>\n</tbody></table>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\"># IIS</span></span><br><span class=\"line\">--&gt;http --&gt;MIME--&gt;--&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\"># nginx</span></span><br><span class=\"line\">conf/mime.types</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"MSSQL ","published":1,"author":"xiemx","comments":1,"date":"2015-08-21T02:08:42.000Z","_content":"\nMSSQL2008\n\n--------Designers()---- \n\n[![1](/images/1.png)](1.png)\n\nMSSql2005 excute\n\n[![clipboard](/images/clipboard.png)](clipboard.png)\n\n","source":"_posts/mssql-deny-save.md","raw":"---\nlayout: post\ntitle: MSSQL \npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-08-21 10:08:42\ntags: [ mssql, database, debug]\ncategories:\n    - mssql\n---\n\nMSSQL2008\n\n--------Designers()---- \n\n[![1](/images/1.png)](1.png)\n\nMSSql2005 excute\n\n[![clipboard](/images/clipboard.png)](clipboard.png)\n\n","slug":"mssql-deny-save","updated":"2019-10-21T09:00:21.279Z","photos":[],"link":"","_id":"ck42dyie1004lu9ura4wmfdg4","content":"<p>MSSQL2008</p>\n<p>--Designers()- </p>\n<p><a href=\"1.png\"><img src=\"/images/1.png\" alt=\"1\"></a></p>\n<p>MSSql2005 excute</p>\n<p><a href=\"clipboard.png\"><img src=\"/images/clipboard.png\" alt=\"clipboard\"></a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>MSSQL2008</p>\n<p>--Designers()- </p>\n<p><a href=\"1.png\"><img src=\"/images/1.png\" alt=\"1\"></a></p>\n<p>MSSql2005 excute</p>\n<p><a href=\"clipboard.png\"><img src=\"/images/clipboard.png\" alt=\"clipboard\"></a></p>\n"},{"layout":"post","title":"Tomcat","published":1,"author":"xiemx","comments":1,"date":"2016-01-29T21:01:29.000Z","_content":"tomcattomcattomcat808080818082nginx\n\n```shell\n[root@serverc ~]# /etc/init.d/tomcat stop\n[root@serverc ~]# cd /home/tomcat/\n[root@serverc tomcat]# mkdir tomcat1 tomcat2\n[root@serverc tomcat]# cd apache-tomcat-8.0.24/\n[root@serverc apache-tomcat-8.0.24]# cp -rp logs/ temp/ tomcat1.com/ work/ webapps/ conf/ ../tomcat1/\n[root@serverc apache-tomcat-8.0.24]# cp -rp logs/ temp/ tomcat2.com/ work/ webapps/ conf/ ../tomcat2/\n[root@serverc apache-tomcat-8.0.24]# rm -rf LICENSE NOTICE RELEASE-NOTES RUNNING.txt conf logs tomcat1.com tomcat2.com webapps\n[root@serverc apache-tomcat-8.0.24]# ls\nbin lib temp work\n[root@serverc apache-tomcat-8.0.24]# cd ../tomcat1/\n[root@serverc tomcat1]# vim conf/server.xml\n<Host name=\"www.tomcat1.com\" appBase=\"tomcat1.com\"\nunpackWARs=\"true\" autoDeploy=\"true\">\n<Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"logs\"\nprefix=\"localhost_access_log\" suffix=\".txt\"\npattern=\"%h %l %u %t &quot;%r&quot; %s %b\" />\n</Host>\n\n[root@serverc tomcat1]# cd ../tomcat2/\n[root@serverc tomcat2]# vim conf/server.xml\n<Host name=\"www.tomcat2.com\" appBase=\"tomcat2.com\"\nunpackWARs=\"true\" autoDeploy=\"true\">\n<Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"logs\"\nprefix=\"localhost_access_log\" suffix=\".txt\"\npattern=\"%h %l %u %t &quot;%r&quot; %s %b\" />\n</Host>\n=============================================================================\n<Connector port=\"8081\" protocol=\"HTTP/1.1\"\nconnectionTimeout=\"20000\"\nredirectPort=\"8443\" />\n=============================================================================\n<Connector port=\"8010\" protocol=\"AJP/1.3\" redirectPort=\"8443\" />\n\n[root@serverc tomcat2]# cd /etc/init.d/\n[root@serverc init.d]# mv tomcat tomcat1\n[root@serverc init.d]# vim tomcat1\nexport CATALINA_HOME=\"/home/tomcat/apache-tomcat-8.0.24/\"\nexport CATALINA_BASE=\"/home/tomcat/tomcat1\"\n\n[root@serverc init.d]# cp tomcat1 tomcat2\n[root@serverc init.d]# vim tomcat2\nexport CATALINA_HOME=\"/home/tomcat/apache-tomcat-8.0.24/\"\nexport CATALINA_BASE=\"/home/tomcat/tomcat2\"\n\n[root@serverc init.d]# /etc/init.d/tomcat1 start\n[root@serverc init.d]# /etc/init.d/tomcat2 start\n[root@serverc init.d]# netstat -ltunp | grep 8080\ntcp6 0 0 :::8080 :::* LISTEN 5749/jsvc.exec\n[root@serverc init.d]# netstat -ltunp | grep 8081\ntcp6 0 0 :::8081 :::* LISTEN 5782/jsvc.exec\n```","source":"_posts/multi-tomcat-server.md","raw":"---\nlayout: post\ntitle: Tomcat\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-01-30 05:01:29\ntags: [ tomcat, webserver, http ]\ncategories:\n    - tomcat\n# permalink: '/2016/01/30/multi-tomcat-server'\n---\ntomcattomcattomcat808080818082nginx\n\n```shell\n[root@serverc ~]# /etc/init.d/tomcat stop\n[root@serverc ~]# cd /home/tomcat/\n[root@serverc tomcat]# mkdir tomcat1 tomcat2\n[root@serverc tomcat]# cd apache-tomcat-8.0.24/\n[root@serverc apache-tomcat-8.0.24]# cp -rp logs/ temp/ tomcat1.com/ work/ webapps/ conf/ ../tomcat1/\n[root@serverc apache-tomcat-8.0.24]# cp -rp logs/ temp/ tomcat2.com/ work/ webapps/ conf/ ../tomcat2/\n[root@serverc apache-tomcat-8.0.24]# rm -rf LICENSE NOTICE RELEASE-NOTES RUNNING.txt conf logs tomcat1.com tomcat2.com webapps\n[root@serverc apache-tomcat-8.0.24]# ls\nbin lib temp work\n[root@serverc apache-tomcat-8.0.24]# cd ../tomcat1/\n[root@serverc tomcat1]# vim conf/server.xml\n<Host name=\"www.tomcat1.com\" appBase=\"tomcat1.com\"\nunpackWARs=\"true\" autoDeploy=\"true\">\n<Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"logs\"\nprefix=\"localhost_access_log\" suffix=\".txt\"\npattern=\"%h %l %u %t &quot;%r&quot; %s %b\" />\n</Host>\n\n[root@serverc tomcat1]# cd ../tomcat2/\n[root@serverc tomcat2]# vim conf/server.xml\n<Host name=\"www.tomcat2.com\" appBase=\"tomcat2.com\"\nunpackWARs=\"true\" autoDeploy=\"true\">\n<Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"logs\"\nprefix=\"localhost_access_log\" suffix=\".txt\"\npattern=\"%h %l %u %t &quot;%r&quot; %s %b\" />\n</Host>\n=============================================================================\n<Connector port=\"8081\" protocol=\"HTTP/1.1\"\nconnectionTimeout=\"20000\"\nredirectPort=\"8443\" />\n=============================================================================\n<Connector port=\"8010\" protocol=\"AJP/1.3\" redirectPort=\"8443\" />\n\n[root@serverc tomcat2]# cd /etc/init.d/\n[root@serverc init.d]# mv tomcat tomcat1\n[root@serverc init.d]# vim tomcat1\nexport CATALINA_HOME=\"/home/tomcat/apache-tomcat-8.0.24/\"\nexport CATALINA_BASE=\"/home/tomcat/tomcat1\"\n\n[root@serverc init.d]# cp tomcat1 tomcat2\n[root@serverc init.d]# vim tomcat2\nexport CATALINA_HOME=\"/home/tomcat/apache-tomcat-8.0.24/\"\nexport CATALINA_BASE=\"/home/tomcat/tomcat2\"\n\n[root@serverc init.d]# /etc/init.d/tomcat1 start\n[root@serverc init.d]# /etc/init.d/tomcat2 start\n[root@serverc init.d]# netstat -ltunp | grep 8080\ntcp6 0 0 :::8080 :::* LISTEN 5749/jsvc.exec\n[root@serverc init.d]# netstat -ltunp | grep 8081\ntcp6 0 0 :::8081 :::* LISTEN 5782/jsvc.exec\n```","slug":"multi-tomcat-server","updated":"2019-10-21T06:57:43.013Z","photos":[],"link":"","_id":"ck42dyie2004pu9ur600ottdx","content":"<p>tomcattomcattomcat808080818082nginx</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@serverc ~]# /etc/init.d/tomcat stop</span><br><span class=\"line\">[root@serverc ~]# cd /home/tomcat/</span><br><span class=\"line\">[root@serverc tomcat]# mkdir tomcat1 tomcat2</span><br><span class=\"line\">[root@serverc tomcat]# cd apache-tomcat-8.0.24/</span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# cp -rp logs/ temp/ tomcat1.com/ work/ webapps/ conf/ ../tomcat1/</span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# cp -rp logs/ temp/ tomcat2.com/ work/ webapps/ conf/ ../tomcat2/</span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# rm -rf LICENSE NOTICE RELEASE-NOTES RUNNING.txt conf logs tomcat1.com tomcat2.com webapps</span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# ls</span><br><span class=\"line\">bin lib temp work</span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# cd ../tomcat1/</span><br><span class=\"line\">[root@serverc tomcat1]# vim conf/server.xml</span><br><span class=\"line\">&lt;Host name=\"www.tomcat1.com\" appBase=\"tomcat1.com\"</span><br><span class=\"line\">unpackWARs=\"true\" autoDeploy=\"true\"&gt;</span><br><span class=\"line\">&lt;Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"logs\"</span><br><span class=\"line\">prefix=\"localhost_access_log\" suffix=\".txt\"</span><br><span class=\"line\">pattern=\"%h %l %u %t &amp;quot;%r&amp;quot; %s %b\" /&gt;</span><br><span class=\"line\">&lt;/Host&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">[root@serverc tomcat1]# cd ../tomcat2/</span><br><span class=\"line\">[root@serverc tomcat2]# vim conf/server.xml</span><br><span class=\"line\">&lt;Host name=\"www.tomcat2.com\" appBase=\"tomcat2.com\"</span><br><span class=\"line\">unpackWARs=\"true\" autoDeploy=\"true\"&gt;</span><br><span class=\"line\">&lt;Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"logs\"</span><br><span class=\"line\">prefix=\"localhost_access_log\" suffix=\".txt\"</span><br><span class=\"line\">pattern=\"%h %l %u %t &amp;quot;%r&amp;quot; %s %b\" /&gt;</span><br><span class=\"line\">&lt;/Host&gt;</span><br><span class=\"line\">=============================================================================</span><br><span class=\"line\">&lt;Connector port=\"8081\" protocol=\"HTTP/1.1\"</span><br><span class=\"line\">connectionTimeout=\"20000\"</span><br><span class=\"line\">redirectPort=\"8443\" /&gt;</span><br><span class=\"line\">=============================================================================</span><br><span class=\"line\">&lt;Connector port=\"8010\" protocol=\"AJP/1.3\" redirectPort=\"8443\" /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">[root@serverc tomcat2]# cd /etc/init.d/</span><br><span class=\"line\">[root@serverc init.d]# mv tomcat tomcat1</span><br><span class=\"line\">[root@serverc init.d]# vim tomcat1</span><br><span class=\"line\">export CATALINA_HOME=\"/home/tomcat/apache-tomcat-8.0.24/\"</span><br><span class=\"line\">export CATALINA_BASE=\"/home/tomcat/tomcat1\"</span><br><span class=\"line\"></span><br><span class=\"line\">[root@serverc init.d]# cp tomcat1 tomcat2</span><br><span class=\"line\">[root@serverc init.d]# vim tomcat2</span><br><span class=\"line\">export CATALINA_HOME=\"/home/tomcat/apache-tomcat-8.0.24/\"</span><br><span class=\"line\">export CATALINA_BASE=\"/home/tomcat/tomcat2\"</span><br><span class=\"line\"></span><br><span class=\"line\">[root@serverc init.d]# /etc/init.d/tomcat1 start</span><br><span class=\"line\">[root@serverc init.d]# /etc/init.d/tomcat2 start</span><br><span class=\"line\">[root@serverc init.d]# netstat -ltunp | grep 8080</span><br><span class=\"line\">tcp6 0 0 :::8080 :::* LISTEN 5749/jsvc.exec</span><br><span class=\"line\">[root@serverc init.d]# netstat -ltunp | grep 8081</span><br><span class=\"line\">tcp6 0 0 :::8081 :::* LISTEN 5782/jsvc.exec</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>tomcattomcattomcat808080818082nginx</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@serverc ~]# /etc/init.d/tomcat stop</span><br><span class=\"line\">[root@serverc ~]# cd /home/tomcat/</span><br><span class=\"line\">[root@serverc tomcat]# mkdir tomcat1 tomcat2</span><br><span class=\"line\">[root@serverc tomcat]# cd apache-tomcat-8.0.24/</span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# cp -rp logs/ temp/ tomcat1.com/ work/ webapps/ conf/ ../tomcat1/</span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# cp -rp logs/ temp/ tomcat2.com/ work/ webapps/ conf/ ../tomcat2/</span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# rm -rf LICENSE NOTICE RELEASE-NOTES RUNNING.txt conf logs tomcat1.com tomcat2.com webapps</span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# ls</span><br><span class=\"line\">bin lib temp work</span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# cd ../tomcat1/</span><br><span class=\"line\">[root@serverc tomcat1]# vim conf/server.xml</span><br><span class=\"line\">&lt;Host name=\"www.tomcat1.com\" appBase=\"tomcat1.com\"</span><br><span class=\"line\">unpackWARs=\"true\" autoDeploy=\"true\"&gt;</span><br><span class=\"line\">&lt;Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"logs\"</span><br><span class=\"line\">prefix=\"localhost_access_log\" suffix=\".txt\"</span><br><span class=\"line\">pattern=\"%h %l %u %t &amp;quot;%r&amp;quot; %s %b\" /&gt;</span><br><span class=\"line\">&lt;/Host&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">[root@serverc tomcat1]# cd ../tomcat2/</span><br><span class=\"line\">[root@serverc tomcat2]# vim conf/server.xml</span><br><span class=\"line\">&lt;Host name=\"www.tomcat2.com\" appBase=\"tomcat2.com\"</span><br><span class=\"line\">unpackWARs=\"true\" autoDeploy=\"true\"&gt;</span><br><span class=\"line\">&lt;Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"logs\"</span><br><span class=\"line\">prefix=\"localhost_access_log\" suffix=\".txt\"</span><br><span class=\"line\">pattern=\"%h %l %u %t &amp;quot;%r&amp;quot; %s %b\" /&gt;</span><br><span class=\"line\">&lt;/Host&gt;</span><br><span class=\"line\">=============================================================================</span><br><span class=\"line\">&lt;Connector port=\"8081\" protocol=\"HTTP/1.1\"</span><br><span class=\"line\">connectionTimeout=\"20000\"</span><br><span class=\"line\">redirectPort=\"8443\" /&gt;</span><br><span class=\"line\">=============================================================================</span><br><span class=\"line\">&lt;Connector port=\"8010\" protocol=\"AJP/1.3\" redirectPort=\"8443\" /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">[root@serverc tomcat2]# cd /etc/init.d/</span><br><span class=\"line\">[root@serverc init.d]# mv tomcat tomcat1</span><br><span class=\"line\">[root@serverc init.d]# vim tomcat1</span><br><span class=\"line\">export CATALINA_HOME=\"/home/tomcat/apache-tomcat-8.0.24/\"</span><br><span class=\"line\">export CATALINA_BASE=\"/home/tomcat/tomcat1\"</span><br><span class=\"line\"></span><br><span class=\"line\">[root@serverc init.d]# cp tomcat1 tomcat2</span><br><span class=\"line\">[root@serverc init.d]# vim tomcat2</span><br><span class=\"line\">export CATALINA_HOME=\"/home/tomcat/apache-tomcat-8.0.24/\"</span><br><span class=\"line\">export CATALINA_BASE=\"/home/tomcat/tomcat2\"</span><br><span class=\"line\"></span><br><span class=\"line\">[root@serverc init.d]# /etc/init.d/tomcat1 start</span><br><span class=\"line\">[root@serverc init.d]# /etc/init.d/tomcat2 start</span><br><span class=\"line\">[root@serverc init.d]# netstat -ltunp | grep 8080</span><br><span class=\"line\">tcp6 0 0 :::8080 :::* LISTEN 5749/jsvc.exec</span><br><span class=\"line\">[root@serverc init.d]# netstat -ltunp | grep 8081</span><br><span class=\"line\">tcp6 0 0 :::8081 :::* LISTEN 5782/jsvc.exec</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"mysql binlog","published":1,"author":"xiemx","comments":1,"date":"2016-01-30T03:01:53.000Z","_content":"```shell\n[root@localhost mysql]# cat /etc/my.cnf\n[mysqld]\ndatadir=/var/lib/mysql\nlog-bin=/var/log/mysql/binlog   \nsocket=/var/lib/mysql/mysql.sock\nuser=mysql\nlog-slow-queries=/var/log/mysql/slowlog\nsymbolic-links=0\n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n\n[root@localhost mysql]# cd /var/log/mysql\n[root@localhost mysql]# ls\nbinlog.000001  binlog.000002  binlog.000003  binlog.index             \n```\n\n```sql\nmysql> SHOW  GLOBAL VARIABLES LIKE '%log%';\n+-----------------------------------------+----------------------------+\n| Variable_name                           | Value                      |\n+-----------------------------------------+----------------------------+\n| back_log                                | 50                         |\n| binlog_cache_size                       | 32768                      |\n| binlog_direct_non_transactional_updates | OFF                        |\n| binlog_format                           | STATEMENT                  |\n| expire_logs_days                        | 0                          |\n| general_log                             | OFF                        |\n| general_log_file                        | /var/run/mysqld/mysqld.log |\n| innodb_flush_log_at_trx_commit          | 1                          |\n| innodb_locks_unsafe_for_binlog          | OFF                        |\n| innodb_log_buffer_size                  | 1048576                    |\n| innodb_log_file_size                    | 5242880                    |\n| innodb_log_files_in_group               | 2                          |\n| innodb_log_group_home_dir               | ./                         |\n| innodb_mirrored_log_groups              | 1                          |\n| log                                     | OFF                        |\n| log_bin                                 | ON                         |    \n| log_bin_trust_function_creators         | OFF                        |\n| log_bin_trust_routine_creators          | OFF                        |\n| log_error                               | /var/log/mysqld.log        |   \n| log_output                              | FILE                       |\n| log_queries_not_using_indexes           | OFF                        |\n| log_slave_updates                       | OFF                        |\n| log_slow_queries                        | ON                         |\n| log_warnings                            | 1                          |\n| max_binlog_cache_size                   | 18446744073709547520       |\n| max_binlog_size                         | 1073741824                 |\n| max_relay_log_size                      | 0                          |\n| relay_log                               |                            |   \n| relay_log_index                         |                            |\n| relay_log_info_file                     | relay-log.info             |\n| relay_log_purge                         | ON                         |\n| relay_log_space_limit                   | 0                          |\n| slow_query_log                          | ON                         |   \n| slow_query_log_file                     | /var/log/mysql/slowlog     |\n| sql_log_bin                             | ON                         |\n| sql_log_off                             | OFF                        |\n| sql_log_update                          | ON                         |\n| sync_binlog                             | 0                          |\n+-----------------------------------------+----------------------------+\n38 rows in set (0.00 sec)\n\n```\n\ncatmysqlbinlog\n```sql\n[root@localhost mysql]# mysqlbinlog binlog.000003\n/*!40019 SET @@session.max_insert_delayed_threads=0*/;\n/*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/;\nDELIMITER /*!*/;\n# at 4\n#160110 16:41:49 server id 1  end_log_pos 106     Start: binlog v 4, server v 5.1.73-log created 160110 16:41:49 at startup\n# Warning: this binlog is either in use or was not closed properly.\nROLLBACK/*!*/;\nBINLOG '\nTRmSVg8BAAAAZgAAAGoAAAABAAQANS4xLjczLWxvZwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAABNGZJWEzgNAAgAEgAEBAQEEgAAUwAEGggAAAAICAgC\n'/*!*/;\n# at 106                 position\n#160110 17:26:15 server id 1  end_log_pos 191     Query    thread_id=3    exec_time=0    error_code=0    1601102016-01-10\nSET TIMESTAMP=1452417975/*!*/;\nSET @@session.pseudo_thread_id=3/*!*/;\nSET @@session.foreign_key_checks=1, @@session.sql_auto_is_null=1, @@session.unique_checks=1, @@session.autocommit=1/*!*/;\nSET @@session.sql_mode=0/*!*/;\nSET @@session.auto_increment_increment=1, @@session.auto_increment_offset=1/*!*/;\n/*!\\C latin1 *//*!*/;\nSET @@session.character_set_client=8,@@session.collation_connection=8,@@session.collation_server=8/*!*/;\nSET @@session.lc_time_names=0/*!*/;\nSET @@session.collation_database=DEFAULT/*!*/;\ncreate database xiemx     \n/*!*/;\nDELIMITER ;\n# End of log file\nROLLBACK /* added by mysqlbinlog */;\n/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/;\n```\n\n\n```\n[root @server1 mysql ] #mysqlbinlog --start-date=\"2015-06-18 9:55:00\" --stop-date=\"2015-06-18 10:05:00\" /var/log/mysql/binlog.000006 | mysql -uroot -p\n\nbinlog.0000062015-06-18 9:55:002015-06-18 10:05:00\n\n[root @server1 mysql ] #mysqlbinlog --stop-position=\"368312\" /var/log/mysql/binlog.000006 | mysql -u root -p  binlog.000006368312position\n\n[root @server1 mysql ] #mysqlbinlog --start-position=\"368315\" /var/log/mysql/bin.000006 | mysql -u root -p     binlog.000006368315position\n```\npositionposition flush log\n\n ","source":"_posts/mysql-binlog-recovery-data.md","raw":"---\nlayout: post\ntitle: mysql binlog\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-01-30 11:01:53\ntags: [ mysql, binlog ]\ncategories:\n    - mysql\n---\n```shell\n[root@localhost mysql]# cat /etc/my.cnf\n[mysqld]\ndatadir=/var/lib/mysql\nlog-bin=/var/log/mysql/binlog   \nsocket=/var/lib/mysql/mysql.sock\nuser=mysql\nlog-slow-queries=/var/log/mysql/slowlog\nsymbolic-links=0\n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n\n[root@localhost mysql]# cd /var/log/mysql\n[root@localhost mysql]# ls\nbinlog.000001  binlog.000002  binlog.000003  binlog.index             \n```\n\n```sql\nmysql> SHOW  GLOBAL VARIABLES LIKE '%log%';\n+-----------------------------------------+----------------------------+\n| Variable_name                           | Value                      |\n+-----------------------------------------+----------------------------+\n| back_log                                | 50                         |\n| binlog_cache_size                       | 32768                      |\n| binlog_direct_non_transactional_updates | OFF                        |\n| binlog_format                           | STATEMENT                  |\n| expire_logs_days                        | 0                          |\n| general_log                             | OFF                        |\n| general_log_file                        | /var/run/mysqld/mysqld.log |\n| innodb_flush_log_at_trx_commit          | 1                          |\n| innodb_locks_unsafe_for_binlog          | OFF                        |\n| innodb_log_buffer_size                  | 1048576                    |\n| innodb_log_file_size                    | 5242880                    |\n| innodb_log_files_in_group               | 2                          |\n| innodb_log_group_home_dir               | ./                         |\n| innodb_mirrored_log_groups              | 1                          |\n| log                                     | OFF                        |\n| log_bin                                 | ON                         |    \n| log_bin_trust_function_creators         | OFF                        |\n| log_bin_trust_routine_creators          | OFF                        |\n| log_error                               | /var/log/mysqld.log        |   \n| log_output                              | FILE                       |\n| log_queries_not_using_indexes           | OFF                        |\n| log_slave_updates                       | OFF                        |\n| log_slow_queries                        | ON                         |\n| log_warnings                            | 1                          |\n| max_binlog_cache_size                   | 18446744073709547520       |\n| max_binlog_size                         | 1073741824                 |\n| max_relay_log_size                      | 0                          |\n| relay_log                               |                            |   \n| relay_log_index                         |                            |\n| relay_log_info_file                     | relay-log.info             |\n| relay_log_purge                         | ON                         |\n| relay_log_space_limit                   | 0                          |\n| slow_query_log                          | ON                         |   \n| slow_query_log_file                     | /var/log/mysql/slowlog     |\n| sql_log_bin                             | ON                         |\n| sql_log_off                             | OFF                        |\n| sql_log_update                          | ON                         |\n| sync_binlog                             | 0                          |\n+-----------------------------------------+----------------------------+\n38 rows in set (0.00 sec)\n\n```\n\ncatmysqlbinlog\n```sql\n[root@localhost mysql]# mysqlbinlog binlog.000003\n/*!40019 SET @@session.max_insert_delayed_threads=0*/;\n/*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/;\nDELIMITER /*!*/;\n# at 4\n#160110 16:41:49 server id 1  end_log_pos 106     Start: binlog v 4, server v 5.1.73-log created 160110 16:41:49 at startup\n# Warning: this binlog is either in use or was not closed properly.\nROLLBACK/*!*/;\nBINLOG '\nTRmSVg8BAAAAZgAAAGoAAAABAAQANS4xLjczLWxvZwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAABNGZJWEzgNAAgAEgAEBAQEEgAAUwAEGggAAAAICAgC\n'/*!*/;\n# at 106                 position\n#160110 17:26:15 server id 1  end_log_pos 191     Query    thread_id=3    exec_time=0    error_code=0    1601102016-01-10\nSET TIMESTAMP=1452417975/*!*/;\nSET @@session.pseudo_thread_id=3/*!*/;\nSET @@session.foreign_key_checks=1, @@session.sql_auto_is_null=1, @@session.unique_checks=1, @@session.autocommit=1/*!*/;\nSET @@session.sql_mode=0/*!*/;\nSET @@session.auto_increment_increment=1, @@session.auto_increment_offset=1/*!*/;\n/*!\\C latin1 *//*!*/;\nSET @@session.character_set_client=8,@@session.collation_connection=8,@@session.collation_server=8/*!*/;\nSET @@session.lc_time_names=0/*!*/;\nSET @@session.collation_database=DEFAULT/*!*/;\ncreate database xiemx     \n/*!*/;\nDELIMITER ;\n# End of log file\nROLLBACK /* added by mysqlbinlog */;\n/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/;\n```\n\n\n```\n[root @server1 mysql ] #mysqlbinlog --start-date=\"2015-06-18 9:55:00\" --stop-date=\"2015-06-18 10:05:00\" /var/log/mysql/binlog.000006 | mysql -uroot -p\n\nbinlog.0000062015-06-18 9:55:002015-06-18 10:05:00\n\n[root @server1 mysql ] #mysqlbinlog --stop-position=\"368312\" /var/log/mysql/binlog.000006 | mysql -u root -p  binlog.000006368312position\n\n[root @server1 mysql ] #mysqlbinlog --start-position=\"368315\" /var/log/mysql/bin.000006 | mysql -u root -p     binlog.000006368315position\n```\npositionposition flush log\n\n ","slug":"mysql-binlog-recovery-data","updated":"2019-10-21T06:57:42.910Z","photos":[],"link":"","_id":"ck42dyie3004tu9ure1sybbb2","content":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost mysql]# cat /etc/my.cnf</span><br><span class=\"line\">[mysqld]</span><br><span class=\"line\">datadir=/var/lib/mysql</span><br><span class=\"line\">log-bin=/var/log/mysql/binlog   </span><br><span class=\"line\">socket=/var/lib/mysql/mysql.sock</span><br><span class=\"line\">user=mysql</span><br><span class=\"line\">log-slow-queries=/var/log/mysql/slowlog</span><br><span class=\"line\">symbolic-links=0</span><br><span class=\"line\">[mysqld_safe]</span><br><span class=\"line\">log-error=/var/log/mysqld.log</span><br><span class=\"line\">pid-file=/var/run/mysqld/mysqld.pid</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost mysql]# cd /var/log/mysql</span><br><span class=\"line\">[root@localhost mysql]# ls</span><br><span class=\"line\">binlog.000001  binlog.000002  binlog.000003  binlog.index             </span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; SHOW  GLOBAL VARIABLES LIKE '%log%';</span><br><span class=\"line\">+<span class=\"comment\">-----------------------------------------+----------------------------+</span></span><br><span class=\"line\">| Variable_name                           | Value                      |</span><br><span class=\"line\">+<span class=\"comment\">-----------------------------------------+----------------------------+</span></span><br><span class=\"line\">| back_log                                | 50                         |</span><br><span class=\"line\">| binlog_cache_size                       | 32768                      |</span><br><span class=\"line\">| binlog_direct_non_transactional_updates | OFF                        |</span><br><span class=\"line\">| binlog_format                           | STATEMENT                  |</span><br><span class=\"line\">| expire_logs_days                        | 0                          |</span><br><span class=\"line\">| general_log                             | OFF                        |</span><br><span class=\"line\">| general_log_file                        | /var/run/mysqld/mysqld.log |</span><br><span class=\"line\">| innodb_flush_log_at_trx_commit          | 1                          |</span><br><span class=\"line\">| innodb_locks_unsafe_for_binlog          | OFF                        |</span><br><span class=\"line\">| innodb_log_buffer_size                  | 1048576                    |</span><br><span class=\"line\">| innodb_log_file_size                    | 5242880                    |</span><br><span class=\"line\">| innodb_log_files_in_group               | 2                          |</span><br><span class=\"line\">| innodb_log_group_home_dir               | ./                         |</span><br><span class=\"line\">| innodb_mirrored_log_groups              | 1                          |</span><br><span class=\"line\">| log                                     | OFF                        |</span><br><span class=\"line\">| log_bin                                 | ON                         |    </span><br><span class=\"line\">| log_bin_trust_function_creators         | OFF                        |</span><br><span class=\"line\">| log_bin_trust_routine_creators          | OFF                        |</span><br><span class=\"line\">| log_error                               | /var/log/mysqld.log        |   </span><br><span class=\"line\">| log_output                              | FILE                       |</span><br><span class=\"line\">| log_queries_not_using_indexes           | OFF                        |</span><br><span class=\"line\">| log_slave_updates                       | OFF                        |</span><br><span class=\"line\">| log_slow_queries                        | ON                         |</span><br><span class=\"line\">| log_warnings                            | 1                          |</span><br><span class=\"line\">| max_binlog_cache_size                   | 18446744073709547520       |</span><br><span class=\"line\">| max_binlog_size                         | 1073741824                 |</span><br><span class=\"line\">| max_relay_log_size                      | 0                          |</span><br><span class=\"line\">| relay_log                               |                            |   </span><br><span class=\"line\">| relay_log_index                         |                            |</span><br><span class=\"line\">| relay_log_info_file                     | relay-log.info             |</span><br><span class=\"line\">| relay_log_purge                         | ON                         |</span><br><span class=\"line\">| relay_log_space_limit                   | 0                          |</span><br><span class=\"line\">| slow_query_log                          | ON                         |   </span><br><span class=\"line\">| slow_query_log_file                     | /var/log/mysql/slowlog     |</span><br><span class=\"line\">| sql_log_bin                             | ON                         |</span><br><span class=\"line\">| sql_log_off                             | OFF                        |</span><br><span class=\"line\">| sql_log_update                          | ON                         |</span><br><span class=\"line\">| sync_binlog                             | 0                          |</span><br><span class=\"line\">+<span class=\"comment\">-----------------------------------------+----------------------------+</span></span><br><span class=\"line\">38 rows in <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br></pre></td></tr></table></figure>\n\n<p>catmysqlbinlog</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost mysql]<span class=\"comment\"># mysqlbinlog binlog.000003</span></span><br><span class=\"line\"><span class=\"comment\">/*!40019 SET @@session.max_insert_delayed_threads=0*/</span>;</span><br><span class=\"line\"><span class=\"comment\">/*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/</span>;</span><br><span class=\"line\">DELIMITER <span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"comment\"># at 4</span></span><br><span class=\"line\"><span class=\"comment\">#160110 16:41:49 server id 1  end_log_pos 106     Start: binlog v 4, server v 5.1.73-log created 160110 16:41:49 at startup</span></span><br><span class=\"line\"><span class=\"comment\"># Warning: this binlog is either in use or was not closed properly.</span></span><br><span class=\"line\"><span class=\"keyword\">ROLLBACK</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\">BINLOG '</span><br><span class=\"line\">TRmSVg8BAAAAZgAAAGoAAAABAAQANS4xLjczLWxvZwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</span><br><span class=\"line\">AAAAAAAAAAAAAAAAAABNGZJWEzgNAAgAEgAEBAQEEgAAUwAEGggAAAAICAgC</span><br><span class=\"line\">'<span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"comment\"># at 106                 position</span></span><br><span class=\"line\"><span class=\"comment\">#160110 17:26:15 server id 1  end_log_pos 191     Query    thread_id=3    exec_time=0    error_code=0    1601102016-01-10</span></span><br><span class=\"line\"><span class=\"keyword\">SET</span> <span class=\"built_in\">TIMESTAMP</span>=<span class=\"number\">1452417975</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">SET</span> @@session.pseudo_thread_id=<span class=\"number\">3</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">SET</span> @@session.foreign_key_checks=<span class=\"number\">1</span>, @@session.sql_auto_is_null=<span class=\"number\">1</span>, @@session.unique_checks=<span class=\"number\">1</span>, @@session.autocommit=<span class=\"number\">1</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">SET</span> @@session.sql_mode=<span class=\"number\">0</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">SET</span> @@session.auto_increment_increment=<span class=\"number\">1</span>, @@session.auto_increment_offset=<span class=\"number\">1</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"comment\">/*!\\C latin1 */</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">SET</span> @@session.character_set_client=<span class=\"number\">8</span>,@@session.collation_connection=<span class=\"number\">8</span>,@@session.collation_server=<span class=\"number\">8</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">SET</span> @@session.lc_time_names=<span class=\"number\">0</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">SET</span> @@session.collation_database=<span class=\"keyword\">DEFAULT</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> xiemx     </span><br><span class=\"line\"><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\">DELIMITER ;</span><br><span class=\"line\"><span class=\"comment\"># End of log file</span></span><br><span class=\"line\"><span class=\"keyword\">ROLLBACK</span> <span class=\"comment\">/* added by mysqlbinlog */</span>;</span><br><span class=\"line\"><span class=\"comment\">/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/</span>;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root @server1 mysql ] #mysqlbinlog --start-date=<span class=\"string\">\"2015-06-18 9:55:00\"</span> --stop-date=<span class=\"string\">\"2015-06-18 10:05:00\"</span> /var/log/mysql/binlog<span class=\"number\">.000006</span> | mysql -uroot -p</span><br><span class=\"line\"></span><br><span class=\"line\">binlog<span class=\"number\">.000006</span><span class=\"number\">2015</span><span class=\"number\">-06</span><span class=\"number\">-18</span> <span class=\"number\">9</span>:<span class=\"number\">55</span>:<span class=\"number\">00</span><span class=\"number\">2015</span><span class=\"number\">-06</span><span class=\"number\">-18</span> <span class=\"number\">10</span>:<span class=\"number\">05</span>:<span class=\"number\">00</span></span><br><span class=\"line\"></span><br><span class=\"line\">[root @server1 mysql ] #mysqlbinlog --stop-position=<span class=\"string\">\"368312\"</span> /var/log/mysql/binlog<span class=\"number\">.000006</span> | mysql -u root -p  binlog<span class=\"number\">.000006</span><span class=\"number\">368312</span>position</span><br><span class=\"line\"></span><br><span class=\"line\">[root @server1 mysql ] #mysqlbinlog --start-position=<span class=\"string\">\"368315\"</span> /var/log/mysql/bin<span class=\"number\">.000006</span> | mysql -u root -p     binlog<span class=\"number\">.000006</span><span class=\"number\">368315</span>position</span><br></pre></td></tr></table></figure>\n\n<p>positionposition flush log</p>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost mysql]# cat /etc/my.cnf</span><br><span class=\"line\">[mysqld]</span><br><span class=\"line\">datadir=/var/lib/mysql</span><br><span class=\"line\">log-bin=/var/log/mysql/binlog   </span><br><span class=\"line\">socket=/var/lib/mysql/mysql.sock</span><br><span class=\"line\">user=mysql</span><br><span class=\"line\">log-slow-queries=/var/log/mysql/slowlog</span><br><span class=\"line\">symbolic-links=0</span><br><span class=\"line\">[mysqld_safe]</span><br><span class=\"line\">log-error=/var/log/mysqld.log</span><br><span class=\"line\">pid-file=/var/run/mysqld/mysqld.pid</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost mysql]# cd /var/log/mysql</span><br><span class=\"line\">[root@localhost mysql]# ls</span><br><span class=\"line\">binlog.000001  binlog.000002  binlog.000003  binlog.index             </span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; SHOW  GLOBAL VARIABLES LIKE '%log%';</span><br><span class=\"line\">+<span class=\"comment\">-----------------------------------------+----------------------------+</span></span><br><span class=\"line\">| Variable_name                           | Value                      |</span><br><span class=\"line\">+<span class=\"comment\">-----------------------------------------+----------------------------+</span></span><br><span class=\"line\">| back_log                                | 50                         |</span><br><span class=\"line\">| binlog_cache_size                       | 32768                      |</span><br><span class=\"line\">| binlog_direct_non_transactional_updates | OFF                        |</span><br><span class=\"line\">| binlog_format                           | STATEMENT                  |</span><br><span class=\"line\">| expire_logs_days                        | 0                          |</span><br><span class=\"line\">| general_log                             | OFF                        |</span><br><span class=\"line\">| general_log_file                        | /var/run/mysqld/mysqld.log |</span><br><span class=\"line\">| innodb_flush_log_at_trx_commit          | 1                          |</span><br><span class=\"line\">| innodb_locks_unsafe_for_binlog          | OFF                        |</span><br><span class=\"line\">| innodb_log_buffer_size                  | 1048576                    |</span><br><span class=\"line\">| innodb_log_file_size                    | 5242880                    |</span><br><span class=\"line\">| innodb_log_files_in_group               | 2                          |</span><br><span class=\"line\">| innodb_log_group_home_dir               | ./                         |</span><br><span class=\"line\">| innodb_mirrored_log_groups              | 1                          |</span><br><span class=\"line\">| log                                     | OFF                        |</span><br><span class=\"line\">| log_bin                                 | ON                         |    </span><br><span class=\"line\">| log_bin_trust_function_creators         | OFF                        |</span><br><span class=\"line\">| log_bin_trust_routine_creators          | OFF                        |</span><br><span class=\"line\">| log_error                               | /var/log/mysqld.log        |   </span><br><span class=\"line\">| log_output                              | FILE                       |</span><br><span class=\"line\">| log_queries_not_using_indexes           | OFF                        |</span><br><span class=\"line\">| log_slave_updates                       | OFF                        |</span><br><span class=\"line\">| log_slow_queries                        | ON                         |</span><br><span class=\"line\">| log_warnings                            | 1                          |</span><br><span class=\"line\">| max_binlog_cache_size                   | 18446744073709547520       |</span><br><span class=\"line\">| max_binlog_size                         | 1073741824                 |</span><br><span class=\"line\">| max_relay_log_size                      | 0                          |</span><br><span class=\"line\">| relay_log                               |                            |   </span><br><span class=\"line\">| relay_log_index                         |                            |</span><br><span class=\"line\">| relay_log_info_file                     | relay-log.info             |</span><br><span class=\"line\">| relay_log_purge                         | ON                         |</span><br><span class=\"line\">| relay_log_space_limit                   | 0                          |</span><br><span class=\"line\">| slow_query_log                          | ON                         |   </span><br><span class=\"line\">| slow_query_log_file                     | /var/log/mysql/slowlog     |</span><br><span class=\"line\">| sql_log_bin                             | ON                         |</span><br><span class=\"line\">| sql_log_off                             | OFF                        |</span><br><span class=\"line\">| sql_log_update                          | ON                         |</span><br><span class=\"line\">| sync_binlog                             | 0                          |</span><br><span class=\"line\">+<span class=\"comment\">-----------------------------------------+----------------------------+</span></span><br><span class=\"line\">38 rows in <span class=\"keyword\">set</span> (<span class=\"number\">0.00</span> sec)</span><br></pre></td></tr></table></figure>\n\n<p>catmysqlbinlog</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost mysql]<span class=\"comment\"># mysqlbinlog binlog.000003</span></span><br><span class=\"line\"><span class=\"comment\">/*!40019 SET @@session.max_insert_delayed_threads=0*/</span>;</span><br><span class=\"line\"><span class=\"comment\">/*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/</span>;</span><br><span class=\"line\">DELIMITER <span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"comment\"># at 4</span></span><br><span class=\"line\"><span class=\"comment\">#160110 16:41:49 server id 1  end_log_pos 106     Start: binlog v 4, server v 5.1.73-log created 160110 16:41:49 at startup</span></span><br><span class=\"line\"><span class=\"comment\"># Warning: this binlog is either in use or was not closed properly.</span></span><br><span class=\"line\"><span class=\"keyword\">ROLLBACK</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\">BINLOG '</span><br><span class=\"line\">TRmSVg8BAAAAZgAAAGoAAAABAAQANS4xLjczLWxvZwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</span><br><span class=\"line\">AAAAAAAAAAAAAAAAAABNGZJWEzgNAAgAEgAEBAQEEgAAUwAEGggAAAAICAgC</span><br><span class=\"line\">'<span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"comment\"># at 106                 position</span></span><br><span class=\"line\"><span class=\"comment\">#160110 17:26:15 server id 1  end_log_pos 191     Query    thread_id=3    exec_time=0    error_code=0    1601102016-01-10</span></span><br><span class=\"line\"><span class=\"keyword\">SET</span> <span class=\"built_in\">TIMESTAMP</span>=<span class=\"number\">1452417975</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">SET</span> @@session.pseudo_thread_id=<span class=\"number\">3</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">SET</span> @@session.foreign_key_checks=<span class=\"number\">1</span>, @@session.sql_auto_is_null=<span class=\"number\">1</span>, @@session.unique_checks=<span class=\"number\">1</span>, @@session.autocommit=<span class=\"number\">1</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">SET</span> @@session.sql_mode=<span class=\"number\">0</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">SET</span> @@session.auto_increment_increment=<span class=\"number\">1</span>, @@session.auto_increment_offset=<span class=\"number\">1</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"comment\">/*!\\C latin1 */</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">SET</span> @@session.character_set_client=<span class=\"number\">8</span>,@@session.collation_connection=<span class=\"number\">8</span>,@@session.collation_server=<span class=\"number\">8</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">SET</span> @@session.lc_time_names=<span class=\"number\">0</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">SET</span> @@session.collation_database=<span class=\"keyword\">DEFAULT</span><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> xiemx     </span><br><span class=\"line\"><span class=\"comment\">/*!*/</span>;</span><br><span class=\"line\">DELIMITER ;</span><br><span class=\"line\"><span class=\"comment\"># End of log file</span></span><br><span class=\"line\"><span class=\"keyword\">ROLLBACK</span> <span class=\"comment\">/* added by mysqlbinlog */</span>;</span><br><span class=\"line\"><span class=\"comment\">/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/</span>;</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root @server1 mysql ] #mysqlbinlog --start-date=<span class=\"string\">\"2015-06-18 9:55:00\"</span> --stop-date=<span class=\"string\">\"2015-06-18 10:05:00\"</span> /var/log/mysql/binlog<span class=\"number\">.000006</span> | mysql -uroot -p</span><br><span class=\"line\"></span><br><span class=\"line\">binlog<span class=\"number\">.000006</span><span class=\"number\">2015</span><span class=\"number\">-06</span><span class=\"number\">-18</span> <span class=\"number\">9</span>:<span class=\"number\">55</span>:<span class=\"number\">00</span><span class=\"number\">2015</span><span class=\"number\">-06</span><span class=\"number\">-18</span> <span class=\"number\">10</span>:<span class=\"number\">05</span>:<span class=\"number\">00</span></span><br><span class=\"line\"></span><br><span class=\"line\">[root @server1 mysql ] #mysqlbinlog --stop-position=<span class=\"string\">\"368312\"</span> /var/log/mysql/binlog<span class=\"number\">.000006</span> | mysql -u root -p  binlog<span class=\"number\">.000006</span><span class=\"number\">368312</span>position</span><br><span class=\"line\"></span><br><span class=\"line\">[root @server1 mysql ] #mysqlbinlog --start-position=<span class=\"string\">\"368315\"</span> /var/log/mysql/bin<span class=\"number\">.000006</span> | mysql -u root -p     binlog<span class=\"number\">.000006</span><span class=\"number\">368315</span>position</span><br></pre></td></tr></table></figure>\n\n<p>positionposition flush log</p>\n"},{"layout":"post","title":"mysql","published":1,"author":"xiemx","comments":1,"date":"2016-08-01T18:08:56.000Z","_content":"1\n```sql\nshow OPEN TABLES where In_use > 0;\n```\n2\n```\nshow processlist ID\n```\n3\n```\nkillid\n```\nother:\n```\n\nSELECT * FROMINFORMATION_SCHEMA.INNODB_LOCKS;\n\n\nSELECT * FROMINFORMATION_SCHEMA.INNODB_LOCK_WAITS;\n```","source":"_posts/mysql-lock-table.md","raw":"---\nlayout: post\ntitle: mysql\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-08-02 02:08:56\ntags: [ mysql, debug, database ]\ncategories:\n    - mysql\n# permalink: '/2016/08/02/mysql%e9%94%81%e8%a1%a8%e8%a7%a3%e5%86%b3'\n---\n1\n```sql\nshow OPEN TABLES where In_use > 0;\n```\n2\n```\nshow processlist ID\n```\n3\n```\nkillid\n```\nother:\n```\n\nSELECT * FROMINFORMATION_SCHEMA.INNODB_LOCKS;\n\n\nSELECT * FROMINFORMATION_SCHEMA.INNODB_LOCK_WAITS;\n```","slug":"mysql-lock-table","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyie5004xu9ur4n2tr699","content":"<p>1</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">OPEN</span> <span class=\"keyword\">TABLES</span> <span class=\"keyword\">where</span> In_use &gt; <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n\n<p>2</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">processlist</span> <span class=\"keyword\">ID</span></span><br></pre></td></tr></table></figure>\n\n<p>3</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">kill</span><span class=\"keyword\">id</span></span><br></pre></td></tr></table></figure>\n\n<p>other:</p>\n<figure class=\"highlight n1ql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * FROMINFORMATION_SCHEMA.INNODB_LOCKS;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * FROMINFORMATION_SCHEMA.INNODB_LOCK_WAITS;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>1</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">OPEN</span> <span class=\"keyword\">TABLES</span> <span class=\"keyword\">where</span> In_use &gt; <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n\n<p>2</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">processlist</span> <span class=\"keyword\">ID</span></span><br></pre></td></tr></table></figure>\n\n<p>3</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">kill</span><span class=\"keyword\">id</span></span><br></pre></td></tr></table></figure>\n\n<p>other:</p>\n<figure class=\"highlight n1ql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * FROMINFORMATION_SCHEMA.INNODB_LOCKS;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">SELECT</span> * FROMINFORMATION_SCHEMA.INNODB_LOCK_WAITS;</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"mysql master-master","published":1,"author":"xiemx","comments":1,"date":"2016-01-31T04:01:23.000Z","_content":"\nsalvemasterserveramasterslaveserverbmasterslaveserveraserverbserverbservera\n\n\n\n* serveraserverbserverachange masterserverb\n\n* serverbserveraserverbchange masterserveraserverbmaster`log_slave_update=1`\n\n(servera-serverb)(serverb-servera)(servera-serverb)slave(serverb)(serverb-servera)serverbserveragrant(servera-serverb)master(servera)salve(serverb)\n\n#### \n\n1. server-idserverb\n```shell\n[root@localhost mysql]# cat /etc/my.cnf\n[mysqld]\nserver-id=1            master/slave\ndatadir=/var/lib/mysql\nlog-bin=/var/log/mysql/binlog\nsocket=/var/lib/mysql/mysql.sock\nlog_slave_update=1              serverb\nlog-slow-queries=/var/log/mysql/slowlog\nsymbolic-links=0\n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n```\n2. servera\n```sql\nmysql>grant   replication  slave on *.*  to xiemx1@172.25.30.% identified by '123123';flush privileges;\n```\n3. serverbmaster\n```\nmysql>change master to master_host='172.25.30.10',master_user='xiemx1',master_password='123123',master_log_file=\"binlog.000003\"master_log_pos=245;\n\nmysql>slave start\n\nmysql>show slave status\\G;iosqlyes\n```\n4. servera\n```\nmysql>grant   replication  slave on *.*  to xiemx2@172.25.30.% identified by '123123';flush privileges;\n```\n5. serveramaster\n```\nmysql>change master to master_host='172.25.30.11',master_user='xiemx2',master_password='123123',master_log_file=\"binlog.000001\"master_log_pos=245;\n\nmysql>slave start\n\nmysql>show slave status\\G;iosqlyes\n```\n6. serveraserverbserverbservera\n\n`show master status\\G;` position","source":"_posts/mysql-master-master.md","raw":"---\nlayout: post\ntitle: mysql master-master\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-01-31 12:01:23\ntags: [ mysql ]\ncategories:\n    - mysql\n---\n\nsalvemasterserveramasterslaveserverbmasterslaveserveraserverbserverbservera\n\n\n\n* serveraserverbserverachange masterserverb\n\n* serverbserveraserverbchange masterserveraserverbmaster`log_slave_update=1`\n\n(servera-serverb)(serverb-servera)(servera-serverb)slave(serverb)(serverb-servera)serverbserveragrant(servera-serverb)master(servera)salve(serverb)\n\n#### \n\n1. server-idserverb\n```shell\n[root@localhost mysql]# cat /etc/my.cnf\n[mysqld]\nserver-id=1            master/slave\ndatadir=/var/lib/mysql\nlog-bin=/var/log/mysql/binlog\nsocket=/var/lib/mysql/mysql.sock\nlog_slave_update=1              serverb\nlog-slow-queries=/var/log/mysql/slowlog\nsymbolic-links=0\n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n```\n2. servera\n```sql\nmysql>grant   replication  slave on *.*  to xiemx1@172.25.30.% identified by '123123';flush privileges;\n```\n3. serverbmaster\n```\nmysql>change master to master_host='172.25.30.10',master_user='xiemx1',master_password='123123',master_log_file=\"binlog.000003\"master_log_pos=245;\n\nmysql>slave start\n\nmysql>show slave status\\G;iosqlyes\n```\n4. servera\n```\nmysql>grant   replication  slave on *.*  to xiemx2@172.25.30.% identified by '123123';flush privileges;\n```\n5. serveramaster\n```\nmysql>change master to master_host='172.25.30.11',master_user='xiemx2',master_password='123123',master_log_file=\"binlog.000001\"master_log_pos=245;\n\nmysql>slave start\n\nmysql>show slave status\\G;iosqlyes\n```\n6. serveraserverbserverbservera\n\n`show master status\\G;` position","slug":"mysql-master-master","updated":"2019-10-21T06:57:43.060Z","photos":[],"link":"","_id":"ck42dyie60051u9uray962bxi","content":"<p>salvemasterserveramasterslaveserverbmasterslaveserveraserverbserverbservera</p>\n<p></p>\n<ul>\n<li><p>serveraserverbserverachange masterserverb</p>\n</li>\n<li><p>serverbserveraserverbchange masterserveraserverbmaster<code>log_slave_update=1</code></p>\n</li>\n</ul>\n<p>(servera-serverb)(serverb-servera)(servera-serverb)slave(serverb)(serverb-servera)serverbserveragrant(servera-serverb)master(servera)salve(serverb)</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol>\n<li><p>server-idserverb</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost mysql]# cat /etc/my.cnf</span><br><span class=\"line\">[mysqld]</span><br><span class=\"line\">server-id=1            master/slave</span><br><span class=\"line\">datadir=/var/lib/mysql</span><br><span class=\"line\">log-bin=/var/log/mysql/binlog</span><br><span class=\"line\">socket=/var/lib/mysql/mysql.sock</span><br><span class=\"line\">log_slave_update=1              serverb</span><br><span class=\"line\">log-slow-queries=/var/log/mysql/slowlog</span><br><span class=\"line\">symbolic-links=0</span><br><span class=\"line\">[mysqld_safe]</span><br><span class=\"line\">log-error=/var/log/mysqld.log</span><br><span class=\"line\">pid-file=/var/run/mysqld/mysqld.pid</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>servera</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt;grant   replication  slave on *.*  to xiemx1@172.25.30.% identified by '123123';flush privileges;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>serverbmaster</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt;change master <span class=\"keyword\">to</span> master_host=<span class=\"string\">'172.25.30.10'</span>,master_user=<span class=\"string\">'xiemx1'</span>,master_password=<span class=\"string\">'123123'</span>,master_log_file=\"binlog.000003\"master_log_pos=<span class=\"number\">245</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;slave <span class=\"keyword\">start</span></span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;<span class=\"keyword\">show</span> slave status\\G;io<span class=\"keyword\">sql</span>yes</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>servera</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt;<span class=\"keyword\">grant</span>   <span class=\"keyword\">replication</span>  slave <span class=\"keyword\">on</span> *.*  <span class=\"keyword\">to</span> xiemx2@<span class=\"number\">172.25</span><span class=\"number\">.30</span>.% identified <span class=\"keyword\">by</span> <span class=\"string\">'123123'</span>;flush <span class=\"keyword\">privileges</span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>serveramaster</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt;change master <span class=\"keyword\">to</span> master_host=<span class=\"string\">'172.25.30.11'</span>,master_user=<span class=\"string\">'xiemx2'</span>,master_password=<span class=\"string\">'123123'</span>,master_log_file=\"binlog.000001\"master_log_pos=<span class=\"number\">245</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;slave <span class=\"keyword\">start</span></span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;<span class=\"keyword\">show</span> slave status\\G;io<span class=\"keyword\">sql</span>yes</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>serveraserverbserverbservera<br><br><code>show master status\\G;</code> position</p>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<p>salvemasterserveramasterslaveserverbmasterslaveserveraserverbserverbservera</p>\n<p></p>\n<ul>\n<li><p>serveraserverbserverachange masterserverb</p>\n</li>\n<li><p>serverbserveraserverbchange masterserveraserverbmaster<code>log_slave_update=1</code></p>\n</li>\n</ul>\n<p>(servera-serverb)(serverb-servera)(servera-serverb)slave(serverb)(serverb-servera)serverbserveragrant(servera-serverb)master(servera)salve(serverb)</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol>\n<li><p>server-idserverb</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost mysql]# cat /etc/my.cnf</span><br><span class=\"line\">[mysqld]</span><br><span class=\"line\">server-id=1            master/slave</span><br><span class=\"line\">datadir=/var/lib/mysql</span><br><span class=\"line\">log-bin=/var/log/mysql/binlog</span><br><span class=\"line\">socket=/var/lib/mysql/mysql.sock</span><br><span class=\"line\">log_slave_update=1              serverb</span><br><span class=\"line\">log-slow-queries=/var/log/mysql/slowlog</span><br><span class=\"line\">symbolic-links=0</span><br><span class=\"line\">[mysqld_safe]</span><br><span class=\"line\">log-error=/var/log/mysqld.log</span><br><span class=\"line\">pid-file=/var/run/mysqld/mysqld.pid</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>servera</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt;grant   replication  slave on *.*  to xiemx1@172.25.30.% identified by '123123';flush privileges;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>serverbmaster</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt;change master <span class=\"keyword\">to</span> master_host=<span class=\"string\">'172.25.30.10'</span>,master_user=<span class=\"string\">'xiemx1'</span>,master_password=<span class=\"string\">'123123'</span>,master_log_file=\"binlog.000003\"master_log_pos=<span class=\"number\">245</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;slave <span class=\"keyword\">start</span></span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;<span class=\"keyword\">show</span> slave status\\G;io<span class=\"keyword\">sql</span>yes</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>servera</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt;<span class=\"keyword\">grant</span>   <span class=\"keyword\">replication</span>  slave <span class=\"keyword\">on</span> *.*  <span class=\"keyword\">to</span> xiemx2@<span class=\"number\">172.25</span><span class=\"number\">.30</span>.% identified <span class=\"keyword\">by</span> <span class=\"string\">'123123'</span>;flush <span class=\"keyword\">privileges</span>;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>serveramaster</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt;change master <span class=\"keyword\">to</span> master_host=<span class=\"string\">'172.25.30.11'</span>,master_user=<span class=\"string\">'xiemx2'</span>,master_password=<span class=\"string\">'123123'</span>,master_log_file=\"binlog.000001\"master_log_pos=<span class=\"number\">245</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;slave <span class=\"keyword\">start</span></span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;<span class=\"keyword\">show</span> slave status\\G;io<span class=\"keyword\">sql</span>yes</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>serveraserverbserverbservera<br><br><code>show master status\\G;</code> position</p>\n</li>\n</ol>\n"},{"layout":"post","title":"mysql master-slave","published":1,"author":"xiemx","comments":1,"date":"2016-01-31T04:01:41.000Z","_content":"MysqlreplicationMysql MasterMysql SlaveMasterIOSlaveSqlIOMasterbinary logbin-log MySQL SlaveMasterslave selectsqlAB\n\n\n\n* SlaveIOMasterMasterposition\n* MasterSlaveIOIOSlaveSlaveIObin-logSlave\n* SlaveIOSlaverelay-logMasterbin-logmaster-infoMasterbin-log\n* SlaveSqlrelay-logrelay-logMaster\n\n###\n```\nservera 172.25.30.10     \nserverb 172.25.30.11\n```\n\nABslavemastermasterslavemastersalvemasterpositionserver id\n\n\n\n1. master/slaveserver-idmasterlog-bin\n```\n[root@localhost mysql]# cat /etc/my.cnf\n[mysqld]\nserver-id=1            server-id\ndatadir=/var/lib/mysql\nlog-bin=/var/log/mysql/binlog          slave\nsocket=/var/lib/mysql/mysql.sock\nuser=mysql\nlog-slow-queries=/var/log/mysql/slowlog\nsymbolic-links=0\n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n```\n2. master\n```sql\nmysql>grant   replication  slave on *.*  to xiemx@172.25.30.% identified by '123123';flush privileges;\n```\n3. slavemaster\n```\nmysql>change master to master_host='172.25.30.10',master_user='xiemx',master_password='123123',master_log_file=\"binlog.000003\"master_log_pos=245;\n\nmysql>slave start\n```\n4. salve\n```sql\nmysql> show slave status \\G;           \\G\n*************************** 1. row ***************************\nSlave_IO_State: Waiting for master to send event\nMaster_Host: 172.25.30.11\nMaster_User: xiemx\nMaster_Port: 4331\nConnect_Retry: 60\nMaster_Log_File: binlog.000003\nRead_Master_Log_Pos: 245\nRelay_Log_File: mysqld-relay-bin.000001           \nRelay_Log_Pos: 245\nSlave_IO_Running: Yes               slaveio\nSlave_SQL_Running: Yes              slavesqlyesno\nReplicate_Do_DB:\nReplicate_Ignore_DB: mysql\nReplicate_Do_Table:\nReplicate_Ignore_Table:\nReplicate_Wild_Do_Table: photo.%\nReplicate_Wild_Ignore_Table: mysql.%\nLast_Errno: 0\nLast_Error:\nSkip_Counter: 0\nExec_Master_Log_Pos: 13456620\nRelay_Log_Space: 36764898503\nUntil_Condition: None\nUntil_Log_File:\nUntil_Log_Pos: 0\nMaster_SSL_Allowed: No\nMaster_SSL_CA_File:\nMaster_SSL_CA_Path:\nMaster_SSL_Cert:\nMaster_SSL_Cipher:\nMaster_SSL_Key:\nSeconds_Behind_Master: 249904\n\n```\n5. \n\nslavemasterslavesqlslavesqlmastersalvechange masterslave\n\nmasterxiemxslave\n```\nmysql> create database  xiemxshow databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| test               |\n| xiemx              |\n+--------------------+\n4 rows in set (0.00 sec)\n```\nslaveshow databases","source":"_posts/mysql-master-slave.md","raw":"---\nlayout: post\ntitle: mysql master-slave\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-01-31 12:01:41\ntags: [ mysql ]\ncategories:\n    - mysql\n---\nMysqlreplicationMysql MasterMysql SlaveMasterIOSlaveSqlIOMasterbinary logbin-log MySQL SlaveMasterslave selectsqlAB\n\n\n\n* SlaveIOMasterMasterposition\n* MasterSlaveIOIOSlaveSlaveIObin-logSlave\n* SlaveIOSlaverelay-logMasterbin-logmaster-infoMasterbin-log\n* SlaveSqlrelay-logrelay-logMaster\n\n###\n```\nservera 172.25.30.10     \nserverb 172.25.30.11\n```\n\nABslavemastermasterslavemastersalvemasterpositionserver id\n\n\n\n1. master/slaveserver-idmasterlog-bin\n```\n[root@localhost mysql]# cat /etc/my.cnf\n[mysqld]\nserver-id=1            server-id\ndatadir=/var/lib/mysql\nlog-bin=/var/log/mysql/binlog          slave\nsocket=/var/lib/mysql/mysql.sock\nuser=mysql\nlog-slow-queries=/var/log/mysql/slowlog\nsymbolic-links=0\n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n```\n2. master\n```sql\nmysql>grant   replication  slave on *.*  to xiemx@172.25.30.% identified by '123123';flush privileges;\n```\n3. slavemaster\n```\nmysql>change master to master_host='172.25.30.10',master_user='xiemx',master_password='123123',master_log_file=\"binlog.000003\"master_log_pos=245;\n\nmysql>slave start\n```\n4. salve\n```sql\nmysql> show slave status \\G;           \\G\n*************************** 1. row ***************************\nSlave_IO_State: Waiting for master to send event\nMaster_Host: 172.25.30.11\nMaster_User: xiemx\nMaster_Port: 4331\nConnect_Retry: 60\nMaster_Log_File: binlog.000003\nRead_Master_Log_Pos: 245\nRelay_Log_File: mysqld-relay-bin.000001           \nRelay_Log_Pos: 245\nSlave_IO_Running: Yes               slaveio\nSlave_SQL_Running: Yes              slavesqlyesno\nReplicate_Do_DB:\nReplicate_Ignore_DB: mysql\nReplicate_Do_Table:\nReplicate_Ignore_Table:\nReplicate_Wild_Do_Table: photo.%\nReplicate_Wild_Ignore_Table: mysql.%\nLast_Errno: 0\nLast_Error:\nSkip_Counter: 0\nExec_Master_Log_Pos: 13456620\nRelay_Log_Space: 36764898503\nUntil_Condition: None\nUntil_Log_File:\nUntil_Log_Pos: 0\nMaster_SSL_Allowed: No\nMaster_SSL_CA_File:\nMaster_SSL_CA_Path:\nMaster_SSL_Cert:\nMaster_SSL_Cipher:\nMaster_SSL_Key:\nSeconds_Behind_Master: 249904\n\n```\n5. \n\nslavemasterslavesqlslavesqlmastersalvechange masterslave\n\nmasterxiemxslave\n```\nmysql> create database  xiemxshow databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| test               |\n| xiemx              |\n+--------------------+\n4 rows in set (0.00 sec)\n```\nslaveshow databases","slug":"mysql-master-slave","updated":"2019-10-21T06:57:42.697Z","photos":[],"link":"","_id":"ck42dyie70055u9urf3937v88","content":"<p>MysqlreplicationMysql MasterMysql SlaveMasterIOSlaveSqlIOMasterbinary logbin-log MySQL SlaveMasterslave selectsqlAB</p>\n<p></p>\n<ul>\n<li>SlaveIOMasterMasterposition</li>\n<li>MasterSlaveIOIOSlaveSlaveIObin-logSlave</li>\n<li>SlaveIOSlaverelay-logMasterbin-logmaster-infoMasterbin-log</li>\n<li>SlaveSqlrelay-logrelay-logMaster</li>\n</ul>\n<p>###</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">servera <span class=\"number\">172.25</span><span class=\"number\">.30</span><span class=\"number\">.10</span>     </span><br><span class=\"line\">serverb <span class=\"number\">172.25</span><span class=\"number\">.30</span><span class=\"number\">.11</span></span><br></pre></td></tr></table></figure>\n\n<p>ABslavemastermasterslavemastersalvemasterpositionserver id</p>\n<p></p>\n<ol>\n<li><p>master/slaveserver-idmasterlog-bin</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[root@localhost mysql]</span><span class=\"comment\"># cat /etc/my.cnf</span></span><br><span class=\"line\"><span class=\"section\">[mysqld]</span></span><br><span class=\"line\"><span class=\"attr\">server-id</span>=<span class=\"number\">1</span>            server-id</span><br><span class=\"line\"><span class=\"attr\">datadir</span>=/var/lib/mysql</span><br><span class=\"line\"><span class=\"attr\">log-bin</span>=/var/log/mysql/binlog          slave</span><br><span class=\"line\"><span class=\"attr\">socket</span>=/var/lib/mysql/mysql.sock</span><br><span class=\"line\"><span class=\"attr\">user</span>=mysql</span><br><span class=\"line\"><span class=\"attr\">log-slow-queries</span>=/var/log/mysql/slowlog</span><br><span class=\"line\"><span class=\"attr\">symbolic-links</span>=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"section\">[mysqld_safe]</span></span><br><span class=\"line\"><span class=\"attr\">log-error</span>=/var/log/mysqld.log</span><br><span class=\"line\"><span class=\"attr\">pid-file</span>=/var/run/mysqld/mysqld.pid</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>master</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt;grant   replication  slave on *.*  to xiemx@172.25.30.% identified by '123123';flush privileges;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>slavemaster</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt;change <span class=\"keyword\">master</span> <span class=\"title\">to</span> <span class=\"attr\">master_host=</span>'<span class=\"number\">172.25</span>.<span class=\"number\">30.10</span>',<span class=\"attr\">master_user=</span>'xiemx',<span class=\"attr\">master_password=</span>'<span class=\"number\">123123</span>',<span class=\"attr\">master_log_file=</span><span class=\"string\">\"binlog.000003\"</span><span class=\"attr\">master_log_pos=</span><span class=\"number\">245</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;<span class=\"literal\">slave</span> <span class=\"literal\">start</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>salve</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show slave status \\G;           \\G</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">Slave_IO_State: Waiting for master to send event</span><br><span class=\"line\">Master_Host: 172.25.30.11</span><br><span class=\"line\">Master_User: xiemx</span><br><span class=\"line\">Master_Port: 4331</span><br><span class=\"line\">Connect_Retry: 60</span><br><span class=\"line\">Master_Log_File: binlog.000003</span><br><span class=\"line\">Read_Master_Log_Pos: 245</span><br><span class=\"line\">Relay_Log_File: mysqld-relay-bin.000001           </span><br><span class=\"line\">Relay_Log_Pos: 245</span><br><span class=\"line\">Slave_IO_Running: Yes               slaveio</span><br><span class=\"line\">Slave_SQL_Running: Yes              slavesqlyesno</span><br><span class=\"line\">Replicate_Do_DB:</span><br><span class=\"line\">Replicate_Ignore_DB: mysql</span><br><span class=\"line\">Replicate_Do_Table:</span><br><span class=\"line\">Replicate_Ignore_Table:</span><br><span class=\"line\">Replicate_Wild_Do_Table: photo.%</span><br><span class=\"line\">Replicate_Wild_Ignore_Table: mysql.%</span><br><span class=\"line\">Last_Errno: 0</span><br><span class=\"line\">Last_Error:</span><br><span class=\"line\">Skip_Counter: 0</span><br><span class=\"line\">Exec_Master_Log_Pos: 13456620</span><br><span class=\"line\">Relay_Log_Space: 36764898503</span><br><span class=\"line\">Until_Condition: None</span><br><span class=\"line\">Until_Log_File:</span><br><span class=\"line\">Until_Log_Pos: 0</span><br><span class=\"line\">Master_SSL_Allowed: No</span><br><span class=\"line\">Master_SSL_CA_File:</span><br><span class=\"line\">Master_SSL_CA_Path:</span><br><span class=\"line\">Master_SSL_Cert:</span><br><span class=\"line\">Master_SSL_Cipher:</span><br><span class=\"line\">Master_SSL_Key:</span><br><span class=\"line\">Seconds_Behind_Master: 249904</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n</li>\n</ol>\n<p>slavemasterslavesqlslavesqlmastersalvechange masterslave</p>\n<p>masterxiemxslave</p>\n<figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; create database  xiemxshow databases;</span><br><span class=\"line\"><span class=\"code\">+--------------------+</span></span><br><span class=\"line\">| Database           |</span><br><span class=\"line\"><span class=\"code\">+--------------------+</span></span><br><span class=\"line\">| information<span class=\"emphasis\">_schema |</span></span><br><span class=\"line\"><span class=\"emphasis\">| mysql              |</span></span><br><span class=\"line\"><span class=\"emphasis\">| test               |</span></span><br><span class=\"line\"><span class=\"emphasis\">| xiemx              |</span></span><br><span class=\"line\"><span class=\"emphasis\">+--------------------+</span></span><br><span class=\"line\"><span class=\"emphasis\">4 rows in set (0.00 sec)</span></span><br></pre></td></tr></table></figure>\n\n<p>slaveshow databases</p>\n","site":{"data":{}},"excerpt":"","more":"<p>MysqlreplicationMysql MasterMysql SlaveMasterIOSlaveSqlIOMasterbinary logbin-log MySQL SlaveMasterslave selectsqlAB</p>\n<p></p>\n<ul>\n<li>SlaveIOMasterMasterposition</li>\n<li>MasterSlaveIOIOSlaveSlaveIObin-logSlave</li>\n<li>SlaveIOSlaverelay-logMasterbin-logmaster-infoMasterbin-log</li>\n<li>SlaveSqlrelay-logrelay-logMaster</li>\n</ul>\n<p>###</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">servera <span class=\"number\">172.25</span><span class=\"number\">.30</span><span class=\"number\">.10</span>     </span><br><span class=\"line\">serverb <span class=\"number\">172.25</span><span class=\"number\">.30</span><span class=\"number\">.11</span></span><br></pre></td></tr></table></figure>\n\n<p>ABslavemastermasterslavemastersalvemasterpositionserver id</p>\n<p></p>\n<ol>\n<li><p>master/slaveserver-idmasterlog-bin</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[root@localhost mysql]</span><span class=\"comment\"># cat /etc/my.cnf</span></span><br><span class=\"line\"><span class=\"section\">[mysqld]</span></span><br><span class=\"line\"><span class=\"attr\">server-id</span>=<span class=\"number\">1</span>            server-id</span><br><span class=\"line\"><span class=\"attr\">datadir</span>=/var/lib/mysql</span><br><span class=\"line\"><span class=\"attr\">log-bin</span>=/var/log/mysql/binlog          slave</span><br><span class=\"line\"><span class=\"attr\">socket</span>=/var/lib/mysql/mysql.sock</span><br><span class=\"line\"><span class=\"attr\">user</span>=mysql</span><br><span class=\"line\"><span class=\"attr\">log-slow-queries</span>=/var/log/mysql/slowlog</span><br><span class=\"line\"><span class=\"attr\">symbolic-links</span>=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"section\">[mysqld_safe]</span></span><br><span class=\"line\"><span class=\"attr\">log-error</span>=/var/log/mysqld.log</span><br><span class=\"line\"><span class=\"attr\">pid-file</span>=/var/run/mysqld/mysqld.pid</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>master</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt;grant   replication  slave on *.*  to xiemx@172.25.30.% identified by '123123';flush privileges;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>slavemaster</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt;change <span class=\"keyword\">master</span> <span class=\"title\">to</span> <span class=\"attr\">master_host=</span>'<span class=\"number\">172.25</span>.<span class=\"number\">30.10</span>',<span class=\"attr\">master_user=</span>'xiemx',<span class=\"attr\">master_password=</span>'<span class=\"number\">123123</span>',<span class=\"attr\">master_log_file=</span><span class=\"string\">\"binlog.000003\"</span><span class=\"attr\">master_log_pos=</span><span class=\"number\">245</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;<span class=\"literal\">slave</span> <span class=\"literal\">start</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>salve</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show slave status \\G;           \\G</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">Slave_IO_State: Waiting for master to send event</span><br><span class=\"line\">Master_Host: 172.25.30.11</span><br><span class=\"line\">Master_User: xiemx</span><br><span class=\"line\">Master_Port: 4331</span><br><span class=\"line\">Connect_Retry: 60</span><br><span class=\"line\">Master_Log_File: binlog.000003</span><br><span class=\"line\">Read_Master_Log_Pos: 245</span><br><span class=\"line\">Relay_Log_File: mysqld-relay-bin.000001           </span><br><span class=\"line\">Relay_Log_Pos: 245</span><br><span class=\"line\">Slave_IO_Running: Yes               slaveio</span><br><span class=\"line\">Slave_SQL_Running: Yes              slavesqlyesno</span><br><span class=\"line\">Replicate_Do_DB:</span><br><span class=\"line\">Replicate_Ignore_DB: mysql</span><br><span class=\"line\">Replicate_Do_Table:</span><br><span class=\"line\">Replicate_Ignore_Table:</span><br><span class=\"line\">Replicate_Wild_Do_Table: photo.%</span><br><span class=\"line\">Replicate_Wild_Ignore_Table: mysql.%</span><br><span class=\"line\">Last_Errno: 0</span><br><span class=\"line\">Last_Error:</span><br><span class=\"line\">Skip_Counter: 0</span><br><span class=\"line\">Exec_Master_Log_Pos: 13456620</span><br><span class=\"line\">Relay_Log_Space: 36764898503</span><br><span class=\"line\">Until_Condition: None</span><br><span class=\"line\">Until_Log_File:</span><br><span class=\"line\">Until_Log_Pos: 0</span><br><span class=\"line\">Master_SSL_Allowed: No</span><br><span class=\"line\">Master_SSL_CA_File:</span><br><span class=\"line\">Master_SSL_CA_Path:</span><br><span class=\"line\">Master_SSL_Cert:</span><br><span class=\"line\">Master_SSL_Cipher:</span><br><span class=\"line\">Master_SSL_Key:</span><br><span class=\"line\">Seconds_Behind_Master: 249904</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n</li>\n</ol>\n<p>slavemasterslavesqlslavesqlmastersalvechange masterslave</p>\n<p>masterxiemxslave</p>\n<figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; create database  xiemxshow databases;</span><br><span class=\"line\"><span class=\"code\">+--------------------+</span></span><br><span class=\"line\">| Database           |</span><br><span class=\"line\"><span class=\"code\">+--------------------+</span></span><br><span class=\"line\">| information<span class=\"emphasis\">_schema |</span></span><br><span class=\"line\"><span class=\"emphasis\">| mysql              |</span></span><br><span class=\"line\"><span class=\"emphasis\">| test               |</span></span><br><span class=\"line\"><span class=\"emphasis\">| xiemx              |</span></span><br><span class=\"line\"><span class=\"emphasis\">+--------------------+</span></span><br><span class=\"line\"><span class=\"emphasis\">4 rows in set (0.00 sec)</span></span><br></pre></td></tr></table></figure>\n\n<p>slaveshow databases</p>\n"},{"layout":"post","title":"Mysqlamoeba","published":1,"author":"xiemx","comments":1,"date":"2016-02-17T21:02:36.000Z","_content":"\n```\nA172.25.16.10    \nB172.25.16.11       \nC172.25.16.12     \nD172.25.16.13\nJ172.25.16.19          \n```\n\namoeba\n\n1. server j JDK\n\n2. /usr/local/amoeba\n```shell\nmkdir /usr/local/amoeba\n```\n3. /usrl/local/amoeba\n\n4. confamoeba\n  `amoeba.xml`  `dbServers.xml`\n### amoeba.xml(3):\n#### \n```\n<proxy>\n<!-- service class must implements com.meidusa.amoeba.service.Service -->\n  <service name=\"Amoeba for Mysql\" class=\"com.meidusa.amoeba.net.ServerableConnectionManager\">\n<!-- port -->\n<property name=\"port\">3306</property>\n```\n#### \n```\n<property name=\"authenticator\">\n\n  <bean class=\"com.meidusa.amoeba.mysql.server.MysqlClientAuthenticator\">\n  <property name=\"user\">amoeba</property>\n  <property name=\"password\">amoeba</property>\n  <property name=\"filter\">\n    <bean class=\"com.meidusa.amoeba.server.IPAccessController\">\n      <property name=\"ipFile\">${amoeba.home}/conf/access_list.conf</property>\n    </bean>\n  </property>\n  </bean>\n</property>\n```\n#### read/write pool\n```\n<property name=\"sqlFunctionFile\">${amoeba.home}/conf/functionMap.xml</property>\n<property name=\"LRUMapSize\">1500</property>\n     <property name=\"defaultPool\">serverb##</property>\n            <property name=\"writePool\">serverb##</property>\n            <property name=\"readPool\">readgroup1##</property>\n<property name=\"needParse\">true</property>\n```\n\n### dbServers.xml\n\n#### \n```\n<dbServer name=\"abstractServer\" abstractive=\"true\">\n<factoryConfig class=\"com.meidusa.amoeba.mysql.net.MysqlServerConnectionFactory\">\n  <property name=\"manager\">${defaultManager}</property>\n  <property name=\"sendBufferSize\">64</property>\n  <property name=\"receiveBufferSize\">128</property>\n  <!-- mysql port -->\n  <property name=\"port\">3306</property>\n  <!-- mysql schema -->\n  <property name=\"schema\">test</property>\n  <!-- mysql user -->\n  <property name=\"user\">dbproxy</property>\n  <!--  mysql password  -->\n  <property name=\"password\">xiemx</property>\n</factoryConfig>\n```\n \n\n#### \n```\n<dbServer name=\"serverb\"  parent=\"abstractServer\">\n  <factoryConfig>\n    <!-- mysql ip -->\n    <property name=\"ipAddress\">172.25.16.11</property>\n  </factoryConfig>\n</dbServer>\n\n<dbServer name=\"serverc\"  parent=\"abstractServer\">\n  <factoryConfig>\n    <!-- mysql ip -->\n    <property name=\"ipAddress\">172.25.16.12</property>\n  </factoryConfig>\n</dbServer>\n\n<dbServer name=\"serverd\"  parent=\"abstractServer\">\n  <factoryConfig>\n    <!-- mysql ip -->\n    <property name=\"ipAddress\">172.25.16.13</property>\n  </factoryConfig>\n</dbServer>\n```\n \n\n#### \n```\n<dbServer name=\"readgroup1\" virtual=\"true\">\n  <poolConfig class=\"com.meidusa.amoeba.server.MultipleServerPool\">\n    <!-- Load balancing strategy: 1=ROUNDROBIN , 2=WEIGHTBASED , 3=HA-->\n    <property name=\"loadbalance\">1</property>\n    <!-- Separated by commas,such as: server1,server2,server1 -->\n    <property name=\"poolNames\">serverc,serverd</property>\n  </poolConfig>\n</dbServer>\n```\n \n\n5. /bin\n`DEFAULT_OPTS=\"-server -Xms256m -Xmx256m -Xss228k\"`(228)\n```shell\n./amoeba start\n```\n6. BCDJ\n```sql\ngrant all on db1.* to dbproxy@'172.25.16.19' identified by 'xiemx';\n```","source":"_posts/mysql-proxy-amoeba.md","raw":"---\nlayout: post\ntitle: Mysqlamoeba\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-02-18 05:02:36\ntags: [ mysql, amoeba, mysql-proxy]\ncategories:\n    - mysql\n---\n\n```\nA172.25.16.10    \nB172.25.16.11       \nC172.25.16.12     \nD172.25.16.13\nJ172.25.16.19          \n```\n\namoeba\n\n1. server j JDK\n\n2. /usr/local/amoeba\n```shell\nmkdir /usr/local/amoeba\n```\n3. /usrl/local/amoeba\n\n4. confamoeba\n  `amoeba.xml`  `dbServers.xml`\n### amoeba.xml(3):\n#### \n```\n<proxy>\n<!-- service class must implements com.meidusa.amoeba.service.Service -->\n  <service name=\"Amoeba for Mysql\" class=\"com.meidusa.amoeba.net.ServerableConnectionManager\">\n<!-- port -->\n<property name=\"port\">3306</property>\n```\n#### \n```\n<property name=\"authenticator\">\n\n  <bean class=\"com.meidusa.amoeba.mysql.server.MysqlClientAuthenticator\">\n  <property name=\"user\">amoeba</property>\n  <property name=\"password\">amoeba</property>\n  <property name=\"filter\">\n    <bean class=\"com.meidusa.amoeba.server.IPAccessController\">\n      <property name=\"ipFile\">${amoeba.home}/conf/access_list.conf</property>\n    </bean>\n  </property>\n  </bean>\n</property>\n```\n#### read/write pool\n```\n<property name=\"sqlFunctionFile\">${amoeba.home}/conf/functionMap.xml</property>\n<property name=\"LRUMapSize\">1500</property>\n     <property name=\"defaultPool\">serverb##</property>\n            <property name=\"writePool\">serverb##</property>\n            <property name=\"readPool\">readgroup1##</property>\n<property name=\"needParse\">true</property>\n```\n\n### dbServers.xml\n\n#### \n```\n<dbServer name=\"abstractServer\" abstractive=\"true\">\n<factoryConfig class=\"com.meidusa.amoeba.mysql.net.MysqlServerConnectionFactory\">\n  <property name=\"manager\">${defaultManager}</property>\n  <property name=\"sendBufferSize\">64</property>\n  <property name=\"receiveBufferSize\">128</property>\n  <!-- mysql port -->\n  <property name=\"port\">3306</property>\n  <!-- mysql schema -->\n  <property name=\"schema\">test</property>\n  <!-- mysql user -->\n  <property name=\"user\">dbproxy</property>\n  <!--  mysql password  -->\n  <property name=\"password\">xiemx</property>\n</factoryConfig>\n```\n \n\n#### \n```\n<dbServer name=\"serverb\"  parent=\"abstractServer\">\n  <factoryConfig>\n    <!-- mysql ip -->\n    <property name=\"ipAddress\">172.25.16.11</property>\n  </factoryConfig>\n</dbServer>\n\n<dbServer name=\"serverc\"  parent=\"abstractServer\">\n  <factoryConfig>\n    <!-- mysql ip -->\n    <property name=\"ipAddress\">172.25.16.12</property>\n  </factoryConfig>\n</dbServer>\n\n<dbServer name=\"serverd\"  parent=\"abstractServer\">\n  <factoryConfig>\n    <!-- mysql ip -->\n    <property name=\"ipAddress\">172.25.16.13</property>\n  </factoryConfig>\n</dbServer>\n```\n \n\n#### \n```\n<dbServer name=\"readgroup1\" virtual=\"true\">\n  <poolConfig class=\"com.meidusa.amoeba.server.MultipleServerPool\">\n    <!-- Load balancing strategy: 1=ROUNDROBIN , 2=WEIGHTBASED , 3=HA-->\n    <property name=\"loadbalance\">1</property>\n    <!-- Separated by commas,such as: server1,server2,server1 -->\n    <property name=\"poolNames\">serverc,serverd</property>\n  </poolConfig>\n</dbServer>\n```\n \n\n5. /bin\n`DEFAULT_OPTS=\"-server -Xms256m -Xmx256m -Xss228k\"`(228)\n```shell\n./amoeba start\n```\n6. BCDJ\n```sql\ngrant all on db1.* to dbproxy@'172.25.16.19' identified by 'xiemx';\n```","slug":"mysql-proxy-amoeba","updated":"2019-10-22T07:13:45.997Z","photos":[],"link":"","_id":"ck42dyie80058u9urk08qpear","content":"<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A<span class=\"number\">172.25</span><span class=\"number\">.16</span><span class=\"number\">.10</span>    </span><br><span class=\"line\">B<span class=\"number\">172.25</span><span class=\"number\">.16</span><span class=\"number\">.11</span>       </span><br><span class=\"line\">C<span class=\"number\">172.25</span><span class=\"number\">.16</span><span class=\"number\">.12</span>     </span><br><span class=\"line\">D<span class=\"number\">172.25</span><span class=\"number\">.16</span><span class=\"number\">.13</span></span><br><span class=\"line\">J<span class=\"number\">172.25</span><span class=\"number\">.16</span><span class=\"number\">.19</span></span><br></pre></td></tr></table></figure>\n\n<p>amoeba</p>\n<ol>\n<li><p>server j JDK</p>\n</li>\n<li><p>/usr/local/amoeba</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /usr/local/amoeba</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>/usrl/local/amoeba</p>\n</li>\n<li><p>confamoeba<br><code>amoeba.xml</code>  <code>dbServers.xml</code></p>\n<h3 id=\"amoeba-xml-3\"><a href=\"#amoeba-xml-3\" class=\"headerlink\" title=\"amoeba.xml(3):\"></a>amoeba.xml(3):</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;proxy&gt;</span><br><span class=\"line\">&lt;!--<span class=\"built_in\"> service </span>class must implements com.meidusa.amoeba.service.Service --&gt;</span><br><span class=\"line\">  &lt;service <span class=\"attribute\">name</span>=<span class=\"string\">\"Amoeba for Mysql\"</span> <span class=\"attribute\">class</span>=<span class=\"string\">\"com.meidusa.amoeba.net.ServerableConnectionManager\"</span>&gt;</span><br><span class=\"line\">&lt;!--<span class=\"built_in\"> port </span>--&gt;</span><br><span class=\"line\">&lt;property <span class=\"attribute\">name</span>=<span class=\"string\">\"port\"</span>&gt;3306&lt;/property&gt;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"authenticator\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">  &lt;bean <span class=\"built_in\">class</span>=<span class=\"string\">\"com.meidusa.amoeba.mysql.server.MysqlClientAuthenticator\"</span>&gt;</span><br><span class=\"line\">  &lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"user\"</span>&gt;amoeba&lt;/<span class=\"keyword\">property</span>&gt;</span><br><span class=\"line\">  &lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"password\"</span>&gt;amoeba&lt;/<span class=\"keyword\">property</span>&gt;</span><br><span class=\"line\">  &lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"filter\"</span>&gt;</span><br><span class=\"line\">    &lt;bean <span class=\"built_in\">class</span>=<span class=\"string\">\"com.meidusa.amoeba.server.IPAccessController\"</span>&gt;</span><br><span class=\"line\">      &lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"ipFile\"</span>&gt;$&#123;amoeba.home&#125;/conf/access_list.conf&lt;/<span class=\"keyword\">property</span>&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\">  &lt;/<span class=\"keyword\">property</span>&gt;</span><br><span class=\"line\">  &lt;/bean&gt;</span><br><span class=\"line\">&lt;/<span class=\"keyword\">property</span>&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"read-write-pool\"><a href=\"#read-write-pool\" class=\"headerlink\" title=\"read/write pool\"></a>read/write pool</h4><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"sqlFunctionFile\"</span>&gt;$&#123;amoeba.home&#125;/conf/functionMap.xml&lt;/<span class=\"keyword\">property</span>&gt;</span><br><span class=\"line\">&lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"LRUMapSize\"</span>&gt;<span class=\"number\">1500</span>&lt;/<span class=\"keyword\">property</span>&gt;</span><br><span class=\"line\">     &lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"defaultPool\"</span>&gt;serverb<span class=\"comment\">##&lt;/property&gt;</span></span><br><span class=\"line\">            &lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"writePool\"</span>&gt;serverb<span class=\"comment\">##&lt;/property&gt;</span></span><br><span class=\"line\">            &lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"readPool\"</span>&gt;readgroup1<span class=\"comment\">##&lt;/property&gt;</span></span><br><span class=\"line\">&lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"needParse\"</span>&gt;<span class=\"literal\">true</span>&lt;/<span class=\"keyword\">property</span>&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"dbServers-xml\"><a href=\"#dbServers-xml\" class=\"headerlink\" title=\"dbServers.xml\"></a>dbServers.xml</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight dust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">dbServer</span> <span class=\"attr\">name</span>=<span class=\"string\">\"abstractServer\"</span> <span class=\"attr\">abstractive</span>=<span class=\"string\">\"true\"</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">factoryConfig</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.meidusa.amoeba.mysql.net.MysqlServerConnectionFactory\"</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"manager\"</span>&gt;</span>$</span><span class=\"template-variable\">&#123;defaultManager&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"sendBufferSize\"</span>&gt;</span>64<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"receiveBufferSize\"</span>&gt;</span>128<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"comment\">&lt;!-- mysql port --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"port\"</span>&gt;</span>3306<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"comment\">&lt;!-- mysql schema --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"schema\"</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"comment\">&lt;!-- mysql user --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"user\"</span>&gt;</span>dbproxy<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"comment\">&lt;!--  mysql password  --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span>&gt;</span>xiemx<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">factoryConfig</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dbServer</span> <span class=\"attr\">name</span>=<span class=\"string\">\"serverb\"</span>  <span class=\"attr\">parent</span>=<span class=\"string\">\"abstractServer\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">factoryConfig</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- mysql ip --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ipAddress\"</span>&gt;</span>172.25.16.11<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">factoryConfig</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dbServer</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dbServer</span> <span class=\"attr\">name</span>=<span class=\"string\">\"serverc\"</span>  <span class=\"attr\">parent</span>=<span class=\"string\">\"abstractServer\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">factoryConfig</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- mysql ip --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ipAddress\"</span>&gt;</span>172.25.16.12<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">factoryConfig</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dbServer</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dbServer</span> <span class=\"attr\">name</span>=<span class=\"string\">\"serverd\"</span>  <span class=\"attr\">parent</span>=<span class=\"string\">\"abstractServer\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">factoryConfig</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- mysql ip --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ipAddress\"</span>&gt;</span>172.25.16.13<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">factoryConfig</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dbServer</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dbServer</span> <span class=\"attr\">name</span>=<span class=\"string\">\"readgroup1\"</span> <span class=\"attr\">virtual</span>=<span class=\"string\">\"true\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">poolConfig</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.meidusa.amoeba.server.MultipleServerPool\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- Load balancing strategy: 1=ROUNDROBIN , 2=WEIGHTBASED , 3=HA--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"loadbalance\"</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- Separated by commas,such as: server1,server2,server1 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"poolNames\"</span>&gt;</span>serverc,serverd<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">poolConfig</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dbServer</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<ol start=\"5\">\n<li><p>/bin<br><code>DEFAULT_OPTS=&quot;-server -Xms256m -Xmx256m -Xss228k&quot;</code>(228)</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./amoeba start</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>BCDJ</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">grant</span> <span class=\"keyword\">all</span> <span class=\"keyword\">on</span> db1.* <span class=\"keyword\">to</span> dbproxy@<span class=\"string\">'172.25.16.19'</span> <span class=\"keyword\">identified</span> <span class=\"keyword\">by</span> <span class=\"string\">'xiemx'</span>;</span><br></pre></td></tr></table></figure></li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A<span class=\"number\">172.25</span><span class=\"number\">.16</span><span class=\"number\">.10</span>    </span><br><span class=\"line\">B<span class=\"number\">172.25</span><span class=\"number\">.16</span><span class=\"number\">.11</span>       </span><br><span class=\"line\">C<span class=\"number\">172.25</span><span class=\"number\">.16</span><span class=\"number\">.12</span>     </span><br><span class=\"line\">D<span class=\"number\">172.25</span><span class=\"number\">.16</span><span class=\"number\">.13</span></span><br><span class=\"line\">J<span class=\"number\">172.25</span><span class=\"number\">.16</span><span class=\"number\">.19</span></span><br></pre></td></tr></table></figure>\n\n<p>amoeba</p>\n<ol>\n<li><p>server j JDK</p>\n</li>\n<li><p>/usr/local/amoeba</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir /usr/local/amoeba</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>/usrl/local/amoeba</p>\n</li>\n<li><p>confamoeba<br><code>amoeba.xml</code>  <code>dbServers.xml</code></p>\n<h3 id=\"amoeba-xml-3\"><a href=\"#amoeba-xml-3\" class=\"headerlink\" title=\"amoeba.xml(3):\"></a>amoeba.xml(3):</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;proxy&gt;</span><br><span class=\"line\">&lt;!--<span class=\"built_in\"> service </span>class must implements com.meidusa.amoeba.service.Service --&gt;</span><br><span class=\"line\">  &lt;service <span class=\"attribute\">name</span>=<span class=\"string\">\"Amoeba for Mysql\"</span> <span class=\"attribute\">class</span>=<span class=\"string\">\"com.meidusa.amoeba.net.ServerableConnectionManager\"</span>&gt;</span><br><span class=\"line\">&lt;!--<span class=\"built_in\"> port </span>--&gt;</span><br><span class=\"line\">&lt;property <span class=\"attribute\">name</span>=<span class=\"string\">\"port\"</span>&gt;3306&lt;/property&gt;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"authenticator\"</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">  &lt;bean <span class=\"built_in\">class</span>=<span class=\"string\">\"com.meidusa.amoeba.mysql.server.MysqlClientAuthenticator\"</span>&gt;</span><br><span class=\"line\">  &lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"user\"</span>&gt;amoeba&lt;/<span class=\"keyword\">property</span>&gt;</span><br><span class=\"line\">  &lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"password\"</span>&gt;amoeba&lt;/<span class=\"keyword\">property</span>&gt;</span><br><span class=\"line\">  &lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"filter\"</span>&gt;</span><br><span class=\"line\">    &lt;bean <span class=\"built_in\">class</span>=<span class=\"string\">\"com.meidusa.amoeba.server.IPAccessController\"</span>&gt;</span><br><span class=\"line\">      &lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"ipFile\"</span>&gt;$&#123;amoeba.home&#125;/conf/access_list.conf&lt;/<span class=\"keyword\">property</span>&gt;</span><br><span class=\"line\">    &lt;/bean&gt;</span><br><span class=\"line\">  &lt;/<span class=\"keyword\">property</span>&gt;</span><br><span class=\"line\">  &lt;/bean&gt;</span><br><span class=\"line\">&lt;/<span class=\"keyword\">property</span>&gt;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"read-write-pool\"><a href=\"#read-write-pool\" class=\"headerlink\" title=\"read/write pool\"></a>read/write pool</h4><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"sqlFunctionFile\"</span>&gt;$&#123;amoeba.home&#125;/conf/functionMap.xml&lt;/<span class=\"keyword\">property</span>&gt;</span><br><span class=\"line\">&lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"LRUMapSize\"</span>&gt;<span class=\"number\">1500</span>&lt;/<span class=\"keyword\">property</span>&gt;</span><br><span class=\"line\">     &lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"defaultPool\"</span>&gt;serverb<span class=\"comment\">##&lt;/property&gt;</span></span><br><span class=\"line\">            &lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"writePool\"</span>&gt;serverb<span class=\"comment\">##&lt;/property&gt;</span></span><br><span class=\"line\">            &lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"readPool\"</span>&gt;readgroup1<span class=\"comment\">##&lt;/property&gt;</span></span><br><span class=\"line\">&lt;<span class=\"keyword\">property</span> <span class=\"built_in\">name</span>=<span class=\"string\">\"needParse\"</span>&gt;<span class=\"literal\">true</span>&lt;/<span class=\"keyword\">property</span>&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"dbServers-xml\"><a href=\"#dbServers-xml\" class=\"headerlink\" title=\"dbServers.xml\"></a>dbServers.xml</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight dust\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">dbServer</span> <span class=\"attr\">name</span>=<span class=\"string\">\"abstractServer\"</span> <span class=\"attr\">abstractive</span>=<span class=\"string\">\"true\"</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">factoryConfig</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.meidusa.amoeba.mysql.net.MysqlServerConnectionFactory\"</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"manager\"</span>&gt;</span>$</span><span class=\"template-variable\">&#123;defaultManager&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"sendBufferSize\"</span>&gt;</span>64<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"receiveBufferSize\"</span>&gt;</span>128<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"comment\">&lt;!-- mysql port --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"port\"</span>&gt;</span>3306<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"comment\">&lt;!-- mysql schema --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"schema\"</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"comment\">&lt;!-- mysql user --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"user\"</span>&gt;</span>dbproxy<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"comment\">&lt;!--  mysql password  --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"password\"</span>&gt;</span>xiemx<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">factoryConfig</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dbServer</span> <span class=\"attr\">name</span>=<span class=\"string\">\"serverb\"</span>  <span class=\"attr\">parent</span>=<span class=\"string\">\"abstractServer\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">factoryConfig</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- mysql ip --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ipAddress\"</span>&gt;</span>172.25.16.11<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">factoryConfig</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dbServer</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dbServer</span> <span class=\"attr\">name</span>=<span class=\"string\">\"serverc\"</span>  <span class=\"attr\">parent</span>=<span class=\"string\">\"abstractServer\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">factoryConfig</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- mysql ip --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ipAddress\"</span>&gt;</span>172.25.16.12<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">factoryConfig</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dbServer</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dbServer</span> <span class=\"attr\">name</span>=<span class=\"string\">\"serverd\"</span>  <span class=\"attr\">parent</span>=<span class=\"string\">\"abstractServer\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">factoryConfig</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- mysql ip --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ipAddress\"</span>&gt;</span>172.25.16.13<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">factoryConfig</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dbServer</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dbServer</span> <span class=\"attr\">name</span>=<span class=\"string\">\"readgroup1\"</span> <span class=\"attr\">virtual</span>=<span class=\"string\">\"true\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">poolConfig</span> <span class=\"attr\">class</span>=<span class=\"string\">\"com.meidusa.amoeba.server.MultipleServerPool\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- Load balancing strategy: 1=ROUNDROBIN , 2=WEIGHTBASED , 3=HA--&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"loadbalance\"</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- Separated by commas,such as: server1,server2,server1 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"poolNames\"</span>&gt;</span>serverc,serverd<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">poolConfig</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dbServer</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<ol start=\"5\">\n<li><p>/bin<br><code>DEFAULT_OPTS=&quot;-server -Xms256m -Xmx256m -Xss228k&quot;</code>(228)</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./amoeba start</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>BCDJ</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">grant</span> <span class=\"keyword\">all</span> <span class=\"keyword\">on</span> db1.* <span class=\"keyword\">to</span> dbproxy@<span class=\"string\">'172.25.16.19'</span> <span class=\"keyword\">identified</span> <span class=\"keyword\">by</span> <span class=\"string\">'xiemx'</span>;</span><br></pre></td></tr></table></figure></li>\n</ol>\n"},{"layout":"post","title":"MySQLmysqlcheck","published":1,"author":"xiemx","comments":1,"date":"2015-08-23T17:08:44.000Z","_content":"mysqlcheckmysql`MyISAM`mysqlcheckmyisamchkmysqldmysqlcheckmyisamchkmyisamchk\n```shell\n1.\nmysqlcheck-A-o-r-p\nEnterpassword:\ndatabase1OK\ndatabase2OK\n\n2.\nmysqlcheck-A-o-rdatabase1 -p\ndatabase1OK\n```","source":"_posts/mysqlcheck.md","raw":"---\nlayout: post\ntitle: MySQLmysqlcheck\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-08-24 01:08:44\ntags: [ mysql, mysqlcheck, tool ]\ncategories:\n    - mysql\n---\nmysqlcheckmysql`MyISAM`mysqlcheckmyisamchkmysqldmysqlcheckmyisamchkmyisamchk\n```shell\n1.\nmysqlcheck-A-o-r-p\nEnterpassword:\ndatabase1OK\ndatabase2OK\n\n2.\nmysqlcheck-A-o-rdatabase1 -p\ndatabase1OK\n```","slug":"mysqlcheck","updated":"2019-10-21T09:01:56.752Z","photos":[],"link":"","_id":"ck42dyiea005cu9urx0krepoc","content":"<p>mysqlcheckmysql<code>MyISAM</code>mysqlcheckmyisamchkmysqldmysqlcheckmyisamchkmyisamchk</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.</span><br><span class=\"line\">mysqlcheck-A-o-r-p</span><br><span class=\"line\">Enterpassword:</span><br><span class=\"line\">database1OK</span><br><span class=\"line\">database2OK</span><br><span class=\"line\"></span><br><span class=\"line\">2.</span><br><span class=\"line\">mysqlcheck-A-o-rdatabase1 -p</span><br><span class=\"line\">database1OK</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>mysqlcheckmysql<code>MyISAM</code>mysqlcheckmyisamchkmysqldmysqlcheckmyisamchkmyisamchk</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.</span><br><span class=\"line\">mysqlcheck-A-o-r-p</span><br><span class=\"line\">Enterpassword:</span><br><span class=\"line\">database1OK</span><br><span class=\"line\">database2OK</span><br><span class=\"line\"></span><br><span class=\"line\">2.</span><br><span class=\"line\">mysqlcheck-A-o-rdatabase1 -p</span><br><span class=\"line\">database1OK</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"Mysqldump error","published":1,"author":"xiemx","comments":1,"date":"2019-05-06T03:05:56.000Z","_content":"### \n```\n[root@FCHK-instance ~]# mysqldump --host rm-xxxxxxxxxxx.mysql.rds.aliyuncs.com -u xxxx -p --databases visa > hk.sql\nEnter password:\nWarning: A partial dump from a server that has GTIDs will by default include the GTIDs of all transactions, even those that changed suppressed parts of the database. If you don't want to restore GTIDs, pass --set-gtid-purged=OFF. To make a complete dump, pass --all-databases --triggers --routines --events.\nmysqldump: Couldn't execute 'SELECT COLUMN_NAME,                       JSON_EXTRACT(HISTOGRAM, '$.\"number-of-buckets-specified\"')                FROM information_schema.COLUMN_STATISTICS                WHERE SCHEMA_NAME = 'visa' AND TABLE_NAME = 'admin';': Unknown table 'column_statistics' in information_schema (1109\n```\n### \n```\n\n[root@FCHK-instance ~]# mysql --version\nmysql  Ver 8.0.11 for Linux on x86_64 (MySQL Community Server - GPL)\n\nmysqldump 8COLUMN_STATISTICS\n\n\nMysql 8.0 The INFORMATION_SCHEMA COLUMN_STATISTICS Table\nhttps://dev.mysql.com/doc/refman/8.0/en/column-statistics-table.html\n```\n### \n```\n[root@FCHK-instance ~]# mysqldump --host rm-xxxxxxxxxx2.mysql.rds.aliyuncs.com -u xxxx -p --databases visa --column-statistics=0 > hk.sql\nEnter password:\nWarning: A partial dump from a server that has GTIDs will by default include the GTIDs of all transactions, even those that changed suppressed parts of the database. If you don't want to restore GTIDs, pass --set-gtid-purged=OFF. To make a complete dump, pass --all-databases --triggers --routines --events.\n```","source":"_posts/mysqldump-error.md","raw":"---\nlayout: post\ntitle: Mysqldump error\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2019-05-06 11:05:56\ntags: [ mysql, debug ,database]\ncategories:\n    - mysql\n# permalink: /2019/05/06/mysqldump-error\n---\n### \n```\n[root@FCHK-instance ~]# mysqldump --host rm-xxxxxxxxxxx.mysql.rds.aliyuncs.com -u xxxx -p --databases visa > hk.sql\nEnter password:\nWarning: A partial dump from a server that has GTIDs will by default include the GTIDs of all transactions, even those that changed suppressed parts of the database. If you don't want to restore GTIDs, pass --set-gtid-purged=OFF. To make a complete dump, pass --all-databases --triggers --routines --events.\nmysqldump: Couldn't execute 'SELECT COLUMN_NAME,                       JSON_EXTRACT(HISTOGRAM, '$.\"number-of-buckets-specified\"')                FROM information_schema.COLUMN_STATISTICS                WHERE SCHEMA_NAME = 'visa' AND TABLE_NAME = 'admin';': Unknown table 'column_statistics' in information_schema (1109\n```\n### \n```\n\n[root@FCHK-instance ~]# mysql --version\nmysql  Ver 8.0.11 for Linux on x86_64 (MySQL Community Server - GPL)\n\nmysqldump 8COLUMN_STATISTICS\n\n\nMysql 8.0 The INFORMATION_SCHEMA COLUMN_STATISTICS Table\nhttps://dev.mysql.com/doc/refman/8.0/en/column-statistics-table.html\n```\n### \n```\n[root@FCHK-instance ~]# mysqldump --host rm-xxxxxxxxxx2.mysql.rds.aliyuncs.com -u xxxx -p --databases visa --column-statistics=0 > hk.sql\nEnter password:\nWarning: A partial dump from a server that has GTIDs will by default include the GTIDs of all transactions, even those that changed suppressed parts of the database. If you don't want to restore GTIDs, pass --set-gtid-purged=OFF. To make a complete dump, pass --all-databases --triggers --routines --events.\n```","slug":"mysqldump-error","updated":"2019-10-19T10:22:28.240Z","photos":[],"link":"","_id":"ck42dyiec005gu9urih6b5qe3","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight vhdl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@FCHK-instance ~]# mysqldump <span class=\"comment\">--host rm-xxxxxxxxxxx.mysql.rds.aliyuncs.com -u xxxx -p --databases visa &gt; hk.sql</span></span><br><span class=\"line\">Enter password:</span><br><span class=\"line\"><span class=\"literal\">Warning</span>: A partial dump from a server that has GTIDs will by <span class=\"keyword\">default</span> include the GTIDs <span class=\"keyword\">of</span> <span class=\"keyword\">all</span> transactions, even those that changed suppressed parts <span class=\"keyword\">of</span> the database. <span class=\"keyword\">If</span> you don<span class=\"symbol\">'t</span> want <span class=\"keyword\">to</span> restore GTIDs, pass <span class=\"comment\">--set-gtid-purged=OFF. To make a complete dump, pass --all-databases --triggers --routines --events.</span></span><br><span class=\"line\">mysqldump: Couldn<span class=\"symbol\">'t</span> execute <span class=\"symbol\">'SELECT</span> COLUMN_NAME,                       JSON_EXTRACT(HISTOGRAM, '$.<span class=\"string\">\"number-of-buckets-specified\"</span>')                FROM information_schema.COLUMN_STATISTICS                WHERE SCHEMA_NAME = <span class=\"symbol\">'visa</span>' <span class=\"keyword\">AND</span> TABLE_NAME = <span class=\"symbol\">'admin</span>';': Unknown table <span class=\"symbol\">'column_statistics</span>' <span class=\"keyword\">in</span> information_schema (<span class=\"number\">1109</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">[root@FCHK-instance ~]# mysql <span class=\"comment\">--version</span></span><br><span class=\"line\">mysql  Ver <span class=\"number\">8.0</span><span class=\"number\">.11</span> <span class=\"keyword\">for</span> Linux <span class=\"keyword\">on</span> x86_64 (MySQL Community <span class=\"keyword\">Server</span> - GPL)</span><br><span class=\"line\"></span><br><span class=\"line\">mysqldump <span class=\"number\">8</span>COLUMN_STATISTICS</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Mysql <span class=\"number\">8.0</span> The INFORMATION_SCHEMA COLUMN_STATISTICS <span class=\"keyword\">Table</span></span><br><span class=\"line\">https://dev.mysql.com/doc/refman/<span class=\"number\">8.0</span>/en/<span class=\"keyword\">column</span>-<span class=\"keyword\">statistics</span>-<span class=\"keyword\">table</span>.html</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight vhdl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@FCHK-instance ~]# mysqldump <span class=\"comment\">--host rm-xxxxxxxxxx2.mysql.rds.aliyuncs.com -u xxxx -p --databases visa --column-statistics=0 &gt; hk.sql</span></span><br><span class=\"line\">Enter password:</span><br><span class=\"line\"><span class=\"literal\">Warning</span>: A partial dump from a server that has GTIDs will by <span class=\"keyword\">default</span> include the GTIDs <span class=\"keyword\">of</span> <span class=\"keyword\">all</span> transactions, even those that changed suppressed parts <span class=\"keyword\">of</span> the database. <span class=\"keyword\">If</span> you don<span class=\"symbol\">'t</span> want <span class=\"keyword\">to</span> restore GTIDs, pass <span class=\"comment\">--set-gtid-purged=OFF. To make a complete dump, pass --all-databases --triggers --routines --events.</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight vhdl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@FCHK-instance ~]# mysqldump <span class=\"comment\">--host rm-xxxxxxxxxxx.mysql.rds.aliyuncs.com -u xxxx -p --databases visa &gt; hk.sql</span></span><br><span class=\"line\">Enter password:</span><br><span class=\"line\"><span class=\"literal\">Warning</span>: A partial dump from a server that has GTIDs will by <span class=\"keyword\">default</span> include the GTIDs <span class=\"keyword\">of</span> <span class=\"keyword\">all</span> transactions, even those that changed suppressed parts <span class=\"keyword\">of</span> the database. <span class=\"keyword\">If</span> you don<span class=\"symbol\">'t</span> want <span class=\"keyword\">to</span> restore GTIDs, pass <span class=\"comment\">--set-gtid-purged=OFF. To make a complete dump, pass --all-databases --triggers --routines --events.</span></span><br><span class=\"line\">mysqldump: Couldn<span class=\"symbol\">'t</span> execute <span class=\"symbol\">'SELECT</span> COLUMN_NAME,                       JSON_EXTRACT(HISTOGRAM, '$.<span class=\"string\">\"number-of-buckets-specified\"</span>')                FROM information_schema.COLUMN_STATISTICS                WHERE SCHEMA_NAME = <span class=\"symbol\">'visa</span>' <span class=\"keyword\">AND</span> TABLE_NAME = <span class=\"symbol\">'admin</span>';': Unknown table <span class=\"symbol\">'column_statistics</span>' <span class=\"keyword\">in</span> information_schema (<span class=\"number\">1109</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">[root@FCHK-instance ~]# mysql <span class=\"comment\">--version</span></span><br><span class=\"line\">mysql  Ver <span class=\"number\">8.0</span><span class=\"number\">.11</span> <span class=\"keyword\">for</span> Linux <span class=\"keyword\">on</span> x86_64 (MySQL Community <span class=\"keyword\">Server</span> - GPL)</span><br><span class=\"line\"></span><br><span class=\"line\">mysqldump <span class=\"number\">8</span>COLUMN_STATISTICS</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Mysql <span class=\"number\">8.0</span> The INFORMATION_SCHEMA COLUMN_STATISTICS <span class=\"keyword\">Table</span></span><br><span class=\"line\">https://dev.mysql.com/doc/refman/<span class=\"number\">8.0</span>/en/<span class=\"keyword\">column</span>-<span class=\"keyword\">statistics</span>-<span class=\"keyword\">table</span>.html</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight vhdl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@FCHK-instance ~]# mysqldump <span class=\"comment\">--host rm-xxxxxxxxxx2.mysql.rds.aliyuncs.com -u xxxx -p --databases visa --column-statistics=0 &gt; hk.sql</span></span><br><span class=\"line\">Enter password:</span><br><span class=\"line\"><span class=\"literal\">Warning</span>: A partial dump from a server that has GTIDs will by <span class=\"keyword\">default</span> include the GTIDs <span class=\"keyword\">of</span> <span class=\"keyword\">all</span> transactions, even those that changed suppressed parts <span class=\"keyword\">of</span> the database. <span class=\"keyword\">If</span> you don<span class=\"symbol\">'t</span> want <span class=\"keyword\">to</span> restore GTIDs, pass <span class=\"comment\">--set-gtid-purged=OFF. To make a complete dump, pass --all-databases --triggers --routines --events.</span></span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"nginx","published":1,"author":"xiemx","comments":1,"date":"2017-01-17T18:01:18.000Z","_content":"```\nlocation ~* \\.(gif|jpg|jpeg|png|ico)$ {\n    valid_referers none blocked server_names *.xiemx.com;\n    if ($invalid_referer) {\n        return 444\n    }\n}\n```","source":"_posts/nginx-referer.md","raw":"---\nlayout: post\ntitle: nginx\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-01-18 02:01:18\ntags: [ nginx ]\ncategories:\n    - nginx\n# permalink: '/2017/01/18/nginx-referer'\n---\n```\nlocation ~* \\.(gif|jpg|jpeg|png|ico)$ {\n    valid_referers none blocked server_names *.xiemx.com;\n    if ($invalid_referer) {\n        return 444\n    }\n}\n```","slug":"nginx-referer","updated":"2019-10-19T10:12:29.779Z","photos":[],"link":"","_id":"ck42dyied005ku9ur3216sak8","content":"<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">location</span> <span class=\"regexp\">~* \\.(gif|jpg|jpeg|png|ico)$</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">valid_referers</span> <span class=\"literal\">none</span> <span class=\"literal\">blocked</span> server_names <span class=\"regexp\">*.xiemx.com</span>;</span><br><span class=\"line\">    <span class=\"attribute\">if</span> (<span class=\"variable\">$invalid_referer</span>) &#123;</span><br><span class=\"line\">        <span class=\"attribute\">return</span> <span class=\"number\">444</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">location</span> <span class=\"regexp\">~* \\.(gif|jpg|jpeg|png|ico)$</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">valid_referers</span> <span class=\"literal\">none</span> <span class=\"literal\">blocked</span> server_names <span class=\"regexp\">*.xiemx.com</span>;</span><br><span class=\"line\">    <span class=\"attribute\">if</span> (<span class=\"variable\">$invalid_referer</span>) &#123;</span><br><span class=\"line\">        <span class=\"attribute\">return</span> <span class=\"number\">444</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"nginx remote_port","published":1,"author":"xiemx","comments":1,"date":"2019-12-12T02:01:04.000Z","_content":"### nginx remote_port\n\n#### \nlog_format\"ngx_remote_port: $remote_port\"() `ngx_remote_port:\"\"`\n```\nlog_format json '{ \"time\": \"$time_iso8601\", '\n                    '\"ngx_true_client_ip\": \"$http_true_client_ip\", '\n                    '\"ngx_x_real_ip\": \"$http_x_real_ip\", '\n                    '\"ngx_cdn_src_ip\": \"$http_cdn_src_ip\", '\n                    '\"ngx_geo_location_ip\": \"$client_ip\", '\n                    '\"ngx_remote_addr\": \"$remote_addr\", '\n                    '\"ngx_remote_port\": \"$remote_port\", '\n                    '\"ngx_x_user_site_proxy\": \"$http_x_user_site_proxy\", '\n                    '\"ngx_x_forwarded_for\": \"$http_x_forwarded_for\", '\n                    '\"ngx_host\": \"$host\", '\n                    '\"ngx_http_user_agent\": \"$http_user_agent\", '\n                    '\"ngx_body_bytes_sent\": \"$body_bytes_sent\", '\n                    '\"ngx_request_time\": \"$request_time\", '\n                    '\"ngx_upstream_response_time\": \"$upstream_response_time\", '\n                    '\"ngx_upstream_connect_time\": \"$upstream_connect_time\", '\n                    '\"ngx_upstream_header_time:\": \"$upstream_header_time\", '\n                    '\"ngx_upstream_addr\": \"$upstream_addr\", '\n                    '\"ngx_upstream_content_length\": \"$sent_http_content_length\", '\n                    '\"ngx_status_code\": \"$status\", '\n                    '\"ngx_scheme\": \"$scheme\", '\n                    '\"ngx_request_method\": \"$request_method\", '\n                    '\"ngx_request_uri\": \"$request_uri\", '\n                    '\"ngx_request\": \"$request\", '\n                    '\"ngx_http_referrer\": \"$http_referer\"  }';\n```\n\n#### \n\n$remote_portnginxproxyremote_port  \nnginxport2\nproxyrequest headerx-forworder-forrealip realip'realip_remote_port'port, log_format\n```\nlog_format json '{ \"time\": \"$time_iso8601\", '\n                    '\"ngx_true_client_ip\": \"$http_true_client_ip\", '\n                    '\"ngx_x_real_ip\": \"$http_x_real_ip\", '\n                    '\"ngx_cdn_src_ip\": \"$http_cdn_src_ip\", '\n                    '\"ngx_geo_location_ip\": \"$client_ip\", '\n                    '\"ngx_remote_addr\": \"$remote_addr\", '\n                    '\"ngx_remote_port\": \"$remote_port\", '\n```","source":"_posts/nginx-remote-port-is-null.md","raw":"---\nlayout: post\ntitle: nginx remote_port\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2019-12-12 10:01:04\ntags: [ nginx, webserver ]\ncategories:\n    - nginx\n---\n### nginx remote_port\n\n#### \nlog_format\"ngx_remote_port: $remote_port\"() `ngx_remote_port:\"\"`\n```\nlog_format json '{ \"time\": \"$time_iso8601\", '\n                    '\"ngx_true_client_ip\": \"$http_true_client_ip\", '\n                    '\"ngx_x_real_ip\": \"$http_x_real_ip\", '\n                    '\"ngx_cdn_src_ip\": \"$http_cdn_src_ip\", '\n                    '\"ngx_geo_location_ip\": \"$client_ip\", '\n                    '\"ngx_remote_addr\": \"$remote_addr\", '\n                    '\"ngx_remote_port\": \"$remote_port\", '\n                    '\"ngx_x_user_site_proxy\": \"$http_x_user_site_proxy\", '\n                    '\"ngx_x_forwarded_for\": \"$http_x_forwarded_for\", '\n                    '\"ngx_host\": \"$host\", '\n                    '\"ngx_http_user_agent\": \"$http_user_agent\", '\n                    '\"ngx_body_bytes_sent\": \"$body_bytes_sent\", '\n                    '\"ngx_request_time\": \"$request_time\", '\n                    '\"ngx_upstream_response_time\": \"$upstream_response_time\", '\n                    '\"ngx_upstream_connect_time\": \"$upstream_connect_time\", '\n                    '\"ngx_upstream_header_time:\": \"$upstream_header_time\", '\n                    '\"ngx_upstream_addr\": \"$upstream_addr\", '\n                    '\"ngx_upstream_content_length\": \"$sent_http_content_length\", '\n                    '\"ngx_status_code\": \"$status\", '\n                    '\"ngx_scheme\": \"$scheme\", '\n                    '\"ngx_request_method\": \"$request_method\", '\n                    '\"ngx_request_uri\": \"$request_uri\", '\n                    '\"ngx_request\": \"$request\", '\n                    '\"ngx_http_referrer\": \"$http_referer\"  }';\n```\n\n#### \n\n$remote_portnginxproxyremote_port  \nnginxport2\nproxyrequest headerx-forworder-forrealip realip'realip_remote_port'port, log_format\n```\nlog_format json '{ \"time\": \"$time_iso8601\", '\n                    '\"ngx_true_client_ip\": \"$http_true_client_ip\", '\n                    '\"ngx_x_real_ip\": \"$http_x_real_ip\", '\n                    '\"ngx_cdn_src_ip\": \"$http_cdn_src_ip\", '\n                    '\"ngx_geo_location_ip\": \"$client_ip\", '\n                    '\"ngx_remote_addr\": \"$remote_addr\", '\n                    '\"ngx_remote_port\": \"$remote_port\", '\n```","slug":"nginx-remote-port-is-null","updated":"2019-12-12T07:06:52.916Z","photos":[],"link":"","_id":"ck42dyief005ou9uravou0m3p","content":"<h3 id=\"nginx-remote-port\"><a href=\"#nginx-remote-port\" class=\"headerlink\" title=\"nginx remote_port\"></a>nginx remote_port</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>log_formatngx_remote_port: $remote_port() <code>ngx_remote_port:&quot;&quot;</code></p>\n<figure class=\"highlight julia\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">log_format json '&#123; <span class=\"string\">\"time\"</span>: <span class=\"string\">\"<span class=\"variable\">$time_iso8601</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_true_client_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_true_client_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_x_real_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_x_real_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_cdn_src_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_cdn_src_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_geo_location_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$client_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_remote_addr\"</span>: <span class=\"string\">\"<span class=\"variable\">$remote_addr</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_remote_port\"</span>: <span class=\"string\">\"<span class=\"variable\">$remote_port</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_x_user_site_proxy\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_x_user_site_proxy</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_x_forwarded_for\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_x_forwarded_for</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_host\"</span>: <span class=\"string\">\"<span class=\"variable\">$host</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_http_user_agent\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_user_agent</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_body_bytes_sent\"</span>: <span class=\"string\">\"<span class=\"variable\">$body_bytes_sent</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_request_time\"</span>: <span class=\"string\">\"<span class=\"variable\">$request_time</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_upstream_response_time\"</span>: <span class=\"string\">\"<span class=\"variable\">$upstream_response_time</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_upstream_connect_time\"</span>: <span class=\"string\">\"<span class=\"variable\">$upstream_connect_time</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_upstream_header_time:\"</span>: <span class=\"string\">\"<span class=\"variable\">$upstream_header_time</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_upstream_addr\"</span>: <span class=\"string\">\"<span class=\"variable\">$upstream_addr</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_upstream_content_length\"</span>: <span class=\"string\">\"<span class=\"variable\">$sent_http_content_length</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_status_code\"</span>: <span class=\"string\">\"<span class=\"variable\">$status</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_scheme\"</span>: <span class=\"string\">\"<span class=\"variable\">$scheme</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_request_method\"</span>: <span class=\"string\">\"<span class=\"variable\">$request_method</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_request_uri\"</span>: <span class=\"string\">\"<span class=\"variable\">$request_uri</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_request\"</span>: <span class=\"string\">\"<span class=\"variable\">$request</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_http_referrer\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_referer</span>\"</span>  &#125;';</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>$remote_portnginxproxyremote_port<br>nginxport2<br>proxyrequest headerx-forworder-forrealip realiprealip_remote_portport, log_format</p>\n<figure class=\"highlight julia\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">log_format json '&#123; <span class=\"string\">\"time\"</span>: <span class=\"string\">\"<span class=\"variable\">$time_iso8601</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_true_client_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_true_client_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_x_real_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_x_real_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_cdn_src_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_cdn_src_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_geo_location_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$client_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_remote_addr\"</span>: <span class=\"string\">\"<span class=\"variable\">$remote_addr</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_remote_port\"</span>: <span class=\"string\">\"<span class=\"variable\">$remote_port</span>\"</span>, '</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"nginx-remote-port\"><a href=\"#nginx-remote-port\" class=\"headerlink\" title=\"nginx remote_port\"></a>nginx remote_port</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>log_formatngx_remote_port: $remote_port() <code>ngx_remote_port:&quot;&quot;</code></p>\n<figure class=\"highlight julia\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">log_format json '&#123; <span class=\"string\">\"time\"</span>: <span class=\"string\">\"<span class=\"variable\">$time_iso8601</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_true_client_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_true_client_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_x_real_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_x_real_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_cdn_src_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_cdn_src_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_geo_location_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$client_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_remote_addr\"</span>: <span class=\"string\">\"<span class=\"variable\">$remote_addr</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_remote_port\"</span>: <span class=\"string\">\"<span class=\"variable\">$remote_port</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_x_user_site_proxy\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_x_user_site_proxy</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_x_forwarded_for\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_x_forwarded_for</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_host\"</span>: <span class=\"string\">\"<span class=\"variable\">$host</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_http_user_agent\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_user_agent</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_body_bytes_sent\"</span>: <span class=\"string\">\"<span class=\"variable\">$body_bytes_sent</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_request_time\"</span>: <span class=\"string\">\"<span class=\"variable\">$request_time</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_upstream_response_time\"</span>: <span class=\"string\">\"<span class=\"variable\">$upstream_response_time</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_upstream_connect_time\"</span>: <span class=\"string\">\"<span class=\"variable\">$upstream_connect_time</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_upstream_header_time:\"</span>: <span class=\"string\">\"<span class=\"variable\">$upstream_header_time</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_upstream_addr\"</span>: <span class=\"string\">\"<span class=\"variable\">$upstream_addr</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_upstream_content_length\"</span>: <span class=\"string\">\"<span class=\"variable\">$sent_http_content_length</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_status_code\"</span>: <span class=\"string\">\"<span class=\"variable\">$status</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_scheme\"</span>: <span class=\"string\">\"<span class=\"variable\">$scheme</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_request_method\"</span>: <span class=\"string\">\"<span class=\"variable\">$request_method</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_request_uri\"</span>: <span class=\"string\">\"<span class=\"variable\">$request_uri</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_request\"</span>: <span class=\"string\">\"<span class=\"variable\">$request</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_http_referrer\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_referer</span>\"</span>  &#125;';</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>$remote_portnginxproxyremote_port<br>nginxport2<br>proxyrequest headerx-forworder-forrealip realiprealip_remote_portport, log_format</p>\n<figure class=\"highlight julia\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">log_format json '&#123; <span class=\"string\">\"time\"</span>: <span class=\"string\">\"<span class=\"variable\">$time_iso8601</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_true_client_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_true_client_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_x_real_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_x_real_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_cdn_src_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$http_cdn_src_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_geo_location_ip\"</span>: <span class=\"string\">\"<span class=\"variable\">$client_ip</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_remote_addr\"</span>: <span class=\"string\">\"<span class=\"variable\">$remote_addr</span>\"</span>, '</span><br><span class=\"line\">                    '<span class=\"string\">\"ngx_remote_port\"</span>: <span class=\"string\">\"<span class=\"variable\">$remote_port</span>\"</span>, '</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"nginx server_name_hash_bucket_size","published":1,"author":"xiemx","comments":1,"date":"2017-01-18T03:01:15.000Z","_content":"\nnginx`server_name_hash_bucket_size` 32/64\nserver_name\n```\nhttp {\n    server_names_hash_bucket_size 512;\n}\n```","source":"_posts/nginx-server_name_hash_bucket_size.md","raw":"---\nlayout: post\ntitle: nginx server_name_hash_bucket_size\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-01-18 11:01:15\ntags: [ nginx ]\ncategories:\n    - nginx\n---\n\nnginx`server_name_hash_bucket_size` 32/64\nserver_name\n```\nhttp {\n    server_names_hash_bucket_size 512;\n}\n```","slug":"nginx-server_name_hash_bucket_size","updated":"2019-10-21T06:57:43.017Z","photos":[],"link":"","_id":"ck42dyieg005su9urt708jedd","content":"<p>nginx <code>server_name_hash_bucket_size</code> 32/64<br>server_name</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">http</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">server_names_hash_bucket_size</span> <span class=\"number\">512</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>nginx <code>server_name_hash_bucket_size</code> 32/64<br>server_name</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">http</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">server_names_hash_bucket_size</span> <span class=\"number\">512</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"nginx+uwsgidjango","published":1,"author":"xiemx","comments":1,"date":"2016-07-25T22:07:48.000Z","_content":"### \n```shell\nsudo apt-get install python-dev nginx\npip install uwsgi\n```\n### uwsgidjango\n```shell\nvim test.py test.py,\ndef application(env, start_response):\n    start_response('200 OK', [('Content-Type','text/html')])\n    return \"Hello World\"\n\nshell\nuwsgi http :8001 wsgi-file test.py\n\n\ncurl http://127.0.0.1:8001/\nHello World\n```\n#django_wsgi.pymanage.py\n```python\n### vim django_wsgi.py \n#!/usr/bin/env python\n# coding: utf-8\nimport os\nimport sys\n# UTF8\nreload(sys)\nsys.setdefaultencoding('utf8')\n\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"yoursite.settings\")\n\nfrom django.core.handlers.wsgi import WSGIHandler\napplication = WSGIHandler()\n```\ndjangouwsgiWEB\nDjango`/home/work/src/sites/testdjango1/testdjango/mysite`\n\n\n`uwsgi http :8000 chdir /home/work/src/sites/testdjango1/testdjango/mysite module django_wsgi`\nDjangouwsgiDjango\n\n### django,uwsginginx\n* djangouwsgixml\n```\n<uwsgi>\n    <socket>:8077</socket>\n    <chdir>/home/work/src/sites/testdjango1/testdjango/mysite</chdir>\n    <module>django_wsgi</module>\n    <processes>4</processes> <!--  --> \n    <daemonize>uwsgi.log</daemonize>\n</uwsgi>\n```\n* Nginx\n```\n#nginx\nsudo cp /etc/nginx/sites-available/default /etc/nginx/sites-available/default.bak\nvim /etc/nginx/sites-available/default \n\nserver {\n\n        listen   80;\n        server_name localhost;\n        access_log /var/log/nginx/access.log;\n        error_log /var/log/nginx/error.log;\n\n        #charset koi8-r;\n\n        #access_log  logs/host.access.log  main;\n\n        location / {\n         include        uwsgi_params;\n         uwsgi_pass     127.0.0.1:8077;\n        }\n\n        #error_page  404              /404.html;\n\n        # redirect server error pages to the static page /50x.html\n        #\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n        #method first\n        location ~ ^/static/ {\n            root  /home/hz/PycharmProjects/myscrapy/check_ip/;\n            expires 24h;\n            access_log off;\n        }\n        #method second\n        #location ~* ^.+\\.(css|js|json|ttf|woff|map|woff2)${\n        #    root /home/hz/PycharmProjects/myscrapy/check_ip/;\n        #    access_log off;\n        #    expires 24h;\n        #}      \n}\n```\n\n* \n```shell\nNginxNginx\nnginx -s  reload\nNginx\n\nuWSGI\n\ncd /home/work/src/sites/testdjango1/testdjango/mysite\n\nuwsgi -x djangochina_socket.xml\n```\n* django\n```shell\nsettings.pySTATIC_ROOT\npython manage.py collectstatic\n\nnginxSTATIC_ROOT\n```","source":"_posts/nginx-uwsgi-deploy-django.md","raw":"---\nlayout: post\ntitle: nginx+uwsgidjango\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-07-26 06:07:48\ntags: [ uwsgi, django, python, nginx ]\ncategories:\n  - python\n  - uwsgi\n# permalink: '/2016/07/26/nginxuwsgi%e9%83%a8%e7%bd%b2django%e9%a1%b9%e7%9b%ae'\n---\n### \n```shell\nsudo apt-get install python-dev nginx\npip install uwsgi\n```\n### uwsgidjango\n```shell\nvim test.py test.py,\ndef application(env, start_response):\n    start_response('200 OK', [('Content-Type','text/html')])\n    return \"Hello World\"\n\nshell\nuwsgi http :8001 wsgi-file test.py\n\n\ncurl http://127.0.0.1:8001/\nHello World\n```\n#django_wsgi.pymanage.py\n```python\n### vim django_wsgi.py \n#!/usr/bin/env python\n# coding: utf-8\nimport os\nimport sys\n# UTF8\nreload(sys)\nsys.setdefaultencoding('utf8')\n\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"yoursite.settings\")\n\nfrom django.core.handlers.wsgi import WSGIHandler\napplication = WSGIHandler()\n```\ndjangouwsgiWEB\nDjango`/home/work/src/sites/testdjango1/testdjango/mysite`\n\n\n`uwsgi http :8000 chdir /home/work/src/sites/testdjango1/testdjango/mysite module django_wsgi`\nDjangouwsgiDjango\n\n### django,uwsginginx\n* djangouwsgixml\n```\n<uwsgi>\n    <socket>:8077</socket>\n    <chdir>/home/work/src/sites/testdjango1/testdjango/mysite</chdir>\n    <module>django_wsgi</module>\n    <processes>4</processes> <!--  --> \n    <daemonize>uwsgi.log</daemonize>\n</uwsgi>\n```\n* Nginx\n```\n#nginx\nsudo cp /etc/nginx/sites-available/default /etc/nginx/sites-available/default.bak\nvim /etc/nginx/sites-available/default \n\nserver {\n\n        listen   80;\n        server_name localhost;\n        access_log /var/log/nginx/access.log;\n        error_log /var/log/nginx/error.log;\n\n        #charset koi8-r;\n\n        #access_log  logs/host.access.log  main;\n\n        location / {\n         include        uwsgi_params;\n         uwsgi_pass     127.0.0.1:8077;\n        }\n\n        #error_page  404              /404.html;\n\n        # redirect server error pages to the static page /50x.html\n        #\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n        #method first\n        location ~ ^/static/ {\n            root  /home/hz/PycharmProjects/myscrapy/check_ip/;\n            expires 24h;\n            access_log off;\n        }\n        #method second\n        #location ~* ^.+\\.(css|js|json|ttf|woff|map|woff2)${\n        #    root /home/hz/PycharmProjects/myscrapy/check_ip/;\n        #    access_log off;\n        #    expires 24h;\n        #}      \n}\n```\n\n* \n```shell\nNginxNginx\nnginx -s  reload\nNginx\n\nuWSGI\n\ncd /home/work/src/sites/testdjango1/testdjango/mysite\n\nuwsgi -x djangochina_socket.xml\n```\n* django\n```shell\nsettings.pySTATIC_ROOT\npython manage.py collectstatic\n\nnginxSTATIC_ROOT\n```","slug":"nginx-uwsgi-deploy-django","updated":"2019-10-21T06:57:42.570Z","photos":[],"link":"","_id":"ck42dyiej005wu9uruzte9t7p","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install python-dev nginx</span><br><span class=\"line\">pip install uwsgi</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"uwsgidjango\"><a href=\"#uwsgidjango\" class=\"headerlink\" title=\"uwsgidjango\"></a>uwsgidjango</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim test.py test.py,</span><br><span class=\"line\">def application(env, start_response):</span><br><span class=\"line\">    start_response('200 OK', [('Content-Type','text/html')])</span><br><span class=\"line\">    return \"Hello World\"</span><br><span class=\"line\"></span><br><span class=\"line\">shell</span><br><span class=\"line\">uwsgi http :8001 wsgi-file test.py</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">curl http://127.0.0.1:8001/</span><br><span class=\"line\">Hello World</span><br></pre></td></tr></table></figure>\n\n<p>#django_wsgi.pymanage.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### vim django_wsgi.py </span></span><br><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></span><br><span class=\"line\"><span class=\"comment\"># coding: utf-8</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"comment\"># UTF8</span></span><br><span class=\"line\">reload(sys)</span><br><span class=\"line\">sys.setdefaultencoding(<span class=\"string\">'utf8'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">os.environ.setdefault(<span class=\"string\">\"DJANGO_SETTINGS_MODULE\"</span>, <span class=\"string\">\"yoursite.settings\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> django.core.handlers.wsgi <span class=\"keyword\">import</span> WSGIHandler</span><br><span class=\"line\">application = WSGIHandler()</span><br></pre></td></tr></table></figure>\n\n<p>djangouwsgiWEB<br>Django<code>/home/work/src/sites/testdjango1/testdjango/mysite</code></p>\n<p><br><code>uwsgi http :8000 chdir /home/work/src/sites/testdjango1/testdjango/mysite module django_wsgi</code><br>DjangouwsgiDjango</p>\n<h3 id=\"django-uwsginginx\"><a href=\"#django-uwsginginx\" class=\"headerlink\" title=\"django,uwsginginx\"></a>django,uwsginginx</h3><ul>\n<li><p>djangouwsgixml</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">uwsgi</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">socket</span>&gt;</span>:8077<span class=\"tag\">&lt;/<span class=\"name\">socket</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">chdir</span>&gt;</span>/home/work/src/sites/testdjango1/testdjango/mysite<span class=\"tag\">&lt;/<span class=\"name\">chdir</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">module</span>&gt;</span>django_wsgi<span class=\"tag\">&lt;/<span class=\"name\">module</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">processes</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">processes</span>&gt;</span> <span class=\"comment\">&lt;!--  --&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">daemonize</span>&gt;</span>uwsgi.log<span class=\"tag\">&lt;/<span class=\"name\">daemonize</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">uwsgi</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Nginx</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#nginx</span></span><br><span class=\"line\">sudo cp /etc/nginx/sites-available<span class=\"built_in\">/default </span>/etc/nginx/sites-available/default.bak</span><br><span class=\"line\">vim /etc/nginx/sites-available<span class=\"built_in\">/default </span></span><br><span class=\"line\"></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        listen   80;</span><br><span class=\"line\">        server_name localhost;</span><br><span class=\"line\">        access_log /var/log/nginx/access.log;</span><br><span class=\"line\">        error_log /var/log/nginx/error.log;</span><br><span class=\"line\"></span><br><span class=\"line\">        #charset koi8-r;</span><br><span class=\"line\"></span><br><span class=\"line\">        #access_log  logs/host.access.log  main;</span><br><span class=\"line\"></span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">         include        uwsgi_params;</span><br><span class=\"line\">         uwsgi_pass     127.0.0.1:8077;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        #error_page  404              /404.html;</span><br><span class=\"line\"></span><br><span class=\"line\">        # redirect<span class=\"built_in\"> server </span><span class=\"builtin-name\">error</span> pages <span class=\"keyword\">to</span> the static<span class=\"built_in\"> page </span>/50x.html</span><br><span class=\"line\">        #</span><br><span class=\"line\">        error_page   500 502 503 504  /50x.html;</span><br><span class=\"line\">        location = /50x.html &#123;</span><br><span class=\"line\">            root   html;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        #method first</span><br><span class=\"line\">        location ~ ^/static/ &#123;</span><br><span class=\"line\">            root  /home/hz/PycharmProjects/myscrapy/check_ip/;</span><br><span class=\"line\">            expires 24h;</span><br><span class=\"line\">            access_log off;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        #method second</span><br><span class=\"line\">        #location ~* ^.+\\.(css|js|json|ttf|woff|map|woff2)$&#123;</span><br><span class=\"line\">        #    root /home/hz/PycharmProjects/myscrapy/check_ip/;</span><br><span class=\"line\">        #    access_log off;</span><br><span class=\"line\">        #    expires 24h;</span><br><span class=\"line\">        #&#125;      </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p></p>\n<ul>\n<li><p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">NginxNginx</span><br><span class=\"line\">nginx -s  reload</span><br><span class=\"line\">Nginx</span><br><span class=\"line\"></span><br><span class=\"line\">uWSGI</span><br><span class=\"line\"></span><br><span class=\"line\">cd /home/work/src/sites/testdjango1/testdjango/mysite</span><br><span class=\"line\"></span><br><span class=\"line\">uwsgi -x djangochina_socket.xml</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>django</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">settings.pySTATIC_ROOT</span><br><span class=\"line\">python manage.py collectstatic</span><br><span class=\"line\"></span><br><span class=\"line\">nginxSTATIC_ROOT</span><br></pre></td></tr></table></figure></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install python-dev nginx</span><br><span class=\"line\">pip install uwsgi</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"uwsgidjango\"><a href=\"#uwsgidjango\" class=\"headerlink\" title=\"uwsgidjango\"></a>uwsgidjango</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim test.py test.py,</span><br><span class=\"line\">def application(env, start_response):</span><br><span class=\"line\">    start_response('200 OK', [('Content-Type','text/html')])</span><br><span class=\"line\">    return \"Hello World\"</span><br><span class=\"line\"></span><br><span class=\"line\">shell</span><br><span class=\"line\">uwsgi http :8001 wsgi-file test.py</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">curl http://127.0.0.1:8001/</span><br><span class=\"line\">Hello World</span><br></pre></td></tr></table></figure>\n\n<p>#django_wsgi.pymanage.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### vim django_wsgi.py </span></span><br><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></span><br><span class=\"line\"><span class=\"comment\"># coding: utf-8</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"comment\"># UTF8</span></span><br><span class=\"line\">reload(sys)</span><br><span class=\"line\">sys.setdefaultencoding(<span class=\"string\">'utf8'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">os.environ.setdefault(<span class=\"string\">\"DJANGO_SETTINGS_MODULE\"</span>, <span class=\"string\">\"yoursite.settings\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> django.core.handlers.wsgi <span class=\"keyword\">import</span> WSGIHandler</span><br><span class=\"line\">application = WSGIHandler()</span><br></pre></td></tr></table></figure>\n\n<p>djangouwsgiWEB<br>Django<code>/home/work/src/sites/testdjango1/testdjango/mysite</code></p>\n<p><br><code>uwsgi http :8000 chdir /home/work/src/sites/testdjango1/testdjango/mysite module django_wsgi</code><br>DjangouwsgiDjango</p>\n<h3 id=\"django-uwsginginx\"><a href=\"#django-uwsginginx\" class=\"headerlink\" title=\"django,uwsginginx\"></a>django,uwsginginx</h3><ul>\n<li><p>djangouwsgixml</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">uwsgi</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">socket</span>&gt;</span>:8077<span class=\"tag\">&lt;/<span class=\"name\">socket</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">chdir</span>&gt;</span>/home/work/src/sites/testdjango1/testdjango/mysite<span class=\"tag\">&lt;/<span class=\"name\">chdir</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">module</span>&gt;</span>django_wsgi<span class=\"tag\">&lt;/<span class=\"name\">module</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">processes</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">processes</span>&gt;</span> <span class=\"comment\">&lt;!--  --&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">daemonize</span>&gt;</span>uwsgi.log<span class=\"tag\">&lt;/<span class=\"name\">daemonize</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">uwsgi</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Nginx</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#nginx</span></span><br><span class=\"line\">sudo cp /etc/nginx/sites-available<span class=\"built_in\">/default </span>/etc/nginx/sites-available/default.bak</span><br><span class=\"line\">vim /etc/nginx/sites-available<span class=\"built_in\">/default </span></span><br><span class=\"line\"></span><br><span class=\"line\">server &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        listen   80;</span><br><span class=\"line\">        server_name localhost;</span><br><span class=\"line\">        access_log /var/log/nginx/access.log;</span><br><span class=\"line\">        error_log /var/log/nginx/error.log;</span><br><span class=\"line\"></span><br><span class=\"line\">        #charset koi8-r;</span><br><span class=\"line\"></span><br><span class=\"line\">        #access_log  logs/host.access.log  main;</span><br><span class=\"line\"></span><br><span class=\"line\">        location / &#123;</span><br><span class=\"line\">         include        uwsgi_params;</span><br><span class=\"line\">         uwsgi_pass     127.0.0.1:8077;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        #error_page  404              /404.html;</span><br><span class=\"line\"></span><br><span class=\"line\">        # redirect<span class=\"built_in\"> server </span><span class=\"builtin-name\">error</span> pages <span class=\"keyword\">to</span> the static<span class=\"built_in\"> page </span>/50x.html</span><br><span class=\"line\">        #</span><br><span class=\"line\">        error_page   500 502 503 504  /50x.html;</span><br><span class=\"line\">        location = /50x.html &#123;</span><br><span class=\"line\">            root   html;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        #method first</span><br><span class=\"line\">        location ~ ^/static/ &#123;</span><br><span class=\"line\">            root  /home/hz/PycharmProjects/myscrapy/check_ip/;</span><br><span class=\"line\">            expires 24h;</span><br><span class=\"line\">            access_log off;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        #method second</span><br><span class=\"line\">        #location ~* ^.+\\.(css|js|json|ttf|woff|map|woff2)$&#123;</span><br><span class=\"line\">        #    root /home/hz/PycharmProjects/myscrapy/check_ip/;</span><br><span class=\"line\">        #    access_log off;</span><br><span class=\"line\">        #    expires 24h;</span><br><span class=\"line\">        #&#125;      </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p></p>\n<ul>\n<li><p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">NginxNginx</span><br><span class=\"line\">nginx -s  reload</span><br><span class=\"line\">Nginx</span><br><span class=\"line\"></span><br><span class=\"line\">uWSGI</span><br><span class=\"line\"></span><br><span class=\"line\">cd /home/work/src/sites/testdjango1/testdjango/mysite</span><br><span class=\"line\"></span><br><span class=\"line\">uwsgi -x djangochina_socket.xml</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>django</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">settings.pySTATIC_ROOT</span><br><span class=\"line\">python manage.py collectstatic</span><br><span class=\"line\"></span><br><span class=\"line\">nginxSTATIC_ROOT</span><br></pre></td></tr></table></figure></li>\n</ul>\n"},{"layout":"post","title":"nginx websocket proxying","published":1,"author":"xiemx","comments":1,"date":"2016-12-13T17:12:43.000Z","_content":"```\nserver {\n        ...\n\n        location /chat/ {\n            proxy_pass http://backend;\n            proxy_http_version 1.1;\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection $connection_upgrade;\n        }\n    }\n\n``` \nwebsocket proxyinghttp://nginx.org/en/docs/http/websocket.html","source":"_posts/nginx-websocket-proxying.md","raw":"---\nlayout: post\ntitle: nginx websocket proxying\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-12-14 01:12:43\ntags: [ nginx, websocket ]\ncategories:\n    - nginx\n# permalink: '/2016/12/14/nginx%e6%94%af%e6%8c%81ssh%e8%bd%ac%e5%8f%91%ef%bc%8dwebsocket-proxying'\n---\n```\nserver {\n        ...\n\n        location /chat/ {\n            proxy_pass http://backend;\n            proxy_http_version 1.1;\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection $connection_upgrade;\n        }\n    }\n\n``` \nwebsocket proxyinghttp://nginx.org/en/docs/http/websocket.html","slug":"nginx-websocket-proxying","updated":"2019-10-21T06:57:42.989Z","photos":[],"link":"","_id":"ck42dyiel0060u9ur1fmq7dra","content":"<pre><code>server {\n        ...\n\n        location /chat/ {\n            proxy_pass http://backend;\n            proxy_http_version 1.1;\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection $connection_upgrade;\n        }\n    }\n</code></pre><p>websocket proxying<a href=\"http://nginx.org/en/docs/http/websocket.html\" target=\"_blank\" rel=\"noopener\">http://nginx.org/en/docs/http/websocket.html</a></p>\n","site":{"data":{}},"excerpt":"","more":"<pre><code>server {\n        ...\n\n        location /chat/ {\n            proxy_pass http://backend;\n            proxy_http_version 1.1;\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection $connection_upgrade;\n        }\n    }\n</code></pre><p>websocket proxying<a href=\"http://nginx.org/en/docs/http/websocket.html\" target=\"_blank\" rel=\"noopener\">http://nginx.org/en/docs/http/websocket.html</a></p>\n"},{"layout":"post","title":"NTP","published":1,"author":"xiemx","comments":1,"date":"2015-11-29T00:11:58.000Z","_content":"NTP\n\n`RHEL6.5`\n\n`ntp-4.2.6p5-1.el6.x86_64`\n\n\n```\nyum install ntp\n```\nntp\n```shell\n[root@localhost html]# egrep  -v \"^$|^#\" /etc/ntp.conf\ndriftfile /var/lib/ntp/drift\nrestrict default kod nomodify notrap nopeer noqueryipv4\nrestrict -6 default kod nomodify notrap nopeer noqueryipv6\nrestrict 127.0.0.1\nrestrict -6 ::1\nserver 0.rhel.pool.ntp.org iburstserver\nserver 1.rhel.pool.ntp.org iburst\nserver 2.rhel.pool.ntp.org iburst\nserver 3.rhel.pool.ntp.org iburst\nincludefile /etc/ntp/crypto/pw\nkeys /etc/ntp/keys\n```\n\n```\nrestrict 192.168.10.10 mask 255.255.255.0 nomodify 192.168.10.10/24\nrestrict 192.168.10.0 mask 255.255.255.0 nomodify 192.168.10.0/24\nserver 210.72.145.44 \n```\nntpdate\n```\nntpdate 210.72.145.44\n```\nntpdatentpntp\n\n#### ntp\n```\n210.72.145.44 (IP)\nntp.sjtu.edu.cn 202.120.2.101 (NTP\ns1b.time.edu.cn \ns1c.time.edu.cn \ns1d.time.edu.cn \ns1e.time.edu.cn \ns2d.time.edu.cn \ns2e.time.edu.cn \ns2f.time.edu.cn \ns2g.time.edu.cn \n```\n ","source":"_posts/ntp-server.md","raw":"---\nlayout: post\ntitle: NTP\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-11-29 08:11:58\ntags: [ linux, ntp ]\ncategories:\n    - linux\n# permalink: '/2015/11/29/ntp%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%90%ad%e5%bb%ba'\n---\nNTP\n\n`RHEL6.5`\n\n`ntp-4.2.6p5-1.el6.x86_64`\n\n\n```\nyum install ntp\n```\nntp\n```shell\n[root@localhost html]# egrep  -v \"^$|^#\" /etc/ntp.conf\ndriftfile /var/lib/ntp/drift\nrestrict default kod nomodify notrap nopeer noqueryipv4\nrestrict -6 default kod nomodify notrap nopeer noqueryipv6\nrestrict 127.0.0.1\nrestrict -6 ::1\nserver 0.rhel.pool.ntp.org iburstserver\nserver 1.rhel.pool.ntp.org iburst\nserver 2.rhel.pool.ntp.org iburst\nserver 3.rhel.pool.ntp.org iburst\nincludefile /etc/ntp/crypto/pw\nkeys /etc/ntp/keys\n```\n\n```\nrestrict 192.168.10.10 mask 255.255.255.0 nomodify 192.168.10.10/24\nrestrict 192.168.10.0 mask 255.255.255.0 nomodify 192.168.10.0/24\nserver 210.72.145.44 \n```\nntpdate\n```\nntpdate 210.72.145.44\n```\nntpdatentpntp\n\n#### ntp\n```\n210.72.145.44 (IP)\nntp.sjtu.edu.cn 202.120.2.101 (NTP\ns1b.time.edu.cn \ns1c.time.edu.cn \ns1d.time.edu.cn \ns1e.time.edu.cn \ns2d.time.edu.cn \ns2e.time.edu.cn \ns2f.time.edu.cn \ns2g.time.edu.cn \n```\n ","slug":"ntp-server","updated":"2019-10-21T06:57:42.386Z","photos":[],"link":"","_id":"ck42dyiem0064u9urokuo0ek4","content":"<p>NTP</p>\n<p><code>RHEL6.5</code></p>\n<p><code>ntp-4.2.6p5-1.el6.x86_64</code></p>\n<p></p>\n<figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum <span class=\"keyword\">install</span> ntp</span><br></pre></td></tr></table></figure>\n\n<p>ntp</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost html]# egrep  -v \"^$|^#\" /etc/ntp.conf</span><br><span class=\"line\">driftfile /var/lib/ntp/drift</span><br><span class=\"line\">restrict default kod nomodify notrap nopeer noqueryipv4</span><br><span class=\"line\">restrict -6 default kod nomodify notrap nopeer noqueryipv6</span><br><span class=\"line\">restrict 127.0.0.1</span><br><span class=\"line\">restrict -6 ::1</span><br><span class=\"line\">server 0.rhel.pool.ntp.org iburstserver</span><br><span class=\"line\">server 1.rhel.pool.ntp.org iburst</span><br><span class=\"line\">server 2.rhel.pool.ntp.org iburst</span><br><span class=\"line\">server 3.rhel.pool.ntp.org iburst</span><br><span class=\"line\">includefile /etc/ntp/crypto/pw</span><br><span class=\"line\">keys /etc/ntp/keys</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">restrict <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.10</span> mask <span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.0</span> nomodify <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.10</span>/<span class=\"number\">24</span></span><br><span class=\"line\">restrict <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.0</span> mask <span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.0</span> nomodify <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.0</span>/<span class=\"number\">24</span></span><br><span class=\"line\">server <span class=\"number\">210.72</span><span class=\"number\">.145</span><span class=\"number\">.44</span> </span><br></pre></td></tr></table></figure>\n\n<p>ntpdate</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ntpdate <span class=\"number\">210.72</span><span class=\"number\">.145</span><span class=\"number\">.44</span></span><br></pre></td></tr></table></figure>\n\n<p>ntpdatentpntp</p>\n<h4 id=\"ntp\"><a href=\"#ntp\" class=\"headerlink\" title=\"ntp\"></a>ntp</h4><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">210.72</span>.<span class=\"number\">145.44</span> (IP)</span><br><span class=\"line\">ntp<span class=\"selector-class\">.sjtu</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> <span class=\"number\">202.120</span>.<span class=\"number\">2.101</span> (NTP</span><br><span class=\"line\">s1b<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br><span class=\"line\">s1c<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br><span class=\"line\">s1d<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br><span class=\"line\">s1e<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br><span class=\"line\">s2d<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br><span class=\"line\">s2e<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br><span class=\"line\">s2f<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br><span class=\"line\">s2g<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p>NTP</p>\n<p><code>RHEL6.5</code></p>\n<p><code>ntp-4.2.6p5-1.el6.x86_64</code></p>\n<p></p>\n<figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum <span class=\"keyword\">install</span> ntp</span><br></pre></td></tr></table></figure>\n\n<p>ntp</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost html]# egrep  -v \"^$|^#\" /etc/ntp.conf</span><br><span class=\"line\">driftfile /var/lib/ntp/drift</span><br><span class=\"line\">restrict default kod nomodify notrap nopeer noqueryipv4</span><br><span class=\"line\">restrict -6 default kod nomodify notrap nopeer noqueryipv6</span><br><span class=\"line\">restrict 127.0.0.1</span><br><span class=\"line\">restrict -6 ::1</span><br><span class=\"line\">server 0.rhel.pool.ntp.org iburstserver</span><br><span class=\"line\">server 1.rhel.pool.ntp.org iburst</span><br><span class=\"line\">server 2.rhel.pool.ntp.org iburst</span><br><span class=\"line\">server 3.rhel.pool.ntp.org iburst</span><br><span class=\"line\">includefile /etc/ntp/crypto/pw</span><br><span class=\"line\">keys /etc/ntp/keys</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">restrict <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.10</span> mask <span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.0</span> nomodify <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.10</span>/<span class=\"number\">24</span></span><br><span class=\"line\">restrict <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.0</span> mask <span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.0</span> nomodify <span class=\"number\">192.168</span><span class=\"number\">.10</span><span class=\"number\">.0</span>/<span class=\"number\">24</span></span><br><span class=\"line\">server <span class=\"number\">210.72</span><span class=\"number\">.145</span><span class=\"number\">.44</span> </span><br></pre></td></tr></table></figure>\n\n<p>ntpdate</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ntpdate <span class=\"number\">210.72</span><span class=\"number\">.145</span><span class=\"number\">.44</span></span><br></pre></td></tr></table></figure>\n\n<p>ntpdatentpntp</p>\n<h4 id=\"ntp\"><a href=\"#ntp\" class=\"headerlink\" title=\"ntp\"></a>ntp</h4><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">210.72</span>.<span class=\"number\">145.44</span> (IP)</span><br><span class=\"line\">ntp<span class=\"selector-class\">.sjtu</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> <span class=\"number\">202.120</span>.<span class=\"number\">2.101</span> (NTP</span><br><span class=\"line\">s1b<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br><span class=\"line\">s1c<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br><span class=\"line\">s1d<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br><span class=\"line\">s1e<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br><span class=\"line\">s2d<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br><span class=\"line\">s2e<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br><span class=\"line\">s2f<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br><span class=\"line\">s2g<span class=\"selector-class\">.time</span><span class=\"selector-class\">.edu</span><span class=\"selector-class\">.cn</span> </span><br></pre></td></tr></table></figure>\n\n"},{"layout":"post","title":"PHP date()","published":1,"author":"xiemx","comments":1,"date":"2015-10-10T20:10:30.000Z","_content":"### \n```\n  PHP Warning: date() [function.date]: It is not safe to rely on the systems timezone settings.\n  You are *required* to use the date.timezone setting or the date_default_timezone_set() function.\n  In case you used any of those methods and you are still getting this warning, you most likely\n  misspelled the timezone identifier. We selected UTC for 8.0/no DST instead in\n```\nphp +0800 Asia/shanghai\n### \n()\n```\n1. date_default_timezone_set() date_default_timezone_set('PRC');\n2.  ini_set('date.timezone','Asia/Shanghai');\n3. php.iniphp.inidate.timezone date.timezone = PRC\n```","source":"_posts/php-data-timezone.md","raw":"---\nlayout: post\ntitle: PHP date()\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-10-11 04:10:30\ntags: [ php, debug ]\ncategories:\n    - php\n---\n### \n```\n  PHP Warning: date() [function.date]: It is not safe to rely on the systems timezone settings.\n  You are *required* to use the date.timezone setting or the date_default_timezone_set() function.\n  In case you used any of those methods and you are still getting this warning, you most likely\n  misspelled the timezone identifier. We selected UTC for 8.0/no DST instead in\n```\nphp +0800 Asia/shanghai\n### \n()\n```\n1. date_default_timezone_set() date_default_timezone_set('PRC');\n2.  ini_set('date.timezone','Asia/Shanghai');\n3. php.iniphp.inidate.timezone date.timezone = PRC\n```","slug":"php-data-timezone","updated":"2019-10-21T06:57:42.386Z","photos":[],"link":"","_id":"ck42dyien0067u9urtifjjla4","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PHP <span class=\"built_in\">Warning</span>: <span class=\"type\">date</span>() [<span class=\"keyword\">function</span>.date]: It <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> safe <span class=\"keyword\">to</span> rely <span class=\"keyword\">on</span> the <span class=\"keyword\">system</span>s timezone settings.</span><br><span class=\"line\">You are *required* <span class=\"keyword\">to</span> use the <span class=\"type\">date</span>.timezone setting <span class=\"keyword\">or</span> the date_default_timezone_set() <span class=\"keyword\">function</span>.</span><br><span class=\"line\"><span class=\"keyword\">In</span> <span class=\"keyword\">case</span> you used <span class=\"keyword\">any</span> <span class=\"keyword\">of</span> those methods <span class=\"keyword\">and</span> you are still getting this <span class=\"built_in\">warning</span>, you most likely</span><br><span class=\"line\">misspelled the timezone identifier. We selected UTC <span class=\"keyword\">for</span> <span class=\"number\">8.0</span>/<span class=\"keyword\">no</span> DST <span class=\"keyword\">instead</span> <span class=\"keyword\">in</span></span><br></pre></td></tr></table></figure>\n\n<p>php +0800 Asia/shanghai</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>()</p>\n<figure class=\"highlight axapta\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.</span> date_default_timezone_set() date_default_timezone_set(<span class=\"string\">'PRC'</span>);</span><br><span class=\"line\"><span class=\"number\">2.</span>  ini_set(<span class=\"string\">'date.timezone'</span>,<span class=\"string\">'Asia/Shanghai'</span>);</span><br><span class=\"line\"><span class=\"number\">3.</span> php.iniphp.ini<span class=\"keyword\">date</span>.timezone <span class=\"keyword\">date</span>.timezone = PRC</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PHP <span class=\"built_in\">Warning</span>: <span class=\"type\">date</span>() [<span class=\"keyword\">function</span>.date]: It <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> safe <span class=\"keyword\">to</span> rely <span class=\"keyword\">on</span> the <span class=\"keyword\">system</span>s timezone settings.</span><br><span class=\"line\">You are *required* <span class=\"keyword\">to</span> use the <span class=\"type\">date</span>.timezone setting <span class=\"keyword\">or</span> the date_default_timezone_set() <span class=\"keyword\">function</span>.</span><br><span class=\"line\"><span class=\"keyword\">In</span> <span class=\"keyword\">case</span> you used <span class=\"keyword\">any</span> <span class=\"keyword\">of</span> those methods <span class=\"keyword\">and</span> you are still getting this <span class=\"built_in\">warning</span>, you most likely</span><br><span class=\"line\">misspelled the timezone identifier. We selected UTC <span class=\"keyword\">for</span> <span class=\"number\">8.0</span>/<span class=\"keyword\">no</span> DST <span class=\"keyword\">instead</span> <span class=\"keyword\">in</span></span><br></pre></td></tr></table></figure>\n\n<p>php +0800 Asia/shanghai</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>()</p>\n<figure class=\"highlight axapta\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.</span> date_default_timezone_set() date_default_timezone_set(<span class=\"string\">'PRC'</span>);</span><br><span class=\"line\"><span class=\"number\">2.</span>  ini_set(<span class=\"string\">'date.timezone'</span>,<span class=\"string\">'Asia/Shanghai'</span>);</span><br><span class=\"line\"><span class=\"number\">3.</span> php.iniphp.ini<span class=\"keyword\">date</span>.timezone <span class=\"keyword\">date</span>.timezone = PRC</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"PHP_CURL ","published":1,"author":"xiemx","comments":1,"date":"2016-07-05T19:07:24.000Z","_content":"```php\n#php\nfunction curl_string ($url,$user_agent,$proxy){\n\n $ch = curl_init();\n curl_setopt ($ch, CURLOPT_PROXY, $proxy);\n curl_setopt ($ch, CURLOPT_URL, $url);\n curl_setopt ($ch, CURLOPT_USERAGENT, $user_agent);\n curl_setopt ($ch, CURLOPT_HEADER, 1);\n curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);\n curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);\n curl_setopt ($ch, CURLOPT_TIMEOUT, 120);\n $result = curl_exec ($ch);\n curl_close($ch);\n return $result;\n\n}\n\n$url_page = \"http://www.google.com\";\n$user_agent = \"Mozilla/4.0\";\n$proxy = \"http://192.11.222.124:8000\";\n$string = curl_string($url_page,$user_agent,$proxy);\necho $string;\n\n```","source":"_posts/php_curl.md","raw":"---\nlayout: post\ntitle: PHP_CURL \npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-07-06 03:07:24\ntags: [ php ]\ncategories:\n    - php\n---\n```php\n#php\nfunction curl_string ($url,$user_agent,$proxy){\n\n $ch = curl_init();\n curl_setopt ($ch, CURLOPT_PROXY, $proxy);\n curl_setopt ($ch, CURLOPT_URL, $url);\n curl_setopt ($ch, CURLOPT_USERAGENT, $user_agent);\n curl_setopt ($ch, CURLOPT_HEADER, 1);\n curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);\n curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);\n curl_setopt ($ch, CURLOPT_TIMEOUT, 120);\n $result = curl_exec ($ch);\n curl_close($ch);\n return $result;\n\n}\n\n$url_page = \"http://www.google.com\";\n$user_agent = \"Mozilla/4.0\";\n$proxy = \"http://192.11.222.124:8000\";\n$string = curl_string($url_page,$user_agent,$proxy);\necho $string;\n\n```","slug":"php_curl","updated":"2019-10-21T06:57:42.702Z","photos":[],"link":"","_id":"ck42dyieo006cu9urw3tn9x97","content":"<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">curl_string</span> <span class=\"params\">($url,$user_agent,$proxy)</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"> $ch = curl_init();</span><br><span class=\"line\"> curl_setopt ($ch, CURLOPT_PROXY, $proxy);</span><br><span class=\"line\"> curl_setopt ($ch, CURLOPT_URL, $url);</span><br><span class=\"line\"> curl_setopt ($ch, CURLOPT_USERAGENT, $user_agent);</span><br><span class=\"line\"> curl_setopt ($ch, CURLOPT_HEADER, <span class=\"number\">1</span>);</span><br><span class=\"line\"> curl_setopt ($ch, CURLOPT_RETURNTRANSFER, <span class=\"number\">1</span>);</span><br><span class=\"line\"> curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, <span class=\"number\">1</span>);</span><br><span class=\"line\"> curl_setopt ($ch, CURLOPT_TIMEOUT, <span class=\"number\">120</span>);</span><br><span class=\"line\"> $result = curl_exec ($ch);</span><br><span class=\"line\"> curl_close($ch);</span><br><span class=\"line\"> <span class=\"keyword\">return</span> $result;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$url_page = <span class=\"string\">\"http://www.google.com\"</span>;</span><br><span class=\"line\">$user_agent = <span class=\"string\">\"Mozilla/4.0\"</span>;</span><br><span class=\"line\">$proxy = <span class=\"string\">\"http://192.11.222.124:8000\"</span>;</span><br><span class=\"line\">$string = curl_string($url_page,$user_agent,$proxy);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $string;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#php</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">curl_string</span> <span class=\"params\">($url,$user_agent,$proxy)</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"> $ch = curl_init();</span><br><span class=\"line\"> curl_setopt ($ch, CURLOPT_PROXY, $proxy);</span><br><span class=\"line\"> curl_setopt ($ch, CURLOPT_URL, $url);</span><br><span class=\"line\"> curl_setopt ($ch, CURLOPT_USERAGENT, $user_agent);</span><br><span class=\"line\"> curl_setopt ($ch, CURLOPT_HEADER, <span class=\"number\">1</span>);</span><br><span class=\"line\"> curl_setopt ($ch, CURLOPT_RETURNTRANSFER, <span class=\"number\">1</span>);</span><br><span class=\"line\"> curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, <span class=\"number\">1</span>);</span><br><span class=\"line\"> curl_setopt ($ch, CURLOPT_TIMEOUT, <span class=\"number\">120</span>);</span><br><span class=\"line\"> $result = curl_exec ($ch);</span><br><span class=\"line\"> curl_close($ch);</span><br><span class=\"line\"> <span class=\"keyword\">return</span> $result;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$url_page = <span class=\"string\">\"http://www.google.com\"</span>;</span><br><span class=\"line\">$user_agent = <span class=\"string\">\"Mozilla/4.0\"</span>;</span><br><span class=\"line\">$proxy = <span class=\"string\">\"http://192.11.222.124:8000\"</span>;</span><br><span class=\"line\">$string = curl_string($url_page,$user_agent,$proxy);</span><br><span class=\"line\"><span class=\"keyword\">echo</span> $string;</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"PHPCMS V9 -xxx","published":1,"author":"xiemx","comments":1,"date":"2015-09-28T18:09:35.000Z","_content":" /phpcms/modules/admin/index.php\n\n\n```php\nif($rtime['times'] >= $maxloginfailedtimes) {\n$minute = 60-floor((SYS_TIME-$rtime['logintime'])/60);\nshowmessage(L('wait_1_hour',array('minute'=>$minute)));\n}\n```\n4","source":"_posts/phpcms-v9-password-retry-too-more.md","raw":"---\nlayout: post\ntitle: PHPCMS V9 -xxx\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-09-29 02:09:35\ntags: [ php, debug, CMS ]\ncategories:\n    - php\n# permalink: '/2015/09/29/phpcms-v9%e5%af%86%e7%a0%81%e9%87%8d%e8%af%95%e6%ac%a1%e6%95%b0%e5%a4%aa%e5%a4%9a%ef%bc%8c%e8%af%b7%e8%bf%87-xxx%e5%88%86%e9%92%9f%e5%90%8e%e9%87%8d%e6%96%b0%e7%99%bb%e5%bd%95%ef%bc%81'\n---\n /phpcms/modules/admin/index.php\n\n\n```php\nif($rtime['times'] >= $maxloginfailedtimes) {\n$minute = 60-floor((SYS_TIME-$rtime['logintime'])/60);\nshowmessage(L('wait_1_hour',array('minute'=>$minute)));\n}\n```\n4","slug":"phpcms-v9-password-retry-too-more","updated":"2019-10-21T09:02:14.347Z","photos":[],"link":"","_id":"ck42dyiep006fu9uricgx4r1l","content":"<p> /phpcms/modules/admin/index.php</p>\n<p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span>($rtime[<span class=\"string\">'times'</span>] &gt;= $maxloginfailedtimes) &#123;</span><br><span class=\"line\">$minute = <span class=\"number\">60</span>-floor((SYS_TIME-$rtime[<span class=\"string\">'logintime'</span>])/<span class=\"number\">60</span>);</span><br><span class=\"line\">showmessage(L(<span class=\"string\">'wait_1_hour'</span>,<span class=\"keyword\">array</span>(<span class=\"string\">'minute'</span>=&gt;$minute)));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>4</p>\n","site":{"data":{}},"excerpt":"","more":"<p> /phpcms/modules/admin/index.php</p>\n<p></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span>($rtime[<span class=\"string\">'times'</span>] &gt;= $maxloginfailedtimes) &#123;</span><br><span class=\"line\">$minute = <span class=\"number\">60</span>-floor((SYS_TIME-$rtime[<span class=\"string\">'logintime'</span>])/<span class=\"number\">60</span>);</span><br><span class=\"line\">showmessage(L(<span class=\"string\">'wait_1_hour'</span>,<span class=\"keyword\">array</span>(<span class=\"string\">'minute'</span>=&gt;$minute)));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>4</p>\n"},{"layout":"post","title":"phpmyadmin","published":1,"author":"xiemx","comments":1,"date":"2015-08-23T18:08:12.000Z","_content":"phpmyadminphp.iniphpmyadmin\n\n#### php.ini**\n\nphp.iniphp.ini`upload_max_filesize``post_max_size`\n\n#### phpphpmyadmin\n\nphpmyadminphp.ini`max_execution_time`php `max_input_time`php`memory_limit`php phpmyadminphpphp\n\n#### phpmyadmin\n\nphp.iniphpmyadmin\n\n1phpmyadmin config`$cfg'ExecTimeLimit'`3000\n\n2phpmyadminimport`$memory_limit`\n\nphp.inimemory_limit2M10Mphp.ini\n\nphp.iniphpmyadminphpmyadminphpmyadmin\n","source":"_posts/phpmyadmin-upload-limit-size.md","raw":"---\nlayout: post\ntitle: phpmyadmin\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-08-24 02:08:12\ntags: [ mysql, phpmyadmin, php, database]\ncategories:\n    - mysql\n# permalink: '/2015/08/24/phpmyadmin%e4%b8%8a%e4%bc%a0%e6%96%87%e4%bb%b6%e5%a4%a7%e5%b0%8f%e4%bf%ae%e6%94%b9%e9%99%90%e5%88%b6'\n---\nphpmyadminphp.iniphpmyadmin\n\n#### php.ini**\n\nphp.iniphp.ini`upload_max_filesize``post_max_size`\n\n#### phpphpmyadmin\n\nphpmyadminphp.ini`max_execution_time`php `max_input_time`php`memory_limit`php phpmyadminphpphp\n\n#### phpmyadmin\n\nphp.iniphpmyadmin\n\n1phpmyadmin config`$cfg'ExecTimeLimit'`3000\n\n2phpmyadminimport`$memory_limit`\n\nphp.inimemory_limit2M10Mphp.ini\n\nphp.iniphpmyadminphpmyadminphpmyadmin\n","slug":"phpmyadmin-upload-limit-size","updated":"2019-10-21T09:02:02.048Z","photos":[],"link":"","_id":"ck42dyier006ju9urjnalmtlb","content":"<p>phpmyadminphp.iniphpmyadmin</p>\n<h4 id=\"php-ini\"><a href=\"#php-ini\" class=\"headerlink\" title=\"php.ini**\"></a>php.ini**</h4><p>php.ini php.ini<code>upload_max_filesize</code><code>post_max_size</code></p>\n<h4 id=\"phpphpmyadmin\"><a href=\"#phpphpmyadmin\" class=\"headerlink\" title=\"phpphpmyadmin\"></a>phpphpmyadmin</h4><p>phpmyadminphp.ini<code>max_execution_time</code>php <code>max_input_time</code>php<code>memory_limit</code>php phpmyadminphpphp</p>\n<h4 id=\"phpmyadmin\"><a href=\"#phpmyadmin\" class=\"headerlink\" title=\"phpmyadmin\"></a>phpmyadmin</h4><p>php.iniphpmyadmin</p>\n<p>1phpmyadmin config<code>$cfg&#39;ExecTimeLimit&#39;</code>3000</p>\n<p>2phpmyadminimport<code>$memory_limit</code></p>\n<p>php.inimemory_limit2M10Mphp.ini</p>\n<p>php.iniphpmyadminphpmyadminphpmyadmin</p>\n","site":{"data":{}},"excerpt":"","more":"<p>phpmyadminphp.iniphpmyadmin</p>\n<h4 id=\"php-ini\"><a href=\"#php-ini\" class=\"headerlink\" title=\"php.ini**\"></a>php.ini**</h4><p>php.ini php.ini<code>upload_max_filesize</code><code>post_max_size</code></p>\n<h4 id=\"phpphpmyadmin\"><a href=\"#phpphpmyadmin\" class=\"headerlink\" title=\"phpphpmyadmin\"></a>phpphpmyadmin</h4><p>phpmyadminphp.ini<code>max_execution_time</code>php <code>max_input_time</code>php<code>memory_limit</code>php phpmyadminphpphp</p>\n<h4 id=\"phpmyadmin\"><a href=\"#phpmyadmin\" class=\"headerlink\" title=\"phpmyadmin\"></a>phpmyadmin</h4><p>php.iniphpmyadmin</p>\n<p>1phpmyadmin config<code>$cfg&#39;ExecTimeLimit&#39;</code>3000</p>\n<p>2phpmyadminimport<code>$memory_limit</code></p>\n<p>php.inimemory_limit2M10Mphp.ini</p>\n<p>php.iniphpmyadminphpmyadminphpmyadmin</p>\n"},{"layout":"post","title":"PostgreSQL","published":1,"author":"xiemx","comments":1,"date":"2019-07-08T03:07:36.000Z","_content":"#### postgresqlmaster\n```sql\n#select * from pg_stat_replication; \npostgres=# select * from pg_stat_replication;\n-[ RECORD 1 ]----+------------------------------\npid              | 13321\nusesysid         | 17019\nusename          | replication\napplication_name | walreceiver\nclient_addr      | 10.0.0.81\nclient_hostname  | \nclient_port      | 42809\nbackend_start    | 2016-08-11 10:57:35.856289+08\nbackend_xmin     | \nstate            | streaming --\nsent_location    | 1/E0CE9750\nwrite_location   | 1/E0CE9750\nflush_location   | 1/E0CE9750\nreplay_location  | 1/E0CE9750\nsync_priority    | 0\nsync_state       | async  --\n\nstate: \n    streaming : \n    startup : \n    catchup: \n\nsync_state: .\n    async : \n    sync : \n    potential: ,\n```\n#### master \n```sql\n#select pg_xlog_location_diff(sent_location, replay_location) from pg_stat_replication; \n\nposrgresql=# select pg_xlog_location_diff(sent_location, replay_location) from pg_stat_replication; \n pg_xlog_location_diff \n-----------------------\n                      0\n(1 row)\n```\n#### slavesql\n```sql\nSELECT CASE WHEN pg_last_xlog_receive_location() = pg_last_xlog_replay_location()\n    THEN 0\n    ELSE EXTRACT (EPOCH FROM now() - pg_last_xact_replay_timestamp())\n    END AS log_delay;\n\npostgres=# SELECT CASE WHEN pg_last_xlog_receive_location() = pg_last_xlog_replay_location()\npostgres-#     THEN 0\npostgres-#     ELSE EXTRACT (EPOCH FROM now() - pg_last_xact_replay_timestamp())\npostgres-#     END AS log_delay;\n log_delay\n-----------\n         0\n(1 row)\n```\n#### slaverecovery\n```sql\nselect pg_is_in_recovery();\npostgres=# select pg_is_in_recovery();\n pg_is_in_recovery\n-------------------\n t\n(1 row)\n```\n#### slavereploy\n```sql\n#select pg_last_xact_replay_timestamp();\npostgres=# select pg_last_xact_replay_timestamp();\n pg_last_xact_replay_timestamp\n-------------------------------\n 2019-07-08 03:01:33.854131+00\n(1 row)\n```\n\n#### slavereploy\n```sql\n#select pg_last_xlog_replay_location();\npostgres=# select pg_last_xlog_replay_location();\n pg_last_xlog_replay_location\n------------------------------\n 220C/56EB4C10\n(1 row)\n```","source":"_posts/postgresql-replica-status.md","raw":"---\nlayout: post\ntitle: PostgreSQL\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2019-07-08 11:07:36\ntags: [ postgresql, database ]\ncategories:\n    - postgresql\n# permalink: '/2019/07/08/postgresql%e6%9f%a5%e7%9c%8b%e5%a4%8d%e5%88%b6%e7%8a%b6%e6%80%81'\n---\n#### postgresqlmaster\n```sql\n#select * from pg_stat_replication; \npostgres=# select * from pg_stat_replication;\n-[ RECORD 1 ]----+------------------------------\npid              | 13321\nusesysid         | 17019\nusename          | replication\napplication_name | walreceiver\nclient_addr      | 10.0.0.81\nclient_hostname  | \nclient_port      | 42809\nbackend_start    | 2016-08-11 10:57:35.856289+08\nbackend_xmin     | \nstate            | streaming --\nsent_location    | 1/E0CE9750\nwrite_location   | 1/E0CE9750\nflush_location   | 1/E0CE9750\nreplay_location  | 1/E0CE9750\nsync_priority    | 0\nsync_state       | async  --\n\nstate: \n    streaming : \n    startup : \n    catchup: \n\nsync_state: .\n    async : \n    sync : \n    potential: ,\n```\n#### master \n```sql\n#select pg_xlog_location_diff(sent_location, replay_location) from pg_stat_replication; \n\nposrgresql=# select pg_xlog_location_diff(sent_location, replay_location) from pg_stat_replication; \n pg_xlog_location_diff \n-----------------------\n                      0\n(1 row)\n```\n#### slavesql\n```sql\nSELECT CASE WHEN pg_last_xlog_receive_location() = pg_last_xlog_replay_location()\n    THEN 0\n    ELSE EXTRACT (EPOCH FROM now() - pg_last_xact_replay_timestamp())\n    END AS log_delay;\n\npostgres=# SELECT CASE WHEN pg_last_xlog_receive_location() = pg_last_xlog_replay_location()\npostgres-#     THEN 0\npostgres-#     ELSE EXTRACT (EPOCH FROM now() - pg_last_xact_replay_timestamp())\npostgres-#     END AS log_delay;\n log_delay\n-----------\n         0\n(1 row)\n```\n#### slaverecovery\n```sql\nselect pg_is_in_recovery();\npostgres=# select pg_is_in_recovery();\n pg_is_in_recovery\n-------------------\n t\n(1 row)\n```\n#### slavereploy\n```sql\n#select pg_last_xact_replay_timestamp();\npostgres=# select pg_last_xact_replay_timestamp();\n pg_last_xact_replay_timestamp\n-------------------------------\n 2019-07-08 03:01:33.854131+00\n(1 row)\n```\n\n#### slavereploy\n```sql\n#select pg_last_xlog_replay_location();\npostgres=# select pg_last_xlog_replay_location();\n pg_last_xlog_replay_location\n------------------------------\n 220C/56EB4C10\n(1 row)\n```","slug":"postgresql-replica-status","updated":"2019-10-19T09:40:34.388Z","photos":[],"link":"","_id":"ck42dyiet006nu9urx1wzlpxr","content":"<h4 id=\"postgresqlmaster\"><a href=\"#postgresqlmaster\" class=\"headerlink\" title=\"postgresqlmaster\"></a>postgresqlmaster</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#select * from pg_stat_replication; </span></span><br><span class=\"line\">postgres=<span class=\"comment\"># select * from pg_stat_replication;</span></span><br><span class=\"line\">-[ RECORD 1 ]<span class=\"comment\">----+------------------------------</span></span><br><span class=\"line\">pid              | 13321</span><br><span class=\"line\">usesysid         | 17019</span><br><span class=\"line\">usename          | replication</span><br><span class=\"line\">application_name | walreceiver</span><br><span class=\"line\">client_addr      | 10.0.0.81</span><br><span class=\"line\">client_hostname  | </span><br><span class=\"line\">client_port      | 42809</span><br><span class=\"line\">backend_start    | 2016-08-11 10:57:35.856289+08</span><br><span class=\"line\">backend_xmin     | </span><br><span class=\"line\">state            | streaming <span class=\"comment\">--</span></span><br><span class=\"line\">sent_location    | 1/E0CE9750</span><br><span class=\"line\">write_location   | 1/E0CE9750</span><br><span class=\"line\">flush_location   | 1/E0CE9750</span><br><span class=\"line\">replay_location  | 1/E0CE9750</span><br><span class=\"line\">sync_priority    | 0</span><br><span class=\"line\">sync_state       | async  <span class=\"comment\">--</span></span><br><span class=\"line\"></span><br><span class=\"line\">state: </span><br><span class=\"line\">    streaming : </span><br><span class=\"line\">    startup : </span><br><span class=\"line\">    catchup: </span><br><span class=\"line\"></span><br><span class=\"line\">sync_state: .</span><br><span class=\"line\">    async : </span><br><span class=\"line\">    sync : </span><br><span class=\"line\">    potential: ,</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"master\"><a href=\"#master\" class=\"headerlink\" title=\"master\"></a>master</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#select pg_xlog_location_diff(sent_location, replay_location) from pg_stat_replication; </span></span><br><span class=\"line\"></span><br><span class=\"line\">posrgresql=<span class=\"comment\"># select pg_xlog_location_diff(sent_location, replay_location) from pg_stat_replication; </span></span><br><span class=\"line\"> pg_xlog_location_diff </span><br><span class=\"line\"><span class=\"comment\">-----------------------</span></span><br><span class=\"line\">                      0</span><br><span class=\"line\">(1 row)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"slavesql\"><a href=\"#slavesql\" class=\"headerlink\" title=\"slavesql\"></a>slavesql</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">CASE</span> <span class=\"keyword\">WHEN</span> pg_last_xlog_receive_location() = pg_last_xlog_replay_location()</span><br><span class=\"line\">    <span class=\"keyword\">THEN</span> <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">ELSE</span> <span class=\"keyword\">EXTRACT</span> (EPOCH <span class=\"keyword\">FROM</span> <span class=\"keyword\">now</span>() - pg_last_xact_replay_timestamp())</span><br><span class=\"line\">    <span class=\"keyword\">END</span> <span class=\"keyword\">AS</span> log_delay;</span><br><span class=\"line\"></span><br><span class=\"line\">postgres=<span class=\"comment\"># SELECT CASE WHEN pg_last_xlog_receive_location() = pg_last_xlog_replay_location()</span></span><br><span class=\"line\">postgres-<span class=\"comment\">#     THEN 0</span></span><br><span class=\"line\">postgres-<span class=\"comment\">#     ELSE EXTRACT (EPOCH FROM now() - pg_last_xact_replay_timestamp())</span></span><br><span class=\"line\">postgres-<span class=\"comment\">#     END AS log_delay;</span></span><br><span class=\"line\"> log_delay</span><br><span class=\"line\"><span class=\"comment\">-----------</span></span><br><span class=\"line\">         0</span><br><span class=\"line\">(1 row)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"slaverecovery\"><a href=\"#slaverecovery\" class=\"headerlink\" title=\"slaverecovery\"></a>slaverecovery</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> pg_is_in_recovery();</span><br><span class=\"line\">postgres=<span class=\"comment\"># select pg_is_in_recovery();</span></span><br><span class=\"line\"> pg_is_in_recovery</span><br><span class=\"line\"><span class=\"comment\">-------------------</span></span><br><span class=\"line\"> t</span><br><span class=\"line\">(1 row)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"slavereploy\"><a href=\"#slavereploy\" class=\"headerlink\" title=\"slavereploy\"></a>slavereploy</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#select pg_last_xact_replay_timestamp();</span></span><br><span class=\"line\">postgres=<span class=\"comment\"># select pg_last_xact_replay_timestamp();</span></span><br><span class=\"line\"> pg_last_xact_replay_timestamp</span><br><span class=\"line\"><span class=\"comment\">-------------------------------</span></span><br><span class=\"line\"> 2019-07-08 03:01:33.854131+00</span><br><span class=\"line\">(1 row)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"slavereploy\"><a href=\"#slavereploy\" class=\"headerlink\" title=\"slavereploy\"></a>slavereploy</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#select pg_last_xlog_replay_location();</span></span><br><span class=\"line\">postgres=<span class=\"comment\"># select pg_last_xlog_replay_location();</span></span><br><span class=\"line\"> pg_last_xlog_replay_location</span><br><span class=\"line\"><span class=\"comment\">------------------------------</span></span><br><span class=\"line\"> 220C/56EB4C10</span><br><span class=\"line\">(1 row)</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h4 id=\"postgresqlmaster\"><a href=\"#postgresqlmaster\" class=\"headerlink\" title=\"postgresqlmaster\"></a>postgresqlmaster</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#select * from pg_stat_replication; </span></span><br><span class=\"line\">postgres=<span class=\"comment\"># select * from pg_stat_replication;</span></span><br><span class=\"line\">-[ RECORD 1 ]<span class=\"comment\">----+------------------------------</span></span><br><span class=\"line\">pid              | 13321</span><br><span class=\"line\">usesysid         | 17019</span><br><span class=\"line\">usename          | replication</span><br><span class=\"line\">application_name | walreceiver</span><br><span class=\"line\">client_addr      | 10.0.0.81</span><br><span class=\"line\">client_hostname  | </span><br><span class=\"line\">client_port      | 42809</span><br><span class=\"line\">backend_start    | 2016-08-11 10:57:35.856289+08</span><br><span class=\"line\">backend_xmin     | </span><br><span class=\"line\">state            | streaming <span class=\"comment\">--</span></span><br><span class=\"line\">sent_location    | 1/E0CE9750</span><br><span class=\"line\">write_location   | 1/E0CE9750</span><br><span class=\"line\">flush_location   | 1/E0CE9750</span><br><span class=\"line\">replay_location  | 1/E0CE9750</span><br><span class=\"line\">sync_priority    | 0</span><br><span class=\"line\">sync_state       | async  <span class=\"comment\">--</span></span><br><span class=\"line\"></span><br><span class=\"line\">state: </span><br><span class=\"line\">    streaming : </span><br><span class=\"line\">    startup : </span><br><span class=\"line\">    catchup: </span><br><span class=\"line\"></span><br><span class=\"line\">sync_state: .</span><br><span class=\"line\">    async : </span><br><span class=\"line\">    sync : </span><br><span class=\"line\">    potential: ,</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"master\"><a href=\"#master\" class=\"headerlink\" title=\"master\"></a>master</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#select pg_xlog_location_diff(sent_location, replay_location) from pg_stat_replication; </span></span><br><span class=\"line\"></span><br><span class=\"line\">posrgresql=<span class=\"comment\"># select pg_xlog_location_diff(sent_location, replay_location) from pg_stat_replication; </span></span><br><span class=\"line\"> pg_xlog_location_diff </span><br><span class=\"line\"><span class=\"comment\">-----------------------</span></span><br><span class=\"line\">                      0</span><br><span class=\"line\">(1 row)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"slavesql\"><a href=\"#slavesql\" class=\"headerlink\" title=\"slavesql\"></a>slavesql</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> <span class=\"keyword\">CASE</span> <span class=\"keyword\">WHEN</span> pg_last_xlog_receive_location() = pg_last_xlog_replay_location()</span><br><span class=\"line\">    <span class=\"keyword\">THEN</span> <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">ELSE</span> <span class=\"keyword\">EXTRACT</span> (EPOCH <span class=\"keyword\">FROM</span> <span class=\"keyword\">now</span>() - pg_last_xact_replay_timestamp())</span><br><span class=\"line\">    <span class=\"keyword\">END</span> <span class=\"keyword\">AS</span> log_delay;</span><br><span class=\"line\"></span><br><span class=\"line\">postgres=<span class=\"comment\"># SELECT CASE WHEN pg_last_xlog_receive_location() = pg_last_xlog_replay_location()</span></span><br><span class=\"line\">postgres-<span class=\"comment\">#     THEN 0</span></span><br><span class=\"line\">postgres-<span class=\"comment\">#     ELSE EXTRACT (EPOCH FROM now() - pg_last_xact_replay_timestamp())</span></span><br><span class=\"line\">postgres-<span class=\"comment\">#     END AS log_delay;</span></span><br><span class=\"line\"> log_delay</span><br><span class=\"line\"><span class=\"comment\">-----------</span></span><br><span class=\"line\">         0</span><br><span class=\"line\">(1 row)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"slaverecovery\"><a href=\"#slaverecovery\" class=\"headerlink\" title=\"slaverecovery\"></a>slaverecovery</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> pg_is_in_recovery();</span><br><span class=\"line\">postgres=<span class=\"comment\"># select pg_is_in_recovery();</span></span><br><span class=\"line\"> pg_is_in_recovery</span><br><span class=\"line\"><span class=\"comment\">-------------------</span></span><br><span class=\"line\"> t</span><br><span class=\"line\">(1 row)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"slavereploy\"><a href=\"#slavereploy\" class=\"headerlink\" title=\"slavereploy\"></a>slavereploy</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#select pg_last_xact_replay_timestamp();</span></span><br><span class=\"line\">postgres=<span class=\"comment\"># select pg_last_xact_replay_timestamp();</span></span><br><span class=\"line\"> pg_last_xact_replay_timestamp</span><br><span class=\"line\"><span class=\"comment\">-------------------------------</span></span><br><span class=\"line\"> 2019-07-08 03:01:33.854131+00</span><br><span class=\"line\">(1 row)</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"slavereploy\"><a href=\"#slavereploy\" class=\"headerlink\" title=\"slavereploy\"></a>slavereploy</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#select pg_last_xlog_replay_location();</span></span><br><span class=\"line\">postgres=<span class=\"comment\"># select pg_last_xlog_replay_location();</span></span><br><span class=\"line\"> pg_last_xlog_replay_location</span><br><span class=\"line\"><span class=\"comment\">------------------------------</span></span><br><span class=\"line\"> 220C/56EB4C10</span><br><span class=\"line\">(1 row)</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"PXE","published":1,"author":"xiemx","comments":1,"date":"2016-01-16T23:01:10.000Z","_content":"pxe \n\n* dhcp:\n* tftp(,,httpks.conf()/rpm\n\n### \n```\n dhcp.client  ip\niptftppxelinux.0 pxelinux.0(\n pxelinux.cfg/default   install foution0)\n unlinuz( initrd(  ks\n \nhttpks.cfg,rpm ks.cfg\n```\n \n\n### \n```\nclientsdhcp client\n------------------------------> dhcp server\n<------------------------------\niptftp\npxelinux.0\n------------------------------> tftp server\n<------------------------------\npxelinux.0\n\n-------------------------------> tftp server\n<------------------------------\npxelinux.cfg/default\n\n-------------------------------> tftp server\n<-------------------------------\nvmlinuxz initrd ks\n\n-------------------------------> http server\n<------------------------------\nks.cfg rpm\n<-------------------------------\n\n\n```\n### \n\nPXEpxelinux.odefaultks.cfgvmlinuxzinitrd.imgtftpdhcphttp\n\npxelinux.0 syslinux\nks.cfg kickstartsystem-config-kickstart\nvmlinuz iso\ndefault \ninitrd.img iso\n\n1.\n```\nyum install httpd dhcp tftp-server -y\n```\n2.dhcp\n```\n[root@linux]# cat /etc/dhcpd.conf\nddns-update-style interim;\nallow booting; #PXE\nallow bootp; #bootp\nnext-server 192.168.0.1; #TFTP ServerIP\nfilename \"pxelinux.0\"; #bootstrap (NBP)\n\ndefault-lease-time 1800;\nmax-lease-time 7200;\nping-check true;\noption domain-name-servers 192.168.0.1;\n\nsubnet 192.168.0.0 netmask 255.255.255.0\n{\nrange 192.168.0.128 192.168.0.220;\noption routers 192.168.0.1;\noption broadcast-address 192.168.0.255;\n}\n```\n3.tftp\n```\n[root@linux]# cat /etc/xinetd.d/tftp\nservice tftp\n{\nsocket_type = dgram\nprotocol = udp\nwait = yes\nuser = root\nserver = /usr/sbin/in.tftpd\nserver_args = -s /var/lib/tftpboot   tftp\ndisable = no   tftp\nper_source = 11\ncps = 100 2\nflags = IPv4\n}\n\nxinetd\n```\n4.pxelinux.0\n```\n[root@linux]# rpm -ql syslinux | grep \"pxelinux.0\"\n/usr/lib/syslinux/pxelinux.0\n[root@linux]# cp /usr/lib/syslinux/pxelinux.0 /var/lib/tftpboot/\n```\n5./var/lib/tftp/pxelinux.cfgdefault\n```\n boot.msg initrd.img splash.png vesamenu.c32 vmlinuz /var/lib/tftpboot/\n\n[root@linux]# cat /tftpboot/pxelinux.cfg/default\n\ndefault vesamenu.c32   default linux\ntimeout 60     \ndisplay boot.msg    \n\nmenu background splash.jpg   \nmenu title Welcome to pxe Setup!   \n\nlabel 1\nmenu label Boot from ^local drive   1\nmenu default    60s\nlocalboot 0xffff\n\nlabel 2\nmenu label Install linux\nipappend 2\nkernel vmlinuz\nappend initrd=initrd.img ks=http://172.25.16.9/ks.cfg\n```\n6.isohttp\n\n7.ks.cfg\n\n  `system-config-kickstart`\n\n8.selinuxhttptftp","source":"_posts/pxe-kickstart.md","raw":"---\nlayout: post\ntitle: PXE\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-01-17 07:01:10\ntags: [ pxe, kickstart, linux ]\ncategories:\n    - linux\n# permalink: '/2016/01/17/pxe%e6%89%b9%e9%87%8f%e5%9c%a8%e7%ba%bf%e5%ae%89%e8%a3%85%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f'\n---\npxe \n\n* dhcp:\n* tftp(,,httpks.conf()/rpm\n\n### \n```\n dhcp.client  ip\niptftppxelinux.0 pxelinux.0(\n pxelinux.cfg/default   install foution0)\n unlinuz( initrd(  ks\n \nhttpks.cfg,rpm ks.cfg\n```\n \n\n### \n```\nclientsdhcp client\n------------------------------> dhcp server\n<------------------------------\niptftp\npxelinux.0\n------------------------------> tftp server\n<------------------------------\npxelinux.0\n\n-------------------------------> tftp server\n<------------------------------\npxelinux.cfg/default\n\n-------------------------------> tftp server\n<-------------------------------\nvmlinuxz initrd ks\n\n-------------------------------> http server\n<------------------------------\nks.cfg rpm\n<-------------------------------\n\n\n```\n### \n\nPXEpxelinux.odefaultks.cfgvmlinuxzinitrd.imgtftpdhcphttp\n\npxelinux.0 syslinux\nks.cfg kickstartsystem-config-kickstart\nvmlinuz iso\ndefault \ninitrd.img iso\n\n1.\n```\nyum install httpd dhcp tftp-server -y\n```\n2.dhcp\n```\n[root@linux]# cat /etc/dhcpd.conf\nddns-update-style interim;\nallow booting; #PXE\nallow bootp; #bootp\nnext-server 192.168.0.1; #TFTP ServerIP\nfilename \"pxelinux.0\"; #bootstrap (NBP)\n\ndefault-lease-time 1800;\nmax-lease-time 7200;\nping-check true;\noption domain-name-servers 192.168.0.1;\n\nsubnet 192.168.0.0 netmask 255.255.255.0\n{\nrange 192.168.0.128 192.168.0.220;\noption routers 192.168.0.1;\noption broadcast-address 192.168.0.255;\n}\n```\n3.tftp\n```\n[root@linux]# cat /etc/xinetd.d/tftp\nservice tftp\n{\nsocket_type = dgram\nprotocol = udp\nwait = yes\nuser = root\nserver = /usr/sbin/in.tftpd\nserver_args = -s /var/lib/tftpboot   tftp\ndisable = no   tftp\nper_source = 11\ncps = 100 2\nflags = IPv4\n}\n\nxinetd\n```\n4.pxelinux.0\n```\n[root@linux]# rpm -ql syslinux | grep \"pxelinux.0\"\n/usr/lib/syslinux/pxelinux.0\n[root@linux]# cp /usr/lib/syslinux/pxelinux.0 /var/lib/tftpboot/\n```\n5./var/lib/tftp/pxelinux.cfgdefault\n```\n boot.msg initrd.img splash.png vesamenu.c32 vmlinuz /var/lib/tftpboot/\n\n[root@linux]# cat /tftpboot/pxelinux.cfg/default\n\ndefault vesamenu.c32   default linux\ntimeout 60     \ndisplay boot.msg    \n\nmenu background splash.jpg   \nmenu title Welcome to pxe Setup!   \n\nlabel 1\nmenu label Boot from ^local drive   1\nmenu default    60s\nlocalboot 0xffff\n\nlabel 2\nmenu label Install linux\nipappend 2\nkernel vmlinuz\nappend initrd=initrd.img ks=http://172.25.16.9/ks.cfg\n```\n6.isohttp\n\n7.ks.cfg\n\n  `system-config-kickstart`\n\n8.selinuxhttptftp","slug":"pxe-kickstart","updated":"2019-10-21T06:57:43.002Z","photos":[],"link":"","_id":"ck42dyieu006ru9urx7kxlwk3","content":"<p>pxe </p>\n<ul>\n<li>dhcp:</li>\n<li>tftp(,,httpks.conf()/rpm</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> dhcp.client  ip</span><br><span class=\"line\">iptftppxelinux.0 pxelinux.0(</span><br><span class=\"line\"> pxelinux.cfg<span class=\"built_in\">/default </span>  install foution0)</span><br><span class=\"line\"> unlinuz( initrd(  ks</span><br><span class=\"line\"> </span><br><span class=\"line\">httpks.cfg,rpm ks.cfg</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">clientsdhcp client</span><br><span class=\"line\">------------------------------&gt; dhcp server</span><br><span class=\"line\">&lt;------------------------------</span><br><span class=\"line\">iptftp</span><br><span class=\"line\">pxelinux.0</span><br><span class=\"line\">------------------------------&gt; tftp server</span><br><span class=\"line\">&lt;------------------------------</span><br><span class=\"line\">pxelinux.0</span><br><span class=\"line\"></span><br><span class=\"line\">-------------------------------&gt; tftp server</span><br><span class=\"line\">&lt;------------------------------</span><br><span class=\"line\">pxelinux.cfg/default</span><br><span class=\"line\"></span><br><span class=\"line\">-------------------------------&gt; tftp server</span><br><span class=\"line\">&lt;-------------------------------</span><br><span class=\"line\">vmlinuxz initrd ks</span><br><span class=\"line\"></span><br><span class=\"line\">-------------------------------&gt; http server</span><br><span class=\"line\">&lt;------------------------------</span><br><span class=\"line\">ks.cfg rpm</span><br><span class=\"line\">&lt;-------------------------------</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>PXEpxelinux.odefaultks.cfgvmlinuxzinitrd.imgtftpdhcphttp</p>\n<p>pxelinux.0 syslinux<br>ks.cfg kickstartsystem-config-kickstart<br>vmlinuz iso<br>default <br>initrd.img iso</p>\n<p>1.</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum <span class=\"keyword\">install</span> httpd dhcp tftp-<span class=\"keyword\">server</span> -y</span><br></pre></td></tr></table></figure>\n\n<p>2.dhcp</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>linux]# cat /etc/dhcpd.conf</span><br><span class=\"line\">ddns-update-style <span class=\"built_in\">int</span>erim;</span><br><span class=\"line\">allow booting; #PXE</span><br><span class=\"line\">allow bootp; #bootp</span><br><span class=\"line\">next-server <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>; #TFTP ServerIP</span><br><span class=\"line\">filename <span class=\"string\">\"pxelinux.0\"</span>; #bootstrap (NBP)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">default</span>-lease-time <span class=\"number\">1800</span>;</span><br><span class=\"line\">max-lease-time <span class=\"number\">7200</span>;</span><br><span class=\"line\">ping-check <span class=\"literal\">true</span>;</span><br><span class=\"line\">option domain-name-servers <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">subnet <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.0</span> netmask <span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.0</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">range <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.128</span> <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.220</span>;</span><br><span class=\"line\">option routers <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>;</span><br><span class=\"line\">option broadcast-address <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.255</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>3.tftp</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux]# cat /etc/xinetd.d/tftp</span><br><span class=\"line\">service tftp</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">socket_type = dgram</span><br><span class=\"line\">protocol = udp</span><br><span class=\"line\">wait = <span class=\"literal\">yes</span></span><br><span class=\"line\">user = root</span><br><span class=\"line\">server = /usr/sbin/<span class=\"keyword\">in</span>.tftpd</span><br><span class=\"line\">server_args = -s /var/lib/tftpboot   tftp</span><br><span class=\"line\"><span class=\"builtin-name\">disable</span> = <span class=\"literal\">no</span>   tftp</span><br><span class=\"line\">per_source = 11</span><br><span class=\"line\">cps = 100 2</span><br><span class=\"line\">flags = IPv4</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">xinetd</span><br></pre></td></tr></table></figure>\n\n<p>4.pxelinux.0</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux]# rpm -ql syslinux | <span class=\"keyword\">grep</span> <span class=\"string\">\"pxelinux.0\"</span></span><br><span class=\"line\"><span class=\"regexp\">/usr/</span>lib<span class=\"regexp\">/syslinux/</span>pxelinux.<span class=\"number\">0</span></span><br><span class=\"line\">[root@linux]# cp <span class=\"regexp\">/usr/</span>lib<span class=\"regexp\">/syslinux/</span>pxelinux.<span class=\"number\">0</span> <span class=\"regexp\">/var/</span>lib<span class=\"regexp\">/tftpboot/</span></span><br></pre></td></tr></table></figure>\n\n<p>5./var/lib/tftp/pxelinux.cfgdefault</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> boot.msg initrd.img splash.png vesamenu.c32 vmlinuz /var/lib/tftpboot/</span><br><span class=\"line\"></span><br><span class=\"line\">[root@linux]# cat /tftpboot/pxelinux.cfg/default</span><br><span class=\"line\"></span><br><span class=\"line\">default vesamenu.c32   default linux</span><br><span class=\"line\">timeout 60     </span><br><span class=\"line\">display boot.msg    </span><br><span class=\"line\"></span><br><span class=\"line\">menu background splash.jpg   </span><br><span class=\"line\">menu title Welcome <span class=\"keyword\">to</span> pxe Setup!   </span><br><span class=\"line\"></span><br><span class=\"line\">label 1</span><br><span class=\"line\">menu label Boot <span class=\"keyword\">from</span> ^local drive   1</span><br><span class=\"line\">menu<span class=\"built_in\"> default </span>   60s</span><br><span class=\"line\">localboot 0xffff</span><br><span class=\"line\"></span><br><span class=\"line\">label 2</span><br><span class=\"line\">menu label Install linux</span><br><span class=\"line\">ipappend 2</span><br><span class=\"line\">kernel vmlinuz</span><br><span class=\"line\">append <span class=\"attribute\">initrd</span>=initrd.img <span class=\"attribute\">ks</span>=http://172.25.16.9/ks.cfg</span><br></pre></td></tr></table></figure>\n\n<p>6.isohttp</p>\n<p>7.ks.cfg</p>\n<p>  <code>system-config-kickstart</code></p>\n<p>8.selinuxhttptftp</p>\n","site":{"data":{}},"excerpt":"","more":"<p>pxe </p>\n<ul>\n<li>dhcp:</li>\n<li>tftp(,,httpks.conf()/rpm</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> dhcp.client  ip</span><br><span class=\"line\">iptftppxelinux.0 pxelinux.0(</span><br><span class=\"line\"> pxelinux.cfg<span class=\"built_in\">/default </span>  install foution0)</span><br><span class=\"line\"> unlinuz( initrd(  ks</span><br><span class=\"line\"> </span><br><span class=\"line\">httpks.cfg,rpm ks.cfg</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">clientsdhcp client</span><br><span class=\"line\">------------------------------&gt; dhcp server</span><br><span class=\"line\">&lt;------------------------------</span><br><span class=\"line\">iptftp</span><br><span class=\"line\">pxelinux.0</span><br><span class=\"line\">------------------------------&gt; tftp server</span><br><span class=\"line\">&lt;------------------------------</span><br><span class=\"line\">pxelinux.0</span><br><span class=\"line\"></span><br><span class=\"line\">-------------------------------&gt; tftp server</span><br><span class=\"line\">&lt;------------------------------</span><br><span class=\"line\">pxelinux.cfg/default</span><br><span class=\"line\"></span><br><span class=\"line\">-------------------------------&gt; tftp server</span><br><span class=\"line\">&lt;-------------------------------</span><br><span class=\"line\">vmlinuxz initrd ks</span><br><span class=\"line\"></span><br><span class=\"line\">-------------------------------&gt; http server</span><br><span class=\"line\">&lt;------------------------------</span><br><span class=\"line\">ks.cfg rpm</span><br><span class=\"line\">&lt;-------------------------------</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>PXEpxelinux.odefaultks.cfgvmlinuxzinitrd.imgtftpdhcphttp</p>\n<p>pxelinux.0 syslinux<br>ks.cfg kickstartsystem-config-kickstart<br>vmlinuz iso<br>default <br>initrd.img iso</p>\n<p>1.</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum <span class=\"keyword\">install</span> httpd dhcp tftp-<span class=\"keyword\">server</span> -y</span><br></pre></td></tr></table></figure>\n\n<p>2.dhcp</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>linux]# cat /etc/dhcpd.conf</span><br><span class=\"line\">ddns-update-style <span class=\"built_in\">int</span>erim;</span><br><span class=\"line\">allow booting; #PXE</span><br><span class=\"line\">allow bootp; #bootp</span><br><span class=\"line\">next-server <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>; #TFTP ServerIP</span><br><span class=\"line\">filename <span class=\"string\">\"pxelinux.0\"</span>; #bootstrap (NBP)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">default</span>-lease-time <span class=\"number\">1800</span>;</span><br><span class=\"line\">max-lease-time <span class=\"number\">7200</span>;</span><br><span class=\"line\">ping-check <span class=\"literal\">true</span>;</span><br><span class=\"line\">option domain-name-servers <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">subnet <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.0</span> netmask <span class=\"number\">255.255</span><span class=\"number\">.255</span><span class=\"number\">.0</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">range <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.128</span> <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.220</span>;</span><br><span class=\"line\">option routers <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.1</span>;</span><br><span class=\"line\">option broadcast-address <span class=\"number\">192.168</span><span class=\"number\">.0</span><span class=\"number\">.255</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>3.tftp</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux]# cat /etc/xinetd.d/tftp</span><br><span class=\"line\">service tftp</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">socket_type = dgram</span><br><span class=\"line\">protocol = udp</span><br><span class=\"line\">wait = <span class=\"literal\">yes</span></span><br><span class=\"line\">user = root</span><br><span class=\"line\">server = /usr/sbin/<span class=\"keyword\">in</span>.tftpd</span><br><span class=\"line\">server_args = -s /var/lib/tftpboot   tftp</span><br><span class=\"line\"><span class=\"builtin-name\">disable</span> = <span class=\"literal\">no</span>   tftp</span><br><span class=\"line\">per_source = 11</span><br><span class=\"line\">cps = 100 2</span><br><span class=\"line\">flags = IPv4</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">xinetd</span><br></pre></td></tr></table></figure>\n\n<p>4.pxelinux.0</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@linux]# rpm -ql syslinux | <span class=\"keyword\">grep</span> <span class=\"string\">\"pxelinux.0\"</span></span><br><span class=\"line\"><span class=\"regexp\">/usr/</span>lib<span class=\"regexp\">/syslinux/</span>pxelinux.<span class=\"number\">0</span></span><br><span class=\"line\">[root@linux]# cp <span class=\"regexp\">/usr/</span>lib<span class=\"regexp\">/syslinux/</span>pxelinux.<span class=\"number\">0</span> <span class=\"regexp\">/var/</span>lib<span class=\"regexp\">/tftpboot/</span></span><br></pre></td></tr></table></figure>\n\n<p>5./var/lib/tftp/pxelinux.cfgdefault</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> boot.msg initrd.img splash.png vesamenu.c32 vmlinuz /var/lib/tftpboot/</span><br><span class=\"line\"></span><br><span class=\"line\">[root@linux]# cat /tftpboot/pxelinux.cfg/default</span><br><span class=\"line\"></span><br><span class=\"line\">default vesamenu.c32   default linux</span><br><span class=\"line\">timeout 60     </span><br><span class=\"line\">display boot.msg    </span><br><span class=\"line\"></span><br><span class=\"line\">menu background splash.jpg   </span><br><span class=\"line\">menu title Welcome <span class=\"keyword\">to</span> pxe Setup!   </span><br><span class=\"line\"></span><br><span class=\"line\">label 1</span><br><span class=\"line\">menu label Boot <span class=\"keyword\">from</span> ^local drive   1</span><br><span class=\"line\">menu<span class=\"built_in\"> default </span>   60s</span><br><span class=\"line\">localboot 0xffff</span><br><span class=\"line\"></span><br><span class=\"line\">label 2</span><br><span class=\"line\">menu label Install linux</span><br><span class=\"line\">ipappend 2</span><br><span class=\"line\">kernel vmlinuz</span><br><span class=\"line\">append <span class=\"attribute\">initrd</span>=initrd.img <span class=\"attribute\">ks</span>=http://172.25.16.9/ks.cfg</span><br></pre></td></tr></table></figure>\n\n<p>6.isohttp</p>\n<p>7.ks.cfg</p>\n<p>  <code>system-config-kickstart</code></p>\n<p>8.selinuxhttptftp</p>\n"},{"layout":"post","title":"python socket","published":1,"author":"xiemx","comments":1,"date":"2016-04-27T18:04:14.000Z","_content":"socket\n\n### server\n```python\n#!/usr/bin/env python\nimport socket\ndef socket_server(host,port):\n self_host = host\n self_port = port\n\n s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)\n s.bind((self_host,self_port))\n s.listen(4)\n\n f = open(\"log\", \"a\")\n while True:\n conn,addr=s.accept()\n data = conn.recv(1024)\n print 'data:', data\n f.write(data)\nf.close()\n s.close()\n\nif __name__ == \"__main__\":\n host = '127.0.0.1'\n port = 65530\n\n socket_server(host,port)\n```\n### client\n```python\n#!/usr/bin/env python\nimport socket\n\ndef socket_client(host,port,content):\n self_host = host\n self_port = port\n self_content = content\n\n s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)\n s.connect((self_host,self_port))\n s.sendall(content)\n s.close()\n\nif __name__ == \"__main__\":\n host = \"127.0.0.1\"\n port = 65530\n\n f = open(\"sendfile\",\"r\")\n content = f.read()\n f.close()\n\n socket_client(host, port, content)\n```","source":"_posts/python-code-socket.md","raw":"---\nlayout: post\ntitle: python socket\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-04-28 02:04:14\ntags: [ python, socket ]\ncategories:\n    - python\n# permalink: '/2016/04/28/socket%e7%bc%96%e7%a8%8b'\n---\nsocket\n\n### server\n```python\n#!/usr/bin/env python\nimport socket\ndef socket_server(host,port):\n self_host = host\n self_port = port\n\n s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)\n s.bind((self_host,self_port))\n s.listen(4)\n\n f = open(\"log\", \"a\")\n while True:\n conn,addr=s.accept()\n data = conn.recv(1024)\n print 'data:', data\n f.write(data)\nf.close()\n s.close()\n\nif __name__ == \"__main__\":\n host = '127.0.0.1'\n port = 65530\n\n socket_server(host,port)\n```\n### client\n```python\n#!/usr/bin/env python\nimport socket\n\ndef socket_client(host,port,content):\n self_host = host\n self_port = port\n self_content = content\n\n s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)\n s.connect((self_host,self_port))\n s.sendall(content)\n s.close()\n\nif __name__ == \"__main__\":\n host = \"127.0.0.1\"\n port = 65530\n\n f = open(\"sendfile\",\"r\")\n content = f.read()\n f.close()\n\n socket_client(host, port, content)\n```","slug":"python-code-socket","updated":"2019-10-21T06:57:42.386Z","photos":[],"link":"","_id":"ck42dyiew006vu9urqfy1a7g9","content":"<p>socket</p>\n<h3 id=\"server\"><a href=\"#server\" class=\"headerlink\" title=\"server\"></a>server</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">socket_server</span><span class=\"params\">(host,port)</span>:</span></span><br><span class=\"line\"> self_host = host</span><br><span class=\"line\"> self_port = port</span><br><span class=\"line\"></span><br><span class=\"line\"> s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class=\"line\"> s.bind((self_host,self_port))</span><br><span class=\"line\"> s.listen(<span class=\"number\">4</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"> f = open(<span class=\"string\">\"log\"</span>, <span class=\"string\">\"a\"</span>)</span><br><span class=\"line\"> <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\"> conn,addr=s.accept()</span><br><span class=\"line\"> data = conn.recv(<span class=\"number\">1024</span>)</span><br><span class=\"line\"> <span class=\"keyword\">print</span> <span class=\"string\">'data:'</span>, data</span><br><span class=\"line\"> f.write(data)</span><br><span class=\"line\">f.close()</span><br><span class=\"line\"> s.close()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\"> host = <span class=\"string\">'127.0.0.1'</span></span><br><span class=\"line\"> port = <span class=\"number\">65530</span></span><br><span class=\"line\"></span><br><span class=\"line\"> socket_server(host,port)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"client\"><a href=\"#client\" class=\"headerlink\" title=\"client\"></a>client</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">socket_client</span><span class=\"params\">(host,port,content)</span>:</span></span><br><span class=\"line\"> self_host = host</span><br><span class=\"line\"> self_port = port</span><br><span class=\"line\"> self_content = content</span><br><span class=\"line\"></span><br><span class=\"line\"> s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class=\"line\"> s.connect((self_host,self_port))</span><br><span class=\"line\"> s.sendall(content)</span><br><span class=\"line\"> s.close()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\"> host = <span class=\"string\">\"127.0.0.1\"</span></span><br><span class=\"line\"> port = <span class=\"number\">65530</span></span><br><span class=\"line\"></span><br><span class=\"line\"> f = open(<span class=\"string\">\"sendfile\"</span>,<span class=\"string\">\"r\"</span>)</span><br><span class=\"line\"> content = f.read()</span><br><span class=\"line\"> f.close()</span><br><span class=\"line\"></span><br><span class=\"line\"> socket_client(host, port, content)</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>socket</p>\n<h3 id=\"server\"><a href=\"#server\" class=\"headerlink\" title=\"server\"></a>server</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">socket_server</span><span class=\"params\">(host,port)</span>:</span></span><br><span class=\"line\"> self_host = host</span><br><span class=\"line\"> self_port = port</span><br><span class=\"line\"></span><br><span class=\"line\"> s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class=\"line\"> s.bind((self_host,self_port))</span><br><span class=\"line\"> s.listen(<span class=\"number\">4</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"> f = open(<span class=\"string\">\"log\"</span>, <span class=\"string\">\"a\"</span>)</span><br><span class=\"line\"> <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\"> conn,addr=s.accept()</span><br><span class=\"line\"> data = conn.recv(<span class=\"number\">1024</span>)</span><br><span class=\"line\"> <span class=\"keyword\">print</span> <span class=\"string\">'data:'</span>, data</span><br><span class=\"line\"> f.write(data)</span><br><span class=\"line\">f.close()</span><br><span class=\"line\"> s.close()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\"> host = <span class=\"string\">'127.0.0.1'</span></span><br><span class=\"line\"> port = <span class=\"number\">65530</span></span><br><span class=\"line\"></span><br><span class=\"line\"> socket_server(host,port)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"client\"><a href=\"#client\" class=\"headerlink\" title=\"client\"></a>client</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> socket</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">socket_client</span><span class=\"params\">(host,port,content)</span>:</span></span><br><span class=\"line\"> self_host = host</span><br><span class=\"line\"> self_port = port</span><br><span class=\"line\"> self_content = content</span><br><span class=\"line\"></span><br><span class=\"line\"> s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class=\"line\"> s.connect((self_host,self_port))</span><br><span class=\"line\"> s.sendall(content)</span><br><span class=\"line\"> s.close()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\"> host = <span class=\"string\">\"127.0.0.1\"</span></span><br><span class=\"line\"> port = <span class=\"number\">65530</span></span><br><span class=\"line\"></span><br><span class=\"line\"> f = open(<span class=\"string\">\"sendfile\"</span>,<span class=\"string\">\"r\"</span>)</span><br><span class=\"line\"> content = f.read()</span><br><span class=\"line\"> f.close()</span><br><span class=\"line\"></span><br><span class=\"line\"> socket_client(host, port, content)</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"pythonis==","published":1,"author":"xiemx","comments":1,"date":"2016-03-28T18:03:08.000Z","_content":"Python`id``type``value`\n  * id\n  * type\n  * value\n  \n`is` id\n  \n`==` value\n\n\n```python\n>>> a = {1:2}\n>>> b = a.copy()\n>>> a is b\nFalse\n>>> a == b\nTrue\n>>>\n```","source":"_posts/python-is.md","raw":"---\nlayout: post\ntitle: pythonis==\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-03-29 02:03:08\ntags: [ python ]\ncategories:\n    - python\n# permalink: '/2016/03/29/python%e4%b8%adis%e5%92%8c%e7%9a%84%e5%8c%ba%e5%88%ab'\n---\nPython`id``type``value`\n  * id\n  * type\n  * value\n  \n`is` id\n  \n`==` value\n\n\n```python\n>>> a = {1:2}\n>>> b = a.copy()\n>>> a is b\nFalse\n>>> a == b\nTrue\n>>>\n```","slug":"python-is","updated":"2019-10-21T06:57:42.910Z","photos":[],"link":"","_id":"ck42dyiez006zu9urh99v9jth","content":"<p>Python<code>id</code><code>type</code><code>value</code></p>\n<ul>\n<li>id</li>\n<li>type</li>\n<li>value</li>\n</ul>\n<p><code>is</code> id</p>\n<p><code>==</code> value</p>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a = &#123;<span class=\"number\">1</span>:<span class=\"number\">2</span>&#125;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b = a.copy()</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a <span class=\"keyword\">is</span> b</span><br><span class=\"line\"><span class=\"literal\">False</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a == b</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>Python<code>id</code><code>type</code><code>value</code></p>\n<ul>\n<li>id</li>\n<li>type</li>\n<li>value</li>\n</ul>\n<p><code>is</code> id</p>\n<p><code>==</code> value</p>\n<p></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a = &#123;<span class=\"number\">1</span>:<span class=\"number\">2</span>&#125;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>b = a.copy()</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a <span class=\"keyword\">is</span> b</span><br><span class=\"line\"><span class=\"literal\">False</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>a == b</span><br><span class=\"line\"><span class=\"literal\">True</span></span><br><span class=\"line\">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"","published":1,"author":"xiemx","comments":1,"date":"2016-04-27T19:04:48.000Z","_content":"pythonsmtp \n```python\n#!/usr/bin/env python\n\nfrom email.MIMEText import MIMEText\nfrom email.MIMEMultipart import MIMEMultipart\nfrom email.MIMEBase import MIMEBase\nfrom email import Utils,Encoders\nimport mimetypes,sys\nimport smtplib\n\ndef send_mail(user,passwd,host,context,sub,to_user):\n    self_user = user\n    self_pass = passwd\n    self_smtp = host\n    self_sub  = sub\n    self_context = context\n    self_touser = to_user\n\n    msg = MIMEMultipart()\n    msg[\"To\"] = self_touser\n    msg[\"From\"] = \"xxxx@unxn.com\"\n    msg[\"Subject\"] = self_sub\n    msg[\"Data\"] = Utils.formatdate(localtime = 1)\n    \n    body = MIMEText(self_context,_subtype = \"plain\")\n    \n    msg.attach(body)\n    send = smtplib.SMTP(self_smtp)\n    send.login(self_user,self_pass)\n    send.sendmail(self_user,self_touser,msg.as_string())\n    send.close()\n\nif __name__=='__main__':\n    host= \"smtp.qq.com\"\n    user= \"xxxxxxxx@qq.com\"\n    passwd= \"xxxxxxxx\"\n    to_user = \"xxxxxxxxx@163.com\"\n    sub = \"Log anaylse result!\"\n\n    f = open(\"log\",\"r\")\n    context = f.read()\n    f.close()\n    \n    send_mail(user,passwd,host,context,sub,to_user)\n```","source":"_posts/python-send-mail.md","raw":"---\nlayout: post\ntitle: \npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-04-28 03:04:48\ntags: [ python, mail ]\ncategories:\n    - python\n---\npythonsmtp \n```python\n#!/usr/bin/env python\n\nfrom email.MIMEText import MIMEText\nfrom email.MIMEMultipart import MIMEMultipart\nfrom email.MIMEBase import MIMEBase\nfrom email import Utils,Encoders\nimport mimetypes,sys\nimport smtplib\n\ndef send_mail(user,passwd,host,context,sub,to_user):\n    self_user = user\n    self_pass = passwd\n    self_smtp = host\n    self_sub  = sub\n    self_context = context\n    self_touser = to_user\n\n    msg = MIMEMultipart()\n    msg[\"To\"] = self_touser\n    msg[\"From\"] = \"xxxx@unxn.com\"\n    msg[\"Subject\"] = self_sub\n    msg[\"Data\"] = Utils.formatdate(localtime = 1)\n    \n    body = MIMEText(self_context,_subtype = \"plain\")\n    \n    msg.attach(body)\n    send = smtplib.SMTP(self_smtp)\n    send.login(self_user,self_pass)\n    send.sendmail(self_user,self_touser,msg.as_string())\n    send.close()\n\nif __name__=='__main__':\n    host= \"smtp.qq.com\"\n    user= \"xxxxxxxx@qq.com\"\n    passwd= \"xxxxxxxx\"\n    to_user = \"xxxxxxxxx@163.com\"\n    sub = \"Log anaylse result!\"\n\n    f = open(\"log\",\"r\")\n    context = f.read()\n    f.close()\n    \n    send_mail(user,passwd,host,context,sub,to_user)\n```","slug":"python-send-mail","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyif00073u9ur6m2dl089","content":"<p>pythonsmtp </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> email.MIMEText <span class=\"keyword\">import</span> MIMEText</span><br><span class=\"line\"><span class=\"keyword\">from</span> email.MIMEMultipart <span class=\"keyword\">import</span> MIMEMultipart</span><br><span class=\"line\"><span class=\"keyword\">from</span> email.MIMEBase <span class=\"keyword\">import</span> MIMEBase</span><br><span class=\"line\"><span class=\"keyword\">from</span> email <span class=\"keyword\">import</span> Utils,Encoders</span><br><span class=\"line\"><span class=\"keyword\">import</span> mimetypes,sys</span><br><span class=\"line\"><span class=\"keyword\">import</span> smtplib</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">send_mail</span><span class=\"params\">(user,passwd,host,context,sub,to_user)</span>:</span></span><br><span class=\"line\">    self_user = user</span><br><span class=\"line\">    self_pass = passwd</span><br><span class=\"line\">    self_smtp = host</span><br><span class=\"line\">    self_sub  = sub</span><br><span class=\"line\">    self_context = context</span><br><span class=\"line\">    self_touser = to_user</span><br><span class=\"line\"></span><br><span class=\"line\">    msg = MIMEMultipart()</span><br><span class=\"line\">    msg[<span class=\"string\">\"To\"</span>] = self_touser</span><br><span class=\"line\">    msg[<span class=\"string\">\"From\"</span>] = <span class=\"string\">\"xxxx@unxn.com\"</span></span><br><span class=\"line\">    msg[<span class=\"string\">\"Subject\"</span>] = self_sub</span><br><span class=\"line\">    msg[<span class=\"string\">\"Data\"</span>] = Utils.formatdate(localtime = <span class=\"number\">1</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">    body = MIMEText(self_context,_subtype = <span class=\"string\">\"plain\"</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">    msg.attach(body)</span><br><span class=\"line\">    send = smtplib.SMTP(self_smtp)</span><br><span class=\"line\">    send.login(self_user,self_pass)</span><br><span class=\"line\">    send.sendmail(self_user,self_touser,msg.as_string())</span><br><span class=\"line\">    send.close()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__==<span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    host= <span class=\"string\">\"smtp.qq.com\"</span></span><br><span class=\"line\">    user= <span class=\"string\">\"xxxxxxxx@qq.com\"</span></span><br><span class=\"line\">    passwd= <span class=\"string\">\"xxxxxxxx\"</span></span><br><span class=\"line\">    to_user = <span class=\"string\">\"xxxxxxxxx@163.com\"</span></span><br><span class=\"line\">    sub = <span class=\"string\">\"Log anaylse result!\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    f = open(<span class=\"string\">\"log\"</span>,<span class=\"string\">\"r\"</span>)</span><br><span class=\"line\">    context = f.read()</span><br><span class=\"line\">    f.close()</span><br><span class=\"line\">    </span><br><span class=\"line\">    send_mail(user,passwd,host,context,sub,to_user)</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>pythonsmtp </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> email.MIMEText <span class=\"keyword\">import</span> MIMEText</span><br><span class=\"line\"><span class=\"keyword\">from</span> email.MIMEMultipart <span class=\"keyword\">import</span> MIMEMultipart</span><br><span class=\"line\"><span class=\"keyword\">from</span> email.MIMEBase <span class=\"keyword\">import</span> MIMEBase</span><br><span class=\"line\"><span class=\"keyword\">from</span> email <span class=\"keyword\">import</span> Utils,Encoders</span><br><span class=\"line\"><span class=\"keyword\">import</span> mimetypes,sys</span><br><span class=\"line\"><span class=\"keyword\">import</span> smtplib</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">send_mail</span><span class=\"params\">(user,passwd,host,context,sub,to_user)</span>:</span></span><br><span class=\"line\">    self_user = user</span><br><span class=\"line\">    self_pass = passwd</span><br><span class=\"line\">    self_smtp = host</span><br><span class=\"line\">    self_sub  = sub</span><br><span class=\"line\">    self_context = context</span><br><span class=\"line\">    self_touser = to_user</span><br><span class=\"line\"></span><br><span class=\"line\">    msg = MIMEMultipart()</span><br><span class=\"line\">    msg[<span class=\"string\">\"To\"</span>] = self_touser</span><br><span class=\"line\">    msg[<span class=\"string\">\"From\"</span>] = <span class=\"string\">\"xxxx@unxn.com\"</span></span><br><span class=\"line\">    msg[<span class=\"string\">\"Subject\"</span>] = self_sub</span><br><span class=\"line\">    msg[<span class=\"string\">\"Data\"</span>] = Utils.formatdate(localtime = <span class=\"number\">1</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">    body = MIMEText(self_context,_subtype = <span class=\"string\">\"plain\"</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">    msg.attach(body)</span><br><span class=\"line\">    send = smtplib.SMTP(self_smtp)</span><br><span class=\"line\">    send.login(self_user,self_pass)</span><br><span class=\"line\">    send.sendmail(self_user,self_touser,msg.as_string())</span><br><span class=\"line\">    send.close()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__==<span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    host= <span class=\"string\">\"smtp.qq.com\"</span></span><br><span class=\"line\">    user= <span class=\"string\">\"xxxxxxxx@qq.com\"</span></span><br><span class=\"line\">    passwd= <span class=\"string\">\"xxxxxxxx\"</span></span><br><span class=\"line\">    to_user = <span class=\"string\">\"xxxxxxxxx@163.com\"</span></span><br><span class=\"line\">    sub = <span class=\"string\">\"Log anaylse result!\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    f = open(<span class=\"string\">\"log\"</span>,<span class=\"string\">\"r\"</span>)</span><br><span class=\"line\">    context = f.read()</span><br><span class=\"line\">    f.close()</span><br><span class=\"line\">    </span><br><span class=\"line\">    send_mail(user,passwd,host,context,sub,to_user)</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"python tab","published":1,"author":"xiemx","comments":1,"date":"2016-03-03T23:03:49.000Z","_content":"```python\n#vi tab.py\n\n#!/usr/bin/env python \n# python startup file \nimport sys\nimport readline\nimport rlcompleter\nimport atexit\nimport os\n# tab completion \nreadline.parse_and_bind('tab: complete')\n# history file \nhistfile = os.path.join(os.environ['HOME'], '.pythonhistory')\ntry:\n    readline.read_history_file(histfile)\nexcept IOError:\n    pass\natexit.register(readline.write_history_file, histfile)\ndel os, histfile, readline, rlcompleter\n```","source":"_posts/python-tab.md","raw":"---\nlayout: post\ntitle: python tab\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-03-04 07:03:49\ntags: [ python ]\ncategories:\n    - python\n# permalink: '/2016/03/04/python-tab'\n---\n```python\n#vi tab.py\n\n#!/usr/bin/env python \n# python startup file \nimport sys\nimport readline\nimport rlcompleter\nimport atexit\nimport os\n# tab completion \nreadline.parse_and_bind('tab: complete')\n# history file \nhistfile = os.path.join(os.environ['HOME'], '.pythonhistory')\ntry:\n    readline.read_history_file(histfile)\nexcept IOError:\n    pass\natexit.register(readline.write_history_file, histfile)\ndel os, histfile, readline, rlcompleter\n```","slug":"python-tab","updated":"2019-10-19T09:27:16.679Z","photos":[],"link":"","_id":"ck42dyif10077u9urq73wewt1","content":"<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#vi tab.py</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python </span></span><br><span class=\"line\"><span class=\"comment\"># python startup file </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">import</span> readline</span><br><span class=\"line\"><span class=\"keyword\">import</span> rlcompleter</span><br><span class=\"line\"><span class=\"keyword\">import</span> atexit</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"comment\"># tab completion </span></span><br><span class=\"line\">readline.parse_and_bind(<span class=\"string\">'tab: complete'</span>)</span><br><span class=\"line\"><span class=\"comment\"># history file </span></span><br><span class=\"line\">histfile = os.path.join(os.environ[<span class=\"string\">'HOME'</span>], <span class=\"string\">'.pythonhistory'</span>)</span><br><span class=\"line\"><span class=\"keyword\">try</span>:</span><br><span class=\"line\">    readline.read_history_file(histfile)</span><br><span class=\"line\"><span class=\"keyword\">except</span> IOError:</span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\">atexit.register(readline.write_history_file, histfile)</span><br><span class=\"line\"><span class=\"keyword\">del</span> os, histfile, readline, rlcompleter</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#vi tab.py</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python </span></span><br><span class=\"line\"><span class=\"comment\"># python startup file </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">import</span> readline</span><br><span class=\"line\"><span class=\"keyword\">import</span> rlcompleter</span><br><span class=\"line\"><span class=\"keyword\">import</span> atexit</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"comment\"># tab completion </span></span><br><span class=\"line\">readline.parse_and_bind(<span class=\"string\">'tab: complete'</span>)</span><br><span class=\"line\"><span class=\"comment\"># history file </span></span><br><span class=\"line\">histfile = os.path.join(os.environ[<span class=\"string\">'HOME'</span>], <span class=\"string\">'.pythonhistory'</span>)</span><br><span class=\"line\"><span class=\"keyword\">try</span>:</span><br><span class=\"line\">    readline.read_history_file(histfile)</span><br><span class=\"line\"><span class=\"keyword\">except</span> IOError:</span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\">atexit.register(readline.write_history_file, histfile)</span><br><span class=\"line\"><span class=\"keyword\">del</span> os, histfile, readline, rlcompleter</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"rbash","published":1,"author":"xiemx","comments":1,"date":"2016-06-01T18:06:03.000Z","_content":"rbashmark\n### bash\n bash  rbash  -r  shell \n```\n cd \n SHELL PATH ENV BASH_ENV\n /\n /  . \nhash  -p  '/'\n shell \n shell  SHELLOPTS \n >>| <> >& &> >> \n exec \n enable  -f  -d \n enable  shell \n command  -p \n set +r  set +o restricted \n```\n### \n```shell\nln -s /bin/bash  /bin/rbash\nuseradd -s /bin/rbash rttlsa\npasswd rttlsa\nmkdir /home/rttlsa/bin\nchown root. /home/rttlsa/.bash_profile \nchmod 755 /home/rttlsa/.bash_profile\nvi /home/rttlsa/.bash_profile \n.bash_profile\n\n# Get the aliases and functions\nif [ -f ~/.bashrc ]; then\n  . ~/.bashrc\nfi\n\n# User specific environment and startup programs\nPATH=$HOME/bin\nexport PATH\nln -s /bin/cat  /home/rttlsa/bin/cat  $HOME/bin\n```\n","source":"_posts/rbash-add-readonly-user.md","raw":"---\nlayout: post\ntitle: rbash\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-06-02 02:06:03\ntags: [ command, rbash, bash, linux ]\ncategories:\n    - linux\n# permalink: '/2016/06/02/rbash-add-readonly-user'\n---\nrbashmark\n### bash\n bash  rbash  -r  shell \n```\n cd \n SHELL PATH ENV BASH_ENV\n /\n /  . \nhash  -p  '/'\n shell \n shell  SHELLOPTS \n >>| <> >& &> >> \n exec \n enable  -f  -d \n enable  shell \n command  -p \n set +r  set +o restricted \n```\n### \n```shell\nln -s /bin/bash  /bin/rbash\nuseradd -s /bin/rbash rttlsa\npasswd rttlsa\nmkdir /home/rttlsa/bin\nchown root. /home/rttlsa/.bash_profile \nchmod 755 /home/rttlsa/.bash_profile\nvi /home/rttlsa/.bash_profile \n.bash_profile\n\n# Get the aliases and functions\nif [ -f ~/.bashrc ]; then\n  . ~/.bashrc\nfi\n\n# User specific environment and startup programs\nPATH=$HOME/bin\nexport PATH\nln -s /bin/cat  /home/rttlsa/bin/cat  $HOME/bin\n```\n","slug":"rbash-add-readonly-user","updated":"2019-10-21T06:57:42.831Z","photos":[],"link":"","_id":"ck42dyif3007bu9ur7fuzduyu","content":"<p>rbashmark</p>\n<h3 id=\"bash\"><a href=\"#bash\" class=\"headerlink\" title=\"bash\"></a>bash</h3><p> bash  rbash  -r  shell </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"built_in\">cd</span> </span><br><span class=\"line\"> SHELL PATH ENV BASH_ENV</span><br><span class=\"line\"> /</span><br><span class=\"line\"> /  . </span><br><span class=\"line\"><span class=\"built_in\">hash</span>  -p  <span class=\"string\">'/'</span></span><br><span class=\"line\"> shell </span><br><span class=\"line\"> shell  SHELLOPTS </span><br><span class=\"line\"> &gt;&gt;| &lt;&gt; &gt;&amp; &amp;&gt; &gt;&gt; </span><br><span class=\"line\"> <span class=\"built_in\">exec</span> </span><br><span class=\"line\"> <span class=\"built_in\">enable</span>  -f  -d </span><br><span class=\"line\"> <span class=\"built_in\">enable</span>  shell </span><br><span class=\"line\"> <span class=\"built_in\">command</span>  -p </span><br><span class=\"line\"> <span class=\"built_in\">set</span> +r  <span class=\"built_in\">set</span> +o restricted </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /bin/bash  /bin/rbash</span><br><span class=\"line\">useradd -s /bin/rbash rttlsa</span><br><span class=\"line\">passwd rttlsa</span><br><span class=\"line\">mkdir /home/rttlsa/bin</span><br><span class=\"line\">chown root. /home/rttlsa/.bash_profile </span><br><span class=\"line\">chmod 755 /home/rttlsa/.bash_profile</span><br><span class=\"line\">vi /home/rttlsa/.bash_profile </span><br><span class=\"line\">.bash_profile</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> Get the aliases and <span class=\"built_in\">functions</span></span></span><br><span class=\"line\">if [ -f ~/.bashrc ]; then</span><br><span class=\"line\">  . ~/.bashrc</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> User specific environment and startup programs</span></span><br><span class=\"line\">PATH=$HOME/bin</span><br><span class=\"line\">export PATH</span><br><span class=\"line\">ln -s /bin/cat  /home/rttlsa/bin/cat  $HOME/bin</span><br></pre></td></tr></table></figure>\n\n<p></p>\n","site":{"data":{}},"excerpt":"","more":"<p>rbashmark</p>\n<h3 id=\"bash\"><a href=\"#bash\" class=\"headerlink\" title=\"bash\"></a>bash</h3><p> bash  rbash  -r  shell </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"built_in\">cd</span> </span><br><span class=\"line\"> SHELL PATH ENV BASH_ENV</span><br><span class=\"line\"> /</span><br><span class=\"line\"> /  . </span><br><span class=\"line\"><span class=\"built_in\">hash</span>  -p  <span class=\"string\">'/'</span></span><br><span class=\"line\"> shell </span><br><span class=\"line\"> shell  SHELLOPTS </span><br><span class=\"line\"> &gt;&gt;| &lt;&gt; &gt;&amp; &amp;&gt; &gt;&gt; </span><br><span class=\"line\"> <span class=\"built_in\">exec</span> </span><br><span class=\"line\"> <span class=\"built_in\">enable</span>  -f  -d </span><br><span class=\"line\"> <span class=\"built_in\">enable</span>  shell </span><br><span class=\"line\"> <span class=\"built_in\">command</span>  -p </span><br><span class=\"line\"> <span class=\"built_in\">set</span> +r  <span class=\"built_in\">set</span> +o restricted </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /bin/bash  /bin/rbash</span><br><span class=\"line\">useradd -s /bin/rbash rttlsa</span><br><span class=\"line\">passwd rttlsa</span><br><span class=\"line\">mkdir /home/rttlsa/bin</span><br><span class=\"line\">chown root. /home/rttlsa/.bash_profile </span><br><span class=\"line\">chmod 755 /home/rttlsa/.bash_profile</span><br><span class=\"line\">vi /home/rttlsa/.bash_profile </span><br><span class=\"line\">.bash_profile</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> Get the aliases and <span class=\"built_in\">functions</span></span></span><br><span class=\"line\">if [ -f ~/.bashrc ]; then</span><br><span class=\"line\">  . ~/.bashrc</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> User specific environment and startup programs</span></span><br><span class=\"line\">PATH=$HOME/bin</span><br><span class=\"line\">export PATH</span><br><span class=\"line\">ln -s /bin/cat  /home/rttlsa/bin/cat  $HOME/bin</span><br></pre></td></tr></table></figure>\n\n<p></p>\n"},{"layout":"post","title":"redis ","published":1,"author":"xiemx","comments":1,"date":"2017-07-14T02:07:44.000Z","_content":"redis maxmemorymaxmemory_policyredis\n\nredis  6\n\n* volatile-lru\n* volatile-ttl\n* volatile-random\n* allkeys-lru\n* allkeys-random\n* noenviction","source":"_posts/redis-maxmemory-policy.md","raw":"---\nlayout: post\ntitle: redis \npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-07-14 10:07:44\ntags: [ redis ]\ncategories:\n    - redis\n# permalink: '/2017/07/14/redis-%e6%b7%98%e6%b1%b0%e7%ad%96%e7%95%a5'\n---\nredis maxmemorymaxmemory_policyredis\n\nredis  6\n\n* volatile-lru\n* volatile-ttl\n* volatile-random\n* allkeys-lru\n* allkeys-random\n* noenviction","slug":"redis-maxmemory-policy","updated":"2019-10-19T09:11:22.213Z","photos":[],"link":"","_id":"ck42dyif5007fu9urwx15saig","content":"<p>redis maxmemorymaxmemory_policyredis</p>\n<p>redis  6</p>\n<ul>\n<li>volatile-lru</li>\n<li>volatile-ttl</li>\n<li>volatile-random</li>\n<li>allkeys-lru</li>\n<li>allkeys-random</li>\n<li>noenviction</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>redis maxmemorymaxmemory_policyredis</p>\n<p>redis  6</p>\n<ul>\n<li>volatile-lru</li>\n<li>volatile-ttl</li>\n<li>volatile-random</li>\n<li>allkeys-lru</li>\n<li>allkeys-random</li>\n<li>noenviction</li>\n</ul>\n"},{"layout":"post","title":"redis-dump","published":1,"author":"xiemx","comments":1,"date":"2019-05-06T03:05:33.000Z","_content":"* redis-dump/redis-load\n\n```shell\n#ruby 2.2.2ruby:2.2.3docker images\ngem install redis-dum\n```\n\n* dump redis\n```shell\nroot@5dba1bd8fa77:/# redis-dump -h\n  Try: /usr/local/bundle/bin/redis-dump show-commands\nUsage: /usr/local/bundle/bin/redis-dump [global options] COMMAND [command options]\n    -u, --uri=S                      Redis URI (e.g. redis://hostname[:port])\n    -d, --database=S                 Redis database (e.g. -d 15)\n    -a, --password=S                 Redis password (e.g. -a 'my@pass/word')\n    -s, --sleep=S                    Sleep for S seconds after dumping (for debugging)\n    -c, --count=S                    Chunk size (default: 10000)\n    -f, --filter=S                   Filter selected keys (passed directly to redis' KEYS command)\n    -b, --base64                     Encode key values as base64 (useful for binary values)\n    -O, --without_optimizations      Disable run time optimizations\n    -V, --version                    Display version\n    -D, --debug\n        --nosafe\n\nroot@5dba1bd8fa77:/# redis-dump -u aux-redis.1uvkyf.0001.cnn1.cache.amazonaws.com.cn > redis-uat.json\n```\n\n* load redis\n```shell\nroot@5dba1bd8fa77:/# redis-load -h\n  Try: /usr/local/bundle/bin/redis-load show-commands\nUsage: /usr/local/bundle/bin/redis-load [global options] COMMAND [command options]\n    -u, --uri=S                      Redis URI (e.g. redis://hostname[:port])\n    -d, --database=S                 Redis database (e.g. -d 15)\n    -a, --password=S                 Redis password (e.g. -a 'my@pass/word')\n    -s, --sleep=S                    Sleep for S seconds after dumping (for debugging)\n    -b, --base64                     Decode key values from base64 (used with redis-dump -b)\n    -n, --no_check_utf8\n    -V, --version                    Display version\n    -D, --debug\n        --nosafe\n\n\nroot@5dba1bd8fa77:/# redis-load -u aux-redis.1uvkyf.0001.cnn1.cache.amazonaws.com.cn:6379/0 < redis-uat.json\n```","source":"_posts/redis-dump.md","raw":"---\nlayout: post\ntitle: redis-dump\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2019-05-06 11:05:33\ntags: [ redis ]\ncategories:\n    - redis\n# permalink: '/2019/05/06/redis-dump'\n---\n* redis-dump/redis-load\n\n```shell\n#ruby 2.2.2ruby:2.2.3docker images\ngem install redis-dum\n```\n\n* dump redis\n```shell\nroot@5dba1bd8fa77:/# redis-dump -h\n  Try: /usr/local/bundle/bin/redis-dump show-commands\nUsage: /usr/local/bundle/bin/redis-dump [global options] COMMAND [command options]\n    -u, --uri=S                      Redis URI (e.g. redis://hostname[:port])\n    -d, --database=S                 Redis database (e.g. -d 15)\n    -a, --password=S                 Redis password (e.g. -a 'my@pass/word')\n    -s, --sleep=S                    Sleep for S seconds after dumping (for debugging)\n    -c, --count=S                    Chunk size (default: 10000)\n    -f, --filter=S                   Filter selected keys (passed directly to redis' KEYS command)\n    -b, --base64                     Encode key values as base64 (useful for binary values)\n    -O, --without_optimizations      Disable run time optimizations\n    -V, --version                    Display version\n    -D, --debug\n        --nosafe\n\nroot@5dba1bd8fa77:/# redis-dump -u aux-redis.1uvkyf.0001.cnn1.cache.amazonaws.com.cn > redis-uat.json\n```\n\n* load redis\n```shell\nroot@5dba1bd8fa77:/# redis-load -h\n  Try: /usr/local/bundle/bin/redis-load show-commands\nUsage: /usr/local/bundle/bin/redis-load [global options] COMMAND [command options]\n    -u, --uri=S                      Redis URI (e.g. redis://hostname[:port])\n    -d, --database=S                 Redis database (e.g. -d 15)\n    -a, --password=S                 Redis password (e.g. -a 'my@pass/word')\n    -s, --sleep=S                    Sleep for S seconds after dumping (for debugging)\n    -b, --base64                     Decode key values from base64 (used with redis-dump -b)\n    -n, --no_check_utf8\n    -V, --version                    Display version\n    -D, --debug\n        --nosafe\n\n\nroot@5dba1bd8fa77:/# redis-load -u aux-redis.1uvkyf.0001.cnn1.cache.amazonaws.com.cn:6379/0 < redis-uat.json\n```","slug":"redis-dump","updated":"2019-10-19T09:09:04.060Z","photos":[],"link":"","_id":"ck42dyif8007ju9ure5wm1iqx","content":"<ul>\n<li>redis-dump/redis-load</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">ruby 2.2.2ruby:2.2.3docker images</span></span><br><span class=\"line\">gem install redis-dum</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>dump redis</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@5dba1bd8fa77:/# redis-dump -h</span><br><span class=\"line\">  Try: /usr/local/bundle/bin/redis-dump show-commands</span><br><span class=\"line\">Usage: /usr/local/bundle/bin/redis-dump [global options] COMMAND [command options]</span><br><span class=\"line\">    -u, --uri=S                      Redis URI (e.g. redis://hostname[:port])</span><br><span class=\"line\">    -d, --database=S                 Redis database (e.g. -d 15)</span><br><span class=\"line\">    -a, --password=S                 Redis password (e.g. -a 'my@pass/word')</span><br><span class=\"line\">    -s, --sleep=S                    Sleep for S seconds after dumping (for debugging)</span><br><span class=\"line\">    -c, --count=S                    Chunk size (default: 10000)</span><br><span class=\"line\">    -f, --filter=S                   Filter selected keys (passed directly to redis' KEYS command)</span><br><span class=\"line\">    -b, --base64                     Encode key values as base64 (useful for binary values)</span><br><span class=\"line\">    -O, --without_optimizations      Disable run time optimizations</span><br><span class=\"line\">    -V, --version                    Display version</span><br><span class=\"line\">    -D, --debug</span><br><span class=\"line\">        --nosafe</span><br><span class=\"line\"></span><br><span class=\"line\">root@5dba1bd8fa77:/# redis-dump -u aux-redis.1uvkyf.0001.cnn1.cache.amazonaws.com.cn &gt; redis-uat.json</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>load redis</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@5dba1bd8fa77:/# redis-load -h</span><br><span class=\"line\">  Try: /usr/local/bundle/bin/redis-load show-commands</span><br><span class=\"line\">Usage: /usr/local/bundle/bin/redis-load [global options] COMMAND [command options]</span><br><span class=\"line\">    -u, --uri=S                      Redis URI (e.g. redis://hostname[:port])</span><br><span class=\"line\">    -d, --database=S                 Redis database (e.g. -d 15)</span><br><span class=\"line\">    -a, --password=S                 Redis password (e.g. -a 'my@pass/word')</span><br><span class=\"line\">    -s, --sleep=S                    Sleep for S seconds after dumping (for debugging)</span><br><span class=\"line\">    -b, --base64                     Decode key values from base64 (used with redis-dump -b)</span><br><span class=\"line\">    -n, --no_check_utf8</span><br><span class=\"line\">    -V, --version                    Display version</span><br><span class=\"line\">    -D, --debug</span><br><span class=\"line\">        --nosafe</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">root@5dba1bd8fa77:/# redis-load -u aux-redis.1uvkyf.0001.cnn1.cache.amazonaws.com.cn:6379/0 &lt; redis-uat.json</span><br></pre></td></tr></table></figure></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li>redis-dump/redis-load</li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">ruby 2.2.2ruby:2.2.3docker images</span></span><br><span class=\"line\">gem install redis-dum</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>dump redis</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@5dba1bd8fa77:/# redis-dump -h</span><br><span class=\"line\">  Try: /usr/local/bundle/bin/redis-dump show-commands</span><br><span class=\"line\">Usage: /usr/local/bundle/bin/redis-dump [global options] COMMAND [command options]</span><br><span class=\"line\">    -u, --uri=S                      Redis URI (e.g. redis://hostname[:port])</span><br><span class=\"line\">    -d, --database=S                 Redis database (e.g. -d 15)</span><br><span class=\"line\">    -a, --password=S                 Redis password (e.g. -a 'my@pass/word')</span><br><span class=\"line\">    -s, --sleep=S                    Sleep for S seconds after dumping (for debugging)</span><br><span class=\"line\">    -c, --count=S                    Chunk size (default: 10000)</span><br><span class=\"line\">    -f, --filter=S                   Filter selected keys (passed directly to redis' KEYS command)</span><br><span class=\"line\">    -b, --base64                     Encode key values as base64 (useful for binary values)</span><br><span class=\"line\">    -O, --without_optimizations      Disable run time optimizations</span><br><span class=\"line\">    -V, --version                    Display version</span><br><span class=\"line\">    -D, --debug</span><br><span class=\"line\">        --nosafe</span><br><span class=\"line\"></span><br><span class=\"line\">root@5dba1bd8fa77:/# redis-dump -u aux-redis.1uvkyf.0001.cnn1.cache.amazonaws.com.cn &gt; redis-uat.json</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>load redis</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@5dba1bd8fa77:/# redis-load -h</span><br><span class=\"line\">  Try: /usr/local/bundle/bin/redis-load show-commands</span><br><span class=\"line\">Usage: /usr/local/bundle/bin/redis-load [global options] COMMAND [command options]</span><br><span class=\"line\">    -u, --uri=S                      Redis URI (e.g. redis://hostname[:port])</span><br><span class=\"line\">    -d, --database=S                 Redis database (e.g. -d 15)</span><br><span class=\"line\">    -a, --password=S                 Redis password (e.g. -a 'my@pass/word')</span><br><span class=\"line\">    -s, --sleep=S                    Sleep for S seconds after dumping (for debugging)</span><br><span class=\"line\">    -b, --base64                     Decode key values from base64 (used with redis-dump -b)</span><br><span class=\"line\">    -n, --no_check_utf8</span><br><span class=\"line\">    -V, --version                    Display version</span><br><span class=\"line\">    -D, --debug</span><br><span class=\"line\">        --nosafe</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">root@5dba1bd8fa77:/# redis-load -u aux-redis.1uvkyf.0001.cnn1.cache.amazonaws.com.cn:6379/0 &lt; redis-uat.json</span><br></pre></td></tr></table></figure></li>\n</ul>\n"},{"layout":"post","title":"redis repl_diskless_replication","published":1,"author":"xiemx","comments":1,"date":"2017-03-05T20:03:55.000Z","_content":"redis diskless replication\n```conf\n# Replication\nrole:slave\nmaster_host:192.168.10.226\nmaster_port:6379\nmaster_link_status:down\nmaster_last_io_seconds_ago:-1\nmaster_sync_in_progress:1\nslave_repl_offset:1\nmaster_sync_left_bytes:-4022404224\nmaster_sync_last_io_seconds_ago:37\nmaster_link_down_since_seconds:1488785860\nslave_priority:100\nslave_read_only:1\nconnected_slaves:0\nmaster_repl_offset:0\nrepl_backlog_active:0\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:0\nrepl_backlog_histlen:0\n\n\n# Replication\nrole:master\nconnected_slaves:2\nslave0:ip=192.168.10.192,port=6379,state=online,offset=1134556373255,lag=1\nslave1:ip=192.168.10.82,port=6379,state=wait_bgsave,offset=0,lag=0\nmaster_repl_offset:1134556812751\nrepl_backlog_active:1\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:1134555764176\nrepl_backlog_histlen:1048576\n```\n\n\n\n```log\n6581:C 06 Mar 15:28:27.766 * DB saved on disk\n26581:C 06 Mar 15:28:27.990 * RDB: 212 MB of memory used by copy-on-write\n2251:M 06 Mar 15:28:28.379 * Background saving terminated with success\n2251:M 06 Mar 15:29:08.687 * Synchronization with slave 192.168.10.82:6379 succeeded\n2251:M 06 Mar 15:29:47.093 # Client id=314558845 addr=192.168.10.82:58002 fd=16 name= age=194 idle=1 flags=S db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=3617 omem=95797745 events=rw cmd=psync scheduled to be closed ASAP for overcoming of output buffer limits.\n2251:M 06 Mar 15:29:47.093 # Connection with slave 192.168.10.82:6379 lost.\n2251:M 06 Mar 15:30:15.999 * Slave 192.168.10.82:6379 asks for synchronization\n2251:M 06 Mar 15:30:15.999 * Unable to partial resync with slave 192.168.10.82:6379 for lack of backlog (Slave request was: 1134354232038).\n2251:M 06 Mar 15:30:15.999 * Starting BGSAVE for SYNC with target: disk\n2251:M 06 Mar 15:30:16.232 * Background saving started by pid 30494\n30494:C 06 Mar 15:31:52.413 * DB saved on disk\n30494:C 06 Mar 15:31:52.597 * RDB: 223 MB of memory used by copy-on-write\n2251:M 06 Mar 15:31:52.950 * Background saving terminated with success\n2251:M 06 Mar 15:32:33.375 * Synchronization with slave 192.168.10.82:6379 succeeded\n2251:M 06 Mar 15:33:08.106 # Client id=314561307 addr=192.168.10.82:38644 fd=16 name= age=173 idle=1 flags=S db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=4325 omem=102199438 events=rw cmd=psync scheduled to be closed ASAP for overcoming of output buffer limits.\n2251:M 06 Mar 15:33:08.106 # Connection with slave 192.168.10.82:6379 lost.\n2251:M 06 Mar 15:33:40.471 * Slave 192.168.10.82:6379 asks for synchronization\n2251:M 06 Mar 15:33:40.471 * Unable to partial resync with slave 192.168.10.82:6379 for lack of backlog (Slave request was: 1134453799057).\n2251:M 06 Mar 15:33:40.471 * Starting BGSAVE for SYNC with target: disk\n2251:M 06 Mar 15:33:40.715 * Background saving started by pid 1440\n2251:M 06 Mar 15:35:14.354 # Connection with slave 192.168.10.82:6379 lost.\n1440:C 06 Mar 15:35:20.564 * DB saved on disk\n1440:C 06 Mar 15:35:20.743 * RDB: 296 MB of memory used by copy-on-write\n2251:M 06 Mar 15:35:21.013 * Background saving terminated with success\n```\n\n\n### \nslavemasterslave\nmastermasterslave\nmaster\n\nRedisclient-output-buffer-limit\nRedisSlaveflags=SMaster; \n`client-output-buffer-limit slave 256mb 64mb 60`\n256mb,Master\n64mb,256mbsoft limit60Master\n\n\nbuffertimeoutdb\ndiskless replicationdiskdiskoutput\n\n\n### \nredis diskless replication\n\n```shell\n127.0.0.1:6379> CONFIG set repl-diskless-sync yes\nOK\n(1.97s)\n```\n```log\n2251:M 06 Mar 15:35:34.896 * Slave 192.168.10.82:6379 asks for synchronization\n2251:M 06 Mar 15:35:34.896 * Full resync requested by slave 192.168.10.82:6379\n2251:M 06 Mar 15:35:34.896 * Delay next BGSAVE for SYNC\n2251:M 06 Mar 15:35:40.203 * Starting BGSAVE for SYNC with target: slaves sockets\n2251:M 06 Mar 15:35:40.469 * Background RDB transfer started by pid 3351\n3351:C 06 Mar 15:37:03.206 * RDB: 233 MB of memory used by copy-on-write\n2251:M 06 Mar 15:37:03.473 * Background RDB transfer terminated with success\n2251:M 06 Mar 15:37:03.473 # Slave 192.168.10.82:6379 correctly received the streamed RDB file.\n2251:M 06 Mar 15:37:03.473 * Streamed RDB transfer with slave 192.168.10.82:6379 succeeded (socket). Waiting for REPLCONF ACK from slave to enable streaming\n2251:M 06 Mar 15:37:24.848 * 50000 changes in 60 seconds. Saving...\n2251:M 06 Mar 15:37:25.097 * Background saving started by pid 5916\n2251:M 06 Mar 15:38:10.510 * Synchronization with slave 192.168.10.82:6379 succeeded\n5916:C 06 Mar 15:39:06.535 * DB saved on disk\n5916:C 06 Mar 15:39:06.742 * RDB: 250 MB of memory used by copy-on-write\n2251:M 06 Mar 15:39:07.093 * Background saving terminated with success\n```\n```conf\n# Replication\nrole:slave\nmaster_host:192.168.10.226\nmaster_port:6379\nmaster_link_status:up\nmaster_last_io_seconds_ago:1\nmaster_sync_in_progress:0\nslave_repl_offset:1134697190334\nslave_priority:100\nslave_read_only:1\nconnected_slaves:0\nmaster_repl_offset:0\nrepl_backlog_active:0\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:0\nrepl_backlog_histlen:0\n\n# Replication\nrole:master\nconnected_slaves:2\nslave0:ip=192.168.10.192,port=6379,state=online,offset=1135553694283,lag=1\nslave1:ip=192.168.10.82,port=6379,state=online,offset=1135553653727,lag=1\nmaster_repl_offset:1135554186742\nrepl_backlog_active:1\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:1135553138167\nrepl_backlog_histlen:1048576\n```","source":"_posts/redis-repl_diskless_replication.md","raw":"---\nlayout: post\ntitle: redis repl_diskless_replication\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-03-06 04:03:55\ntags: [ redis ]\ncategories:\n    - redis\n---\nredis diskless replication\n```conf\n# Replication\nrole:slave\nmaster_host:192.168.10.226\nmaster_port:6379\nmaster_link_status:down\nmaster_last_io_seconds_ago:-1\nmaster_sync_in_progress:1\nslave_repl_offset:1\nmaster_sync_left_bytes:-4022404224\nmaster_sync_last_io_seconds_ago:37\nmaster_link_down_since_seconds:1488785860\nslave_priority:100\nslave_read_only:1\nconnected_slaves:0\nmaster_repl_offset:0\nrepl_backlog_active:0\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:0\nrepl_backlog_histlen:0\n\n\n# Replication\nrole:master\nconnected_slaves:2\nslave0:ip=192.168.10.192,port=6379,state=online,offset=1134556373255,lag=1\nslave1:ip=192.168.10.82,port=6379,state=wait_bgsave,offset=0,lag=0\nmaster_repl_offset:1134556812751\nrepl_backlog_active:1\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:1134555764176\nrepl_backlog_histlen:1048576\n```\n\n\n\n```log\n6581:C 06 Mar 15:28:27.766 * DB saved on disk\n26581:C 06 Mar 15:28:27.990 * RDB: 212 MB of memory used by copy-on-write\n2251:M 06 Mar 15:28:28.379 * Background saving terminated with success\n2251:M 06 Mar 15:29:08.687 * Synchronization with slave 192.168.10.82:6379 succeeded\n2251:M 06 Mar 15:29:47.093 # Client id=314558845 addr=192.168.10.82:58002 fd=16 name= age=194 idle=1 flags=S db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=3617 omem=95797745 events=rw cmd=psync scheduled to be closed ASAP for overcoming of output buffer limits.\n2251:M 06 Mar 15:29:47.093 # Connection with slave 192.168.10.82:6379 lost.\n2251:M 06 Mar 15:30:15.999 * Slave 192.168.10.82:6379 asks for synchronization\n2251:M 06 Mar 15:30:15.999 * Unable to partial resync with slave 192.168.10.82:6379 for lack of backlog (Slave request was: 1134354232038).\n2251:M 06 Mar 15:30:15.999 * Starting BGSAVE for SYNC with target: disk\n2251:M 06 Mar 15:30:16.232 * Background saving started by pid 30494\n30494:C 06 Mar 15:31:52.413 * DB saved on disk\n30494:C 06 Mar 15:31:52.597 * RDB: 223 MB of memory used by copy-on-write\n2251:M 06 Mar 15:31:52.950 * Background saving terminated with success\n2251:M 06 Mar 15:32:33.375 * Synchronization with slave 192.168.10.82:6379 succeeded\n2251:M 06 Mar 15:33:08.106 # Client id=314561307 addr=192.168.10.82:38644 fd=16 name= age=173 idle=1 flags=S db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=4325 omem=102199438 events=rw cmd=psync scheduled to be closed ASAP for overcoming of output buffer limits.\n2251:M 06 Mar 15:33:08.106 # Connection with slave 192.168.10.82:6379 lost.\n2251:M 06 Mar 15:33:40.471 * Slave 192.168.10.82:6379 asks for synchronization\n2251:M 06 Mar 15:33:40.471 * Unable to partial resync with slave 192.168.10.82:6379 for lack of backlog (Slave request was: 1134453799057).\n2251:M 06 Mar 15:33:40.471 * Starting BGSAVE for SYNC with target: disk\n2251:M 06 Mar 15:33:40.715 * Background saving started by pid 1440\n2251:M 06 Mar 15:35:14.354 # Connection with slave 192.168.10.82:6379 lost.\n1440:C 06 Mar 15:35:20.564 * DB saved on disk\n1440:C 06 Mar 15:35:20.743 * RDB: 296 MB of memory used by copy-on-write\n2251:M 06 Mar 15:35:21.013 * Background saving terminated with success\n```\n\n\n### \nslavemasterslave\nmastermasterslave\nmaster\n\nRedisclient-output-buffer-limit\nRedisSlaveflags=SMaster; \n`client-output-buffer-limit slave 256mb 64mb 60`\n256mb,Master\n64mb,256mbsoft limit60Master\n\n\nbuffertimeoutdb\ndiskless replicationdiskdiskoutput\n\n\n### \nredis diskless replication\n\n```shell\n127.0.0.1:6379> CONFIG set repl-diskless-sync yes\nOK\n(1.97s)\n```\n```log\n2251:M 06 Mar 15:35:34.896 * Slave 192.168.10.82:6379 asks for synchronization\n2251:M 06 Mar 15:35:34.896 * Full resync requested by slave 192.168.10.82:6379\n2251:M 06 Mar 15:35:34.896 * Delay next BGSAVE for SYNC\n2251:M 06 Mar 15:35:40.203 * Starting BGSAVE for SYNC with target: slaves sockets\n2251:M 06 Mar 15:35:40.469 * Background RDB transfer started by pid 3351\n3351:C 06 Mar 15:37:03.206 * RDB: 233 MB of memory used by copy-on-write\n2251:M 06 Mar 15:37:03.473 * Background RDB transfer terminated with success\n2251:M 06 Mar 15:37:03.473 # Slave 192.168.10.82:6379 correctly received the streamed RDB file.\n2251:M 06 Mar 15:37:03.473 * Streamed RDB transfer with slave 192.168.10.82:6379 succeeded (socket). Waiting for REPLCONF ACK from slave to enable streaming\n2251:M 06 Mar 15:37:24.848 * 50000 changes in 60 seconds. Saving...\n2251:M 06 Mar 15:37:25.097 * Background saving started by pid 5916\n2251:M 06 Mar 15:38:10.510 * Synchronization with slave 192.168.10.82:6379 succeeded\n5916:C 06 Mar 15:39:06.535 * DB saved on disk\n5916:C 06 Mar 15:39:06.742 * RDB: 250 MB of memory used by copy-on-write\n2251:M 06 Mar 15:39:07.093 * Background saving terminated with success\n```\n```conf\n# Replication\nrole:slave\nmaster_host:192.168.10.226\nmaster_port:6379\nmaster_link_status:up\nmaster_last_io_seconds_ago:1\nmaster_sync_in_progress:0\nslave_repl_offset:1134697190334\nslave_priority:100\nslave_read_only:1\nconnected_slaves:0\nmaster_repl_offset:0\nrepl_backlog_active:0\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:0\nrepl_backlog_histlen:0\n\n# Replication\nrole:master\nconnected_slaves:2\nslave0:ip=192.168.10.192,port=6379,state=online,offset=1135553694283,lag=1\nslave1:ip=192.168.10.82,port=6379,state=online,offset=1135553653727,lag=1\nmaster_repl_offset:1135554186742\nrepl_backlog_active:1\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:1135553138167\nrepl_backlog_histlen:1048576\n```","slug":"redis-repl_diskless_replication","updated":"2019-10-21T06:57:42.620Z","photos":[],"link":"","_id":"ck42dyifb007lu9urtzm9q0qa","content":"<p>redis diskless replication</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Replication</span><br><span class=\"line\">role:slave</span><br><span class=\"line\">master_host:192.168.10.226</span><br><span class=\"line\">master_port:6379</span><br><span class=\"line\">master_link_status:down</span><br><span class=\"line\">master_last_io_seconds_ago:-1</span><br><span class=\"line\">master_sync_in_progress:1</span><br><span class=\"line\">slave_repl_offset:1</span><br><span class=\"line\">master_sync_left_bytes:-4022404224</span><br><span class=\"line\">master_sync_last_io_seconds_ago:37</span><br><span class=\"line\">master_link_down_since_seconds:1488785860</span><br><span class=\"line\">slave_priority:100</span><br><span class=\"line\">slave_read_only:1</span><br><span class=\"line\">connected_slaves:0</span><br><span class=\"line\">master_repl_offset:0</span><br><span class=\"line\">repl_backlog_active:0</span><br><span class=\"line\">repl_backlog_size:1048576</span><br><span class=\"line\">repl_backlog_first_byte_offset:0</span><br><span class=\"line\">repl_backlog_histlen:0</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># Replication</span><br><span class=\"line\">role:master</span><br><span class=\"line\">connected_slaves:2</span><br><span class=\"line\">slave0:ip=192.168.10.192,port=6379,state=online,offset=1134556373255,lag=1</span><br><span class=\"line\">slave1:ip=192.168.10.82,port=6379,state=wait_bgsave,offset=0,lag=0</span><br><span class=\"line\">master_repl_offset:1134556812751</span><br><span class=\"line\">repl_backlog_active:1</span><br><span class=\"line\">repl_backlog_size:1048576</span><br><span class=\"line\">repl_backlog_first_byte_offset:1134555764176</span><br><span class=\"line\">repl_backlog_histlen:1048576</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">6581:C 06 Mar 15:28:27.766 * DB saved on disk</span><br><span class=\"line\">26581:C 06 Mar 15:28:27.990 * RDB: 212 MB of memory used by copy-on-write</span><br><span class=\"line\">2251:M 06 Mar 15:28:28.379 * Background saving terminated with success</span><br><span class=\"line\">2251:M 06 Mar 15:29:08.687 * Synchronization with slave 192.168.10.82:6379 succeeded</span><br><span class=\"line\">2251:M 06 Mar 15:29:47.093 # Client id=314558845 addr=192.168.10.82:58002 fd=16 name= age=194 idle=1 flags=S db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=3617 omem=95797745 events=rw cmd=psync scheduled to be closed ASAP for overcoming of output buffer limits.</span><br><span class=\"line\">2251:M 06 Mar 15:29:47.093 # Connection with slave 192.168.10.82:6379 lost.</span><br><span class=\"line\">2251:M 06 Mar 15:30:15.999 * Slave 192.168.10.82:6379 asks for synchronization</span><br><span class=\"line\">2251:M 06 Mar 15:30:15.999 * Unable to partial resync with slave 192.168.10.82:6379 for lack of backlog (Slave request was: 1134354232038).</span><br><span class=\"line\">2251:M 06 Mar 15:30:15.999 * Starting BGSAVE for SYNC with target: disk</span><br><span class=\"line\">2251:M 06 Mar 15:30:16.232 * Background saving started by pid 30494</span><br><span class=\"line\">30494:C 06 Mar 15:31:52.413 * DB saved on disk</span><br><span class=\"line\">30494:C 06 Mar 15:31:52.597 * RDB: 223 MB of memory used by copy-on-write</span><br><span class=\"line\">2251:M 06 Mar 15:31:52.950 * Background saving terminated with success</span><br><span class=\"line\">2251:M 06 Mar 15:32:33.375 * Synchronization with slave 192.168.10.82:6379 succeeded</span><br><span class=\"line\">2251:M 06 Mar 15:33:08.106 # Client id=314561307 addr=192.168.10.82:38644 fd=16 name= age=173 idle=1 flags=S db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=4325 omem=102199438 events=rw cmd=psync scheduled to be closed ASAP for overcoming of output buffer limits.</span><br><span class=\"line\">2251:M 06 Mar 15:33:08.106 # Connection with slave 192.168.10.82:6379 lost.</span><br><span class=\"line\">2251:M 06 Mar 15:33:40.471 * Slave 192.168.10.82:6379 asks for synchronization</span><br><span class=\"line\">2251:M 06 Mar 15:33:40.471 * Unable to partial resync with slave 192.168.10.82:6379 for lack of backlog (Slave request was: 1134453799057).</span><br><span class=\"line\">2251:M 06 Mar 15:33:40.471 * Starting BGSAVE for SYNC with target: disk</span><br><span class=\"line\">2251:M 06 Mar 15:33:40.715 * Background saving started by pid 1440</span><br><span class=\"line\">2251:M 06 Mar 15:35:14.354 # Connection with slave 192.168.10.82:6379 lost.</span><br><span class=\"line\">1440:C 06 Mar 15:35:20.564 * DB saved on disk</span><br><span class=\"line\">1440:C 06 Mar 15:35:20.743 * RDB: 296 MB of memory used by copy-on-write</span><br><span class=\"line\">2251:M 06 Mar 15:35:21.013 * Background saving terminated with success</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>slavemasterslave<br>mastermasterslave<br>master</p>\n<p>Redisclient-output-buffer-limit<br>RedisSlaveflags=SMaster; <br><code>client-output-buffer-limit slave 256mb 64mb 60</code><br>256mb,Master<br>64mb,256mbsoft limit60Master</p>\n<p>buffertimeoutdb<br>diskless replicationdiskdiskoutput</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>redis diskless replication</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">127.0.0.1:6379&gt; CONFIG set repl-diskless-sync yes</span><br><span class=\"line\">OK</span><br><span class=\"line\">(1.97s)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2251:M 06 Mar 15:35:34.896 * Slave 192.168.10.82:6379 asks for synchronization</span><br><span class=\"line\">2251:M 06 Mar 15:35:34.896 * Full resync requested by slave 192.168.10.82:6379</span><br><span class=\"line\">2251:M 06 Mar 15:35:34.896 * Delay next BGSAVE for SYNC</span><br><span class=\"line\">2251:M 06 Mar 15:35:40.203 * Starting BGSAVE for SYNC with target: slaves sockets</span><br><span class=\"line\">2251:M 06 Mar 15:35:40.469 * Background RDB transfer started by pid 3351</span><br><span class=\"line\">3351:C 06 Mar 15:37:03.206 * RDB: 233 MB of memory used by copy-on-write</span><br><span class=\"line\">2251:M 06 Mar 15:37:03.473 * Background RDB transfer terminated with success</span><br><span class=\"line\">2251:M 06 Mar 15:37:03.473 # Slave 192.168.10.82:6379 correctly received the streamed RDB file.</span><br><span class=\"line\">2251:M 06 Mar 15:37:03.473 * Streamed RDB transfer with slave 192.168.10.82:6379 succeeded (socket). Waiting for REPLCONF ACK from slave to enable streaming</span><br><span class=\"line\">2251:M 06 Mar 15:37:24.848 * 50000 changes in 60 seconds. Saving...</span><br><span class=\"line\">2251:M 06 Mar 15:37:25.097 * Background saving started by pid 5916</span><br><span class=\"line\">2251:M 06 Mar 15:38:10.510 * Synchronization with slave 192.168.10.82:6379 succeeded</span><br><span class=\"line\">5916:C 06 Mar 15:39:06.535 * DB saved on disk</span><br><span class=\"line\">5916:C 06 Mar 15:39:06.742 * RDB: 250 MB of memory used by copy-on-write</span><br><span class=\"line\">2251:M 06 Mar 15:39:07.093 * Background saving terminated with success</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Replication</span><br><span class=\"line\">role:slave</span><br><span class=\"line\">master_host:192.168.10.226</span><br><span class=\"line\">master_port:6379</span><br><span class=\"line\">master_link_status:up</span><br><span class=\"line\">master_last_io_seconds_ago:1</span><br><span class=\"line\">master_sync_in_progress:0</span><br><span class=\"line\">slave_repl_offset:1134697190334</span><br><span class=\"line\">slave_priority:100</span><br><span class=\"line\">slave_read_only:1</span><br><span class=\"line\">connected_slaves:0</span><br><span class=\"line\">master_repl_offset:0</span><br><span class=\"line\">repl_backlog_active:0</span><br><span class=\"line\">repl_backlog_size:1048576</span><br><span class=\"line\">repl_backlog_first_byte_offset:0</span><br><span class=\"line\">repl_backlog_histlen:0</span><br><span class=\"line\"></span><br><span class=\"line\"># Replication</span><br><span class=\"line\">role:master</span><br><span class=\"line\">connected_slaves:2</span><br><span class=\"line\">slave0:ip=192.168.10.192,port=6379,state=online,offset=1135553694283,lag=1</span><br><span class=\"line\">slave1:ip=192.168.10.82,port=6379,state=online,offset=1135553653727,lag=1</span><br><span class=\"line\">master_repl_offset:1135554186742</span><br><span class=\"line\">repl_backlog_active:1</span><br><span class=\"line\">repl_backlog_size:1048576</span><br><span class=\"line\">repl_backlog_first_byte_offset:1135553138167</span><br><span class=\"line\">repl_backlog_histlen:1048576</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>redis diskless replication</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Replication</span><br><span class=\"line\">role:slave</span><br><span class=\"line\">master_host:192.168.10.226</span><br><span class=\"line\">master_port:6379</span><br><span class=\"line\">master_link_status:down</span><br><span class=\"line\">master_last_io_seconds_ago:-1</span><br><span class=\"line\">master_sync_in_progress:1</span><br><span class=\"line\">slave_repl_offset:1</span><br><span class=\"line\">master_sync_left_bytes:-4022404224</span><br><span class=\"line\">master_sync_last_io_seconds_ago:37</span><br><span class=\"line\">master_link_down_since_seconds:1488785860</span><br><span class=\"line\">slave_priority:100</span><br><span class=\"line\">slave_read_only:1</span><br><span class=\"line\">connected_slaves:0</span><br><span class=\"line\">master_repl_offset:0</span><br><span class=\"line\">repl_backlog_active:0</span><br><span class=\"line\">repl_backlog_size:1048576</span><br><span class=\"line\">repl_backlog_first_byte_offset:0</span><br><span class=\"line\">repl_backlog_histlen:0</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># Replication</span><br><span class=\"line\">role:master</span><br><span class=\"line\">connected_slaves:2</span><br><span class=\"line\">slave0:ip=192.168.10.192,port=6379,state=online,offset=1134556373255,lag=1</span><br><span class=\"line\">slave1:ip=192.168.10.82,port=6379,state=wait_bgsave,offset=0,lag=0</span><br><span class=\"line\">master_repl_offset:1134556812751</span><br><span class=\"line\">repl_backlog_active:1</span><br><span class=\"line\">repl_backlog_size:1048576</span><br><span class=\"line\">repl_backlog_first_byte_offset:1134555764176</span><br><span class=\"line\">repl_backlog_histlen:1048576</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">6581:C 06 Mar 15:28:27.766 * DB saved on disk</span><br><span class=\"line\">26581:C 06 Mar 15:28:27.990 * RDB: 212 MB of memory used by copy-on-write</span><br><span class=\"line\">2251:M 06 Mar 15:28:28.379 * Background saving terminated with success</span><br><span class=\"line\">2251:M 06 Mar 15:29:08.687 * Synchronization with slave 192.168.10.82:6379 succeeded</span><br><span class=\"line\">2251:M 06 Mar 15:29:47.093 # Client id=314558845 addr=192.168.10.82:58002 fd=16 name= age=194 idle=1 flags=S db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=3617 omem=95797745 events=rw cmd=psync scheduled to be closed ASAP for overcoming of output buffer limits.</span><br><span class=\"line\">2251:M 06 Mar 15:29:47.093 # Connection with slave 192.168.10.82:6379 lost.</span><br><span class=\"line\">2251:M 06 Mar 15:30:15.999 * Slave 192.168.10.82:6379 asks for synchronization</span><br><span class=\"line\">2251:M 06 Mar 15:30:15.999 * Unable to partial resync with slave 192.168.10.82:6379 for lack of backlog (Slave request was: 1134354232038).</span><br><span class=\"line\">2251:M 06 Mar 15:30:15.999 * Starting BGSAVE for SYNC with target: disk</span><br><span class=\"line\">2251:M 06 Mar 15:30:16.232 * Background saving started by pid 30494</span><br><span class=\"line\">30494:C 06 Mar 15:31:52.413 * DB saved on disk</span><br><span class=\"line\">30494:C 06 Mar 15:31:52.597 * RDB: 223 MB of memory used by copy-on-write</span><br><span class=\"line\">2251:M 06 Mar 15:31:52.950 * Background saving terminated with success</span><br><span class=\"line\">2251:M 06 Mar 15:32:33.375 * Synchronization with slave 192.168.10.82:6379 succeeded</span><br><span class=\"line\">2251:M 06 Mar 15:33:08.106 # Client id=314561307 addr=192.168.10.82:38644 fd=16 name= age=173 idle=1 flags=S db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=4325 omem=102199438 events=rw cmd=psync scheduled to be closed ASAP for overcoming of output buffer limits.</span><br><span class=\"line\">2251:M 06 Mar 15:33:08.106 # Connection with slave 192.168.10.82:6379 lost.</span><br><span class=\"line\">2251:M 06 Mar 15:33:40.471 * Slave 192.168.10.82:6379 asks for synchronization</span><br><span class=\"line\">2251:M 06 Mar 15:33:40.471 * Unable to partial resync with slave 192.168.10.82:6379 for lack of backlog (Slave request was: 1134453799057).</span><br><span class=\"line\">2251:M 06 Mar 15:33:40.471 * Starting BGSAVE for SYNC with target: disk</span><br><span class=\"line\">2251:M 06 Mar 15:33:40.715 * Background saving started by pid 1440</span><br><span class=\"line\">2251:M 06 Mar 15:35:14.354 # Connection with slave 192.168.10.82:6379 lost.</span><br><span class=\"line\">1440:C 06 Mar 15:35:20.564 * DB saved on disk</span><br><span class=\"line\">1440:C 06 Mar 15:35:20.743 * RDB: 296 MB of memory used by copy-on-write</span><br><span class=\"line\">2251:M 06 Mar 15:35:21.013 * Background saving terminated with success</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>slavemasterslave<br>mastermasterslave<br>master</p>\n<p>Redisclient-output-buffer-limit<br>RedisSlaveflags=SMaster; <br><code>client-output-buffer-limit slave 256mb 64mb 60</code><br>256mb,Master<br>64mb,256mbsoft limit60Master</p>\n<p>buffertimeoutdb<br>diskless replicationdiskdiskoutput</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>redis diskless replication</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">127.0.0.1:6379&gt; CONFIG set repl-diskless-sync yes</span><br><span class=\"line\">OK</span><br><span class=\"line\">(1.97s)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2251:M 06 Mar 15:35:34.896 * Slave 192.168.10.82:6379 asks for synchronization</span><br><span class=\"line\">2251:M 06 Mar 15:35:34.896 * Full resync requested by slave 192.168.10.82:6379</span><br><span class=\"line\">2251:M 06 Mar 15:35:34.896 * Delay next BGSAVE for SYNC</span><br><span class=\"line\">2251:M 06 Mar 15:35:40.203 * Starting BGSAVE for SYNC with target: slaves sockets</span><br><span class=\"line\">2251:M 06 Mar 15:35:40.469 * Background RDB transfer started by pid 3351</span><br><span class=\"line\">3351:C 06 Mar 15:37:03.206 * RDB: 233 MB of memory used by copy-on-write</span><br><span class=\"line\">2251:M 06 Mar 15:37:03.473 * Background RDB transfer terminated with success</span><br><span class=\"line\">2251:M 06 Mar 15:37:03.473 # Slave 192.168.10.82:6379 correctly received the streamed RDB file.</span><br><span class=\"line\">2251:M 06 Mar 15:37:03.473 * Streamed RDB transfer with slave 192.168.10.82:6379 succeeded (socket). Waiting for REPLCONF ACK from slave to enable streaming</span><br><span class=\"line\">2251:M 06 Mar 15:37:24.848 * 50000 changes in 60 seconds. Saving...</span><br><span class=\"line\">2251:M 06 Mar 15:37:25.097 * Background saving started by pid 5916</span><br><span class=\"line\">2251:M 06 Mar 15:38:10.510 * Synchronization with slave 192.168.10.82:6379 succeeded</span><br><span class=\"line\">5916:C 06 Mar 15:39:06.535 * DB saved on disk</span><br><span class=\"line\">5916:C 06 Mar 15:39:06.742 * RDB: 250 MB of memory used by copy-on-write</span><br><span class=\"line\">2251:M 06 Mar 15:39:07.093 * Background saving terminated with success</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Replication</span><br><span class=\"line\">role:slave</span><br><span class=\"line\">master_host:192.168.10.226</span><br><span class=\"line\">master_port:6379</span><br><span class=\"line\">master_link_status:up</span><br><span class=\"line\">master_last_io_seconds_ago:1</span><br><span class=\"line\">master_sync_in_progress:0</span><br><span class=\"line\">slave_repl_offset:1134697190334</span><br><span class=\"line\">slave_priority:100</span><br><span class=\"line\">slave_read_only:1</span><br><span class=\"line\">connected_slaves:0</span><br><span class=\"line\">master_repl_offset:0</span><br><span class=\"line\">repl_backlog_active:0</span><br><span class=\"line\">repl_backlog_size:1048576</span><br><span class=\"line\">repl_backlog_first_byte_offset:0</span><br><span class=\"line\">repl_backlog_histlen:0</span><br><span class=\"line\"></span><br><span class=\"line\"># Replication</span><br><span class=\"line\">role:master</span><br><span class=\"line\">connected_slaves:2</span><br><span class=\"line\">slave0:ip=192.168.10.192,port=6379,state=online,offset=1135553694283,lag=1</span><br><span class=\"line\">slave1:ip=192.168.10.82,port=6379,state=online,offset=1135553653727,lag=1</span><br><span class=\"line\">master_repl_offset:1135554186742</span><br><span class=\"line\">repl_backlog_active:1</span><br><span class=\"line\">repl_backlog_size:1048576</span><br><span class=\"line\">repl_backlog_first_byte_offset:1135553138167</span><br><span class=\"line\">repl_backlog_histlen:1048576</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"redis","published":1,"author":"xiemx","comments":1,"date":"2016-05-23T03:05:17.000Z","_content":"1. redis:\n\n* masterslave\n* slavemasterslave\n* mastermasterclient\n* \n* mastermastersaveslave\n\n2. redis:\n\nslaveslavemastersyncmastermastermasterslaveslavemasterslavemasterslavemasterslavemasterslave\n\n3. redis:\n```conf\n### master\ndaemonize yes\npidfile /var/run/redis.pid\nport 6379\ntimeout 300\nloglevel verbose\nlogfile /usr/local/xiemx-redis/var/log/redis.log\ndatabases 16\nsave 900 1\nsave 300 10\nsave 60 10000\nrdbcompression yes\ndbfilename dump.rdb\ndir /usr/local/xiemx-redis/var/data\nrequirepass redis\nappendonly no\nappendfsync everysec\nno-appendfsync-on-rewrite no\nslowlog-log-slower-than 10000\nslowlog-max-len 1024\nvm-enabled no\nvm-swap-file /tmp/redis.swap\nvm-max-memory 0\nvm-page-size 32\nvm-pages 134217728\nvm-max-threads 4\nhash-max-zipmap-entries 512\nhash-max-zipmap-value 64\nlist-max-ziplist-entries 512\nlist-max-ziplist-value 64\nset-max-intset-entries 512\nactiverehashing yes\n```\n```conf\n### slave\ndaemonize yes\npidfile /var/run/redis.pid\nport 6379\ntimeout 300\nloglevel verbose\nlogfile /usr/local/xiemx-redis/var/log/redis.log\ndatabases 16\nsave 900 1\nsave 300 10\nsave 60 10000\nrdbcompression yes\ndbfilename dump.rdb\ndir /usr/local/xiemx-redis/var/data\nappendonly no\nappendfsync everysec\nno-appendfsync-on-rewrite no\nslowlog-log-slower-than 10000\nslowlog-max-len 1024\nvm-enabled no\nvm-swap-file /tmp/redis.swap\nvm-max-memory 0\nvm-page-size 32\nvm-pages 134217728\nvm-max-threads 4\nhash-max-zipmap-entries 512\nhash-max-zipmap-value 64\nlist-max-ziplist-entries 512\nlist-max-ziplist-value 64\nset-max-intset-entries 512\nactiverehashing yes\nslaveof 192.168.1.189 6379\nmasterauth redis\n```\n4. redis\n\n```log\nmaster:\n[8930] 31 Jul 19:16:09 - Accepted 192.168.1.136:54774\n[8930] 31 Jul 19:16:09 * Slave ask for synchronization\n[8930] 31 Jul 19:16:09 * Starting BGSAVE for SYNC\n[8930] 31 Jul 19:16:09 * Background saving started by pid 10782\n[10782] 31 Jul 19:16:09 * DB saved on disk\n[8930] 31 Jul 19:16:09 * Background saving terminated with success\n[8930] 31 Jul 19:16:09 * Synchronization with slave succeeded\n[8930] 31 Jul 19:16:14 - DB 0: 1 keys (0 volatile) in 4 slots HT.\n[8930] 31 Jul 19:16:14 - 1 clients connected (1 slaves), 807320 bytes in use\n\nslave:\n[24398] 01 Aug 10:16:10 * Connecting to MASTER...\n[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync started: SYNC sent\n[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync: receiving 25 bytes from master\n[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync: Loading DB in memory\n[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync: Finished with success\n[24398] 01 Aug 10:16:15 - DB 0: 1 keys (0 volatile) in 4 slots HT.\n[24398] 01 Aug 10:16:15 - 1 clients connected (0 slaves), 798960 bytes in use\n```\n```\nmaster:\nredis 127.0.0.1:6379> set k_m master\nOK\n\nslave:\nredis 127.0.0.1:6379> get k_m\n\"master\"\n```\n","source":"_posts/redis-slave-replica.md","raw":"---\nlayout: post\ntitle: redis\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-05-23 11:05:17\ntags: [ redis ]\ncategories:\n    - redis\n# permalink: '/2016/05/23/redis%e4%b8%bb%e4%bb%8e%e5%a4%8d%e5%88%b6'\n---\n1. redis:\n\n* masterslave\n* slavemasterslave\n* mastermasterclient\n* \n* mastermastersaveslave\n\n2. redis:\n\nslaveslavemastersyncmastermastermasterslaveslavemasterslavemasterslavemasterslavemasterslave\n\n3. redis:\n```conf\n### master\ndaemonize yes\npidfile /var/run/redis.pid\nport 6379\ntimeout 300\nloglevel verbose\nlogfile /usr/local/xiemx-redis/var/log/redis.log\ndatabases 16\nsave 900 1\nsave 300 10\nsave 60 10000\nrdbcompression yes\ndbfilename dump.rdb\ndir /usr/local/xiemx-redis/var/data\nrequirepass redis\nappendonly no\nappendfsync everysec\nno-appendfsync-on-rewrite no\nslowlog-log-slower-than 10000\nslowlog-max-len 1024\nvm-enabled no\nvm-swap-file /tmp/redis.swap\nvm-max-memory 0\nvm-page-size 32\nvm-pages 134217728\nvm-max-threads 4\nhash-max-zipmap-entries 512\nhash-max-zipmap-value 64\nlist-max-ziplist-entries 512\nlist-max-ziplist-value 64\nset-max-intset-entries 512\nactiverehashing yes\n```\n```conf\n### slave\ndaemonize yes\npidfile /var/run/redis.pid\nport 6379\ntimeout 300\nloglevel verbose\nlogfile /usr/local/xiemx-redis/var/log/redis.log\ndatabases 16\nsave 900 1\nsave 300 10\nsave 60 10000\nrdbcompression yes\ndbfilename dump.rdb\ndir /usr/local/xiemx-redis/var/data\nappendonly no\nappendfsync everysec\nno-appendfsync-on-rewrite no\nslowlog-log-slower-than 10000\nslowlog-max-len 1024\nvm-enabled no\nvm-swap-file /tmp/redis.swap\nvm-max-memory 0\nvm-page-size 32\nvm-pages 134217728\nvm-max-threads 4\nhash-max-zipmap-entries 512\nhash-max-zipmap-value 64\nlist-max-ziplist-entries 512\nlist-max-ziplist-value 64\nset-max-intset-entries 512\nactiverehashing yes\nslaveof 192.168.1.189 6379\nmasterauth redis\n```\n4. redis\n\n```log\nmaster:\n[8930] 31 Jul 19:16:09 - Accepted 192.168.1.136:54774\n[8930] 31 Jul 19:16:09 * Slave ask for synchronization\n[8930] 31 Jul 19:16:09 * Starting BGSAVE for SYNC\n[8930] 31 Jul 19:16:09 * Background saving started by pid 10782\n[10782] 31 Jul 19:16:09 * DB saved on disk\n[8930] 31 Jul 19:16:09 * Background saving terminated with success\n[8930] 31 Jul 19:16:09 * Synchronization with slave succeeded\n[8930] 31 Jul 19:16:14 - DB 0: 1 keys (0 volatile) in 4 slots HT.\n[8930] 31 Jul 19:16:14 - 1 clients connected (1 slaves), 807320 bytes in use\n\nslave:\n[24398] 01 Aug 10:16:10 * Connecting to MASTER...\n[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync started: SYNC sent\n[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync: receiving 25 bytes from master\n[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync: Loading DB in memory\n[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync: Finished with success\n[24398] 01 Aug 10:16:15 - DB 0: 1 keys (0 volatile) in 4 slots HT.\n[24398] 01 Aug 10:16:15 - 1 clients connected (0 slaves), 798960 bytes in use\n```\n```\nmaster:\nredis 127.0.0.1:6379> set k_m master\nOK\n\nslave:\nredis 127.0.0.1:6379> get k_m\n\"master\"\n```\n","slug":"redis-slave-replica","updated":"2019-10-19T08:43:41.709Z","photos":[],"link":"","_id":"ck42dyifc007qu9urjilpk6xk","content":"<ol>\n<li>redis:</li>\n</ol>\n<ul>\n<li>masterslave</li>\n<li>slavemasterslave</li>\n<li>mastermasterclient</li>\n<li></li>\n<li>mastermastersaveslave</li>\n</ul>\n<ol start=\"2\">\n<li>redis:</li>\n</ol>\n<p>slaveslavemastersyncmastermastermasterslaveslavemasterslavemasterslavemasterslavemasterslave</p>\n<ol start=\"3\">\n<li>redis:<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">### master</span><br><span class=\"line\">daemonize yes</span><br><span class=\"line\">pidfile /var/run/redis.pid</span><br><span class=\"line\">port 6379</span><br><span class=\"line\">timeout 300</span><br><span class=\"line\">loglevel verbose</span><br><span class=\"line\">logfile /usr/local/xiemx-redis/var/log/redis.log</span><br><span class=\"line\">databases 16</span><br><span class=\"line\">save 900 1</span><br><span class=\"line\">save 300 10</span><br><span class=\"line\">save 60 10000</span><br><span class=\"line\">rdbcompression yes</span><br><span class=\"line\">dbfilename dump.rdb</span><br><span class=\"line\">dir /usr/local/xiemx-redis/var/data</span><br><span class=\"line\">requirepass redis</span><br><span class=\"line\">appendonly no</span><br><span class=\"line\">appendfsync everysec</span><br><span class=\"line\">no-appendfsync-on-rewrite no</span><br><span class=\"line\">slowlog-log-slower-than 10000</span><br><span class=\"line\">slowlog-max-len 1024</span><br><span class=\"line\">vm-enabled no</span><br><span class=\"line\">vm-swap-file /tmp/redis.swap</span><br><span class=\"line\">vm-max-memory 0</span><br><span class=\"line\">vm-page-size 32</span><br><span class=\"line\">vm-pages 134217728</span><br><span class=\"line\">vm-max-threads 4</span><br><span class=\"line\">hash-max-zipmap-entries 512</span><br><span class=\"line\">hash-max-zipmap-value 64</span><br><span class=\"line\">list-max-ziplist-entries 512</span><br><span class=\"line\">list-max-ziplist-value 64</span><br><span class=\"line\">set-max-intset-entries 512</span><br><span class=\"line\">activerehashing yes</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">### slave</span><br><span class=\"line\">daemonize yes</span><br><span class=\"line\">pidfile /var/run/redis.pid</span><br><span class=\"line\">port 6379</span><br><span class=\"line\">timeout 300</span><br><span class=\"line\">loglevel verbose</span><br><span class=\"line\">logfile /usr/local/xiemx-redis/var/log/redis.log</span><br><span class=\"line\">databases 16</span><br><span class=\"line\">save 900 1</span><br><span class=\"line\">save 300 10</span><br><span class=\"line\">save 60 10000</span><br><span class=\"line\">rdbcompression yes</span><br><span class=\"line\">dbfilename dump.rdb</span><br><span class=\"line\">dir /usr/local/xiemx-redis/var/data</span><br><span class=\"line\">appendonly no</span><br><span class=\"line\">appendfsync everysec</span><br><span class=\"line\">no-appendfsync-on-rewrite no</span><br><span class=\"line\">slowlog-log-slower-than 10000</span><br><span class=\"line\">slowlog-max-len 1024</span><br><span class=\"line\">vm-enabled no</span><br><span class=\"line\">vm-swap-file /tmp/redis.swap</span><br><span class=\"line\">vm-max-memory 0</span><br><span class=\"line\">vm-page-size 32</span><br><span class=\"line\">vm-pages 134217728</span><br><span class=\"line\">vm-max-threads 4</span><br><span class=\"line\">hash-max-zipmap-entries 512</span><br><span class=\"line\">hash-max-zipmap-value 64</span><br><span class=\"line\">list-max-ziplist-entries 512</span><br><span class=\"line\">list-max-ziplist-value 64</span><br><span class=\"line\">set-max-intset-entries 512</span><br><span class=\"line\">activerehashing yes</span><br><span class=\"line\">slaveof 192.168.1.189 6379</span><br><span class=\"line\">masterauth redis</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>redis</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">master:</span><br><span class=\"line\">[8930] 31 Jul 19:16:09 - Accepted 192.168.1.136:54774</span><br><span class=\"line\">[8930] 31 Jul 19:16:09 * Slave ask for synchronization</span><br><span class=\"line\">[8930] 31 Jul 19:16:09 * Starting BGSAVE for SYNC</span><br><span class=\"line\">[8930] 31 Jul 19:16:09 * Background saving started by pid 10782</span><br><span class=\"line\">[10782] 31 Jul 19:16:09 * DB saved on disk</span><br><span class=\"line\">[8930] 31 Jul 19:16:09 * Background saving terminated with success</span><br><span class=\"line\">[8930] 31 Jul 19:16:09 * Synchronization with slave succeeded</span><br><span class=\"line\">[8930] 31 Jul 19:16:14 - DB 0: 1 keys (0 volatile) in 4 slots HT.</span><br><span class=\"line\">[8930] 31 Jul 19:16:14 - 1 clients connected (1 slaves), 807320 bytes in use</span><br><span class=\"line\"></span><br><span class=\"line\">slave:</span><br><span class=\"line\">[24398] 01 Aug 10:16:10 * Connecting to MASTER...</span><br><span class=\"line\">[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync started: SYNC sent</span><br><span class=\"line\">[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync: receiving 25 bytes from master</span><br><span class=\"line\">[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync: Loading DB in memory</span><br><span class=\"line\">[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync: Finished with success</span><br><span class=\"line\">[24398] 01 Aug 10:16:15 - DB 0: 1 keys (0 volatile) in 4 slots HT.</span><br><span class=\"line\">[24398] 01 Aug 10:16:15 - 1 clients connected (0 slaves), 798960 bytes in use</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">master:</span><br><span class=\"line\">redis <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">6379</span>&gt; <span class=\"keyword\">set</span> k_m master</span><br><span class=\"line\">OK</span><br><span class=\"line\"></span><br><span class=\"line\">slave:</span><br><span class=\"line\">redis <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">6379</span>&gt; <span class=\"keyword\">get</span> k_m</span><br><span class=\"line\"><span class=\"string\">\"master\"</span></span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li>redis:</li>\n</ol>\n<ul>\n<li>masterslave</li>\n<li>slavemasterslave</li>\n<li>mastermasterclient</li>\n<li></li>\n<li>mastermastersaveslave</li>\n</ul>\n<ol start=\"2\">\n<li>redis:</li>\n</ol>\n<p>slaveslavemastersyncmastermastermasterslaveslavemasterslavemasterslavemasterslavemasterslave</p>\n<ol start=\"3\">\n<li>redis:<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">### master</span><br><span class=\"line\">daemonize yes</span><br><span class=\"line\">pidfile /var/run/redis.pid</span><br><span class=\"line\">port 6379</span><br><span class=\"line\">timeout 300</span><br><span class=\"line\">loglevel verbose</span><br><span class=\"line\">logfile /usr/local/xiemx-redis/var/log/redis.log</span><br><span class=\"line\">databases 16</span><br><span class=\"line\">save 900 1</span><br><span class=\"line\">save 300 10</span><br><span class=\"line\">save 60 10000</span><br><span class=\"line\">rdbcompression yes</span><br><span class=\"line\">dbfilename dump.rdb</span><br><span class=\"line\">dir /usr/local/xiemx-redis/var/data</span><br><span class=\"line\">requirepass redis</span><br><span class=\"line\">appendonly no</span><br><span class=\"line\">appendfsync everysec</span><br><span class=\"line\">no-appendfsync-on-rewrite no</span><br><span class=\"line\">slowlog-log-slower-than 10000</span><br><span class=\"line\">slowlog-max-len 1024</span><br><span class=\"line\">vm-enabled no</span><br><span class=\"line\">vm-swap-file /tmp/redis.swap</span><br><span class=\"line\">vm-max-memory 0</span><br><span class=\"line\">vm-page-size 32</span><br><span class=\"line\">vm-pages 134217728</span><br><span class=\"line\">vm-max-threads 4</span><br><span class=\"line\">hash-max-zipmap-entries 512</span><br><span class=\"line\">hash-max-zipmap-value 64</span><br><span class=\"line\">list-max-ziplist-entries 512</span><br><span class=\"line\">list-max-ziplist-value 64</span><br><span class=\"line\">set-max-intset-entries 512</span><br><span class=\"line\">activerehashing yes</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">### slave</span><br><span class=\"line\">daemonize yes</span><br><span class=\"line\">pidfile /var/run/redis.pid</span><br><span class=\"line\">port 6379</span><br><span class=\"line\">timeout 300</span><br><span class=\"line\">loglevel verbose</span><br><span class=\"line\">logfile /usr/local/xiemx-redis/var/log/redis.log</span><br><span class=\"line\">databases 16</span><br><span class=\"line\">save 900 1</span><br><span class=\"line\">save 300 10</span><br><span class=\"line\">save 60 10000</span><br><span class=\"line\">rdbcompression yes</span><br><span class=\"line\">dbfilename dump.rdb</span><br><span class=\"line\">dir /usr/local/xiemx-redis/var/data</span><br><span class=\"line\">appendonly no</span><br><span class=\"line\">appendfsync everysec</span><br><span class=\"line\">no-appendfsync-on-rewrite no</span><br><span class=\"line\">slowlog-log-slower-than 10000</span><br><span class=\"line\">slowlog-max-len 1024</span><br><span class=\"line\">vm-enabled no</span><br><span class=\"line\">vm-swap-file /tmp/redis.swap</span><br><span class=\"line\">vm-max-memory 0</span><br><span class=\"line\">vm-page-size 32</span><br><span class=\"line\">vm-pages 134217728</span><br><span class=\"line\">vm-max-threads 4</span><br><span class=\"line\">hash-max-zipmap-entries 512</span><br><span class=\"line\">hash-max-zipmap-value 64</span><br><span class=\"line\">list-max-ziplist-entries 512</span><br><span class=\"line\">list-max-ziplist-value 64</span><br><span class=\"line\">set-max-intset-entries 512</span><br><span class=\"line\">activerehashing yes</span><br><span class=\"line\">slaveof 192.168.1.189 6379</span><br><span class=\"line\">masterauth redis</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>redis</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">master:</span><br><span class=\"line\">[8930] 31 Jul 19:16:09 - Accepted 192.168.1.136:54774</span><br><span class=\"line\">[8930] 31 Jul 19:16:09 * Slave ask for synchronization</span><br><span class=\"line\">[8930] 31 Jul 19:16:09 * Starting BGSAVE for SYNC</span><br><span class=\"line\">[8930] 31 Jul 19:16:09 * Background saving started by pid 10782</span><br><span class=\"line\">[10782] 31 Jul 19:16:09 * DB saved on disk</span><br><span class=\"line\">[8930] 31 Jul 19:16:09 * Background saving terminated with success</span><br><span class=\"line\">[8930] 31 Jul 19:16:09 * Synchronization with slave succeeded</span><br><span class=\"line\">[8930] 31 Jul 19:16:14 - DB 0: 1 keys (0 volatile) in 4 slots HT.</span><br><span class=\"line\">[8930] 31 Jul 19:16:14 - 1 clients connected (1 slaves), 807320 bytes in use</span><br><span class=\"line\"></span><br><span class=\"line\">slave:</span><br><span class=\"line\">[24398] 01 Aug 10:16:10 * Connecting to MASTER...</span><br><span class=\"line\">[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync started: SYNC sent</span><br><span class=\"line\">[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync: receiving 25 bytes from master</span><br><span class=\"line\">[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync: Loading DB in memory</span><br><span class=\"line\">[24398] 01 Aug 10:16:10 * MASTER  SLAVE sync: Finished with success</span><br><span class=\"line\">[24398] 01 Aug 10:16:15 - DB 0: 1 keys (0 volatile) in 4 slots HT.</span><br><span class=\"line\">[24398] 01 Aug 10:16:15 - 1 clients connected (0 slaves), 798960 bytes in use</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">master:</span><br><span class=\"line\">redis <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">6379</span>&gt; <span class=\"keyword\">set</span> k_m master</span><br><span class=\"line\">OK</span><br><span class=\"line\"></span><br><span class=\"line\">slave:</span><br><span class=\"line\">redis <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">6379</span>&gt; <span class=\"keyword\">get</span> k_m</span><br><span class=\"line\"><span class=\"string\">\"master\"</span></span><br></pre></td></tr></table></figure>\n\n"},{"layout":"post","title":"redis-trib.rbredis","published":1,"author":"xiemx","comments":1,"date":"2017-02-26T20:02:11.000Z","_content":"redis-cluster\n\nredis-trib.rbredis,redis cluster6masterslave\n\n\np-hsg-redis-1  192.168.10.81   7000/7001\np-hsg-redis-2\t 192.168.10.82   7000/7001\np-hsg-redis-3\t 192.168.10.83   7000/7001\n\n\n\n\n1.redisserver\n\nsaltstacksaltredis\nsalt-call state.sls redis.cluster\n\n2.\n```shell\n\troot@p-hsg-redis-1:/etc/redis# cat /etc/redis/7000.conf\n\tprotected-mode no\n\tdaemonize yes\n\tport 7000\n\tcluster-enabled yes\n\tcluster-config-file nodes-7000.conf\n\tcluster-node-timeout 15000\n\tappendonly yes\n\tdir /var/lib/redis/7000\n```\n3.redis\n```shell\n\troot@p-hsg-redis-3:/etc/redis# ps -ef | grep redis\n\troot     30431     1  0 15:12 ?        00:00:00 /usr/local/bin/redis-server *:7001 [cluster]\n\troot     30446     1  0 15:12 ?        00:00:00 /usr/local/bin/redis-server *:7000 [cluster]\n\troot     30450 11073  0 15:12 pts/1    00:00:00 grep --color=auto redis\n```\n4.\n```shell\n\tredis-trib.rb create --replicas 1 192.168.10.81:7001 192.168.10.81:7000 192.168.10.82:7000 192.168.10.82:7001 192.168.10.83:7000 192.168.10.83:7001\n\t>>> Creating cluster\n\t>>> Performing hash slots allocation on 6 nodes...\n\tUsing 3 masters:\n\t192.168.10.81:7001\n\t192.168.10.82:7000\n\t192.168.10.83:7000\n\tAdding replica 192.168.10.82:7001 to 192.168.10.81:7001\n\tAdding replica 192.168.10.81:7000 to 192.168.10.82:7000\n\tAdding replica 192.168.10.83:7001 to 192.168.10.83:7000\n\tM: 5fd250591aa474d6370e1df547959c5895716192 192.168.10.81:7001\n\t   slots:0-5460 (5461 slots) master\n\tS: ef8bf8a326894fee37a398d3f88de3120fc71ea5 192.168.10.81:7000\n\t   replicates dc62f19b8894db1816f7b92e3fe05b8244832d3e\n\tM: dc62f19b8894db1816f7b92e3fe05b8244832d3e 192.168.10.82:7000\n\t   slots:5461-10922 (5462 slots) master\n\tS: eb2c7cc3cb56bb5ee124d80e353a91331d092042 192.168.10.82:7001\n\t   replicates 5fd250591aa474d6370e1df547959c5895716192\n\tM: 1773d96052f573361a13b5e9015f947b340d45cd 192.168.10.83:7000\n\t   slots:10923-16383 (5461 slots) master\n\tS: 670f158355b93b4a7ac30d69dc3e1e8c4c484a9f 192.168.10.83:7001\n\t   replicates 1773d96052f573361a13b5e9015f947b340d45cd\n\tCan I set the above configuration? (type 'yes' to accept): yes\n\t>>> Nodes configuration updated\n\t>>> Assign a different config epoch to each node\n\t>>> Sending CLUSTER MEET messages to join the cluster\n\tWaiting for the cluster to join...\n\t>>> Performing Cluster Check (using node 192.168.10.81:7001)\n\tM: 5fd250591aa474d6370e1df547959c5895716192 192.168.10.81:7001\n\t   slots:0-5460 (5461 slots) master\n\t   1 additional replica(s)\n\tM: 1773d96052f573361a13b5e9015f947b340d45cd 192.168.10.83:7000\n\t   slots:10923-16383 (5461 slots) master\n\t   1 additional replica(s)\n\tS: ef8bf8a326894fee37a398d3f88de3120fc71ea5 192.168.10.81:7000\n\t   slots: (0 slots) slave\n\t   replicates dc62f19b8894db1816f7b92e3fe05b8244832d3e\n\tS: 670f158355b93b4a7ac30d69dc3e1e8c4c484a9f 192.168.10.83:7001\n\t   slots: (0 slots) slave\n\t   replicates 1773d96052f573361a13b5e9015f947b340d45cd\n\tM: dc62f19b8894db1816f7b92e3fe05b8244832d3e 192.168.10.82:7000\n\t   slots:5461-10922 (5462 slots) master\n\t   1 additional replica(s)\n\tS: eb2c7cc3cb56bb5ee124d80e353a91331d092042 192.168.10.82:7001\n\t   slots: (0 slots) slave\n\t   replicates 5fd250591aa474d6370e1df547959c5895716192\n\t[OK] All nodes agree about slots configuration.\n\t>>> Check for open slots...\n\t>>> Check slots coverage...\n\t[OK] All 16384 slots covered.\n\t```","source":"_posts/redis-trib-rb-create-cluster.md","raw":"---\nlayout: post\ntitle: redis-trib.rbredis\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-02-27 04:02:11\ntags: [ redis, cluster ]\ncategories:\n    - redis\n# permalink: '/2017/02/27/redis-trib-rb%e6%9e%84%e5%bb%baredis%e9%9b%86%e7%be%a4'\n---\nredis-cluster\n\nredis-trib.rbredis,redis cluster6masterslave\n\n\np-hsg-redis-1  192.168.10.81   7000/7001\np-hsg-redis-2\t 192.168.10.82   7000/7001\np-hsg-redis-3\t 192.168.10.83   7000/7001\n\n\n\n\n1.redisserver\n\nsaltstacksaltredis\nsalt-call state.sls redis.cluster\n\n2.\n```shell\n\troot@p-hsg-redis-1:/etc/redis# cat /etc/redis/7000.conf\n\tprotected-mode no\n\tdaemonize yes\n\tport 7000\n\tcluster-enabled yes\n\tcluster-config-file nodes-7000.conf\n\tcluster-node-timeout 15000\n\tappendonly yes\n\tdir /var/lib/redis/7000\n```\n3.redis\n```shell\n\troot@p-hsg-redis-3:/etc/redis# ps -ef | grep redis\n\troot     30431     1  0 15:12 ?        00:00:00 /usr/local/bin/redis-server *:7001 [cluster]\n\troot     30446     1  0 15:12 ?        00:00:00 /usr/local/bin/redis-server *:7000 [cluster]\n\troot     30450 11073  0 15:12 pts/1    00:00:00 grep --color=auto redis\n```\n4.\n```shell\n\tredis-trib.rb create --replicas 1 192.168.10.81:7001 192.168.10.81:7000 192.168.10.82:7000 192.168.10.82:7001 192.168.10.83:7000 192.168.10.83:7001\n\t>>> Creating cluster\n\t>>> Performing hash slots allocation on 6 nodes...\n\tUsing 3 masters:\n\t192.168.10.81:7001\n\t192.168.10.82:7000\n\t192.168.10.83:7000\n\tAdding replica 192.168.10.82:7001 to 192.168.10.81:7001\n\tAdding replica 192.168.10.81:7000 to 192.168.10.82:7000\n\tAdding replica 192.168.10.83:7001 to 192.168.10.83:7000\n\tM: 5fd250591aa474d6370e1df547959c5895716192 192.168.10.81:7001\n\t   slots:0-5460 (5461 slots) master\n\tS: ef8bf8a326894fee37a398d3f88de3120fc71ea5 192.168.10.81:7000\n\t   replicates dc62f19b8894db1816f7b92e3fe05b8244832d3e\n\tM: dc62f19b8894db1816f7b92e3fe05b8244832d3e 192.168.10.82:7000\n\t   slots:5461-10922 (5462 slots) master\n\tS: eb2c7cc3cb56bb5ee124d80e353a91331d092042 192.168.10.82:7001\n\t   replicates 5fd250591aa474d6370e1df547959c5895716192\n\tM: 1773d96052f573361a13b5e9015f947b340d45cd 192.168.10.83:7000\n\t   slots:10923-16383 (5461 slots) master\n\tS: 670f158355b93b4a7ac30d69dc3e1e8c4c484a9f 192.168.10.83:7001\n\t   replicates 1773d96052f573361a13b5e9015f947b340d45cd\n\tCan I set the above configuration? (type 'yes' to accept): yes\n\t>>> Nodes configuration updated\n\t>>> Assign a different config epoch to each node\n\t>>> Sending CLUSTER MEET messages to join the cluster\n\tWaiting for the cluster to join...\n\t>>> Performing Cluster Check (using node 192.168.10.81:7001)\n\tM: 5fd250591aa474d6370e1df547959c5895716192 192.168.10.81:7001\n\t   slots:0-5460 (5461 slots) master\n\t   1 additional replica(s)\n\tM: 1773d96052f573361a13b5e9015f947b340d45cd 192.168.10.83:7000\n\t   slots:10923-16383 (5461 slots) master\n\t   1 additional replica(s)\n\tS: ef8bf8a326894fee37a398d3f88de3120fc71ea5 192.168.10.81:7000\n\t   slots: (0 slots) slave\n\t   replicates dc62f19b8894db1816f7b92e3fe05b8244832d3e\n\tS: 670f158355b93b4a7ac30d69dc3e1e8c4c484a9f 192.168.10.83:7001\n\t   slots: (0 slots) slave\n\t   replicates 1773d96052f573361a13b5e9015f947b340d45cd\n\tM: dc62f19b8894db1816f7b92e3fe05b8244832d3e 192.168.10.82:7000\n\t   slots:5461-10922 (5462 slots) master\n\t   1 additional replica(s)\n\tS: eb2c7cc3cb56bb5ee124d80e353a91331d092042 192.168.10.82:7001\n\t   slots: (0 slots) slave\n\t   replicates 5fd250591aa474d6370e1df547959c5895716192\n\t[OK] All nodes agree about slots configuration.\n\t>>> Check for open slots...\n\t>>> Check slots coverage...\n\t[OK] All 16384 slots covered.\n\t```","slug":"redis-trib-rb-create-cluster","updated":"2019-10-21T06:57:42.922Z","photos":[],"link":"","_id":"ck42dyiff007tu9urbngaw0u1","content":"<p>redis-cluster</p>\n<p>redis-trib.rbredis,redis cluster6masterslave</p>\n<p><br>p-hsg-redis-1  192.168.10.81   7000/7001<br>p-hsg-redis-2     192.168.10.82   7000/7001<br>p-hsg-redis-3     192.168.10.83   7000/7001</p>\n<p></p>\n<p>1.redisserver</p>\n<p>saltstacksaltredis<br>salt-call state.sls redis.cluster</p>\n<p>2.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@p-hsg-redis-1:/etc/redis# cat /etc/redis/7000.conf</span><br><span class=\"line\">protected-mode no</span><br><span class=\"line\">daemonize yes</span><br><span class=\"line\">port 7000</span><br><span class=\"line\">cluster-enabled yes</span><br><span class=\"line\">cluster-config-file nodes-7000.conf</span><br><span class=\"line\">cluster-node-timeout 15000</span><br><span class=\"line\">appendonly yes</span><br><span class=\"line\">dir /var/lib/redis/7000</span><br></pre></td></tr></table></figure>\n\n<p>3.redis</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@p-hsg-redis-3:/etc/redis# ps -ef | grep redis</span><br><span class=\"line\">root     30431     1  0 15:12 ?        00:00:00 /usr/local/bin/redis-server *:7001 [cluster]</span><br><span class=\"line\">root     30446     1  0 15:12 ?        00:00:00 /usr/local/bin/redis-server *:7000 [cluster]</span><br><span class=\"line\">root     30450 11073  0 15:12 pts/1    00:00:00 grep --color=auto redis</span><br></pre></td></tr></table></figure>\n\n<p>4.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-trib.rb create --replicas 1 192.168.10.81:7001 192.168.10.81:7000 192.168.10.82:7000 192.168.10.82:7001 192.168.10.83:7000 192.168.10.83:7001</span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Creating cluster</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Performing <span class=\"built_in\">hash</span> slots allocation on 6 nodes...</span></span><br><span class=\"line\">Using 3 masters:</span><br><span class=\"line\">192.168.10.81:7001</span><br><span class=\"line\">192.168.10.82:7000</span><br><span class=\"line\">192.168.10.83:7000</span><br><span class=\"line\">Adding replica 192.168.10.82:7001 to 192.168.10.81:7001</span><br><span class=\"line\">Adding replica 192.168.10.81:7000 to 192.168.10.82:7000</span><br><span class=\"line\">Adding replica 192.168.10.83:7001 to 192.168.10.83:7000</span><br><span class=\"line\">M: 5fd250591aa474d6370e1df547959c5895716192 192.168.10.81:7001</span><br><span class=\"line\">   slots:0-5460 (5461 slots) master</span><br><span class=\"line\">S: ef8bf8a326894fee37a398d3f88de3120fc71ea5 192.168.10.81:7000</span><br><span class=\"line\">   replicates dc62f19b8894db1816f7b92e3fe05b8244832d3e</span><br><span class=\"line\">M: dc62f19b8894db1816f7b92e3fe05b8244832d3e 192.168.10.82:7000</span><br><span class=\"line\">   slots:5461-10922 (5462 slots) master</span><br><span class=\"line\">S: eb2c7cc3cb56bb5ee124d80e353a91331d092042 192.168.10.82:7001</span><br><span class=\"line\">   replicates 5fd250591aa474d6370e1df547959c5895716192</span><br><span class=\"line\">M: 1773d96052f573361a13b5e9015f947b340d45cd 192.168.10.83:7000</span><br><span class=\"line\">   slots:10923-16383 (5461 slots) master</span><br><span class=\"line\">S: 670f158355b93b4a7ac30d69dc3e1e8c4c484a9f 192.168.10.83:7001</span><br><span class=\"line\">   replicates 1773d96052f573361a13b5e9015f947b340d45cd</span><br><span class=\"line\">Can I set the above configuration? (type 'yes' to accept): yes</span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Nodes configuration updated</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Assign a different config epoch to each node</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Sending CLUSTER MEET messages to join the cluster</span></span><br><span class=\"line\">Waiting for the cluster to join...</span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Performing Cluster Check (using node 192.168.10.81:7001)</span></span><br><span class=\"line\">M: 5fd250591aa474d6370e1df547959c5895716192 192.168.10.81:7001</span><br><span class=\"line\">   slots:0-5460 (5461 slots) master</span><br><span class=\"line\">   1 additional replica(s)</span><br><span class=\"line\">M: 1773d96052f573361a13b5e9015f947b340d45cd 192.168.10.83:7000</span><br><span class=\"line\">   slots:10923-16383 (5461 slots) master</span><br><span class=\"line\">   1 additional replica(s)</span><br><span class=\"line\">S: ef8bf8a326894fee37a398d3f88de3120fc71ea5 192.168.10.81:7000</span><br><span class=\"line\">   slots: (0 slots) slave</span><br><span class=\"line\">   replicates dc62f19b8894db1816f7b92e3fe05b8244832d3e</span><br><span class=\"line\">S: 670f158355b93b4a7ac30d69dc3e1e8c4c484a9f 192.168.10.83:7001</span><br><span class=\"line\">   slots: (0 slots) slave</span><br><span class=\"line\">   replicates 1773d96052f573361a13b5e9015f947b340d45cd</span><br><span class=\"line\">M: dc62f19b8894db1816f7b92e3fe05b8244832d3e 192.168.10.82:7000</span><br><span class=\"line\">   slots:5461-10922 (5462 slots) master</span><br><span class=\"line\">   1 additional replica(s)</span><br><span class=\"line\">S: eb2c7cc3cb56bb5ee124d80e353a91331d092042 192.168.10.82:7001</span><br><span class=\"line\">   slots: (0 slots) slave</span><br><span class=\"line\">   replicates 5fd250591aa474d6370e1df547959c5895716192</span><br><span class=\"line\">[OK] All nodes agree about slots configuration.</span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Check <span class=\"keyword\">for</span> open slots...</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Check slots coverage...</span></span><br><span class=\"line\">[OK] All 16384 slots covered.</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>redis-cluster</p>\n<p>redis-trib.rbredis,redis cluster6masterslave</p>\n<p><br>p-hsg-redis-1  192.168.10.81   7000/7001<br>p-hsg-redis-2     192.168.10.82   7000/7001<br>p-hsg-redis-3     192.168.10.83   7000/7001</p>\n<p></p>\n<p>1.redisserver</p>\n<p>saltstacksaltredis<br>salt-call state.sls redis.cluster</p>\n<p>2.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@p-hsg-redis-1:/etc/redis# cat /etc/redis/7000.conf</span><br><span class=\"line\">protected-mode no</span><br><span class=\"line\">daemonize yes</span><br><span class=\"line\">port 7000</span><br><span class=\"line\">cluster-enabled yes</span><br><span class=\"line\">cluster-config-file nodes-7000.conf</span><br><span class=\"line\">cluster-node-timeout 15000</span><br><span class=\"line\">appendonly yes</span><br><span class=\"line\">dir /var/lib/redis/7000</span><br></pre></td></tr></table></figure>\n\n<p>3.redis</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@p-hsg-redis-3:/etc/redis# ps -ef | grep redis</span><br><span class=\"line\">root     30431     1  0 15:12 ?        00:00:00 /usr/local/bin/redis-server *:7001 [cluster]</span><br><span class=\"line\">root     30446     1  0 15:12 ?        00:00:00 /usr/local/bin/redis-server *:7000 [cluster]</span><br><span class=\"line\">root     30450 11073  0 15:12 pts/1    00:00:00 grep --color=auto redis</span><br></pre></td></tr></table></figure>\n\n<p>4.</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-trib.rb create --replicas 1 192.168.10.81:7001 192.168.10.81:7000 192.168.10.82:7000 192.168.10.82:7001 192.168.10.83:7000 192.168.10.83:7001</span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Creating cluster</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Performing <span class=\"built_in\">hash</span> slots allocation on 6 nodes...</span></span><br><span class=\"line\">Using 3 masters:</span><br><span class=\"line\">192.168.10.81:7001</span><br><span class=\"line\">192.168.10.82:7000</span><br><span class=\"line\">192.168.10.83:7000</span><br><span class=\"line\">Adding replica 192.168.10.82:7001 to 192.168.10.81:7001</span><br><span class=\"line\">Adding replica 192.168.10.81:7000 to 192.168.10.82:7000</span><br><span class=\"line\">Adding replica 192.168.10.83:7001 to 192.168.10.83:7000</span><br><span class=\"line\">M: 5fd250591aa474d6370e1df547959c5895716192 192.168.10.81:7001</span><br><span class=\"line\">   slots:0-5460 (5461 slots) master</span><br><span class=\"line\">S: ef8bf8a326894fee37a398d3f88de3120fc71ea5 192.168.10.81:7000</span><br><span class=\"line\">   replicates dc62f19b8894db1816f7b92e3fe05b8244832d3e</span><br><span class=\"line\">M: dc62f19b8894db1816f7b92e3fe05b8244832d3e 192.168.10.82:7000</span><br><span class=\"line\">   slots:5461-10922 (5462 slots) master</span><br><span class=\"line\">S: eb2c7cc3cb56bb5ee124d80e353a91331d092042 192.168.10.82:7001</span><br><span class=\"line\">   replicates 5fd250591aa474d6370e1df547959c5895716192</span><br><span class=\"line\">M: 1773d96052f573361a13b5e9015f947b340d45cd 192.168.10.83:7000</span><br><span class=\"line\">   slots:10923-16383 (5461 slots) master</span><br><span class=\"line\">S: 670f158355b93b4a7ac30d69dc3e1e8c4c484a9f 192.168.10.83:7001</span><br><span class=\"line\">   replicates 1773d96052f573361a13b5e9015f947b340d45cd</span><br><span class=\"line\">Can I set the above configuration? (type 'yes' to accept): yes</span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Nodes configuration updated</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Assign a different config epoch to each node</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Sending CLUSTER MEET messages to join the cluster</span></span><br><span class=\"line\">Waiting for the cluster to join...</span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Performing Cluster Check (using node 192.168.10.81:7001)</span></span><br><span class=\"line\">M: 5fd250591aa474d6370e1df547959c5895716192 192.168.10.81:7001</span><br><span class=\"line\">   slots:0-5460 (5461 slots) master</span><br><span class=\"line\">   1 additional replica(s)</span><br><span class=\"line\">M: 1773d96052f573361a13b5e9015f947b340d45cd 192.168.10.83:7000</span><br><span class=\"line\">   slots:10923-16383 (5461 slots) master</span><br><span class=\"line\">   1 additional replica(s)</span><br><span class=\"line\">S: ef8bf8a326894fee37a398d3f88de3120fc71ea5 192.168.10.81:7000</span><br><span class=\"line\">   slots: (0 slots) slave</span><br><span class=\"line\">   replicates dc62f19b8894db1816f7b92e3fe05b8244832d3e</span><br><span class=\"line\">S: 670f158355b93b4a7ac30d69dc3e1e8c4c484a9f 192.168.10.83:7001</span><br><span class=\"line\">   slots: (0 slots) slave</span><br><span class=\"line\">   replicates 1773d96052f573361a13b5e9015f947b340d45cd</span><br><span class=\"line\">M: dc62f19b8894db1816f7b92e3fe05b8244832d3e 192.168.10.82:7000</span><br><span class=\"line\">   slots:5461-10922 (5462 slots) master</span><br><span class=\"line\">   1 additional replica(s)</span><br><span class=\"line\">S: eb2c7cc3cb56bb5ee124d80e353a91331d092042 192.168.10.82:7001</span><br><span class=\"line\">   slots: (0 slots) slave</span><br><span class=\"line\">   replicates 5fd250591aa474d6370e1df547959c5895716192</span><br><span class=\"line\">[OK] All nodes agree about slots configuration.</span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Check <span class=\"keyword\">for</span> open slots...</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Check slots coverage...</span></span><br><span class=\"line\">[OK] All 16384 slots covered.</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"repcachemagentmemcache","published":1,"author":"xiemx","comments":1,"date":"2017-02-08T22:02:53.000Z","_content":"repcache+magnet\n\nmagentMemcachedmysql-proxy\n  \nrepcachememcachepatchmemcachereplicationmemcache\n\nmaster/slavereplicationmagentKVmasterbackupmastermagentslaveslavemastermasterrepcachemastersalve\n\n### \n```shell\nlibevent:\n  apt-get install -y libevent-dev\n\nmagent\n  wget http://memagent.googlecode.com/files/magent-0.5.tar.gz  \n  tar zxvf magent-0.5.tar.gz  \n  /sbin/ldconfig  \n  sed -i \"s#LIBS = -levent#LIBS = -levent -lm#g\" Makefile  \n  make  \n  cp magent /usr/bin/magent  \n  \nrepcache:\n  wget http://downloads.sourceforge.net/repcached/memcached-1.2.8-repcached-2.2.tar.gz\n  tar xf memcached-1.2.8-repcached-2.2.tar.gz\n  cd memcached-1.2.8-repcached-2.2/\n  ./configure --prefix=/opt/repcached/ --enable-replication --program-transform-name=s/memcached/repcached/\n  make&&make install\n  ln -s /opt/repcached/bin/repcached /usr/bin/\n```\n\n### \n```shell\n### magent\n\n[root@test magent]# make \ngcc -Wall -g -O2 -I/usr/local/include -m64 -c -o magent.o magent.c\nmagent.c: In function writev_list:\nmagent.c:729: error: SSIZE_MAX undeclared (first use in this function)\nmagent.c:729: error: (Each undeclared identifier is reported only once\nmagent.c:729: error: for each function it appears in.)\nmake: *** [magent.o] Error 1\n:\n[root@test magent]# vim ketama.h\n#ifndef SSIZE_MAX\n#define SSIZE_MAX      32767\n#endif\n#ifndef _KETAMA_H\n#define _KETAMA_H\n\n[root@test magent]# make \ngcc -Wall -O2 -g  -c -o magent.o magent.c\ngcc -Wall -O2 -g  -c -o ketama.o ketama.c\ngcc -Wall -O2 -g -o magent magent.o ketama.o -levent\nketama.o: In function `create_ketama':\n/opt/root/magent-0.5/ketama.c:399: undefined reference to `floorf'\ncollect2: ld returned 1 exit status\nmake: *** [magent] Error 1\n\nMakefile\nLIBS = -levent LIBS = -levent -lm\n#sed -i \"s#LIBS = -levent#LIBS = -levent -lm#g\" Makefile \n```\n```shell\n### repcached\n\n[root@test magent]# make \nmake all-recursive    \nmake[1]: Entering directory `/usr/local/memcached'    \nMaking all in doc    \nmake[2]: Entering directory `/usr/local/memcached/doc'    \nmake[2]: Nothing to be done for `all'.    \nmake[2]: Leaving directory `/usr/local/memcached/doc'    \nmake[2]: Entering directory `/usr/local/memcached'    \ngcc -DHAVE_CONFIG_H -I. -DNDEBUG -m64 -g -O2 -MT memcached-memcached.o -MD     \nMP -MF .deps/memcached-memcached.Tpo -c -o memcached-memcached.o `test -f     \nmemcached.c' || echo './'`memcached.c    \nmemcached.c: In function add_iov:    \nmemcached.c:697: error: IOV_MAX undeclared (first use in this function)    \nmemcached.c:697: error: (Each undeclared identifier is reported only once    \nmemcached.c:697: error: for each function it appears in.)    \nmake[2]: *** [memcached-memcached.o] Error 1    \nmake[2]: Leaving directory `/usr/local/memcached'    \nmake[1]: *** [all-recursive] Error 1    \nmake[1]: Leaving directory `/usr/local/memcached'    \nmake: *** [all] Error 2\n    \n    \nvi memcached.c\n    \n    \n/* FreeBSD 4.x doesn't have IOV_MAX exposed. */    \n#ifndef IOV_MAX    \n#if defined(__FreeBSD__) || defined(__APPLE__)    \n# define IOV_MAX 1024    \n#endif    \n#endif\n    \n\n/* FreeBSD 4.x doesn't have IOV_MAX exposed. */    \n#ifndef IOV_MAX    \n# define IOV_MAX 1024    \n#endif\n```\n### \n```shell\n### repcached\nmaster\nrepcached -d -v -x 127.0.0.1 -u vagrant  \nslave\nrepcached -d -v -x 127.0.0.1 -u vagrant -p 11222\n\n\n  -x IP\n  -X \n  Memcached1121111212\n\n### magent\nmagent -u root -p 11233 -s 127.0.0.1:11211 -s 127.0.0.1:11222\n```\n","source":"_posts/repcache-magent.md","raw":"---\nlayout: post\ntitle: repcachemagentmemcache\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-02-09 06:02:53\ntags: [ memcached, repcache, magent]\ncategories:\n    - memcached\n# permalink: '/2017/02/09/repcache-magent'\n---\nrepcache+magnet\n\nmagentMemcachedmysql-proxy\n  \nrepcachememcachepatchmemcachereplicationmemcache\n\nmaster/slavereplicationmagentKVmasterbackupmastermagentslaveslavemastermasterrepcachemastersalve\n\n### \n```shell\nlibevent:\n  apt-get install -y libevent-dev\n\nmagent\n  wget http://memagent.googlecode.com/files/magent-0.5.tar.gz  \n  tar zxvf magent-0.5.tar.gz  \n  /sbin/ldconfig  \n  sed -i \"s#LIBS = -levent#LIBS = -levent -lm#g\" Makefile  \n  make  \n  cp magent /usr/bin/magent  \n  \nrepcache:\n  wget http://downloads.sourceforge.net/repcached/memcached-1.2.8-repcached-2.2.tar.gz\n  tar xf memcached-1.2.8-repcached-2.2.tar.gz\n  cd memcached-1.2.8-repcached-2.2/\n  ./configure --prefix=/opt/repcached/ --enable-replication --program-transform-name=s/memcached/repcached/\n  make&&make install\n  ln -s /opt/repcached/bin/repcached /usr/bin/\n```\n\n### \n```shell\n### magent\n\n[root@test magent]# make \ngcc -Wall -g -O2 -I/usr/local/include -m64 -c -o magent.o magent.c\nmagent.c: In function writev_list:\nmagent.c:729: error: SSIZE_MAX undeclared (first use in this function)\nmagent.c:729: error: (Each undeclared identifier is reported only once\nmagent.c:729: error: for each function it appears in.)\nmake: *** [magent.o] Error 1\n:\n[root@test magent]# vim ketama.h\n#ifndef SSIZE_MAX\n#define SSIZE_MAX      32767\n#endif\n#ifndef _KETAMA_H\n#define _KETAMA_H\n\n[root@test magent]# make \ngcc -Wall -O2 -g  -c -o magent.o magent.c\ngcc -Wall -O2 -g  -c -o ketama.o ketama.c\ngcc -Wall -O2 -g -o magent magent.o ketama.o -levent\nketama.o: In function `create_ketama':\n/opt/root/magent-0.5/ketama.c:399: undefined reference to `floorf'\ncollect2: ld returned 1 exit status\nmake: *** [magent] Error 1\n\nMakefile\nLIBS = -levent LIBS = -levent -lm\n#sed -i \"s#LIBS = -levent#LIBS = -levent -lm#g\" Makefile \n```\n```shell\n### repcached\n\n[root@test magent]# make \nmake all-recursive    \nmake[1]: Entering directory `/usr/local/memcached'    \nMaking all in doc    \nmake[2]: Entering directory `/usr/local/memcached/doc'    \nmake[2]: Nothing to be done for `all'.    \nmake[2]: Leaving directory `/usr/local/memcached/doc'    \nmake[2]: Entering directory `/usr/local/memcached'    \ngcc -DHAVE_CONFIG_H -I. -DNDEBUG -m64 -g -O2 -MT memcached-memcached.o -MD     \nMP -MF .deps/memcached-memcached.Tpo -c -o memcached-memcached.o `test -f     \nmemcached.c' || echo './'`memcached.c    \nmemcached.c: In function add_iov:    \nmemcached.c:697: error: IOV_MAX undeclared (first use in this function)    \nmemcached.c:697: error: (Each undeclared identifier is reported only once    \nmemcached.c:697: error: for each function it appears in.)    \nmake[2]: *** [memcached-memcached.o] Error 1    \nmake[2]: Leaving directory `/usr/local/memcached'    \nmake[1]: *** [all-recursive] Error 1    \nmake[1]: Leaving directory `/usr/local/memcached'    \nmake: *** [all] Error 2\n    \n    \nvi memcached.c\n    \n    \n/* FreeBSD 4.x doesn't have IOV_MAX exposed. */    \n#ifndef IOV_MAX    \n#if defined(__FreeBSD__) || defined(__APPLE__)    \n# define IOV_MAX 1024    \n#endif    \n#endif\n    \n\n/* FreeBSD 4.x doesn't have IOV_MAX exposed. */    \n#ifndef IOV_MAX    \n# define IOV_MAX 1024    \n#endif\n```\n### \n```shell\n### repcached\nmaster\nrepcached -d -v -x 127.0.0.1 -u vagrant  \nslave\nrepcached -d -v -x 127.0.0.1 -u vagrant -p 11222\n\n\n  -x IP\n  -X \n  Memcached1121111212\n\n### magent\nmagent -u root -p 11233 -s 127.0.0.1:11211 -s 127.0.0.1:11222\n```\n","slug":"repcache-magent","updated":"2019-10-21T06:57:42.570Z","photos":[],"link":"","_id":"ck42dyifl007wu9ur3hpvgif1","content":"<p>repcache+magnet</p>\n<p>magentMemcachedmysql-proxy</p>\n<p>repcachememcachepatchmemcachereplicationmemcache</p>\n<p>master/slavereplicationmagentKVmasterbackupmastermagentslaveslavemastermasterrepcachemastersalve</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">libevent:</span><br><span class=\"line\">  apt-get install -y libevent-dev</span><br><span class=\"line\"></span><br><span class=\"line\">magent</span><br><span class=\"line\">  wget http://memagent.googlecode.com/files/magent-0.5.tar.gz  </span><br><span class=\"line\">  tar zxvf magent-0.5.tar.gz  </span><br><span class=\"line\">  /sbin/ldconfig  </span><br><span class=\"line\">  sed -i \"s#LIBS = -levent#LIBS = -levent -lm#g\" Makefile  </span><br><span class=\"line\">  make  </span><br><span class=\"line\">  cp magent /usr/bin/magent  </span><br><span class=\"line\">  </span><br><span class=\"line\">repcache:</span><br><span class=\"line\">  wget http://downloads.sourceforge.net/repcached/memcached-1.2.8-repcached-2.2.tar.gz</span><br><span class=\"line\">  tar xf memcached-1.2.8-repcached-2.2.tar.gz</span><br><span class=\"line\">  cd memcached-1.2.8-repcached-2.2/</span><br><span class=\"line\">  ./configure --prefix=/opt/repcached/ --enable-replication --program-transform-name=s/memcached/repcached/</span><br><span class=\"line\">  make&amp;&amp;make install</span><br><span class=\"line\">  ln -s /opt/repcached/bin/repcached /usr/bin/</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">## magent</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">[root@test magent]# make </span><br><span class=\"line\">gcc -Wall -g -O2 -I/usr/local/include -m64 -c -o magent.o magent.c</span><br><span class=\"line\">magent.c: In function writev_list:</span><br><span class=\"line\">magent.c:729: error: SSIZE_MAX undeclared (first use in this function)</span><br><span class=\"line\">magent.c:729: error: (Each undeclared identifier is reported only once</span><br><span class=\"line\">magent.c:729: error: for each function it appears in.)</span><br><span class=\"line\">make: *** [magent.o] Error 1</span><br><span class=\"line\">:</span><br><span class=\"line\">[root@test magent]# vim ketama.h</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">ifndef SSIZE_MAX</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">define SSIZE_MAX      32767</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">endif</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">ifndef _KETAMA_H</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">define _KETAMA_H</span></span><br><span class=\"line\"></span><br><span class=\"line\">[root@test magent]# make </span><br><span class=\"line\">gcc -Wall -O2 -g  -c -o magent.o magent.c</span><br><span class=\"line\">gcc -Wall -O2 -g  -c -o ketama.o ketama.c</span><br><span class=\"line\">gcc -Wall -O2 -g -o magent magent.o ketama.o -levent</span><br><span class=\"line\">ketama.o: In function `create_ketama':</span><br><span class=\"line\">/opt/root/magent-0.5/ketama.c:399: undefined reference to `floorf'</span><br><span class=\"line\">collect2: ld returned 1 exit status</span><br><span class=\"line\">make: *** [magent] Error 1</span><br><span class=\"line\"></span><br><span class=\"line\">Makefile</span><br><span class=\"line\">LIBS = -levent LIBS = -levent -lm</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">sed -i <span class=\"string\">\"s#LIBS = -levent#LIBS = -levent -lm#g\"</span> Makefile</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">## repcached</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">[root@test magent]# make </span><br><span class=\"line\">make all-recursive    </span><br><span class=\"line\">make[1]: Entering directory `/usr/local/memcached'    </span><br><span class=\"line\">Making all in doc    </span><br><span class=\"line\">make[2]: Entering directory `/usr/local/memcached/doc'    </span><br><span class=\"line\">make[2]: Nothing to be done for `all'.    </span><br><span class=\"line\">make[2]: Leaving directory `/usr/local/memcached/doc'    </span><br><span class=\"line\">make[2]: Entering directory `/usr/local/memcached'    </span><br><span class=\"line\">gcc -DHAVE_CONFIG_H -I. -DNDEBUG -m64 -g -O2 -MT memcached-memcached.o -MD     </span><br><span class=\"line\">MP -MF .deps/memcached-memcached.Tpo -c -o memcached-memcached.o `test -f     </span><br><span class=\"line\">memcached.c' || echo './'`memcached.c    </span><br><span class=\"line\">memcached.c: In function add_iov:    </span><br><span class=\"line\">memcached.c:697: error: IOV_MAX undeclared (first use in this function)    </span><br><span class=\"line\">memcached.c:697: error: (Each undeclared identifier is reported only once    </span><br><span class=\"line\">memcached.c:697: error: for each function it appears in.)    </span><br><span class=\"line\">make[2]: *** [memcached-memcached.o] Error 1    </span><br><span class=\"line\">make[2]: Leaving directory `/usr/local/memcached'    </span><br><span class=\"line\">make[1]: *** [all-recursive] Error 1    </span><br><span class=\"line\">make[1]: Leaving directory `/usr/local/memcached'    </span><br><span class=\"line\">make: *** [all] Error 2</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">vi memcached.c</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">/* FreeBSD 4.x doesn't have IOV_MAX exposed. */    </span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">ifndef IOV_MAX    </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"keyword\">if</span> defined(__FreeBSD__) || defined(__APPLE__)    </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> define IOV_MAX 1024    </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">endif    </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">endif</span></span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\">/* FreeBSD 4.x doesn't have IOV_MAX exposed. */    </span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">ifndef IOV_MAX    </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> define IOV_MAX 1024    </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">endif</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">## repcached</span></span></span><br><span class=\"line\">master</span><br><span class=\"line\">repcached -d -v -x 127.0.0.1 -u vagrant  </span><br><span class=\"line\">slave</span><br><span class=\"line\">repcached -d -v -x 127.0.0.1 -u vagrant -p 11222</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  -x IP</span><br><span class=\"line\">  -X </span><br><span class=\"line\">  Memcached1121111212</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">## magent</span></span></span><br><span class=\"line\">magent -u root -p 11233 -s 127.0.0.1:11211 -s 127.0.0.1:11222</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p>repcache+magnet</p>\n<p>magentMemcachedmysql-proxy</p>\n<p>repcachememcachepatchmemcachereplicationmemcache</p>\n<p>master/slavereplicationmagentKVmasterbackupmastermagentslaveslavemastermasterrepcachemastersalve</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">libevent:</span><br><span class=\"line\">  apt-get install -y libevent-dev</span><br><span class=\"line\"></span><br><span class=\"line\">magent</span><br><span class=\"line\">  wget http://memagent.googlecode.com/files/magent-0.5.tar.gz  </span><br><span class=\"line\">  tar zxvf magent-0.5.tar.gz  </span><br><span class=\"line\">  /sbin/ldconfig  </span><br><span class=\"line\">  sed -i \"s#LIBS = -levent#LIBS = -levent -lm#g\" Makefile  </span><br><span class=\"line\">  make  </span><br><span class=\"line\">  cp magent /usr/bin/magent  </span><br><span class=\"line\">  </span><br><span class=\"line\">repcache:</span><br><span class=\"line\">  wget http://downloads.sourceforge.net/repcached/memcached-1.2.8-repcached-2.2.tar.gz</span><br><span class=\"line\">  tar xf memcached-1.2.8-repcached-2.2.tar.gz</span><br><span class=\"line\">  cd memcached-1.2.8-repcached-2.2/</span><br><span class=\"line\">  ./configure --prefix=/opt/repcached/ --enable-replication --program-transform-name=s/memcached/repcached/</span><br><span class=\"line\">  make&amp;&amp;make install</span><br><span class=\"line\">  ln -s /opt/repcached/bin/repcached /usr/bin/</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">## magent</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">[root@test magent]# make </span><br><span class=\"line\">gcc -Wall -g -O2 -I/usr/local/include -m64 -c -o magent.o magent.c</span><br><span class=\"line\">magent.c: In function writev_list:</span><br><span class=\"line\">magent.c:729: error: SSIZE_MAX undeclared (first use in this function)</span><br><span class=\"line\">magent.c:729: error: (Each undeclared identifier is reported only once</span><br><span class=\"line\">magent.c:729: error: for each function it appears in.)</span><br><span class=\"line\">make: *** [magent.o] Error 1</span><br><span class=\"line\">:</span><br><span class=\"line\">[root@test magent]# vim ketama.h</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">ifndef SSIZE_MAX</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">define SSIZE_MAX      32767</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">endif</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">ifndef _KETAMA_H</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">define _KETAMA_H</span></span><br><span class=\"line\"></span><br><span class=\"line\">[root@test magent]# make </span><br><span class=\"line\">gcc -Wall -O2 -g  -c -o magent.o magent.c</span><br><span class=\"line\">gcc -Wall -O2 -g  -c -o ketama.o ketama.c</span><br><span class=\"line\">gcc -Wall -O2 -g -o magent magent.o ketama.o -levent</span><br><span class=\"line\">ketama.o: In function `create_ketama':</span><br><span class=\"line\">/opt/root/magent-0.5/ketama.c:399: undefined reference to `floorf'</span><br><span class=\"line\">collect2: ld returned 1 exit status</span><br><span class=\"line\">make: *** [magent] Error 1</span><br><span class=\"line\"></span><br><span class=\"line\">Makefile</span><br><span class=\"line\">LIBS = -levent LIBS = -levent -lm</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">sed -i <span class=\"string\">\"s#LIBS = -levent#LIBS = -levent -lm#g\"</span> Makefile</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">## repcached</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">[root@test magent]# make </span><br><span class=\"line\">make all-recursive    </span><br><span class=\"line\">make[1]: Entering directory `/usr/local/memcached'    </span><br><span class=\"line\">Making all in doc    </span><br><span class=\"line\">make[2]: Entering directory `/usr/local/memcached/doc'    </span><br><span class=\"line\">make[2]: Nothing to be done for `all'.    </span><br><span class=\"line\">make[2]: Leaving directory `/usr/local/memcached/doc'    </span><br><span class=\"line\">make[2]: Entering directory `/usr/local/memcached'    </span><br><span class=\"line\">gcc -DHAVE_CONFIG_H -I. -DNDEBUG -m64 -g -O2 -MT memcached-memcached.o -MD     </span><br><span class=\"line\">MP -MF .deps/memcached-memcached.Tpo -c -o memcached-memcached.o `test -f     </span><br><span class=\"line\">memcached.c' || echo './'`memcached.c    </span><br><span class=\"line\">memcached.c: In function add_iov:    </span><br><span class=\"line\">memcached.c:697: error: IOV_MAX undeclared (first use in this function)    </span><br><span class=\"line\">memcached.c:697: error: (Each undeclared identifier is reported only once    </span><br><span class=\"line\">memcached.c:697: error: for each function it appears in.)    </span><br><span class=\"line\">make[2]: *** [memcached-memcached.o] Error 1    </span><br><span class=\"line\">make[2]: Leaving directory `/usr/local/memcached'    </span><br><span class=\"line\">make[1]: *** [all-recursive] Error 1    </span><br><span class=\"line\">make[1]: Leaving directory `/usr/local/memcached'    </span><br><span class=\"line\">make: *** [all] Error 2</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">vi memcached.c</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">/* FreeBSD 4.x doesn't have IOV_MAX exposed. */    </span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">ifndef IOV_MAX    </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"keyword\">if</span> defined(__FreeBSD__) || defined(__APPLE__)    </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> define IOV_MAX 1024    </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">endif    </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">endif</span></span><br><span class=\"line\">    </span><br><span class=\"line\"></span><br><span class=\"line\">/* FreeBSD 4.x doesn't have IOV_MAX exposed. */    </span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">ifndef IOV_MAX    </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> define IOV_MAX 1024    </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">endif</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">## repcached</span></span></span><br><span class=\"line\">master</span><br><span class=\"line\">repcached -d -v -x 127.0.0.1 -u vagrant  </span><br><span class=\"line\">slave</span><br><span class=\"line\">repcached -d -v -x 127.0.0.1 -u vagrant -p 11222</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  -x IP</span><br><span class=\"line\">  -X </span><br><span class=\"line\">  Memcached1121111212</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">## magent</span></span></span><br><span class=\"line\">magent -u root -p 11233 -s 127.0.0.1:11211 -s 127.0.0.1:11222</span><br></pre></td></tr></table></figure>\n\n"},{"layout":"post","title":"rhcsHA","published":1,"author":"xiemx","comments":1,"date":"2016-02-01T04:02:16.000Z","_content":"YUMHA()\n\nRHELCentoscongayumluciricci\"yum localinstall luci ricci\"luciwebricciricciricciricciricci\n\n\n\n1.\n\n* date\n* elinux\n* iptables\n* /etc/hosts/etc/sysconfig/network\n* (stop NetworkManager)\n* yum\n\n2.ricciluciricci\n```shell\n[root@localhost ~]# yum install luci ricci -y\n[root@localhost ~]# yum install ricci -y\n[root@localhost ~]# echo 123123123 | passwd --stdin ricci\n```\n3.luciwebrootluci\n```shell\n[root@localhost ~]# /etc/init.d/luci start\nStart luci...                       [ OK ]\nPoint your web browser to https://localhost.localdomain:8084 (or equivalent) to access luci\n\n[![ha](/images/ha.png)](http://www.xiemx.com/wp-content/uploads/2016/01/ha.png)\n\n[![hainstall](/images/hainstall.png)](http://www.xiemx.com/wp-content/uploads/2016/02/hainstall.png)\n\n\n High Availability \n\n[root@node3 ~]# yum groupinstall \"High Availability\"\nricci:\n[root@node1 ~]# echo uplooking | passwd --stdin ricci\nChanging password for user ricci.\npasswd: all authentication tokens updated successfully.\n```\n/etc/cluster/cluster.conf\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n\n<cluster config_version=\"12\" name=\"f30Cluster\"> \n  <clusternodes> \n    <clusternode name=\"node1.xiemx.com\" nodeid=\"1\"> \n      <fence> \n        <method name=\"FenceMethod\"> \n          <device domain=\"node1\" name=\"Fence1\"/> \n        </method> \n      </fence> \n    </clusternode>  \n    <clusternode name=\"node2.xiemx.com\" nodeid=\"2\"> \n      <fence> \n        <method name=\"FenceMethod\"> \n          <device domain=\"node2\" name=\"Fence2\"/> \n        </method> \n      </fence> \n    </clusternode>  \n    <clusternode name=\"node3.xiemx.com\" nodeid=\"3\"> \n      <fence> \n        <method name=\"FenceMethod\"> \n          <device domain=\"node3\" name=\"Fence3\"/> \n        </method> \n      </fence> \n    </clusternode> \n  </clusternodes>  \n  <cman expected_votes=\"1\"/>  \n  <fencedevices> \n    <fencedevice agent=\"fence_xvm\" name=\"Fence1\"/>  \n    <fencedevice agent=\"fence_xvm\" name=\"Fence2\"/>  \n    <fencedevice agent=\"fence_xvm\" name=\"Fence3\"/> \n  </fencedevices>  \n  <rm> \n    <failoverdomains> \n      <failoverdomain name=\"Domain1\" restricted=\"1\"> \n        <failoverdomainnode name=\"node1.xiemx.com\"/>  \n        <failoverdomainnode name=\"node2.xiemx.com\"/>  \n        <failoverdomainnode name=\"node3.xiemx.com\"/> \n      </failoverdomain> \n    </failoverdomains>  \n    <resources> \n      <ip address=\"172.25.30.100/24\" sleeptime=\"10\"/>  \n      <script file=\"/etc/init.d/httpd\" name=\"httpd\"/> \n    </resources>  \n    <service domain=\"Domain1\" name=\"httpd\" recovery=\"restart\"> \n      <ip ref=\"172.25.30.100/24\"/>  \n      <script ref=\"httpd\"/> \n    </service> \n  </rm> \n</cluster>\n\n```\n:\nricciricci\n```shell\n[root@node1-f30 ~]# cman_tool version -r\nYou have not authenticated to the ricci daemon on node1-f30.example.com\nPassword:\nYou have not authenticated to the ricci daemon on node3-f30.example.com\nPassword:\nYou have not authenticated to the ricci daemon on node2-f30.example.com\nPassword:\n```\ncmanrgmanagermodcluster\n```shell\n[root@node3-f30 ~]# /etc/init.d/cman start\n\nStarting cluster:\nChecking if cluster has been disabled at boot...    [ OK ]\nChecking Network Manager...               [ OK ]\nGlobal setup...                     [ OK ]\nLoading kernel modules...                [ OK ]\nMounting configfs...                  [ OK ]\nStarting cman...                    [ OK ]\nWaiting for quorum...                  [ OK ]\nStarting fenced...                   [ OK ]\nStarting dlm_controld...                [ OK ]\nTuning DLM kernel config...               [ OK ]\nStarting gfs_controld...                [ OK ]\nUnfencing self...                    [ OK ]\nJoining fence domain...                 [ OK ]\n\n[root@node3-f30 ~]# /etc/init.d/rgmanager start\nStarting Cluster Service Manager:             [ OK ]\n\n[root@node3-f30 ~]# /etc/init.d/modclusterd start\nStarting Cluster Module - cluster monitor: Setting verbosity level to LogBasic\n[ OK ]\n```\nnode3:\n```shell\n[root@node1-f30 ~]# clusvcadm -r httpd -m node3-f30.example.com\nTrying to relocate service:httpd to node3-f30.example.com...Success\nservice:httpd is now running on node3-f30.example.com\n\nfence_xvm.key:\n\n[root@node1-f30 ~]# scp /etc/cluster/fence_xvm.key 172.25.30.12:/etc/cluster/fence_xvm.key\nThe authenticity of host '172.25.30.12 (172.25.30.12)' can't be established.\nRSA key fingerprint is cf:7c:26:aa:4f:41:7b:21:5e:09:ce:8a:15:2c:97:32.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '172.25.30.12' (RSA) to the list of known hosts.\nroot@172.25.30.12's password:\nfence_xvm.key                100% 512   0.5KB/s  00:00\n```\nQdisk\n\n,scsi-target-utilsyum\n```shell\n[root@rhel6 ~]# yum install scsi*\n\n3\n\n[root@rhel6 ~]# vi /etc/tgt/targets.conf\n<target iqn.2008-09.com.example:server.target1>\nbacking-store /dev/vdb1\n</target>\n\n iscsi-initiator-utils\n\n[root@node1-f30 ~]# yum install scsi*\n\n,\n\niscsiadm -m discovery -t st -p 172.25.30.13\niscsiadm -m node -l\nmkqdisk -c /dev/sda -l myqdisk\n\n[root@node3 ~]# iscsiadm -m discovery -t st -p 172.25.30.13\nStarting iscsid:                      [ OK ]\n172.25.30.13:3260,1 iqn.2008-09.com.example:server.target1\n\n[root@node3 ~]# iscsiadm -m node -l\nLogging in to [iface: default, target: iqn.2008-09.com.example:server.target1, portal: 172.25.30.13,3260] (multiple)\nLogin to [iface: default, target: iqn.2008-09.com.example:server.target1, portal: 172.25.30.13,3260] successful.\n\n[root@node3 ~]# mkqdisk -c /dev/sda -l myqdisk\nmkqdisk v3.0.12.1\nWriting new quorum disk label 'myqdisk' to /dev/sda.\nWARNING: About to destroy all data on /dev/sda; proceed [N/y] ? y\nWarning: Initializing previously initialized partition\nInitializing status block for node 1...\nInitializing status block for node 2...\n```\nluci\n\n[![ha2](/images/ha2.png)](http://www.xiemx.com/wp-content/uploads/2016/01/ha2.png)\ncman_tool version -r\n\n:\n```xml\n<quorumd label=\"myqdisk\" min_score=\"1\">\n<heuristic interval=\"5\" program=\"ping 172.25.30.254 -c 1\" tko=\"2\"/>\n</quorumd>\n```\n","source":"_posts/rhcs-ha-cluster.md","raw":"---\nlayout: post\ntitle: rhcsHA\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-02-01 12:02:16\ntags: [ rhcs, cluster ]\ncategories:\n    - cluster\n# permalink: '/2016/02/01/rhcs-ha-cluster'\n---\nYUMHA()\n\nRHELCentoscongayumluciricci\"yum localinstall luci ricci\"luciwebricciricciricciricciricci\n\n\n\n1.\n\n* date\n* elinux\n* iptables\n* /etc/hosts/etc/sysconfig/network\n* (stop NetworkManager)\n* yum\n\n2.ricciluciricci\n```shell\n[root@localhost ~]# yum install luci ricci -y\n[root@localhost ~]# yum install ricci -y\n[root@localhost ~]# echo 123123123 | passwd --stdin ricci\n```\n3.luciwebrootluci\n```shell\n[root@localhost ~]# /etc/init.d/luci start\nStart luci...                       [ OK ]\nPoint your web browser to https://localhost.localdomain:8084 (or equivalent) to access luci\n\n[![ha](/images/ha.png)](http://www.xiemx.com/wp-content/uploads/2016/01/ha.png)\n\n[![hainstall](/images/hainstall.png)](http://www.xiemx.com/wp-content/uploads/2016/02/hainstall.png)\n\n\n High Availability \n\n[root@node3 ~]# yum groupinstall \"High Availability\"\nricci:\n[root@node1 ~]# echo uplooking | passwd --stdin ricci\nChanging password for user ricci.\npasswd: all authentication tokens updated successfully.\n```\n/etc/cluster/cluster.conf\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n\n<cluster config_version=\"12\" name=\"f30Cluster\"> \n  <clusternodes> \n    <clusternode name=\"node1.xiemx.com\" nodeid=\"1\"> \n      <fence> \n        <method name=\"FenceMethod\"> \n          <device domain=\"node1\" name=\"Fence1\"/> \n        </method> \n      </fence> \n    </clusternode>  \n    <clusternode name=\"node2.xiemx.com\" nodeid=\"2\"> \n      <fence> \n        <method name=\"FenceMethod\"> \n          <device domain=\"node2\" name=\"Fence2\"/> \n        </method> \n      </fence> \n    </clusternode>  \n    <clusternode name=\"node3.xiemx.com\" nodeid=\"3\"> \n      <fence> \n        <method name=\"FenceMethod\"> \n          <device domain=\"node3\" name=\"Fence3\"/> \n        </method> \n      </fence> \n    </clusternode> \n  </clusternodes>  \n  <cman expected_votes=\"1\"/>  \n  <fencedevices> \n    <fencedevice agent=\"fence_xvm\" name=\"Fence1\"/>  \n    <fencedevice agent=\"fence_xvm\" name=\"Fence2\"/>  \n    <fencedevice agent=\"fence_xvm\" name=\"Fence3\"/> \n  </fencedevices>  \n  <rm> \n    <failoverdomains> \n      <failoverdomain name=\"Domain1\" restricted=\"1\"> \n        <failoverdomainnode name=\"node1.xiemx.com\"/>  \n        <failoverdomainnode name=\"node2.xiemx.com\"/>  \n        <failoverdomainnode name=\"node3.xiemx.com\"/> \n      </failoverdomain> \n    </failoverdomains>  \n    <resources> \n      <ip address=\"172.25.30.100/24\" sleeptime=\"10\"/>  \n      <script file=\"/etc/init.d/httpd\" name=\"httpd\"/> \n    </resources>  \n    <service domain=\"Domain1\" name=\"httpd\" recovery=\"restart\"> \n      <ip ref=\"172.25.30.100/24\"/>  \n      <script ref=\"httpd\"/> \n    </service> \n  </rm> \n</cluster>\n\n```\n:\nricciricci\n```shell\n[root@node1-f30 ~]# cman_tool version -r\nYou have not authenticated to the ricci daemon on node1-f30.example.com\nPassword:\nYou have not authenticated to the ricci daemon on node3-f30.example.com\nPassword:\nYou have not authenticated to the ricci daemon on node2-f30.example.com\nPassword:\n```\ncmanrgmanagermodcluster\n```shell\n[root@node3-f30 ~]# /etc/init.d/cman start\n\nStarting cluster:\nChecking if cluster has been disabled at boot...    [ OK ]\nChecking Network Manager...               [ OK ]\nGlobal setup...                     [ OK ]\nLoading kernel modules...                [ OK ]\nMounting configfs...                  [ OK ]\nStarting cman...                    [ OK ]\nWaiting for quorum...                  [ OK ]\nStarting fenced...                   [ OK ]\nStarting dlm_controld...                [ OK ]\nTuning DLM kernel config...               [ OK ]\nStarting gfs_controld...                [ OK ]\nUnfencing self...                    [ OK ]\nJoining fence domain...                 [ OK ]\n\n[root@node3-f30 ~]# /etc/init.d/rgmanager start\nStarting Cluster Service Manager:             [ OK ]\n\n[root@node3-f30 ~]# /etc/init.d/modclusterd start\nStarting Cluster Module - cluster monitor: Setting verbosity level to LogBasic\n[ OK ]\n```\nnode3:\n```shell\n[root@node1-f30 ~]# clusvcadm -r httpd -m node3-f30.example.com\nTrying to relocate service:httpd to node3-f30.example.com...Success\nservice:httpd is now running on node3-f30.example.com\n\nfence_xvm.key:\n\n[root@node1-f30 ~]# scp /etc/cluster/fence_xvm.key 172.25.30.12:/etc/cluster/fence_xvm.key\nThe authenticity of host '172.25.30.12 (172.25.30.12)' can't be established.\nRSA key fingerprint is cf:7c:26:aa:4f:41:7b:21:5e:09:ce:8a:15:2c:97:32.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '172.25.30.12' (RSA) to the list of known hosts.\nroot@172.25.30.12's password:\nfence_xvm.key                100% 512   0.5KB/s  00:00\n```\nQdisk\n\n,scsi-target-utilsyum\n```shell\n[root@rhel6 ~]# yum install scsi*\n\n3\n\n[root@rhel6 ~]# vi /etc/tgt/targets.conf\n<target iqn.2008-09.com.example:server.target1>\nbacking-store /dev/vdb1\n</target>\n\n iscsi-initiator-utils\n\n[root@node1-f30 ~]# yum install scsi*\n\n,\n\niscsiadm -m discovery -t st -p 172.25.30.13\niscsiadm -m node -l\nmkqdisk -c /dev/sda -l myqdisk\n\n[root@node3 ~]# iscsiadm -m discovery -t st -p 172.25.30.13\nStarting iscsid:                      [ OK ]\n172.25.30.13:3260,1 iqn.2008-09.com.example:server.target1\n\n[root@node3 ~]# iscsiadm -m node -l\nLogging in to [iface: default, target: iqn.2008-09.com.example:server.target1, portal: 172.25.30.13,3260] (multiple)\nLogin to [iface: default, target: iqn.2008-09.com.example:server.target1, portal: 172.25.30.13,3260] successful.\n\n[root@node3 ~]# mkqdisk -c /dev/sda -l myqdisk\nmkqdisk v3.0.12.1\nWriting new quorum disk label 'myqdisk' to /dev/sda.\nWARNING: About to destroy all data on /dev/sda; proceed [N/y] ? y\nWarning: Initializing previously initialized partition\nInitializing status block for node 1...\nInitializing status block for node 2...\n```\nluci\n\n[![ha2](/images/ha2.png)](http://www.xiemx.com/wp-content/uploads/2016/01/ha2.png)\ncman_tool version -r\n\n:\n```xml\n<quorumd label=\"myqdisk\" min_score=\"1\">\n<heuristic interval=\"5\" program=\"ping 172.25.30.254 -c 1\" tko=\"2\"/>\n</quorumd>\n```\n","slug":"rhcs-ha-cluster","updated":"2019-10-19T08:27:09.995Z","photos":[],"link":"","_id":"ck42dyifs007zu9urfd6v88ma","content":"<p>YUMHA()</p>\n<p>RHELCentoscongayumluciricciyum localinstall luci ricciluciwebricciricciricciricciricci</p>\n<p></p>\n<p>1.</p>\n<ul>\n<li>date</li>\n<li>elinux</li>\n<li>iptables</li>\n<li>/etc/hosts/etc/sysconfig/network</li>\n<li>(stop NetworkManager)</li>\n<li>yum</li>\n</ul>\n<p>2.ricciluciricci</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# yum install luci ricci -y</span><br><span class=\"line\">[root@localhost ~]# yum install ricci -y</span><br><span class=\"line\">[root@localhost ~]# echo 123123123 | passwd --stdin ricci</span><br></pre></td></tr></table></figure>\n\n<p>3.luciwebrootluci</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# /etc/init.d/luci start</span><br><span class=\"line\">Start luci...                       [ OK ]</span><br><span class=\"line\">Point your web browser to https://localhost.localdomain:8084 (or equivalent) to access luci</span><br><span class=\"line\"></span><br><span class=\"line\">[![ha](/images/ha.png)](http://www.xiemx.com/wp-content/uploads/2016/01/ha.png)</span><br><span class=\"line\"></span><br><span class=\"line\">[![hainstall](/images/hainstall.png)](http://www.xiemx.com/wp-content/uploads/2016/02/hainstall.png)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> High Availability </span><br><span class=\"line\"></span><br><span class=\"line\">[root@node3 ~]# yum groupinstall \"High Availability\"</span><br><span class=\"line\">ricci:</span><br><span class=\"line\">[root@node1 ~]# echo uplooking | passwd --stdin ricci</span><br><span class=\"line\">Changing password for user ricci.</span><br><span class=\"line\">passwd: all authentication tokens updated successfully.</span><br></pre></td></tr></table></figure>\n\n<p>/etc/cluster/cluster.conf</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">cluster</span> <span class=\"attr\">config_version</span>=<span class=\"string\">\"12\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"f30Cluster\"</span>&gt;</span> </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">clusternodes</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">clusternode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"node1.xiemx.com\"</span> <span class=\"attr\">nodeid</span>=<span class=\"string\">\"1\"</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">fence</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">method</span> <span class=\"attr\">name</span>=<span class=\"string\">\"FenceMethod\"</span>&gt;</span> </span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">device</span> <span class=\"attr\">domain</span>=<span class=\"string\">\"node1\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Fence1\"</span>/&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">method</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">fence</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">clusternode</span>&gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">clusternode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"node2.xiemx.com\"</span> <span class=\"attr\">nodeid</span>=<span class=\"string\">\"2\"</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">fence</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">method</span> <span class=\"attr\">name</span>=<span class=\"string\">\"FenceMethod\"</span>&gt;</span> </span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">device</span> <span class=\"attr\">domain</span>=<span class=\"string\">\"node2\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Fence2\"</span>/&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">method</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">fence</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">clusternode</span>&gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">clusternode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"node3.xiemx.com\"</span> <span class=\"attr\">nodeid</span>=<span class=\"string\">\"3\"</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">fence</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">method</span> <span class=\"attr\">name</span>=<span class=\"string\">\"FenceMethod\"</span>&gt;</span> </span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">device</span> <span class=\"attr\">domain</span>=<span class=\"string\">\"node3\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Fence3\"</span>/&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">method</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">fence</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">clusternode</span>&gt;</span> </span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">clusternodes</span>&gt;</span>  </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">cman</span> <span class=\"attr\">expected_votes</span>=<span class=\"string\">\"1\"</span>/&gt;</span>  </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">fencedevices</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">fencedevice</span> <span class=\"attr\">agent</span>=<span class=\"string\">\"fence_xvm\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Fence1\"</span>/&gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">fencedevice</span> <span class=\"attr\">agent</span>=<span class=\"string\">\"fence_xvm\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Fence2\"</span>/&gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">fencedevice</span> <span class=\"attr\">agent</span>=<span class=\"string\">\"fence_xvm\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Fence3\"</span>/&gt;</span> </span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">fencedevices</span>&gt;</span>  </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">rm</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">failoverdomains</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">failoverdomain</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Domain1\"</span> <span class=\"attr\">restricted</span>=<span class=\"string\">\"1\"</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">failoverdomainnode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"node1.xiemx.com\"</span>/&gt;</span>  </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">failoverdomainnode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"node2.xiemx.com\"</span>/&gt;</span>  </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">failoverdomainnode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"node3.xiemx.com\"</span>/&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">failoverdomain</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">failoverdomains</span>&gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">ip</span> <span class=\"attr\">address</span>=<span class=\"string\">\"172.25.30.100/24\"</span> <span class=\"attr\">sleeptime</span>=<span class=\"string\">\"10\"</span>/&gt;</span>  </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">file</span>=<span class=\"string\">\"/etc/init.d/httpd\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"httpd\"</span>/&gt;</span> </span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    <span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span>  </span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">service</span> <span class=\"attr\">domain</span>=<span class=\"string\">\"Domain1\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"httpd\"</span> <span class=\"attr\">recovery</span>=<span class=\"string\">\"restart\"</span>&gt;</span> </span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">      <span class=\"tag\">&lt;<span class=\"name\">ip</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"172.25.30.100/24\"</span>/&gt;</span>  </span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">      <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"httpd\"</span>/&gt;</span> </span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    <span class=\"tag\">&lt;/<span class=\"name\">service</span>&gt;</span> </span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">  <span class=\"tag\">&lt;/<span class=\"name\">rm</span>&gt;</span> </span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">cluster</span>&gt;</span></span></span></span><br></pre></td></tr></table></figure>\n\n<p>:<br>ricciricci</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@node1-f30 ~]# cman_tool version -r</span><br><span class=\"line\">You have not authenticated to the ricci daemon on node1-f30.example.com</span><br><span class=\"line\">Password:</span><br><span class=\"line\">You have not authenticated to the ricci daemon on node3-f30.example.com</span><br><span class=\"line\">Password:</span><br><span class=\"line\">You have not authenticated to the ricci daemon on node2-f30.example.com</span><br><span class=\"line\">Password:</span><br></pre></td></tr></table></figure>\n\n<p>cmanrgmanagermodcluster</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@node3-f30 ~]# /etc/init.d/cman start</span><br><span class=\"line\"></span><br><span class=\"line\">Starting cluster:</span><br><span class=\"line\">Checking if cluster has been disabled at boot...    [ OK ]</span><br><span class=\"line\">Checking Network Manager...               [ OK ]</span><br><span class=\"line\">Global setup...                     [ OK ]</span><br><span class=\"line\">Loading kernel modules...                [ OK ]</span><br><span class=\"line\">Mounting configfs...                  [ OK ]</span><br><span class=\"line\">Starting cman...                    [ OK ]</span><br><span class=\"line\">Waiting for quorum...                  [ OK ]</span><br><span class=\"line\">Starting fenced...                   [ OK ]</span><br><span class=\"line\">Starting dlm_controld...                [ OK ]</span><br><span class=\"line\">Tuning DLM kernel config...               [ OK ]</span><br><span class=\"line\">Starting gfs_controld...                [ OK ]</span><br><span class=\"line\">Unfencing self...                    [ OK ]</span><br><span class=\"line\">Joining fence domain...                 [ OK ]</span><br><span class=\"line\"></span><br><span class=\"line\">[root@node3-f30 ~]# /etc/init.d/rgmanager start</span><br><span class=\"line\">Starting Cluster Service Manager:             [ OK ]</span><br><span class=\"line\"></span><br><span class=\"line\">[root@node3-f30 ~]# /etc/init.d/modclusterd start</span><br><span class=\"line\">Starting Cluster Module - cluster monitor: Setting verbosity level to LogBasic</span><br><span class=\"line\">[ OK ]</span><br></pre></td></tr></table></figure>\n\n<p>node3:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@node1-f30 ~]# clusvcadm -r httpd -m node3-f30.example.com</span><br><span class=\"line\">Trying to relocate service:httpd to node3-f30.example.com...Success</span><br><span class=\"line\">service:httpd is now running on node3-f30.example.com</span><br><span class=\"line\"></span><br><span class=\"line\">fence_xvm.key:</span><br><span class=\"line\"></span><br><span class=\"line\">[root@node1-f30 ~]# scp /etc/cluster/fence_xvm.key 172.25.30.12:/etc/cluster/fence_xvm.key</span><br><span class=\"line\">The authenticity of host '172.25.30.12 (172.25.30.12)' can't be established.</span><br><span class=\"line\">RSA key fingerprint is cf:7c:26:aa:4f:41:7b:21:5e:09:ce:8a:15:2c:97:32.</span><br><span class=\"line\">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class=\"line\">Warning: Permanently added '172.25.30.12' (RSA) to the list of known hosts.</span><br><span class=\"line\">root@172.25.30.12's password:</span><br><span class=\"line\">fence_xvm.key                100% 512   0.5KB/s  00:00</span><br></pre></td></tr></table></figure>\n\n<p>Qdisk</p>\n<p>,scsi-target-utilsyum</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]# yum install scsi*</span><br><span class=\"line\"></span><br><span class=\"line\">3</span><br><span class=\"line\"></span><br><span class=\"line\">[root@rhel6 ~]# vi /etc/tgt/targets.conf</span><br><span class=\"line\">&lt;target iqn.2008-09.com.example:server.target1&gt;</span><br><span class=\"line\">backing-store /dev/vdb1</span><br><span class=\"line\">&lt;/target&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"> iscsi-initiator-utils</span><br><span class=\"line\"></span><br><span class=\"line\">[root@node1-f30 ~]# yum install scsi*</span><br><span class=\"line\"></span><br><span class=\"line\">,</span><br><span class=\"line\"></span><br><span class=\"line\">iscsiadm -m discovery -t st -p 172.25.30.13</span><br><span class=\"line\">iscsiadm -m node -l</span><br><span class=\"line\">mkqdisk -c /dev/sda -l myqdisk</span><br><span class=\"line\"></span><br><span class=\"line\">[root@node3 ~]# iscsiadm -m discovery -t st -p 172.25.30.13</span><br><span class=\"line\">Starting iscsid:                      [ OK ]</span><br><span class=\"line\">172.25.30.13:3260,1 iqn.2008-09.com.example:server.target1</span><br><span class=\"line\"></span><br><span class=\"line\">[root@node3 ~]# iscsiadm -m node -l</span><br><span class=\"line\">Logging in to [iface: default, target: iqn.2008-09.com.example:server.target1, portal: 172.25.30.13,3260] (multiple)</span><br><span class=\"line\">Login to [iface: default, target: iqn.2008-09.com.example:server.target1, portal: 172.25.30.13,3260] successful.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@node3 ~]# mkqdisk -c /dev/sda -l myqdisk</span><br><span class=\"line\">mkqdisk v3.0.12.1</span><br><span class=\"line\">Writing new quorum disk label 'myqdisk' to /dev/sda.</span><br><span class=\"line\">WARNING: About to destroy all data on /dev/sda; proceed [N/y] ? y</span><br><span class=\"line\">Warning: Initializing previously initialized partition</span><br><span class=\"line\">Initializing status block for node 1...</span><br><span class=\"line\">Initializing status block for node 2...</span><br></pre></td></tr></table></figure>\n\n<p>luci</p>\n<p><a href=\"http://www.xiemx.com/wp-content/uploads/2016/01/ha2.png\"><img src=\"/images/ha2.png\" alt=\"ha2\"></a><br>cman_tool version -r</p>\n<p>:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">quorumd</span> <span class=\"attr\">label</span>=<span class=\"string\">\"myqdisk\"</span> <span class=\"attr\">min_score</span>=<span class=\"string\">\"1\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">heuristic</span> <span class=\"attr\">interval</span>=<span class=\"string\">\"5\"</span> <span class=\"attr\">program</span>=<span class=\"string\">\"ping 172.25.30.254 -c 1\"</span> <span class=\"attr\">tko</span>=<span class=\"string\">\"2\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">quorumd</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n","site":{"data":{}},"excerpt":"","more":"<p>YUMHA()</p>\n<p>RHELCentoscongayumluciricciyum localinstall luci ricciluciwebricciricciricciricciricci</p>\n<p></p>\n<p>1.</p>\n<ul>\n<li>date</li>\n<li>elinux</li>\n<li>iptables</li>\n<li>/etc/hosts/etc/sysconfig/network</li>\n<li>(stop NetworkManager)</li>\n<li>yum</li>\n</ul>\n<p>2.ricciluciricci</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# yum install luci ricci -y</span><br><span class=\"line\">[root@localhost ~]# yum install ricci -y</span><br><span class=\"line\">[root@localhost ~]# echo 123123123 | passwd --stdin ricci</span><br></pre></td></tr></table></figure>\n\n<p>3.luciwebrootluci</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# /etc/init.d/luci start</span><br><span class=\"line\">Start luci...                       [ OK ]</span><br><span class=\"line\">Point your web browser to https://localhost.localdomain:8084 (or equivalent) to access luci</span><br><span class=\"line\"></span><br><span class=\"line\">[![ha](/images/ha.png)](http://www.xiemx.com/wp-content/uploads/2016/01/ha.png)</span><br><span class=\"line\"></span><br><span class=\"line\">[![hainstall](/images/hainstall.png)](http://www.xiemx.com/wp-content/uploads/2016/02/hainstall.png)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> High Availability </span><br><span class=\"line\"></span><br><span class=\"line\">[root@node3 ~]# yum groupinstall \"High Availability\"</span><br><span class=\"line\">ricci:</span><br><span class=\"line\">[root@node1 ~]# echo uplooking | passwd --stdin ricci</span><br><span class=\"line\">Changing password for user ricci.</span><br><span class=\"line\">passwd: all authentication tokens updated successfully.</span><br></pre></td></tr></table></figure>\n\n<p>/etc/cluster/cluster.conf</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">cluster</span> <span class=\"attr\">config_version</span>=<span class=\"string\">\"12\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"f30Cluster\"</span>&gt;</span> </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">clusternodes</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">clusternode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"node1.xiemx.com\"</span> <span class=\"attr\">nodeid</span>=<span class=\"string\">\"1\"</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">fence</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">method</span> <span class=\"attr\">name</span>=<span class=\"string\">\"FenceMethod\"</span>&gt;</span> </span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">device</span> <span class=\"attr\">domain</span>=<span class=\"string\">\"node1\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Fence1\"</span>/&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">method</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">fence</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">clusternode</span>&gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">clusternode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"node2.xiemx.com\"</span> <span class=\"attr\">nodeid</span>=<span class=\"string\">\"2\"</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">fence</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">method</span> <span class=\"attr\">name</span>=<span class=\"string\">\"FenceMethod\"</span>&gt;</span> </span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">device</span> <span class=\"attr\">domain</span>=<span class=\"string\">\"node2\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Fence2\"</span>/&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">method</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">fence</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">clusternode</span>&gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">clusternode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"node3.xiemx.com\"</span> <span class=\"attr\">nodeid</span>=<span class=\"string\">\"3\"</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">fence</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">method</span> <span class=\"attr\">name</span>=<span class=\"string\">\"FenceMethod\"</span>&gt;</span> </span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">device</span> <span class=\"attr\">domain</span>=<span class=\"string\">\"node3\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Fence3\"</span>/&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">method</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">fence</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">clusternode</span>&gt;</span> </span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">clusternodes</span>&gt;</span>  </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">cman</span> <span class=\"attr\">expected_votes</span>=<span class=\"string\">\"1\"</span>/&gt;</span>  </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">fencedevices</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">fencedevice</span> <span class=\"attr\">agent</span>=<span class=\"string\">\"fence_xvm\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Fence1\"</span>/&gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">fencedevice</span> <span class=\"attr\">agent</span>=<span class=\"string\">\"fence_xvm\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Fence2\"</span>/&gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">fencedevice</span> <span class=\"attr\">agent</span>=<span class=\"string\">\"fence_xvm\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Fence3\"</span>/&gt;</span> </span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">fencedevices</span>&gt;</span>  </span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">rm</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">failoverdomains</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">failoverdomain</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Domain1\"</span> <span class=\"attr\">restricted</span>=<span class=\"string\">\"1\"</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">failoverdomainnode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"node1.xiemx.com\"</span>/&gt;</span>  </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">failoverdomainnode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"node2.xiemx.com\"</span>/&gt;</span>  </span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">failoverdomainnode</span> <span class=\"attr\">name</span>=<span class=\"string\">\"node3.xiemx.com\"</span>/&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">failoverdomain</span>&gt;</span> </span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">failoverdomains</span>&gt;</span>  </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span> </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">ip</span> <span class=\"attr\">address</span>=<span class=\"string\">\"172.25.30.100/24\"</span> <span class=\"attr\">sleeptime</span>=<span class=\"string\">\"10\"</span>/&gt;</span>  </span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">file</span>=<span class=\"string\">\"/etc/init.d/httpd\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"httpd\"</span>/&gt;</span> </span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    <span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span>  </span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">service</span> <span class=\"attr\">domain</span>=<span class=\"string\">\"Domain1\"</span> <span class=\"attr\">name</span>=<span class=\"string\">\"httpd\"</span> <span class=\"attr\">recovery</span>=<span class=\"string\">\"restart\"</span>&gt;</span> </span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">      <span class=\"tag\">&lt;<span class=\"name\">ip</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"172.25.30.100/24\"</span>/&gt;</span>  </span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">      <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"httpd\"</span>/&gt;</span> </span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">    <span class=\"tag\">&lt;/<span class=\"name\">service</span>&gt;</span> </span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\">  <span class=\"tag\">&lt;/<span class=\"name\">rm</span>&gt;</span> </span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">cluster</span>&gt;</span></span></span></span><br></pre></td></tr></table></figure>\n\n<p>:<br>ricciricci</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@node1-f30 ~]# cman_tool version -r</span><br><span class=\"line\">You have not authenticated to the ricci daemon on node1-f30.example.com</span><br><span class=\"line\">Password:</span><br><span class=\"line\">You have not authenticated to the ricci daemon on node3-f30.example.com</span><br><span class=\"line\">Password:</span><br><span class=\"line\">You have not authenticated to the ricci daemon on node2-f30.example.com</span><br><span class=\"line\">Password:</span><br></pre></td></tr></table></figure>\n\n<p>cmanrgmanagermodcluster</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@node3-f30 ~]# /etc/init.d/cman start</span><br><span class=\"line\"></span><br><span class=\"line\">Starting cluster:</span><br><span class=\"line\">Checking if cluster has been disabled at boot...    [ OK ]</span><br><span class=\"line\">Checking Network Manager...               [ OK ]</span><br><span class=\"line\">Global setup...                     [ OK ]</span><br><span class=\"line\">Loading kernel modules...                [ OK ]</span><br><span class=\"line\">Mounting configfs...                  [ OK ]</span><br><span class=\"line\">Starting cman...                    [ OK ]</span><br><span class=\"line\">Waiting for quorum...                  [ OK ]</span><br><span class=\"line\">Starting fenced...                   [ OK ]</span><br><span class=\"line\">Starting dlm_controld...                [ OK ]</span><br><span class=\"line\">Tuning DLM kernel config...               [ OK ]</span><br><span class=\"line\">Starting gfs_controld...                [ OK ]</span><br><span class=\"line\">Unfencing self...                    [ OK ]</span><br><span class=\"line\">Joining fence domain...                 [ OK ]</span><br><span class=\"line\"></span><br><span class=\"line\">[root@node3-f30 ~]# /etc/init.d/rgmanager start</span><br><span class=\"line\">Starting Cluster Service Manager:             [ OK ]</span><br><span class=\"line\"></span><br><span class=\"line\">[root@node3-f30 ~]# /etc/init.d/modclusterd start</span><br><span class=\"line\">Starting Cluster Module - cluster monitor: Setting verbosity level to LogBasic</span><br><span class=\"line\">[ OK ]</span><br></pre></td></tr></table></figure>\n\n<p>node3:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@node1-f30 ~]# clusvcadm -r httpd -m node3-f30.example.com</span><br><span class=\"line\">Trying to relocate service:httpd to node3-f30.example.com...Success</span><br><span class=\"line\">service:httpd is now running on node3-f30.example.com</span><br><span class=\"line\"></span><br><span class=\"line\">fence_xvm.key:</span><br><span class=\"line\"></span><br><span class=\"line\">[root@node1-f30 ~]# scp /etc/cluster/fence_xvm.key 172.25.30.12:/etc/cluster/fence_xvm.key</span><br><span class=\"line\">The authenticity of host '172.25.30.12 (172.25.30.12)' can't be established.</span><br><span class=\"line\">RSA key fingerprint is cf:7c:26:aa:4f:41:7b:21:5e:09:ce:8a:15:2c:97:32.</span><br><span class=\"line\">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class=\"line\">Warning: Permanently added '172.25.30.12' (RSA) to the list of known hosts.</span><br><span class=\"line\">root@172.25.30.12's password:</span><br><span class=\"line\">fence_xvm.key                100% 512   0.5KB/s  00:00</span><br></pre></td></tr></table></figure>\n\n<p>Qdisk</p>\n<p>,scsi-target-utilsyum</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@rhel6 ~]# yum install scsi*</span><br><span class=\"line\"></span><br><span class=\"line\">3</span><br><span class=\"line\"></span><br><span class=\"line\">[root@rhel6 ~]# vi /etc/tgt/targets.conf</span><br><span class=\"line\">&lt;target iqn.2008-09.com.example:server.target1&gt;</span><br><span class=\"line\">backing-store /dev/vdb1</span><br><span class=\"line\">&lt;/target&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"> iscsi-initiator-utils</span><br><span class=\"line\"></span><br><span class=\"line\">[root@node1-f30 ~]# yum install scsi*</span><br><span class=\"line\"></span><br><span class=\"line\">,</span><br><span class=\"line\"></span><br><span class=\"line\">iscsiadm -m discovery -t st -p 172.25.30.13</span><br><span class=\"line\">iscsiadm -m node -l</span><br><span class=\"line\">mkqdisk -c /dev/sda -l myqdisk</span><br><span class=\"line\"></span><br><span class=\"line\">[root@node3 ~]# iscsiadm -m discovery -t st -p 172.25.30.13</span><br><span class=\"line\">Starting iscsid:                      [ OK ]</span><br><span class=\"line\">172.25.30.13:3260,1 iqn.2008-09.com.example:server.target1</span><br><span class=\"line\"></span><br><span class=\"line\">[root@node3 ~]# iscsiadm -m node -l</span><br><span class=\"line\">Logging in to [iface: default, target: iqn.2008-09.com.example:server.target1, portal: 172.25.30.13,3260] (multiple)</span><br><span class=\"line\">Login to [iface: default, target: iqn.2008-09.com.example:server.target1, portal: 172.25.30.13,3260] successful.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@node3 ~]# mkqdisk -c /dev/sda -l myqdisk</span><br><span class=\"line\">mkqdisk v3.0.12.1</span><br><span class=\"line\">Writing new quorum disk label 'myqdisk' to /dev/sda.</span><br><span class=\"line\">WARNING: About to destroy all data on /dev/sda; proceed [N/y] ? y</span><br><span class=\"line\">Warning: Initializing previously initialized partition</span><br><span class=\"line\">Initializing status block for node 1...</span><br><span class=\"line\">Initializing status block for node 2...</span><br></pre></td></tr></table></figure>\n\n<p>luci</p>\n<p><a href=\"http://www.xiemx.com/wp-content/uploads/2016/01/ha2.png\"><img src=\"/images/ha2.png\" alt=\"ha2\"></a><br>cman_tool version -r</p>\n<p>:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">quorumd</span> <span class=\"attr\">label</span>=<span class=\"string\">\"myqdisk\"</span> <span class=\"attr\">min_score</span>=<span class=\"string\">\"1\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">heuristic</span> <span class=\"attr\">interval</span>=<span class=\"string\">\"5\"</span> <span class=\"attr\">program</span>=<span class=\"string\">\"ping 172.25.30.254 -c 1\"</span> <span class=\"attr\">tko</span>=<span class=\"string\">\"2\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">quorumd</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n"},{"layout":"post","title":"session_start()","published":1,"author":"xiemx","comments":1,"date":"2015-09-29T17:09:15.000Z","_content":"### \n\nWarning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent\n\n### \n\n(PHP 4, PHP 5)\n\nsession_start  \n\n ` <php `\n\n```php\n<?php\nsession_start();\ninclude xxxxxxxx;\n?>\n```","source":"_posts/session_start-error.md","raw":"---\nlayout: post\ntitle: session_start()\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-09-30 01:09:15\ntags: [ php, debug ]\ncategories:\n    - php\n    - debug\n# permalink: '/2015/09/30/session_start-error'\n---\n### \n\nWarning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent\n\n### \n\n(PHP 4, PHP 5)\n\nsession_start  \n\n ` <php `\n\n```php\n<?php\nsession_start();\ninclude xxxxxxxx;\n?>\n```","slug":"session_start-error","updated":"2019-10-21T09:02:35.142Z","photos":[],"link":"","_id":"ck42dyift0082u9urpu4ca5fo","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>(PHP 4, PHP 5)</p>\n<p>session_start  </p>\n<p> <code>&lt;php</code></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">session_start();</span><br><span class=\"line\"><span class=\"keyword\">include</span> xxxxxxxx;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>(PHP 4, PHP 5)</p>\n<p>session_start  </p>\n<p> <code>&lt;php</code></p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?php</span></span><br><span class=\"line\">session_start();</span><br><span class=\"line\"><span class=\"keyword\">include</span> xxxxxxxx;</span><br><span class=\"line\"><span class=\"meta\">?&gt;</span></span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"shell ","published":1,"author":"xiemx","comments":1,"date":"2016-06-29T02:06:08.000Z","_content":"\n### \n```\n  ${var:-word} varnullword\n  ${var:=word}  varnullwordvarvar\n  ${var:?word}  varnullvar:word\n  ${var:+word} varnullwordnull\n```\n\n### \n```\n  ${var#pattern}  \n  ${var##pattern} \n  ${var%pattern} \n  ${var%%pattern} \n```\n  pattern\n","source":"_posts/shell-advance-variable.md","raw":"---\nlayout: post\ntitle: shell \npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-06-29 10:06:08\ntags: [ shell, linux ]\ncategories:\n    - shell\n    - linux\n# permalink: '/2016/06/29/shell-%e5%8f%98%e9%87%8f%e7%89%b9%e6%ae%8a%e6%93%8d%e4%bd%9c'\n---\n\n### \n```\n  ${var:-word} varnullword\n  ${var:=word}  varnullwordvarvar\n  ${var:?word}  varnullvar:word\n  ${var:+word} varnullwordnull\n```\n\n### \n```\n  ${var#pattern}  \n  ${var##pattern} \n  ${var%pattern} \n  ${var%%pattern} \n```\n  pattern\n","slug":"shell-advance-variable","updated":"2019-10-21T06:57:42.989Z","photos":[],"link":"","_id":"ck42dyifu0085u9uri8y0a9sg","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;<span class=\"keyword\">var</span>:-word&#125; <span class=\"keyword\">var</span><span class=\"literal\">null</span>word</span><br><span class=\"line\">$&#123;<span class=\"keyword\">var</span>:=word&#125;  <span class=\"keyword\">var</span><span class=\"literal\">null</span>word<span class=\"keyword\">var</span><span class=\"keyword\">var</span></span><br><span class=\"line\">$&#123;<span class=\"keyword\">var</span>:?word&#125;  <span class=\"keyword\">var</span><span class=\"literal\">null</span><span class=\"keyword\">var</span>:word</span><br><span class=\"line\">$&#123;<span class=\"keyword\">var</span>:+word&#125; <span class=\"keyword\">var</span><span class=\"literal\">null</span>word<span class=\"literal\">null</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;<span class=\"keyword\">var</span><span class=\"meta\">#pattern&#125;  </span></span><br><span class=\"line\">$&#123;<span class=\"keyword\">var</span><span class=\"meta\">##pattern&#125; </span></span><br><span class=\"line\">$&#123;<span class=\"keyword\">var</span>%pattern&#125; </span><br><span class=\"line\">$&#123;<span class=\"keyword\">var</span>%%pattern&#125; </span><br></pre></td></tr></table></figure>\n\n<p>  pattern</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;<span class=\"keyword\">var</span>:-word&#125; <span class=\"keyword\">var</span><span class=\"literal\">null</span>word</span><br><span class=\"line\">$&#123;<span class=\"keyword\">var</span>:=word&#125;  <span class=\"keyword\">var</span><span class=\"literal\">null</span>word<span class=\"keyword\">var</span><span class=\"keyword\">var</span></span><br><span class=\"line\">$&#123;<span class=\"keyword\">var</span>:?word&#125;  <span class=\"keyword\">var</span><span class=\"literal\">null</span><span class=\"keyword\">var</span>:word</span><br><span class=\"line\">$&#123;<span class=\"keyword\">var</span>:+word&#125; <span class=\"keyword\">var</span><span class=\"literal\">null</span>word<span class=\"literal\">null</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;<span class=\"keyword\">var</span><span class=\"meta\">#pattern&#125;  </span></span><br><span class=\"line\">$&#123;<span class=\"keyword\">var</span><span class=\"meta\">##pattern&#125; </span></span><br><span class=\"line\">$&#123;<span class=\"keyword\">var</span>%pattern&#125; </span><br><span class=\"line\">$&#123;<span class=\"keyword\">var</span>%%pattern&#125; </span><br></pre></td></tr></table></figure>\n\n<p>  pattern</p>\n"},{"layout":"post","title":"watch","published":1,"author":"xiemx","comments":1,"date":"2016-08-10T20:08:29.000Z","_content":"`watch`\n\n```shell\n  ~ watch\n\nUsage:\n watch [options] command\n\nOptions:\n  -b, --beep             beep if command has a non-zero exit\n  -c, --color            interpret ANSI color and style sequences\n  -d, --differences[=<permanent>]\n                         highlight changes between updates\n  -e, --errexit          exit if command has a non-zero exit\n  -g, --chgexit          exit when output from command changes\n  -n, --interval <secs>  seconds to wait between updates\n  -p, --precise          attempt run command in precise intervals\n  -t, --no-title         turn off header\n  -x, --exec             pass command to exec instead of \"sh -c\"\n\n -h, --help     display this help and exit\n -v, --version  output version information and exit\n\nFor more details see watch(1).\n\n###ls\nwatch -n 1 ls\n```\n\n","source":"_posts/shell-command-watch.md","raw":"---\nlayout: post\ntitle: watch\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-08-11 04:08:29\ntags: [ shell, command ]\ncategories:\n    - 'command'\n#permalink: '/2016/08/11/shell-command-watch'\n---\n`watch`\n\n```shell\n  ~ watch\n\nUsage:\n watch [options] command\n\nOptions:\n  -b, --beep             beep if command has a non-zero exit\n  -c, --color            interpret ANSI color and style sequences\n  -d, --differences[=<permanent>]\n                         highlight changes between updates\n  -e, --errexit          exit if command has a non-zero exit\n  -g, --chgexit          exit when output from command changes\n  -n, --interval <secs>  seconds to wait between updates\n  -p, --precise          attempt run command in precise intervals\n  -t, --no-title         turn off header\n  -x, --exec             pass command to exec instead of \"sh -c\"\n\n -h, --help     display this help and exit\n -v, --version  output version information and exit\n\nFor more details see watch(1).\n\n###ls\nwatch -n 1 ls\n```\n\n","slug":"shell-command-watch","updated":"2019-10-21T06:57:42.819Z","photos":[],"link":"","_id":"ck42dyifx0089u9ur9xyj2d7r","content":"<p><code>watch</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  ~ watch</span><br><span class=\"line\"></span><br><span class=\"line\">Usage:</span><br><span class=\"line\"> watch [options] command</span><br><span class=\"line\"></span><br><span class=\"line\">Options:</span><br><span class=\"line\">  -b, --beep             beep if command has a non-zero exit</span><br><span class=\"line\">  -c, --color            interpret ANSI color and style sequences</span><br><span class=\"line\">  -d, --differences[=&lt;permanent&gt;]</span><br><span class=\"line\">                         highlight changes between updates</span><br><span class=\"line\">  -e, --errexit          exit if command has a non-zero exit</span><br><span class=\"line\">  -g, --chgexit          exit when output from command changes</span><br><span class=\"line\">  -n, --interval &lt;secs&gt;  seconds to wait between updates</span><br><span class=\"line\">  -p, --precise          attempt run command in precise intervals</span><br><span class=\"line\">  -t, --no-title         turn off header</span><br><span class=\"line\">  -x, --exec             pass command to exec instead of \"sh -c\"</span><br><span class=\"line\"></span><br><span class=\"line\"> -h, --help     display this help and exit</span><br><span class=\"line\"> -v, --version  output version information and exit</span><br><span class=\"line\"></span><br><span class=\"line\">For more details see watch(1).</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">##ls</span></span></span><br><span class=\"line\">watch -n 1 ls</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p><code>watch</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  ~ watch</span><br><span class=\"line\"></span><br><span class=\"line\">Usage:</span><br><span class=\"line\"> watch [options] command</span><br><span class=\"line\"></span><br><span class=\"line\">Options:</span><br><span class=\"line\">  -b, --beep             beep if command has a non-zero exit</span><br><span class=\"line\">  -c, --color            interpret ANSI color and style sequences</span><br><span class=\"line\">  -d, --differences[=&lt;permanent&gt;]</span><br><span class=\"line\">                         highlight changes between updates</span><br><span class=\"line\">  -e, --errexit          exit if command has a non-zero exit</span><br><span class=\"line\">  -g, --chgexit          exit when output from command changes</span><br><span class=\"line\">  -n, --interval &lt;secs&gt;  seconds to wait between updates</span><br><span class=\"line\">  -p, --precise          attempt run command in precise intervals</span><br><span class=\"line\">  -t, --no-title         turn off header</span><br><span class=\"line\">  -x, --exec             pass command to exec instead of \"sh -c\"</span><br><span class=\"line\"></span><br><span class=\"line\"> -h, --help     display this help and exit</span><br><span class=\"line\"> -v, --version  output version information and exit</span><br><span class=\"line\"></span><br><span class=\"line\">For more details see watch(1).</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">##ls</span></span></span><br><span class=\"line\">watch -n 1 ls</span><br></pre></td></tr></table></figure>\n\n"},{"layout":"post","title":"shell ","published":1,"author":"xiemx","comments":1,"date":"2016-06-29T01:06:36.000Z","_content":"\n``` \n$#  \n$@  \n$*  \n$?  \n$$  \n$0  \n$!  \n$IFS  \n\n$?\n0  \n>0  \n1-125   exit 22\n126  \n127  \n>128  \n```","source":"_posts/shell-special-env-variable.md","raw":"---\nlayout: post\ntitle: shell \npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-06-29 09:06:36\ntags: [ shell, linux]\ncategories:\n    - shell\n    - linux\n# permalink: '/2016/06/29/shell-special-env-variable'\n---\n\n``` \n$#  \n$@  \n$*  \n$?  \n$$  \n$0  \n$!  \n$IFS  \n\n$?\n0  \n>0  \n1-125   exit 22\n126  \n127  \n>128  \n```","slug":"shell-special-env-variable","updated":"2019-10-19T08:06:22.355Z","photos":[],"link":"","_id":"ck42dyifz008du9urfbilrfkz","content":"<p></p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$#</span>  </span><br><span class=\"line\"><span class=\"variable\">$@</span>  </span><br><span class=\"line\">$*  </span><br><span class=\"line\">$?  </span><br><span class=\"line\">$$  </span><br><span class=\"line\"><span class=\"variable\">$0</span>  </span><br><span class=\"line\">$!  </span><br><span class=\"line\"><span class=\"variable\">$IFS</span>  </span><br><span class=\"line\"></span><br><span class=\"line\">$?</span><br><span class=\"line\"><span class=\"number\">0</span>  </span><br><span class=\"line\">&gt;<span class=\"number\">0</span>  </span><br><span class=\"line\"><span class=\"number\">1</span>-<span class=\"number\">125</span>   <span class=\"keyword\">exit</span> <span class=\"number\">2</span><span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">126</span>  </span><br><span class=\"line\"><span class=\"number\">127</span>  </span><br><span class=\"line\">&gt;<span class=\"number\">128</span>  </span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p></p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$#</span>  </span><br><span class=\"line\"><span class=\"variable\">$@</span>  </span><br><span class=\"line\">$*  </span><br><span class=\"line\">$?  </span><br><span class=\"line\">$$  </span><br><span class=\"line\"><span class=\"variable\">$0</span>  </span><br><span class=\"line\">$!  </span><br><span class=\"line\"><span class=\"variable\">$IFS</span>  </span><br><span class=\"line\"></span><br><span class=\"line\">$?</span><br><span class=\"line\"><span class=\"number\">0</span>  </span><br><span class=\"line\">&gt;<span class=\"number\">0</span>  </span><br><span class=\"line\"><span class=\"number\">1</span>-<span class=\"number\">125</span>   <span class=\"keyword\">exit</span> <span class=\"number\">2</span><span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">126</span>  </span><br><span class=\"line\"><span class=\"number\">127</span>  </span><br><span class=\"line\">&gt;<span class=\"number\">128</span>  </span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"SSHAuthorizedKeysCommandAuthorizedKeysCommandUser","published":1,"author":"xiemx","comments":1,"date":"2019-05-06T03:05:17.000Z","_content":"* AuthorizedKeysCommand publickeyAuthorizedKeysFile\n* AuthorizedKeysCommandUser publickeyMySQLLDAP","source":"_posts/ssh-authorizedkeyscommand.md","raw":"---\nlayout: post\ntitle: SSHAuthorizedKeysCommandAuthorizedKeysCommandUser\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2019-05-06 11:05:17\ntags: [ ssh, linux ]\ncategories:\n    - linux\n# permalink: '/2019/05/06/ssh-authorizedkeyscommand-cauthorizedkeyscommanduser'\n---\n* AuthorizedKeysCommand publickeyAuthorizedKeysFile\n* AuthorizedKeysCommandUser publickeyMySQLLDAP","slug":"ssh-authorizedkeyscommand","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyig0008hu9urh3700er2","content":"<ul>\n<li>AuthorizedKeysCommand publickeyAuthorizedKeysFile</li>\n<li>AuthorizedKeysCommandUser publickeyMySQLLDAP</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li>AuthorizedKeysCommand publickeyAuthorizedKeysFile</li>\n<li>AuthorizedKeysCommandUser publickeyMySQLLDAP</li>\n</ul>\n"},{"layout":"post","title":"statsd cluster proxy","published":1,"author":"xiemx","comments":1,"date":"2017-09-07T21:09:37.000Z","_content":"UDP proxyhashmetricaggregationproxystatsd\n\n1.\n3statsdstandout\n\n```\nnode1\n######config\n{\n port: 8127\n, mgmt_port: 8227\n, backends: [ \"./backends/console\" ]\n}\n\n:\nxiemx  statsd : master  :   node stats.js config8127.js\n8 Sep 11:06:36 - [81604] reading config file: config8127.js\n8 Sep 11:06:36 - server is up INFO\n```\n```\nnode2\n######config\n{\n port: 8128\n, mgmt_port: 8228\n, backends: [ \"./backends/console\" ]\n}\n\n\nxiemx  statsd : master  :   node stats.js config8128.js\n8 Sep 11:07:09 - [81665] reading config file: config8128.js\n8 Sep 11:07:09 - server is up INFO\n```\n```\nnode3\n######config\n{\n port: 8129\n, mgmt_port: 8229\n, backends: [ \"./backends/console\" ]\n}\n\n\nxiemx  statsd : master  :   node stats.js config8129.js\n8 Sep 11:07:45 - [81723] reading config file: config8129.js\n8 Sep 11:07:45 - server is up INFO\n```\n```\nproxy\n######config\n{\nnodes: [\n{host: '127.0.0.1', port: 8127, adminport: 8227},\n{host: '127.0.0.1', port: 8128, adminport: 8228},\n{host: '127.0.0.1', port: 8129, adminport: 8229}\n],\nserver: './servers/udp',\nhost:  '0.0.0.0',\nport: 8125,\nmgmt_port: 8126,\nforkCount: 0,\ncheckInterval: 1000,\ncacheSize: 10000,\ndeleteIdleStats: true\n}\n\n\nxiemx  statsd : master  :   node proxy.js proxyconfig.js\n8 Sep 11:09:02 - [81938] reading config file: proxyconfig.js\n8 Sep 11:09:02 - INFO: [81938] server is up\n```\n\n\n5500metric\n\n```\n\nfor i in $(seq 1 500);do echo \"Ezbuy-$i:1|c\" | nc -u -w0 127.0.0.1 8125;done\n```\n\n![img](/images/img_59b269634a216.png)\n\n![img](/images/img_59b2697b89208.png)\n\n\n\n![img](/images/img_59b2698d5658f.png)\n\n","source":"_posts/statsd-cluster-proxy.md","raw":"---\nlayout: post\ntitle: statsd cluster proxy\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-09-08 05:09:37\ntags: [ statsd, graphite, monitor, database]\ncategories:\n    - statsd\n    - graphite\n# permalink: /2017/09/08/statsd-cluster-proxy\n---\nUDP proxyhashmetricaggregationproxystatsd\n\n1.\n3statsdstandout\n\n```\nnode1\n######config\n{\n port: 8127\n, mgmt_port: 8227\n, backends: [ \"./backends/console\" ]\n}\n\n:\nxiemx  statsd : master  :   node stats.js config8127.js\n8 Sep 11:06:36 - [81604] reading config file: config8127.js\n8 Sep 11:06:36 - server is up INFO\n```\n```\nnode2\n######config\n{\n port: 8128\n, mgmt_port: 8228\n, backends: [ \"./backends/console\" ]\n}\n\n\nxiemx  statsd : master  :   node stats.js config8128.js\n8 Sep 11:07:09 - [81665] reading config file: config8128.js\n8 Sep 11:07:09 - server is up INFO\n```\n```\nnode3\n######config\n{\n port: 8129\n, mgmt_port: 8229\n, backends: [ \"./backends/console\" ]\n}\n\n\nxiemx  statsd : master  :   node stats.js config8129.js\n8 Sep 11:07:45 - [81723] reading config file: config8129.js\n8 Sep 11:07:45 - server is up INFO\n```\n```\nproxy\n######config\n{\nnodes: [\n{host: '127.0.0.1', port: 8127, adminport: 8227},\n{host: '127.0.0.1', port: 8128, adminport: 8228},\n{host: '127.0.0.1', port: 8129, adminport: 8229}\n],\nserver: './servers/udp',\nhost:  '0.0.0.0',\nport: 8125,\nmgmt_port: 8126,\nforkCount: 0,\ncheckInterval: 1000,\ncacheSize: 10000,\ndeleteIdleStats: true\n}\n\n\nxiemx  statsd : master  :   node proxy.js proxyconfig.js\n8 Sep 11:09:02 - [81938] reading config file: proxyconfig.js\n8 Sep 11:09:02 - INFO: [81938] server is up\n```\n\n\n5500metric\n\n```\n\nfor i in $(seq 1 500);do echo \"Ezbuy-$i:1|c\" | nc -u -w0 127.0.0.1 8125;done\n```\n\n![img](/images/img_59b269634a216.png)\n\n![img](/images/img_59b2697b89208.png)\n\n\n\n![img](/images/img_59b2698d5658f.png)\n\n","slug":"statsd-cluster-proxy","updated":"2019-10-21T06:57:42.329Z","photos":[],"link":"","_id":"ck42dyig1008lu9urywtlrht9","content":"<p>UDP proxyhashmetricaggregationproxystatsd</p>\n<p>1.<br>3statsdstandout</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node1</span><br><span class=\"line\"><span class=\"comment\">######config</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> port: 8127</span><br><span class=\"line\">, mgmt_port: 8227</span><br><span class=\"line\">, backends: [ <span class=\"string\">\"./backends/console\"</span> ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">:</span><br><span class=\"line\">xiemx  statsd : master  :   node stats.js config8127.js</span><br><span class=\"line\">8 Sep 11:06:36 - [81604] reading<span class=\"built_in\"> config </span>file: config8127.js</span><br><span class=\"line\">8 Sep 11:06:36 -<span class=\"built_in\"> server </span>is up INFO</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node2</span><br><span class=\"line\"><span class=\"comment\">######config</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> port: 8128</span><br><span class=\"line\">, mgmt_port: 8228</span><br><span class=\"line\">, backends: [ <span class=\"string\">\"./backends/console\"</span> ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">xiemx  statsd : master  :   node stats.js config8128.js</span><br><span class=\"line\">8 Sep 11:07:09 - [81665] reading<span class=\"built_in\"> config </span>file: config8128.js</span><br><span class=\"line\">8 Sep 11:07:09 -<span class=\"built_in\"> server </span>is up INFO</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node3</span><br><span class=\"line\"><span class=\"comment\">######config</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> port: 8129</span><br><span class=\"line\">, mgmt_port: 8229</span><br><span class=\"line\">, backends: [ <span class=\"string\">\"./backends/console\"</span> ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">xiemx  statsd : master  :   node stats.js config8129.js</span><br><span class=\"line\">8 Sep 11:07:45 - [81723] reading<span class=\"built_in\"> config </span>file: config8129.js</span><br><span class=\"line\">8 Sep 11:07:45 -<span class=\"built_in\"> server </span>is up INFO</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">proxy</span></span><br><span class=\"line\">#####<span class=\"selector-id\">#config</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"attribute\">nodes</span>: [</span><br><span class=\"line\">&#123;<span class=\"attribute\">host</span>: <span class=\"string\">'127.0.0.1'</span>, <span class=\"attribute\">port</span>: <span class=\"number\">8127</span>, <span class=\"attribute\">adminport</span>: <span class=\"number\">8227</span>&#125;,</span><br><span class=\"line\">&#123;<span class=\"attribute\">host</span>: <span class=\"string\">'127.0.0.1'</span>, <span class=\"attribute\">port</span>: <span class=\"number\">8128</span>, <span class=\"attribute\">adminport</span>: <span class=\"number\">8228</span>&#125;,</span><br><span class=\"line\">&#123;<span class=\"attribute\">host</span>: <span class=\"string\">'127.0.0.1'</span>, <span class=\"attribute\">port</span>: <span class=\"number\">8129</span>, <span class=\"attribute\">adminport</span>: <span class=\"number\">8229</span>&#125;</span><br><span class=\"line\">],</span><br><span class=\"line\"><span class=\"attribute\">server</span>: <span class=\"string\">'./servers/udp'</span>,</span><br><span class=\"line\"><span class=\"attribute\">host</span>:  <span class=\"string\">'0.0.0.0'</span>,</span><br><span class=\"line\"><span class=\"attribute\">port</span>: <span class=\"number\">8125</span>,</span><br><span class=\"line\"><span class=\"attribute\">mgmt_port</span>: <span class=\"number\">8126</span>,</span><br><span class=\"line\"><span class=\"attribute\">forkCount</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\"><span class=\"attribute\">checkInterval</span>: <span class=\"number\">1000</span>,</span><br><span class=\"line\"><span class=\"attribute\">cacheSize</span>: <span class=\"number\">10000</span>,</span><br><span class=\"line\"><span class=\"attribute\">deleteIdleStats</span>: true</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">xiemx</span>  <span class=\"selector-tag\">statsd</span> : <span class=\"selector-tag\">master</span>  :   <span class=\"selector-tag\">node</span> <span class=\"selector-tag\">proxy</span><span class=\"selector-class\">.js</span> <span class=\"selector-tag\">proxyconfig</span><span class=\"selector-class\">.js</span></span><br><span class=\"line\"><span class=\"selector-tag\">8</span> <span class=\"selector-tag\">Sep</span> <span class=\"selector-tag\">11</span><span class=\"selector-pseudo\">:09</span><span class=\"selector-pseudo\">:02</span> <span class=\"selector-tag\">-</span> <span class=\"selector-attr\">[81938]</span> <span class=\"selector-tag\">reading</span> <span class=\"selector-tag\">config</span> <span class=\"selector-tag\">file</span>: <span class=\"selector-tag\">proxyconfig</span><span class=\"selector-class\">.js</span></span><br><span class=\"line\"><span class=\"selector-tag\">8</span> <span class=\"selector-tag\">Sep</span> <span class=\"selector-tag\">11</span><span class=\"selector-pseudo\">:09</span><span class=\"selector-pseudo\">:02</span> <span class=\"selector-tag\">-</span> <span class=\"selector-tag\">INFO</span>: <span class=\"selector-attr\">[81938]</span> <span class=\"selector-tag\">server</span> <span class=\"selector-tag\">is</span> <span class=\"selector-tag\">up</span></span><br></pre></td></tr></table></figure>\n\n<p><br>5500metric</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> $(seq <span class=\"number\">1</span> <span class=\"number\">500</span>);<span class=\"keyword\">do</span> echo <span class=\"string\">\"Ezbuy-$i:1|c\"</span> | nc -u -w0 <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span> <span class=\"number\">8125</span>;done</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/images/img_59b269634a216.png\" alt=\"img\"></p>\n<p><img src=\"/images/img_59b2697b89208.png\" alt=\"img\"></p>\n<p></p>\n<p><img src=\"/images/img_59b2698d5658f.png\" alt=\"img\"></p>\n","site":{"data":{}},"excerpt":"","more":"<p>UDP proxyhashmetricaggregationproxystatsd</p>\n<p>1.<br>3statsdstandout</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node1</span><br><span class=\"line\"><span class=\"comment\">######config</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> port: 8127</span><br><span class=\"line\">, mgmt_port: 8227</span><br><span class=\"line\">, backends: [ <span class=\"string\">\"./backends/console\"</span> ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">:</span><br><span class=\"line\">xiemx  statsd : master  :   node stats.js config8127.js</span><br><span class=\"line\">8 Sep 11:06:36 - [81604] reading<span class=\"built_in\"> config </span>file: config8127.js</span><br><span class=\"line\">8 Sep 11:06:36 -<span class=\"built_in\"> server </span>is up INFO</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node2</span><br><span class=\"line\"><span class=\"comment\">######config</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> port: 8128</span><br><span class=\"line\">, mgmt_port: 8228</span><br><span class=\"line\">, backends: [ <span class=\"string\">\"./backends/console\"</span> ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">xiemx  statsd : master  :   node stats.js config8128.js</span><br><span class=\"line\">8 Sep 11:07:09 - [81665] reading<span class=\"built_in\"> config </span>file: config8128.js</span><br><span class=\"line\">8 Sep 11:07:09 -<span class=\"built_in\"> server </span>is up INFO</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">node3</span><br><span class=\"line\"><span class=\"comment\">######config</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> port: 8129</span><br><span class=\"line\">, mgmt_port: 8229</span><br><span class=\"line\">, backends: [ <span class=\"string\">\"./backends/console\"</span> ]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">xiemx  statsd : master  :   node stats.js config8129.js</span><br><span class=\"line\">8 Sep 11:07:45 - [81723] reading<span class=\"built_in\"> config </span>file: config8129.js</span><br><span class=\"line\">8 Sep 11:07:45 -<span class=\"built_in\"> server </span>is up INFO</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">proxy</span></span><br><span class=\"line\">#####<span class=\"selector-id\">#config</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"attribute\">nodes</span>: [</span><br><span class=\"line\">&#123;<span class=\"attribute\">host</span>: <span class=\"string\">'127.0.0.1'</span>, <span class=\"attribute\">port</span>: <span class=\"number\">8127</span>, <span class=\"attribute\">adminport</span>: <span class=\"number\">8227</span>&#125;,</span><br><span class=\"line\">&#123;<span class=\"attribute\">host</span>: <span class=\"string\">'127.0.0.1'</span>, <span class=\"attribute\">port</span>: <span class=\"number\">8128</span>, <span class=\"attribute\">adminport</span>: <span class=\"number\">8228</span>&#125;,</span><br><span class=\"line\">&#123;<span class=\"attribute\">host</span>: <span class=\"string\">'127.0.0.1'</span>, <span class=\"attribute\">port</span>: <span class=\"number\">8129</span>, <span class=\"attribute\">adminport</span>: <span class=\"number\">8229</span>&#125;</span><br><span class=\"line\">],</span><br><span class=\"line\"><span class=\"attribute\">server</span>: <span class=\"string\">'./servers/udp'</span>,</span><br><span class=\"line\"><span class=\"attribute\">host</span>:  <span class=\"string\">'0.0.0.0'</span>,</span><br><span class=\"line\"><span class=\"attribute\">port</span>: <span class=\"number\">8125</span>,</span><br><span class=\"line\"><span class=\"attribute\">mgmt_port</span>: <span class=\"number\">8126</span>,</span><br><span class=\"line\"><span class=\"attribute\">forkCount</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\"><span class=\"attribute\">checkInterval</span>: <span class=\"number\">1000</span>,</span><br><span class=\"line\"><span class=\"attribute\">cacheSize</span>: <span class=\"number\">10000</span>,</span><br><span class=\"line\"><span class=\"attribute\">deleteIdleStats</span>: true</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">xiemx</span>  <span class=\"selector-tag\">statsd</span> : <span class=\"selector-tag\">master</span>  :   <span class=\"selector-tag\">node</span> <span class=\"selector-tag\">proxy</span><span class=\"selector-class\">.js</span> <span class=\"selector-tag\">proxyconfig</span><span class=\"selector-class\">.js</span></span><br><span class=\"line\"><span class=\"selector-tag\">8</span> <span class=\"selector-tag\">Sep</span> <span class=\"selector-tag\">11</span><span class=\"selector-pseudo\">:09</span><span class=\"selector-pseudo\">:02</span> <span class=\"selector-tag\">-</span> <span class=\"selector-attr\">[81938]</span> <span class=\"selector-tag\">reading</span> <span class=\"selector-tag\">config</span> <span class=\"selector-tag\">file</span>: <span class=\"selector-tag\">proxyconfig</span><span class=\"selector-class\">.js</span></span><br><span class=\"line\"><span class=\"selector-tag\">8</span> <span class=\"selector-tag\">Sep</span> <span class=\"selector-tag\">11</span><span class=\"selector-pseudo\">:09</span><span class=\"selector-pseudo\">:02</span> <span class=\"selector-tag\">-</span> <span class=\"selector-tag\">INFO</span>: <span class=\"selector-attr\">[81938]</span> <span class=\"selector-tag\">server</span> <span class=\"selector-tag\">is</span> <span class=\"selector-tag\">up</span></span><br></pre></td></tr></table></figure>\n\n<p><br>5500metric</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> $(seq <span class=\"number\">1</span> <span class=\"number\">500</span>);<span class=\"keyword\">do</span> echo <span class=\"string\">\"Ezbuy-$i:1|c\"</span> | nc -u -w0 <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span> <span class=\"number\">8125</span>;done</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/images/img_59b269634a216.png\" alt=\"img\"></p>\n<p><img src=\"/images/img_59b2697b89208.png\" alt=\"img\"></p>\n<p></p>\n<p><img src=\"/images/img_59b2698d5658f.png\" alt=\"img\"></p>\n"},{"layout":"post","title":"TCP","published":1,"author":"xiemx","comments":1,"date":"2018-01-23T03:01:20.000Z","_content":"### TCP\n* listenclose\n* syn-sent/syn-revd\n* established\n* fin_wait_1/close_wait\n* fin_wait_2/last_ack\n* time_wait/close\n\n```\nLISTEN\t        TCP\nSYN_SENT\tTCP\nSYN-RECEIVED\tTCP\nESTABLISHED\t\nFIN_WAIT_1\tTCP\nFIN_WAIT_2\tTCP\nCLOSE_WAIT\tTCP\nCLOSING\t        TCP\nLAST_ACK\tTCP\nTIME_WAIT\tTCP\n```\n\nTcpC/STCP\n### \n\n```\n1. (close)syn(listen),ack(syn_sent)\n2. syn,ack/syn(syn_rec)\n3. ack(establelished)\n4. \n5. fin(fin_wait_1)\n6. fin,ack(close_wait)\n7. ,fin(last_ack)\n8. ack(fin_wait_2)\n9. fin,ack(time_wait)\n10. ack,(close)\n11. 2mslsocket\n```\n\n\n![img](/images/img_5a66a577176c8.png)","source":"_posts/tcp-state.md","raw":"---\nlayout: post\ntitle: TCP\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2018-01-23 11:01:20\ntags: [ tcp, linux ]\ncategories:\n    - linux\n# permalink: '/2018/01/23/tcp-state'\n---\n### TCP\n* listenclose\n* syn-sent/syn-revd\n* established\n* fin_wait_1/close_wait\n* fin_wait_2/last_ack\n* time_wait/close\n\n```\nLISTEN\t        TCP\nSYN_SENT\tTCP\nSYN-RECEIVED\tTCP\nESTABLISHED\t\nFIN_WAIT_1\tTCP\nFIN_WAIT_2\tTCP\nCLOSE_WAIT\tTCP\nCLOSING\t        TCP\nLAST_ACK\tTCP\nTIME_WAIT\tTCP\n```\n\nTcpC/STCP\n### \n\n```\n1. (close)syn(listen),ack(syn_sent)\n2. syn,ack/syn(syn_rec)\n3. ack(establelished)\n4. \n5. fin(fin_wait_1)\n6. fin,ack(close_wait)\n7. ,fin(last_ack)\n8. ack(fin_wait_2)\n9. fin,ack(time_wait)\n10. ack,(close)\n11. 2mslsocket\n```\n\n\n![img](/images/img_5a66a577176c8.png)","slug":"tcp-state","updated":"2019-10-21T06:57:42.714Z","photos":[],"link":"","_id":"ck42dyig2008ou9ur9yg3kdkm","content":"<h3 id=\"TCP\"><a href=\"#TCP\" class=\"headerlink\" title=\"TCP\"></a>TCP</h3><ul>\n<li>listenclose</li>\n<li>syn-sent/syn-revd</li>\n<li>established</li>\n<li>fin_wait_1/close_wait</li>\n<li>fin_wait_2/last_ack</li>\n<li>time_wait/close</li>\n</ul>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">LISTEN</span>\t        <span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">SYN_SENT</span>\t<span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"meta\">SYN-RECEIVED</span>\t<span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">ESTABLISHED</span>\t<span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">FIN_WAIT_1</span>\t<span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">FIN_WAIT_2</span>\t<span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">CLOSE_WAIT</span>\t<span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">CLOSING</span>\t        <span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">LAST_ACK</span>\t<span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">TIME_WAIT</span>\t<span class=\"string\">TCP</span></span><br></pre></td></tr></table></figure>\n\n<p>TcpC/STCP</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.</span> (close)syn(<span class=\"section\">listen</span>),ack(syn_sent)</span><br><span class=\"line\"><span class=\"number\">2.</span> syn,ack/syn(syn_rec)</span><br><span class=\"line\"><span class=\"number\">3.</span> ack(establelished)</span><br><span class=\"line\"><span class=\"number\">4.</span> </span><br><span class=\"line\"><span class=\"number\">5.</span> fin(fin_wait_1)</span><br><span class=\"line\"><span class=\"number\">6.</span> fin,ack(close_wait)</span><br><span class=\"line\"><span class=\"number\">7.</span> ,fin(last_ack)</span><br><span class=\"line\"><span class=\"number\">8.</span> ack(fin_wait_2)</span><br><span class=\"line\"><span class=\"number\">9.</span> fin,ack(time_wait)</span><br><span class=\"line\"><span class=\"number\">10.</span> ack,(close)</span><br><span class=\"line\"><span class=\"number\">11.</span> <span class=\"number\">2</span>mslsocket</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/images/img_5a66a577176c8.png\" alt=\"img\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"TCP\"><a href=\"#TCP\" class=\"headerlink\" title=\"TCP\"></a>TCP</h3><ul>\n<li>listenclose</li>\n<li>syn-sent/syn-revd</li>\n<li>established</li>\n<li>fin_wait_1/close_wait</li>\n<li>fin_wait_2/last_ack</li>\n<li>time_wait/close</li>\n</ul>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">LISTEN</span>\t        <span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">SYN_SENT</span>\t<span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"meta\">SYN-RECEIVED</span>\t<span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">ESTABLISHED</span>\t<span class=\"string\"></span></span><br><span class=\"line\"><span class=\"attr\">FIN_WAIT_1</span>\t<span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">FIN_WAIT_2</span>\t<span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">CLOSE_WAIT</span>\t<span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">CLOSING</span>\t        <span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">LAST_ACK</span>\t<span class=\"string\">TCP</span></span><br><span class=\"line\"><span class=\"attr\">TIME_WAIT</span>\t<span class=\"string\">TCP</span></span><br></pre></td></tr></table></figure>\n\n<p>TcpC/STCP</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.</span> (close)syn(<span class=\"section\">listen</span>),ack(syn_sent)</span><br><span class=\"line\"><span class=\"number\">2.</span> syn,ack/syn(syn_rec)</span><br><span class=\"line\"><span class=\"number\">3.</span> ack(establelished)</span><br><span class=\"line\"><span class=\"number\">4.</span> </span><br><span class=\"line\"><span class=\"number\">5.</span> fin(fin_wait_1)</span><br><span class=\"line\"><span class=\"number\">6.</span> fin,ack(close_wait)</span><br><span class=\"line\"><span class=\"number\">7.</span> ,fin(last_ack)</span><br><span class=\"line\"><span class=\"number\">8.</span> ack(fin_wait_2)</span><br><span class=\"line\"><span class=\"number\">9.</span> fin,ack(time_wait)</span><br><span class=\"line\"><span class=\"number\">10.</span> ack,(close)</span><br><span class=\"line\"><span class=\"number\">11.</span> <span class=\"number\">2</span>mslsocket</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<p><img src=\"/images/img_5a66a577176c8.png\" alt=\"img\"></p>\n"},{"layout":"post","title":"TCP TIME_WAIT","published":1,"author":"xiemx","comments":1,"date":"2018-01-23T02:01:21.000Z","_content":"#### TIME_WAIT\n\n1. TCP\n\n    ACKFINACKFINRSTTCPTIME_WAITACK\n\n2. \n\n    1.1.1.111112.2.2.22222TCPIPTCPTCPTIME_WAITTIME_WAITMSLTCPMSLMSLTCP","source":"_posts/tcp-time_wait.md","raw":"---\nlayout: post\ntitle: TCP TIME_WAIT\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2018-01-23 10:01:21\ntags: [ tcp, linux ]\ncategories:\n    - linux\n# permalink: /2018/01/23/tcp-time_wait\n---\n#### TIME_WAIT\n\n1. TCP\n\n    ACKFINACKFINRSTTCPTIME_WAITACK\n\n2. \n\n    1.1.1.111112.2.2.22222TCPIPTCPTCPTIME_WAITTIME_WAITMSLTCPMSLMSLTCP","slug":"tcp-time_wait","updated":"2019-10-19T07:40:03.304Z","photos":[],"link":"","_id":"ck42dyig5008su9ur1xno1qs7","content":"<h4 id=\"TIME-WAIT\"><a href=\"#TIME-WAIT\" class=\"headerlink\" title=\"TIME_WAIT\"></a>TIME_WAIT</h4><ol>\n<li><p>TCP</p>\n<p> ACKFINACKFINRSTTCPTIME_WAITACK</p>\n</li>\n<li><p></p>\n<p> 1.1.1.111112.2.2.22222TCPIPTCPTCPTIME_WAITTIME_WAITMSLTCPMSLMSLTCP</p>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"TIME-WAIT\"><a href=\"#TIME-WAIT\" class=\"headerlink\" title=\"TIME_WAIT\"></a>TIME_WAIT</h4><ol>\n<li><p>TCP</p>\n<p> ACKFINACKFINRSTTCPTIME_WAITACK</p>\n</li>\n<li><p></p>\n<p> 1.1.1.111112.2.2.22222TCPIPTCPTCPTIME_WAITTIME_WAITMSLTCPMSLMSLTCP</p>\n</li>\n</ol>\n"},{"layout":"post","title":"Tomcat","published":1,"author":"xiemx","comments":1,"date":"2016-08-17T20:08:40.000Z","_content":"1.tomcat`http://localhost:8080`\n\ntomcatserver.xmlconf:\n```xml\n<Host name=\"localhost\" appBase=\"webapps\"\n       unpackWARs=\"true\" autoDeploy=\"true\"\n       xmlValidation=\"false\" xmlNamespaceAware=\"false\"></Host>\n```\n</Host>:\n```xml\n<Context path=\"\" docBase=\"/home/tomcat/\" debug=\"0\"/>\n```\n/home/tomcat/tomcat`http://localhost:8080``/home/tomcat/`\n\n2.tomcatweb.xmlconf\n```xml\n    <welcome-file-list>\n        <welcome-file>index.html</welcome-file>\n        <welcome-file>index.htm</welcome-file>\n        <welcome-file>index.jsp</welcome-file>\n    </welcome-file-list>\n```\ntomcat3tomcat3tomcatmain.jsp\n```xml\n    <welcome-file-list>\n        <welcome-file>main.jsp</welcome-file>\n        <welcome-file>index.html</welcome-file>\n        <welcome-file>index.htm</welcome-file>\n        <welcome-file>index.jsp</welcome-file>\n    </welcome-file-list>\n```","source":"_posts/tomcat-change-webroot.md","raw":"---\nlayout: post\ntitle: Tomcat\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-08-18 04:08:40\ntags: [ tomcat, webserver, http ]\ncategories:\n    - tomcat\n# permalink: '/2016/08/18/tomcat-change-webroot'\n---\n1.tomcat`http://localhost:8080`\n\ntomcatserver.xmlconf:\n```xml\n<Host name=\"localhost\" appBase=\"webapps\"\n       unpackWARs=\"true\" autoDeploy=\"true\"\n       xmlValidation=\"false\" xmlNamespaceAware=\"false\"></Host>\n```\n</Host>:\n```xml\n<Context path=\"\" docBase=\"/home/tomcat/\" debug=\"0\"/>\n```\n/home/tomcat/tomcat`http://localhost:8080``/home/tomcat/`\n\n2.tomcatweb.xmlconf\n```xml\n    <welcome-file-list>\n        <welcome-file>index.html</welcome-file>\n        <welcome-file>index.htm</welcome-file>\n        <welcome-file>index.jsp</welcome-file>\n    </welcome-file-list>\n```\ntomcat3tomcat3tomcatmain.jsp\n```xml\n    <welcome-file-list>\n        <welcome-file>main.jsp</welcome-file>\n        <welcome-file>index.html</welcome-file>\n        <welcome-file>index.htm</welcome-file>\n        <welcome-file>index.jsp</welcome-file>\n    </welcome-file-list>\n```","slug":"tomcat-change-webroot","updated":"2019-10-19T07:24:46.748Z","photos":[],"link":"","_id":"ck42dyig5008uu9urw2488pjk","content":"<p>1.tomcat<code>http://localhost:8080</code></p>\n<p>tomcatserver.xmlconf:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Host</span> <span class=\"attr\">name</span>=<span class=\"string\">\"localhost\"</span> <span class=\"attr\">appBase</span>=<span class=\"string\">\"webapps\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">unpackWARs</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">autoDeploy</span>=<span class=\"string\">\"true\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlValidation</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">xmlNamespaceAware</span>=<span class=\"string\">\"false\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">Host</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Context</span> <span class=\"attr\">path</span>=<span class=\"string\">\"\"</span> <span class=\"attr\">docBase</span>=<span class=\"string\">\"/home/tomcat/\"</span> <span class=\"attr\">debug</span>=<span class=\"string\">\"0\"</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>/home/tomcat/tomcat<code>http://localhost:8080</code><code>/home/tomcat/</code></p>\n<p>2.tomcatweb.xmlconf</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">welcome-file-list</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>index.html<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>index.htm<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>index.jsp<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">welcome-file-list</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>tomcat3tomcat3tomcatmain.jsp</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">welcome-file-list</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>main.jsp<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>index.html<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>index.htm<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>index.jsp<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">welcome-file-list</span>&gt;</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>1.tomcat<code>http://localhost:8080</code></p>\n<p>tomcatserver.xmlconf:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Host</span> <span class=\"attr\">name</span>=<span class=\"string\">\"localhost\"</span> <span class=\"attr\">appBase</span>=<span class=\"string\">\"webapps\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">unpackWARs</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">autoDeploy</span>=<span class=\"string\">\"true\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlValidation</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">xmlNamespaceAware</span>=<span class=\"string\">\"false\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">Host</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Context</span> <span class=\"attr\">path</span>=<span class=\"string\">\"\"</span> <span class=\"attr\">docBase</span>=<span class=\"string\">\"/home/tomcat/\"</span> <span class=\"attr\">debug</span>=<span class=\"string\">\"0\"</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>/home/tomcat/tomcat<code>http://localhost:8080</code><code>/home/tomcat/</code></p>\n<p>2.tomcatweb.xmlconf</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">welcome-file-list</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>index.html<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>index.htm<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>index.jsp<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">welcome-file-list</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>tomcat3tomcat3tomcatmain.jsp</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">welcome-file-list</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>main.jsp<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>index.html<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>index.htm<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">welcome-file</span>&gt;</span>index.jsp<span class=\"tag\">&lt;/<span class=\"name\">welcome-file</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">welcome-file-list</span>&gt;</span></span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"tomcatPermGen Space","published":1,"author":"xiemx","comments":1,"date":"2016-03-28T21:03:32.000Z","_content":"### \ntomcat`java.lang.OutOfmemoryError:PermGen Space`\n\nPermGen SpaceJVMclassmeteclassloaderheapjavaGCPermGen spaceclassPermGen space\n\n### \nMaxPermSize\n\n TOMCAT_HOME/bin/catalina.bat(Linuxcatalina.sh)echo \"using CATALINA_BASE$CATALINA_BASE\"\n```shell\nset JAVA_OPTS=%JAVA_OPTS% -server -XX:PermSize=128m -XX:MaxPermSize=512m\n```","source":"_posts/tomcat-permgen-space.md","raw":"---\nlayout: post\ntitle: tomcatPermGen Space\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-03-29 05:03:32\ntags: [ tomcat, webserver, http ]\ncategories:\n    - tomcat\n# permalink: '/2016/03/29/tomcat-permgen-space'\n---\n### \ntomcat`java.lang.OutOfmemoryError:PermGen Space`\n\nPermGen SpaceJVMclassmeteclassloaderheapjavaGCPermGen spaceclassPermGen space\n\n### \nMaxPermSize\n\n TOMCAT_HOME/bin/catalina.bat(Linuxcatalina.sh)echo \"using CATALINA_BASE$CATALINA_BASE\"\n```shell\nset JAVA_OPTS=%JAVA_OPTS% -server -XX:PermSize=128m -XX:MaxPermSize=512m\n```","slug":"tomcat-permgen-space","updated":"2019-10-21T06:57:42.570Z","photos":[],"link":"","_id":"ck42dyig7008yu9urtahqsg2f","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>tomcat<code>java.lang.OutOfmemoryError:PermGen Space</code></p>\n<p>PermGen SpaceJVMclassmeteclassloaderheapjavaGCPermGen spaceclassPermGen space</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>MaxPermSize</p>\n<p> TOMCAT_HOME/bin/catalina.bat(Linuxcatalina.sh)echo using CATALINA_BASE$CATALINA_BASE</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set JAVA_OPTS=%JAVA_OPTS% -server -XX:PermSize=128m -XX:MaxPermSize=512m</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>tomcat<code>java.lang.OutOfmemoryError:PermGen Space</code></p>\n<p>PermGen SpaceJVMclassmeteclassloaderheapjavaGCPermGen spaceclassPermGen space</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>MaxPermSize</p>\n<p> TOMCAT_HOME/bin/catalina.bat(Linuxcatalina.sh)echo using CATALINA_BASE$CATALINA_BASE</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set JAVA_OPTS=%JAVA_OPTS% -server -XX:PermSize=128m -XX:MaxPermSize=512m</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"Tomcat","published":1,"author":"xiemx","comments":1,"date":"2016-04-13T01:04:35.000Z","_content":"alias\n```xml\n <Engine name=\"Catalina\" defaultHost=\"localhost\">\n      <!--For clustering, please take a look at documentation at:\n          /docs/cluster-howto.html  (simple how to)\n          /docs/config/cluster.html (reference documentation)\n       -->\n      <!--\n      <Cluster className=\"org.apache.catalina.ha.tcp.SimpleTcpCluster\"/>\n      -->\n      <!-- Use the LockOutRealm to prevent attempts to guess user passwords\n           via a brute-force attack -->\n      <Realm className=\"org.apache.catalina.realm.LockOutRealm\">\n        <!-- This Realm uses the UserDatabase configured in the global JNDI\n             resources under the key \"UserDatabase\".  Any edits\n             that are performed against this UserDatabase are immediately\n             available for use by the Realm.  -->\n        <Realm className=\"org.apache.catalina.realm.UserDatabaseRealm\"\n               resourceName=\"UserDatabase\"/>\n      </Realm>\n        <Host name=\"www.xiemx.com\" debug=\"0\" appBase=\"webapps\" unpackWARs=\"true\" autoDeploy=\"true\" xmlValidation=\"false\" xmlNamespaceAware=\"false\">\n                <Alias>xiemx.com</Alias>\n                <Alias>xx.xiemx.com</Alias>\n                <Alias>yy.xiemx.com</Alias> \n        </Host>\n  </Engine>\n  ```","source":"_posts/tomcat-server-name-alias.md","raw":"---\nlayout: post\ntitle: Tomcat\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-04-13 09:04:35\ntags: [ tomcat, webserver, http ]\ncategories:\n    - tomcat\n# permalink: '/2016/04/13/tomcat%e8%99%9a%e6%8b%9f%e4%b8%bb%e6%9c%ba%e5%88%ab%e5%90%8d%e8%ae%be%e7%bd%ae'\n---\nalias\n```xml\n <Engine name=\"Catalina\" defaultHost=\"localhost\">\n      <!--For clustering, please take a look at documentation at:\n          /docs/cluster-howto.html  (simple how to)\n          /docs/config/cluster.html (reference documentation)\n       -->\n      <!--\n      <Cluster className=\"org.apache.catalina.ha.tcp.SimpleTcpCluster\"/>\n      -->\n      <!-- Use the LockOutRealm to prevent attempts to guess user passwords\n           via a brute-force attack -->\n      <Realm className=\"org.apache.catalina.realm.LockOutRealm\">\n        <!-- This Realm uses the UserDatabase configured in the global JNDI\n             resources under the key \"UserDatabase\".  Any edits\n             that are performed against this UserDatabase are immediately\n             available for use by the Realm.  -->\n        <Realm className=\"org.apache.catalina.realm.UserDatabaseRealm\"\n               resourceName=\"UserDatabase\"/>\n      </Realm>\n        <Host name=\"www.xiemx.com\" debug=\"0\" appBase=\"webapps\" unpackWARs=\"true\" autoDeploy=\"true\" xmlValidation=\"false\" xmlNamespaceAware=\"false\">\n                <Alias>xiemx.com</Alias>\n                <Alias>xx.xiemx.com</Alias>\n                <Alias>yy.xiemx.com</Alias> \n        </Host>\n  </Engine>\n  ```","slug":"tomcat-server-name-alias","updated":"2019-10-21T06:57:42.989Z","photos":[],"link":"","_id":"ck42dyig70090u9urh9tuec8y","content":"<p>alias</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Engine</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Catalina\"</span> <span class=\"attr\">defaultHost</span>=<span class=\"string\">\"localhost\"</span>&gt;</span></span><br><span class=\"line\">     <span class=\"comment\">&lt;!--For clustering, please take a look at documentation at:</span></span><br><span class=\"line\"><span class=\"comment\">         /docs/cluster-howto.html  (simple how to)</span></span><br><span class=\"line\"><span class=\"comment\">         /docs/config/cluster.html (reference documentation)</span></span><br><span class=\"line\"><span class=\"comment\">      --&gt;</span></span><br><span class=\"line\">     <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">     &lt;Cluster className=\"org.apache.catalina.ha.tcp.SimpleTcpCluster\"/&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     --&gt;</span></span><br><span class=\"line\">     <span class=\"comment\">&lt;!-- Use the LockOutRealm to prevent attempts to guess user passwords</span></span><br><span class=\"line\"><span class=\"comment\">          via a brute-force attack --&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">Realm</span> <span class=\"attr\">className</span>=<span class=\"string\">\"org.apache.catalina.realm.LockOutRealm\"</span>&gt;</span></span><br><span class=\"line\">       <span class=\"comment\">&lt;!-- This Realm uses the UserDatabase configured in the global JNDI</span></span><br><span class=\"line\"><span class=\"comment\">            resources under the key \"UserDatabase\".  Any edits</span></span><br><span class=\"line\"><span class=\"comment\">            that are performed against this UserDatabase are immediately</span></span><br><span class=\"line\"><span class=\"comment\">            available for use by the Realm.  --&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">Realm</span> <span class=\"attr\">className</span>=<span class=\"string\">\"org.apache.catalina.realm.UserDatabaseRealm\"</span></span></span><br><span class=\"line\"><span class=\"tag\">              <span class=\"attr\">resourceName</span>=<span class=\"string\">\"UserDatabase\"</span>/&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;/<span class=\"name\">Realm</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">Host</span> <span class=\"attr\">name</span>=<span class=\"string\">\"www.xiemx.com\"</span> <span class=\"attr\">debug</span>=<span class=\"string\">\"0\"</span> <span class=\"attr\">appBase</span>=<span class=\"string\">\"webapps\"</span> <span class=\"attr\">unpackWARs</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">autoDeploy</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">xmlValidation</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">xmlNamespaceAware</span>=<span class=\"string\">\"false\"</span>&gt;</span></span><br><span class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">Alias</span>&gt;</span>xiemx.com<span class=\"tag\">&lt;/<span class=\"name\">Alias</span>&gt;</span></span><br><span class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">Alias</span>&gt;</span>xx.xiemx.com<span class=\"tag\">&lt;/<span class=\"name\">Alias</span>&gt;</span></span><br><span class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">Alias</span>&gt;</span>yy.xiemx.com<span class=\"tag\">&lt;/<span class=\"name\">Alias</span>&gt;</span> </span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">Host</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">Engine</span>&gt;</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>alias</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Engine</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Catalina\"</span> <span class=\"attr\">defaultHost</span>=<span class=\"string\">\"localhost\"</span>&gt;</span></span><br><span class=\"line\">     <span class=\"comment\">&lt;!--For clustering, please take a look at documentation at:</span></span><br><span class=\"line\"><span class=\"comment\">         /docs/cluster-howto.html  (simple how to)</span></span><br><span class=\"line\"><span class=\"comment\">         /docs/config/cluster.html (reference documentation)</span></span><br><span class=\"line\"><span class=\"comment\">      --&gt;</span></span><br><span class=\"line\">     <span class=\"comment\">&lt;!--</span></span><br><span class=\"line\"><span class=\"comment\">     &lt;Cluster className=\"org.apache.catalina.ha.tcp.SimpleTcpCluster\"/&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     --&gt;</span></span><br><span class=\"line\">     <span class=\"comment\">&lt;!-- Use the LockOutRealm to prevent attempts to guess user passwords</span></span><br><span class=\"line\"><span class=\"comment\">          via a brute-force attack --&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">Realm</span> <span class=\"attr\">className</span>=<span class=\"string\">\"org.apache.catalina.realm.LockOutRealm\"</span>&gt;</span></span><br><span class=\"line\">       <span class=\"comment\">&lt;!-- This Realm uses the UserDatabase configured in the global JNDI</span></span><br><span class=\"line\"><span class=\"comment\">            resources under the key \"UserDatabase\".  Any edits</span></span><br><span class=\"line\"><span class=\"comment\">            that are performed against this UserDatabase are immediately</span></span><br><span class=\"line\"><span class=\"comment\">            available for use by the Realm.  --&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">Realm</span> <span class=\"attr\">className</span>=<span class=\"string\">\"org.apache.catalina.realm.UserDatabaseRealm\"</span></span></span><br><span class=\"line\"><span class=\"tag\">              <span class=\"attr\">resourceName</span>=<span class=\"string\">\"UserDatabase\"</span>/&gt;</span></span><br><span class=\"line\">     <span class=\"tag\">&lt;/<span class=\"name\">Realm</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">Host</span> <span class=\"attr\">name</span>=<span class=\"string\">\"www.xiemx.com\"</span> <span class=\"attr\">debug</span>=<span class=\"string\">\"0\"</span> <span class=\"attr\">appBase</span>=<span class=\"string\">\"webapps\"</span> <span class=\"attr\">unpackWARs</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">autoDeploy</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">xmlValidation</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">xmlNamespaceAware</span>=<span class=\"string\">\"false\"</span>&gt;</span></span><br><span class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">Alias</span>&gt;</span>xiemx.com<span class=\"tag\">&lt;/<span class=\"name\">Alias</span>&gt;</span></span><br><span class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">Alias</span>&gt;</span>xx.xiemx.com<span class=\"tag\">&lt;/<span class=\"name\">Alias</span>&gt;</span></span><br><span class=\"line\">               <span class=\"tag\">&lt;<span class=\"name\">Alias</span>&gt;</span>yy.xiemx.com<span class=\"tag\">&lt;/<span class=\"name\">Alias</span>&gt;</span> </span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">Host</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">Engine</span>&gt;</span></span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"Tomcatweb","published":1,"author":"xiemx","comments":1,"date":"2016-01-24T02:01:58.000Z","_content":"tomcatjspwebhtmljspjavajavajdkjavatomcattomcathttp://tomcat.apache.orgjdkoracle`http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html`\n\ntomcattomcattomcat700tomcat/usr/lib/localhome/tomcat/\n\n### tomcat\n\n```shell\n  [root@serverc tomcat]# tar xf apache-tomcat-8.0.24.tar.gz -C /home/tomcat/\n  [root@serverc tomcat]# cd /home/tomcat/apache-tomcat-8.0.24/\n  [root@serverc apache-tomcat-8.0.24]# ls -l\n  drwxr-xr-x 2 root root 4096 Dec 11 14:22 bin #\n  drwxr-xr-x 2 root root 4096 Jul 2 04:23 conf #\n  drwxr-xr-x 2 root root 4096 Dec 11 14:22 lib  #javajar\n  -rw-r--r-- 1 root root 57011 Jul 2 04:23 LICENSE\n  drwxr-xr-x 2 root root   6 Jul 2 04:20 logs  #\n  -rw-r--r-- 1 root root 1444 Jul 2 04:23 NOTICE\n  -rw-r--r-- 1 root root 6741 Jul 2 04:23 RELEASE-NOTES\n  -rw-r--r-- 1 root root 16204 Jul 2 04:23 RUNNING.txt\n  drwxr-xr-x 2 root root  29 Dec 11 14:22 temp  #\n  drwxr-xr-x 7 root root  76 Jul 2 04:21 webapps #\n  drwxr-xr-x 2 root root   6 Jul 2 04:20 work  #\n```\n\n### tomcat\n```shell\nbintomcatjdkjdk:\nexport JAVA\\_HOME=\"/usr/java/jdk1.7.0\\_79/\" \ntomcat\nexport CATALINA\\_HOME=\"/home/tomcat/apache-tomcat-8.0.24/\"\ntomcat\nexport CATALINA\\_BASE=\"/home/tomcat/apache-tomcat-8.0.24/\"\ntomcatstartup.shtomcattcp/8080shutdown.sh\n\n  [root@serverc ~]# cd /home/tomcat/apache-tomcat-8.0.24/bin/\n  [root@serverc bin]# ./startup.sh\n  [root@serverc bin]# ps -ef | grep java\n  [root@serverc bin]# netstat -ltunp | grep 8080\n  tcp6    0   0 :::8080         :::*          LISTEN   1102/java\n\n```\ntomcat\n\n8080http://192.168.17.10:8080 tomcat\n\n![tomcat](/images/tomcat-300x84.png)","source":"_posts/tomcat-server.md","raw":"---\nlayout: post\ntitle: Tomcatweb\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-01-24 10:01:58\ntags: [ tomcat, webserver, http]\ncategories:\n    - tomcat\n# permalink: '/2016/01/24/tomcat%e6%90%ad%e5%bb%baweb%e6%9c%8d%e5%8a%a1%e5%99%a8'\n---\ntomcatjspwebhtmljspjavajavajdkjavatomcattomcathttp://tomcat.apache.orgjdkoracle`http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html`\n\ntomcattomcattomcat700tomcat/usr/lib/localhome/tomcat/\n\n### tomcat\n\n```shell\n  [root@serverc tomcat]# tar xf apache-tomcat-8.0.24.tar.gz -C /home/tomcat/\n  [root@serverc tomcat]# cd /home/tomcat/apache-tomcat-8.0.24/\n  [root@serverc apache-tomcat-8.0.24]# ls -l\n  drwxr-xr-x 2 root root 4096 Dec 11 14:22 bin #\n  drwxr-xr-x 2 root root 4096 Jul 2 04:23 conf #\n  drwxr-xr-x 2 root root 4096 Dec 11 14:22 lib  #javajar\n  -rw-r--r-- 1 root root 57011 Jul 2 04:23 LICENSE\n  drwxr-xr-x 2 root root   6 Jul 2 04:20 logs  #\n  -rw-r--r-- 1 root root 1444 Jul 2 04:23 NOTICE\n  -rw-r--r-- 1 root root 6741 Jul 2 04:23 RELEASE-NOTES\n  -rw-r--r-- 1 root root 16204 Jul 2 04:23 RUNNING.txt\n  drwxr-xr-x 2 root root  29 Dec 11 14:22 temp  #\n  drwxr-xr-x 7 root root  76 Jul 2 04:21 webapps #\n  drwxr-xr-x 2 root root   6 Jul 2 04:20 work  #\n```\n\n### tomcat\n```shell\nbintomcatjdkjdk:\nexport JAVA\\_HOME=\"/usr/java/jdk1.7.0\\_79/\" \ntomcat\nexport CATALINA\\_HOME=\"/home/tomcat/apache-tomcat-8.0.24/\"\ntomcat\nexport CATALINA\\_BASE=\"/home/tomcat/apache-tomcat-8.0.24/\"\ntomcatstartup.shtomcattcp/8080shutdown.sh\n\n  [root@serverc ~]# cd /home/tomcat/apache-tomcat-8.0.24/bin/\n  [root@serverc bin]# ./startup.sh\n  [root@serverc bin]# ps -ef | grep java\n  [root@serverc bin]# netstat -ltunp | grep 8080\n  tcp6    0   0 :::8080         :::*          LISTEN   1102/java\n\n```\ntomcat\n\n8080http://192.168.17.10:8080 tomcat\n\n![tomcat](/images/tomcat-300x84.png)","slug":"tomcat-server","updated":"2019-10-21T06:57:43.018Z","photos":[],"link":"","_id":"ck42dyiga0094u9ur94n3k7ek","content":"<p>tomcatjspwebhtmljspjavajavajdkjavatomcattomcat<a href=\"http://tomcat.apache.orgjdkoracle`http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html`\" target=\"_blank\" rel=\"noopener\">http://tomcat.apache.orgjdkoracle`http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html`</a></p>\n<p>tomcattomcattomcat700tomcat/usr/lib/localhome/tomcat/</p>\n<h3 id=\"tomcat\"><a href=\"#tomcat\" class=\"headerlink\" title=\"tomcat\"></a>tomcat</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@serverc tomcat]# tar xf apache-tomcat-8.0.24.tar.gz -C /home/tomcat/</span><br><span class=\"line\">[root@serverc tomcat]# cd /home/tomcat/apache-tomcat-8.0.24/</span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# ls -l</span><br><span class=\"line\">drwxr-xr-x 2 root root 4096 Dec 11 14:22 bin #</span><br><span class=\"line\">drwxr-xr-x 2 root root 4096 Jul 2 04:23 conf #</span><br><span class=\"line\">drwxr-xr-x 2 root root 4096 Dec 11 14:22 lib  #javajar</span><br><span class=\"line\">-rw-r--r-- 1 root root 57011 Jul 2 04:23 LICENSE</span><br><span class=\"line\">drwxr-xr-x 2 root root   6 Jul 2 04:20 logs  #</span><br><span class=\"line\">-rw-r--r-- 1 root root 1444 Jul 2 04:23 NOTICE</span><br><span class=\"line\">-rw-r--r-- 1 root root 6741 Jul 2 04:23 RELEASE-NOTES</span><br><span class=\"line\">-rw-r--r-- 1 root root 16204 Jul 2 04:23 RUNNING.txt</span><br><span class=\"line\">drwxr-xr-x 2 root root  29 Dec 11 14:22 temp  #</span><br><span class=\"line\">drwxr-xr-x 7 root root  76 Jul 2 04:21 webapps #</span><br><span class=\"line\">drwxr-xr-x 2 root root   6 Jul 2 04:20 work  #</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"tomcat\"><a href=\"#tomcat\" class=\"headerlink\" title=\"tomcat\"></a>tomcat</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bintomcatjdkjdk:</span><br><span class=\"line\">export JAVA\\_HOME=\"/usr/java/jdk1.7.0\\_79/\" </span><br><span class=\"line\">tomcat</span><br><span class=\"line\">export CATALINA\\_HOME=\"/home/tomcat/apache-tomcat-8.0.24/\"</span><br><span class=\"line\">tomcat</span><br><span class=\"line\">export CATALINA\\_BASE=\"/home/tomcat/apache-tomcat-8.0.24/\"</span><br><span class=\"line\">tomcatstartup.shtomcattcp/8080shutdown.sh</span><br><span class=\"line\"></span><br><span class=\"line\">  [root@serverc ~]# cd /home/tomcat/apache-tomcat-8.0.24/bin/</span><br><span class=\"line\">  [root@serverc bin]# ./startup.sh</span><br><span class=\"line\">  [root@serverc bin]# ps -ef | grep java</span><br><span class=\"line\">  [root@serverc bin]# netstat -ltunp | grep 8080</span><br><span class=\"line\">  tcp6    0   0 :::8080         :::*          LISTEN   1102/java</span><br></pre></td></tr></table></figure>\n\n<p>tomcat</p>\n<p>8080<a href=\"http://192.168.17.10:8080\" target=\"_blank\" rel=\"noopener\">http://192.168.17.10:8080</a> tomcat</p>\n<p><img src=\"/images/tomcat-300x84.png\" alt=\"tomcat\"></p>\n","site":{"data":{}},"excerpt":"","more":"<p>tomcatjspwebhtmljspjavajavajdkjavatomcattomcat<a href=\"http://tomcat.apache.orgjdkoracle`http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html`\" target=\"_blank\" rel=\"noopener\">http://tomcat.apache.orgjdkoracle`http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html`</a></p>\n<p>tomcattomcattomcat700tomcat/usr/lib/localhome/tomcat/</p>\n<h3 id=\"tomcat\"><a href=\"#tomcat\" class=\"headerlink\" title=\"tomcat\"></a>tomcat</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@serverc tomcat]# tar xf apache-tomcat-8.0.24.tar.gz -C /home/tomcat/</span><br><span class=\"line\">[root@serverc tomcat]# cd /home/tomcat/apache-tomcat-8.0.24/</span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# ls -l</span><br><span class=\"line\">drwxr-xr-x 2 root root 4096 Dec 11 14:22 bin #</span><br><span class=\"line\">drwxr-xr-x 2 root root 4096 Jul 2 04:23 conf #</span><br><span class=\"line\">drwxr-xr-x 2 root root 4096 Dec 11 14:22 lib  #javajar</span><br><span class=\"line\">-rw-r--r-- 1 root root 57011 Jul 2 04:23 LICENSE</span><br><span class=\"line\">drwxr-xr-x 2 root root   6 Jul 2 04:20 logs  #</span><br><span class=\"line\">-rw-r--r-- 1 root root 1444 Jul 2 04:23 NOTICE</span><br><span class=\"line\">-rw-r--r-- 1 root root 6741 Jul 2 04:23 RELEASE-NOTES</span><br><span class=\"line\">-rw-r--r-- 1 root root 16204 Jul 2 04:23 RUNNING.txt</span><br><span class=\"line\">drwxr-xr-x 2 root root  29 Dec 11 14:22 temp  #</span><br><span class=\"line\">drwxr-xr-x 7 root root  76 Jul 2 04:21 webapps #</span><br><span class=\"line\">drwxr-xr-x 2 root root   6 Jul 2 04:20 work  #</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"tomcat\"><a href=\"#tomcat\" class=\"headerlink\" title=\"tomcat\"></a>tomcat</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bintomcatjdkjdk:</span><br><span class=\"line\">export JAVA\\_HOME=\"/usr/java/jdk1.7.0\\_79/\" </span><br><span class=\"line\">tomcat</span><br><span class=\"line\">export CATALINA\\_HOME=\"/home/tomcat/apache-tomcat-8.0.24/\"</span><br><span class=\"line\">tomcat</span><br><span class=\"line\">export CATALINA\\_BASE=\"/home/tomcat/apache-tomcat-8.0.24/\"</span><br><span class=\"line\">tomcatstartup.shtomcattcp/8080shutdown.sh</span><br><span class=\"line\"></span><br><span class=\"line\">  [root@serverc ~]# cd /home/tomcat/apache-tomcat-8.0.24/bin/</span><br><span class=\"line\">  [root@serverc bin]# ./startup.sh</span><br><span class=\"line\">  [root@serverc bin]# ps -ef | grep java</span><br><span class=\"line\">  [root@serverc bin]# netstat -ltunp | grep 8080</span><br><span class=\"line\">  tcp6    0   0 :::8080         :::*          LISTEN   1102/java</span><br></pre></td></tr></table></figure>\n\n<p>tomcat</p>\n<p>8080<a href=\"http://192.168.17.10:8080\" target=\"_blank\" rel=\"noopener\">http://192.168.17.10:8080</a> tomcat</p>\n<p><img src=\"/images/tomcat-300x84.png\" alt=\"tomcat\"></p>\n"},{"layout":"post","title":"Tomcat","published":1,"author":"xiemx","comments":1,"date":"2016-01-29T20:01:28.000Z","_content":"1.tomcattomcatconfserver.xml\n\n```shell\n  [root@serverc ~]# cd /home/tomcat/apache-tomcat-8.0.24/conf/ \n  [root@serverc conf]# ls -l server.xml \n  -rw------- 1 tomcat root 6458 Jul 2 04:23 server.xml\n```\n\n2.hosttomcat`www.tomcat1.com``www.tomcat2.com``appbase`tomcat`name``appBase``uppackwars``autoDeploy`\n\n```xml\n<Host name=\"www.tomcat1.com\"  appBase=\"tomcat1.com\"\nunpackWARs=\"true\" autoDeploy=\"true\">\n<Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"logs\"\nprefix=\"localhost_access_log\" suffix=\".txt\"\npattern=\"%h %l %u %t \"%r\" %s %b\" />\n</Host>\n<Host name=\"www.tomcat2.com\"  appBase=\"tomcat2.com\"\nunpackWARs=\"true\" autoDeploy=\"true\">\n<Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"logs\"\nprefix=\"localhost_access_log\" suffix=\".txt\"\npattern=\"%h %l %u %t \"%r\" %s %b\" />\n</Host>\n```\n\n3.tomcatappBaseappBaseROOTROOT\n```shell\n  [root@serverc conf]# cd /home/tomcat/apache-tomcat-8.0.24/ \n  [root@serverc apache-tomcat-8.0.24]# mkdir tomcat1.com/ \n  [root@serverc apache-tomcat-8.0.24]# cd tomcat1.com/ \n  [root@serverc tomcat1.com]# mkdir ROOT \n  [root@serverc tomcat1.com]# echo tomcat1 > ROOT/index.html \n  [root@serverc tomcat1.com]# cd ../ \n  [root@serverc apache-tomcat-8.0.24]# mkdir tomcat2.com \n  [root@serverc apache-tomcat-8.0.24]# cd tomcat2.com \n  [root@serverc tomcat2.com]# mkdir ROOT \n  [root@serverc tomcat2.com]# echo tomcat2 > ROOT/index.html\n```\n\n4.tomcat\n\n```shell\n  [root@serverc tomcat2.com]# /etc/init.d/tomcat stop\n  [root@serverc tomcat2.com]# /etc/init.d/tomcat start\n```\n\n5.client\n\n```shell\n  [root@workstation ~]# echo 172.25.41.10 www.tomcat1.com >> /etc/hosts \n  [root@workstation ~]# echo 172.25.41.10 www.tomcat2.com >> /etc/hosts\n  [root@workstation ~]# curl www.tomcat1.com:8080\n  tomcat1\n  [root@workstation ~]# curl www.tomcat2.com:8080\n  tomcat2\n```\n ","source":"_posts/tomcat-virtual-host.md","raw":"---\nlayout: post\ntitle: Tomcat\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-01-30 04:01:28\ntags: [ tomcat, http, webserver ]\ncategories:\n    - tomcat\n# permalink: '/2016/01/30/tomcat-virtual-host'\n---\n1.tomcattomcatconfserver.xml\n\n```shell\n  [root@serverc ~]# cd /home/tomcat/apache-tomcat-8.0.24/conf/ \n  [root@serverc conf]# ls -l server.xml \n  -rw------- 1 tomcat root 6458 Jul 2 04:23 server.xml\n```\n\n2.hosttomcat`www.tomcat1.com``www.tomcat2.com``appbase`tomcat`name``appBase``uppackwars``autoDeploy`\n\n```xml\n<Host name=\"www.tomcat1.com\"  appBase=\"tomcat1.com\"\nunpackWARs=\"true\" autoDeploy=\"true\">\n<Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"logs\"\nprefix=\"localhost_access_log\" suffix=\".txt\"\npattern=\"%h %l %u %t \"%r\" %s %b\" />\n</Host>\n<Host name=\"www.tomcat2.com\"  appBase=\"tomcat2.com\"\nunpackWARs=\"true\" autoDeploy=\"true\">\n<Valve className=\"org.apache.catalina.valves.AccessLogValve\" directory=\"logs\"\nprefix=\"localhost_access_log\" suffix=\".txt\"\npattern=\"%h %l %u %t \"%r\" %s %b\" />\n</Host>\n```\n\n3.tomcatappBaseappBaseROOTROOT\n```shell\n  [root@serverc conf]# cd /home/tomcat/apache-tomcat-8.0.24/ \n  [root@serverc apache-tomcat-8.0.24]# mkdir tomcat1.com/ \n  [root@serverc apache-tomcat-8.0.24]# cd tomcat1.com/ \n  [root@serverc tomcat1.com]# mkdir ROOT \n  [root@serverc tomcat1.com]# echo tomcat1 > ROOT/index.html \n  [root@serverc tomcat1.com]# cd ../ \n  [root@serverc apache-tomcat-8.0.24]# mkdir tomcat2.com \n  [root@serverc apache-tomcat-8.0.24]# cd tomcat2.com \n  [root@serverc tomcat2.com]# mkdir ROOT \n  [root@serverc tomcat2.com]# echo tomcat2 > ROOT/index.html\n```\n\n4.tomcat\n\n```shell\n  [root@serverc tomcat2.com]# /etc/init.d/tomcat stop\n  [root@serverc tomcat2.com]# /etc/init.d/tomcat start\n```\n\n5.client\n\n```shell\n  [root@workstation ~]# echo 172.25.41.10 www.tomcat1.com >> /etc/hosts \n  [root@workstation ~]# echo 172.25.41.10 www.tomcat2.com >> /etc/hosts\n  [root@workstation ~]# curl www.tomcat1.com:8080\n  tomcat1\n  [root@workstation ~]# curl www.tomcat2.com:8080\n  tomcat2\n```\n ","slug":"tomcat-virtual-host","updated":"2019-10-19T07:20:12.516Z","photos":[],"link":"","_id":"ck42dyigb0097u9ur3m8l5chp","content":"<p>1.tomcattomcatconfserver.xml</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@serverc ~]# cd /home/tomcat/apache-tomcat-8.0.24/conf/ </span><br><span class=\"line\">[root@serverc conf]# ls -l server.xml </span><br><span class=\"line\">-rw------- 1 tomcat root 6458 Jul 2 04:23 server.xml</span><br></pre></td></tr></table></figure>\n\n<p>2.hosttomcat<code>www.tomcat1.com</code><code>www.tomcat2.com</code><code>appbase</code>tomcat<code>name</code><code>appBase</code><code>uppackwars</code><code>autoDeploy</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Host</span> <span class=\"attr\">name</span>=<span class=\"string\">\"www.tomcat1.com\"</span>  <span class=\"attr\">appBase</span>=<span class=\"string\">\"tomcat1.com\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">unpackWARs</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">autoDeploy</span>=<span class=\"string\">\"true\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Valve</span> <span class=\"attr\">className</span>=<span class=\"string\">\"org.apache.catalina.valves.AccessLogValve\"</span> <span class=\"attr\">directory</span>=<span class=\"string\">\"logs\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">prefix</span>=<span class=\"string\">\"localhost_access_log\"</span> <span class=\"attr\">suffix</span>=<span class=\"string\">\".txt\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">pattern</span>=<span class=\"string\">\"%h %l %u %t \"</span>%<span class=\"attr\">r</span>\" %<span class=\"attr\">s</span> %<span class=\"attr\">b</span>\" /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Host</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Host</span> <span class=\"attr\">name</span>=<span class=\"string\">\"www.tomcat2.com\"</span>  <span class=\"attr\">appBase</span>=<span class=\"string\">\"tomcat2.com\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">unpackWARs</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">autoDeploy</span>=<span class=\"string\">\"true\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Valve</span> <span class=\"attr\">className</span>=<span class=\"string\">\"org.apache.catalina.valves.AccessLogValve\"</span> <span class=\"attr\">directory</span>=<span class=\"string\">\"logs\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">prefix</span>=<span class=\"string\">\"localhost_access_log\"</span> <span class=\"attr\">suffix</span>=<span class=\"string\">\".txt\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">pattern</span>=<span class=\"string\">\"%h %l %u %t \"</span>%<span class=\"attr\">r</span>\" %<span class=\"attr\">s</span> %<span class=\"attr\">b</span>\" /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Host</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>3.tomcatappBaseappBaseROOTROOT</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@serverc conf]# cd /home/tomcat/apache-tomcat-8.0.24/ </span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# mkdir tomcat1.com/ </span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# cd tomcat1.com/ </span><br><span class=\"line\">[root@serverc tomcat1.com]# mkdir ROOT </span><br><span class=\"line\">[root@serverc tomcat1.com]# echo tomcat1 &gt; ROOT/index.html </span><br><span class=\"line\">[root@serverc tomcat1.com]# cd ../ </span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# mkdir tomcat2.com </span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# cd tomcat2.com </span><br><span class=\"line\">[root@serverc tomcat2.com]# mkdir ROOT </span><br><span class=\"line\">[root@serverc tomcat2.com]# echo tomcat2 &gt; ROOT/index.html</span><br></pre></td></tr></table></figure>\n\n<p>4.tomcat</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@serverc tomcat2.com]# /etc/init.d/tomcat stop</span><br><span class=\"line\">[root@serverc tomcat2.com]# /etc/init.d/tomcat start</span><br></pre></td></tr></table></figure>\n\n<p>5.client</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@workstation ~]# echo 172.25.41.10 www.tomcat1.com &gt;&gt; /etc/hosts </span><br><span class=\"line\">[root@workstation ~]# echo 172.25.41.10 www.tomcat2.com &gt;&gt; /etc/hosts</span><br><span class=\"line\">[root@workstation ~]# curl www.tomcat1.com:8080</span><br><span class=\"line\">tomcat1</span><br><span class=\"line\">[root@workstation ~]# curl www.tomcat2.com:8080</span><br><span class=\"line\">tomcat2</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p>1.tomcattomcatconfserver.xml</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@serverc ~]# cd /home/tomcat/apache-tomcat-8.0.24/conf/ </span><br><span class=\"line\">[root@serverc conf]# ls -l server.xml </span><br><span class=\"line\">-rw------- 1 tomcat root 6458 Jul 2 04:23 server.xml</span><br></pre></td></tr></table></figure>\n\n<p>2.hosttomcat<code>www.tomcat1.com</code><code>www.tomcat2.com</code><code>appbase</code>tomcat<code>name</code><code>appBase</code><code>uppackwars</code><code>autoDeploy</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Host</span> <span class=\"attr\">name</span>=<span class=\"string\">\"www.tomcat1.com\"</span>  <span class=\"attr\">appBase</span>=<span class=\"string\">\"tomcat1.com\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">unpackWARs</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">autoDeploy</span>=<span class=\"string\">\"true\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Valve</span> <span class=\"attr\">className</span>=<span class=\"string\">\"org.apache.catalina.valves.AccessLogValve\"</span> <span class=\"attr\">directory</span>=<span class=\"string\">\"logs\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">prefix</span>=<span class=\"string\">\"localhost_access_log\"</span> <span class=\"attr\">suffix</span>=<span class=\"string\">\".txt\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">pattern</span>=<span class=\"string\">\"%h %l %u %t \"</span>%<span class=\"attr\">r</span>\" %<span class=\"attr\">s</span> %<span class=\"attr\">b</span>\" /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Host</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Host</span> <span class=\"attr\">name</span>=<span class=\"string\">\"www.tomcat2.com\"</span>  <span class=\"attr\">appBase</span>=<span class=\"string\">\"tomcat2.com\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">unpackWARs</span>=<span class=\"string\">\"true\"</span> <span class=\"attr\">autoDeploy</span>=<span class=\"string\">\"true\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Valve</span> <span class=\"attr\">className</span>=<span class=\"string\">\"org.apache.catalina.valves.AccessLogValve\"</span> <span class=\"attr\">directory</span>=<span class=\"string\">\"logs\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">prefix</span>=<span class=\"string\">\"localhost_access_log\"</span> <span class=\"attr\">suffix</span>=<span class=\"string\">\".txt\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">pattern</span>=<span class=\"string\">\"%h %l %u %t \"</span>%<span class=\"attr\">r</span>\" %<span class=\"attr\">s</span> %<span class=\"attr\">b</span>\" /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Host</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>3.tomcatappBaseappBaseROOTROOT</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@serverc conf]# cd /home/tomcat/apache-tomcat-8.0.24/ </span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# mkdir tomcat1.com/ </span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# cd tomcat1.com/ </span><br><span class=\"line\">[root@serverc tomcat1.com]# mkdir ROOT </span><br><span class=\"line\">[root@serverc tomcat1.com]# echo tomcat1 &gt; ROOT/index.html </span><br><span class=\"line\">[root@serverc tomcat1.com]# cd ../ </span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# mkdir tomcat2.com </span><br><span class=\"line\">[root@serverc apache-tomcat-8.0.24]# cd tomcat2.com </span><br><span class=\"line\">[root@serverc tomcat2.com]# mkdir ROOT </span><br><span class=\"line\">[root@serverc tomcat2.com]# echo tomcat2 &gt; ROOT/index.html</span><br></pre></td></tr></table></figure>\n\n<p>4.tomcat</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@serverc tomcat2.com]# /etc/init.d/tomcat stop</span><br><span class=\"line\">[root@serverc tomcat2.com]# /etc/init.d/tomcat start</span><br></pre></td></tr></table></figure>\n\n<p>5.client</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@workstation ~]# echo 172.25.41.10 www.tomcat1.com &gt;&gt; /etc/hosts </span><br><span class=\"line\">[root@workstation ~]# echo 172.25.41.10 www.tomcat2.com &gt;&gt; /etc/hosts</span><br><span class=\"line\">[root@workstation ~]# curl www.tomcat1.com:8080</span><br><span class=\"line\">tomcat1</span><br><span class=\"line\">[root@workstation ~]# curl www.tomcat2.com:8080</span><br><span class=\"line\">tomcat2</span><br></pre></td></tr></table></figure>\n\n"},{"layout":"post","title":"","published":1,"author":"xiemx","comments":1,"date":"2016-01-30T21:01:30.000Z","_content":"\n  \nA.Serializable\n  \nB.Repeatable Read\n  \nC.Read Commited\n  \nD.Read Uncommitted\n","source":"_posts/transaction-isolation-level.md","raw":"---\nlayout: post\ntitle: \npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-01-31 05:01:30\ntags: [ mysql ]\ncategories:\n    - mysql\n# permalink: '/2016/01/31/transaction-isolation-level'\n---\n\n  \nA.Serializable\n  \nB.Repeatable Read\n  \nC.Read Commited\n  \nD.Read Uncommitted\n","slug":"transaction-isolation-level","updated":"2019-10-22T06:48:18.709Z","photos":[],"link":"","_id":"ck42dyigd009cu9uraae46azw","content":"<p></p>\n<p>A.Serializable</p>\n<p>B.Repeatable Read</p>\n<p>C.Read Commited</p>\n<p>D.Read Uncommitted</p>\n","site":{"data":{}},"excerpt":"","more":"<p></p>\n<p>A.Serializable</p>\n<p>B.Repeatable Read</p>\n<p>C.Read Commited</p>\n<p>D.Read Uncommitted</p>\n"},{"layout":"post","title":"twemproxyredis/memcache","author":"xiemx","comments":1,"date":"2017-02-08T21:02:12.000Z","_content":"twemproxymemcachereids\n\n\n\t`A fast, light-weight proxy for memcached and redis`\n\n### \n```shell\n$ apt-get install libtool automake -y\n$ git clone https://github.com/twitter/twemproxy.git\n$ cd twemproxy\n$ autoreconf -fvi\n$ ./configure\n$ make\n$ src/nutcracker -h\n\n\nroot@vagrant-ubuntu-trusty-64:~# nutcracker -h\nThis is nutcracker-0.4.1\n\nUsage: nutcracker [-?hVdDt] [-v verbosity level] [-o output file]\n                  [-c conf file] [-s stats port] [-a stats addr]\n                  [-i stats interval] [-p pid file] [-m mbuf size]\n\nOptions:\n  -h, --help             : this help\n  -V, --version          : show version and exit\n  -t, --test-conf        : test configuration for syntax errors and exit\n  -d, --daemonize        : run as a daemon\n  -D, --describe-stats   : print stats description and exit\n  -v, --verbose=N        : set logging level (default: 5, min: 0, max: 11)\n  -o, --output=S         : set logging file (default: stderr)\n  -c, --conf-file=S      : set configuration file (default: conf/nutcracker.yml)\n  -s, --stats-port=N     : set stats monitoring port (default: 22222)\n  -a, --stats-addr=S     : set stats monitoring ip (default: 0.0.0.0)\n  -i, --stats-interval=N : set stats aggregation interval in msec (default: 30000 msec)\n  -p, --pid-file=S       : set pid file (default: off)\n  -m, --mbuf-size=N      : set size of mbuf chunk in bytes (default: 16384 bytes)\n```\n\n  \n### \n```shell\n#tweaproxymemcachedredisconf/\nvagrant@memcache-server:~$ cat nutcracker.yml\nmemcache:\n  listen: 127.0.0.1:11211\n  hash: fnv1a_64\n  distribution: ketama\n  auto_eject_hosts: true\n  server_retry_timeout: 2000\n  server_failure_limit: 1\n  servers:\n   - 127.0.0.1:11221:1\n   - 127.0.0.1:11222:1\n   - 127.0.0.1:11223:1\n\n#memcached\nvagrant@memcache-server:~$ ps -ef | grep memcache\nvagrant  17934     1  0 09:07 ?        00:00:00 memcached -d -p 11221\nvagrant  17942     1  0 09:07 ?        00:00:00 memcached -d -p 11222\nvagrant  17950     1  0 09:07 ?        00:00:00 memcached -d -p 11223\nvagrant  18295 18083  0 09:20 pts/0    00:00:00 grep --color=auto memcache\n\nvagrant@memcache-server:~$ nutcracker -c nutcracker.yml -d\n\nvagrant@memcache-server:~$ telnet localhost 11211\nTrying 127.0.0.1...\nConnected to localhost.\nEscape character is '^]'.\nset test 0 0 1\n1\nSTORED\nget test\nVALUE test 0 1\n1\nEND\n```","source":"_posts/twemproxu.md","raw":"---\nlayout: post\ntitle: twemproxyredis/memcache\nauthor: xiemx\ncomments: true\ndate: 2017-02-09 05:02:12\ntags: [ memcached, redis, twemproxy, cluster ]\ncategories:\n    - memcached\n    - redis\n# permalink: /2017/02/09/twemproxy\n---\ntwemproxymemcachereids\n\n\n\t`A fast, light-weight proxy for memcached and redis`\n\n### \n```shell\n$ apt-get install libtool automake -y\n$ git clone https://github.com/twitter/twemproxy.git\n$ cd twemproxy\n$ autoreconf -fvi\n$ ./configure\n$ make\n$ src/nutcracker -h\n\n\nroot@vagrant-ubuntu-trusty-64:~# nutcracker -h\nThis is nutcracker-0.4.1\n\nUsage: nutcracker [-?hVdDt] [-v verbosity level] [-o output file]\n                  [-c conf file] [-s stats port] [-a stats addr]\n                  [-i stats interval] [-p pid file] [-m mbuf size]\n\nOptions:\n  -h, --help             : this help\n  -V, --version          : show version and exit\n  -t, --test-conf        : test configuration for syntax errors and exit\n  -d, --daemonize        : run as a daemon\n  -D, --describe-stats   : print stats description and exit\n  -v, --verbose=N        : set logging level (default: 5, min: 0, max: 11)\n  -o, --output=S         : set logging file (default: stderr)\n  -c, --conf-file=S      : set configuration file (default: conf/nutcracker.yml)\n  -s, --stats-port=N     : set stats monitoring port (default: 22222)\n  -a, --stats-addr=S     : set stats monitoring ip (default: 0.0.0.0)\n  -i, --stats-interval=N : set stats aggregation interval in msec (default: 30000 msec)\n  -p, --pid-file=S       : set pid file (default: off)\n  -m, --mbuf-size=N      : set size of mbuf chunk in bytes (default: 16384 bytes)\n```\n\n  \n### \n```shell\n#tweaproxymemcachedredisconf/\nvagrant@memcache-server:~$ cat nutcracker.yml\nmemcache:\n  listen: 127.0.0.1:11211\n  hash: fnv1a_64\n  distribution: ketama\n  auto_eject_hosts: true\n  server_retry_timeout: 2000\n  server_failure_limit: 1\n  servers:\n   - 127.0.0.1:11221:1\n   - 127.0.0.1:11222:1\n   - 127.0.0.1:11223:1\n\n#memcached\nvagrant@memcache-server:~$ ps -ef | grep memcache\nvagrant  17934     1  0 09:07 ?        00:00:00 memcached -d -p 11221\nvagrant  17942     1  0 09:07 ?        00:00:00 memcached -d -p 11222\nvagrant  17950     1  0 09:07 ?        00:00:00 memcached -d -p 11223\nvagrant  18295 18083  0 09:20 pts/0    00:00:00 grep --color=auto memcache\n\nvagrant@memcache-server:~$ nutcracker -c nutcracker.yml -d\n\nvagrant@memcache-server:~$ telnet localhost 11211\nTrying 127.0.0.1...\nConnected to localhost.\nEscape character is '^]'.\nset test 0 0 1\n1\nSTORED\nget test\nVALUE test 0 1\n1\nEND\n```","slug":"twemproxu","published":1,"updated":"2019-10-21T06:57:42.606Z","photos":[],"link":"","_id":"ck42dyige009fu9urmf7vta0g","content":"<p>twemproxymemcachereids</p>\n<p><br>    <code>A fast, light-weight proxy for memcached and redis</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> apt-get install libtool automake -y</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git <span class=\"built_in\">clone</span> https://github.com/twitter/twemproxy.git</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> twemproxy</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> autoreconf -fvi</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> ./configure</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> make</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> src/nutcracker -h</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">root@vagrant-ubuntu-trusty-64:~# nutcracker -h</span><br><span class=\"line\">This is nutcracker-0.4.1</span><br><span class=\"line\"></span><br><span class=\"line\">Usage: nutcracker [-?hVdDt] [-v verbosity level] [-o output file]</span><br><span class=\"line\">                  [-c conf file] [-s stats port] [-a stats addr]</span><br><span class=\"line\">                  [-i stats interval] [-p pid file] [-m mbuf size]</span><br><span class=\"line\"></span><br><span class=\"line\">Options:</span><br><span class=\"line\">  -h, --help             : this help</span><br><span class=\"line\">  -V, --version          : show version and exit</span><br><span class=\"line\">  -t, --test-conf        : test configuration for syntax errors and exit</span><br><span class=\"line\">  -d, --daemonize        : run as a daemon</span><br><span class=\"line\">  -D, --describe-stats   : print stats description and exit</span><br><span class=\"line\">  -v, --verbose=N        : set logging level (default: 5, min: 0, max: 11)</span><br><span class=\"line\">  -o, --output=S         : set logging file (default: stderr)</span><br><span class=\"line\">  -c, --conf-file=S      : set configuration file (default: conf/nutcracker.yml)</span><br><span class=\"line\">  -s, --stats-port=N     : set stats monitoring port (default: 22222)</span><br><span class=\"line\">  -a, --stats-addr=S     : set stats monitoring ip (default: 0.0.0.0)</span><br><span class=\"line\">  -i, --stats-interval=N : set stats aggregation interval in msec (default: 30000 msec)</span><br><span class=\"line\">  -p, --pid-file=S       : set pid file (default: off)</span><br><span class=\"line\">  -m, --mbuf-size=N      : set size of mbuf chunk in bytes (default: 16384 bytes)</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">tweaproxymemcachedredisconf/</span></span><br><span class=\"line\">vagrant@memcache-server:~$ cat nutcracker.yml</span><br><span class=\"line\">memcache:</span><br><span class=\"line\">  listen: 127.0.0.1:11211</span><br><span class=\"line\">  hash: fnv1a_64</span><br><span class=\"line\">  distribution: ketama</span><br><span class=\"line\">  auto_eject_hosts: true</span><br><span class=\"line\">  server_retry_timeout: 2000</span><br><span class=\"line\">  server_failure_limit: 1</span><br><span class=\"line\">  servers:</span><br><span class=\"line\">   - 127.0.0.1:11221:1</span><br><span class=\"line\">   - 127.0.0.1:11222:1</span><br><span class=\"line\">   - 127.0.0.1:11223:1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">memcached</span></span><br><span class=\"line\">vagrant@memcache-server:~$ ps -ef | grep memcache</span><br><span class=\"line\">vagrant  17934     1  0 09:07 ?        00:00:00 memcached -d -p 11221</span><br><span class=\"line\">vagrant  17942     1  0 09:07 ?        00:00:00 memcached -d -p 11222</span><br><span class=\"line\">vagrant  17950     1  0 09:07 ?        00:00:00 memcached -d -p 11223</span><br><span class=\"line\">vagrant  18295 18083  0 09:20 pts/0    00:00:00 grep --color=auto memcache</span><br><span class=\"line\"></span><br><span class=\"line\">vagrant@memcache-server:~$ nutcracker -c nutcracker.yml -d</span><br><span class=\"line\"></span><br><span class=\"line\">vagrant@memcache-server:~$ telnet localhost 11211</span><br><span class=\"line\">Trying 127.0.0.1...</span><br><span class=\"line\">Connected to localhost.</span><br><span class=\"line\">Escape character is '^]'.</span><br><span class=\"line\">set test 0 0 1</span><br><span class=\"line\">1</span><br><span class=\"line\">STORED</span><br><span class=\"line\">get test</span><br><span class=\"line\">VALUE test 0 1</span><br><span class=\"line\">1</span><br><span class=\"line\">END</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>twemproxymemcachereids</p>\n<p><br>    <code>A fast, light-weight proxy for memcached and redis</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> apt-get install libtool automake -y</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git <span class=\"built_in\">clone</span> https://github.com/twitter/twemproxy.git</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> twemproxy</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> autoreconf -fvi</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> ./configure</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> make</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> src/nutcracker -h</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">root@vagrant-ubuntu-trusty-64:~# nutcracker -h</span><br><span class=\"line\">This is nutcracker-0.4.1</span><br><span class=\"line\"></span><br><span class=\"line\">Usage: nutcracker [-?hVdDt] [-v verbosity level] [-o output file]</span><br><span class=\"line\">                  [-c conf file] [-s stats port] [-a stats addr]</span><br><span class=\"line\">                  [-i stats interval] [-p pid file] [-m mbuf size]</span><br><span class=\"line\"></span><br><span class=\"line\">Options:</span><br><span class=\"line\">  -h, --help             : this help</span><br><span class=\"line\">  -V, --version          : show version and exit</span><br><span class=\"line\">  -t, --test-conf        : test configuration for syntax errors and exit</span><br><span class=\"line\">  -d, --daemonize        : run as a daemon</span><br><span class=\"line\">  -D, --describe-stats   : print stats description and exit</span><br><span class=\"line\">  -v, --verbose=N        : set logging level (default: 5, min: 0, max: 11)</span><br><span class=\"line\">  -o, --output=S         : set logging file (default: stderr)</span><br><span class=\"line\">  -c, --conf-file=S      : set configuration file (default: conf/nutcracker.yml)</span><br><span class=\"line\">  -s, --stats-port=N     : set stats monitoring port (default: 22222)</span><br><span class=\"line\">  -a, --stats-addr=S     : set stats monitoring ip (default: 0.0.0.0)</span><br><span class=\"line\">  -i, --stats-interval=N : set stats aggregation interval in msec (default: 30000 msec)</span><br><span class=\"line\">  -p, --pid-file=S       : set pid file (default: off)</span><br><span class=\"line\">  -m, --mbuf-size=N      : set size of mbuf chunk in bytes (default: 16384 bytes)</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">tweaproxymemcachedredisconf/</span></span><br><span class=\"line\">vagrant@memcache-server:~$ cat nutcracker.yml</span><br><span class=\"line\">memcache:</span><br><span class=\"line\">  listen: 127.0.0.1:11211</span><br><span class=\"line\">  hash: fnv1a_64</span><br><span class=\"line\">  distribution: ketama</span><br><span class=\"line\">  auto_eject_hosts: true</span><br><span class=\"line\">  server_retry_timeout: 2000</span><br><span class=\"line\">  server_failure_limit: 1</span><br><span class=\"line\">  servers:</span><br><span class=\"line\">   - 127.0.0.1:11221:1</span><br><span class=\"line\">   - 127.0.0.1:11222:1</span><br><span class=\"line\">   - 127.0.0.1:11223:1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">memcached</span></span><br><span class=\"line\">vagrant@memcache-server:~$ ps -ef | grep memcache</span><br><span class=\"line\">vagrant  17934     1  0 09:07 ?        00:00:00 memcached -d -p 11221</span><br><span class=\"line\">vagrant  17942     1  0 09:07 ?        00:00:00 memcached -d -p 11222</span><br><span class=\"line\">vagrant  17950     1  0 09:07 ?        00:00:00 memcached -d -p 11223</span><br><span class=\"line\">vagrant  18295 18083  0 09:20 pts/0    00:00:00 grep --color=auto memcache</span><br><span class=\"line\"></span><br><span class=\"line\">vagrant@memcache-server:~$ nutcracker -c nutcracker.yml -d</span><br><span class=\"line\"></span><br><span class=\"line\">vagrant@memcache-server:~$ telnet localhost 11211</span><br><span class=\"line\">Trying 127.0.0.1...</span><br><span class=\"line\">Connected to localhost.</span><br><span class=\"line\">Escape character is '^]'.</span><br><span class=\"line\">set test 0 0 1</span><br><span class=\"line\">1</span><br><span class=\"line\">STORED</span><br><span class=\"line\">get test</span><br><span class=\"line\">VALUE test 0 1</span><br><span class=\"line\">1</span><br><span class=\"line\">END</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"twemproxy","published":1,"author":"xiemx","comments":1,"date":"2017-02-08T21:02:29.000Z","_content":"\n```conf\nlisten\ntwemproxyip:portname:port\n \nhash\nkeyhash\n> one_at_a_time\n> md5\n> crc16\n> crc32(crc32 implementation compatible with libmemcached)\n> crc32a(correct crc32 implementation as per the spec)\n> fnv1_64\n> fnv1a_64\n> fnv1_32\n> fnv1a_32\n> hsieh\n> murmur\n> jenkins\nfnv1a_64\n\nhash_tag\nhash_tagkeykeyhashhash_taghash_taghash_taghash_tagkeyhash\n \nhash_tag{}key\"user:{user1}:ids\"\"user:{user1}:tweets\"hashuser1\"user:user1:ids\"keyhash\n \ndistribution\nketamamodularandom3\n \n\t(1)ketama\n\tketamahashhash ringringhashketamakey\n\t \n\t(2)modula\n\tmodulakeyhash\n\t \n\t(3)random\n\trandomkeyhashkey\n \ntimeout\nserver\n \nbacklog\nTCP backlog512\n \npreconnect\nbooleantwemproxypoolserverfalse\n \nredis\nbooleanredismemcachedfalse\n \nserver_connections\nserver\n \nauto_eject_hosts\nbooleantwemproxyserverserver_failure_limit \nfalse\n \nserver_retry_timeout\nauto_eject_hosttrue30000 \n \nserver_failure_limit\nauto_eject_hosttrue2\n \nservers\npoolserverhashhash ringserver\n```\n\n","source":"_posts/twemproxy-configure.md","raw":"---\nlayout: post\ntitle: twemproxy\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-02-09 05:02:29\ntags: [ twemproxy, redis, memcache ]\ncategories:\n    - memcached\n    - redis\n# permalink: '/2017/02/09/twemproxy-configure'\n---\n\n```conf\nlisten\ntwemproxyip:portname:port\n \nhash\nkeyhash\n> one_at_a_time\n> md5\n> crc16\n> crc32(crc32 implementation compatible with libmemcached)\n> crc32a(correct crc32 implementation as per the spec)\n> fnv1_64\n> fnv1a_64\n> fnv1_32\n> fnv1a_32\n> hsieh\n> murmur\n> jenkins\nfnv1a_64\n\nhash_tag\nhash_tagkeykeyhashhash_taghash_taghash_taghash_tagkeyhash\n \nhash_tag{}key\"user:{user1}:ids\"\"user:{user1}:tweets\"hashuser1\"user:user1:ids\"keyhash\n \ndistribution\nketamamodularandom3\n \n\t(1)ketama\n\tketamahashhash ringringhashketamakey\n\t \n\t(2)modula\n\tmodulakeyhash\n\t \n\t(3)random\n\trandomkeyhashkey\n \ntimeout\nserver\n \nbacklog\nTCP backlog512\n \npreconnect\nbooleantwemproxypoolserverfalse\n \nredis\nbooleanredismemcachedfalse\n \nserver_connections\nserver\n \nauto_eject_hosts\nbooleantwemproxyserverserver_failure_limit \nfalse\n \nserver_retry_timeout\nauto_eject_hosttrue30000 \n \nserver_failure_limit\nauto_eject_hosttrue2\n \nservers\npoolserverhashhash ringserver\n```\n\n","slug":"twemproxy-configure","updated":"2019-10-21T06:57:42.989Z","photos":[],"link":"","_id":"ck42dyigf009ku9ur4g7nst10","content":"<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">listen</span><br><span class=\"line\">twemproxyip:portname:port</span><br><span class=\"line\"> </span><br><span class=\"line\">hash</span><br><span class=\"line\">keyhash</span><br><span class=\"line\">&gt; one_at_a_time</span><br><span class=\"line\">&gt; md5</span><br><span class=\"line\">&gt; crc16</span><br><span class=\"line\">&gt; crc32(crc32 implementation compatible with libmemcached)</span><br><span class=\"line\">&gt; crc32a(correct crc32 implementation as per the spec)</span><br><span class=\"line\">&gt; fnv1_64</span><br><span class=\"line\">&gt; fnv1a_64</span><br><span class=\"line\">&gt; fnv1_32</span><br><span class=\"line\">&gt; fnv1a_32</span><br><span class=\"line\">&gt; hsieh</span><br><span class=\"line\">&gt; murmur</span><br><span class=\"line\">&gt; jenkins</span><br><span class=\"line\">fnv1a_64</span><br><span class=\"line\"></span><br><span class=\"line\">hash_tag</span><br><span class=\"line\">hash_tagkeykeyhashhash_taghash_taghash_taghash_tagkeyhash</span><br><span class=\"line\"> </span><br><span class=\"line\">hash_tag&#123;&#125;key&quot;user:&#123;user1&#125;:ids&quot;&quot;user:&#123;user1&#125;:tweets&quot;hashuser1&quot;user:user1:ids&quot;keyhash</span><br><span class=\"line\"> </span><br><span class=\"line\">distribution</span><br><span class=\"line\">ketamamodularandom3</span><br><span class=\"line\"> </span><br><span class=\"line\">\t(1)ketama</span><br><span class=\"line\">\tketamahashhash ringringhashketamakey</span><br><span class=\"line\">\t </span><br><span class=\"line\">\t(2)modula</span><br><span class=\"line\">\tmodulakeyhash</span><br><span class=\"line\">\t </span><br><span class=\"line\">\t(3)random</span><br><span class=\"line\">\trandomkeyhashkey</span><br><span class=\"line\"> </span><br><span class=\"line\">timeout</span><br><span class=\"line\">server</span><br><span class=\"line\"> </span><br><span class=\"line\">backlog</span><br><span class=\"line\">TCP backlog512</span><br><span class=\"line\"> </span><br><span class=\"line\">preconnect</span><br><span class=\"line\">booleantwemproxypoolserverfalse</span><br><span class=\"line\"> </span><br><span class=\"line\">redis</span><br><span class=\"line\">booleanredismemcachedfalse</span><br><span class=\"line\"> </span><br><span class=\"line\">server_connections</span><br><span class=\"line\">server</span><br><span class=\"line\"> </span><br><span class=\"line\">auto_eject_hosts</span><br><span class=\"line\">booleantwemproxyserverserver_failure_limit </span><br><span class=\"line\">false</span><br><span class=\"line\"> </span><br><span class=\"line\">server_retry_timeout</span><br><span class=\"line\">auto_eject_hosttrue30000 </span><br><span class=\"line\"> </span><br><span class=\"line\">server_failure_limit</span><br><span class=\"line\">auto_eject_hosttrue2</span><br><span class=\"line\"> </span><br><span class=\"line\">servers</span><br><span class=\"line\">poolserverhashhash ringserver</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">listen</span><br><span class=\"line\">twemproxyip:portname:port</span><br><span class=\"line\"> </span><br><span class=\"line\">hash</span><br><span class=\"line\">keyhash</span><br><span class=\"line\">&gt; one_at_a_time</span><br><span class=\"line\">&gt; md5</span><br><span class=\"line\">&gt; crc16</span><br><span class=\"line\">&gt; crc32(crc32 implementation compatible with libmemcached)</span><br><span class=\"line\">&gt; crc32a(correct crc32 implementation as per the spec)</span><br><span class=\"line\">&gt; fnv1_64</span><br><span class=\"line\">&gt; fnv1a_64</span><br><span class=\"line\">&gt; fnv1_32</span><br><span class=\"line\">&gt; fnv1a_32</span><br><span class=\"line\">&gt; hsieh</span><br><span class=\"line\">&gt; murmur</span><br><span class=\"line\">&gt; jenkins</span><br><span class=\"line\">fnv1a_64</span><br><span class=\"line\"></span><br><span class=\"line\">hash_tag</span><br><span class=\"line\">hash_tagkeykeyhashhash_taghash_taghash_taghash_tagkeyhash</span><br><span class=\"line\"> </span><br><span class=\"line\">hash_tag&#123;&#125;key&quot;user:&#123;user1&#125;:ids&quot;&quot;user:&#123;user1&#125;:tweets&quot;hashuser1&quot;user:user1:ids&quot;keyhash</span><br><span class=\"line\"> </span><br><span class=\"line\">distribution</span><br><span class=\"line\">ketamamodularandom3</span><br><span class=\"line\"> </span><br><span class=\"line\">\t(1)ketama</span><br><span class=\"line\">\tketamahashhash ringringhashketamakey</span><br><span class=\"line\">\t </span><br><span class=\"line\">\t(2)modula</span><br><span class=\"line\">\tmodulakeyhash</span><br><span class=\"line\">\t </span><br><span class=\"line\">\t(3)random</span><br><span class=\"line\">\trandomkeyhashkey</span><br><span class=\"line\"> </span><br><span class=\"line\">timeout</span><br><span class=\"line\">server</span><br><span class=\"line\"> </span><br><span class=\"line\">backlog</span><br><span class=\"line\">TCP backlog512</span><br><span class=\"line\"> </span><br><span class=\"line\">preconnect</span><br><span class=\"line\">booleantwemproxypoolserverfalse</span><br><span class=\"line\"> </span><br><span class=\"line\">redis</span><br><span class=\"line\">booleanredismemcachedfalse</span><br><span class=\"line\"> </span><br><span class=\"line\">server_connections</span><br><span class=\"line\">server</span><br><span class=\"line\"> </span><br><span class=\"line\">auto_eject_hosts</span><br><span class=\"line\">booleantwemproxyserverserver_failure_limit </span><br><span class=\"line\">false</span><br><span class=\"line\"> </span><br><span class=\"line\">server_retry_timeout</span><br><span class=\"line\">auto_eject_hosttrue30000 </span><br><span class=\"line\"> </span><br><span class=\"line\">server_failure_limit</span><br><span class=\"line\">auto_eject_hosttrue2</span><br><span class=\"line\"> </span><br><span class=\"line\">servers</span><br><span class=\"line\">poolserverhashhash ringserver</span><br></pre></td></tr></table></figure>\n\n"},{"layout":"post","title":"uwsgi  invalid option --x getopt_long() error","published":1,"author":"xiemx","comments":1,"date":"2016-07-26T03:07:34.000Z","_content":"### \n\n```markdown\nuwsgi: invalid option  x\ngetopt_long() error\n```\n\n### \n\nuwsgilibxml2xml\n\n1. uninstall uwsgi\n\n2. install  libxml* \n\n3. install uwsgi\n\n","source":"_posts/uwsgi-invalid-option-x-getopt_long-error.md","raw":"---\nlayout: post\ntitle: uwsgi  invalid option --x getopt_long() error\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-07-26 11:07:34\ntags: [ python, issue, uwsgi ]\ncategories:\n    - 'uwsgi'\n    - 'python'\n#permalink: '/2016/07/26/uwsgi-invalid-option-x-getopt_long-error'\n---\n### \n\n```markdown\nuwsgi: invalid option  x\ngetopt_long() error\n```\n\n### \n\nuwsgilibxml2xml\n\n1. uninstall uwsgi\n\n2. install  libxml* \n\n3. install uwsgi\n\n","slug":"uwsgi-invalid-option-x-getopt_long-error","updated":"2019-10-21T06:57:42.571Z","photos":[],"link":"","_id":"ck42dyigg009nu9urz1nleh1q","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">uwsgi: invalid option  x</span><br><span class=\"line\">getopt_long() error</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>uwsgilibxml2xml</p>\n<ol>\n<li><p>uninstall uwsgi</p>\n</li>\n<li><p>install  libxml*  </p>\n</li>\n<li><p>install uwsgi</p>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">uwsgi: invalid option  x</span><br><span class=\"line\">getopt_long() error</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>uwsgilibxml2xml</p>\n<ol>\n<li><p>uninstall uwsgi</p>\n</li>\n<li><p>install  libxml*  </p>\n</li>\n<li><p>install uwsgi</p>\n</li>\n</ol>\n"},{"layout":"post","title":"vagrant","published":1,"author":"xiemx","comments":1,"date":"2017-02-08T22:02:30.000Z","_content":"VMDB,\n\n```markdown\nVagrant.configure(\"2\") do |config|\n  config.vm.define :web do |web|\n    web.vm.provider \"virtualbox\" do |v|\n          v.customize [\"modifyvm\", :id, \"--name\", \"web\", \"--memory\", \"512\"]\n    end\n    web.vm.box = \"base\"\n    web.vm.hostname = \"xiemx-website\"\n    web.vm.network :private_network, ip: \"10.11.1.1\"\n  end\n\n  config.vm.define :db do |db|\n    db.vm.provider \"virtualbox\" do |v|\n          v.customize [\"modifyvm\", :id, \"--name\", \"db\", \"--memory\", \"512\"]\n    end\n    db.vm.box = \"base\"\n    db.vm.hostname = \"xiemx-db\"\n    db.vm.network :private_network, ip: \"10.11.1.2\"\n  end\nend\n```","source":"_posts/vagrant-mulit-vm.md","raw":"---\nlayout: post\ntitle: vagrant\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-02-09 06:02:30\ntags: [ ]\ncategories:\n    - vagrant\n#permalink: '/2017/02/09/vagrant-mulit-vm'\n---\nVMDB,\n\n```markdown\nVagrant.configure(\"2\") do |config|\n  config.vm.define :web do |web|\n    web.vm.provider \"virtualbox\" do |v|\n          v.customize [\"modifyvm\", :id, \"--name\", \"web\", \"--memory\", \"512\"]\n    end\n    web.vm.box = \"base\"\n    web.vm.hostname = \"xiemx-website\"\n    web.vm.network :private_network, ip: \"10.11.1.1\"\n  end\n\n  config.vm.define :db do |db|\n    db.vm.provider \"virtualbox\" do |v|\n          v.customize [\"modifyvm\", :id, \"--name\", \"db\", \"--memory\", \"512\"]\n    end\n    db.vm.box = \"base\"\n    db.vm.hostname = \"xiemx-db\"\n    db.vm.network :private_network, ip: \"10.11.1.2\"\n  end\nend\n```","slug":"vagrant-mulit-vm","updated":"2019-10-21T06:57:42.570Z","photos":[],"link":"","_id":"ck42dyigh009ru9ur96x379pm","content":"<p>VMDB,</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vagrant.configure(\"2\") do |config|</span><br><span class=\"line\">  config.vm.define :web do |web|</span><br><span class=\"line\"><span class=\"code\">    web.vm.provider \"virtualbox\" do |v|</span></span><br><span class=\"line\"><span class=\"code\">          v.customize [\"modifyvm\", :id, \"--name\", \"web\", \"--memory\", \"512\"]</span></span><br><span class=\"line\"><span class=\"code\">    end</span></span><br><span class=\"line\"><span class=\"code\">    web.vm.box = \"base\"</span></span><br><span class=\"line\"><span class=\"code\">    web.vm.hostname = \"xiemx-website\"</span></span><br><span class=\"line\"><span class=\"code\">    web.vm.network :private_network, ip: \"10.11.1.1\"</span></span><br><span class=\"line\">  end</span><br><span class=\"line\"></span><br><span class=\"line\">  config.vm.define :db do |db|</span><br><span class=\"line\"><span class=\"code\">    db.vm.provider \"virtualbox\" do |v|</span></span><br><span class=\"line\"><span class=\"code\">          v.customize [\"modifyvm\", :id, \"--name\", \"db\", \"--memory\", \"512\"]</span></span><br><span class=\"line\"><span class=\"code\">    end</span></span><br><span class=\"line\"><span class=\"code\">    db.vm.box = \"base\"</span></span><br><span class=\"line\"><span class=\"code\">    db.vm.hostname = \"xiemx-db\"</span></span><br><span class=\"line\"><span class=\"code\">    db.vm.network :private_network, ip: \"10.11.1.2\"</span></span><br><span class=\"line\">  end</span><br><span class=\"line\">end</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>VMDB,</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vagrant.configure(\"2\") do |config|</span><br><span class=\"line\">  config.vm.define :web do |web|</span><br><span class=\"line\"><span class=\"code\">    web.vm.provider \"virtualbox\" do |v|</span></span><br><span class=\"line\"><span class=\"code\">          v.customize [\"modifyvm\", :id, \"--name\", \"web\", \"--memory\", \"512\"]</span></span><br><span class=\"line\"><span class=\"code\">    end</span></span><br><span class=\"line\"><span class=\"code\">    web.vm.box = \"base\"</span></span><br><span class=\"line\"><span class=\"code\">    web.vm.hostname = \"xiemx-website\"</span></span><br><span class=\"line\"><span class=\"code\">    web.vm.network :private_network, ip: \"10.11.1.1\"</span></span><br><span class=\"line\">  end</span><br><span class=\"line\"></span><br><span class=\"line\">  config.vm.define :db do |db|</span><br><span class=\"line\"><span class=\"code\">    db.vm.provider \"virtualbox\" do |v|</span></span><br><span class=\"line\"><span class=\"code\">          v.customize [\"modifyvm\", :id, \"--name\", \"db\", \"--memory\", \"512\"]</span></span><br><span class=\"line\"><span class=\"code\">    end</span></span><br><span class=\"line\"><span class=\"code\">    db.vm.box = \"base\"</span></span><br><span class=\"line\"><span class=\"code\">    db.vm.hostname = \"xiemx-db\"</span></span><br><span class=\"line\"><span class=\"code\">    db.vm.network :private_network, ip: \"10.11.1.2\"</span></span><br><span class=\"line\">  end</span><br><span class=\"line\">end</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"vagrant","published":1,"author":"xiemx","comments":1,"date":"2017-02-08T21:02:54.000Z","_content":"[https://www.vagrantup.com/docs/cli/](https://www.vagrantup.com/docs/cli/)\n\n","source":"_posts/vagrant.md","raw":"---\nlayout: post\ntitle: vagrant\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-02-09 05:02:54\ntags: [ vagrant ]\ncategories:\n    - vagrant\n#permalink: '/2017/02/09/vagrant'\n---\n[https://www.vagrantup.com/docs/cli/](https://www.vagrantup.com/docs/cli/)\n\n","slug":"vagrant","updated":"2019-10-21T06:57:42.697Z","photos":[],"link":"","_id":"ck42dyigj009vu9uroluojkw0","content":"<p><a href=\"https://www.vagrantup.com/docs/cli/\" target=\"_blank\" rel=\"noopener\">https://www.vagrantup.com/docs/cli/</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://www.vagrantup.com/docs/cli/\" target=\"_blank\" rel=\"noopener\">https://www.vagrantup.com/docs/cli/</a></p>\n"},{"layout":"post","title":"Vagrantfile","published":1,"author":"xiemx","comments":1,"date":"2017-02-08T21:02:02.000Z","_content":"\n[https://www.vagrantup.com/docs/vagrantfile/](https://www.vagrantup.com/docs/vagrantfile/)\n\n","source":"_posts/vagrantfile.md","raw":"---\nlayout: post\ntitle: Vagrantfile\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-02-09 05:02:02\ntags: [ vagrant ]\ncategories:\n    - vagrant\n#permalink: '/2017/02/09/vagrantfile'\n---\n\n[https://www.vagrantup.com/docs/vagrantfile/](https://www.vagrantup.com/docs/vagrantfile/)\n\n","slug":"vagrantfile","updated":"2019-10-21T06:57:42.922Z","photos":[],"link":"","_id":"ck42dyigk009yu9urx3kbc4fp","content":"<p><a href=\"https://www.vagrantup.com/docs/vagrantfile/\" target=\"_blank\" rel=\"noopener\">https://www.vagrantup.com/docs/vagrantfile/</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://www.vagrantup.com/docs/vagrantfile/\" target=\"_blank\" rel=\"noopener\">https://www.vagrantup.com/docs/vagrantfile/</a></p>\n"},{"layout":"post","title":"vcenterLinux","published":1,"author":"xiemx","comments":1,"date":"2017-01-19T03:01:34.000Z","_content":"\n![img](/images/img_58802ffca93b9.png)\n\n![img](/images/img_5880322f10890.png)\n\n100G\n1.vcenter\nvcenter[vcenterwindow](/2017/01/12/vcenter-expand-disk-to-windows)\n\n2.Linuxrescan\n```shell\n1:\nreboot\n2:\n[root@localhost ~]# echo 1 > /sys/block/sdc/device/rescan\n```\n3.fdisk\n\tpartprobe\n\n4.lvm\nlvm[lvm](http://www.xiemx.com/2015/11/29/linuxlvm/)\n\n\n\n![img](/images/img_588031f4a62e1.png)\n\n![img](/images/img_58803215d9370.png)\n\n","source":"_posts/vcenter-expand-disk-to-linux.md","raw":"---\nlayout: post\ntitle: vcenterLinux\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-01-19 11:01:34\ntags: [ vcenter ]\ncategories:\n    - 'vcenter'\n#permalink: '/2017/01/19/vcenter-expand-disk-to-linux'\n---\n\n![img](/images/img_58802ffca93b9.png)\n\n![img](/images/img_5880322f10890.png)\n\n100G\n1.vcenter\nvcenter[vcenterwindow](/2017/01/12/vcenter-expand-disk-to-windows)\n\n2.Linuxrescan\n```shell\n1:\nreboot\n2:\n[root@localhost ~]# echo 1 > /sys/block/sdc/device/rescan\n```\n3.fdisk\n\tpartprobe\n\n4.lvm\nlvm[lvm](http://www.xiemx.com/2015/11/29/linuxlvm/)\n\n\n\n![img](/images/img_588031f4a62e1.png)\n\n![img](/images/img_58803215d9370.png)\n\n","slug":"vcenter-expand-disk-to-linux","updated":"2019-10-21T06:57:42.697Z","photos":[],"link":"","_id":"ck42dyigm00a2u9ur4vivbd1d","content":"<p><img src=\"/images/img_58802ffca93b9.png\" alt=\"img\"></p>\n<p><img src=\"/images/img_5880322f10890.png\" alt=\"img\"></p>\n<p>100G<br>1.vcenter<br>vcenter<a href=\"/2017/01/12/vcenter-expand-disk-to-windows\">vcenterwindow</a></p>\n<p>2.Linuxrescan</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1:</span><br><span class=\"line\">reboot</span><br><span class=\"line\">2:</span><br><span class=\"line\">[root@localhost ~]# echo 1 &gt; /sys/block/sdc/device/rescan</span><br></pre></td></tr></table></figure>\n\n<p>3.fdisk<br>    partprobe</p>\n<p>4.lvm<br>lvm<a href=\"http://www.xiemx.com/2015/11/29/linuxlvm/\">lvm</a></p>\n<p></p>\n<p><img src=\"/images/img_588031f4a62e1.png\" alt=\"img\"></p>\n<p><img src=\"/images/img_58803215d9370.png\" alt=\"img\"></p>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"/images/img_58802ffca93b9.png\" alt=\"img\"></p>\n<p><img src=\"/images/img_5880322f10890.png\" alt=\"img\"></p>\n<p>100G<br>1.vcenter<br>vcenter<a href=\"/2017/01/12/vcenter-expand-disk-to-windows\">vcenterwindow</a></p>\n<p>2.Linuxrescan</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1:</span><br><span class=\"line\">reboot</span><br><span class=\"line\">2:</span><br><span class=\"line\">[root@localhost ~]# echo 1 &gt; /sys/block/sdc/device/rescan</span><br></pre></td></tr></table></figure>\n\n<p>3.fdisk<br>    partprobe</p>\n<p>4.lvm<br>lvm<a href=\"http://www.xiemx.com/2015/11/29/linuxlvm/\">lvm</a></p>\n<p></p>\n<p><img src=\"/images/img_588031f4a62e1.png\" alt=\"img\"></p>\n<p><img src=\"/images/img_58803215d9370.png\" alt=\"img\"></p>\n"},{"layout":"post","title":"vcenterwindow","published":1,"author":"xiemx","comments":1,"date":"2017-01-11T19:01:41.000Z","_content":"1.vcenter80G100G\n\n![img](/images/img_587733a5ae0ba.png)\n\n2.Linux\n\n![img](/images/img_5877340a43dea.png)\n\n![img](/images/img_5877344e51cd6.png)\n\n ","source":"_posts/vcenter-expand-disk-to-windows.md","raw":"---\nlayout: post\ntitle: vcenterwindow\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-01-12 03:01:41\ntags: [ vcenter, windows ]\ncategories:\n    - 'windows'\n    - 'vcenter'\n#permalink: '/2017/01/12/vcenter-expand-disk-to-windows'\n---\n1.vcenter80G100G\n\n![img](/images/img_587733a5ae0ba.png)\n\n2.Linux\n\n![img](/images/img_5877340a43dea.png)\n\n![img](/images/img_5877344e51cd6.png)\n\n ","slug":"vcenter-expand-disk-to-windows","updated":"2019-10-21T06:57:42.593Z","photos":[],"link":"","_id":"ck42dyign00a6u9urk67e5qr1","content":"<p>1.vcenter80G100G</p>\n<p><img src=\"/images/img_587733a5ae0ba.png\" alt=\"img\"></p>\n<p>2.Linux</p>\n<p><img src=\"/images/img_5877340a43dea.png\" alt=\"img\"></p>\n<p><img src=\"/images/img_5877344e51cd6.png\" alt=\"img\"></p>\n","site":{"data":{}},"excerpt":"","more":"<p>1.vcenter80G100G</p>\n<p><img src=\"/images/img_587733a5ae0ba.png\" alt=\"img\"></p>\n<p>2.Linux</p>\n<p><img src=\"/images/img_5877340a43dea.png\" alt=\"img\"></p>\n<p><img src=\"/images/img_5877344e51cd6.png\" alt=\"img\"></p>\n"},{"layout":"post","title":".apk","published":1,"author":"xiemx","comments":1,"date":"2015-09-28T18:09:43.000Z","_content":"### iis.apk\n\nIIS.apkiisMIME.apk\n\nIIS.apk.apkMIMEMIME\n\nIIS.apk\n```\nIIS-IIS\nMIMEMIMEMIME\nMIME\n.apk,\nMIMEapkMIME`application/vnd.android.package-archive`\n\n```\nIIS\n\n### apache.apk\nApache`mime.types`\n```\napplication/vnd.android.package-archive     apk;\n```\napache\n\n### nginx.apk\n\napk  .ipaandroidios\n\nzip\n\n\n\napk ipa `/usr/local/nginx/conf`mime.types\n\n```\napplication/vnd.android.package-archive apk;\napplication/iphone          pxl ipa;\n```\nnginx\n","source":"_posts/website-download-apk.md","raw":"---\nlayout: post\ntitle: .apk\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-09-29 02:09:43\ntags: [ iis, nginx, debug ]\ncategories:\n    - iis\n    - nginx\n---\n### iis.apk\n\nIIS.apkiisMIME.apk\n\nIIS.apk.apkMIMEMIME\n\nIIS.apk\n```\nIIS-IIS\nMIMEMIMEMIME\nMIME\n.apk,\nMIMEapkMIME`application/vnd.android.package-archive`\n\n```\nIIS\n\n### apache.apk\nApache`mime.types`\n```\napplication/vnd.android.package-archive     apk;\n```\napache\n\n### nginx.apk\n\napk  .ipaandroidios\n\nzip\n\n\n\napk ipa `/usr/local/nginx/conf`mime.types\n\n```\napplication/vnd.android.package-archive apk;\napplication/iphone          pxl ipa;\n```\nnginx\n","slug":"website-download-apk","updated":"2019-10-21T09:02:19.371Z","photos":[],"link":"","_id":"ck42dyigo00aau9urtv6ed9wt","content":"<h3 id=\"iis-apk\"><a href=\"#iis-apk\" class=\"headerlink\" title=\"iis.apk\"></a>iis.apk</h3><p>IIS.apkiisMIME.apk</p>\n<p>IIS.apk.apkMIMEMIME</p>\n<p>IIS.apk</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">IIS-IIS</span><br><span class=\"line\">MIMEMIMEMIME</span><br><span class=\"line\">MIME</span><br><span class=\"line\">.apk,</span><br><span class=\"line\">MIMEapkMIME`application/vnd<span class=\"selector-class\">.android</span><span class=\"selector-class\">.package-archive</span>`</span><br></pre></td></tr></table></figure>\n\n<p>IIS</p>\n<h3 id=\"apache-apk\"><a href=\"#apache-apk\" class=\"headerlink\" title=\"apache.apk\"></a>apache.apk</h3><p>Apache<code>mime.types</code></p>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">application/vnd.android.package-archive     apk<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n\n<p>apache</p>\n<h3 id=\"nginx-apk\"><a href=\"#nginx-apk\" class=\"headerlink\" title=\"nginx.apk\"></a>nginx.apk</h3><p>apk  .ipaandroidios</p>\n<p>zip</p>\n<p></p>\n<p>apk ipa <code>/usr/local/nginx/conf</code>mime.types</p>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">application/vnd.android.package-archive apk<span class=\"comment\">;</span></span><br><span class=\"line\">application/iphone          pxl ipa<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n\n<p>nginx</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"iis-apk\"><a href=\"#iis-apk\" class=\"headerlink\" title=\"iis.apk\"></a>iis.apk</h3><p>IIS.apkiisMIME.apk</p>\n<p>IIS.apk.apkMIMEMIME</p>\n<p>IIS.apk</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">IIS-IIS</span><br><span class=\"line\">MIMEMIMEMIME</span><br><span class=\"line\">MIME</span><br><span class=\"line\">.apk,</span><br><span class=\"line\">MIMEapkMIME`application/vnd<span class=\"selector-class\">.android</span><span class=\"selector-class\">.package-archive</span>`</span><br></pre></td></tr></table></figure>\n\n<p>IIS</p>\n<h3 id=\"apache-apk\"><a href=\"#apache-apk\" class=\"headerlink\" title=\"apache.apk\"></a>apache.apk</h3><p>Apache<code>mime.types</code></p>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">application/vnd.android.package-archive     apk<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n\n<p>apache</p>\n<h3 id=\"nginx-apk\"><a href=\"#nginx-apk\" class=\"headerlink\" title=\"nginx.apk\"></a>nginx.apk</h3><p>apk  .ipaandroidios</p>\n<p>zip</p>\n<p></p>\n<p>apk ipa <code>/usr/local/nginx/conf</code>mime.types</p>\n<figure class=\"highlight abnf\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">application/vnd.android.package-archive apk<span class=\"comment\">;</span></span><br><span class=\"line\">application/iphone          pxl ipa<span class=\"comment\">;</span></span><br></pre></td></tr></table></figure>\n\n<p>nginx</p>\n"},{"layout":"post","title":"window","published":1,"author":"xiemx","comments":1,"date":"2015-10-07T20:10:01.000Z","_content":"1. .BAT\n\n```powershell\nDEL /F /A /Q\nRD /S /Q\n```\n\n2. unlock\n\n","source":"_posts/window-force-delete-file.md","raw":"---\nlayout: post\ntitle: window\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-10-08 04:10:01\ntags: [ windows, debug ]\ncategories:\n    - windows\n#permalink: '/2015/10/08/window-force-delete-file'\n---\n1. .BAT\n\n```powershell\nDEL /F /A /Q\nRD /S /Q\n```\n\n2. unlock\n\n","slug":"window-force-delete-file","updated":"2019-10-22T07:12:54.182Z","photos":[],"link":"","_id":"ck42dyigq00adu9urbzrs2eiz","content":"<ol>\n<li>.BAT</li>\n</ol>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DEL /F /A /Q</span><br><span class=\"line\">RD /S /Q</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>unlock</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li>.BAT</li>\n</ol>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DEL /F /A /Q</span><br><span class=\"line\">RD /S /Q</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>unlock</li>\n</ol>\n"},{"layout":"post","title":"2003","published":1,"author":"xiemx","comments":1,"date":"2015-09-28T19:09:32.000Z","_content":"```\nregedit\n HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Nls\\Locale\n\"(Default)\"=\"00000409\"\n\"00000804\"=\"1\"\n```","source":"_posts/windows-cant-open-contral.md","raw":"---\nlayout: post\ntitle: 2003\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-09-29 03:09:32\ntags: [ windows, debug ]\ncategories:\n    - windows\n---\n```\nregedit\n HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Nls\\Locale\n\"(Default)\"=\"00000409\"\n\"00000804\"=\"1\"\n```","slug":"windows-cant-open-contral","updated":"2019-10-21T09:02:24.150Z","photos":[],"link":"","_id":"ck42dyigr00ahu9urh53qz04s","content":"<figure class=\"highlight moonscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">regedit</span><br><span class=\"line\"> HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Nls\\Locale</span><br><span class=\"line\"><span class=\"string\">\"(Default)\"</span>=<span class=\"string\">\"00000409\"</span></span><br><span class=\"line\"><span class=\"string\">\"00000804\"</span>=<span class=\"string\">\"1\"</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight moonscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">regedit</span><br><span class=\"line\"> HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Nls\\Locale</span><br><span class=\"line\"><span class=\"string\">\"(Default)\"</span>=<span class=\"string\">\"00000409\"</span></span><br><span class=\"line\"><span class=\"string\">\"00000804\"</span>=<span class=\"string\">\"1\"</span></span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"zabbix","published":1,"author":"xiemx","comments":1,"date":"2016-06-29T02:06:55.000Z","_content":"\n```python\n#!/usr/bin/python\n\n__author__ = 'xiemx'\n\nimport sys\nimport json,requests\nimport os\nimport logging\n\nclass Weixin(object):\n\n def get_token(self):\n CorpID = '-------4fa4'\n Secret = 'Aew6oxx-----------FaTClkjXlmw_zH'\n token_url = 'https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid={}&corpsecret={}'.format(CorpID, Secret)\n response = requests.get(token_url, verify=False).content\n p = json.loads(response)\n token = p['access_token']\n return token\n\n def send_msg(self, user_id, msg):\n token = self.get_token()\n url = 'https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token={}'.format(token)\n send_content={\n \"touser\": user_id,\n \"msgtype\": \"text\",\n \"agentid\": \"2\",\n \"text\": {\n \"content\": msg\n },\n \"safe\":\"0\"\n }\n \n p = requests.post(url, verify=False, data=json.dumps(send_content))\n print p.content\n logging.debug(\"weixin send success\")\n\nif __name__ == \"__main__\":\n user_id = sys.argv[1]\n msg = sys.argv[2] + '\\n' + sys.argv[3]\n weixin = Weixin()\n weixin.send_msg(user_id, msg)\n```","source":"_posts/zabbix-alert-to-wechat-script.md","raw":"---\nlayout: post\ntitle: zabbix\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-06-29 10:06:55\ntags: [ ]\ncategories:\n    - zabbix\n#permalink: '/2016/06/29/zabbix-alert-to-wechat-script'\n---\n\n```python\n#!/usr/bin/python\n\n__author__ = 'xiemx'\n\nimport sys\nimport json,requests\nimport os\nimport logging\n\nclass Weixin(object):\n\n def get_token(self):\n CorpID = '-------4fa4'\n Secret = 'Aew6oxx-----------FaTClkjXlmw_zH'\n token_url = 'https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid={}&corpsecret={}'.format(CorpID, Secret)\n response = requests.get(token_url, verify=False).content\n p = json.loads(response)\n token = p['access_token']\n return token\n\n def send_msg(self, user_id, msg):\n token = self.get_token()\n url = 'https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token={}'.format(token)\n send_content={\n \"touser\": user_id,\n \"msgtype\": \"text\",\n \"agentid\": \"2\",\n \"text\": {\n \"content\": msg\n },\n \"safe\":\"0\"\n }\n \n p = requests.post(url, verify=False, data=json.dumps(send_content))\n print p.content\n logging.debug(\"weixin send success\")\n\nif __name__ == \"__main__\":\n user_id = sys.argv[1]\n msg = sys.argv[2] + '\\n' + sys.argv[3]\n weixin = Weixin()\n weixin.send_msg(user_id, msg)\n```","slug":"zabbix-alert-to-wechat-script","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyigt00alu9urjpn5t3ml","content":"<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python</span></span><br><span class=\"line\"></span><br><span class=\"line\">__author__ = <span class=\"string\">'xiemx'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">import</span> json,requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Weixin</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_token</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\"> CorpID = <span class=\"string\">'-------4fa4'</span></span><br><span class=\"line\"> Secret = <span class=\"string\">'Aew6oxx-----------FaTClkjXlmw_zH'</span></span><br><span class=\"line\"> token_url = <span class=\"string\">'https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=&#123;&#125;&amp;corpsecret=&#123;&#125;'</span>.format(CorpID, Secret)</span><br><span class=\"line\"> response = requests.get(token_url, verify=<span class=\"literal\">False</span>).content</span><br><span class=\"line\"> p = json.loads(response)</span><br><span class=\"line\"> token = p[<span class=\"string\">'access_token'</span>]</span><br><span class=\"line\"> <span class=\"keyword\">return</span> token</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">send_msg</span><span class=\"params\">(self, user_id, msg)</span>:</span></span><br><span class=\"line\"> token = self.get_token()</span><br><span class=\"line\"> url = <span class=\"string\">'https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=&#123;&#125;'</span>.format(token)</span><br><span class=\"line\"> send_content=&#123;</span><br><span class=\"line\"> <span class=\"string\">\"touser\"</span>: user_id,</span><br><span class=\"line\"> <span class=\"string\">\"msgtype\"</span>: <span class=\"string\">\"text\"</span>,</span><br><span class=\"line\"> <span class=\"string\">\"agentid\"</span>: <span class=\"string\">\"2\"</span>,</span><br><span class=\"line\"> <span class=\"string\">\"text\"</span>: &#123;</span><br><span class=\"line\"> <span class=\"string\">\"content\"</span>: msg</span><br><span class=\"line\"> &#125;,</span><br><span class=\"line\"> <span class=\"string\">\"safe\"</span>:<span class=\"string\">\"0\"</span></span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> p = requests.post(url, verify=<span class=\"literal\">False</span>, data=json.dumps(send_content))</span><br><span class=\"line\"> <span class=\"keyword\">print</span> p.content</span><br><span class=\"line\"> logging.debug(<span class=\"string\">\"weixin send success\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\"> user_id = sys.argv[<span class=\"number\">1</span>]</span><br><span class=\"line\"> msg = sys.argv[<span class=\"number\">2</span>] + <span class=\"string\">'\\n'</span> + sys.argv[<span class=\"number\">3</span>]</span><br><span class=\"line\"> weixin = Weixin()</span><br><span class=\"line\"> weixin.send_msg(user_id, msg)</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python</span></span><br><span class=\"line\"></span><br><span class=\"line\">__author__ = <span class=\"string\">'xiemx'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">import</span> json,requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> logging</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Weixin</span><span class=\"params\">(object)</span>:</span></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_token</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\"> CorpID = <span class=\"string\">'-------4fa4'</span></span><br><span class=\"line\"> Secret = <span class=\"string\">'Aew6oxx-----------FaTClkjXlmw_zH'</span></span><br><span class=\"line\"> token_url = <span class=\"string\">'https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=&#123;&#125;&amp;corpsecret=&#123;&#125;'</span>.format(CorpID, Secret)</span><br><span class=\"line\"> response = requests.get(token_url, verify=<span class=\"literal\">False</span>).content</span><br><span class=\"line\"> p = json.loads(response)</span><br><span class=\"line\"> token = p[<span class=\"string\">'access_token'</span>]</span><br><span class=\"line\"> <span class=\"keyword\">return</span> token</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">send_msg</span><span class=\"params\">(self, user_id, msg)</span>:</span></span><br><span class=\"line\"> token = self.get_token()</span><br><span class=\"line\"> url = <span class=\"string\">'https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=&#123;&#125;'</span>.format(token)</span><br><span class=\"line\"> send_content=&#123;</span><br><span class=\"line\"> <span class=\"string\">\"touser\"</span>: user_id,</span><br><span class=\"line\"> <span class=\"string\">\"msgtype\"</span>: <span class=\"string\">\"text\"</span>,</span><br><span class=\"line\"> <span class=\"string\">\"agentid\"</span>: <span class=\"string\">\"2\"</span>,</span><br><span class=\"line\"> <span class=\"string\">\"text\"</span>: &#123;</span><br><span class=\"line\"> <span class=\"string\">\"content\"</span>: msg</span><br><span class=\"line\"> &#125;,</span><br><span class=\"line\"> <span class=\"string\">\"safe\"</span>:<span class=\"string\">\"0\"</span></span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> p = requests.post(url, verify=<span class=\"literal\">False</span>, data=json.dumps(send_content))</span><br><span class=\"line\"> <span class=\"keyword\">print</span> p.content</span><br><span class=\"line\"> logging.debug(<span class=\"string\">\"weixin send success\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\"> user_id = sys.argv[<span class=\"number\">1</span>]</span><br><span class=\"line\"> msg = sys.argv[<span class=\"number\">2</span>] + <span class=\"string\">'\\n'</span> + sys.argv[<span class=\"number\">3</span>]</span><br><span class=\"line\"> weixin = Weixin()</span><br><span class=\"line\"> weixin.send_msg(user_id, msg)</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"20038G3G","published":1,"author":"xiemx","comments":1,"date":"2015-09-28T18:09:15.000Z","_content":"#### \n3220038G3G\nwin2003 3232G3.25G\n#### \n```\nC\\boot.ini \\boot.ini\ndefault=multi(0)disk(0)rdisk(0)partition(2)\\WINDOWS\n[operating systems]\n(0)disk(0)rdisk(0)partition(2)\\WINDOWS=Windows Server 2003, Enterprise&quot; /fastdetect /PAE\n```","source":"_posts/windows-server-memory-limit.md","raw":"---\nlayout: post\ntitle: 20038G3G\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-09-29 02:09:15\ntags: [ windows, debug ]\ncategories:\n    - windows\n---\n#### \n3220038G3G\nwin2003 3232G3.25G\n#### \n```\nC\\boot.ini \\boot.ini\ndefault=multi(0)disk(0)rdisk(0)partition(2)\\WINDOWS\n[operating systems]\n(0)disk(0)rdisk(0)partition(2)\\WINDOWS=Windows Server 2003, Enterprise&quot; /fastdetect /PAE\n```","slug":"windows-server-memory-limit","updated":"2019-10-21T09:02:29.360Z","photos":[],"link":"","_id":"ck42dyigv00apu9urxqhrg3cs","content":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>3220038G3G<br>win2003 3232G3.25G</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C\\boot.ini \\boot.ini</span><br><span class=\"line\"><span class=\"attribute\">default</span>=multi(0)disk(0)rdisk(0)partition(2)\\WINDOWS</span><br><span class=\"line\">[operating systems]</span><br><span class=\"line\">(0)disk(0)rdisk(0)partition(2)\\<span class=\"attribute\">WINDOWS</span>=Windows<span class=\"built_in\"> Server </span>2003, Enterprise&amp;quot; /fastdetect /PAE</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>3220038G3G<br>win2003 3232G3.25G</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">C\\boot.ini \\boot.ini</span><br><span class=\"line\"><span class=\"attribute\">default</span>=multi(0)disk(0)rdisk(0)partition(2)\\WINDOWS</span><br><span class=\"line\">[operating systems]</span><br><span class=\"line\">(0)disk(0)rdisk(0)partition(2)\\<span class=\"attribute\">WINDOWS</span>=Windows<span class=\"built_in\"> Server </span>2003, Enterprise&amp;quot; /fastdetect /PAE</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"zabbix distrubuted monitor","published":1,"author":"xiemx","comments":1,"date":"2017-09-20T18:09:37.000Z","_content":"\nzabbix 2\n* node\n* proxy\n\nPS: node2.4proxy\n\n### proxy \n\nZabbix proxyZabbixproxyagentserverzabbix proxytriggeralert.\n\n![img](/images/img_59c35cd9ab71b.png)\n\n### \n\n- Monitor remote locations\n- Monitor locations having unreliable communications\n- Offload the Zabbix server when monitoring thousands of devices\n- Simplify the maintenance of distributed monitoring\n\n### \n\n```shell\n#zabbix server ,\n\n./configure --prefix=/opt/zabbix_proxy/ --enable-proxy --with-mysql --with-libcurl\nmake install\n\ncreate databases zabbix\ngrant all to zabbix.* to zabbix@'%' identified by \"zabbix\";\n#schema.sql\n\n#hostnamezabbix\n#server\n\n#ps\nConfigFrequency=600\n```\n\nzabbix server \n\n![img](/images/img_59c35d1d930c1.png)\n\nproxy\n\n![img](/images/img_59c35d389b1c5.png)","source":"_posts/zabbix-distrubuted-monitor.md","raw":"---\nlayout: post\ntitle: zabbix distrubuted monitor\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-09-21 02:09:37\ntags: [ zabbix ]\ncategories:\n    - zabbix\n#permalink: /2017/09/21/zabbix-distrubuted-monitor\n---\n\nzabbix 2\n* node\n* proxy\n\nPS: node2.4proxy\n\n### proxy \n\nZabbix proxyZabbixproxyagentserverzabbix proxytriggeralert.\n\n![img](/images/img_59c35cd9ab71b.png)\n\n### \n\n- Monitor remote locations\n- Monitor locations having unreliable communications\n- Offload the Zabbix server when monitoring thousands of devices\n- Simplify the maintenance of distributed monitoring\n\n### \n\n```shell\n#zabbix server ,\n\n./configure --prefix=/opt/zabbix_proxy/ --enable-proxy --with-mysql --with-libcurl\nmake install\n\ncreate databases zabbix\ngrant all to zabbix.* to zabbix@'%' identified by \"zabbix\";\n#schema.sql\n\n#hostnamezabbix\n#server\n\n#ps\nConfigFrequency=600\n```\n\nzabbix server \n\n![img](/images/img_59c35d1d930c1.png)\n\nproxy\n\n![img](/images/img_59c35d389b1c5.png)","slug":"zabbix-distrubuted-monitor","updated":"2019-10-21T06:57:42.570Z","photos":[],"link":"","_id":"ck42dyigw00asu9ur59k1lnri","content":"<p>zabbix 2</p>\n<ul>\n<li>node</li>\n<li>proxy</li>\n</ul>\n<p>PS: node2.4proxy</p>\n<h3 id=\"proxy-\"><a href=\"#proxy-\" class=\"headerlink\" title=\"proxy \"></a>proxy </h3><p>Zabbix proxyZabbixproxyagentserverzabbix proxytriggeralert.</p>\n<p><img src=\"/images/img_59c35cd9ab71b.png\" alt=\"img\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>Monitor remote locations</li>\n<li>Monitor locations having unreliable communications</li>\n<li>Offload the Zabbix server when monitoring thousands of devices</li>\n<li>Simplify the maintenance of distributed monitoring</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">zabbix server ,</span></span><br><span class=\"line\"></span><br><span class=\"line\">./configure --prefix=/opt/zabbix_proxy/ --enable-proxy --with-mysql --with-libcurl</span><br><span class=\"line\">make install</span><br><span class=\"line\"></span><br><span class=\"line\">create databases zabbix</span><br><span class=\"line\">grant all to zabbix.* to zabbix@'%' identified by \"zabbix\";</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">schema.sql</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">hostnamezabbix</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">server</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">ps</span></span><br><span class=\"line\">ConfigFrequency=600</span><br></pre></td></tr></table></figure>\n\n<p>zabbix server </p>\n<p><img src=\"/images/img_59c35d1d930c1.png\" alt=\"img\"></p>\n<p>proxy</p>\n<p><img src=\"/images/img_59c35d389b1c5.png\" alt=\"img\"></p>\n","site":{"data":{}},"excerpt":"","more":"<p>zabbix 2</p>\n<ul>\n<li>node</li>\n<li>proxy</li>\n</ul>\n<p>PS: node2.4proxy</p>\n<h3 id=\"proxy-\"><a href=\"#proxy-\" class=\"headerlink\" title=\"proxy \"></a>proxy </h3><p>Zabbix proxyZabbixproxyagentserverzabbix proxytriggeralert.</p>\n<p><img src=\"/images/img_59c35cd9ab71b.png\" alt=\"img\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li>Monitor remote locations</li>\n<li>Monitor locations having unreliable communications</li>\n<li>Offload the Zabbix server when monitoring thousands of devices</li>\n<li>Simplify the maintenance of distributed monitoring</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">zabbix server ,</span></span><br><span class=\"line\"></span><br><span class=\"line\">./configure --prefix=/opt/zabbix_proxy/ --enable-proxy --with-mysql --with-libcurl</span><br><span class=\"line\">make install</span><br><span class=\"line\"></span><br><span class=\"line\">create databases zabbix</span><br><span class=\"line\">grant all to zabbix.* to zabbix@'%' identified by \"zabbix\";</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">schema.sql</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">hostnamezabbix</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">server</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">ps</span></span><br><span class=\"line\">ConfigFrequency=600</span><br></pre></td></tr></table></figure>\n\n<p>zabbix server </p>\n<p><img src=\"/images/img_59c35d1d930c1.png\" alt=\"img\"></p>\n<p>proxy</p>\n<p><img src=\"/images/img_59c35d389b1c5.png\" alt=\"img\"></p>\n"},{"layout":"post","title":"zabbix Less than 25% free in the configuration cache","published":1,"author":"xiemx","comments":1,"date":"2016-08-08T19:08:20.000Z","_content":"\nzabbix server\n\n```markdown\nLess than 25% free in the configuration cache\n```\nzabbix\n\n```shell\nvim zabbix_server.conf\n##8M16M8G\nCacheSize=16M\n\n##zabbix server\nservice zabbix_server restart\n```","source":"_posts/zabbix-less-than-25-free-in-the-configuration-cache.md","raw":"---\nlayout: post\ntitle: 'zabbix Less than 25% free in the configuration cache'\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-08-09 03:08:20\ntags: [ zabbix, issue ]\ncategories:\n    - zabbix\n#permalink: '/2016/08/09/zabbix-less-than-25-free-in-the-configuration-cache'\n---\n\nzabbix server\n\n```markdown\nLess than 25% free in the configuration cache\n```\nzabbix\n\n```shell\nvim zabbix_server.conf\n##8M16M8G\nCacheSize=16M\n\n##zabbix server\nservice zabbix_server restart\n```","slug":"zabbix-less-than-25-free-in-the-configuration-cache","updated":"2019-10-21T06:57:42.921Z","photos":[],"link":"","_id":"ck42dyigx00axu9ur34j2wuy5","content":"<p>zabbix server</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Less than 25% free in the configuration cache</span><br></pre></td></tr></table></figure>\n\n<p>zabbix</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim zabbix_server.conf</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">#8M16M8G</span></span></span><br><span class=\"line\">CacheSize=16M</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">#zabbix server</span></span></span><br><span class=\"line\">service zabbix_server restart</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>zabbix server</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Less than 25% free in the configuration cache</span><br></pre></td></tr></table></figure>\n\n<p>zabbix</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim zabbix_server.conf</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">#8M16M8G</span></span></span><br><span class=\"line\">CacheSize=16M</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">#zabbix server</span></span></span><br><span class=\"line\">service zabbix_server restart</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"zabbixmemcache","published":1,"author":"xiemx","comments":1,"date":"2016-12-18T21:12:02.000Z","_content":"### script\n\n```shell\ncat memcached.sh\n\n#!/bin/bash\nport=$1\nmem_conn=\"/bin/nc 127.0.0.1 $port\"\n\ncase $2 in \n  conn)\n    conn=`echo -e \"stats\\nquit\"|$mem_conn|grep curr_connections | awk '{print $3}' `\n    echo $conn\n    ;;\n  bytes)\n    bytes=`echo -e \"stats\\nquit\"|$mem_conn|grep bytes|awk '{print $3}'`\n    echo `echo $bytes |tr -d \" \"`\n    ;;\n  cmd_get)\n    cmd_get=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '{print $3}' `\n    echo $cmd_get\n    ;;\n  cmd_set)\n    cmd_set=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_set| awk '{print $3}' `\n    echo $cmd_set\n    ;;\n  get_hits)\n    get_hits=`echo -e \"stats\\nquit\"|$mem_conn|grep get_hits| awk '{print $3}' `\n    echo $get_hits\n    ;;\n  read_qps_sec)\n    count1=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '{print $3}'|tr -d '\\r' `\n    sleep 1\n    count2=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '{print $3}'|tr -d '\\r' `\n    count=` expr $count2 - $count1`\n    echo $count\n    ;;\n  write_qps_sec)\n    count1=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_set| awk '{print $3}' `\n    sleep 1\n    count2=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_set| awk '{print $3}' `\n    count=`echo $count2 $count1|awk '{printf($1-$2)}'`\n    echo $count\n    ;;\n  \n  hit_target)\n    cmd_get=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '{print $3}' `\n    get_hits=`echo -e \"stats\\nquit\"|$mem_conn|grep get_hits| awk '{print $3}' `\n    hit_target=`echo $get_hits $cmd_get|awk '{printf($1*100/$2)}'`\n    echo $hit_target\n    ;;\n  *)\n    echo \"please input conn|bytes|cmd_get|cmd_set|get_hits|read_qps_sec|write_qps_sec|hit_target\"\n    ;;\nesac\n```\n\n### zabbixconf.d/\n\n```shell\ncat zabbix_memcache.conf\nUserParameter=memcache[*],/opt/script/zabbix/memcached.sh $1 $2\n```","source":"_posts/zabbix-monitor-memcache.md","raw":"---\nlayout: post\ntitle: zabbixmemcache\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-12-19 05:12:02\ntags: [ zabbix, monitor, memcache ]\ncategories:\n    - zabbix\n#permalink: '/2016/12/19/zabbix-monitor-memcache'\n---\n### script\n\n```shell\ncat memcached.sh\n\n#!/bin/bash\nport=$1\nmem_conn=\"/bin/nc 127.0.0.1 $port\"\n\ncase $2 in \n  conn)\n    conn=`echo -e \"stats\\nquit\"|$mem_conn|grep curr_connections | awk '{print $3}' `\n    echo $conn\n    ;;\n  bytes)\n    bytes=`echo -e \"stats\\nquit\"|$mem_conn|grep bytes|awk '{print $3}'`\n    echo `echo $bytes |tr -d \" \"`\n    ;;\n  cmd_get)\n    cmd_get=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '{print $3}' `\n    echo $cmd_get\n    ;;\n  cmd_set)\n    cmd_set=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_set| awk '{print $3}' `\n    echo $cmd_set\n    ;;\n  get_hits)\n    get_hits=`echo -e \"stats\\nquit\"|$mem_conn|grep get_hits| awk '{print $3}' `\n    echo $get_hits\n    ;;\n  read_qps_sec)\n    count1=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '{print $3}'|tr -d '\\r' `\n    sleep 1\n    count2=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '{print $3}'|tr -d '\\r' `\n    count=` expr $count2 - $count1`\n    echo $count\n    ;;\n  write_qps_sec)\n    count1=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_set| awk '{print $3}' `\n    sleep 1\n    count2=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_set| awk '{print $3}' `\n    count=`echo $count2 $count1|awk '{printf($1-$2)}'`\n    echo $count\n    ;;\n  \n  hit_target)\n    cmd_get=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '{print $3}' `\n    get_hits=`echo -e \"stats\\nquit\"|$mem_conn|grep get_hits| awk '{print $3}' `\n    hit_target=`echo $get_hits $cmd_get|awk '{printf($1*100/$2)}'`\n    echo $hit_target\n    ;;\n  *)\n    echo \"please input conn|bytes|cmd_get|cmd_set|get_hits|read_qps_sec|write_qps_sec|hit_target\"\n    ;;\nesac\n```\n\n### zabbixconf.d/\n\n```shell\ncat zabbix_memcache.conf\nUserParameter=memcache[*],/opt/script/zabbix/memcached.sh $1 $2\n```","slug":"zabbix-monitor-memcache","updated":"2019-10-21T06:57:42.702Z","photos":[],"link":"","_id":"ck42dyigx00b0u9urcrqs040f","content":"<h3 id=\"script\"><a href=\"#script\" class=\"headerlink\" title=\"script\"></a>script</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat memcached.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">port=$1</span><br><span class=\"line\">mem_conn=\"/bin/nc 127.0.0.1 $port\"</span><br><span class=\"line\"></span><br><span class=\"line\">case $2 in </span><br><span class=\"line\">  conn)</span><br><span class=\"line\">    conn=`echo -e \"stats\\nquit\"|$mem_conn|grep curr_connections | awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    echo $conn</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  bytes)</span><br><span class=\"line\">    bytes=`echo -e \"stats\\nquit\"|$mem_conn|grep bytes|awk '&#123;print $3&#125;'`</span><br><span class=\"line\">    echo `echo $bytes |tr -d \" \"`</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  cmd_get)</span><br><span class=\"line\">    cmd_get=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    echo $cmd_get</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  cmd_set)</span><br><span class=\"line\">    cmd_set=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_set| awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    echo $cmd_set</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  get_hits)</span><br><span class=\"line\">    get_hits=`echo -e \"stats\\nquit\"|$mem_conn|grep get_hits| awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    echo $get_hits</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  read_qps_sec)</span><br><span class=\"line\">    count1=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '&#123;print $3&#125;'|tr -d '\\r' `</span><br><span class=\"line\">    sleep 1</span><br><span class=\"line\">    count2=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '&#123;print $3&#125;'|tr -d '\\r' `</span><br><span class=\"line\">    count=` expr $count2 - $count1`</span><br><span class=\"line\">    echo $count</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  write_qps_sec)</span><br><span class=\"line\">    count1=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_set| awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    sleep 1</span><br><span class=\"line\">    count2=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_set| awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    count=`echo $count2 $count1|awk '&#123;printf($1-$2)&#125;'`</span><br><span class=\"line\">    echo $count</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  hit_target)</span><br><span class=\"line\">    cmd_get=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    get_hits=`echo -e \"stats\\nquit\"|$mem_conn|grep get_hits| awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    hit_target=`echo $get_hits $cmd_get|awk '&#123;printf($1*100/$2)&#125;'`</span><br><span class=\"line\">    echo $hit_target</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  *)</span><br><span class=\"line\">    echo \"please input conn|bytes|cmd_get|cmd_set|get_hits|read_qps_sec|write_qps_sec|hit_target\"</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">esac</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"zabbixconf-d-\"><a href=\"#zabbixconf-d-\" class=\"headerlink\" title=\"zabbixconf.d/\"></a>zabbixconf.d/</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat zabbix_memcache.conf</span><br><span class=\"line\">UserParameter=memcache[*],/opt/script/zabbix/memcached.sh $1 $2</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"script\"><a href=\"#script\" class=\"headerlink\" title=\"script\"></a>script</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat memcached.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">port=$1</span><br><span class=\"line\">mem_conn=\"/bin/nc 127.0.0.1 $port\"</span><br><span class=\"line\"></span><br><span class=\"line\">case $2 in </span><br><span class=\"line\">  conn)</span><br><span class=\"line\">    conn=`echo -e \"stats\\nquit\"|$mem_conn|grep curr_connections | awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    echo $conn</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  bytes)</span><br><span class=\"line\">    bytes=`echo -e \"stats\\nquit\"|$mem_conn|grep bytes|awk '&#123;print $3&#125;'`</span><br><span class=\"line\">    echo `echo $bytes |tr -d \" \"`</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  cmd_get)</span><br><span class=\"line\">    cmd_get=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    echo $cmd_get</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  cmd_set)</span><br><span class=\"line\">    cmd_set=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_set| awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    echo $cmd_set</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  get_hits)</span><br><span class=\"line\">    get_hits=`echo -e \"stats\\nquit\"|$mem_conn|grep get_hits| awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    echo $get_hits</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  read_qps_sec)</span><br><span class=\"line\">    count1=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '&#123;print $3&#125;'|tr -d '\\r' `</span><br><span class=\"line\">    sleep 1</span><br><span class=\"line\">    count2=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '&#123;print $3&#125;'|tr -d '\\r' `</span><br><span class=\"line\">    count=` expr $count2 - $count1`</span><br><span class=\"line\">    echo $count</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  write_qps_sec)</span><br><span class=\"line\">    count1=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_set| awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    sleep 1</span><br><span class=\"line\">    count2=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_set| awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    count=`echo $count2 $count1|awk '&#123;printf($1-$2)&#125;'`</span><br><span class=\"line\">    echo $count</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  hit_target)</span><br><span class=\"line\">    cmd_get=`echo -e \"stats\\nquit\"|$mem_conn|grep cmd_get| awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    get_hits=`echo -e \"stats\\nquit\"|$mem_conn|grep get_hits| awk '&#123;print $3&#125;' `</span><br><span class=\"line\">    hit_target=`echo $get_hits $cmd_get|awk '&#123;printf($1*100/$2)&#125;'`</span><br><span class=\"line\">    echo $hit_target</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  *)</span><br><span class=\"line\">    echo \"please input conn|bytes|cmd_get|cmd_set|get_hits|read_qps_sec|write_qps_sec|hit_target\"</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">esac</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"zabbixconf-d-\"><a href=\"#zabbixconf-d-\" class=\"headerlink\" title=\"zabbixconf.d/\"></a>zabbixconf.d/</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat zabbix_memcache.conf</span><br><span class=\"line\">UserParameter=memcache[*],/opt/script/zabbix/memcached.sh $1 $2</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"zabbixmongo","published":1,"author":"xiemx","comments":1,"date":"2016-12-18T21:12:27.000Z","_content":"zabbix\n### script\n\n```shell\ncat mongo.sh\n\n#!/bin/bash\n\ncase $1 in \n#  use_memory)\n#    used_memory=`echo \"db.serverStatus().mem\"|mongo admin|grep resident|awk -F':' '{print $2}'|tr -d \" ,\"`\n#    echo $used_memory\n#    ;;\n#  \n#  use_vmemory)\n#    used_vmemory=`echo \"db.serverStatus().mem\"|mongo admin|grep virtual|awk -F':' '{print $2}'|tr -d \" ,\"`\n#    echo $used_vmemory\n#    ;;\n#  \n#  used_conn)\n#    used_conn=`echo \"db.serverStatus().connections\"|mongo admin|grep current|awk -F':' '{print $2}'|tr -d ' ,'`\n#    echo $used_conn\n#    ;;\n#  \n#  available_conn)\n#    available=`echo \"db.serverStatus().connections\"|mongo admin|grep available|awk -F':' '{print $2}'|tr -d ' ,'`\n#    echo $availabe\n#  ;;\n  \n  insert)\n    insert=`mongostat -n1 | tail -n 1|awk '{print $1}'|tr -d ' *,'`\n    echo $insert\n    ;;\n  \n  query)\n    query=`mongostat -n1 | tail -n 1|awk '{print $2}'|tr -d ' *,'`\n    echo $query\n    ;;\n  \n  update)\n    update=`mongostat -n1 | tail -n 1|awk '{print $3}'|tr -d ' *,'`\n    echo $update\n    ;;\n  \n  delete)\n    delete=`mongostat -n1 | tail -n 1|awk '{print $4}'|tr -d ' *,'`\n    echo $delete\n    ;;\n  getmore)\n    getmore=`mongostat -n1 | tail -n 1|awk '{print $5}'|tr -d ' *,'`  \n    echo $getmore\n    ;;\n  command)\n    command=`mongostat -n1 | tail -n 1|awk '{print $6}'|awk -F'|' '{print $1}'|tr -d ' *,'`\n    echo $command\n    ;;\n  vsize)\n    vsize=`mongostat -n1 | tail -n 1|awk '{print $10}'|tr -d ' *,G'`\n    echo $vsize\n    ;;\n  res)\n    res=`mongostat -n1 | tail -n 1|awk '{print $11}'|tr -d ' *,G'`\n    echo $res\n    ;;\n  qr)\n    qr=`mongostat -n1 | tail -n 1|awk '{print $12}'|awk -F'|' '{print $1}'|tr -d ' *,'`\n    echo $qr\n    ;;\n  qw)\n    qw=`mongostat -n1 | tail -n 1|awk '{print $12}'|awk -F'|' '{print $2}'|tr -d ' *,'`\n    echo $qw\n    ;;\n  ar)\n    ar=`mongostat -n1 | tail -n 1|awk '{print $13}'|awk -F'|' '{print $1}'|tr -d ' *,'`\n    echo $ar\n    ;;\n  aw)\n    aw=`mongostat -n1 | tail -n 1|awk '{print $13}'|awk -F'|' '{print $2}'|tr -d ' *,'`\n    echo $aw\n    ;;\n  conn)\n    conn=`mongostat -n1 | tail -n 1|awk '{print $16}'|tr -d ' *,'`\n    echo $conn\n    ;;\n\n  *)\n    echo \"please input  insert|query|update|delete\"\n    ;;\nesac\n```\n\n\n### conf\n\n```shell\ncat zabbix_mongo.conf\nUserParameter=mongo[*],/opt/script/zabbix/mongo.sh $1\n```","source":"_posts/zabbix-monitor-mongo.md","raw":"---\nlayout: post\ntitle: zabbixmongo\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-12-19 05:12:27\ntags: [ zabbix, mongo ]\ncategories:\n    - zabbix\n#permalink: '/2016/12/19/zabbix-monitor-mongo'\n---\nzabbix\n### script\n\n```shell\ncat mongo.sh\n\n#!/bin/bash\n\ncase $1 in \n#  use_memory)\n#    used_memory=`echo \"db.serverStatus().mem\"|mongo admin|grep resident|awk -F':' '{print $2}'|tr -d \" ,\"`\n#    echo $used_memory\n#    ;;\n#  \n#  use_vmemory)\n#    used_vmemory=`echo \"db.serverStatus().mem\"|mongo admin|grep virtual|awk -F':' '{print $2}'|tr -d \" ,\"`\n#    echo $used_vmemory\n#    ;;\n#  \n#  used_conn)\n#    used_conn=`echo \"db.serverStatus().connections\"|mongo admin|grep current|awk -F':' '{print $2}'|tr -d ' ,'`\n#    echo $used_conn\n#    ;;\n#  \n#  available_conn)\n#    available=`echo \"db.serverStatus().connections\"|mongo admin|grep available|awk -F':' '{print $2}'|tr -d ' ,'`\n#    echo $availabe\n#  ;;\n  \n  insert)\n    insert=`mongostat -n1 | tail -n 1|awk '{print $1}'|tr -d ' *,'`\n    echo $insert\n    ;;\n  \n  query)\n    query=`mongostat -n1 | tail -n 1|awk '{print $2}'|tr -d ' *,'`\n    echo $query\n    ;;\n  \n  update)\n    update=`mongostat -n1 | tail -n 1|awk '{print $3}'|tr -d ' *,'`\n    echo $update\n    ;;\n  \n  delete)\n    delete=`mongostat -n1 | tail -n 1|awk '{print $4}'|tr -d ' *,'`\n    echo $delete\n    ;;\n  getmore)\n    getmore=`mongostat -n1 | tail -n 1|awk '{print $5}'|tr -d ' *,'`  \n    echo $getmore\n    ;;\n  command)\n    command=`mongostat -n1 | tail -n 1|awk '{print $6}'|awk -F'|' '{print $1}'|tr -d ' *,'`\n    echo $command\n    ;;\n  vsize)\n    vsize=`mongostat -n1 | tail -n 1|awk '{print $10}'|tr -d ' *,G'`\n    echo $vsize\n    ;;\n  res)\n    res=`mongostat -n1 | tail -n 1|awk '{print $11}'|tr -d ' *,G'`\n    echo $res\n    ;;\n  qr)\n    qr=`mongostat -n1 | tail -n 1|awk '{print $12}'|awk -F'|' '{print $1}'|tr -d ' *,'`\n    echo $qr\n    ;;\n  qw)\n    qw=`mongostat -n1 | tail -n 1|awk '{print $12}'|awk -F'|' '{print $2}'|tr -d ' *,'`\n    echo $qw\n    ;;\n  ar)\n    ar=`mongostat -n1 | tail -n 1|awk '{print $13}'|awk -F'|' '{print $1}'|tr -d ' *,'`\n    echo $ar\n    ;;\n  aw)\n    aw=`mongostat -n1 | tail -n 1|awk '{print $13}'|awk -F'|' '{print $2}'|tr -d ' *,'`\n    echo $aw\n    ;;\n  conn)\n    conn=`mongostat -n1 | tail -n 1|awk '{print $16}'|tr -d ' *,'`\n    echo $conn\n    ;;\n\n  *)\n    echo \"please input  insert|query|update|delete\"\n    ;;\nesac\n```\n\n\n### conf\n\n```shell\ncat zabbix_mongo.conf\nUserParameter=mongo[*],/opt/script/zabbix/mongo.sh $1\n```","slug":"zabbix-monitor-mongo","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyigz00b5u9ur8g0q60y9","content":"<p>zabbix</p>\n<h3 id=\"script\"><a href=\"#script\" class=\"headerlink\" title=\"script\"></a>script</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat mongo.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">case $1 in </span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  use_memory)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    used_memory=`<span class=\"built_in\">echo</span> <span class=\"string\">\"db.serverStatus().mem\"</span>|mongo admin|grep resident|awk -F<span class=\"string\">':'</span> <span class=\"string\">'&#123;print $2&#125;'</span>|tr -d <span class=\"string\">\" ,\"</span>`</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    <span class=\"built_in\">echo</span> <span class=\"variable\">$used_memory</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    ;;</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  use_vmemory)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    used_vmemory=`<span class=\"built_in\">echo</span> <span class=\"string\">\"db.serverStatus().mem\"</span>|mongo admin|grep virtual|awk -F<span class=\"string\">':'</span> <span class=\"string\">'&#123;print $2&#125;'</span>|tr -d <span class=\"string\">\" ,\"</span>`</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    <span class=\"built_in\">echo</span> <span class=\"variable\">$used_vmemory</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    ;;</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  used_conn)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    used_conn=`<span class=\"built_in\">echo</span> <span class=\"string\">\"db.serverStatus().connections\"</span>|mongo admin|grep current|awk -F<span class=\"string\">':'</span> <span class=\"string\">'&#123;print $2&#125;'</span>|tr -d <span class=\"string\">' ,'</span>`</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    <span class=\"built_in\">echo</span> <span class=\"variable\">$used_conn</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    ;;</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  available_conn)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    available=`<span class=\"built_in\">echo</span> <span class=\"string\">\"db.serverStatus().connections\"</span>|mongo admin|grep available|awk -F<span class=\"string\">':'</span> <span class=\"string\">'&#123;print $2&#125;'</span>|tr -d <span class=\"string\">' ,'</span>`</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    <span class=\"built_in\">echo</span> <span class=\"variable\">$availabe</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  ;;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  insert)</span><br><span class=\"line\">    insert=`mongostat -n1 | tail -n 1|awk '&#123;print $1&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $insert</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  query)</span><br><span class=\"line\">    query=`mongostat -n1 | tail -n 1|awk '&#123;print $2&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $query</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  update)</span><br><span class=\"line\">    update=`mongostat -n1 | tail -n 1|awk '&#123;print $3&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $update</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  delete)</span><br><span class=\"line\">    delete=`mongostat -n1 | tail -n 1|awk '&#123;print $4&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $delete</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  getmore)</span><br><span class=\"line\">    getmore=`mongostat -n1 | tail -n 1|awk '&#123;print $5&#125;'|tr -d ' *,'`  </span><br><span class=\"line\">    echo $getmore</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  command)</span><br><span class=\"line\">    command=`mongostat -n1 | tail -n 1|awk '&#123;print $6&#125;'|awk -F'|' '&#123;print $1&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $command</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  vsize)</span><br><span class=\"line\">    vsize=`mongostat -n1 | tail -n 1|awk '&#123;print $10&#125;'|tr -d ' *,G'`</span><br><span class=\"line\">    echo $vsize</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  res)</span><br><span class=\"line\">    res=`mongostat -n1 | tail -n 1|awk '&#123;print $11&#125;'|tr -d ' *,G'`</span><br><span class=\"line\">    echo $res</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  qr)</span><br><span class=\"line\">    qr=`mongostat -n1 | tail -n 1|awk '&#123;print $12&#125;'|awk -F'|' '&#123;print $1&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $qr</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  qw)</span><br><span class=\"line\">    qw=`mongostat -n1 | tail -n 1|awk '&#123;print $12&#125;'|awk -F'|' '&#123;print $2&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $qw</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  ar)</span><br><span class=\"line\">    ar=`mongostat -n1 | tail -n 1|awk '&#123;print $13&#125;'|awk -F'|' '&#123;print $1&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $ar</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  aw)</span><br><span class=\"line\">    aw=`mongostat -n1 | tail -n 1|awk '&#123;print $13&#125;'|awk -F'|' '&#123;print $2&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $aw</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  conn)</span><br><span class=\"line\">    conn=`mongostat -n1 | tail -n 1|awk '&#123;print $16&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $conn</span><br><span class=\"line\">    ;;</span><br><span class=\"line\"></span><br><span class=\"line\">  *)</span><br><span class=\"line\">    echo \"please input  insert|query|update|delete\"</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">esac</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"conf\"><a href=\"#conf\" class=\"headerlink\" title=\"conf\"></a>conf</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat zabbix_mongo.conf</span><br><span class=\"line\">UserParameter=mongo[*],/opt/script/zabbix/mongo.sh $1</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>zabbix</p>\n<h3 id=\"script\"><a href=\"#script\" class=\"headerlink\" title=\"script\"></a>script</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat mongo.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\">case $1 in </span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  use_memory)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    used_memory=`<span class=\"built_in\">echo</span> <span class=\"string\">\"db.serverStatus().mem\"</span>|mongo admin|grep resident|awk -F<span class=\"string\">':'</span> <span class=\"string\">'&#123;print $2&#125;'</span>|tr -d <span class=\"string\">\" ,\"</span>`</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    <span class=\"built_in\">echo</span> <span class=\"variable\">$used_memory</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    ;;</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  use_vmemory)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    used_vmemory=`<span class=\"built_in\">echo</span> <span class=\"string\">\"db.serverStatus().mem\"</span>|mongo admin|grep virtual|awk -F<span class=\"string\">':'</span> <span class=\"string\">'&#123;print $2&#125;'</span>|tr -d <span class=\"string\">\" ,\"</span>`</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    <span class=\"built_in\">echo</span> <span class=\"variable\">$used_vmemory</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    ;;</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  used_conn)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    used_conn=`<span class=\"built_in\">echo</span> <span class=\"string\">\"db.serverStatus().connections\"</span>|mongo admin|grep current|awk -F<span class=\"string\">':'</span> <span class=\"string\">'&#123;print $2&#125;'</span>|tr -d <span class=\"string\">' ,'</span>`</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    <span class=\"built_in\">echo</span> <span class=\"variable\">$used_conn</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    ;;</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  available_conn)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    available=`<span class=\"built_in\">echo</span> <span class=\"string\">\"db.serverStatus().connections\"</span>|mongo admin|grep available|awk -F<span class=\"string\">':'</span> <span class=\"string\">'&#123;print $2&#125;'</span>|tr -d <span class=\"string\">' ,'</span>`</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    <span class=\"built_in\">echo</span> <span class=\"variable\">$availabe</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  ;;</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  insert)</span><br><span class=\"line\">    insert=`mongostat -n1 | tail -n 1|awk '&#123;print $1&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $insert</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  query)</span><br><span class=\"line\">    query=`mongostat -n1 | tail -n 1|awk '&#123;print $2&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $query</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  update)</span><br><span class=\"line\">    update=`mongostat -n1 | tail -n 1|awk '&#123;print $3&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $update</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  delete)</span><br><span class=\"line\">    delete=`mongostat -n1 | tail -n 1|awk '&#123;print $4&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $delete</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  getmore)</span><br><span class=\"line\">    getmore=`mongostat -n1 | tail -n 1|awk '&#123;print $5&#125;'|tr -d ' *,'`  </span><br><span class=\"line\">    echo $getmore</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  command)</span><br><span class=\"line\">    command=`mongostat -n1 | tail -n 1|awk '&#123;print $6&#125;'|awk -F'|' '&#123;print $1&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $command</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  vsize)</span><br><span class=\"line\">    vsize=`mongostat -n1 | tail -n 1|awk '&#123;print $10&#125;'|tr -d ' *,G'`</span><br><span class=\"line\">    echo $vsize</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  res)</span><br><span class=\"line\">    res=`mongostat -n1 | tail -n 1|awk '&#123;print $11&#125;'|tr -d ' *,G'`</span><br><span class=\"line\">    echo $res</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  qr)</span><br><span class=\"line\">    qr=`mongostat -n1 | tail -n 1|awk '&#123;print $12&#125;'|awk -F'|' '&#123;print $1&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $qr</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  qw)</span><br><span class=\"line\">    qw=`mongostat -n1 | tail -n 1|awk '&#123;print $12&#125;'|awk -F'|' '&#123;print $2&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $qw</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  ar)</span><br><span class=\"line\">    ar=`mongostat -n1 | tail -n 1|awk '&#123;print $13&#125;'|awk -F'|' '&#123;print $1&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $ar</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  aw)</span><br><span class=\"line\">    aw=`mongostat -n1 | tail -n 1|awk '&#123;print $13&#125;'|awk -F'|' '&#123;print $2&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $aw</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  conn)</span><br><span class=\"line\">    conn=`mongostat -n1 | tail -n 1|awk '&#123;print $16&#125;'|tr -d ' *,'`</span><br><span class=\"line\">    echo $conn</span><br><span class=\"line\">    ;;</span><br><span class=\"line\"></span><br><span class=\"line\">  *)</span><br><span class=\"line\">    echo \"please input  insert|query|update|delete\"</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">esac</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"conf\"><a href=\"#conf\" class=\"headerlink\" title=\"conf\"></a>conf</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat zabbix_mongo.conf</span><br><span class=\"line\">UserParameter=mongo[*],/opt/script/zabbix/mongo.sh $1</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"zabbix","published":1,"author":"xiemx","comments":1,"date":"2016-06-29T02:06:32.000Z","_content":"\n1.zabbix\n\n-\n\nTemplate App Agentless\n\n \n\n![img](/images/img_577330bdc322e.png) \n\n![img](/images/img_577330e1e5d06.png)mysql\n\n![img](/images/img_577330f8871b5.png)  \n\n \n\n![img](/images/img_5773310c679a1.png) \n\n![img](/images/img_5773313591d94.png)\n\n![img](/images/img_57733153a13cb.png)  \n\nTemplate App Agentless\n\nTemplate App Agentless","source":"_posts/zabbix-monitor-port.md","raw":"---\nlayout: post\ntitle: zabbix\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-06-29 10:06:32\ntags: [ ]\ncategories:\n    - zabbix\n#permalink: '/2016/06/29/zabbix-monitor-port'\n---\n\n1.zabbix\n\n-\n\nTemplate App Agentless\n\n \n\n![img](/images/img_577330bdc322e.png) \n\n![img](/images/img_577330e1e5d06.png)mysql\n\n![img](/images/img_577330f8871b5.png)  \n\n \n\n![img](/images/img_5773310c679a1.png) \n\n![img](/images/img_5773313591d94.png)\n\n![img](/images/img_57733153a13cb.png)  \n\nTemplate App Agentless\n\nTemplate App Agentless","slug":"zabbix-monitor-port","updated":"2019-10-21T06:57:42.819Z","photos":[],"link":"","_id":"ck42dyigz00b8u9ur3peouryf","content":"<p>1.zabbix</p>\n<p>-</p>\n<p>Template App Agentless</p>\n<p> </p>\n<p><img src=\"/images/img_577330bdc322e.png\" alt=\"img\"> </p>\n<p><img src=\"/images/img_577330e1e5d06.png\" alt=\"img\">mysql</p>\n<p><img src=\"/images/img_577330f8871b5.png\" alt=\"img\">  </p>\n<p> </p>\n<p><img src=\"/images/img_5773310c679a1.png\" alt=\"img\"> </p>\n<p><img src=\"/images/img_5773313591d94.png\" alt=\"img\"></p>\n<p><img src=\"/images/img_57733153a13cb.png\" alt=\"img\">  </p>\n<p>Template App Agentless</p>\n<p>Template App Agentless</p>\n","site":{"data":{}},"excerpt":"","more":"<p>1.zabbix</p>\n<p>-</p>\n<p>Template App Agentless</p>\n<p> </p>\n<p><img src=\"/images/img_577330bdc322e.png\" alt=\"img\"> </p>\n<p><img src=\"/images/img_577330e1e5d06.png\" alt=\"img\">mysql</p>\n<p><img src=\"/images/img_577330f8871b5.png\" alt=\"img\">  </p>\n<p> </p>\n<p><img src=\"/images/img_5773310c679a1.png\" alt=\"img\"> </p>\n<p><img src=\"/images/img_5773313591d94.png\" alt=\"img\"></p>\n<p><img src=\"/images/img_57733153a13cb.png\" alt=\"img\">  </p>\n<p>Template App Agentless</p>\n<p>Template App Agentless</p>\n"},{"layout":"post","title":"zabbix","published":1,"author":"xiemx","comments":1,"date":"2016-03-25T03:03:04.000Z","_content":"\n1. Key Select \n\n![img](/images/img_56f4a9789a5c5.png)\n\n2. squidkey *all*(default),*run*,*sleep*,*zomb*\n\n![img](/images/img_56f4a9875257e.png)\n\n3. 0squid\n\n![img](/images/img_56f4a99aa9435.png)\n\n4. killtomcat\n\n![img](/images/img_56f4a9ab888d0.png)","source":"_posts/zabbix-monitor-process.md","raw":"---\nlayout: post\ntitle: zabbix\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-03-25 11:03:04\ntags: [ zabbix ]\ncategories:\n    - zabbix\n\n---\n\n1. Key Select \n\n![img](/images/img_56f4a9789a5c5.png)\n\n2. squidkey *all*(default),*run*,*sleep*,*zomb*\n\n![img](/images/img_56f4a9875257e.png)\n\n3. 0squid\n\n![img](/images/img_56f4a99aa9435.png)\n\n4. killtomcat\n\n![img](/images/img_56f4a9ab888d0.png)","slug":"zabbix-monitor-process","updated":"2019-10-21T06:57:42.493Z","photos":[],"link":"","_id":"ck42dyih100bdu9urzuerv6vk","content":"<ol>\n<li>Key Select </li>\n</ol>\n<p><img src=\"/images/img_56f4a9789a5c5.png\" alt=\"img\"></p>\n<ol start=\"2\">\n<li>squidkey <em>all</em>(default),<em>run</em>,<em>sleep</em>,<em>zomb</em></li>\n</ol>\n<p><img src=\"/images/img_56f4a9875257e.png\" alt=\"img\"></p>\n<ol start=\"3\">\n<li>0squid</li>\n</ol>\n<p><img src=\"/images/img_56f4a99aa9435.png\" alt=\"img\"></p>\n<ol start=\"4\">\n<li>killtomcat</li>\n</ol>\n<p><img src=\"/images/img_56f4a9ab888d0.png\" alt=\"img\"></p>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li>Key Select </li>\n</ol>\n<p><img src=\"/images/img_56f4a9789a5c5.png\" alt=\"img\"></p>\n<ol start=\"2\">\n<li>squidkey <em>all</em>(default),<em>run</em>,<em>sleep</em>,<em>zomb</em></li>\n</ol>\n<p><img src=\"/images/img_56f4a9875257e.png\" alt=\"img\"></p>\n<ol start=\"3\">\n<li>0squid</li>\n</ol>\n<p><img src=\"/images/img_56f4a99aa9435.png\" alt=\"img\"></p>\n<ol start=\"4\">\n<li>killtomcat</li>\n</ol>\n<p><img src=\"/images/img_56f4a9ab888d0.png\" alt=\"img\"></p>\n"},{"layout":"post","title":"zabbixredis","published":1,"author":"xiemx","comments":1,"date":"2016-12-18T21:12:43.000Z","_content":"zabbix\n\n### scripts\n\n```shell\ncat redis.sh\n#!/bin/bash\nredis_conn=\"/usr/local/bin/redis-cli\"\nport=$1\n\ncase $2 in \n  \"used_memory\")\n    used_memory=`$redis_conn -p $port info | grep used_memory:|awk -F':' '{print $2}'`\n    echo $used_memory\n    ;;\n  \"ops_sec\")\n    ops=`$redis_conn -p $port info|grep instantaneous_ops_per_sec:|awk -F':' '{print $2}'`\n    echo $ops\n    ;;\n  \"connected_clients\")\n    connected_clients=`$redis_conn -p $port info|grep connected_clients: | awk -F ':' '{print $2}'`\n    echo $connected_clients\n    ;;\n  \"blocked_clients\")\n    blocked_clients=`$redis_conn -p $port info|grep blocked_clients:|awk -F':' '{print $2}'`\n    echo $blocked_clients\n    ;; \n  *)\n    echo \"please input used_memory|ops_sec|connected_clients|blocked_clients\"\n    ;; \nesac\n```\n\n### conf\n\n```yaml\ncat zabbix_redis.conf\n\nUserParameter=redis[*],/opt/script/zabbix/redis.sh $1 $2\n```\n","source":"_posts/zabbix-monitor-redis.md","raw":"---\nlayout: post\ntitle: zabbixredis\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-12-19 05:12:43\ntags: [ zabbix, scripts ]\ncategories:\n    - zabbix\n#permalink: '/2016/12/19/zabbix-monitor-redis'\n---\nzabbix\n\n### scripts\n\n```shell\ncat redis.sh\n#!/bin/bash\nredis_conn=\"/usr/local/bin/redis-cli\"\nport=$1\n\ncase $2 in \n  \"used_memory\")\n    used_memory=`$redis_conn -p $port info | grep used_memory:|awk -F':' '{print $2}'`\n    echo $used_memory\n    ;;\n  \"ops_sec\")\n    ops=`$redis_conn -p $port info|grep instantaneous_ops_per_sec:|awk -F':' '{print $2}'`\n    echo $ops\n    ;;\n  \"connected_clients\")\n    connected_clients=`$redis_conn -p $port info|grep connected_clients: | awk -F ':' '{print $2}'`\n    echo $connected_clients\n    ;;\n  \"blocked_clients\")\n    blocked_clients=`$redis_conn -p $port info|grep blocked_clients:|awk -F':' '{print $2}'`\n    echo $blocked_clients\n    ;; \n  *)\n    echo \"please input used_memory|ops_sec|connected_clients|blocked_clients\"\n    ;; \nesac\n```\n\n### conf\n\n```yaml\ncat zabbix_redis.conf\n\nUserParameter=redis[*],/opt/script/zabbix/redis.sh $1 $2\n```\n","slug":"zabbix-monitor-redis","updated":"2019-10-21T06:57:42.697Z","photos":[],"link":"","_id":"ck42dyih300bgu9url7dxic2n","content":"<p>zabbix</p>\n<h3 id=\"scripts\"><a href=\"#scripts\" class=\"headerlink\" title=\"scripts\"></a>scripts</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat redis.sh</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">redis_conn=\"/usr/local/bin/redis-cli\"</span><br><span class=\"line\">port=$1</span><br><span class=\"line\"></span><br><span class=\"line\">case $2 in </span><br><span class=\"line\">  \"used_memory\")</span><br><span class=\"line\">    used_memory=`$redis_conn -p $port info | grep used_memory:|awk -F':' '&#123;print $2&#125;'`</span><br><span class=\"line\">    echo $used_memory</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  \"ops_sec\")</span><br><span class=\"line\">    ops=`$redis_conn -p $port info|grep instantaneous_ops_per_sec:|awk -F':' '&#123;print $2&#125;'`</span><br><span class=\"line\">    echo $ops</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  \"connected_clients\")</span><br><span class=\"line\">    connected_clients=`$redis_conn -p $port info|grep connected_clients: | awk -F ':' '&#123;print $2&#125;'`</span><br><span class=\"line\">    echo $connected_clients</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  \"blocked_clients\")</span><br><span class=\"line\">    blocked_clients=`$redis_conn -p $port info|grep blocked_clients:|awk -F':' '&#123;print $2&#125;'`</span><br><span class=\"line\">    echo $blocked_clients</span><br><span class=\"line\">    ;; </span><br><span class=\"line\">  *)</span><br><span class=\"line\">    echo \"please input used_memory|ops_sec|connected_clients|blocked_clients\"</span><br><span class=\"line\">    ;; </span><br><span class=\"line\">esac</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"conf\"><a href=\"#conf\" class=\"headerlink\" title=\"conf\"></a>conf</h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">cat</span> <span class=\"string\">zabbix_redis.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">UserParameter=redis[*],/opt/script/zabbix/redis.sh</span> <span class=\"string\">$1</span> <span class=\"string\">$2</span></span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p>zabbix</p>\n<h3 id=\"scripts\"><a href=\"#scripts\" class=\"headerlink\" title=\"scripts\"></a>scripts</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat redis.sh</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">!/bin/bash</span></span><br><span class=\"line\">redis_conn=\"/usr/local/bin/redis-cli\"</span><br><span class=\"line\">port=$1</span><br><span class=\"line\"></span><br><span class=\"line\">case $2 in </span><br><span class=\"line\">  \"used_memory\")</span><br><span class=\"line\">    used_memory=`$redis_conn -p $port info | grep used_memory:|awk -F':' '&#123;print $2&#125;'`</span><br><span class=\"line\">    echo $used_memory</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  \"ops_sec\")</span><br><span class=\"line\">    ops=`$redis_conn -p $port info|grep instantaneous_ops_per_sec:|awk -F':' '&#123;print $2&#125;'`</span><br><span class=\"line\">    echo $ops</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  \"connected_clients\")</span><br><span class=\"line\">    connected_clients=`$redis_conn -p $port info|grep connected_clients: | awk -F ':' '&#123;print $2&#125;'`</span><br><span class=\"line\">    echo $connected_clients</span><br><span class=\"line\">    ;;</span><br><span class=\"line\">  \"blocked_clients\")</span><br><span class=\"line\">    blocked_clients=`$redis_conn -p $port info|grep blocked_clients:|awk -F':' '&#123;print $2&#125;'`</span><br><span class=\"line\">    echo $blocked_clients</span><br><span class=\"line\">    ;; </span><br><span class=\"line\">  *)</span><br><span class=\"line\">    echo \"please input used_memory|ops_sec|connected_clients|blocked_clients\"</span><br><span class=\"line\">    ;; </span><br><span class=\"line\">esac</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"conf\"><a href=\"#conf\" class=\"headerlink\" title=\"conf\"></a>conf</h3><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">cat</span> <span class=\"string\">zabbix_redis.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">UserParameter=redis[*],/opt/script/zabbix/redis.sh</span> <span class=\"string\">$1</span> <span class=\"string\">$2</span></span><br></pre></td></tr></table></figure>\n\n"},{"layout":"post","title":"zabbix ssl","published":1,"author":"xiemx","comments":1,"date":"2016-12-05T02:12:45.000Z","_content":"servername\n\n```shell\nmingxu.xie@t-slq-ops-1:/opt/script/zabbix# cat check_ssl_cert.sh \n#/bin/bash\nhost=1\nport=2\nend_date=openssl s_client -host $host -port $port -servername $host -showcerts &lt;/dev/null 2>/dev/null|sed -n '/BEGIN CERTIFICATE/,/END CERT/p' |openssl x509 -text 2>/dev/null |sed -n 's/ *Not After : *//p'\nif [ -n \"end_date\" ];then\n    end_date_seconds=`date '+%s' --date \"end_date\"now_seconds=date '+%s'`\n    echo \"(end_date_seconds-now_seconds)/24/3600\" | bc\nfi\n```","source":"_posts/zabbix-monitor-ssl-cert.md","raw":"---\nlayout: post\ntitle: zabbix ssl\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-12-05 10:12:45\ntags: [ ]\ncategories:\n    - zabbix\n#permalink: '/2016/12/05/zabbix-monitor-ssl-cert'\n---\nservername\n\n```shell\nmingxu.xie@t-slq-ops-1:/opt/script/zabbix# cat check_ssl_cert.sh \n#/bin/bash\nhost=1\nport=2\nend_date=openssl s_client -host $host -port $port -servername $host -showcerts &lt;/dev/null 2>/dev/null|sed -n '/BEGIN CERTIFICATE/,/END CERT/p' |openssl x509 -text 2>/dev/null |sed -n 's/ *Not After : *//p'\nif [ -n \"end_date\" ];then\n    end_date_seconds=`date '+%s' --date \"end_date\"now_seconds=date '+%s'`\n    echo \"(end_date_seconds-now_seconds)/24/3600\" | bc\nfi\n```","slug":"zabbix-monitor-ssl-cert","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyih400bku9urjjtg9xsl","content":"<p>servername</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mingxu.xie@t-slq-ops-1:/opt/script/zabbix# cat check_ssl_cert.sh </span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">/bin/bash</span></span><br><span class=\"line\">host=1</span><br><span class=\"line\">port=2</span><br><span class=\"line\">end_date=openssl s_client -host $host -port $port -servername $host -showcerts &amp;lt;/dev/null 2&gt;/dev/null|sed -n '/BEGIN CERTIFICATE/,/END CERT/p' |openssl x509 -text 2&gt;/dev/null |sed -n 's/ *Not After : *//p'</span><br><span class=\"line\">if [ -n \"end_date\" ];then</span><br><span class=\"line\">    end_date_seconds=`date '+%s' --date \"end_date\"now_seconds=date '+%s'`</span><br><span class=\"line\">    echo \"(end_date_seconds-now_seconds)/24/3600\" | bc</span><br><span class=\"line\">fi</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>servername</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mingxu.xie@t-slq-ops-1:/opt/script/zabbix# cat check_ssl_cert.sh </span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">/bin/bash</span></span><br><span class=\"line\">host=1</span><br><span class=\"line\">port=2</span><br><span class=\"line\">end_date=openssl s_client -host $host -port $port -servername $host -showcerts &amp;lt;/dev/null 2&gt;/dev/null|sed -n '/BEGIN CERTIFICATE/,/END CERT/p' |openssl x509 -text 2&gt;/dev/null |sed -n 's/ *Not After : *//p'</span><br><span class=\"line\">if [ -n \"end_date\" ];then</span><br><span class=\"line\">    end_date_seconds=`date '+%s' --date \"end_date\"now_seconds=date '+%s'`</span><br><span class=\"line\">    echo \"(end_date_seconds-now_seconds)/24/3600\" | bc</span><br><span class=\"line\">fi</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"zabbix-server.conf","published":1,"author":"xiemx","comments":1,"date":"2016-08-31T21:09:48.000Z","_content":"\n```markdown\nAlertScriptsPath /usr/local/share/zabbix/alertscripts \n\nAllowRoot 0 root0:1:zabbixzabbixroot\n\nCacheSize  128K-8G 8M hostitemtrigger2.2.32G8G\n\nCacheUpdateFrequency 1-3600 60 \n\nDBHost localhost \n\nDBName  \n\nDBPassword  \n\nDBPort 1024-65535 :3306 SQLiteDBsocket\n\nDBSchema Schema.  IBM DB2  PostgreSQL.\n\nDBSocket /tmp/mysql.sock mysql sock\n\nDebugLevel 0-5 3 : debug 0 -  1 - critical 2 - error 3 - warnings 4 -  5 - webvmware\n\nExternalScripts  /usr/local/share/zabbix/externalscripts  \n\nFping6Location /usr/sbin/fping6 fping6fpingzabbixrootfping6 SUID\n\nFpingLocation /usr/sbin/fping :\n\nHistoryCacheSize 128K-2G 8M  \n\nHistoryTextCacheSize 128K-2G 16M character, text log.\n\nHousekeepingFrequency 0-24 1 housekeepserver30\n\nInclude include/usr/local/zabbix-2.4.4/conf/ttlsa.com/*.conf\n\nJavaGateway Zabbix Java gatewayJava pollers\n\nJavaGatewayPort 1024-32767 10052 Zabbix Java gateway\n\nListenIP 0.0.0.0 IPip127.0.0.1,10.10.0.2\n\nListenPort 1024-32767 10051 \n\nLoadModule : LoadModule=LoadModulePath\n\nLoadModulePath \n\nLogFile /data/logs/zabbix/zabbix-server.log\n\nLogFileSize 0-1024 1 0rotationrotation\n\nLogSlowQueries 0-3600000 0 0DebugLevel=3\n\nMaxHousekeeperDelete  0-1000000 5000 housekeepingMaxHousekeeperDelete\n\nPidFile /tmp/zabbix_server.pid PID\n\nProxyConfigFrequency 1-604800 3600 proxyserverproxy\n\nProxyDataFrequency 1-3600 :1 zabbix serverproxy\n\nSenderFrequency 5-3600 30 \n\nSNMPTrapperFile /tmp/zabbix_traps.tmp SNMP trapserver\n\nSourceIP IP\n\nSSHKeyLocation SSH\n\nSSLCertLocation SSLweb\n\nSSLKeyLocation SSLweb\n\nSSLCALocation SSL,CACA\n\nStartDBSyncers 1-100 4 foke DB Syncers1.8.564\n\nStartDiscoverers 0-250 1 pre-forked discoverers1.8.5255\n\nStartHTTPPollers 0-1000 1 pre-forked HTTP pollers1.8.5255\n\nStartIPMIPollers 0-1000 0 pre-forked IPMI pollers1.8.5255\n\nTimeout 1-30 3 agentsnmpexternal check\n\nTmpDir /tmp\n\nTrapperTimeout 1-300 300 trapper\n\nTrendCacheSize 128K-2G 4M \n\nUnavailableDelay 1-3600 60 \n\nUnreachableDelay 1-3600 15 \n\nUnreachablePeriod 1-3600 45 \n\nUser zabbix zabbix serverrootshellrootxiemxzabbix serverxiemx\n\nValueCacheSize 0,128K-64G 8M 0history value5server\n```","source":"_posts/zabbix-server-configure.md","raw":"---\nlayout: post\ntitle: zabbix-server.conf\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-09-01 05:09:48\ntags: [ ]\ncategories:\n    - zabbix\n#permalink: '/2016/09/01/zabbix-server-configure'\n---\n\n```markdown\nAlertScriptsPath /usr/local/share/zabbix/alertscripts \n\nAllowRoot 0 root0:1:zabbixzabbixroot\n\nCacheSize  128K-8G 8M hostitemtrigger2.2.32G8G\n\nCacheUpdateFrequency 1-3600 60 \n\nDBHost localhost \n\nDBName  \n\nDBPassword  \n\nDBPort 1024-65535 :3306 SQLiteDBsocket\n\nDBSchema Schema.  IBM DB2  PostgreSQL.\n\nDBSocket /tmp/mysql.sock mysql sock\n\nDebugLevel 0-5 3 : debug 0 -  1 - critical 2 - error 3 - warnings 4 -  5 - webvmware\n\nExternalScripts  /usr/local/share/zabbix/externalscripts  \n\nFping6Location /usr/sbin/fping6 fping6fpingzabbixrootfping6 SUID\n\nFpingLocation /usr/sbin/fping :\n\nHistoryCacheSize 128K-2G 8M  \n\nHistoryTextCacheSize 128K-2G 16M character, text log.\n\nHousekeepingFrequency 0-24 1 housekeepserver30\n\nInclude include/usr/local/zabbix-2.4.4/conf/ttlsa.com/*.conf\n\nJavaGateway Zabbix Java gatewayJava pollers\n\nJavaGatewayPort 1024-32767 10052 Zabbix Java gateway\n\nListenIP 0.0.0.0 IPip127.0.0.1,10.10.0.2\n\nListenPort 1024-32767 10051 \n\nLoadModule : LoadModule=LoadModulePath\n\nLoadModulePath \n\nLogFile /data/logs/zabbix/zabbix-server.log\n\nLogFileSize 0-1024 1 0rotationrotation\n\nLogSlowQueries 0-3600000 0 0DebugLevel=3\n\nMaxHousekeeperDelete  0-1000000 5000 housekeepingMaxHousekeeperDelete\n\nPidFile /tmp/zabbix_server.pid PID\n\nProxyConfigFrequency 1-604800 3600 proxyserverproxy\n\nProxyDataFrequency 1-3600 :1 zabbix serverproxy\n\nSenderFrequency 5-3600 30 \n\nSNMPTrapperFile /tmp/zabbix_traps.tmp SNMP trapserver\n\nSourceIP IP\n\nSSHKeyLocation SSH\n\nSSLCertLocation SSLweb\n\nSSLKeyLocation SSLweb\n\nSSLCALocation SSL,CACA\n\nStartDBSyncers 1-100 4 foke DB Syncers1.8.564\n\nStartDiscoverers 0-250 1 pre-forked discoverers1.8.5255\n\nStartHTTPPollers 0-1000 1 pre-forked HTTP pollers1.8.5255\n\nStartIPMIPollers 0-1000 0 pre-forked IPMI pollers1.8.5255\n\nTimeout 1-30 3 agentsnmpexternal check\n\nTmpDir /tmp\n\nTrapperTimeout 1-300 300 trapper\n\nTrendCacheSize 128K-2G 4M \n\nUnavailableDelay 1-3600 60 \n\nUnreachableDelay 1-3600 15 \n\nUnreachablePeriod 1-3600 45 \n\nUser zabbix zabbix serverrootshellrootxiemxzabbix serverxiemx\n\nValueCacheSize 0,128K-64G 8M 0history value5server\n```","slug":"zabbix-server-configure","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyih500bou9ur0a68v93p","content":"<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AlertScriptsPath /usr/local/share/zabbix/alertscripts </span><br><span class=\"line\"></span><br><span class=\"line\">AllowRoot 0 root0:1:zabbixzabbixroot</span><br><span class=\"line\"></span><br><span class=\"line\">CacheSize  128K-8G 8M hostitemtrigger2.2.32G8G</span><br><span class=\"line\"></span><br><span class=\"line\">CacheUpdateFrequency 1-3600 60 </span><br><span class=\"line\"></span><br><span class=\"line\">DBHost localhost </span><br><span class=\"line\"></span><br><span class=\"line\">DBName  </span><br><span class=\"line\"></span><br><span class=\"line\">DBPassword  </span><br><span class=\"line\"></span><br><span class=\"line\">DBPort 1024-65535 :3306 SQLiteDBsocket</span><br><span class=\"line\"></span><br><span class=\"line\">DBSchema Schema.  IBM DB2  PostgreSQL.</span><br><span class=\"line\"></span><br><span class=\"line\">DBSocket /tmp/mysql.sock mysql sock</span><br><span class=\"line\"></span><br><span class=\"line\">DebugLevel 0-5 3 : debug 0 -  1 - critical 2 - error 3 - warnings 4 -  5 - webvmware</span><br><span class=\"line\"></span><br><span class=\"line\">ExternalScripts  /usr/local/share/zabbix/externalscripts  </span><br><span class=\"line\"></span><br><span class=\"line\">Fping6Location /usr/sbin/fping6 fping6fpingzabbixrootfping6 SUID</span><br><span class=\"line\"></span><br><span class=\"line\">FpingLocation /usr/sbin/fping :</span><br><span class=\"line\"></span><br><span class=\"line\">HistoryCacheSize 128K-2G 8M  </span><br><span class=\"line\"></span><br><span class=\"line\">HistoryTextCacheSize 128K-2G 16M character, text log.</span><br><span class=\"line\"></span><br><span class=\"line\">HousekeepingFrequency 0-24 1 housekeepserver30</span><br><span class=\"line\"></span><br><span class=\"line\">Include include/usr/local/zabbix-2.4.4/conf/ttlsa.com/*.conf</span><br><span class=\"line\"></span><br><span class=\"line\">JavaGateway Zabbix Java gatewayJava pollers</span><br><span class=\"line\"></span><br><span class=\"line\">JavaGatewayPort 1024-32767 10052 Zabbix Java gateway</span><br><span class=\"line\"></span><br><span class=\"line\">ListenIP 0.0.0.0 IPip127.0.0.1,10.10.0.2</span><br><span class=\"line\"></span><br><span class=\"line\">ListenPort 1024-32767 10051 </span><br><span class=\"line\"></span><br><span class=\"line\">LoadModule : LoadModule=LoadModulePath</span><br><span class=\"line\"></span><br><span class=\"line\">LoadModulePath </span><br><span class=\"line\"></span><br><span class=\"line\">LogFile /data/logs/zabbix/zabbix-server.log</span><br><span class=\"line\"></span><br><span class=\"line\">LogFileSize 0-1024 1 0rotationrotation</span><br><span class=\"line\"></span><br><span class=\"line\">LogSlowQueries 0-3600000 0 0DebugLevel=3</span><br><span class=\"line\"></span><br><span class=\"line\">MaxHousekeeperDelete  0-1000000 5000 housekeepingMaxHousekeeperDelete</span><br><span class=\"line\"></span><br><span class=\"line\">PidFile /tmp/zabbix_server.pid PID</span><br><span class=\"line\"></span><br><span class=\"line\">ProxyConfigFrequency 1-604800 3600 proxyserverproxy</span><br><span class=\"line\"></span><br><span class=\"line\">ProxyDataFrequency 1-3600 :1 zabbix serverproxy</span><br><span class=\"line\"></span><br><span class=\"line\">SenderFrequency 5-3600 30 </span><br><span class=\"line\"></span><br><span class=\"line\">SNMPTrapperFile /tmp/zabbix_traps.tmp SNMP trapserver</span><br><span class=\"line\"></span><br><span class=\"line\">SourceIP IP</span><br><span class=\"line\"></span><br><span class=\"line\">SSHKeyLocation SSH</span><br><span class=\"line\"></span><br><span class=\"line\">SSLCertLocation SSLweb</span><br><span class=\"line\"></span><br><span class=\"line\">SSLKeyLocation SSLweb</span><br><span class=\"line\"></span><br><span class=\"line\">SSLCALocation SSL,CACA</span><br><span class=\"line\"></span><br><span class=\"line\">StartDBSyncers 1-100 4 foke DB Syncers1.8.564</span><br><span class=\"line\"></span><br><span class=\"line\">StartDiscoverers 0-250 1 pre-forked discoverers1.8.5255</span><br><span class=\"line\"></span><br><span class=\"line\">StartHTTPPollers 0-1000 1 pre-forked HTTP pollers1.8.5255</span><br><span class=\"line\"></span><br><span class=\"line\">StartIPMIPollers 0-1000 0 pre-forked IPMI pollers1.8.5255</span><br><span class=\"line\"></span><br><span class=\"line\">Timeout 1-30 3 agentsnmpexternal check</span><br><span class=\"line\"></span><br><span class=\"line\">TmpDir /tmp</span><br><span class=\"line\"></span><br><span class=\"line\">TrapperTimeout 1-300 300 trapper</span><br><span class=\"line\"></span><br><span class=\"line\">TrendCacheSize 128K-2G 4M </span><br><span class=\"line\"></span><br><span class=\"line\">UnavailableDelay 1-3600 60 </span><br><span class=\"line\"></span><br><span class=\"line\">UnreachableDelay 1-3600 15 </span><br><span class=\"line\"></span><br><span class=\"line\">UnreachablePeriod 1-3600 45 </span><br><span class=\"line\"></span><br><span class=\"line\">User zabbix zabbix serverrootshellrootxiemxzabbix serverxiemx</span><br><span class=\"line\"></span><br><span class=\"line\">ValueCacheSize 0,128K-64G 8M 0history value5server</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AlertScriptsPath /usr/local/share/zabbix/alertscripts </span><br><span class=\"line\"></span><br><span class=\"line\">AllowRoot 0 root0:1:zabbixzabbixroot</span><br><span class=\"line\"></span><br><span class=\"line\">CacheSize  128K-8G 8M hostitemtrigger2.2.32G8G</span><br><span class=\"line\"></span><br><span class=\"line\">CacheUpdateFrequency 1-3600 60 </span><br><span class=\"line\"></span><br><span class=\"line\">DBHost localhost </span><br><span class=\"line\"></span><br><span class=\"line\">DBName  </span><br><span class=\"line\"></span><br><span class=\"line\">DBPassword  </span><br><span class=\"line\"></span><br><span class=\"line\">DBPort 1024-65535 :3306 SQLiteDBsocket</span><br><span class=\"line\"></span><br><span class=\"line\">DBSchema Schema.  IBM DB2  PostgreSQL.</span><br><span class=\"line\"></span><br><span class=\"line\">DBSocket /tmp/mysql.sock mysql sock</span><br><span class=\"line\"></span><br><span class=\"line\">DebugLevel 0-5 3 : debug 0 -  1 - critical 2 - error 3 - warnings 4 -  5 - webvmware</span><br><span class=\"line\"></span><br><span class=\"line\">ExternalScripts  /usr/local/share/zabbix/externalscripts  </span><br><span class=\"line\"></span><br><span class=\"line\">Fping6Location /usr/sbin/fping6 fping6fpingzabbixrootfping6 SUID</span><br><span class=\"line\"></span><br><span class=\"line\">FpingLocation /usr/sbin/fping :</span><br><span class=\"line\"></span><br><span class=\"line\">HistoryCacheSize 128K-2G 8M  </span><br><span class=\"line\"></span><br><span class=\"line\">HistoryTextCacheSize 128K-2G 16M character, text log.</span><br><span class=\"line\"></span><br><span class=\"line\">HousekeepingFrequency 0-24 1 housekeepserver30</span><br><span class=\"line\"></span><br><span class=\"line\">Include include/usr/local/zabbix-2.4.4/conf/ttlsa.com/*.conf</span><br><span class=\"line\"></span><br><span class=\"line\">JavaGateway Zabbix Java gatewayJava pollers</span><br><span class=\"line\"></span><br><span class=\"line\">JavaGatewayPort 1024-32767 10052 Zabbix Java gateway</span><br><span class=\"line\"></span><br><span class=\"line\">ListenIP 0.0.0.0 IPip127.0.0.1,10.10.0.2</span><br><span class=\"line\"></span><br><span class=\"line\">ListenPort 1024-32767 10051 </span><br><span class=\"line\"></span><br><span class=\"line\">LoadModule : LoadModule=LoadModulePath</span><br><span class=\"line\"></span><br><span class=\"line\">LoadModulePath </span><br><span class=\"line\"></span><br><span class=\"line\">LogFile /data/logs/zabbix/zabbix-server.log</span><br><span class=\"line\"></span><br><span class=\"line\">LogFileSize 0-1024 1 0rotationrotation</span><br><span class=\"line\"></span><br><span class=\"line\">LogSlowQueries 0-3600000 0 0DebugLevel=3</span><br><span class=\"line\"></span><br><span class=\"line\">MaxHousekeeperDelete  0-1000000 5000 housekeepingMaxHousekeeperDelete</span><br><span class=\"line\"></span><br><span class=\"line\">PidFile /tmp/zabbix_server.pid PID</span><br><span class=\"line\"></span><br><span class=\"line\">ProxyConfigFrequency 1-604800 3600 proxyserverproxy</span><br><span class=\"line\"></span><br><span class=\"line\">ProxyDataFrequency 1-3600 :1 zabbix serverproxy</span><br><span class=\"line\"></span><br><span class=\"line\">SenderFrequency 5-3600 30 </span><br><span class=\"line\"></span><br><span class=\"line\">SNMPTrapperFile /tmp/zabbix_traps.tmp SNMP trapserver</span><br><span class=\"line\"></span><br><span class=\"line\">SourceIP IP</span><br><span class=\"line\"></span><br><span class=\"line\">SSHKeyLocation SSH</span><br><span class=\"line\"></span><br><span class=\"line\">SSLCertLocation SSLweb</span><br><span class=\"line\"></span><br><span class=\"line\">SSLKeyLocation SSLweb</span><br><span class=\"line\"></span><br><span class=\"line\">SSLCALocation SSL,CACA</span><br><span class=\"line\"></span><br><span class=\"line\">StartDBSyncers 1-100 4 foke DB Syncers1.8.564</span><br><span class=\"line\"></span><br><span class=\"line\">StartDiscoverers 0-250 1 pre-forked discoverers1.8.5255</span><br><span class=\"line\"></span><br><span class=\"line\">StartHTTPPollers 0-1000 1 pre-forked HTTP pollers1.8.5255</span><br><span class=\"line\"></span><br><span class=\"line\">StartIPMIPollers 0-1000 0 pre-forked IPMI pollers1.8.5255</span><br><span class=\"line\"></span><br><span class=\"line\">Timeout 1-30 3 agentsnmpexternal check</span><br><span class=\"line\"></span><br><span class=\"line\">TmpDir /tmp</span><br><span class=\"line\"></span><br><span class=\"line\">TrapperTimeout 1-300 300 trapper</span><br><span class=\"line\"></span><br><span class=\"line\">TrendCacheSize 128K-2G 4M </span><br><span class=\"line\"></span><br><span class=\"line\">UnavailableDelay 1-3600 60 </span><br><span class=\"line\"></span><br><span class=\"line\">UnreachableDelay 1-3600 15 </span><br><span class=\"line\"></span><br><span class=\"line\">UnreachablePeriod 1-3600 45 </span><br><span class=\"line\"></span><br><span class=\"line\">User zabbix zabbix serverrootshellrootxiemxzabbix serverxiemx</span><br><span class=\"line\"></span><br><span class=\"line\">ValueCacheSize 0,128K-64G 8M 0history value5server</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"zabbix","published":1,"author":"xiemx","comments":1,"date":"2016-12-05T01:12:36.000Z","_content":"\n\n\n\n\n[https://www.zabbix.com/documentation/4.0/manual/appendix/triggers/functions](https://www.zabbix.com/documentation/4.0/manual/appendix/triggers/functions)\n\n","source":"_posts/zabbix-trigger-function.md","raw":"---\nlayout: post\ntitle: zabbix\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-12-05 09:12:36\ntags: [ zabbix ]\ncategories:\n    - zabbix\n#permalink: '/2016/12/05/zabbix-trigger-function'\n---\n\n\n\n\n\n[https://www.zabbix.com/documentation/4.0/manual/appendix/triggers/functions](https://www.zabbix.com/documentation/4.0/manual/appendix/triggers/functions)\n\n","slug":"zabbix-trigger-function","updated":"2019-10-21T06:57:42.328Z","photos":[],"link":"","_id":"ck42dyih600bsu9ur5bnjcns7","content":"<p></p>\n<p><a href=\"https://www.zabbix.com/documentation/4.0/manual/appendix/triggers/functions\" target=\"_blank\" rel=\"noopener\">https://www.zabbix.com/documentation/4.0/manual/appendix/triggers/functions</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p></p>\n<p><a href=\"https://www.zabbix.com/documentation/4.0/manual/appendix/triggers/functions\" target=\"_blank\" rel=\"noopener\">https://www.zabbix.com/documentation/4.0/manual/appendix/triggers/functions</a></p>\n"},{"layout":"post","title":"Zentaopms","published":1,"author":"xiemx","comments":1,"date":"2016-03-25T03:03:57.000Z","_content":"\n\n\n \n\n1. \n\n   ```shell\n   wget http://sourceforge.net/projects/zentao/files/8.1.3/ZenTaoPMS.8.1.3.zip/download\n   ```\n\n2. web\n\n    ![img](/images/img_56f4aa5d219ba-20190917143633356.png)\n\n3. \n\n   ```sql\n   create database zentao;grant all zentao.* to zentao@localhost identified by 'zentap';\n   ```\n\n   \n\n   ![img](/images/img_56f4aa6c69a26-20190917143633077.png)\n\n4. Web\n\n   `http://localhost/zentaopms/www/install.php`dz\n\n   \n\n5. zentaopms\n\n   loader-wizardhttp://www.ioncube.com/loader-wizard/loader-wizard.zip webDocumentRoot\n\n   \n\n6. loader-wizard.php\n  ![img](/images/img_56f4aa815cb3c-20190917143633401.png)\n\n\n7. webloader.php\n\n   ![img](/images/img_56f4aa8c14ae0-20190917145027287.png)\n\n   \n\n8. zentaopms\n  ![img](/images/img_56f4aa989af5e-20190917143633212.png)\n\n \n\n","source":"_posts/zentaopms-deployment.md","raw":"---\nlayout: post\ntitle: Zentaopms\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-03-25 11:03:57\ntags: [ zentaopms, deployment]\ncategories:\n    - 'zentaopms'\n    - 'deployment'\n#permalink: '/2016/03/25/zentaopms-deployment'\n---\n\n\n\n \n\n1. \n\n   ```shell\n   wget http://sourceforge.net/projects/zentao/files/8.1.3/ZenTaoPMS.8.1.3.zip/download\n   ```\n\n2. web\n\n    ![img](/images/img_56f4aa5d219ba-20190917143633356.png)\n\n3. \n\n   ```sql\n   create database zentao;grant all zentao.* to zentao@localhost identified by 'zentap';\n   ```\n\n   \n\n   ![img](/images/img_56f4aa6c69a26-20190917143633077.png)\n\n4. Web\n\n   `http://localhost/zentaopms/www/install.php`dz\n\n   \n\n5. zentaopms\n\n   loader-wizardhttp://www.ioncube.com/loader-wizard/loader-wizard.zip webDocumentRoot\n\n   \n\n6. loader-wizard.php\n  ![img](/images/img_56f4aa815cb3c-20190917143633401.png)\n\n\n7. webloader.php\n\n   ![img](/images/img_56f4aa8c14ae0-20190917145027287.png)\n\n   \n\n8. zentaopms\n  ![img](/images/img_56f4aa989af5e-20190917143633212.png)\n\n \n\n","slug":"zentaopms-deployment","updated":"2019-10-21T06:57:43.061Z","photos":[],"link":"","_id":"ck42dyih700bwu9urgfcgiqk6","content":"<ol>\n<li><p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://sourceforge.net/projects/zentao/files/8.1.3/ZenTaoPMS.8.1.3.zip/download</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>web</p>\n<p> <img src=\"/images/img_56f4aa5d219ba-20190917143633356.png\" alt=\"img\"></p>\n</li>\n<li><p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> zentao;<span class=\"keyword\">grant</span> <span class=\"keyword\">all</span> zentao.* <span class=\"keyword\">to</span> zentao@localhost <span class=\"keyword\">identified</span> <span class=\"keyword\">by</span> <span class=\"string\">'zentap'</span>;</span><br></pre></td></tr></table></figure>\n\n\n\n</li>\n</ol>\n<p>   <img src=\"/images/img_56f4aa6c69a26-20190917143633077.png\" alt=\"img\"></p>\n<ol start=\"4\">\n<li><p>Web</p>\n<p><code>http://localhost/zentaopms/www/install.php</code>dz</p>\n</li>\n</ol>\n<ol start=\"5\">\n<li><p>zentaopms</p>\n<p>loader-wizard<a href=\"http://www.ioncube.com/loader-wizard/loader-wizard.zip\" target=\"_blank\" rel=\"noopener\">http://www.ioncube.com/loader-wizard/loader-wizard.zip</a> webDocumentRoot</p>\n</li>\n</ol>\n<ol start=\"6\">\n<li>loader-wizard.php<br><img src=\"/images/img_56f4aa815cb3c-20190917143633401.png\" alt=\"img\"></li>\n</ol>\n<ol start=\"7\">\n<li><p>webloader.php</p>\n<p><img src=\"/images/img_56f4aa8c14ae0-20190917145027287.png\" alt=\"img\"></p>\n<p></p>\n</li>\n<li><p>zentaopms<br><img src=\"/images/img_56f4aa989af5e-20190917143633212.png\" alt=\"img\"></p>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<ol>\n<li><p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://sourceforge.net/projects/zentao/files/8.1.3/ZenTaoPMS.8.1.3.zip/download</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>web</p>\n<p> <img src=\"/images/img_56f4aa5d219ba-20190917143633356.png\" alt=\"img\"></p>\n</li>\n<li><p></p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> zentao;<span class=\"keyword\">grant</span> <span class=\"keyword\">all</span> zentao.* <span class=\"keyword\">to</span> zentao@localhost <span class=\"keyword\">identified</span> <span class=\"keyword\">by</span> <span class=\"string\">'zentap'</span>;</span><br></pre></td></tr></table></figure>\n\n\n\n</li>\n</ol>\n<p>   <img src=\"/images/img_56f4aa6c69a26-20190917143633077.png\" alt=\"img\"></p>\n<ol start=\"4\">\n<li><p>Web</p>\n<p><code>http://localhost/zentaopms/www/install.php</code>dz</p>\n</li>\n</ol>\n<ol start=\"5\">\n<li><p>zentaopms</p>\n<p>loader-wizard<a href=\"http://www.ioncube.com/loader-wizard/loader-wizard.zip\" target=\"_blank\" rel=\"noopener\">http://www.ioncube.com/loader-wizard/loader-wizard.zip</a> webDocumentRoot</p>\n</li>\n</ol>\n<ol start=\"6\">\n<li>loader-wizard.php<br><img src=\"/images/img_56f4aa815cb3c-20190917143633401.png\" alt=\"img\"></li>\n</ol>\n<ol start=\"7\">\n<li><p>webloader.php</p>\n<p><img src=\"/images/img_56f4aa8c14ae0-20190917145027287.png\" alt=\"img\"></p>\n<p></p>\n</li>\n<li><p>zentaopms<br><img src=\"/images/img_56f4aa989af5e-20190917143633212.png\" alt=\"img\"></p>\n</li>\n</ol>\n"},{"layout":"post","title":"Apache","published":1,"author":"xiemx","comments":1,"date":"2016-01-17T03:01:54.000Z","_content":"```conf\n[root@localhost ~]# grep -v '^#\\|^$\\|#' /etc/httpd/conf/httpd.conf\nServerTokens OS   headerApache\n\n\nServerRoot \"/etc/httpd\"   \nPidFile run/httpd.pid     PID\nTimeout 60                60\nKeepAlive Off             \nMaxKeepAliveRequests 100  \n\n\nKeepAliveTimeout 15       \n\n15\n<IfModule prefork.c>      Prefork MPM\n\nRed hat\nStartServers       8      \nMinSpareServers    5      \nMaxSpareServers   20      \nServerLimit      256      \nMaxClients       256      MaxClients=ServerLimit*\n\n\nMaxRequestsPerChild  4000 \n\n1000\n</IfModule>\n<IfModule worker.c>      Worker MPM\nStartServers         4\nMaxClients         300\nMinSpareThreads     25\nMaxSpareThreads     75\nThreadsPerChild     25\nMaxRequestsPerChild  0\n</IfModule>\nListen 80    \nLoadModule auth_basic_module modules/mod_auth_basic.so\nLoadModule auth_digest_module modules/mod_auth_digest.so\nLoadModule authn_file_module modules/mod_authn_file.so\nLoadModule authn_alias_module modules/mod_authn_alias.so\nLoadModule authn_anon_module modules/mod_authn_anon.so\nLoadModule authn_dbm_module modules/mod_authn_dbm.so\nLoadModule authn_default_module modules/mod_authn_default.so\nLoadModule authz_host_module modules/mod_authz_host.so\nLoadModule authz_user_module modules/mod_authz_user.so\nLoadModule authz_owner_module modules/mod_authz_owner.so\nLoadModule authz_groupfile_module modules/mod_authz_groupfile.so\nLoadModule authz_dbm_module modules/mod_authz_dbm.so\nLoadModule authz_default_module modules/mod_authz_default.so\nLoadModule ldap_module modules/mod_ldap.so\nLoadModule authnz_ldap_module modules/mod_authnz_ldap.so\nLoadModule include_module modules/mod_include.so\nLoadModule log_config_module modules/mod_log_config.so\nLoadModule logio_module modules/mod_logio.so\nLoadModule env_module modules/mod_env.so\nLoadModule ext_filter_module modules/mod_ext_filter.so\nLoadModule mime_magic_module modules/mod_mime_magic.so\nLoadModule expires_module modules/mod_expires.so\nLoadModule deflate_module modules/mod_deflate.so\nLoadModule headers_module modules/mod_headers.so\nLoadModule usertrack_module modules/mod_usertrack.so\nLoadModule setenvif_module modules/mod_setenvif.so\nLoadModule mime_module modules/mod_mime.so\nLoadModule dav_module modules/mod_dav.so\nLoadModule status_module modules/mod_status.so\nLoadModule autoindex_module modules/mod_autoindex.so\nLoadModule info_module modules/mod_info.so\nLoadModule dav_fs_module modules/mod_dav_fs.so\nLoadModule vhost_alias_module modules/mod_vhost_alias.so\nLoadModule negotiation_module modules/mod_negotiation.so\nLoadModule dir_module modules/mod_dir.so\nLoadModule actions_module modules/mod_actions.so\nLoadModule speling_module modules/mod_speling.so\nLoadModule userdir_module modules/mod_userdir.so\nLoadModule alias_module modules/mod_alias.so\nLoadModule substitute_module modules/mod_substitute.so\nLoadModule rewrite_module modules/mod_rewrite.so\nLoadModule proxy_module modules/mod_proxy.so\nLoadModule proxy_balancer_module modules/mod_proxy_balancer.so\nLoadModule proxy_ftp_module modules/mod_proxy_ftp.so\nLoadModule proxy_http_module modules/mod_proxy_http.so\nLoadModule proxy_ajp_module modules/mod_proxy_ajp.so\nLoadModule proxy_connect_module modules/mod_proxy_connect.so\nLoadModule cache_module modules/mod_cache.so\nLoadModule suexec_module modules/mod_suexec.so\nLoadModule disk_cache_module modules/mod_disk_cache.so\nLoadModule cgi_module modules/mod_cgi.so\nLoadModule version_module modules/mod_version.so\n\nInclude conf.d/*.conf                   /etc/httpd/conf.dconf\nUser apache              \nGroup apache           \nServerAdmin root@localhost             ApacheE_mail\nUseCanonicalName Off\nDocumentRoot \"/var/www/html\"         \n<Directory />  apache\nOptions FollowSymLinks             \nAllowOverride None               .htaccess\n</Directory>\n<Directory \"/var/www/html\"> Apache\nOptions Indexes FollowSymLinks                      FollowSymLinksIndexes\nAllowOverride None\nOrder allow,deny            AllowDeny\nAllow from all                 allow\n</Directory>\n<IfModule mod_userdir.c>\nUserDir disabled\n</IfModule>\nDirectoryIndex index.html index.html.var           \nAccessFileName .htaccess            \n<Files ~ \"^\\.ht\">         .ht\nOrder allow,deny\nDeny from all\nSatisfy All            .ht\n</Files>\nTypesConfig /etc/mime.types            MIME\nDefaultType text/plain                        MIMEHTML\n<IfModule mod_mime_magic.c>    mod_mime_magic.cmagic\nMIMEMagicFile conf/magic\n</IfModule>\nHostnameLookups Off          webhostnameIP\nErrorLog logs/error_log        \nLogLevel warn                        \nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\n\n\\\"\" combined\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %b\" common\nLogFormat \"%{Referer}i -> %U\" referer\nLogFormat \"%{User-agent}i\" agent\n\n\nCustomLog logs/access_log combined             combined\nServerSignature On                             apacheapache\nAlias /icons/ \"/var/www/icons/\"   /icons/\n<Directory \"/var/www/icons\">\nOptions Indexes MultiViews FollowSymLinks              MultiViews \nAllowOverride None\nOrder allow,deny\nAllow from all\n</Directory>\n<IfModule mod_dav_fs.c>   DAV\nDAVLockDB /var/lib/dav/lockdb\n</IfModule>\nScriptAlias /cgi-bin/ \"/var/www/cgi-bin/\"  CGI\n<Directory \"/var/www/cgi-bin\">\nAllowOverride None\nOptions None\nOrder allow,deny\nAllow from all\n</Directory>\nIndexOptions FancyIndexing VersionSort NameWidth=* HTMLTable       FancyIndexing VersionSort NameWidth=* AddIcon\nCharset=UTF-8           \nAddIconByEncoding (CMP,/icons/compressed.gif) x-compress x-gzip\nAddIconByType (TXT,/icons/text.gif) text/*\nAddIconByType (IMG,/icons/image2.gif) image/*\nAddIconByType (SND,/icons/sound2.gif) audio/*\nAddIconByType (VID,/icons/movie.gif) video/*\nAddIcon /icons/binary.gif .bin .exe\nAddIcon /icons/binhex.gif .hqx\nAddIcon /icons/tar.gif .tar\nAddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv\nAddIcon /icons/compressed.gif .Z .z .tgz .gz .zip\nAddIcon /icons/a.gif .ps .ai .eps\nAddIcon /icons/layout.gif .html .shtml .htm .pdf\nAddIcon /icons/text.gif .txt\nAddIcon /icons/c.gif .c\nAddIcon /icons/p.gif .pl .py\nAddIcon /icons/f.gif .for\nAddIcon /icons/dvi.gif .dvi\nAddIcon /icons/uuencoded.gif .uu\nAddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl\nAddIcon /icons/tex.gif .tex\nAddIcon /icons/bomb.gif /core\nAddIcon /icons/back.gif ..\nAddIcon /icons/hand.right.gif README\nAddIcon /icons/folder.gif ^^DIRECTORY^^\nAddIcon /icons/blank.gif ^^BLANKICON^^\nDefaultIcon /icons/unknown.gif      \nReadmeName README.html          readme.html\nHeaderName HEADER.html            header.html\nAddLanguage ca .ca\nAddLanguage cs .cz .cs\nAddLanguage da .dk\nAddLanguage de .de\nAddLanguage el .el\nAddLanguage en .en\nAddLanguage eo .eo\nAddLanguage es .es\nAddLanguage et .et\nAddLanguage fr .fr\nAddLanguage he .he\nAddLanguage hr .hr\nAddLanguage it .it\nAddLanguage ja .ja\nAddLanguage ko .ko\nAddLanguage ltz .ltz\nAddLanguage nl .nl\nAddLanguage nn .nn\nAddLanguage no .no\nAddLanguage pl .po\nAddLanguage pt .pt\nAddLanguage pt-BR .pt-br\nAddLanguage ru .ru\nAddLanguage sv .sv\nAddLanguage zh-CN .zh-cn\nAddLanguage zh-TW .zh-tw\n\nLanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz nl nn\n\nno pl pt pt-BR ru sv zh-CN zh-TW \nForceLanguagePriority Prefer Fallback\nPrefer LanguagePriority \nFallback LanguagePriority \nAddDefaultCharset UTF-8   \nAddType application/x-compress .Z\nAddType application/x-gzip .gz .tgz\nAddType application/x-x509-ca-cert .crt\nAddType application/x-pkcs7-crl    .crl\nmime\nAddHandler type-map var apcche\nAddType text/html .shtml\nAddOutputFilter INCLUDES .shtml  SSI\nAlias /error/ \"/var/www/error/\"  \n<IfModule mod_negotiation.c>\n<IfModule mod_include.c>\n<Directory \"/var/www/error\"> \nAllowOverride None\nOptions IncludesNoExec\nAddOutputFilter Includes html\nAddHandler type-map var\nOrder allow,deny\nAllow from all\nLanguagePriority en es de fr\nForceLanguagePriority Prefer Fallback\n</Directory>\n</IfModule>\n</IfModule>\n\nBrowserMatch \"Mozilla/2\" nokeepalive\nBrowserMatch \"MSIE 4\\.0b2;\" nokeepalive downgrade-1.0 force-response-\n\n1.0\nBrowserMatch \"RealPlayer 4\\.0\" force-response-1.0\nBrowserMatch \"Java/1\\.0\" force-response-1.0\nBrowserMatch \"JDK/1\\.0\" force-response-1.0\nBrowserMatch \"Microsoft Data Access Internet Publishing Provider\"\n\nredirect-carefully\nBrowserMatch \"MS FrontPage\" redirect-carefully\nBrowserMatch \"^WebDrive\" redirect-carefully\nBrowserMatch \"^WebDAVFS/1.[0123]\" redirect-carefully\nBrowserMatch \"^gnome-vfs/1.0\" redirect-carefully\nBrowserMatch \"^XML Spy\" redirect-carefully\nBrowserMatch \"^Dreamweaver-WebDAV-SCM1\" redirect-carefully\n```","source":"_posts/apache-configure.md","raw":"---\nlayout: post\ntitle: Apache\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-01-17 11:01:54\ntags: [ apache, webserver]\ncategories:\n    - apache\n---\n```conf\n[root@localhost ~]# grep -v '^#\\|^$\\|#' /etc/httpd/conf/httpd.conf\nServerTokens OS   headerApache\n\n\nServerRoot \"/etc/httpd\"   \nPidFile run/httpd.pid     PID\nTimeout 60                60\nKeepAlive Off             \nMaxKeepAliveRequests 100  \n\n\nKeepAliveTimeout 15       \n\n15\n<IfModule prefork.c>      Prefork MPM\n\nRed hat\nStartServers       8      \nMinSpareServers    5      \nMaxSpareServers   20      \nServerLimit      256      \nMaxClients       256      MaxClients=ServerLimit*\n\n\nMaxRequestsPerChild  4000 \n\n1000\n</IfModule>\n<IfModule worker.c>      Worker MPM\nStartServers         4\nMaxClients         300\nMinSpareThreads     25\nMaxSpareThreads     75\nThreadsPerChild     25\nMaxRequestsPerChild  0\n</IfModule>\nListen 80    \nLoadModule auth_basic_module modules/mod_auth_basic.so\nLoadModule auth_digest_module modules/mod_auth_digest.so\nLoadModule authn_file_module modules/mod_authn_file.so\nLoadModule authn_alias_module modules/mod_authn_alias.so\nLoadModule authn_anon_module modules/mod_authn_anon.so\nLoadModule authn_dbm_module modules/mod_authn_dbm.so\nLoadModule authn_default_module modules/mod_authn_default.so\nLoadModule authz_host_module modules/mod_authz_host.so\nLoadModule authz_user_module modules/mod_authz_user.so\nLoadModule authz_owner_module modules/mod_authz_owner.so\nLoadModule authz_groupfile_module modules/mod_authz_groupfile.so\nLoadModule authz_dbm_module modules/mod_authz_dbm.so\nLoadModule authz_default_module modules/mod_authz_default.so\nLoadModule ldap_module modules/mod_ldap.so\nLoadModule authnz_ldap_module modules/mod_authnz_ldap.so\nLoadModule include_module modules/mod_include.so\nLoadModule log_config_module modules/mod_log_config.so\nLoadModule logio_module modules/mod_logio.so\nLoadModule env_module modules/mod_env.so\nLoadModule ext_filter_module modules/mod_ext_filter.so\nLoadModule mime_magic_module modules/mod_mime_magic.so\nLoadModule expires_module modules/mod_expires.so\nLoadModule deflate_module modules/mod_deflate.so\nLoadModule headers_module modules/mod_headers.so\nLoadModule usertrack_module modules/mod_usertrack.so\nLoadModule setenvif_module modules/mod_setenvif.so\nLoadModule mime_module modules/mod_mime.so\nLoadModule dav_module modules/mod_dav.so\nLoadModule status_module modules/mod_status.so\nLoadModule autoindex_module modules/mod_autoindex.so\nLoadModule info_module modules/mod_info.so\nLoadModule dav_fs_module modules/mod_dav_fs.so\nLoadModule vhost_alias_module modules/mod_vhost_alias.so\nLoadModule negotiation_module modules/mod_negotiation.so\nLoadModule dir_module modules/mod_dir.so\nLoadModule actions_module modules/mod_actions.so\nLoadModule speling_module modules/mod_speling.so\nLoadModule userdir_module modules/mod_userdir.so\nLoadModule alias_module modules/mod_alias.so\nLoadModule substitute_module modules/mod_substitute.so\nLoadModule rewrite_module modules/mod_rewrite.so\nLoadModule proxy_module modules/mod_proxy.so\nLoadModule proxy_balancer_module modules/mod_proxy_balancer.so\nLoadModule proxy_ftp_module modules/mod_proxy_ftp.so\nLoadModule proxy_http_module modules/mod_proxy_http.so\nLoadModule proxy_ajp_module modules/mod_proxy_ajp.so\nLoadModule proxy_connect_module modules/mod_proxy_connect.so\nLoadModule cache_module modules/mod_cache.so\nLoadModule suexec_module modules/mod_suexec.so\nLoadModule disk_cache_module modules/mod_disk_cache.so\nLoadModule cgi_module modules/mod_cgi.so\nLoadModule version_module modules/mod_version.so\n\nInclude conf.d/*.conf                   /etc/httpd/conf.dconf\nUser apache              \nGroup apache           \nServerAdmin root@localhost             ApacheE_mail\nUseCanonicalName Off\nDocumentRoot \"/var/www/html\"         \n<Directory />  apache\nOptions FollowSymLinks             \nAllowOverride None               .htaccess\n</Directory>\n<Directory \"/var/www/html\"> Apache\nOptions Indexes FollowSymLinks                      FollowSymLinksIndexes\nAllowOverride None\nOrder allow,deny            AllowDeny\nAllow from all                 allow\n</Directory>\n<IfModule mod_userdir.c>\nUserDir disabled\n</IfModule>\nDirectoryIndex index.html index.html.var           \nAccessFileName .htaccess            \n<Files ~ \"^\\.ht\">         .ht\nOrder allow,deny\nDeny from all\nSatisfy All            .ht\n</Files>\nTypesConfig /etc/mime.types            MIME\nDefaultType text/plain                        MIMEHTML\n<IfModule mod_mime_magic.c>    mod_mime_magic.cmagic\nMIMEMagicFile conf/magic\n</IfModule>\nHostnameLookups Off          webhostnameIP\nErrorLog logs/error_log        \nLogLevel warn                        \nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\n\n\\\"\" combined\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %b\" common\nLogFormat \"%{Referer}i -> %U\" referer\nLogFormat \"%{User-agent}i\" agent\n\n\nCustomLog logs/access_log combined             combined\nServerSignature On                             apacheapache\nAlias /icons/ \"/var/www/icons/\"   /icons/\n<Directory \"/var/www/icons\">\nOptions Indexes MultiViews FollowSymLinks              MultiViews \nAllowOverride None\nOrder allow,deny\nAllow from all\n</Directory>\n<IfModule mod_dav_fs.c>   DAV\nDAVLockDB /var/lib/dav/lockdb\n</IfModule>\nScriptAlias /cgi-bin/ \"/var/www/cgi-bin/\"  CGI\n<Directory \"/var/www/cgi-bin\">\nAllowOverride None\nOptions None\nOrder allow,deny\nAllow from all\n</Directory>\nIndexOptions FancyIndexing VersionSort NameWidth=* HTMLTable       FancyIndexing VersionSort NameWidth=* AddIcon\nCharset=UTF-8           \nAddIconByEncoding (CMP,/icons/compressed.gif) x-compress x-gzip\nAddIconByType (TXT,/icons/text.gif) text/*\nAddIconByType (IMG,/icons/image2.gif) image/*\nAddIconByType (SND,/icons/sound2.gif) audio/*\nAddIconByType (VID,/icons/movie.gif) video/*\nAddIcon /icons/binary.gif .bin .exe\nAddIcon /icons/binhex.gif .hqx\nAddIcon /icons/tar.gif .tar\nAddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv\nAddIcon /icons/compressed.gif .Z .z .tgz .gz .zip\nAddIcon /icons/a.gif .ps .ai .eps\nAddIcon /icons/layout.gif .html .shtml .htm .pdf\nAddIcon /icons/text.gif .txt\nAddIcon /icons/c.gif .c\nAddIcon /icons/p.gif .pl .py\nAddIcon /icons/f.gif .for\nAddIcon /icons/dvi.gif .dvi\nAddIcon /icons/uuencoded.gif .uu\nAddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl\nAddIcon /icons/tex.gif .tex\nAddIcon /icons/bomb.gif /core\nAddIcon /icons/back.gif ..\nAddIcon /icons/hand.right.gif README\nAddIcon /icons/folder.gif ^^DIRECTORY^^\nAddIcon /icons/blank.gif ^^BLANKICON^^\nDefaultIcon /icons/unknown.gif      \nReadmeName README.html          readme.html\nHeaderName HEADER.html            header.html\nAddLanguage ca .ca\nAddLanguage cs .cz .cs\nAddLanguage da .dk\nAddLanguage de .de\nAddLanguage el .el\nAddLanguage en .en\nAddLanguage eo .eo\nAddLanguage es .es\nAddLanguage et .et\nAddLanguage fr .fr\nAddLanguage he .he\nAddLanguage hr .hr\nAddLanguage it .it\nAddLanguage ja .ja\nAddLanguage ko .ko\nAddLanguage ltz .ltz\nAddLanguage nl .nl\nAddLanguage nn .nn\nAddLanguage no .no\nAddLanguage pl .po\nAddLanguage pt .pt\nAddLanguage pt-BR .pt-br\nAddLanguage ru .ru\nAddLanguage sv .sv\nAddLanguage zh-CN .zh-cn\nAddLanguage zh-TW .zh-tw\n\nLanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz nl nn\n\nno pl pt pt-BR ru sv zh-CN zh-TW \nForceLanguagePriority Prefer Fallback\nPrefer LanguagePriority \nFallback LanguagePriority \nAddDefaultCharset UTF-8   \nAddType application/x-compress .Z\nAddType application/x-gzip .gz .tgz\nAddType application/x-x509-ca-cert .crt\nAddType application/x-pkcs7-crl    .crl\nmime\nAddHandler type-map var apcche\nAddType text/html .shtml\nAddOutputFilter INCLUDES .shtml  SSI\nAlias /error/ \"/var/www/error/\"  \n<IfModule mod_negotiation.c>\n<IfModule mod_include.c>\n<Directory \"/var/www/error\"> \nAllowOverride None\nOptions IncludesNoExec\nAddOutputFilter Includes html\nAddHandler type-map var\nOrder allow,deny\nAllow from all\nLanguagePriority en es de fr\nForceLanguagePriority Prefer Fallback\n</Directory>\n</IfModule>\n</IfModule>\n\nBrowserMatch \"Mozilla/2\" nokeepalive\nBrowserMatch \"MSIE 4\\.0b2;\" nokeepalive downgrade-1.0 force-response-\n\n1.0\nBrowserMatch \"RealPlayer 4\\.0\" force-response-1.0\nBrowserMatch \"Java/1\\.0\" force-response-1.0\nBrowserMatch \"JDK/1\\.0\" force-response-1.0\nBrowserMatch \"Microsoft Data Access Internet Publishing Provider\"\n\nredirect-carefully\nBrowserMatch \"MS FrontPage\" redirect-carefully\nBrowserMatch \"^WebDrive\" redirect-carefully\nBrowserMatch \"^WebDAVFS/1.[0123]\" redirect-carefully\nBrowserMatch \"^gnome-vfs/1.0\" redirect-carefully\nBrowserMatch \"^XML Spy\" redirect-carefully\nBrowserMatch \"^Dreamweaver-WebDAV-SCM1\" redirect-carefully\n```","slug":"apache-configure","updated":"2019-10-21T06:57:42.923Z","photos":[],"link":"","_id":"ck42dyijh00jqu9urj60iu6i2","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# grep -v &apos;^#\\|^$\\|#&apos; /etc/httpd/conf/httpd.conf</span><br><span class=\"line\">ServerTokens OS   headerApache</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">ServerRoot &quot;/etc/httpd&quot;   </span><br><span class=\"line\">PidFile run/httpd.pid     PID</span><br><span class=\"line\">Timeout 60                60</span><br><span class=\"line\">KeepAlive Off             </span><br><span class=\"line\">MaxKeepAliveRequests 100  </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">KeepAliveTimeout 15       </span><br><span class=\"line\"></span><br><span class=\"line\">15</span><br><span class=\"line\">&lt;IfModule prefork.c&gt;      Prefork MPM</span><br><span class=\"line\"></span><br><span class=\"line\">Red hat</span><br><span class=\"line\">StartServers       8      </span><br><span class=\"line\">MinSpareServers    5      </span><br><span class=\"line\">MaxSpareServers   20      </span><br><span class=\"line\">ServerLimit      256      </span><br><span class=\"line\">MaxClients       256      MaxClients=ServerLimit*</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">MaxRequestsPerChild  4000 </span><br><span class=\"line\"></span><br><span class=\"line\">1000</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\">&lt;IfModule worker.c&gt;      Worker MPM</span><br><span class=\"line\">StartServers         4</span><br><span class=\"line\">MaxClients         300</span><br><span class=\"line\">MinSpareThreads     25</span><br><span class=\"line\">MaxSpareThreads     75</span><br><span class=\"line\">ThreadsPerChild     25</span><br><span class=\"line\">MaxRequestsPerChild  0</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\">Listen 80    </span><br><span class=\"line\">LoadModule auth_basic_module modules/mod_auth_basic.so</span><br><span class=\"line\">LoadModule auth_digest_module modules/mod_auth_digest.so</span><br><span class=\"line\">LoadModule authn_file_module modules/mod_authn_file.so</span><br><span class=\"line\">LoadModule authn_alias_module modules/mod_authn_alias.so</span><br><span class=\"line\">LoadModule authn_anon_module modules/mod_authn_anon.so</span><br><span class=\"line\">LoadModule authn_dbm_module modules/mod_authn_dbm.so</span><br><span class=\"line\">LoadModule authn_default_module modules/mod_authn_default.so</span><br><span class=\"line\">LoadModule authz_host_module modules/mod_authz_host.so</span><br><span class=\"line\">LoadModule authz_user_module modules/mod_authz_user.so</span><br><span class=\"line\">LoadModule authz_owner_module modules/mod_authz_owner.so</span><br><span class=\"line\">LoadModule authz_groupfile_module modules/mod_authz_groupfile.so</span><br><span class=\"line\">LoadModule authz_dbm_module modules/mod_authz_dbm.so</span><br><span class=\"line\">LoadModule authz_default_module modules/mod_authz_default.so</span><br><span class=\"line\">LoadModule ldap_module modules/mod_ldap.so</span><br><span class=\"line\">LoadModule authnz_ldap_module modules/mod_authnz_ldap.so</span><br><span class=\"line\">LoadModule include_module modules/mod_include.so</span><br><span class=\"line\">LoadModule log_config_module modules/mod_log_config.so</span><br><span class=\"line\">LoadModule logio_module modules/mod_logio.so</span><br><span class=\"line\">LoadModule env_module modules/mod_env.so</span><br><span class=\"line\">LoadModule ext_filter_module modules/mod_ext_filter.so</span><br><span class=\"line\">LoadModule mime_magic_module modules/mod_mime_magic.so</span><br><span class=\"line\">LoadModule expires_module modules/mod_expires.so</span><br><span class=\"line\">LoadModule deflate_module modules/mod_deflate.so</span><br><span class=\"line\">LoadModule headers_module modules/mod_headers.so</span><br><span class=\"line\">LoadModule usertrack_module modules/mod_usertrack.so</span><br><span class=\"line\">LoadModule setenvif_module modules/mod_setenvif.so</span><br><span class=\"line\">LoadModule mime_module modules/mod_mime.so</span><br><span class=\"line\">LoadModule dav_module modules/mod_dav.so</span><br><span class=\"line\">LoadModule status_module modules/mod_status.so</span><br><span class=\"line\">LoadModule autoindex_module modules/mod_autoindex.so</span><br><span class=\"line\">LoadModule info_module modules/mod_info.so</span><br><span class=\"line\">LoadModule dav_fs_module modules/mod_dav_fs.so</span><br><span class=\"line\">LoadModule vhost_alias_module modules/mod_vhost_alias.so</span><br><span class=\"line\">LoadModule negotiation_module modules/mod_negotiation.so</span><br><span class=\"line\">LoadModule dir_module modules/mod_dir.so</span><br><span class=\"line\">LoadModule actions_module modules/mod_actions.so</span><br><span class=\"line\">LoadModule speling_module modules/mod_speling.so</span><br><span class=\"line\">LoadModule userdir_module modules/mod_userdir.so</span><br><span class=\"line\">LoadModule alias_module modules/mod_alias.so</span><br><span class=\"line\">LoadModule substitute_module modules/mod_substitute.so</span><br><span class=\"line\">LoadModule rewrite_module modules/mod_rewrite.so</span><br><span class=\"line\">LoadModule proxy_module modules/mod_proxy.so</span><br><span class=\"line\">LoadModule proxy_balancer_module modules/mod_proxy_balancer.so</span><br><span class=\"line\">LoadModule proxy_ftp_module modules/mod_proxy_ftp.so</span><br><span class=\"line\">LoadModule proxy_http_module modules/mod_proxy_http.so</span><br><span class=\"line\">LoadModule proxy_ajp_module modules/mod_proxy_ajp.so</span><br><span class=\"line\">LoadModule proxy_connect_module modules/mod_proxy_connect.so</span><br><span class=\"line\">LoadModule cache_module modules/mod_cache.so</span><br><span class=\"line\">LoadModule suexec_module modules/mod_suexec.so</span><br><span class=\"line\">LoadModule disk_cache_module modules/mod_disk_cache.so</span><br><span class=\"line\">LoadModule cgi_module modules/mod_cgi.so</span><br><span class=\"line\">LoadModule version_module modules/mod_version.so</span><br><span class=\"line\"></span><br><span class=\"line\">Include conf.d/*.conf                   /etc/httpd/conf.dconf</span><br><span class=\"line\">User apache              </span><br><span class=\"line\">Group apache           </span><br><span class=\"line\">ServerAdmin root@localhost             ApacheE_mail</span><br><span class=\"line\">UseCanonicalName Off</span><br><span class=\"line\">DocumentRoot &quot;/var/www/html&quot;         </span><br><span class=\"line\">&lt;Directory /&gt;  apache</span><br><span class=\"line\">Options FollowSymLinks             </span><br><span class=\"line\">AllowOverride None               .htaccess</span><br><span class=\"line\">&lt;/Directory&gt;</span><br><span class=\"line\">&lt;Directory &quot;/var/www/html&quot;&gt; Apache</span><br><span class=\"line\">Options Indexes FollowSymLinks                      FollowSymLinksIndexes</span><br><span class=\"line\">AllowOverride None</span><br><span class=\"line\">Order allow,deny            AllowDeny</span><br><span class=\"line\">Allow from all                 allow</span><br><span class=\"line\">&lt;/Directory&gt;</span><br><span class=\"line\">&lt;IfModule mod_userdir.c&gt;</span><br><span class=\"line\">UserDir disabled</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\">DirectoryIndex index.html index.html.var           </span><br><span class=\"line\">AccessFileName .htaccess            </span><br><span class=\"line\">&lt;Files ~ &quot;^\\.ht&quot;&gt;         .ht</span><br><span class=\"line\">Order allow,deny</span><br><span class=\"line\">Deny from all</span><br><span class=\"line\">Satisfy All            .ht</span><br><span class=\"line\">&lt;/Files&gt;</span><br><span class=\"line\">TypesConfig /etc/mime.types            MIME</span><br><span class=\"line\">DefaultType text/plain                        MIMEHTML</span><br><span class=\"line\">&lt;IfModule mod_mime_magic.c&gt;    mod_mime_magic.cmagic</span><br><span class=\"line\">MIMEMagicFile conf/magic</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\">HostnameLookups Off          webhostnameIP</span><br><span class=\"line\">ErrorLog logs/error_log        </span><br><span class=\"line\">LogLevel warn                        </span><br><span class=\"line\">LogFormat &quot;%h %l %u %t \\&quot;%r\\&quot; %&gt;s %b \\&quot;%&#123;Referer&#125;i\\&quot; \\&quot;%&#123;User-Agent&#125;i</span><br><span class=\"line\"></span><br><span class=\"line\">\\&quot;&quot; combined</span><br><span class=\"line\">LogFormat &quot;%h %l %u %t \\&quot;%r\\&quot; %&gt;s %b&quot; common</span><br><span class=\"line\">LogFormat &quot;%&#123;Referer&#125;i -&gt; %U&quot; referer</span><br><span class=\"line\">LogFormat &quot;%&#123;User-agent&#125;i&quot; agent</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">CustomLog logs/access_log combined             combined</span><br><span class=\"line\">ServerSignature On                             apacheapache</span><br><span class=\"line\">Alias /icons/ &quot;/var/www/icons/&quot;   /icons/</span><br><span class=\"line\">&lt;Directory &quot;/var/www/icons&quot;&gt;</span><br><span class=\"line\">Options Indexes MultiViews FollowSymLinks              MultiViews </span><br><span class=\"line\">AllowOverride None</span><br><span class=\"line\">Order allow,deny</span><br><span class=\"line\">Allow from all</span><br><span class=\"line\">&lt;/Directory&gt;</span><br><span class=\"line\">&lt;IfModule mod_dav_fs.c&gt;   DAV</span><br><span class=\"line\">DAVLockDB /var/lib/dav/lockdb</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\">ScriptAlias /cgi-bin/ &quot;/var/www/cgi-bin/&quot;  CGI</span><br><span class=\"line\">&lt;Directory &quot;/var/www/cgi-bin&quot;&gt;</span><br><span class=\"line\">AllowOverride None</span><br><span class=\"line\">Options None</span><br><span class=\"line\">Order allow,deny</span><br><span class=\"line\">Allow from all</span><br><span class=\"line\">&lt;/Directory&gt;</span><br><span class=\"line\">IndexOptions FancyIndexing VersionSort NameWidth=* HTMLTable       FancyIndexing VersionSort NameWidth=* AddIcon</span><br><span class=\"line\">Charset=UTF-8           </span><br><span class=\"line\">AddIconByEncoding (CMP,/icons/compressed.gif) x-compress x-gzip</span><br><span class=\"line\">AddIconByType (TXT,/icons/text.gif) text/*</span><br><span class=\"line\">AddIconByType (IMG,/icons/image2.gif) image/*</span><br><span class=\"line\">AddIconByType (SND,/icons/sound2.gif) audio/*</span><br><span class=\"line\">AddIconByType (VID,/icons/movie.gif) video/*</span><br><span class=\"line\">AddIcon /icons/binary.gif .bin .exe</span><br><span class=\"line\">AddIcon /icons/binhex.gif .hqx</span><br><span class=\"line\">AddIcon /icons/tar.gif .tar</span><br><span class=\"line\">AddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv</span><br><span class=\"line\">AddIcon /icons/compressed.gif .Z .z .tgz .gz .zip</span><br><span class=\"line\">AddIcon /icons/a.gif .ps .ai .eps</span><br><span class=\"line\">AddIcon /icons/layout.gif .html .shtml .htm .pdf</span><br><span class=\"line\">AddIcon /icons/text.gif .txt</span><br><span class=\"line\">AddIcon /icons/c.gif .c</span><br><span class=\"line\">AddIcon /icons/p.gif .pl .py</span><br><span class=\"line\">AddIcon /icons/f.gif .for</span><br><span class=\"line\">AddIcon /icons/dvi.gif .dvi</span><br><span class=\"line\">AddIcon /icons/uuencoded.gif .uu</span><br><span class=\"line\">AddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl</span><br><span class=\"line\">AddIcon /icons/tex.gif .tex</span><br><span class=\"line\">AddIcon /icons/bomb.gif /core</span><br><span class=\"line\">AddIcon /icons/back.gif ..</span><br><span class=\"line\">AddIcon /icons/hand.right.gif README</span><br><span class=\"line\">AddIcon /icons/folder.gif ^^DIRECTORY^^</span><br><span class=\"line\">AddIcon /icons/blank.gif ^^BLANKICON^^</span><br><span class=\"line\">DefaultIcon /icons/unknown.gif      </span><br><span class=\"line\">ReadmeName README.html          readme.html</span><br><span class=\"line\">HeaderName HEADER.html            header.html</span><br><span class=\"line\">AddLanguage ca .ca</span><br><span class=\"line\">AddLanguage cs .cz .cs</span><br><span class=\"line\">AddLanguage da .dk</span><br><span class=\"line\">AddLanguage de .de</span><br><span class=\"line\">AddLanguage el .el</span><br><span class=\"line\">AddLanguage en .en</span><br><span class=\"line\">AddLanguage eo .eo</span><br><span class=\"line\">AddLanguage es .es</span><br><span class=\"line\">AddLanguage et .et</span><br><span class=\"line\">AddLanguage fr .fr</span><br><span class=\"line\">AddLanguage he .he</span><br><span class=\"line\">AddLanguage hr .hr</span><br><span class=\"line\">AddLanguage it .it</span><br><span class=\"line\">AddLanguage ja .ja</span><br><span class=\"line\">AddLanguage ko .ko</span><br><span class=\"line\">AddLanguage ltz .ltz</span><br><span class=\"line\">AddLanguage nl .nl</span><br><span class=\"line\">AddLanguage nn .nn</span><br><span class=\"line\">AddLanguage no .no</span><br><span class=\"line\">AddLanguage pl .po</span><br><span class=\"line\">AddLanguage pt .pt</span><br><span class=\"line\">AddLanguage pt-BR .pt-br</span><br><span class=\"line\">AddLanguage ru .ru</span><br><span class=\"line\">AddLanguage sv .sv</span><br><span class=\"line\">AddLanguage zh-CN .zh-cn</span><br><span class=\"line\">AddLanguage zh-TW .zh-tw</span><br><span class=\"line\"></span><br><span class=\"line\">LanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz nl nn</span><br><span class=\"line\"></span><br><span class=\"line\">no pl pt pt-BR ru sv zh-CN zh-TW </span><br><span class=\"line\">ForceLanguagePriority Prefer Fallback</span><br><span class=\"line\">Prefer LanguagePriority </span><br><span class=\"line\">Fallback LanguagePriority </span><br><span class=\"line\">AddDefaultCharset UTF-8   </span><br><span class=\"line\">AddType application/x-compress .Z</span><br><span class=\"line\">AddType application/x-gzip .gz .tgz</span><br><span class=\"line\">AddType application/x-x509-ca-cert .crt</span><br><span class=\"line\">AddType application/x-pkcs7-crl    .crl</span><br><span class=\"line\">mime</span><br><span class=\"line\">AddHandler type-map var apcche</span><br><span class=\"line\">AddType text/html .shtml</span><br><span class=\"line\">AddOutputFilter INCLUDES .shtml  SSI</span><br><span class=\"line\">Alias /error/ &quot;/var/www/error/&quot;  </span><br><span class=\"line\">&lt;IfModule mod_negotiation.c&gt;</span><br><span class=\"line\">&lt;IfModule mod_include.c&gt;</span><br><span class=\"line\">&lt;Directory &quot;/var/www/error&quot;&gt; </span><br><span class=\"line\">AllowOverride None</span><br><span class=\"line\">Options IncludesNoExec</span><br><span class=\"line\">AddOutputFilter Includes html</span><br><span class=\"line\">AddHandler type-map var</span><br><span class=\"line\">Order allow,deny</span><br><span class=\"line\">Allow from all</span><br><span class=\"line\">LanguagePriority en es de fr</span><br><span class=\"line\">ForceLanguagePriority Prefer Fallback</span><br><span class=\"line\">&lt;/Directory&gt;</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">BrowserMatch &quot;Mozilla/2&quot; nokeepalive</span><br><span class=\"line\">BrowserMatch &quot;MSIE 4\\.0b2;&quot; nokeepalive downgrade-1.0 force-response-</span><br><span class=\"line\"></span><br><span class=\"line\">1.0</span><br><span class=\"line\">BrowserMatch &quot;RealPlayer 4\\.0&quot; force-response-1.0</span><br><span class=\"line\">BrowserMatch &quot;Java/1\\.0&quot; force-response-1.0</span><br><span class=\"line\">BrowserMatch &quot;JDK/1\\.0&quot; force-response-1.0</span><br><span class=\"line\">BrowserMatch &quot;Microsoft Data Access Internet Publishing Provider&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">redirect-carefully</span><br><span class=\"line\">BrowserMatch &quot;MS FrontPage&quot; redirect-carefully</span><br><span class=\"line\">BrowserMatch &quot;^WebDrive&quot; redirect-carefully</span><br><span class=\"line\">BrowserMatch &quot;^WebDAVFS/1.[0123]&quot; redirect-carefully</span><br><span class=\"line\">BrowserMatch &quot;^gnome-vfs/1.0&quot; redirect-carefully</span><br><span class=\"line\">BrowserMatch &quot;^XML Spy&quot; redirect-carefully</span><br><span class=\"line\">BrowserMatch &quot;^Dreamweaver-WebDAV-SCM1&quot; redirect-carefully</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# grep -v &apos;^#\\|^$\\|#&apos; /etc/httpd/conf/httpd.conf</span><br><span class=\"line\">ServerTokens OS   headerApache</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">ServerRoot &quot;/etc/httpd&quot;   </span><br><span class=\"line\">PidFile run/httpd.pid     PID</span><br><span class=\"line\">Timeout 60                60</span><br><span class=\"line\">KeepAlive Off             </span><br><span class=\"line\">MaxKeepAliveRequests 100  </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">KeepAliveTimeout 15       </span><br><span class=\"line\"></span><br><span class=\"line\">15</span><br><span class=\"line\">&lt;IfModule prefork.c&gt;      Prefork MPM</span><br><span class=\"line\"></span><br><span class=\"line\">Red hat</span><br><span class=\"line\">StartServers       8      </span><br><span class=\"line\">MinSpareServers    5      </span><br><span class=\"line\">MaxSpareServers   20      </span><br><span class=\"line\">ServerLimit      256      </span><br><span class=\"line\">MaxClients       256      MaxClients=ServerLimit*</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">MaxRequestsPerChild  4000 </span><br><span class=\"line\"></span><br><span class=\"line\">1000</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\">&lt;IfModule worker.c&gt;      Worker MPM</span><br><span class=\"line\">StartServers         4</span><br><span class=\"line\">MaxClients         300</span><br><span class=\"line\">MinSpareThreads     25</span><br><span class=\"line\">MaxSpareThreads     75</span><br><span class=\"line\">ThreadsPerChild     25</span><br><span class=\"line\">MaxRequestsPerChild  0</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\">Listen 80    </span><br><span class=\"line\">LoadModule auth_basic_module modules/mod_auth_basic.so</span><br><span class=\"line\">LoadModule auth_digest_module modules/mod_auth_digest.so</span><br><span class=\"line\">LoadModule authn_file_module modules/mod_authn_file.so</span><br><span class=\"line\">LoadModule authn_alias_module modules/mod_authn_alias.so</span><br><span class=\"line\">LoadModule authn_anon_module modules/mod_authn_anon.so</span><br><span class=\"line\">LoadModule authn_dbm_module modules/mod_authn_dbm.so</span><br><span class=\"line\">LoadModule authn_default_module modules/mod_authn_default.so</span><br><span class=\"line\">LoadModule authz_host_module modules/mod_authz_host.so</span><br><span class=\"line\">LoadModule authz_user_module modules/mod_authz_user.so</span><br><span class=\"line\">LoadModule authz_owner_module modules/mod_authz_owner.so</span><br><span class=\"line\">LoadModule authz_groupfile_module modules/mod_authz_groupfile.so</span><br><span class=\"line\">LoadModule authz_dbm_module modules/mod_authz_dbm.so</span><br><span class=\"line\">LoadModule authz_default_module modules/mod_authz_default.so</span><br><span class=\"line\">LoadModule ldap_module modules/mod_ldap.so</span><br><span class=\"line\">LoadModule authnz_ldap_module modules/mod_authnz_ldap.so</span><br><span class=\"line\">LoadModule include_module modules/mod_include.so</span><br><span class=\"line\">LoadModule log_config_module modules/mod_log_config.so</span><br><span class=\"line\">LoadModule logio_module modules/mod_logio.so</span><br><span class=\"line\">LoadModule env_module modules/mod_env.so</span><br><span class=\"line\">LoadModule ext_filter_module modules/mod_ext_filter.so</span><br><span class=\"line\">LoadModule mime_magic_module modules/mod_mime_magic.so</span><br><span class=\"line\">LoadModule expires_module modules/mod_expires.so</span><br><span class=\"line\">LoadModule deflate_module modules/mod_deflate.so</span><br><span class=\"line\">LoadModule headers_module modules/mod_headers.so</span><br><span class=\"line\">LoadModule usertrack_module modules/mod_usertrack.so</span><br><span class=\"line\">LoadModule setenvif_module modules/mod_setenvif.so</span><br><span class=\"line\">LoadModule mime_module modules/mod_mime.so</span><br><span class=\"line\">LoadModule dav_module modules/mod_dav.so</span><br><span class=\"line\">LoadModule status_module modules/mod_status.so</span><br><span class=\"line\">LoadModule autoindex_module modules/mod_autoindex.so</span><br><span class=\"line\">LoadModule info_module modules/mod_info.so</span><br><span class=\"line\">LoadModule dav_fs_module modules/mod_dav_fs.so</span><br><span class=\"line\">LoadModule vhost_alias_module modules/mod_vhost_alias.so</span><br><span class=\"line\">LoadModule negotiation_module modules/mod_negotiation.so</span><br><span class=\"line\">LoadModule dir_module modules/mod_dir.so</span><br><span class=\"line\">LoadModule actions_module modules/mod_actions.so</span><br><span class=\"line\">LoadModule speling_module modules/mod_speling.so</span><br><span class=\"line\">LoadModule userdir_module modules/mod_userdir.so</span><br><span class=\"line\">LoadModule alias_module modules/mod_alias.so</span><br><span class=\"line\">LoadModule substitute_module modules/mod_substitute.so</span><br><span class=\"line\">LoadModule rewrite_module modules/mod_rewrite.so</span><br><span class=\"line\">LoadModule proxy_module modules/mod_proxy.so</span><br><span class=\"line\">LoadModule proxy_balancer_module modules/mod_proxy_balancer.so</span><br><span class=\"line\">LoadModule proxy_ftp_module modules/mod_proxy_ftp.so</span><br><span class=\"line\">LoadModule proxy_http_module modules/mod_proxy_http.so</span><br><span class=\"line\">LoadModule proxy_ajp_module modules/mod_proxy_ajp.so</span><br><span class=\"line\">LoadModule proxy_connect_module modules/mod_proxy_connect.so</span><br><span class=\"line\">LoadModule cache_module modules/mod_cache.so</span><br><span class=\"line\">LoadModule suexec_module modules/mod_suexec.so</span><br><span class=\"line\">LoadModule disk_cache_module modules/mod_disk_cache.so</span><br><span class=\"line\">LoadModule cgi_module modules/mod_cgi.so</span><br><span class=\"line\">LoadModule version_module modules/mod_version.so</span><br><span class=\"line\"></span><br><span class=\"line\">Include conf.d/*.conf                   /etc/httpd/conf.dconf</span><br><span class=\"line\">User apache              </span><br><span class=\"line\">Group apache           </span><br><span class=\"line\">ServerAdmin root@localhost             ApacheE_mail</span><br><span class=\"line\">UseCanonicalName Off</span><br><span class=\"line\">DocumentRoot &quot;/var/www/html&quot;         </span><br><span class=\"line\">&lt;Directory /&gt;  apache</span><br><span class=\"line\">Options FollowSymLinks             </span><br><span class=\"line\">AllowOverride None               .htaccess</span><br><span class=\"line\">&lt;/Directory&gt;</span><br><span class=\"line\">&lt;Directory &quot;/var/www/html&quot;&gt; Apache</span><br><span class=\"line\">Options Indexes FollowSymLinks                      FollowSymLinksIndexes</span><br><span class=\"line\">AllowOverride None</span><br><span class=\"line\">Order allow,deny            AllowDeny</span><br><span class=\"line\">Allow from all                 allow</span><br><span class=\"line\">&lt;/Directory&gt;</span><br><span class=\"line\">&lt;IfModule mod_userdir.c&gt;</span><br><span class=\"line\">UserDir disabled</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\">DirectoryIndex index.html index.html.var           </span><br><span class=\"line\">AccessFileName .htaccess            </span><br><span class=\"line\">&lt;Files ~ &quot;^\\.ht&quot;&gt;         .ht</span><br><span class=\"line\">Order allow,deny</span><br><span class=\"line\">Deny from all</span><br><span class=\"line\">Satisfy All            .ht</span><br><span class=\"line\">&lt;/Files&gt;</span><br><span class=\"line\">TypesConfig /etc/mime.types            MIME</span><br><span class=\"line\">DefaultType text/plain                        MIMEHTML</span><br><span class=\"line\">&lt;IfModule mod_mime_magic.c&gt;    mod_mime_magic.cmagic</span><br><span class=\"line\">MIMEMagicFile conf/magic</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\">HostnameLookups Off          webhostnameIP</span><br><span class=\"line\">ErrorLog logs/error_log        </span><br><span class=\"line\">LogLevel warn                        </span><br><span class=\"line\">LogFormat &quot;%h %l %u %t \\&quot;%r\\&quot; %&gt;s %b \\&quot;%&#123;Referer&#125;i\\&quot; \\&quot;%&#123;User-Agent&#125;i</span><br><span class=\"line\"></span><br><span class=\"line\">\\&quot;&quot; combined</span><br><span class=\"line\">LogFormat &quot;%h %l %u %t \\&quot;%r\\&quot; %&gt;s %b&quot; common</span><br><span class=\"line\">LogFormat &quot;%&#123;Referer&#125;i -&gt; %U&quot; referer</span><br><span class=\"line\">LogFormat &quot;%&#123;User-agent&#125;i&quot; agent</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">CustomLog logs/access_log combined             combined</span><br><span class=\"line\">ServerSignature On                             apacheapache</span><br><span class=\"line\">Alias /icons/ &quot;/var/www/icons/&quot;   /icons/</span><br><span class=\"line\">&lt;Directory &quot;/var/www/icons&quot;&gt;</span><br><span class=\"line\">Options Indexes MultiViews FollowSymLinks              MultiViews </span><br><span class=\"line\">AllowOverride None</span><br><span class=\"line\">Order allow,deny</span><br><span class=\"line\">Allow from all</span><br><span class=\"line\">&lt;/Directory&gt;</span><br><span class=\"line\">&lt;IfModule mod_dav_fs.c&gt;   DAV</span><br><span class=\"line\">DAVLockDB /var/lib/dav/lockdb</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\">ScriptAlias /cgi-bin/ &quot;/var/www/cgi-bin/&quot;  CGI</span><br><span class=\"line\">&lt;Directory &quot;/var/www/cgi-bin&quot;&gt;</span><br><span class=\"line\">AllowOverride None</span><br><span class=\"line\">Options None</span><br><span class=\"line\">Order allow,deny</span><br><span class=\"line\">Allow from all</span><br><span class=\"line\">&lt;/Directory&gt;</span><br><span class=\"line\">IndexOptions FancyIndexing VersionSort NameWidth=* HTMLTable       FancyIndexing VersionSort NameWidth=* AddIcon</span><br><span class=\"line\">Charset=UTF-8           </span><br><span class=\"line\">AddIconByEncoding (CMP,/icons/compressed.gif) x-compress x-gzip</span><br><span class=\"line\">AddIconByType (TXT,/icons/text.gif) text/*</span><br><span class=\"line\">AddIconByType (IMG,/icons/image2.gif) image/*</span><br><span class=\"line\">AddIconByType (SND,/icons/sound2.gif) audio/*</span><br><span class=\"line\">AddIconByType (VID,/icons/movie.gif) video/*</span><br><span class=\"line\">AddIcon /icons/binary.gif .bin .exe</span><br><span class=\"line\">AddIcon /icons/binhex.gif .hqx</span><br><span class=\"line\">AddIcon /icons/tar.gif .tar</span><br><span class=\"line\">AddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv</span><br><span class=\"line\">AddIcon /icons/compressed.gif .Z .z .tgz .gz .zip</span><br><span class=\"line\">AddIcon /icons/a.gif .ps .ai .eps</span><br><span class=\"line\">AddIcon /icons/layout.gif .html .shtml .htm .pdf</span><br><span class=\"line\">AddIcon /icons/text.gif .txt</span><br><span class=\"line\">AddIcon /icons/c.gif .c</span><br><span class=\"line\">AddIcon /icons/p.gif .pl .py</span><br><span class=\"line\">AddIcon /icons/f.gif .for</span><br><span class=\"line\">AddIcon /icons/dvi.gif .dvi</span><br><span class=\"line\">AddIcon /icons/uuencoded.gif .uu</span><br><span class=\"line\">AddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl</span><br><span class=\"line\">AddIcon /icons/tex.gif .tex</span><br><span class=\"line\">AddIcon /icons/bomb.gif /core</span><br><span class=\"line\">AddIcon /icons/back.gif ..</span><br><span class=\"line\">AddIcon /icons/hand.right.gif README</span><br><span class=\"line\">AddIcon /icons/folder.gif ^^DIRECTORY^^</span><br><span class=\"line\">AddIcon /icons/blank.gif ^^BLANKICON^^</span><br><span class=\"line\">DefaultIcon /icons/unknown.gif      </span><br><span class=\"line\">ReadmeName README.html          readme.html</span><br><span class=\"line\">HeaderName HEADER.html            header.html</span><br><span class=\"line\">AddLanguage ca .ca</span><br><span class=\"line\">AddLanguage cs .cz .cs</span><br><span class=\"line\">AddLanguage da .dk</span><br><span class=\"line\">AddLanguage de .de</span><br><span class=\"line\">AddLanguage el .el</span><br><span class=\"line\">AddLanguage en .en</span><br><span class=\"line\">AddLanguage eo .eo</span><br><span class=\"line\">AddLanguage es .es</span><br><span class=\"line\">AddLanguage et .et</span><br><span class=\"line\">AddLanguage fr .fr</span><br><span class=\"line\">AddLanguage he .he</span><br><span class=\"line\">AddLanguage hr .hr</span><br><span class=\"line\">AddLanguage it .it</span><br><span class=\"line\">AddLanguage ja .ja</span><br><span class=\"line\">AddLanguage ko .ko</span><br><span class=\"line\">AddLanguage ltz .ltz</span><br><span class=\"line\">AddLanguage nl .nl</span><br><span class=\"line\">AddLanguage nn .nn</span><br><span class=\"line\">AddLanguage no .no</span><br><span class=\"line\">AddLanguage pl .po</span><br><span class=\"line\">AddLanguage pt .pt</span><br><span class=\"line\">AddLanguage pt-BR .pt-br</span><br><span class=\"line\">AddLanguage ru .ru</span><br><span class=\"line\">AddLanguage sv .sv</span><br><span class=\"line\">AddLanguage zh-CN .zh-cn</span><br><span class=\"line\">AddLanguage zh-TW .zh-tw</span><br><span class=\"line\"></span><br><span class=\"line\">LanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz nl nn</span><br><span class=\"line\"></span><br><span class=\"line\">no pl pt pt-BR ru sv zh-CN zh-TW </span><br><span class=\"line\">ForceLanguagePriority Prefer Fallback</span><br><span class=\"line\">Prefer LanguagePriority </span><br><span class=\"line\">Fallback LanguagePriority </span><br><span class=\"line\">AddDefaultCharset UTF-8   </span><br><span class=\"line\">AddType application/x-compress .Z</span><br><span class=\"line\">AddType application/x-gzip .gz .tgz</span><br><span class=\"line\">AddType application/x-x509-ca-cert .crt</span><br><span class=\"line\">AddType application/x-pkcs7-crl    .crl</span><br><span class=\"line\">mime</span><br><span class=\"line\">AddHandler type-map var apcche</span><br><span class=\"line\">AddType text/html .shtml</span><br><span class=\"line\">AddOutputFilter INCLUDES .shtml  SSI</span><br><span class=\"line\">Alias /error/ &quot;/var/www/error/&quot;  </span><br><span class=\"line\">&lt;IfModule mod_negotiation.c&gt;</span><br><span class=\"line\">&lt;IfModule mod_include.c&gt;</span><br><span class=\"line\">&lt;Directory &quot;/var/www/error&quot;&gt; </span><br><span class=\"line\">AllowOverride None</span><br><span class=\"line\">Options IncludesNoExec</span><br><span class=\"line\">AddOutputFilter Includes html</span><br><span class=\"line\">AddHandler type-map var</span><br><span class=\"line\">Order allow,deny</span><br><span class=\"line\">Allow from all</span><br><span class=\"line\">LanguagePriority en es de fr</span><br><span class=\"line\">ForceLanguagePriority Prefer Fallback</span><br><span class=\"line\">&lt;/Directory&gt;</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\">&lt;/IfModule&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">BrowserMatch &quot;Mozilla/2&quot; nokeepalive</span><br><span class=\"line\">BrowserMatch &quot;MSIE 4\\.0b2;&quot; nokeepalive downgrade-1.0 force-response-</span><br><span class=\"line\"></span><br><span class=\"line\">1.0</span><br><span class=\"line\">BrowserMatch &quot;RealPlayer 4\\.0&quot; force-response-1.0</span><br><span class=\"line\">BrowserMatch &quot;Java/1\\.0&quot; force-response-1.0</span><br><span class=\"line\">BrowserMatch &quot;JDK/1\\.0&quot; force-response-1.0</span><br><span class=\"line\">BrowserMatch &quot;Microsoft Data Access Internet Publishing Provider&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">redirect-carefully</span><br><span class=\"line\">BrowserMatch &quot;MS FrontPage&quot; redirect-carefully</span><br><span class=\"line\">BrowserMatch &quot;^WebDrive&quot; redirect-carefully</span><br><span class=\"line\">BrowserMatch &quot;^WebDAVFS/1.[0123]&quot; redirect-carefully</span><br><span class=\"line\">BrowserMatch &quot;^gnome-vfs/1.0&quot; redirect-carefully</span><br><span class=\"line\">BrowserMatch &quot;^XML Spy&quot; redirect-carefully</span><br><span class=\"line\">BrowserMatch &quot;^Dreamweaver-WebDAV-SCM1&quot; redirect-carefully</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"DNS","published":1,"author":"xiemx","comments":1,"date":"2015-11-30T02:11:12.000Z","_content":"DNSIPlinuxdnsBINDIPIPdns\n\n* IP\n\n* ip\n\n\n`FQDN`\"www.xiemx.com.\" DNSDNS\"www.xiemx.com.\"DNScomxiemx.comwwwDNS\n\n\n\n1. :\nDNS,DNS,DNS\n2. ():\nDNSDNS2DNS1DNS3IPDNS1DNS3DNS3DNS1DNS4IPDNS1\n\n\n\n* AIP\n\n* CNAMEA\n\n* MXMXMX\n\n* NSDNSDNSDNS\n\n* PTRIPDNS\n\n \n\n\n```shell\nyum  -y  install  bind\n\n9.8.2\n\n[root@localhost ~]# yum info bind\nLoaded plugins: product-id, refresh-packagekit, security, subscription-manager\nThis system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.\nlocalyumdata | 3.9 kB 00:00 ...\nInstalled Packages\nName : bind\nArch : x86_64\nEpoch : 32\nVersion : 9.8.2\nRelease : 0.17.rc1.el6_4.6\n```\n\n```\n/var/run/named/  pid\n/var/named/  \n/etc/named.conf \n/etc/named.rfc1912.zones \n/etc/rc.d/init.d/named \n\n[root@localhost ~]# cat /etc/named.conf\noptions {\n  listen-on port 53 { any; };ipv453127.0.0.1anyIP\n  listen-on-v6 port 53 { any; };ipv6\n  directory \"/var/named\";\n  dump-file \"/var/named/data/cache_dump.db\";\n  statistics-file \"/var/named/data/named_stats.txt\";\n  memstatistics-file \"/var/named/data/named_mem_stats.txt\";\n  allow-query { any; };IPlocalhostany\n  recursion yes;\n\n  dnssec-enable yes; DNSSECDNSDNSSECDNS\n  dnssec-validation yes;\n  dnssec-lookaside auto;\n\n  /* Path to ISC DLV key */\n  bindkeys-file \"/etc/named.iscdlv.key\";\n\n  managed-keys-directory \"/var/named/dynamic\";\n};\n\nlogging {\n  channel default_debug {\n    file \"data/named.run\";\n    severity dynamic;\n  };\n};\n\nzone \".\" IN {\n  type hint;\n  file \"named.ca\";\n};  \n\ninclude \"/etc/named.rfc1912.zones\"; \ninclude \"/etc/named.root.key\";\n```\n```shell\n[root@localhost ~]# cat /etc/named.rfc1912.zones\n\nzone \"xiemx.com\" IN {                    \" \"\n  type master;                                      masterhintslave2dnsDNSslave\n  file \"xiemx.com.zone\";                    xiemx.com/var/named/directory\n  allow-update { none; };\n};                                                           xiemx.com\n\nzone \"1.168.192.in-addr.arpa\" IN { \"\"IPip.in-addr-arpa,192.168.1\n  type master;\n  file \"192.168.1.zone\";\n  allow-update { none; };\n};                                                          192.168.1\n\n named.rfc1912.zoneslocalhost\n```\n```shell\n[root@localhost ~]# cat /var/named/xiemx.com.zone\n$TTL    1D       TTL1DTTL\n@          IN       SOA      @   rname.invalid. (\n0    ; serial   \n1D    ; refreshslave\n1H    ; retryslave\n1W    ; expire1\n3H )    ; minimum3\nNS              @\nA                 192.168.1.10\nwww    A                 192.168.1.100\nMX  5          mail                 MX5mx\nmail     A                 192.168.1.101\nftp       CNAME      ftp1                \nftp1       A                192.168.1.103  \n$generate  150-200   test$        A           192.168.1.$      IP test150.xiemx.com<>192.168.1.150\n```\n```shell\n[root@localhost ~]# cat /var/named/192.168.1.zone\n$TTL    1D\n@          IN       SOA      @   rname.invalid. (\n0    ; serial\n1D    ; refresh\n1H    ; retry\n1W    ; expire\n3H )    ; minimum\nNS              xiemx.com.\n101    PTR    www.xiemx.com.\n102    PTR    mail.xiemx.com.\n103    PTR    ftp.xiemx.com.\n103    PTR    xxx.xiemx.com.\n\n\n\n1.mxcnameA\n2.@\" \"\n3.dns@wwwdnswww.xiemx.com.\n4.IPPTR1AIP\n```\n```shell\n\n\n[root@localhost ~]# nslookup\n> server 192.168.17.6\nDefault server: 192.168.17.6\nAddress: 192.168.17.6#53\n\n> xiemx.com\nServer:        192.168.17.6\nAddress:    192.168.17.6#53\n\nName:    xiemx.com\nAddress: 127.0.0.1\n\n> www.xiemx.com\nServer:        192.168.17.6\nAddress:    192.168.17.6#53\n\nName:    www.xiemx.com\nAddress: 192.168.1.100\n> mail.xiemx.com\nServer:        192.168.17.6\nAddress:    192.168.17.6#53\n\nName:    mail.xiemx.com\nAddress: 192.168.1.101\n\n> ftp.xiemx.com\nServer:        192.168.17.6\nAddress:    192.168.17.6#53\n\nftp.xiemx.com    canonical name = ftp1.xiemx.com.\nName:    xxx.xiemx.com\nAddress: 192.168.1.103\n\n> test88.xiemx.com\nServer:        192.168.17.6\nAddress:    192.168.17.6#53\n\nName:    test88.xiemx.com\nAddress: 192.168.1.88\n\n> 192.168.1.181\nServer:        192.168.17.6\nAddress:    192.168.17.6#53\n\n181.1.168.192.in-addr.arpa    name = test181.xiemx.com.\n```","source":"_posts/dns-server.md","raw":"---\nlayout: post\ntitle: DNS\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-11-30 10:11:12\ntags: [ dns ]\ncategories:\n    - dns\n---\nDNSIPlinuxdnsBINDIPIPdns\n\n* IP\n\n* ip\n\n\n`FQDN`\"www.xiemx.com.\" DNSDNS\"www.xiemx.com.\"DNScomxiemx.comwwwDNS\n\n\n\n1. :\nDNS,DNS,DNS\n2. ():\nDNSDNS2DNS1DNS3IPDNS1DNS3DNS3DNS1DNS4IPDNS1\n\n\n\n* AIP\n\n* CNAMEA\n\n* MXMXMX\n\n* NSDNSDNSDNS\n\n* PTRIPDNS\n\n \n\n\n```shell\nyum  -y  install  bind\n\n9.8.2\n\n[root@localhost ~]# yum info bind\nLoaded plugins: product-id, refresh-packagekit, security, subscription-manager\nThis system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.\nlocalyumdata | 3.9 kB 00:00 ...\nInstalled Packages\nName : bind\nArch : x86_64\nEpoch : 32\nVersion : 9.8.2\nRelease : 0.17.rc1.el6_4.6\n```\n\n```\n/var/run/named/  pid\n/var/named/  \n/etc/named.conf \n/etc/named.rfc1912.zones \n/etc/rc.d/init.d/named \n\n[root@localhost ~]# cat /etc/named.conf\noptions {\n  listen-on port 53 { any; };ipv453127.0.0.1anyIP\n  listen-on-v6 port 53 { any; };ipv6\n  directory \"/var/named\";\n  dump-file \"/var/named/data/cache_dump.db\";\n  statistics-file \"/var/named/data/named_stats.txt\";\n  memstatistics-file \"/var/named/data/named_mem_stats.txt\";\n  allow-query { any; };IPlocalhostany\n  recursion yes;\n\n  dnssec-enable yes; DNSSECDNSDNSSECDNS\n  dnssec-validation yes;\n  dnssec-lookaside auto;\n\n  /* Path to ISC DLV key */\n  bindkeys-file \"/etc/named.iscdlv.key\";\n\n  managed-keys-directory \"/var/named/dynamic\";\n};\n\nlogging {\n  channel default_debug {\n    file \"data/named.run\";\n    severity dynamic;\n  };\n};\n\nzone \".\" IN {\n  type hint;\n  file \"named.ca\";\n};  \n\ninclude \"/etc/named.rfc1912.zones\"; \ninclude \"/etc/named.root.key\";\n```\n```shell\n[root@localhost ~]# cat /etc/named.rfc1912.zones\n\nzone \"xiemx.com\" IN {                    \" \"\n  type master;                                      masterhintslave2dnsDNSslave\n  file \"xiemx.com.zone\";                    xiemx.com/var/named/directory\n  allow-update { none; };\n};                                                           xiemx.com\n\nzone \"1.168.192.in-addr.arpa\" IN { \"\"IPip.in-addr-arpa,192.168.1\n  type master;\n  file \"192.168.1.zone\";\n  allow-update { none; };\n};                                                          192.168.1\n\n named.rfc1912.zoneslocalhost\n```\n```shell\n[root@localhost ~]# cat /var/named/xiemx.com.zone\n$TTL    1D       TTL1DTTL\n@          IN       SOA      @   rname.invalid. (\n0    ; serial   \n1D    ; refreshslave\n1H    ; retryslave\n1W    ; expire1\n3H )    ; minimum3\nNS              @\nA                 192.168.1.10\nwww    A                 192.168.1.100\nMX  5          mail                 MX5mx\nmail     A                 192.168.1.101\nftp       CNAME      ftp1                \nftp1       A                192.168.1.103  \n$generate  150-200   test$        A           192.168.1.$      IP test150.xiemx.com<>192.168.1.150\n```\n```shell\n[root@localhost ~]# cat /var/named/192.168.1.zone\n$TTL    1D\n@          IN       SOA      @   rname.invalid. (\n0    ; serial\n1D    ; refresh\n1H    ; retry\n1W    ; expire\n3H )    ; minimum\nNS              xiemx.com.\n101    PTR    www.xiemx.com.\n102    PTR    mail.xiemx.com.\n103    PTR    ftp.xiemx.com.\n103    PTR    xxx.xiemx.com.\n\n\n\n1.mxcnameA\n2.@\" \"\n3.dns@wwwdnswww.xiemx.com.\n4.IPPTR1AIP\n```\n```shell\n\n\n[root@localhost ~]# nslookup\n> server 192.168.17.6\nDefault server: 192.168.17.6\nAddress: 192.168.17.6#53\n\n> xiemx.com\nServer:        192.168.17.6\nAddress:    192.168.17.6#53\n\nName:    xiemx.com\nAddress: 127.0.0.1\n\n> www.xiemx.com\nServer:        192.168.17.6\nAddress:    192.168.17.6#53\n\nName:    www.xiemx.com\nAddress: 192.168.1.100\n> mail.xiemx.com\nServer:        192.168.17.6\nAddress:    192.168.17.6#53\n\nName:    mail.xiemx.com\nAddress: 192.168.1.101\n\n> ftp.xiemx.com\nServer:        192.168.17.6\nAddress:    192.168.17.6#53\n\nftp.xiemx.com    canonical name = ftp1.xiemx.com.\nName:    xxx.xiemx.com\nAddress: 192.168.1.103\n\n> test88.xiemx.com\nServer:        192.168.17.6\nAddress:    192.168.17.6#53\n\nName:    test88.xiemx.com\nAddress: 192.168.1.88\n\n> 192.168.1.181\nServer:        192.168.17.6\nAddress:    192.168.17.6#53\n\n181.1.168.192.in-addr.arpa    name = test181.xiemx.com.\n```","slug":"dns-server","updated":"2019-10-21T06:57:42.819Z","photos":[],"link":"","_id":"ck42dyijm00jru9urw3mpqfku","content":"<p>DNSIPlinuxdnsBINDIPIPdns</p>\n<ul>\n<li><p>IP</p>\n</li>\n<li><p>ip</p>\n</li>\n</ul>\n<p><code>FQDN</code><a href=\"http://www.xiemx.com.&quot;\" target=\"_blank\" rel=\"noopener\">www.xiemx.com.&quot;</a> DNSDNS<a href=\"http://www.xiemx.com.&quot;DNScomxiemx.comwwwDNS\" target=\"_blank\" rel=\"noopener\">www.xiemx.com.&quot;DNScomxiemx.comwwwDNS</a></p>\n<p></p>\n<ol>\n<li>:<br>DNS,DNS,DNS</li>\n<li>():<br>DNSDNS2DNS1DNS3IPDNS1DNS3DNS3DNS1DNS4IPDNS1</li>\n</ol>\n<p></p>\n<ul>\n<li><p>AIP</p>\n</li>\n<li><p>CNAMEA</p>\n</li>\n<li><p>MXMXMX</p>\n</li>\n<li><p>NSDNSDNSDNS</p>\n</li>\n<li><p>PTRIPDNS</p>\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum  -y  install  bind</span><br><span class=\"line\"></span><br><span class=\"line\">9.8.2</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# yum info bind</span><br><span class=\"line\">Loaded plugins: product-id, refresh-packagekit, security, subscription-manager</span><br><span class=\"line\">This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.</span><br><span class=\"line\">localyumdata | 3.9 kB 00:00 ...</span><br><span class=\"line\">Installed Packages</span><br><span class=\"line\">Name : bind</span><br><span class=\"line\">Arch : x86_64</span><br><span class=\"line\">Epoch : 32</span><br><span class=\"line\">Version : 9.8.2</span><br><span class=\"line\">Release : 0.17.rc1.el6_4.6</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/<span class=\"keyword\">var</span>/<span class=\"keyword\">run</span>/named/  pid</span><br><span class=\"line\">/<span class=\"keyword\">var</span>/named/  </span><br><span class=\"line\">/etc/named.<span class=\"keyword\">conf</span> </span><br><span class=\"line\">/etc/named.rfc1912.zones </span><br><span class=\"line\">/etc/rc.<span class=\"keyword\">d</span>/init.<span class=\"keyword\">d</span>/named </span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# <span class=\"keyword\">cat</span> /etc/named.<span class=\"keyword\">conf</span></span><br><span class=\"line\">options &#123;</span><br><span class=\"line\">  listen-<span class=\"keyword\">on</span> port 53 &#123; any; &#125;;ipv453127.0.0.1anyIP</span><br><span class=\"line\">  listen-<span class=\"keyword\">on</span>-v6 port 53 &#123; any; &#125;;ipv6</span><br><span class=\"line\">  directory <span class=\"string\">\"/var/named\"</span>;</span><br><span class=\"line\">  dump-<span class=\"keyword\">file</span> <span class=\"string\">\"/var/named/data/cache_dump.db\"</span>;</span><br><span class=\"line\">  statistics-<span class=\"keyword\">file</span> <span class=\"string\">\"/var/named/data/named_stats.txt\"</span>;</span><br><span class=\"line\">  memstatistics-<span class=\"keyword\">file</span> <span class=\"string\">\"/var/named/data/named_mem_stats.txt\"</span>;</span><br><span class=\"line\">  allow-<span class=\"keyword\">query</span> &#123; any; &#125;;IPlocalhostany</span><br><span class=\"line\">  recursion yes;</span><br><span class=\"line\"></span><br><span class=\"line\">  dnssec-enable yes; DNSSECDNSDNSSECDNS</span><br><span class=\"line\">  dnssec-validation yes;</span><br><span class=\"line\">  dnssec-lookaside auto;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* Path to ISC DLV key */</span></span><br><span class=\"line\">  bindkeys-<span class=\"keyword\">file</span> <span class=\"string\">\"/etc/named.iscdlv.key\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  managed-keys-directory <span class=\"string\">\"/var/named/dynamic\"</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">logging &#123;</span><br><span class=\"line\">  channel default_debug &#123;</span><br><span class=\"line\">    <span class=\"keyword\">file</span> <span class=\"string\">\"data/named.run\"</span>;</span><br><span class=\"line\">    severity dynamic;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">zone <span class=\"string\">\".\"</span> <span class=\"keyword\">IN</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">type</span> hint;</span><br><span class=\"line\">  <span class=\"keyword\">file</span> <span class=\"string\">\"named.ca\"</span>;</span><br><span class=\"line\">&#125;;  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">include</span> <span class=\"string\">\"/etc/named.rfc1912.zones\"</span>; </span><br><span class=\"line\"><span class=\"keyword\">include</span> <span class=\"string\">\"/etc/named.root.key\"</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# cat /etc/named.rfc1912.zones</span><br><span class=\"line\"></span><br><span class=\"line\">zone \"xiemx.com\" IN &#123;                    \" \"</span><br><span class=\"line\">  type master;                                      masterhintslave2dnsDNSslave</span><br><span class=\"line\">  file \"xiemx.com.zone\";                    xiemx.com/var/named/directory</span><br><span class=\"line\">  allow-update &#123; none; &#125;;</span><br><span class=\"line\">&#125;;                                                           xiemx.com</span><br><span class=\"line\"></span><br><span class=\"line\">zone \"1.168.192.in-addr.arpa\" IN &#123; \"\"IPip.in-addr-arpa,192.168.1</span><br><span class=\"line\">  type master;</span><br><span class=\"line\">  file \"192.168.1.zone\";</span><br><span class=\"line\">  allow-update &#123; none; &#125;;</span><br><span class=\"line\">&#125;;                                                          192.168.1</span><br><span class=\"line\"></span><br><span class=\"line\"> named.rfc1912.zoneslocalhost</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# cat /var/named/xiemx.com.zone</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">TTL    1D       TTL1DTTL</span></span><br><span class=\"line\">@          IN       SOA      @   rname.invalid. (</span><br><span class=\"line\">0    ; serial   </span><br><span class=\"line\">1D    ; refreshslave</span><br><span class=\"line\">1H    ; retryslave</span><br><span class=\"line\">1W    ; expire1</span><br><span class=\"line\">3H )    ; minimum3</span><br><span class=\"line\">NS              @</span><br><span class=\"line\">A                 192.168.1.10</span><br><span class=\"line\">www    A                 192.168.1.100</span><br><span class=\"line\">MX  5          mail                 MX5mx</span><br><span class=\"line\">mail     A                 192.168.1.101</span><br><span class=\"line\">ftp       CNAME      ftp1                </span><br><span class=\"line\">ftp1       A                192.168.1.103  </span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">generate  150-200   <span class=\"built_in\">test</span>$        A           192.168.1.$      IP test150.xiemx.com&lt;&gt;192.168.1.150</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# cat /var/named/192.168.1.zone</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">TTL    1D</span></span><br><span class=\"line\">@          IN       SOA      @   rname.invalid. (</span><br><span class=\"line\">0    ; serial</span><br><span class=\"line\">1D    ; refresh</span><br><span class=\"line\">1H    ; retry</span><br><span class=\"line\">1W    ; expire</span><br><span class=\"line\">3H )    ; minimum</span><br><span class=\"line\">NS              xiemx.com.</span><br><span class=\"line\">101    PTR    www.xiemx.com.</span><br><span class=\"line\">102    PTR    mail.xiemx.com.</span><br><span class=\"line\">103    PTR    ftp.xiemx.com.</span><br><span class=\"line\">103    PTR    xxx.xiemx.com.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">1.mxcnameA</span><br><span class=\"line\">2.@\" \"</span><br><span class=\"line\">3.dns@wwwdnswww.xiemx.com.</span><br><span class=\"line\">4.IPPTR1AIP</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# nslookup</span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> server 192.168.17.6</span></span><br><span class=\"line\">Default server: 192.168.17.6</span><br><span class=\"line\">Address: 192.168.17.6#53</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> xiemx.com</span></span><br><span class=\"line\">Server:        192.168.17.6</span><br><span class=\"line\">Address:    192.168.17.6#53</span><br><span class=\"line\"></span><br><span class=\"line\">Name:    xiemx.com</span><br><span class=\"line\">Address: 127.0.0.1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> www.xiemx.com</span></span><br><span class=\"line\">Server:        192.168.17.6</span><br><span class=\"line\">Address:    192.168.17.6#53</span><br><span class=\"line\"></span><br><span class=\"line\">Name:    www.xiemx.com</span><br><span class=\"line\">Address: 192.168.1.100</span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> mail.xiemx.com</span></span><br><span class=\"line\">Server:        192.168.17.6</span><br><span class=\"line\">Address:    192.168.17.6#53</span><br><span class=\"line\"></span><br><span class=\"line\">Name:    mail.xiemx.com</span><br><span class=\"line\">Address: 192.168.1.101</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> ftp.xiemx.com</span></span><br><span class=\"line\">Server:        192.168.17.6</span><br><span class=\"line\">Address:    192.168.17.6#53</span><br><span class=\"line\"></span><br><span class=\"line\">ftp.xiemx.com    canonical name = ftp1.xiemx.com.</span><br><span class=\"line\">Name:    xxx.xiemx.com</span><br><span class=\"line\">Address: 192.168.1.103</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> test88.xiemx.com</span></span><br><span class=\"line\">Server:        192.168.17.6</span><br><span class=\"line\">Address:    192.168.17.6#53</span><br><span class=\"line\"></span><br><span class=\"line\">Name:    test88.xiemx.com</span><br><span class=\"line\">Address: 192.168.1.88</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> 192.168.1.181</span></span><br><span class=\"line\">Server:        192.168.17.6</span><br><span class=\"line\">Address:    192.168.17.6#53</span><br><span class=\"line\"></span><br><span class=\"line\">181.1.168.192.in-addr.arpa    name = test181.xiemx.com.</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>DNSIPlinuxdnsBINDIPIPdns</p>\n<ul>\n<li><p>IP</p>\n</li>\n<li><p>ip</p>\n</li>\n</ul>\n<p><code>FQDN</code><a href=\"http://www.xiemx.com.&quot;\" target=\"_blank\" rel=\"noopener\">www.xiemx.com.&quot;</a> DNSDNS<a href=\"http://www.xiemx.com.&quot;DNScomxiemx.comwwwDNS\" target=\"_blank\" rel=\"noopener\">www.xiemx.com.&quot;DNScomxiemx.comwwwDNS</a></p>\n<p></p>\n<ol>\n<li>:<br>DNS,DNS,DNS</li>\n<li>():<br>DNSDNS2DNS1DNS3IPDNS1DNS3DNS3DNS1DNS4IPDNS1</li>\n</ol>\n<p></p>\n<ul>\n<li><p>AIP</p>\n</li>\n<li><p>CNAMEA</p>\n</li>\n<li><p>MXMXMX</p>\n</li>\n<li><p>NSDNSDNSDNS</p>\n</li>\n<li><p>PTRIPDNS</p>\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum  -y  install  bind</span><br><span class=\"line\"></span><br><span class=\"line\">9.8.2</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# yum info bind</span><br><span class=\"line\">Loaded plugins: product-id, refresh-packagekit, security, subscription-manager</span><br><span class=\"line\">This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.</span><br><span class=\"line\">localyumdata | 3.9 kB 00:00 ...</span><br><span class=\"line\">Installed Packages</span><br><span class=\"line\">Name : bind</span><br><span class=\"line\">Arch : x86_64</span><br><span class=\"line\">Epoch : 32</span><br><span class=\"line\">Version : 9.8.2</span><br><span class=\"line\">Release : 0.17.rc1.el6_4.6</span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/<span class=\"keyword\">var</span>/<span class=\"keyword\">run</span>/named/  pid</span><br><span class=\"line\">/<span class=\"keyword\">var</span>/named/  </span><br><span class=\"line\">/etc/named.<span class=\"keyword\">conf</span> </span><br><span class=\"line\">/etc/named.rfc1912.zones </span><br><span class=\"line\">/etc/rc.<span class=\"keyword\">d</span>/init.<span class=\"keyword\">d</span>/named </span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# <span class=\"keyword\">cat</span> /etc/named.<span class=\"keyword\">conf</span></span><br><span class=\"line\">options &#123;</span><br><span class=\"line\">  listen-<span class=\"keyword\">on</span> port 53 &#123; any; &#125;;ipv453127.0.0.1anyIP</span><br><span class=\"line\">  listen-<span class=\"keyword\">on</span>-v6 port 53 &#123; any; &#125;;ipv6</span><br><span class=\"line\">  directory <span class=\"string\">\"/var/named\"</span>;</span><br><span class=\"line\">  dump-<span class=\"keyword\">file</span> <span class=\"string\">\"/var/named/data/cache_dump.db\"</span>;</span><br><span class=\"line\">  statistics-<span class=\"keyword\">file</span> <span class=\"string\">\"/var/named/data/named_stats.txt\"</span>;</span><br><span class=\"line\">  memstatistics-<span class=\"keyword\">file</span> <span class=\"string\">\"/var/named/data/named_mem_stats.txt\"</span>;</span><br><span class=\"line\">  allow-<span class=\"keyword\">query</span> &#123; any; &#125;;IPlocalhostany</span><br><span class=\"line\">  recursion yes;</span><br><span class=\"line\"></span><br><span class=\"line\">  dnssec-enable yes; DNSSECDNSDNSSECDNS</span><br><span class=\"line\">  dnssec-validation yes;</span><br><span class=\"line\">  dnssec-lookaside auto;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* Path to ISC DLV key */</span></span><br><span class=\"line\">  bindkeys-<span class=\"keyword\">file</span> <span class=\"string\">\"/etc/named.iscdlv.key\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  managed-keys-directory <span class=\"string\">\"/var/named/dynamic\"</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">logging &#123;</span><br><span class=\"line\">  channel default_debug &#123;</span><br><span class=\"line\">    <span class=\"keyword\">file</span> <span class=\"string\">\"data/named.run\"</span>;</span><br><span class=\"line\">    severity dynamic;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">zone <span class=\"string\">\".\"</span> <span class=\"keyword\">IN</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">type</span> hint;</span><br><span class=\"line\">  <span class=\"keyword\">file</span> <span class=\"string\">\"named.ca\"</span>;</span><br><span class=\"line\">&#125;;  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">include</span> <span class=\"string\">\"/etc/named.rfc1912.zones\"</span>; </span><br><span class=\"line\"><span class=\"keyword\">include</span> <span class=\"string\">\"/etc/named.root.key\"</span>;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# cat /etc/named.rfc1912.zones</span><br><span class=\"line\"></span><br><span class=\"line\">zone \"xiemx.com\" IN &#123;                    \" \"</span><br><span class=\"line\">  type master;                                      masterhintslave2dnsDNSslave</span><br><span class=\"line\">  file \"xiemx.com.zone\";                    xiemx.com/var/named/directory</span><br><span class=\"line\">  allow-update &#123; none; &#125;;</span><br><span class=\"line\">&#125;;                                                           xiemx.com</span><br><span class=\"line\"></span><br><span class=\"line\">zone \"1.168.192.in-addr.arpa\" IN &#123; \"\"IPip.in-addr-arpa,192.168.1</span><br><span class=\"line\">  type master;</span><br><span class=\"line\">  file \"192.168.1.zone\";</span><br><span class=\"line\">  allow-update &#123; none; &#125;;</span><br><span class=\"line\">&#125;;                                                          192.168.1</span><br><span class=\"line\"></span><br><span class=\"line\"> named.rfc1912.zoneslocalhost</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# cat /var/named/xiemx.com.zone</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">TTL    1D       TTL1DTTL</span></span><br><span class=\"line\">@          IN       SOA      @   rname.invalid. (</span><br><span class=\"line\">0    ; serial   </span><br><span class=\"line\">1D    ; refreshslave</span><br><span class=\"line\">1H    ; retryslave</span><br><span class=\"line\">1W    ; expire1</span><br><span class=\"line\">3H )    ; minimum3</span><br><span class=\"line\">NS              @</span><br><span class=\"line\">A                 192.168.1.10</span><br><span class=\"line\">www    A                 192.168.1.100</span><br><span class=\"line\">MX  5          mail                 MX5mx</span><br><span class=\"line\">mail     A                 192.168.1.101</span><br><span class=\"line\">ftp       CNAME      ftp1                </span><br><span class=\"line\">ftp1       A                192.168.1.103  </span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">generate  150-200   <span class=\"built_in\">test</span>$        A           192.168.1.$      IP test150.xiemx.com&lt;&gt;192.168.1.150</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# cat /var/named/192.168.1.zone</span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">TTL    1D</span></span><br><span class=\"line\">@          IN       SOA      @   rname.invalid. (</span><br><span class=\"line\">0    ; serial</span><br><span class=\"line\">1D    ; refresh</span><br><span class=\"line\">1H    ; retry</span><br><span class=\"line\">1W    ; expire</span><br><span class=\"line\">3H )    ; minimum</span><br><span class=\"line\">NS              xiemx.com.</span><br><span class=\"line\">101    PTR    www.xiemx.com.</span><br><span class=\"line\">102    PTR    mail.xiemx.com.</span><br><span class=\"line\">103    PTR    ftp.xiemx.com.</span><br><span class=\"line\">103    PTR    xxx.xiemx.com.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">1.mxcnameA</span><br><span class=\"line\">2.@\" \"</span><br><span class=\"line\">3.dns@wwwdnswww.xiemx.com.</span><br><span class=\"line\">4.IPPTR1AIP</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# nslookup</span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> server 192.168.17.6</span></span><br><span class=\"line\">Default server: 192.168.17.6</span><br><span class=\"line\">Address: 192.168.17.6#53</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> xiemx.com</span></span><br><span class=\"line\">Server:        192.168.17.6</span><br><span class=\"line\">Address:    192.168.17.6#53</span><br><span class=\"line\"></span><br><span class=\"line\">Name:    xiemx.com</span><br><span class=\"line\">Address: 127.0.0.1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> www.xiemx.com</span></span><br><span class=\"line\">Server:        192.168.17.6</span><br><span class=\"line\">Address:    192.168.17.6#53</span><br><span class=\"line\"></span><br><span class=\"line\">Name:    www.xiemx.com</span><br><span class=\"line\">Address: 192.168.1.100</span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> mail.xiemx.com</span></span><br><span class=\"line\">Server:        192.168.17.6</span><br><span class=\"line\">Address:    192.168.17.6#53</span><br><span class=\"line\"></span><br><span class=\"line\">Name:    mail.xiemx.com</span><br><span class=\"line\">Address: 192.168.1.101</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> ftp.xiemx.com</span></span><br><span class=\"line\">Server:        192.168.17.6</span><br><span class=\"line\">Address:    192.168.17.6#53</span><br><span class=\"line\"></span><br><span class=\"line\">ftp.xiemx.com    canonical name = ftp1.xiemx.com.</span><br><span class=\"line\">Name:    xxx.xiemx.com</span><br><span class=\"line\">Address: 192.168.1.103</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> test88.xiemx.com</span></span><br><span class=\"line\">Server:        192.168.17.6</span><br><span class=\"line\">Address:    192.168.17.6#53</span><br><span class=\"line\"></span><br><span class=\"line\">Name:    test88.xiemx.com</span><br><span class=\"line\">Address: 192.168.1.88</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> 192.168.1.181</span></span><br><span class=\"line\">Server:        192.168.17.6</span><br><span class=\"line\">Address:    192.168.17.6#53</span><br><span class=\"line\"></span><br><span class=\"line\">181.1.168.192.in-addr.arpa    name = test181.xiemx.com.</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"k8s ingress-nginxbalance","published":1,"author":"xiemx","comments":1,"date":"2019-09-15T23:09:52.000Z","_content":"\n\n#### 1. balancer.init_worker()balancer.balance()\n```lua\nhttp {\n        lua_package_path \"/etc/nginx/lua/?.lua;/etc/nginx/lua/vendor/?.lua;/usr/local/lib/lua/?.lua;;\";\n        init_by_lua_block {\n                ok, res = pcall(require, \"configuration\")\n        }\n\n        init_worker_by_lua_block {\n                balancer.init_worker()  ##### ngx.timer.every(BACKENDS_SYNC_INTERVAL, sync_backends)\n        }\n     \n###upstream configure\nupstream upstream_balancer {\n\t\tserver 0.0.0.1; # placeholder\n\n\t\tbalancer_by_lua_block {\n\t\t\tbalancer.balance()\n\t\t}\n\t\tkeepalive 32;\n\t\tkeepalive_timeout  60s;\n\t\tkeepalive_requests 100;\n\t}\n```\n#### 2. backendbalancer.init_worker()\n```lua\n####https://sourcegraph.com/github.com/kubernetes/ingress-nginx@dd0fe4b458cc5520f25eb8bba25bbe6f0c72ee98/-/blob/rootfs/etc/nginx/lua/balancer.lua?utm_source=share#L223\n\nlocal configuration = require(\"configuration\")\n\nfunction _M.init_worker()\n  sync_backends() -- when worker starts, sync backends without delay\n  local _, err = ngx.timer.every(BACKENDS_SYNC_INTERVAL, sync_backends)\n  if err then\n    ngx.log(ngx.ERR, string.format(\"error when setting up timer.every for sync_backends: %s\", tostring(err)))\n  end\nend\n\n\nlocal function sync_backends()\n  local backends_data = configuration.get_backends_data()\n\n  local new_backends, err = cjson.decode(backends_data)\n\n\n  local balancers_to_keep = {}\n  for _, new_backend in ipairs(new_backends) do\n    sync_backend(new_backend)\n    balancers_to_keep[new_backend.name] = balancers[new_backend.name]\n  end\nend\n```\n```lua\n####https://sourcegraph.com/github.com/kubernetes/ingress-nginx@dd0fe4b458cc5520f25eb8bba25bbe6f0c72ee98/-/blob/rootfs/etc/nginx/lua/configuration.lua?utm_source=share#L10:10\n\nlocal configuration_data = ngx.shared.configuration_data\nlocal certificate_data = ngx.shared.certificate_data\n\nlocal _M = {}\n\nfunction _M.get_backends_data()\n  return configuration_data:get(\"backends\")\nend\n\nfunction _M.call()\n  if ngx.var.request_method ~= \"POST\" and ngx.var.request_method ~= \"GET\" then\n    ngx.status = ngx.HTTP_BAD_REQUEST\n    ngx.print(\"Only POST and GET requests are allowed!\")\n    return\n  end\n\n  if ngx.var.request_uri == \"/configuration/servers\" then\n    handle_servers()\n    return\n  end\n\n  if ngx.var.request_uri == \"/configuration/general\" then\n    handle_general()\n    return\n  end\n\n  if ngx.var.uri == \"/configuration/certs\" then\n    handle_certs()\n    return\n  end\n\n  if ngx.var.request_uri ~= \"/configuration/backends\" then ####4URL\n    ngx.status = ngx.HTTP_NOT_FOUND\n    ngx.print(\"Not found!\")\n    return\n  end\n\n  local backends = fetch_request_body()\n\n  local success, err = configuration_data:set(\"backends\", backends)\n\nend\n```\n```lua\n### fetch_request_body()POSTCall()\nlocal function fetch_request_body()\n  ngx.req.read_body() ###ngx.req.get_body_data()nil,\n  local body = ngx.req.get_body_data()\n\n  if not body then\n    local file_name = ngx.req.get_body_file() ###cache file\n\n    local file = io.open(file_name, \"rb\")\n    if not file then\n      return nil\n    end\n\n    body = file:read(\"*all\")\n    file:close()\n  end\n\n  return body\nend\n```\n```\n####nginx.conf nginxcall()serverurl /configuration \n        server {\n                listen unix:/tmp/nginx-status-server.sock;\n                set $proxy_upstream_name \"internal\";\n\n                keepalive_timeout 0;\n                gzip off;\n\n                access_log off;\n\n                location /configuration {\n                        # this should be equals to configuration_data dict\n                        client_max_body_size                    10m;\n                        client_body_buffer_size                 10m;\n                        proxy_buffering                         off;\n\n                        content_by_lua_block {\n                                configuration.call()\n                        }\n                }\n```\n#### 3. Ingresspod/configuration/backends, configureBackends()\n```go\n####https://github.com/kubernetes/ingress-nginx/blob/ce3e3d51c397ff6a0cd6731cc64360ecdb69ea54/internal/ingress/controller/nginx.go#L982\nfunc configureBackends(rawBackends []*ingress.Backend) error {\n\tbackends := make([]*ingress.Backend, len(rawBackends))\n\n\tfor i, backend := range rawBackends {\n\t\tvar service *apiv1.Service\n\t\tif backend.Service != nil {\n\t\t\tservice = &apiv1.Service{Spec: backend.Service.Spec}\n\t\t}\n\t\tluaBackend := &ingress.Backend{\n\t\t\tName:                 backend.Name,\n\t\t\tPort:                 backend.Port,\n\t\t\tSSLPassthrough:       backend.SSLPassthrough,\n\t\t\tSessionAffinity:      backend.SessionAffinity,\n\t\t\tUpstreamHashBy:       backend.UpstreamHashBy,\n\t\t\tLoadBalancing:        backend.LoadBalancing,\n\t\t\tService:              service,\n\t\t\tNoServer:             backend.NoServer,\n\t\t\tTrafficShapingPolicy: backend.TrafficShapingPolicy,\n\t\t\tAlternativeBackends:  backend.AlternativeBackends,\n\t\t}\n\n\t\tvar endpoints []ingress.Endpoint\n\t\tfor _, endpoint := range backend.Endpoints {\n\t\t\tendpoints = append(endpoints, ingress.Endpoint{\n\t\t\t\tAddress: endpoint.Address,\n\t\t\t\tPort:    endpoint.Port,\n\t\t\t})\n\t\t}\n\n\t\tluaBackend.Endpoints = endpoints\n\t\tbackends[i] = luaBackend\n\t}\n\n\tstatusCode, _, err := nginx.NewPostStatusRequest(\"/configuration/backends\", \"application/json\", backends) ####backends request.body,IP/PORTbackendstruct\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tif statusCode != http.StatusCreated {\n\t\treturn fmt.Errorf(\"unexpected error code: %d\", statusCode)\n\t}\n\n\treturn nil\n}\n\n####Backend struct\ntype Backend struct {\n\tName    string             `json:\"name\"`\n\tService *apiv1.Service     `json:\"service,omitempty\"`\n\tPort    intstr.IntOrString `json:\"port\"`\n\tSecureCACert resolver.AuthSSLCert `json:\"secureCACert\"`\n\tSSLPassthrough bool `json:\"sslPassthrough\"`\n\tEndpoints []Endpoint `json:\"endpoints,omitempty\"`\n\tSessionAffinity SessionAffinityConfig `json:\"sessionAffinityConfig\"`\n\tUpstreamHashBy UpstreamHashByConfig `json:\"upstreamHashByConfig,omitempty\"`\n\tLoadBalancing string `json:\"load-balance,omitempty\"`\n\tNoServer bool `json:\"noServer\"`\n\tTrafficShapingPolicy TrafficShapingPolicy `json:\"trafficShapingPolicy,omitempty\"`\n\tAlternativeBackends []string `json:\"alternativeBackends,omitempty\"`\n}\n```\n#### 4. ngx\\_balancer.set\\_current_peer()backend\n```lua\n####https://sourcegraph.com/github.com/kubernetes/ingress-nginx@dd0fe4b458cc5520f25eb8bba25bbe6f0c72ee98/-/blob/rootfs/etc/nginx/lua/balancer.lua?utm_source=share#L232:13\n\nfunction _M.balance()\n  local balancer = get_balancer()\n  if not balancer then\n    return\n  end\n\n  local peer = balancer:balance()\n  if not peer then\n    ngx.log(ngx.WARN, \"no peer was returned, balancer: \" .. balancer.name)\n    return\n  end\n\n  ngx_balancer.set_more_tries(1)\n\n  local ok, err = ngx_balancer.set_current_peer(peer) ####server\n  if not ok then\n    ngx.log(ngx.ERR, string.format(\"error while setting current upstream peer %s: %s\", peer, err))\n  end\nend\n\n\nlocal function get_balancer()\n  if ngx.ctx.balancer then\n    return ngx.ctx.balancer\n  end\n\n  local backend_name = ngx.var.proxy_upstream_name ###requestproxy_upstream_name\n\n  local balancer = balancers[backend_name] ###balancerssync_backend()\n  if not balancer then\n    return\n  end\n\n  if route_to_alternative_balancer(balancer) then\n    local alternative_backend_name = balancer.alternative_backends[1]\n    ngx.var.proxy_alternative_upstream_name = alternative_backend_name\n\n    balancer = balancers[alternative_backend_name]\n  end\n\n  ngx.ctx.balancer = balancer\n\n  return balancer\nend\n```\n```\n###nginx.conf\nset $proxy_upstream_name    \"dev-dev-auto-deploy-5000\";\nset $proxy_host             $proxy_upstream_name;\n\nproxy_pass http://upstream_balancer;\n```","source":"_posts/k8s-ingress-nginx.md","raw":"---\nlayout: post\ntitle: k8s ingress-nginxbalance\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2019-09-16 07:09:52\ntags: [ k8s, ingress]\ncategories:\n    - k8s\n---\n\n\n#### 1. balancer.init_worker()balancer.balance()\n```lua\nhttp {\n        lua_package_path \"/etc/nginx/lua/?.lua;/etc/nginx/lua/vendor/?.lua;/usr/local/lib/lua/?.lua;;\";\n        init_by_lua_block {\n                ok, res = pcall(require, \"configuration\")\n        }\n\n        init_worker_by_lua_block {\n                balancer.init_worker()  ##### ngx.timer.every(BACKENDS_SYNC_INTERVAL, sync_backends)\n        }\n     \n###upstream configure\nupstream upstream_balancer {\n\t\tserver 0.0.0.1; # placeholder\n\n\t\tbalancer_by_lua_block {\n\t\t\tbalancer.balance()\n\t\t}\n\t\tkeepalive 32;\n\t\tkeepalive_timeout  60s;\n\t\tkeepalive_requests 100;\n\t}\n```\n#### 2. backendbalancer.init_worker()\n```lua\n####https://sourcegraph.com/github.com/kubernetes/ingress-nginx@dd0fe4b458cc5520f25eb8bba25bbe6f0c72ee98/-/blob/rootfs/etc/nginx/lua/balancer.lua?utm_source=share#L223\n\nlocal configuration = require(\"configuration\")\n\nfunction _M.init_worker()\n  sync_backends() -- when worker starts, sync backends without delay\n  local _, err = ngx.timer.every(BACKENDS_SYNC_INTERVAL, sync_backends)\n  if err then\n    ngx.log(ngx.ERR, string.format(\"error when setting up timer.every for sync_backends: %s\", tostring(err)))\n  end\nend\n\n\nlocal function sync_backends()\n  local backends_data = configuration.get_backends_data()\n\n  local new_backends, err = cjson.decode(backends_data)\n\n\n  local balancers_to_keep = {}\n  for _, new_backend in ipairs(new_backends) do\n    sync_backend(new_backend)\n    balancers_to_keep[new_backend.name] = balancers[new_backend.name]\n  end\nend\n```\n```lua\n####https://sourcegraph.com/github.com/kubernetes/ingress-nginx@dd0fe4b458cc5520f25eb8bba25bbe6f0c72ee98/-/blob/rootfs/etc/nginx/lua/configuration.lua?utm_source=share#L10:10\n\nlocal configuration_data = ngx.shared.configuration_data\nlocal certificate_data = ngx.shared.certificate_data\n\nlocal _M = {}\n\nfunction _M.get_backends_data()\n  return configuration_data:get(\"backends\")\nend\n\nfunction _M.call()\n  if ngx.var.request_method ~= \"POST\" and ngx.var.request_method ~= \"GET\" then\n    ngx.status = ngx.HTTP_BAD_REQUEST\n    ngx.print(\"Only POST and GET requests are allowed!\")\n    return\n  end\n\n  if ngx.var.request_uri == \"/configuration/servers\" then\n    handle_servers()\n    return\n  end\n\n  if ngx.var.request_uri == \"/configuration/general\" then\n    handle_general()\n    return\n  end\n\n  if ngx.var.uri == \"/configuration/certs\" then\n    handle_certs()\n    return\n  end\n\n  if ngx.var.request_uri ~= \"/configuration/backends\" then ####4URL\n    ngx.status = ngx.HTTP_NOT_FOUND\n    ngx.print(\"Not found!\")\n    return\n  end\n\n  local backends = fetch_request_body()\n\n  local success, err = configuration_data:set(\"backends\", backends)\n\nend\n```\n```lua\n### fetch_request_body()POSTCall()\nlocal function fetch_request_body()\n  ngx.req.read_body() ###ngx.req.get_body_data()nil,\n  local body = ngx.req.get_body_data()\n\n  if not body then\n    local file_name = ngx.req.get_body_file() ###cache file\n\n    local file = io.open(file_name, \"rb\")\n    if not file then\n      return nil\n    end\n\n    body = file:read(\"*all\")\n    file:close()\n  end\n\n  return body\nend\n```\n```\n####nginx.conf nginxcall()serverurl /configuration \n        server {\n                listen unix:/tmp/nginx-status-server.sock;\n                set $proxy_upstream_name \"internal\";\n\n                keepalive_timeout 0;\n                gzip off;\n\n                access_log off;\n\n                location /configuration {\n                        # this should be equals to configuration_data dict\n                        client_max_body_size                    10m;\n                        client_body_buffer_size                 10m;\n                        proxy_buffering                         off;\n\n                        content_by_lua_block {\n                                configuration.call()\n                        }\n                }\n```\n#### 3. Ingresspod/configuration/backends, configureBackends()\n```go\n####https://github.com/kubernetes/ingress-nginx/blob/ce3e3d51c397ff6a0cd6731cc64360ecdb69ea54/internal/ingress/controller/nginx.go#L982\nfunc configureBackends(rawBackends []*ingress.Backend) error {\n\tbackends := make([]*ingress.Backend, len(rawBackends))\n\n\tfor i, backend := range rawBackends {\n\t\tvar service *apiv1.Service\n\t\tif backend.Service != nil {\n\t\t\tservice = &apiv1.Service{Spec: backend.Service.Spec}\n\t\t}\n\t\tluaBackend := &ingress.Backend{\n\t\t\tName:                 backend.Name,\n\t\t\tPort:                 backend.Port,\n\t\t\tSSLPassthrough:       backend.SSLPassthrough,\n\t\t\tSessionAffinity:      backend.SessionAffinity,\n\t\t\tUpstreamHashBy:       backend.UpstreamHashBy,\n\t\t\tLoadBalancing:        backend.LoadBalancing,\n\t\t\tService:              service,\n\t\t\tNoServer:             backend.NoServer,\n\t\t\tTrafficShapingPolicy: backend.TrafficShapingPolicy,\n\t\t\tAlternativeBackends:  backend.AlternativeBackends,\n\t\t}\n\n\t\tvar endpoints []ingress.Endpoint\n\t\tfor _, endpoint := range backend.Endpoints {\n\t\t\tendpoints = append(endpoints, ingress.Endpoint{\n\t\t\t\tAddress: endpoint.Address,\n\t\t\t\tPort:    endpoint.Port,\n\t\t\t})\n\t\t}\n\n\t\tluaBackend.Endpoints = endpoints\n\t\tbackends[i] = luaBackend\n\t}\n\n\tstatusCode, _, err := nginx.NewPostStatusRequest(\"/configuration/backends\", \"application/json\", backends) ####backends request.body,IP/PORTbackendstruct\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tif statusCode != http.StatusCreated {\n\t\treturn fmt.Errorf(\"unexpected error code: %d\", statusCode)\n\t}\n\n\treturn nil\n}\n\n####Backend struct\ntype Backend struct {\n\tName    string             `json:\"name\"`\n\tService *apiv1.Service     `json:\"service,omitempty\"`\n\tPort    intstr.IntOrString `json:\"port\"`\n\tSecureCACert resolver.AuthSSLCert `json:\"secureCACert\"`\n\tSSLPassthrough bool `json:\"sslPassthrough\"`\n\tEndpoints []Endpoint `json:\"endpoints,omitempty\"`\n\tSessionAffinity SessionAffinityConfig `json:\"sessionAffinityConfig\"`\n\tUpstreamHashBy UpstreamHashByConfig `json:\"upstreamHashByConfig,omitempty\"`\n\tLoadBalancing string `json:\"load-balance,omitempty\"`\n\tNoServer bool `json:\"noServer\"`\n\tTrafficShapingPolicy TrafficShapingPolicy `json:\"trafficShapingPolicy,omitempty\"`\n\tAlternativeBackends []string `json:\"alternativeBackends,omitempty\"`\n}\n```\n#### 4. ngx\\_balancer.set\\_current_peer()backend\n```lua\n####https://sourcegraph.com/github.com/kubernetes/ingress-nginx@dd0fe4b458cc5520f25eb8bba25bbe6f0c72ee98/-/blob/rootfs/etc/nginx/lua/balancer.lua?utm_source=share#L232:13\n\nfunction _M.balance()\n  local balancer = get_balancer()\n  if not balancer then\n    return\n  end\n\n  local peer = balancer:balance()\n  if not peer then\n    ngx.log(ngx.WARN, \"no peer was returned, balancer: \" .. balancer.name)\n    return\n  end\n\n  ngx_balancer.set_more_tries(1)\n\n  local ok, err = ngx_balancer.set_current_peer(peer) ####server\n  if not ok then\n    ngx.log(ngx.ERR, string.format(\"error while setting current upstream peer %s: %s\", peer, err))\n  end\nend\n\n\nlocal function get_balancer()\n  if ngx.ctx.balancer then\n    return ngx.ctx.balancer\n  end\n\n  local backend_name = ngx.var.proxy_upstream_name ###requestproxy_upstream_name\n\n  local balancer = balancers[backend_name] ###balancerssync_backend()\n  if not balancer then\n    return\n  end\n\n  if route_to_alternative_balancer(balancer) then\n    local alternative_backend_name = balancer.alternative_backends[1]\n    ngx.var.proxy_alternative_upstream_name = alternative_backend_name\n\n    balancer = balancers[alternative_backend_name]\n  end\n\n  ngx.ctx.balancer = balancer\n\n  return balancer\nend\n```\n```\n###nginx.conf\nset $proxy_upstream_name    \"dev-dev-auto-deploy-5000\";\nset $proxy_host             $proxy_upstream_name;\n\nproxy_pass http://upstream_balancer;\n```","slug":"k8s-ingress-nginx","updated":"2019-10-21T06:57:42.989Z","photos":[],"link":"","_id":"ck42dyijn00jtu9ur9ciwf7nc","content":"<p></p>\n<h4 id=\"1-balancer-init-worker-balancer-balance-\"><a href=\"#1-balancer-init-worker-balancer-balance-\" class=\"headerlink\" title=\"1. balancer.init_worker()balancer.balance()\"></a>1. balancer.init_worker()balancer.balance()</h4><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http &#123;</span><br><span class=\"line\">        lua_package_path <span class=\"string\">\"/etc/nginx/lua/?.lua;/etc/nginx/lua/vendor/?.lua;/usr/local/lib/lua/?.lua;;\"</span>;</span><br><span class=\"line\">        init_by_lua_block &#123;</span><br><span class=\"line\">                ok, res = <span class=\"built_in\">pcall</span>(<span class=\"built_in\">require</span>, <span class=\"string\">\"configuration\"</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        init_worker_by_lua_block &#123;</span><br><span class=\"line\">                balancer.init_worker()  ##### ngx.timer.every(BACKENDS_SYNC_INTERVAL, sync_backends)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">     </span><br><span class=\"line\">###upstream configure</span><br><span class=\"line\">upstream upstream_balancer &#123;</span><br><span class=\"line\">\t\tserver <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>; # placeholder</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tbalancer_by_lua_block &#123;</span><br><span class=\"line\">\t\t\tbalancer.balance()</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tkeepalive <span class=\"number\">32</span>;</span><br><span class=\"line\">\t\tkeepalive_timeout  <span class=\"number\">60</span>s;</span><br><span class=\"line\">\t\tkeepalive_requests <span class=\"number\">100</span>;</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-backendbalancer-init-worker\"><a href=\"#2-backendbalancer-init-worker\" class=\"headerlink\" title=\"2. backendbalancer.init_worker()\"></a>2. backendbalancer.init_worker()</h4><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">####https://sourcegraph.com/github.com/kubernetes/ingress-nginx@dd0fe4b458cc5520f25eb8bba25bbe6f0c72ee98/-/blob/rootfs/etc/nginx/lua/balancer.lua?utm_source=share#L223</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span> configuration = <span class=\"built_in\">require</span>(<span class=\"string\">\"configuration\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_M.init_worker</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  sync_backends() <span class=\"comment\">-- when worker starts, sync backends without delay</span></span><br><span class=\"line\">  <span class=\"keyword\">local</span> _, err = ngx.timer.every(BACKENDS_SYNC_INTERVAL, sync_backends)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> err <span class=\"keyword\">then</span></span><br><span class=\"line\">    ngx.<span class=\"built_in\">log</span>(ngx.ERR, <span class=\"built_in\">string</span>.<span class=\"built_in\">format</span>(<span class=\"string\">\"error when setting up timer.every for sync_backends: %s\"</span>, <span class=\"built_in\">tostring</span>(err)))</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sync_backends</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  <span class=\"keyword\">local</span> backends_data = configuration.get_backends_data()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> new_backends, err = cjson.decode(backends_data)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> balancers_to_keep = &#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> _, new_backend <span class=\"keyword\">in</span> <span class=\"built_in\">ipairs</span>(new_backends) <span class=\"keyword\">do</span></span><br><span class=\"line\">    sync_backend(new_backend)</span><br><span class=\"line\">    balancers_to_keep[new_backend.name] = balancers[new_backend.name]</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">####https://sourcegraph.com/github.com/kubernetes/ingress-nginx@dd0fe4b458cc5520f25eb8bba25bbe6f0c72ee98/-/blob/rootfs/etc/nginx/lua/configuration.lua?utm_source=share#L10:<span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span> configuration_data = ngx.shared.configuration_data</span><br><span class=\"line\"><span class=\"keyword\">local</span> certificate_data = ngx.shared.certificate_data</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span> _M = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_M.get_backends_data</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> configuration_data:get(<span class=\"string\">\"backends\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_M.call</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> ngx.var.request_method ~= <span class=\"string\">\"POST\"</span> <span class=\"keyword\">and</span> ngx.var.request_method ~= <span class=\"string\">\"GET\"</span> <span class=\"keyword\">then</span></span><br><span class=\"line\">    ngx.<span class=\"built_in\">status</span> = ngx.HTTP_BAD_REQUEST</span><br><span class=\"line\">    ngx.<span class=\"built_in\">print</span>(<span class=\"string\">\"Only POST and GET requests are allowed!\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> ngx.var.request_uri == <span class=\"string\">\"/configuration/servers\"</span> <span class=\"keyword\">then</span></span><br><span class=\"line\">    handle_servers()</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> ngx.var.request_uri == <span class=\"string\">\"/configuration/general\"</span> <span class=\"keyword\">then</span></span><br><span class=\"line\">    handle_general()</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> ngx.var.uri == <span class=\"string\">\"/configuration/certs\"</span> <span class=\"keyword\">then</span></span><br><span class=\"line\">    handle_certs()</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> ngx.var.request_uri ~= <span class=\"string\">\"/configuration/backends\"</span> <span class=\"keyword\">then</span> ####<span class=\"number\">4</span>URL</span><br><span class=\"line\">    ngx.<span class=\"built_in\">status</span> = ngx.HTTP_NOT_FOUND</span><br><span class=\"line\">    ngx.<span class=\"built_in\">print</span>(<span class=\"string\">\"Not found!\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> backends = fetch_request_body()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> success, err = configuration_data:set(<span class=\"string\">\"backends\"</span>, backends)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">### fetch_request_body()POSTCall()</span><br><span class=\"line\"><span class=\"keyword\">local</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fetch_request_body</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  ngx.req.read_body() ###ngx.req.get_body_data()<span class=\"literal\">nil</span>,</span><br><span class=\"line\">  <span class=\"keyword\">local</span> body = ngx.req.get_body_data()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> body <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"keyword\">local</span> file_name = ngx.req.get_body_file() ###cache file</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">local</span> file = <span class=\"built_in\">io</span>.<span class=\"built_in\">open</span>(file_name, <span class=\"string\">\"rb\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> file <span class=\"keyword\">then</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">nil</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    body = file:<span class=\"built_in\">read</span>(<span class=\"string\">\"*all\"</span>)</span><br><span class=\"line\">    file:<span class=\"built_in\">close</span>()</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> body</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">####nginx.conf nginxcall()serverurl /configuration </span></span><br><span class=\"line\">       <span class=\"built_in\"> server </span>&#123;</span><br><span class=\"line\">                listen unix:/tmp/nginx-status-server.sock;</span><br><span class=\"line\">                <span class=\"builtin-name\">set</span> <span class=\"variable\">$proxy_upstream_name</span> <span class=\"string\">\"internal\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">                keepalive_timeout 0;</span><br><span class=\"line\">                gzip off;</span><br><span class=\"line\"></span><br><span class=\"line\">                access_log off;</span><br><span class=\"line\"></span><br><span class=\"line\">                location /configuration &#123;</span><br><span class=\"line\">                        # this should be equals <span class=\"keyword\">to</span> configuration_data dict</span><br><span class=\"line\">                        client_max_body_size                    10m;</span><br><span class=\"line\">                        client_body_buffer_size                 10m;</span><br><span class=\"line\">                        proxy_buffering                         off;</span><br><span class=\"line\"></span><br><span class=\"line\">                        content_by_lua_block &#123;</span><br><span class=\"line\">                                configuration.call()</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                &#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-Ingresspod-configuration-backends-configureBackends\"><a href=\"#3-Ingresspod-configuration-backends-configureBackends\" class=\"headerlink\" title=\"3. Ingresspod/configuration/backends, configureBackends()\"></a>3. Ingresspod/configuration/backends, configureBackends()</h4><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">####https:<span class=\"comment\">//github.com/kubernetes/ingress-nginx/blob/ce3e3d51c397ff6a0cd6731cc64360ecdb69ea54/internal/ingress/controller/nginx.go#L982</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">configureBackends</span><span class=\"params\">(rawBackends []*ingress.Backend)</span> <span class=\"title\">error</span></span> &#123;</span><br><span class=\"line\">\tbackends := <span class=\"built_in\">make</span>([]*ingress.Backend, <span class=\"built_in\">len</span>(rawBackends))</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> i, backend := <span class=\"keyword\">range</span> rawBackends &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> service *apiv1.Service</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> backend.Service != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tservice = &amp;apiv1.Service&#123;Spec: backend.Service.Spec&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tluaBackend := &amp;ingress.Backend&#123;</span><br><span class=\"line\">\t\t\tName:                 backend.Name,</span><br><span class=\"line\">\t\t\tPort:                 backend.Port,</span><br><span class=\"line\">\t\t\tSSLPassthrough:       backend.SSLPassthrough,</span><br><span class=\"line\">\t\t\tSessionAffinity:      backend.SessionAffinity,</span><br><span class=\"line\">\t\t\tUpstreamHashBy:       backend.UpstreamHashBy,</span><br><span class=\"line\">\t\t\tLoadBalancing:        backend.LoadBalancing,</span><br><span class=\"line\">\t\t\tService:              service,</span><br><span class=\"line\">\t\t\tNoServer:             backend.NoServer,</span><br><span class=\"line\">\t\t\tTrafficShapingPolicy: backend.TrafficShapingPolicy,</span><br><span class=\"line\">\t\t\tAlternativeBackends:  backend.AlternativeBackends,</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> endpoints []ingress.Endpoint</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> _, endpoint := <span class=\"keyword\">range</span> backend.Endpoints &#123;</span><br><span class=\"line\">\t\t\tendpoints = <span class=\"built_in\">append</span>(endpoints, ingress.Endpoint&#123;</span><br><span class=\"line\">\t\t\t\tAddress: endpoint.Address,</span><br><span class=\"line\">\t\t\t\tPort:    endpoint.Port,</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tluaBackend.Endpoints = endpoints</span><br><span class=\"line\">\t\tbackends[i] = luaBackend</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tstatusCode, _, err := nginx.NewPostStatusRequest(<span class=\"string\">\"/configuration/backends\"</span>, <span class=\"string\">\"application/json\"</span>, backends) ####backends request.body,IP/PORTbackend<span class=\"keyword\">struct</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> err</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> statusCode != http.StatusCreated &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> fmt.Errorf(<span class=\"string\">\"unexpected error code: %d\"</span>, statusCode)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">nil</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">####Backend <span class=\"keyword\">struct</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> Backend <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">\tName    <span class=\"keyword\">string</span>             <span class=\"string\">`json:\"name\"`</span></span><br><span class=\"line\">\tService *apiv1.Service     <span class=\"string\">`json:\"service,omitempty\"`</span></span><br><span class=\"line\">\tPort    intstr.IntOrString <span class=\"string\">`json:\"port\"`</span></span><br><span class=\"line\">\tSecureCACert resolver.AuthSSLCert <span class=\"string\">`json:\"secureCACert\"`</span></span><br><span class=\"line\">\tSSLPassthrough <span class=\"keyword\">bool</span> <span class=\"string\">`json:\"sslPassthrough\"`</span></span><br><span class=\"line\">\tEndpoints []Endpoint <span class=\"string\">`json:\"endpoints,omitempty\"`</span></span><br><span class=\"line\">\tSessionAffinity SessionAffinityConfig <span class=\"string\">`json:\"sessionAffinityConfig\"`</span></span><br><span class=\"line\">\tUpstreamHashBy UpstreamHashByConfig <span class=\"string\">`json:\"upstreamHashByConfig,omitempty\"`</span></span><br><span class=\"line\">\tLoadBalancing <span class=\"keyword\">string</span> <span class=\"string\">`json:\"load-balance,omitempty\"`</span></span><br><span class=\"line\">\tNoServer <span class=\"keyword\">bool</span> <span class=\"string\">`json:\"noServer\"`</span></span><br><span class=\"line\">\tTrafficShapingPolicy TrafficShapingPolicy <span class=\"string\">`json:\"trafficShapingPolicy,omitempty\"`</span></span><br><span class=\"line\">\tAlternativeBackends []<span class=\"keyword\">string</span> <span class=\"string\">`json:\"alternativeBackends,omitempty\"`</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4-ngx-balancer-set-current-peer-backend\"><a href=\"#4-ngx-balancer-set-current-peer-backend\" class=\"headerlink\" title=\"4. ngx_balancer.set_current_peer()backend\"></a>4. ngx_balancer.set_current_peer()backend</h4><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">####https://sourcegraph.com/github.com/kubernetes/ingress-nginx@dd0fe4b458cc5520f25eb8bba25bbe6f0c72ee98/-/blob/rootfs/etc/nginx/lua/balancer.lua?utm_source=share#L232:<span class=\"number\">13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_M.balance</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  <span class=\"keyword\">local</span> balancer = get_balancer()</span><br><span class=\"line\">  <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> balancer <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> peer = balancer:balance()</span><br><span class=\"line\">  <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> peer <span class=\"keyword\">then</span></span><br><span class=\"line\">    ngx.<span class=\"built_in\">log</span>(ngx.WARN, <span class=\"string\">\"no peer was returned, balancer: \"</span> .. balancer.name)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  ngx_balancer.set_more_tries(<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> ok, err = ngx_balancer.set_current_peer(peer) ####server</span><br><span class=\"line\">  <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> ok <span class=\"keyword\">then</span></span><br><span class=\"line\">    ngx.<span class=\"built_in\">log</span>(ngx.ERR, <span class=\"built_in\">string</span>.<span class=\"built_in\">format</span>(<span class=\"string\">\"error while setting current upstream peer %s: %s\"</span>, peer, err))</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">get_balancer</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> ngx.ctx.balancer <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ngx.ctx.balancer</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> backend_name = ngx.var.proxy_upstream_name ###requestproxy_upstream_name</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> balancer = balancers[backend_name] ###balancerssync_backend()</span><br><span class=\"line\">  <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> balancer <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> route_to_alternative_balancer(balancer) <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"keyword\">local</span> alternative_backend_name = balancer.alternative_backends[<span class=\"number\">1</span>]</span><br><span class=\"line\">    ngx.var.proxy_alternative_upstream_name = alternative_backend_name</span><br><span class=\"line\"></span><br><span class=\"line\">    balancer = balancers[alternative_backend_name]</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  ngx.ctx.balancer = balancer</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> balancer</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">###nginx.conf</span></span><br><span class=\"line\"><span class=\"attribute\">set</span> <span class=\"variable\">$proxy_upstream_name</span>    <span class=\"string\">\"dev-dev-auto-deploy-5000\"</span>;</span><br><span class=\"line\"><span class=\"attribute\">set</span> <span class=\"variable\">$proxy_host</span>             <span class=\"variable\">$proxy_upstream_name</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attribute\">proxy_pass</span> http://upstream_balancer;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p></p>\n<h4 id=\"1-balancer-init-worker-balancer-balance-\"><a href=\"#1-balancer-init-worker-balancer-balance-\" class=\"headerlink\" title=\"1. balancer.init_worker()balancer.balance()\"></a>1. balancer.init_worker()balancer.balance()</h4><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http &#123;</span><br><span class=\"line\">        lua_package_path <span class=\"string\">\"/etc/nginx/lua/?.lua;/etc/nginx/lua/vendor/?.lua;/usr/local/lib/lua/?.lua;;\"</span>;</span><br><span class=\"line\">        init_by_lua_block &#123;</span><br><span class=\"line\">                ok, res = <span class=\"built_in\">pcall</span>(<span class=\"built_in\">require</span>, <span class=\"string\">\"configuration\"</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        init_worker_by_lua_block &#123;</span><br><span class=\"line\">                balancer.init_worker()  ##### ngx.timer.every(BACKENDS_SYNC_INTERVAL, sync_backends)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">     </span><br><span class=\"line\">###upstream configure</span><br><span class=\"line\">upstream upstream_balancer &#123;</span><br><span class=\"line\">\t\tserver <span class=\"number\">0.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>; # placeholder</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tbalancer_by_lua_block &#123;</span><br><span class=\"line\">\t\t\tbalancer.balance()</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tkeepalive <span class=\"number\">32</span>;</span><br><span class=\"line\">\t\tkeepalive_timeout  <span class=\"number\">60</span>s;</span><br><span class=\"line\">\t\tkeepalive_requests <span class=\"number\">100</span>;</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-backendbalancer-init-worker\"><a href=\"#2-backendbalancer-init-worker\" class=\"headerlink\" title=\"2. backendbalancer.init_worker()\"></a>2. backendbalancer.init_worker()</h4><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">####https://sourcegraph.com/github.com/kubernetes/ingress-nginx@dd0fe4b458cc5520f25eb8bba25bbe6f0c72ee98/-/blob/rootfs/etc/nginx/lua/balancer.lua?utm_source=share#L223</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span> configuration = <span class=\"built_in\">require</span>(<span class=\"string\">\"configuration\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_M.init_worker</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  sync_backends() <span class=\"comment\">-- when worker starts, sync backends without delay</span></span><br><span class=\"line\">  <span class=\"keyword\">local</span> _, err = ngx.timer.every(BACKENDS_SYNC_INTERVAL, sync_backends)</span><br><span class=\"line\">  <span class=\"keyword\">if</span> err <span class=\"keyword\">then</span></span><br><span class=\"line\">    ngx.<span class=\"built_in\">log</span>(ngx.ERR, <span class=\"built_in\">string</span>.<span class=\"built_in\">format</span>(<span class=\"string\">\"error when setting up timer.every for sync_backends: %s\"</span>, <span class=\"built_in\">tostring</span>(err)))</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sync_backends</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  <span class=\"keyword\">local</span> backends_data = configuration.get_backends_data()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> new_backends, err = cjson.decode(backends_data)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> balancers_to_keep = &#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> _, new_backend <span class=\"keyword\">in</span> <span class=\"built_in\">ipairs</span>(new_backends) <span class=\"keyword\">do</span></span><br><span class=\"line\">    sync_backend(new_backend)</span><br><span class=\"line\">    balancers_to_keep[new_backend.name] = balancers[new_backend.name]</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">####https://sourcegraph.com/github.com/kubernetes/ingress-nginx@dd0fe4b458cc5520f25eb8bba25bbe6f0c72ee98/-/blob/rootfs/etc/nginx/lua/configuration.lua?utm_source=share#L10:<span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span> configuration_data = ngx.shared.configuration_data</span><br><span class=\"line\"><span class=\"keyword\">local</span> certificate_data = ngx.shared.certificate_data</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span> _M = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_M.get_backends_data</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> configuration_data:get(<span class=\"string\">\"backends\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_M.call</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> ngx.var.request_method ~= <span class=\"string\">\"POST\"</span> <span class=\"keyword\">and</span> ngx.var.request_method ~= <span class=\"string\">\"GET\"</span> <span class=\"keyword\">then</span></span><br><span class=\"line\">    ngx.<span class=\"built_in\">status</span> = ngx.HTTP_BAD_REQUEST</span><br><span class=\"line\">    ngx.<span class=\"built_in\">print</span>(<span class=\"string\">\"Only POST and GET requests are allowed!\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> ngx.var.request_uri == <span class=\"string\">\"/configuration/servers\"</span> <span class=\"keyword\">then</span></span><br><span class=\"line\">    handle_servers()</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> ngx.var.request_uri == <span class=\"string\">\"/configuration/general\"</span> <span class=\"keyword\">then</span></span><br><span class=\"line\">    handle_general()</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> ngx.var.uri == <span class=\"string\">\"/configuration/certs\"</span> <span class=\"keyword\">then</span></span><br><span class=\"line\">    handle_certs()</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> ngx.var.request_uri ~= <span class=\"string\">\"/configuration/backends\"</span> <span class=\"keyword\">then</span> ####<span class=\"number\">4</span>URL</span><br><span class=\"line\">    ngx.<span class=\"built_in\">status</span> = ngx.HTTP_NOT_FOUND</span><br><span class=\"line\">    ngx.<span class=\"built_in\">print</span>(<span class=\"string\">\"Not found!\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> backends = fetch_request_body()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> success, err = configuration_data:set(<span class=\"string\">\"backends\"</span>, backends)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">### fetch_request_body()POSTCall()</span><br><span class=\"line\"><span class=\"keyword\">local</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fetch_request_body</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  ngx.req.read_body() ###ngx.req.get_body_data()<span class=\"literal\">nil</span>,</span><br><span class=\"line\">  <span class=\"keyword\">local</span> body = ngx.req.get_body_data()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> body <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"keyword\">local</span> file_name = ngx.req.get_body_file() ###cache file</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">local</span> file = <span class=\"built_in\">io</span>.<span class=\"built_in\">open</span>(file_name, <span class=\"string\">\"rb\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> file <span class=\"keyword\">then</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">nil</span></span><br><span class=\"line\">    <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">    body = file:<span class=\"built_in\">read</span>(<span class=\"string\">\"*all\"</span>)</span><br><span class=\"line\">    file:<span class=\"built_in\">close</span>()</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> body</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">####nginx.conf nginxcall()serverurl /configuration </span></span><br><span class=\"line\">       <span class=\"built_in\"> server </span>&#123;</span><br><span class=\"line\">                listen unix:/tmp/nginx-status-server.sock;</span><br><span class=\"line\">                <span class=\"builtin-name\">set</span> <span class=\"variable\">$proxy_upstream_name</span> <span class=\"string\">\"internal\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">                keepalive_timeout 0;</span><br><span class=\"line\">                gzip off;</span><br><span class=\"line\"></span><br><span class=\"line\">                access_log off;</span><br><span class=\"line\"></span><br><span class=\"line\">                location /configuration &#123;</span><br><span class=\"line\">                        # this should be equals <span class=\"keyword\">to</span> configuration_data dict</span><br><span class=\"line\">                        client_max_body_size                    10m;</span><br><span class=\"line\">                        client_body_buffer_size                 10m;</span><br><span class=\"line\">                        proxy_buffering                         off;</span><br><span class=\"line\"></span><br><span class=\"line\">                        content_by_lua_block &#123;</span><br><span class=\"line\">                                configuration.call()</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                &#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-Ingresspod-configuration-backends-configureBackends\"><a href=\"#3-Ingresspod-configuration-backends-configureBackends\" class=\"headerlink\" title=\"3. Ingresspod/configuration/backends, configureBackends()\"></a>3. Ingresspod/configuration/backends, configureBackends()</h4><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">####https:<span class=\"comment\">//github.com/kubernetes/ingress-nginx/blob/ce3e3d51c397ff6a0cd6731cc64360ecdb69ea54/internal/ingress/controller/nginx.go#L982</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">configureBackends</span><span class=\"params\">(rawBackends []*ingress.Backend)</span> <span class=\"title\">error</span></span> &#123;</span><br><span class=\"line\">\tbackends := <span class=\"built_in\">make</span>([]*ingress.Backend, <span class=\"built_in\">len</span>(rawBackends))</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> i, backend := <span class=\"keyword\">range</span> rawBackends &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> service *apiv1.Service</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> backend.Service != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tservice = &amp;apiv1.Service&#123;Spec: backend.Service.Spec&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tluaBackend := &amp;ingress.Backend&#123;</span><br><span class=\"line\">\t\t\tName:                 backend.Name,</span><br><span class=\"line\">\t\t\tPort:                 backend.Port,</span><br><span class=\"line\">\t\t\tSSLPassthrough:       backend.SSLPassthrough,</span><br><span class=\"line\">\t\t\tSessionAffinity:      backend.SessionAffinity,</span><br><span class=\"line\">\t\t\tUpstreamHashBy:       backend.UpstreamHashBy,</span><br><span class=\"line\">\t\t\tLoadBalancing:        backend.LoadBalancing,</span><br><span class=\"line\">\t\t\tService:              service,</span><br><span class=\"line\">\t\t\tNoServer:             backend.NoServer,</span><br><span class=\"line\">\t\t\tTrafficShapingPolicy: backend.TrafficShapingPolicy,</span><br><span class=\"line\">\t\t\tAlternativeBackends:  backend.AlternativeBackends,</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">var</span> endpoints []ingress.Endpoint</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> _, endpoint := <span class=\"keyword\">range</span> backend.Endpoints &#123;</span><br><span class=\"line\">\t\t\tendpoints = <span class=\"built_in\">append</span>(endpoints, ingress.Endpoint&#123;</span><br><span class=\"line\">\t\t\t\tAddress: endpoint.Address,</span><br><span class=\"line\">\t\t\t\tPort:    endpoint.Port,</span><br><span class=\"line\">\t\t\t&#125;)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tluaBackend.Endpoints = endpoints</span><br><span class=\"line\">\t\tbackends[i] = luaBackend</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tstatusCode, _, err := nginx.NewPostStatusRequest(<span class=\"string\">\"/configuration/backends\"</span>, <span class=\"string\">\"application/json\"</span>, backends) ####backends request.body,IP/PORTbackend<span class=\"keyword\">struct</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> err</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> statusCode != http.StatusCreated &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> fmt.Errorf(<span class=\"string\">\"unexpected error code: %d\"</span>, statusCode)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">nil</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">####Backend <span class=\"keyword\">struct</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> Backend <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">\tName    <span class=\"keyword\">string</span>             <span class=\"string\">`json:\"name\"`</span></span><br><span class=\"line\">\tService *apiv1.Service     <span class=\"string\">`json:\"service,omitempty\"`</span></span><br><span class=\"line\">\tPort    intstr.IntOrString <span class=\"string\">`json:\"port\"`</span></span><br><span class=\"line\">\tSecureCACert resolver.AuthSSLCert <span class=\"string\">`json:\"secureCACert\"`</span></span><br><span class=\"line\">\tSSLPassthrough <span class=\"keyword\">bool</span> <span class=\"string\">`json:\"sslPassthrough\"`</span></span><br><span class=\"line\">\tEndpoints []Endpoint <span class=\"string\">`json:\"endpoints,omitempty\"`</span></span><br><span class=\"line\">\tSessionAffinity SessionAffinityConfig <span class=\"string\">`json:\"sessionAffinityConfig\"`</span></span><br><span class=\"line\">\tUpstreamHashBy UpstreamHashByConfig <span class=\"string\">`json:\"upstreamHashByConfig,omitempty\"`</span></span><br><span class=\"line\">\tLoadBalancing <span class=\"keyword\">string</span> <span class=\"string\">`json:\"load-balance,omitempty\"`</span></span><br><span class=\"line\">\tNoServer <span class=\"keyword\">bool</span> <span class=\"string\">`json:\"noServer\"`</span></span><br><span class=\"line\">\tTrafficShapingPolicy TrafficShapingPolicy <span class=\"string\">`json:\"trafficShapingPolicy,omitempty\"`</span></span><br><span class=\"line\">\tAlternativeBackends []<span class=\"keyword\">string</span> <span class=\"string\">`json:\"alternativeBackends,omitempty\"`</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4-ngx-balancer-set-current-peer-backend\"><a href=\"#4-ngx-balancer-set-current-peer-backend\" class=\"headerlink\" title=\"4. ngx_balancer.set_current_peer()backend\"></a>4. ngx_balancer.set_current_peer()backend</h4><figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">####https://sourcegraph.com/github.com/kubernetes/ingress-nginx@dd0fe4b458cc5520f25eb8bba25bbe6f0c72ee98/-/blob/rootfs/etc/nginx/lua/balancer.lua?utm_source=share#L232:<span class=\"number\">13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_M.balance</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  <span class=\"keyword\">local</span> balancer = get_balancer()</span><br><span class=\"line\">  <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> balancer <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> peer = balancer:balance()</span><br><span class=\"line\">  <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> peer <span class=\"keyword\">then</span></span><br><span class=\"line\">    ngx.<span class=\"built_in\">log</span>(ngx.WARN, <span class=\"string\">\"no peer was returned, balancer: \"</span> .. balancer.name)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  ngx_balancer.set_more_tries(<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> ok, err = ngx_balancer.set_current_peer(peer) ####server</span><br><span class=\"line\">  <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> ok <span class=\"keyword\">then</span></span><br><span class=\"line\">    ngx.<span class=\"built_in\">log</span>(ngx.ERR, <span class=\"built_in\">string</span>.<span class=\"built_in\">format</span>(<span class=\"string\">\"error while setting current upstream peer %s: %s\"</span>, peer, err))</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">get_balancer</span><span class=\"params\">()</span></span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> ngx.ctx.balancer <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> ngx.ctx.balancer</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> backend_name = ngx.var.proxy_upstream_name ###requestproxy_upstream_name</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">local</span> balancer = balancers[backend_name] ###balancerssync_backend()</span><br><span class=\"line\">  <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> balancer <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> route_to_alternative_balancer(balancer) <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"keyword\">local</span> alternative_backend_name = balancer.alternative_backends[<span class=\"number\">1</span>]</span><br><span class=\"line\">    ngx.var.proxy_alternative_upstream_name = alternative_backend_name</span><br><span class=\"line\"></span><br><span class=\"line\">    balancer = balancers[alternative_backend_name]</span><br><span class=\"line\">  <span class=\"keyword\">end</span></span><br><span class=\"line\"></span><br><span class=\"line\">  ngx.ctx.balancer = balancer</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> balancer</span><br><span class=\"line\"><span class=\"keyword\">end</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">###nginx.conf</span></span><br><span class=\"line\"><span class=\"attribute\">set</span> <span class=\"variable\">$proxy_upstream_name</span>    <span class=\"string\">\"dev-dev-auto-deploy-5000\"</span>;</span><br><span class=\"line\"><span class=\"attribute\">set</span> <span class=\"variable\">$proxy_host</span>             <span class=\"variable\">$proxy_upstream_name</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attribute\">proxy_pass</span> http://upstream_balancer;</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"linux","published":1,"author":"xiemx","comments":1,"date":"2015-11-28T20:11:32.000Z","_content":"linuxlinuxquotaquotaquotaquota\n```shell\n### grep CONFIG_QUOTA /boot/config-`uname -r` \n\n[root@localhost mnt]# grep CONFIG_QUOTA /boot/config-2.6.32-431.el6.x86_64\nCONFIG_QUOTA=y\nCONFIG_QUOTA_NETLINK_INTERFACE=y\n# CONFIG_QUOTA_DEBUG is not set\nCONFIG_QUOTA_TREE=y\nCONFIG_QUOTACTL=y\n```\nquotablockinodequota\n`mount -o  remount,usrquota,grpquota,default    /mnt` \nmntdf `/etc/fstab``umount` `mount -a` \n```shell\n[root@localhost mnt]# mount\n/dev/mapper/VolGroup-lv_root on / type ext4 (rw)\nproc on /proc type proc (rw)\nsysfs on /sys type sysfs (rw)\ndevpts on /dev/pts type devpts (rw,gid=5,mode=620)\ntmpfs on /dev/shm type tmpfs (rw,rootcontext=\"system_u:object_r:tmpfs_t:s0\")\n/dev/sda1 on /boot type ext4 (rw)\nnone on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)\n/dev/mapper/vgxiemx-lv1 on /mnt type ext3 (rw)\n\n[root@localhost mnt]# mount -o remount,grpquota,usrquota,defaults /mnt\n\n[root@localhost mnt]# mount\n/dev/mapper/VolGroup-lv_root on / type ext4 (rw)\nproc on /proc type proc (rw)\nsysfs on /sys type sysfs (rw)\ndevpts on /dev/pts type devpts (rw,gid=5,mode=620)\ntmpfs on /dev/shm type tmpfs (rw,rootcontext=\"system_u:object_r:tmpfs_t:s0\")\n/dev/sda1 on /boot type ext4 (rw)\nnone on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)\n/dev/mapper/vgxiemx-lv1 on /mnt type ext3 (rw,usrquota,grpquota)\n[root@localhost mnt]#\n```\n**/mntquota/mnt**\n\n\n1. quotaquotaquota.userquota.groupdatafile\n```shell\n[root@localhost mnt]# quotacheck -avug\nquotacheck: Your kernel probably supports journaled quota but you are not using it. Consider switching to journaled quota to avoid running quotacheck after an unclean shutdown.\nquotacheck: Scanning /dev/mapper/vgxiemx-lv1 [/mnt] done\nquotacheck: Checked 3 directories and 6 files\n[root@localhost mnt]# ls\naquota.group  aquota.user  lost+found\n```\n2. quota\nquotaon -av a`quotaoff`\n```shell\n[root@localhost /]# quotaon -av\n/dev/mapper/vgxiemx-lv1 [/mnt]: group quotas turned on\n/dev/mapper/vgxiemx-lv1 [/mnt]: user quotas turned on\n```\n3. quota\nedquota  -u testuservi\n```shell\nDisk quotas for user testuser (uid 500):\nFilesystem                                    blocks       soft       hard     inodes     soft     hard\n/dev/mapper/vgxiemx-lv1                        0             10        100       0          10       100\n\nfilesystem\nblockblock\ninodeinode\nsoftsoft07\nhardblock/inode0\n```\n\n```shell\n[testuser@localhost mnt]$ dd if=/dev/zero of=/mnt/bigfile bs=1M count=20 20Msoft block\ndm-2: warning, user block quota exceeded.\n1+0 records in\n0+0 records out\n98304 bytes (98 kB) copied, 0.00147599 s, 66.6 MB/s\n\n[testuser@localhost mnt]$ du bigfile 20M\n20 bigfile\n\n[testuser@localhost mnt]$ dd if=/dev/zero of=/mnt/bigfile bs=1M count=110110Mhard block10M\ndm-2: warning, user block quota exceeded.\ndm-2: write failed, user block limit reached.\ndd: writing `/mnt/bigfile': Disk quota exceeded\n1+0 records in\n0+0 records out\n98304 bytes (98 kB) copied, 0.000795784 s, 124 MB/s\n\n[testuser@localhost mnt]$ du bigfile100M\n100 bigfile\n\n[testuser@localhost mnt]$ ll\ntotal 132\n-rw-------. 1 root root 7168 Nov 22 04:01 aquota.group\n-rw-------. 1 root root 7168 Nov 22 03:58 aquota.user\n-rw-rw-r--. 1 testuser testuser 98304 Nov 22 04:02 bigfile\ndrwxrwxrwx. 2 root root 16384 Nov 22 02:31 lost+found\n\n[testuser@localhost mnt]$ touch file{1..10}101bigfile11soft inode\ndm-2: warning, user file quota exceeded.\n\n[testuser@localhost mnt]$ ls\naquota.group bigfile file10 file3 file5 file7 file9\naquota.user file1 file2 file4 file6 file8 lost+found\n\n[testuser@localhost mnt]$ touch test{1..100}1001111\ndm-2: write failed, user file limit reached.\ntouch: cannot touch `test90': Disk quota exceeded\ntouch: cannot touch `test91': Disk quota exceeded\ntouch: cannot touch `test92': Disk quota exceeded\ntouch: cannot touch `test93': Disk quota exceeded\ntouch: cannot touch `test94': Disk quota exceeded\ntouch: cannot touch `test95': Disk quota exceeded\ntouch: cannot touch `test96': Disk quota exceeded\ntouch: cannot touch `test97': Disk quota exceeded\ntouch: cannot touch `test98': Disk quota exceeded\ntouch: cannot touch `test99': Disk quota exceeded\ntouch: cannot touch `test100': Disk quota exceeded\n\n[testuser@localhost mnt]$ ls\naquota.group file7 test15 test24 test33 test42 test51 test60 test7 test79 test88\naquota.user file8 test16 test25 test34 test43 test52 test61 test70 test8 test89\nbigfile file9 test17 test26 test35 test44 test53 test62 test71 test80 test9\nfile1 lost+found test18 test27 test36 test45 test54 test63 test72 test81\nfile10 test1 test19 test28 test37 test46 test55 test64 test73 test82\nfile2 test10 test2 test29 test38 test47 test56 test65 test74 test83\nfile3 test11 test20 test3 test39 test48 test57 test66 test75 test84\nfile4 test12 test21 test30 test4 test49 test58 test67 test76 test85\nfile5 test13 test22 test31 test40 test5 test59 test68 test77 test86\nfile6 test14 test23 test32 test41 test50 test6 test69 test78 test87\n```\n\n4.\n```\nedquota -t  7\nGrace period before enforcing soft limits for users:\nTime units may be: days, hours, minutes, or seconds\nFilesystem                                   Block grace period                        Inode grace period\n/dev/mapper/vgxiemx-lv1                      7days                                     7days\n```\n5.quotaquota\n```\nrepquota -a\n\n[root@localhost mnt]# repquota -a\n*** Report for user quotas on device /dev/mapper/vgxiemx-lv1\nBlock grace time: 7days; Inode grace time: 7days\nBlock limits File limits\nUser                      used      soft      hard    grace    used      soft      hard       grace\n-------------------------------------------------------------------------------------------\nroot           --        956592     0         0                 6          0        0\ntestuser       ++        100        10        100      6days    100        10       100       6days\n```\n*quota/etc/rc.d/rc.localquotacheckquotaon quotaquote/etc/fstab*\n\n\n```\n/etc/fstab\n# Created by anaconda on Sun May 24 08:16:25 2015\n#\n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\n#\n/dev/mapper/VolGroup-lv_root / ext4 defaults 1 1\nUUID=3fe6311e-b3fe-4f7f-8558-4f011eab1dde /boot ext4 defaults 1 2\n/dev/mapper/VolGroup-lv_swap swap swap defaults 0 0\ntmpfs /dev/shm tmpfs defaults 0 0\ndevpts /dev/pts devpts gid=5,mode=620 0 0\nsysfs /sys sysfs defaults 0 0\nproc /proc proc defaults 0 0\n/dev/mapper/vgxiemx-lv1 /mnt ext3 defaults,usrquota,grpquota 0 0\n```","source":"_posts/linux-disk-quota.md","raw":"---\nlayout: post\ntitle: linux\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-11-29 04:11:32\ntags: [ linux, command ]\ncategories:\n    - linux\n---\nlinuxlinuxquotaquotaquotaquota\n```shell\n### grep CONFIG_QUOTA /boot/config-`uname -r` \n\n[root@localhost mnt]# grep CONFIG_QUOTA /boot/config-2.6.32-431.el6.x86_64\nCONFIG_QUOTA=y\nCONFIG_QUOTA_NETLINK_INTERFACE=y\n# CONFIG_QUOTA_DEBUG is not set\nCONFIG_QUOTA_TREE=y\nCONFIG_QUOTACTL=y\n```\nquotablockinodequota\n`mount -o  remount,usrquota,grpquota,default    /mnt` \nmntdf `/etc/fstab``umount` `mount -a` \n```shell\n[root@localhost mnt]# mount\n/dev/mapper/VolGroup-lv_root on / type ext4 (rw)\nproc on /proc type proc (rw)\nsysfs on /sys type sysfs (rw)\ndevpts on /dev/pts type devpts (rw,gid=5,mode=620)\ntmpfs on /dev/shm type tmpfs (rw,rootcontext=\"system_u:object_r:tmpfs_t:s0\")\n/dev/sda1 on /boot type ext4 (rw)\nnone on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)\n/dev/mapper/vgxiemx-lv1 on /mnt type ext3 (rw)\n\n[root@localhost mnt]# mount -o remount,grpquota,usrquota,defaults /mnt\n\n[root@localhost mnt]# mount\n/dev/mapper/VolGroup-lv_root on / type ext4 (rw)\nproc on /proc type proc (rw)\nsysfs on /sys type sysfs (rw)\ndevpts on /dev/pts type devpts (rw,gid=5,mode=620)\ntmpfs on /dev/shm type tmpfs (rw,rootcontext=\"system_u:object_r:tmpfs_t:s0\")\n/dev/sda1 on /boot type ext4 (rw)\nnone on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)\n/dev/mapper/vgxiemx-lv1 on /mnt type ext3 (rw,usrquota,grpquota)\n[root@localhost mnt]#\n```\n**/mntquota/mnt**\n\n\n1. quotaquotaquota.userquota.groupdatafile\n```shell\n[root@localhost mnt]# quotacheck -avug\nquotacheck: Your kernel probably supports journaled quota but you are not using it. Consider switching to journaled quota to avoid running quotacheck after an unclean shutdown.\nquotacheck: Scanning /dev/mapper/vgxiemx-lv1 [/mnt] done\nquotacheck: Checked 3 directories and 6 files\n[root@localhost mnt]# ls\naquota.group  aquota.user  lost+found\n```\n2. quota\nquotaon -av a`quotaoff`\n```shell\n[root@localhost /]# quotaon -av\n/dev/mapper/vgxiemx-lv1 [/mnt]: group quotas turned on\n/dev/mapper/vgxiemx-lv1 [/mnt]: user quotas turned on\n```\n3. quota\nedquota  -u testuservi\n```shell\nDisk quotas for user testuser (uid 500):\nFilesystem                                    blocks       soft       hard     inodes     soft     hard\n/dev/mapper/vgxiemx-lv1                        0             10        100       0          10       100\n\nfilesystem\nblockblock\ninodeinode\nsoftsoft07\nhardblock/inode0\n```\n\n```shell\n[testuser@localhost mnt]$ dd if=/dev/zero of=/mnt/bigfile bs=1M count=20 20Msoft block\ndm-2: warning, user block quota exceeded.\n1+0 records in\n0+0 records out\n98304 bytes (98 kB) copied, 0.00147599 s, 66.6 MB/s\n\n[testuser@localhost mnt]$ du bigfile 20M\n20 bigfile\n\n[testuser@localhost mnt]$ dd if=/dev/zero of=/mnt/bigfile bs=1M count=110110Mhard block10M\ndm-2: warning, user block quota exceeded.\ndm-2: write failed, user block limit reached.\ndd: writing `/mnt/bigfile': Disk quota exceeded\n1+0 records in\n0+0 records out\n98304 bytes (98 kB) copied, 0.000795784 s, 124 MB/s\n\n[testuser@localhost mnt]$ du bigfile100M\n100 bigfile\n\n[testuser@localhost mnt]$ ll\ntotal 132\n-rw-------. 1 root root 7168 Nov 22 04:01 aquota.group\n-rw-------. 1 root root 7168 Nov 22 03:58 aquota.user\n-rw-rw-r--. 1 testuser testuser 98304 Nov 22 04:02 bigfile\ndrwxrwxrwx. 2 root root 16384 Nov 22 02:31 lost+found\n\n[testuser@localhost mnt]$ touch file{1..10}101bigfile11soft inode\ndm-2: warning, user file quota exceeded.\n\n[testuser@localhost mnt]$ ls\naquota.group bigfile file10 file3 file5 file7 file9\naquota.user file1 file2 file4 file6 file8 lost+found\n\n[testuser@localhost mnt]$ touch test{1..100}1001111\ndm-2: write failed, user file limit reached.\ntouch: cannot touch `test90': Disk quota exceeded\ntouch: cannot touch `test91': Disk quota exceeded\ntouch: cannot touch `test92': Disk quota exceeded\ntouch: cannot touch `test93': Disk quota exceeded\ntouch: cannot touch `test94': Disk quota exceeded\ntouch: cannot touch `test95': Disk quota exceeded\ntouch: cannot touch `test96': Disk quota exceeded\ntouch: cannot touch `test97': Disk quota exceeded\ntouch: cannot touch `test98': Disk quota exceeded\ntouch: cannot touch `test99': Disk quota exceeded\ntouch: cannot touch `test100': Disk quota exceeded\n\n[testuser@localhost mnt]$ ls\naquota.group file7 test15 test24 test33 test42 test51 test60 test7 test79 test88\naquota.user file8 test16 test25 test34 test43 test52 test61 test70 test8 test89\nbigfile file9 test17 test26 test35 test44 test53 test62 test71 test80 test9\nfile1 lost+found test18 test27 test36 test45 test54 test63 test72 test81\nfile10 test1 test19 test28 test37 test46 test55 test64 test73 test82\nfile2 test10 test2 test29 test38 test47 test56 test65 test74 test83\nfile3 test11 test20 test3 test39 test48 test57 test66 test75 test84\nfile4 test12 test21 test30 test4 test49 test58 test67 test76 test85\nfile5 test13 test22 test31 test40 test5 test59 test68 test77 test86\nfile6 test14 test23 test32 test41 test50 test6 test69 test78 test87\n```\n\n4.\n```\nedquota -t  7\nGrace period before enforcing soft limits for users:\nTime units may be: days, hours, minutes, or seconds\nFilesystem                                   Block grace period                        Inode grace period\n/dev/mapper/vgxiemx-lv1                      7days                                     7days\n```\n5.quotaquota\n```\nrepquota -a\n\n[root@localhost mnt]# repquota -a\n*** Report for user quotas on device /dev/mapper/vgxiemx-lv1\nBlock grace time: 7days; Inode grace time: 7days\nBlock limits File limits\nUser                      used      soft      hard    grace    used      soft      hard       grace\n-------------------------------------------------------------------------------------------\nroot           --        956592     0         0                 6          0        0\ntestuser       ++        100        10        100      6days    100        10       100       6days\n```\n*quota/etc/rc.d/rc.localquotacheckquotaon quotaquote/etc/fstab*\n\n\n```\n/etc/fstab\n# Created by anaconda on Sun May 24 08:16:25 2015\n#\n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\n#\n/dev/mapper/VolGroup-lv_root / ext4 defaults 1 1\nUUID=3fe6311e-b3fe-4f7f-8558-4f011eab1dde /boot ext4 defaults 1 2\n/dev/mapper/VolGroup-lv_swap swap swap defaults 0 0\ntmpfs /dev/shm tmpfs defaults 0 0\ndevpts /dev/pts devpts gid=5,mode=620 0 0\nsysfs /sys sysfs defaults 0 0\nproc /proc proc defaults 0 0\n/dev/mapper/vgxiemx-lv1 /mnt ext3 defaults,usrquota,grpquota 0 0\n```","slug":"linux-disk-quota","updated":"2019-10-21T06:57:43.047Z","photos":[],"link":"","_id":"ck42dyijo00jvu9urn6oa27sg","content":"<p>linuxlinuxquotaquotaquotaquota</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">## grep CONFIG_QUOTA /boot/config-`uname -r` </span></span></span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost mnt]# grep CONFIG_QUOTA /boot/config-2.6.32-431.el6.x86_64</span><br><span class=\"line\">CONFIG_QUOTA=y</span><br><span class=\"line\">CONFIG_QUOTA_NETLINK_INTERFACE=y</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> CONFIG_QUOTA_DEBUG is not <span class=\"built_in\">set</span></span></span><br><span class=\"line\">CONFIG_QUOTA_TREE=y</span><br><span class=\"line\">CONFIG_QUOTACTL=y</span><br></pre></td></tr></table></figure>\n\n<p>quotablockinodequota<br><code>mount -o  remount,usrquota,grpquota,default    /mnt</code><br>mntdf <code>/etc/fstab</code><code>umount</code> <code>mount -a</code> </p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost mnt]# mount</span><br><span class=\"line\">/dev/mapper/VolGroup-lv_root on / type ext4 (rw)</span><br><span class=\"line\">proc on /proc type proc (rw)</span><br><span class=\"line\">sysfs on /sys type sysfs (rw)</span><br><span class=\"line\">devpts on /dev/pts type devpts (rw,gid=5,mode=620)</span><br><span class=\"line\">tmpfs on /dev/shm type tmpfs (rw,rootcontext=\"system_u:object_r:tmpfs_t:s0\")</span><br><span class=\"line\">/dev/sda1 on /boot type ext4 (rw)</span><br><span class=\"line\">none on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)</span><br><span class=\"line\">/dev/mapper/vgxiemx-lv1 on /mnt type ext3 (rw)</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost mnt]# mount -o remount,grpquota,usrquota,defaults /mnt</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost mnt]# mount</span><br><span class=\"line\">/dev/mapper/VolGroup-lv_root on / type ext4 (rw)</span><br><span class=\"line\">proc on /proc type proc (rw)</span><br><span class=\"line\">sysfs on /sys type sysfs (rw)</span><br><span class=\"line\">devpts on /dev/pts type devpts (rw,gid=5,mode=620)</span><br><span class=\"line\">tmpfs on /dev/shm type tmpfs (rw,rootcontext=\"system_u:object_r:tmpfs_t:s0\")</span><br><span class=\"line\">/dev/sda1 on /boot type ext4 (rw)</span><br><span class=\"line\">none on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)</span><br><span class=\"line\">/dev/mapper/vgxiemx-lv1 on /mnt type ext3 (rw,usrquota,grpquota)</span><br><span class=\"line\">[root@localhost mnt]#</span><br></pre></td></tr></table></figure>\n\n<p><strong>/mntquota/mnt</strong></p>\n<ol>\n<li><p>quotaquotaquota.userquota.groupdatafile</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost mnt]# quotacheck -avug</span><br><span class=\"line\">quotacheck: Your kernel probably supports journaled quota but you are not using it. Consider switching to journaled quota to avoid running quotacheck after an unclean shutdown.</span><br><span class=\"line\">quotacheck: Scanning /dev/mapper/vgxiemx-lv1 [/mnt] done</span><br><span class=\"line\">quotacheck: Checked 3 directories and 6 files</span><br><span class=\"line\">[root@localhost mnt]# ls</span><br><span class=\"line\">aquota.group  aquota.user  lost+found</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>quota<br>quotaon -av a<code>quotaoff</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost /]# quotaon -av</span><br><span class=\"line\">/dev/mapper/vgxiemx-lv1 [/mnt]: group quotas turned on</span><br><span class=\"line\">/dev/mapper/vgxiemx-lv1 [/mnt]: user quotas turned on</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>quota<br>edquota  -u testuservi</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Disk quotas for user testuser (uid 500):</span><br><span class=\"line\">Filesystem                                    blocks       soft       hard     inodes     soft     hard</span><br><span class=\"line\">/dev/mapper/vgxiemx-lv1                        0             10        100       0          10       100</span><br><span class=\"line\"></span><br><span class=\"line\">filesystem</span><br><span class=\"line\">blockblock</span><br><span class=\"line\">inodeinode</span><br><span class=\"line\">softsoft07</span><br><span class=\"line\">hardblock/inode0</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[testuser@localhost mnt]$ dd if=/dev/zero of=/mnt/bigfile bs=1M count=20 20Msoft block</span><br><span class=\"line\">dm-2: warning, user block quota exceeded.</span><br><span class=\"line\">1+0 records in</span><br><span class=\"line\">0+0 records out</span><br><span class=\"line\">98304 bytes (98 kB) copied, 0.00147599 s, 66.6 MB/s</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ du bigfile 20M</span><br><span class=\"line\">20 bigfile</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ dd if=/dev/zero of=/mnt/bigfile bs=1M count=110110Mhard block10M</span><br><span class=\"line\">dm-2: warning, user block quota exceeded.</span><br><span class=\"line\">dm-2: write failed, user block limit reached.</span><br><span class=\"line\">dd: writing `/mnt/bigfile': Disk quota exceeded</span><br><span class=\"line\">1+0 records in</span><br><span class=\"line\">0+0 records out</span><br><span class=\"line\">98304 bytes (98 kB) copied, 0.000795784 s, 124 MB/s</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ du bigfile100M</span><br><span class=\"line\">100 bigfile</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ ll</span><br><span class=\"line\">total 132</span><br><span class=\"line\">-rw-------. 1 root root 7168 Nov 22 04:01 aquota.group</span><br><span class=\"line\">-rw-------. 1 root root 7168 Nov 22 03:58 aquota.user</span><br><span class=\"line\">-rw-rw-r--. 1 testuser testuser 98304 Nov 22 04:02 bigfile</span><br><span class=\"line\">drwxrwxrwx. 2 root root 16384 Nov 22 02:31 lost+found</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ touch file&#123;1..10&#125;101bigfile11soft inode</span><br><span class=\"line\">dm-2: warning, user file quota exceeded.</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ ls</span><br><span class=\"line\">aquota.group bigfile file10 file3 file5 file7 file9</span><br><span class=\"line\">aquota.user file1 file2 file4 file6 file8 lost+found</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ touch test&#123;1..100&#125;1001111</span><br><span class=\"line\">dm-2: write failed, user file limit reached.</span><br><span class=\"line\">touch: cannot touch `test90': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test91': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test92': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test93': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test94': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test95': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test96': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test97': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test98': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test99': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test100': Disk quota exceeded</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ ls</span><br><span class=\"line\">aquota.group file7 test15 test24 test33 test42 test51 test60 test7 test79 test88</span><br><span class=\"line\">aquota.user file8 test16 test25 test34 test43 test52 test61 test70 test8 test89</span><br><span class=\"line\">bigfile file9 test17 test26 test35 test44 test53 test62 test71 test80 test9</span><br><span class=\"line\">file1 lost+found test18 test27 test36 test45 test54 test63 test72 test81</span><br><span class=\"line\">file10 test1 test19 test28 test37 test46 test55 test64 test73 test82</span><br><span class=\"line\">file2 test10 test2 test29 test38 test47 test56 test65 test74 test83</span><br><span class=\"line\">file3 test11 test20 test3 test39 test48 test57 test66 test75 test84</span><br><span class=\"line\">file4 test12 test21 test30 test4 test49 test58 test67 test76 test85</span><br><span class=\"line\">file5 test13 test22 test31 test40 test5 test59 test68 test77 test86</span><br><span class=\"line\">file6 test14 test23 test32 test41 test50 test6 test69 test78 test87</span><br></pre></td></tr></table></figure>\n\n<p>4.</p>\n<figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">edquota -<span class=\"built_in\">t</span>  <span class=\"number\">7</span></span><br><span class=\"line\">Grace period before enforcing soft limits for use<span class=\"symbol\">rs:</span></span><br><span class=\"line\"><span class=\"built_in\">Time</span> units may <span class=\"symbol\">be:</span> <span class=\"built_in\">days</span>, hours, minutes, <span class=\"built_in\">or</span> seconds</span><br><span class=\"line\">Filesystem                                   Block grace period                        Inode grace period</span><br><span class=\"line\">/dev/mapper/vgxiemx-<span class=\"symbol\">lv1</span>                      <span class=\"number\">7</span><span class=\"built_in\">days</span>                                     <span class=\"number\">7</span><span class=\"built_in\">days</span></span><br></pre></td></tr></table></figure>\n\n<p>5.quotaquota</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">repquota -a</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost mnt]# repquota -a</span><br><span class=\"line\">*** Report <span class=\"keyword\">for</span><span class=\"built_in\"> user </span>quotas on device /dev/mapper/vgxiemx-lv1</span><br><span class=\"line\">Block grace time: 7days; Inode grace time: 7days</span><br><span class=\"line\">Block limits File limits</span><br><span class=\"line\">User                      used      soft      hard    grace    used      soft      hard       grace</span><br><span class=\"line\">-------------------------------------------------------------------------------------------</span><br><span class=\"line\">root           --        956592     0         0                 6          0        0</span><br><span class=\"line\">testuser       ++        100        10        100      6days    100        10       100       6days</span><br></pre></td></tr></table></figure>\n\n<p><em>quota/etc/rc.d/rc.localquotacheckquotaon quotaquote/etc/fstab</em></p>\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/fstab</span><br><span class=\"line\"># Created by anaconda on Sun May <span class=\"number\">24</span> <span class=\"number\">08</span>:<span class=\"number\">16</span>:<span class=\"number\">25</span> <span class=\"number\">2015</span></span><br><span class=\"line\">#</span><br><span class=\"line\"># Accessible filesystems, by <span class=\"built_in\">ref</span>erence, are maintained under <span class=\"string\">'/dev/disk'</span></span><br><span class=\"line\"># See man pages fstab(<span class=\"number\">5</span>), findfs(<span class=\"number\">8</span>), mount(<span class=\"number\">8</span>) <span class=\"keyword\">and</span>/<span class=\"keyword\">or</span> blkid(<span class=\"number\">8</span>) <span class=\"keyword\">for</span> more info</span><br><span class=\"line\">#</span><br><span class=\"line\">/dev/mapper/VolGroup-lv_root / ext4 defaults <span class=\"number\">1</span> <span class=\"number\">1</span></span><br><span class=\"line\">UUID=<span class=\"number\">3fe6311</span>e-b3fe<span class=\"number\">-4f</span>7f<span class=\"number\">-8558</span><span class=\"number\">-4f</span>011eab1dde /boot ext4 defaults <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">/dev/mapper/VolGroup-lv_swap swap swap defaults <span class=\"number\">0</span> <span class=\"number\">0</span></span><br><span class=\"line\">tmpfs /dev/shm tmpfs defaults <span class=\"number\">0</span> <span class=\"number\">0</span></span><br><span class=\"line\">devpts /dev/pts devpts gid=<span class=\"number\">5</span>,mode=<span class=\"number\">620</span> <span class=\"number\">0</span> <span class=\"number\">0</span></span><br><span class=\"line\">sysfs /sys sysfs defaults <span class=\"number\">0</span> <span class=\"number\">0</span></span><br><span class=\"line\">proc /proc proc defaults <span class=\"number\">0</span> <span class=\"number\">0</span></span><br><span class=\"line\">/dev/mapper/vgxiemx-lv1 /mnt ext3 defaults,usrquota,grpquota <span class=\"number\">0</span> <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>linuxlinuxquotaquotaquotaquota</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\">## grep CONFIG_QUOTA /boot/config-`uname -r` </span></span></span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost mnt]# grep CONFIG_QUOTA /boot/config-2.6.32-431.el6.x86_64</span><br><span class=\"line\">CONFIG_QUOTA=y</span><br><span class=\"line\">CONFIG_QUOTA_NETLINK_INTERFACE=y</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> CONFIG_QUOTA_DEBUG is not <span class=\"built_in\">set</span></span></span><br><span class=\"line\">CONFIG_QUOTA_TREE=y</span><br><span class=\"line\">CONFIG_QUOTACTL=y</span><br></pre></td></tr></table></figure>\n\n<p>quotablockinodequota<br><code>mount -o  remount,usrquota,grpquota,default    /mnt</code><br>mntdf <code>/etc/fstab</code><code>umount</code> <code>mount -a</code> </p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost mnt]# mount</span><br><span class=\"line\">/dev/mapper/VolGroup-lv_root on / type ext4 (rw)</span><br><span class=\"line\">proc on /proc type proc (rw)</span><br><span class=\"line\">sysfs on /sys type sysfs (rw)</span><br><span class=\"line\">devpts on /dev/pts type devpts (rw,gid=5,mode=620)</span><br><span class=\"line\">tmpfs on /dev/shm type tmpfs (rw,rootcontext=\"system_u:object_r:tmpfs_t:s0\")</span><br><span class=\"line\">/dev/sda1 on /boot type ext4 (rw)</span><br><span class=\"line\">none on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)</span><br><span class=\"line\">/dev/mapper/vgxiemx-lv1 on /mnt type ext3 (rw)</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost mnt]# mount -o remount,grpquota,usrquota,defaults /mnt</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost mnt]# mount</span><br><span class=\"line\">/dev/mapper/VolGroup-lv_root on / type ext4 (rw)</span><br><span class=\"line\">proc on /proc type proc (rw)</span><br><span class=\"line\">sysfs on /sys type sysfs (rw)</span><br><span class=\"line\">devpts on /dev/pts type devpts (rw,gid=5,mode=620)</span><br><span class=\"line\">tmpfs on /dev/shm type tmpfs (rw,rootcontext=\"system_u:object_r:tmpfs_t:s0\")</span><br><span class=\"line\">/dev/sda1 on /boot type ext4 (rw)</span><br><span class=\"line\">none on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)</span><br><span class=\"line\">/dev/mapper/vgxiemx-lv1 on /mnt type ext3 (rw,usrquota,grpquota)</span><br><span class=\"line\">[root@localhost mnt]#</span><br></pre></td></tr></table></figure>\n\n<p><strong>/mntquota/mnt</strong></p>\n<ol>\n<li><p>quotaquotaquota.userquota.groupdatafile</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost mnt]# quotacheck -avug</span><br><span class=\"line\">quotacheck: Your kernel probably supports journaled quota but you are not using it. Consider switching to journaled quota to avoid running quotacheck after an unclean shutdown.</span><br><span class=\"line\">quotacheck: Scanning /dev/mapper/vgxiemx-lv1 [/mnt] done</span><br><span class=\"line\">quotacheck: Checked 3 directories and 6 files</span><br><span class=\"line\">[root@localhost mnt]# ls</span><br><span class=\"line\">aquota.group  aquota.user  lost+found</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>quota<br>quotaon -av a<code>quotaoff</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost /]# quotaon -av</span><br><span class=\"line\">/dev/mapper/vgxiemx-lv1 [/mnt]: group quotas turned on</span><br><span class=\"line\">/dev/mapper/vgxiemx-lv1 [/mnt]: user quotas turned on</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>quota<br>edquota  -u testuservi</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Disk quotas for user testuser (uid 500):</span><br><span class=\"line\">Filesystem                                    blocks       soft       hard     inodes     soft     hard</span><br><span class=\"line\">/dev/mapper/vgxiemx-lv1                        0             10        100       0          10       100</span><br><span class=\"line\"></span><br><span class=\"line\">filesystem</span><br><span class=\"line\">blockblock</span><br><span class=\"line\">inodeinode</span><br><span class=\"line\">softsoft07</span><br><span class=\"line\">hardblock/inode0</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[testuser@localhost mnt]$ dd if=/dev/zero of=/mnt/bigfile bs=1M count=20 20Msoft block</span><br><span class=\"line\">dm-2: warning, user block quota exceeded.</span><br><span class=\"line\">1+0 records in</span><br><span class=\"line\">0+0 records out</span><br><span class=\"line\">98304 bytes (98 kB) copied, 0.00147599 s, 66.6 MB/s</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ du bigfile 20M</span><br><span class=\"line\">20 bigfile</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ dd if=/dev/zero of=/mnt/bigfile bs=1M count=110110Mhard block10M</span><br><span class=\"line\">dm-2: warning, user block quota exceeded.</span><br><span class=\"line\">dm-2: write failed, user block limit reached.</span><br><span class=\"line\">dd: writing `/mnt/bigfile': Disk quota exceeded</span><br><span class=\"line\">1+0 records in</span><br><span class=\"line\">0+0 records out</span><br><span class=\"line\">98304 bytes (98 kB) copied, 0.000795784 s, 124 MB/s</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ du bigfile100M</span><br><span class=\"line\">100 bigfile</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ ll</span><br><span class=\"line\">total 132</span><br><span class=\"line\">-rw-------. 1 root root 7168 Nov 22 04:01 aquota.group</span><br><span class=\"line\">-rw-------. 1 root root 7168 Nov 22 03:58 aquota.user</span><br><span class=\"line\">-rw-rw-r--. 1 testuser testuser 98304 Nov 22 04:02 bigfile</span><br><span class=\"line\">drwxrwxrwx. 2 root root 16384 Nov 22 02:31 lost+found</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ touch file&#123;1..10&#125;101bigfile11soft inode</span><br><span class=\"line\">dm-2: warning, user file quota exceeded.</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ ls</span><br><span class=\"line\">aquota.group bigfile file10 file3 file5 file7 file9</span><br><span class=\"line\">aquota.user file1 file2 file4 file6 file8 lost+found</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ touch test&#123;1..100&#125;1001111</span><br><span class=\"line\">dm-2: write failed, user file limit reached.</span><br><span class=\"line\">touch: cannot touch `test90': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test91': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test92': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test93': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test94': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test95': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test96': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test97': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test98': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test99': Disk quota exceeded</span><br><span class=\"line\">touch: cannot touch `test100': Disk quota exceeded</span><br><span class=\"line\"></span><br><span class=\"line\">[testuser@localhost mnt]$ ls</span><br><span class=\"line\">aquota.group file7 test15 test24 test33 test42 test51 test60 test7 test79 test88</span><br><span class=\"line\">aquota.user file8 test16 test25 test34 test43 test52 test61 test70 test8 test89</span><br><span class=\"line\">bigfile file9 test17 test26 test35 test44 test53 test62 test71 test80 test9</span><br><span class=\"line\">file1 lost+found test18 test27 test36 test45 test54 test63 test72 test81</span><br><span class=\"line\">file10 test1 test19 test28 test37 test46 test55 test64 test73 test82</span><br><span class=\"line\">file2 test10 test2 test29 test38 test47 test56 test65 test74 test83</span><br><span class=\"line\">file3 test11 test20 test3 test39 test48 test57 test66 test75 test84</span><br><span class=\"line\">file4 test12 test21 test30 test4 test49 test58 test67 test76 test85</span><br><span class=\"line\">file5 test13 test22 test31 test40 test5 test59 test68 test77 test86</span><br><span class=\"line\">file6 test14 test23 test32 test41 test50 test6 test69 test78 test87</span><br></pre></td></tr></table></figure>\n\n<p>4.</p>\n<figure class=\"highlight excel\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">edquota -<span class=\"built_in\">t</span>  <span class=\"number\">7</span></span><br><span class=\"line\">Grace period before enforcing soft limits for use<span class=\"symbol\">rs:</span></span><br><span class=\"line\"><span class=\"built_in\">Time</span> units may <span class=\"symbol\">be:</span> <span class=\"built_in\">days</span>, hours, minutes, <span class=\"built_in\">or</span> seconds</span><br><span class=\"line\">Filesystem                                   Block grace period                        Inode grace period</span><br><span class=\"line\">/dev/mapper/vgxiemx-<span class=\"symbol\">lv1</span>                      <span class=\"number\">7</span><span class=\"built_in\">days</span>                                     <span class=\"number\">7</span><span class=\"built_in\">days</span></span><br></pre></td></tr></table></figure>\n\n<p>5.quotaquota</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">repquota -a</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost mnt]# repquota -a</span><br><span class=\"line\">*** Report <span class=\"keyword\">for</span><span class=\"built_in\"> user </span>quotas on device /dev/mapper/vgxiemx-lv1</span><br><span class=\"line\">Block grace time: 7days; Inode grace time: 7days</span><br><span class=\"line\">Block limits File limits</span><br><span class=\"line\">User                      used      soft      hard    grace    used      soft      hard       grace</span><br><span class=\"line\">-------------------------------------------------------------------------------------------</span><br><span class=\"line\">root           --        956592     0         0                 6          0        0</span><br><span class=\"line\">testuser       ++        100        10        100      6days    100        10       100       6days</span><br></pre></td></tr></table></figure>\n\n<p><em>quota/etc/rc.d/rc.localquotacheckquotaon quotaquote/etc/fstab</em></p>\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/fstab</span><br><span class=\"line\"># Created by anaconda on Sun May <span class=\"number\">24</span> <span class=\"number\">08</span>:<span class=\"number\">16</span>:<span class=\"number\">25</span> <span class=\"number\">2015</span></span><br><span class=\"line\">#</span><br><span class=\"line\"># Accessible filesystems, by <span class=\"built_in\">ref</span>erence, are maintained under <span class=\"string\">'/dev/disk'</span></span><br><span class=\"line\"># See man pages fstab(<span class=\"number\">5</span>), findfs(<span class=\"number\">8</span>), mount(<span class=\"number\">8</span>) <span class=\"keyword\">and</span>/<span class=\"keyword\">or</span> blkid(<span class=\"number\">8</span>) <span class=\"keyword\">for</span> more info</span><br><span class=\"line\">#</span><br><span class=\"line\">/dev/mapper/VolGroup-lv_root / ext4 defaults <span class=\"number\">1</span> <span class=\"number\">1</span></span><br><span class=\"line\">UUID=<span class=\"number\">3fe6311</span>e-b3fe<span class=\"number\">-4f</span>7f<span class=\"number\">-8558</span><span class=\"number\">-4f</span>011eab1dde /boot ext4 defaults <span class=\"number\">1</span> <span class=\"number\">2</span></span><br><span class=\"line\">/dev/mapper/VolGroup-lv_swap swap swap defaults <span class=\"number\">0</span> <span class=\"number\">0</span></span><br><span class=\"line\">tmpfs /dev/shm tmpfs defaults <span class=\"number\">0</span> <span class=\"number\">0</span></span><br><span class=\"line\">devpts /dev/pts devpts gid=<span class=\"number\">5</span>,mode=<span class=\"number\">620</span> <span class=\"number\">0</span> <span class=\"number\">0</span></span><br><span class=\"line\">sysfs /sys sysfs defaults <span class=\"number\">0</span> <span class=\"number\">0</span></span><br><span class=\"line\">proc /proc proc defaults <span class=\"number\">0</span> <span class=\"number\">0</span></span><br><span class=\"line\">/dev/mapper/vgxiemx-lv1 /mnt ext3 defaults,usrquota,grpquota <span class=\"number\">0</span> <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"Linuxlvm","published":1,"author":"xiemx","comments":1,"date":"2015-11-28T18:11:11.000Z","_content":"lvmlvmlvvgpv\n\npv\nvg\nlv\npeblock\n\nlvm\n\n## lvm\n\n1. \n```\nfdisk dev/vda\n```\n2. \n```\npartx  -a   /dev/vda\n```\n3. pv\n```\npvcreate dev/vda1  \n\npvspvdisplaypv\n\n[root@localhost ~]# pvs\nPV VG Fmt Attr PSize PFree\n/dev/sda2 VolGroup lvm2 a-- 19.51g 0\n/dev/sdb lvm2 a-- 10.00g 10.00g\n\n[root@localhost ~]# pvdisplay\n--- Physical volume ---\nPV Name               /dev/sda2\nVG Name               VolGroup\nPV Size               19.51 GiB / not usable 3.00 MiB\nAllocatable           yes (but full)\nPE Size               4.00 MiB\nTotal PE              4994\nFree PE               0\nAllocated PE          4994\nPV UUID               fcQLJh-oq2G-adfr-QeEK-sdtl-3XND-m1YtPA\n\n\"/dev/sdb\" is a new physical volume of \"10.00 GiB\"\n--- NEW Physical volume ---\nPV Name               /dev/sdb\nVG Name\nPV Size               10.00 GiB\nAllocatable           NO\nPE Size               0\nTotal PE              0\nFree PE               0\nAllocated PE          0\nPV UUID               WQpkNi-1cN6-QogB-TLB2-R2wT-Agmh-BRBiUN\n```\n4. vg\n```\nvgcreate  -s 8M vgname /dev/vda1  /dev/vda2   spe4M\n\nvgsvgdisplayvg\n\n[root@localhost ~]# vgcreate -s 8M vgxiemx /dev/sdb\nVolume group \"vgxiemx\" successfully created\n[root@localhost ~]# vgs\nVG       #PV #LV #SN Attr   VSize  VFree\nVolGroup   1   2   0 wz--n- 19.51g    0\nvgxiemx    1   0   0 wz--n-  9.99g 9.99g\n[root@localhost ~]# vgdisplay\n--- Volume group ---\nVG Name               vgxiemx\nSystem ID\nFormat                lvm2\nMetadata Areas        1\nMetadata Sequence No  1\nVG Access             read/write\nVG Status             resizable\nMAX LV                0\nCur LV                0\nOpen LV               0\nMax PV                0\nCur PV                1\nAct PV                1\nVG Size               9.99 GiB\nPE Size               8.00 MiB\nTotal PE              1279\nAlloc PE / Size       0 / 0\nFree  PE / Size       1279 / 9.99 GiB\nVG UUID               5WZfct-snfo-aEDl-gHuO-QDbz-v83j-L0lwmR\n```\n5. lv\n```\nlvcreate -l 100 -n lvname vgnamel100pelv nvg\n\nlvcreate -L1000M -n lvname vgnameLK M GLlman\n\nlvslvdisplaylv\n\n[root@localhost ~]# lvcreate -n lv1 -l 1279 vgxiemx\nLogical volume \"lv1\" created\n[root@localhost ~]# lvs\nLV VG Attr LSize Pool Origin Data% Move Log Cpy%Sync Convert\nlv_root VolGroup -wi-ao---- 17.51g\nlv_swap VolGroup -wi-ao---- 2.00g\nlv1 vgxiemx -wi-a----- 9.99g\n[root@localhost ~]# lvdisplay\n--- Logical volume ---\nLV Path /dev/vgxiemx/lv1\nLV Name lv1\nVG Name vgxiemx\nLV UUID nViafR-nrnS-REMQ-bGOT-uhDe-Skd0-XUNwmU\nLV Write Access read/write\nLV Creation host, time localhost.localdomain, 2015-11-22 01:50:41 +0800\nLV Status available\n# open 0\nLV Size 9.99 GiB\nCurrent LE 1279\nSegments 1\nAllocation inherit\nRead ahead sectors auto\n- currently set to 256\nBlock device 253:2\n```\n6. \n```\nmkfs.ext3  /dev/vgname/lvname \n\n[root@localhost ~]# mkfs -t ext3 /dev/vgxiemx/lv1\nmke2fs 1.41.12 (17-May-2010)\nFilesystem label=\nOS type: Linux\nBlock size=4096 (log=2)\nFragment size=4096 (log=2)\nStride=0 blocks, Stripe width=0 blocks\n655360 inodes, 2619392 blocks\n130969 blocks (5.00%) reserved for the super user\nFirst data block=0\nMaximum filesystem blocks=2684354560\n80 block groups\n32768 blocks per group, 32768 fragments per group\n8192 inodes per group\nSuperblock backups stored on blocks:\n32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632\n\nWriting inode tables: done\nCreating journal (32768 blocks): done\nWriting superblocks and filesystem accounting information: done\n\nThis filesystem will be automatically checked every 30 mounts or\n180 days, whichever comes first.  Use tune2fs -c or -i to override.\n```\n7. lv\n```\nmount /dev/vgname/lvname  /mnt\n\n[root@localhost ~]# mount /dev/vgxiemx/lv1 /mnt\n[root@localhost mnt]# df -l\nFilesystem 1K-blocks Used Available Use% Mounted on\n/dev/mapper/VolGroup-lv_root 18069936 6767876 10384148 40% /\ntmpfs 953788 72 953716 1% /dev/shm\n/dev/sda1 495844 39915 430329 9% /boot\n/dev/mapper/vgxiemx-lv1 10313016 154232 9634908 2% /mnt\n```\n## lvm\n\n### pv\n\n#### pv\npvpv\n\n#### pv\n```\npvremove /dev/vdb\n\n[root@localhost /]# pvremove /dev/sdb\nLabels on physical volume \"/dev/sdb\" successfully wiped\n[root@localhost /]# pvs\nPV VG Fmt Attr PSize PFree\n/dev/sda2 VolGroup lvm2 a-- 19.51g 0\n```\n#### pv\n\npv/dev/sdb11G/dev/sdb2pv/dev/sdb1\n```\npvremove /dev/sdb1 /dev/sdb2\n\n[root@localhost mnt]# pvs\nPV         VG       Fmt  Attr PSize  PFree\n/dev/sda2  VolGroup lvm2 a--  19.51g    0\n/dev/sdb1  vgxiemx  lvm2 a--   1.01g 8.00m\n/dev/sdb2  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb3  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb5           lvm2 a--   2.01g 2.01g\n/dev/sdb6           lvm2 a--   4.96g 4.96g\n[root@localhost mnt]# pvmove /dev/sdb1 /dev/sdb2\n/dev/sdb1: Moved: 1.6%\n/dev/sdb1: Moved: 45.3%\n/dev/sdb1: Moved: 89.8%\n/dev/sdb1: Moved: 100.0%\n[root@localhost mnt]# pvs\nPV         VG       Fmt  Attr PSize  PFree\n/dev/sda2  VolGroup lvm2 a--  19.51g    0\n/dev/sdb1  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb2  vgxiemx  lvm2 a--   1.01g 8.00m\n/dev/sdb3  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb5           lvm2 a--   2.01g 2.01g\n/dev/sdb6           lvm2 a--   4.96g 4.96g\n```\n### vg\n\n#### vg\n\nvgpvvgvgpvvg\n```\nvgextend  /dev/sdb5  vgxiemx\n\n[root@localhost /]# pvs\nPV VG Fmt Attr PSize PFree\n/dev/sda2 VolGroup lvm2 a-- 19.51g 0\n/dev/sdb1 vgxiemx lvm2 a-- 1.01g 1.01g\n/dev/sdb2 vgxiemx lvm2 a-- 1.01g 1.01g\n/dev/sdb3 vgxiemx lvm2 a-- 1.01g 1.01g\n/dev/sdb5                 lvm2 a-- 2.01g 2.01g\n/dev/sdb6                 lvm2 a-- 4.96g 4.96g\n[root@localhost /]# vgextend vgxiemx /dev/sdb5\nVolume group \"vgxiemx\" successfully extended\n[root@localhost /]# pvs\nPV VG Fmt Attr PSize PFree\n/dev/sda2 VolGroup lvm2 a-- 19.51g 0\n/dev/sdb1 vgxiemx lvm2 a-- 1.01g 1.01g\n/dev/sdb2 vgxiemx lvm2 a-- 1.01g 1.01g\n/dev/sdb3 vgxiemx lvm2 a-- 1.01g 1.01g\n/dev/sdb5 vgxiemx lvm2 a-- 2.00g 2.00g\n/dev/sdb6                 lvm2 a-- 4.96g 4.96g\n```\n#### vg\n\nvgpvpvpvpepvpvpv\n```\nvgreduce vgxiemx /dev/sdb5\n\n[root@localhost /]# pvs\nPV         VG       Fmt  Attr PSize  PFree\n/dev/sda2  VolGroup lvm2 a--  19.51g    0\n/dev/sdb1  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb2  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb3  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb5  vgxiemx  lvm2 a--   2.00g 2.00g\n/dev/sdb6           lvm2 a--   4.96g 4.96g\n[root@localhost /]# vgreduce vgxiemx /dev/sdb5\nRemoved \"/dev/sdb5\" from volume group \"vgxiemx\"\n[root@localhost /]# pvs\nPV         VG       Fmt  Attr PSize  PFree\n/dev/sda2  VolGroup lvm2 a--  19.51g    0\n/dev/sdb1  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb2  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb3  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb5           lvm2 a--   2.01g 2.01g\n/dev/sdb6           lvm2 a--   4.96g 4.96g\n```\n#### vg\n\n```\nvgremove vgxiemx\n\n[root@localhost /]# vgremove vgxiemx\nVolume group \"vgxiemx\" successfully removed\n[root@localhost /]# vgs\nVG #PV #LV #SN Attr VSize VFree\nVolGroup 1 2 0 wz--n- 19.51g 0\n```\n### lv\n\n#### lv\n```\nlvreduce -L 9000M /dev/vgxiemx/lv1\n\n[root@localhost /]# lvreduce -L 9000M /dev/vgxiemx/lv1\nWARNING: Reducing active logical volume to 8.79 GiB\nTHIS MAY DESTROY YOUR DATA (filesystem etc.)\nDo you really want to reduce lv1? [y/n]: y\nReducing logical volume lv1 to 8.79 GiB\nLogical volume lv1 successfully resized\n[root@localhost /]# lvs\nLV VG Attr LSize Pool Origin Data% Move Log Cpy%Sync Convert\nlv_root VolGroup -wi-ao---- 17.51g\nlv_swap VolGroup -wi-ao---- 2.00g\nlv1 vgxiemx -wi-a----- 8.79g\n```\n#### lv\n```\nlvextend -L 10000M /dev/vgxiemx/lv1\n\n[root@localhost /]# lvextend -L 10000M /dev/vgxiemx/lv1\nExtending logical volume lv1 to 9.77 GiB\nLogical volume lv1 successfully resized\n[root@localhost /]# lvs\nLV VG Attr LSize Pool Origin Data% Move Log Cpy%Sync Convert\nlv_root VolGroup -wi-ao---- 17.51g\nlv_swap VolGroup -wi-ao---- 2.00g\nlv1 vgxiemx -wi-a----- 9.77g\n```\n#### lv\n```\nlvremove /dev/vgxiemx/lv1\n\n[root@localhost /]# lvremove /dev/vgxiemx/lv1\nDo you really want to remove active logical volume lv1? [y/n]: y\nLogical volume \"lv1\" successfully removed\n[root@localhost /]# lvs\nLV VG Attr LSize Pool Origin Data% Move Log Cpy%Sync Convert\nlv_root VolGroup -wi-ao---- 17.51g\nlv_swap VolGroup -wi-ao---- 2.00g\n```\n### \n\n#### \n```\ne2fsck /dev/vgxiemx/lv1\n\n[root@localhost /]# e2fsck -f /dev/vgxiemx/lv1\ne2fsck 1.41.12 (17-May-2010)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/dev/vgxiemx/lv1: 11/655360 files (0.0% non-contiguous), 79696/2619392 blocks\n```\n#### \n```\nresize2fs /dev/vgxiemx/lv1 9000M\n\n[root@localhost /]# resize2fs /dev/vgxiemx/lv1 9000M\nresize2fs 1.41.12 (17-May-2010)\nResizing the filesystem on /dev/vgxiemx/lv1 to 2304000 (4k) blocks.\nThe filesystem on /dev/vgxiemx/lv1 is now 2304000 blocks long.\n```\n ","source":"_posts/linux-lvm.md","raw":"---\nlayout: post\ntitle: Linuxlvm\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-11-29 02:11:11\ntags: [ linux, lvm]\ncategories:\n    - linux\n---\nlvmlvmlvvgpv\n\npv\nvg\nlv\npeblock\n\nlvm\n\n## lvm\n\n1. \n```\nfdisk dev/vda\n```\n2. \n```\npartx  -a   /dev/vda\n```\n3. pv\n```\npvcreate dev/vda1  \n\npvspvdisplaypv\n\n[root@localhost ~]# pvs\nPV VG Fmt Attr PSize PFree\n/dev/sda2 VolGroup lvm2 a-- 19.51g 0\n/dev/sdb lvm2 a-- 10.00g 10.00g\n\n[root@localhost ~]# pvdisplay\n--- Physical volume ---\nPV Name               /dev/sda2\nVG Name               VolGroup\nPV Size               19.51 GiB / not usable 3.00 MiB\nAllocatable           yes (but full)\nPE Size               4.00 MiB\nTotal PE              4994\nFree PE               0\nAllocated PE          4994\nPV UUID               fcQLJh-oq2G-adfr-QeEK-sdtl-3XND-m1YtPA\n\n\"/dev/sdb\" is a new physical volume of \"10.00 GiB\"\n--- NEW Physical volume ---\nPV Name               /dev/sdb\nVG Name\nPV Size               10.00 GiB\nAllocatable           NO\nPE Size               0\nTotal PE              0\nFree PE               0\nAllocated PE          0\nPV UUID               WQpkNi-1cN6-QogB-TLB2-R2wT-Agmh-BRBiUN\n```\n4. vg\n```\nvgcreate  -s 8M vgname /dev/vda1  /dev/vda2   spe4M\n\nvgsvgdisplayvg\n\n[root@localhost ~]# vgcreate -s 8M vgxiemx /dev/sdb\nVolume group \"vgxiemx\" successfully created\n[root@localhost ~]# vgs\nVG       #PV #LV #SN Attr   VSize  VFree\nVolGroup   1   2   0 wz--n- 19.51g    0\nvgxiemx    1   0   0 wz--n-  9.99g 9.99g\n[root@localhost ~]# vgdisplay\n--- Volume group ---\nVG Name               vgxiemx\nSystem ID\nFormat                lvm2\nMetadata Areas        1\nMetadata Sequence No  1\nVG Access             read/write\nVG Status             resizable\nMAX LV                0\nCur LV                0\nOpen LV               0\nMax PV                0\nCur PV                1\nAct PV                1\nVG Size               9.99 GiB\nPE Size               8.00 MiB\nTotal PE              1279\nAlloc PE / Size       0 / 0\nFree  PE / Size       1279 / 9.99 GiB\nVG UUID               5WZfct-snfo-aEDl-gHuO-QDbz-v83j-L0lwmR\n```\n5. lv\n```\nlvcreate -l 100 -n lvname vgnamel100pelv nvg\n\nlvcreate -L1000M -n lvname vgnameLK M GLlman\n\nlvslvdisplaylv\n\n[root@localhost ~]# lvcreate -n lv1 -l 1279 vgxiemx\nLogical volume \"lv1\" created\n[root@localhost ~]# lvs\nLV VG Attr LSize Pool Origin Data% Move Log Cpy%Sync Convert\nlv_root VolGroup -wi-ao---- 17.51g\nlv_swap VolGroup -wi-ao---- 2.00g\nlv1 vgxiemx -wi-a----- 9.99g\n[root@localhost ~]# lvdisplay\n--- Logical volume ---\nLV Path /dev/vgxiemx/lv1\nLV Name lv1\nVG Name vgxiemx\nLV UUID nViafR-nrnS-REMQ-bGOT-uhDe-Skd0-XUNwmU\nLV Write Access read/write\nLV Creation host, time localhost.localdomain, 2015-11-22 01:50:41 +0800\nLV Status available\n# open 0\nLV Size 9.99 GiB\nCurrent LE 1279\nSegments 1\nAllocation inherit\nRead ahead sectors auto\n- currently set to 256\nBlock device 253:2\n```\n6. \n```\nmkfs.ext3  /dev/vgname/lvname \n\n[root@localhost ~]# mkfs -t ext3 /dev/vgxiemx/lv1\nmke2fs 1.41.12 (17-May-2010)\nFilesystem label=\nOS type: Linux\nBlock size=4096 (log=2)\nFragment size=4096 (log=2)\nStride=0 blocks, Stripe width=0 blocks\n655360 inodes, 2619392 blocks\n130969 blocks (5.00%) reserved for the super user\nFirst data block=0\nMaximum filesystem blocks=2684354560\n80 block groups\n32768 blocks per group, 32768 fragments per group\n8192 inodes per group\nSuperblock backups stored on blocks:\n32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632\n\nWriting inode tables: done\nCreating journal (32768 blocks): done\nWriting superblocks and filesystem accounting information: done\n\nThis filesystem will be automatically checked every 30 mounts or\n180 days, whichever comes first.  Use tune2fs -c or -i to override.\n```\n7. lv\n```\nmount /dev/vgname/lvname  /mnt\n\n[root@localhost ~]# mount /dev/vgxiemx/lv1 /mnt\n[root@localhost mnt]# df -l\nFilesystem 1K-blocks Used Available Use% Mounted on\n/dev/mapper/VolGroup-lv_root 18069936 6767876 10384148 40% /\ntmpfs 953788 72 953716 1% /dev/shm\n/dev/sda1 495844 39915 430329 9% /boot\n/dev/mapper/vgxiemx-lv1 10313016 154232 9634908 2% /mnt\n```\n## lvm\n\n### pv\n\n#### pv\npvpv\n\n#### pv\n```\npvremove /dev/vdb\n\n[root@localhost /]# pvremove /dev/sdb\nLabels on physical volume \"/dev/sdb\" successfully wiped\n[root@localhost /]# pvs\nPV VG Fmt Attr PSize PFree\n/dev/sda2 VolGroup lvm2 a-- 19.51g 0\n```\n#### pv\n\npv/dev/sdb11G/dev/sdb2pv/dev/sdb1\n```\npvremove /dev/sdb1 /dev/sdb2\n\n[root@localhost mnt]# pvs\nPV         VG       Fmt  Attr PSize  PFree\n/dev/sda2  VolGroup lvm2 a--  19.51g    0\n/dev/sdb1  vgxiemx  lvm2 a--   1.01g 8.00m\n/dev/sdb2  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb3  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb5           lvm2 a--   2.01g 2.01g\n/dev/sdb6           lvm2 a--   4.96g 4.96g\n[root@localhost mnt]# pvmove /dev/sdb1 /dev/sdb2\n/dev/sdb1: Moved: 1.6%\n/dev/sdb1: Moved: 45.3%\n/dev/sdb1: Moved: 89.8%\n/dev/sdb1: Moved: 100.0%\n[root@localhost mnt]# pvs\nPV         VG       Fmt  Attr PSize  PFree\n/dev/sda2  VolGroup lvm2 a--  19.51g    0\n/dev/sdb1  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb2  vgxiemx  lvm2 a--   1.01g 8.00m\n/dev/sdb3  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb5           lvm2 a--   2.01g 2.01g\n/dev/sdb6           lvm2 a--   4.96g 4.96g\n```\n### vg\n\n#### vg\n\nvgpvvgvgpvvg\n```\nvgextend  /dev/sdb5  vgxiemx\n\n[root@localhost /]# pvs\nPV VG Fmt Attr PSize PFree\n/dev/sda2 VolGroup lvm2 a-- 19.51g 0\n/dev/sdb1 vgxiemx lvm2 a-- 1.01g 1.01g\n/dev/sdb2 vgxiemx lvm2 a-- 1.01g 1.01g\n/dev/sdb3 vgxiemx lvm2 a-- 1.01g 1.01g\n/dev/sdb5                 lvm2 a-- 2.01g 2.01g\n/dev/sdb6                 lvm2 a-- 4.96g 4.96g\n[root@localhost /]# vgextend vgxiemx /dev/sdb5\nVolume group \"vgxiemx\" successfully extended\n[root@localhost /]# pvs\nPV VG Fmt Attr PSize PFree\n/dev/sda2 VolGroup lvm2 a-- 19.51g 0\n/dev/sdb1 vgxiemx lvm2 a-- 1.01g 1.01g\n/dev/sdb2 vgxiemx lvm2 a-- 1.01g 1.01g\n/dev/sdb3 vgxiemx lvm2 a-- 1.01g 1.01g\n/dev/sdb5 vgxiemx lvm2 a-- 2.00g 2.00g\n/dev/sdb6                 lvm2 a-- 4.96g 4.96g\n```\n#### vg\n\nvgpvpvpvpepvpvpv\n```\nvgreduce vgxiemx /dev/sdb5\n\n[root@localhost /]# pvs\nPV         VG       Fmt  Attr PSize  PFree\n/dev/sda2  VolGroup lvm2 a--  19.51g    0\n/dev/sdb1  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb2  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb3  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb5  vgxiemx  lvm2 a--   2.00g 2.00g\n/dev/sdb6           lvm2 a--   4.96g 4.96g\n[root@localhost /]# vgreduce vgxiemx /dev/sdb5\nRemoved \"/dev/sdb5\" from volume group \"vgxiemx\"\n[root@localhost /]# pvs\nPV         VG       Fmt  Attr PSize  PFree\n/dev/sda2  VolGroup lvm2 a--  19.51g    0\n/dev/sdb1  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb2  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb3  vgxiemx  lvm2 a--   1.01g 1.01g\n/dev/sdb5           lvm2 a--   2.01g 2.01g\n/dev/sdb6           lvm2 a--   4.96g 4.96g\n```\n#### vg\n\n```\nvgremove vgxiemx\n\n[root@localhost /]# vgremove vgxiemx\nVolume group \"vgxiemx\" successfully removed\n[root@localhost /]# vgs\nVG #PV #LV #SN Attr VSize VFree\nVolGroup 1 2 0 wz--n- 19.51g 0\n```\n### lv\n\n#### lv\n```\nlvreduce -L 9000M /dev/vgxiemx/lv1\n\n[root@localhost /]# lvreduce -L 9000M /dev/vgxiemx/lv1\nWARNING: Reducing active logical volume to 8.79 GiB\nTHIS MAY DESTROY YOUR DATA (filesystem etc.)\nDo you really want to reduce lv1? [y/n]: y\nReducing logical volume lv1 to 8.79 GiB\nLogical volume lv1 successfully resized\n[root@localhost /]# lvs\nLV VG Attr LSize Pool Origin Data% Move Log Cpy%Sync Convert\nlv_root VolGroup -wi-ao---- 17.51g\nlv_swap VolGroup -wi-ao---- 2.00g\nlv1 vgxiemx -wi-a----- 8.79g\n```\n#### lv\n```\nlvextend -L 10000M /dev/vgxiemx/lv1\n\n[root@localhost /]# lvextend -L 10000M /dev/vgxiemx/lv1\nExtending logical volume lv1 to 9.77 GiB\nLogical volume lv1 successfully resized\n[root@localhost /]# lvs\nLV VG Attr LSize Pool Origin Data% Move Log Cpy%Sync Convert\nlv_root VolGroup -wi-ao---- 17.51g\nlv_swap VolGroup -wi-ao---- 2.00g\nlv1 vgxiemx -wi-a----- 9.77g\n```\n#### lv\n```\nlvremove /dev/vgxiemx/lv1\n\n[root@localhost /]# lvremove /dev/vgxiemx/lv1\nDo you really want to remove active logical volume lv1? [y/n]: y\nLogical volume \"lv1\" successfully removed\n[root@localhost /]# lvs\nLV VG Attr LSize Pool Origin Data% Move Log Cpy%Sync Convert\nlv_root VolGroup -wi-ao---- 17.51g\nlv_swap VolGroup -wi-ao---- 2.00g\n```\n### \n\n#### \n```\ne2fsck /dev/vgxiemx/lv1\n\n[root@localhost /]# e2fsck -f /dev/vgxiemx/lv1\ne2fsck 1.41.12 (17-May-2010)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/dev/vgxiemx/lv1: 11/655360 files (0.0% non-contiguous), 79696/2619392 blocks\n```\n#### \n```\nresize2fs /dev/vgxiemx/lv1 9000M\n\n[root@localhost /]# resize2fs /dev/vgxiemx/lv1 9000M\nresize2fs 1.41.12 (17-May-2010)\nResizing the filesystem on /dev/vgxiemx/lv1 to 2304000 (4k) blocks.\nThe filesystem on /dev/vgxiemx/lv1 is now 2304000 blocks long.\n```\n ","slug":"linux-lvm","updated":"2019-10-21T06:57:42.989Z","photos":[],"link":"","_id":"ck42dyijp00jzu9uruvjqylwh","content":"<p>lvmlvmlvvgpv</p>\n<p>pv<br>vg<br>lv<br>peblock</p>\n<p>lvm</p>\n<h2 id=\"lvm\"><a href=\"#lvm\" class=\"headerlink\" title=\"lvm\"></a>lvm</h2><ol>\n<li><p></p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">fdisk</span> dev/vda</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">partx  -<span class=\"selector-tag\">a</span>   /dev/vda</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>pv</p>\n<figure class=\"highlight irpf90\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pvcreate dev/vda1  </span><br><span class=\"line\"></span><br><span class=\"line\">pvspvdisplaypv</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# pvs</span><br><span class=\"line\">PV VG <span class=\"keyword\">Fmt</span> Attr PSize PFree</span><br><span class=\"line\">/dev/sda2 VolGroup lvm2 a-- <span class=\"number\">19.</span>1g <span class=\"number\">0</span></span><br><span class=\"line\">/dev/sdb lvm2 a-- <span class=\"number\">10.</span>0g <span class=\"number\">10.</span>0g</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# pvdisplay</span><br><span class=\"line\">--- Physical volume ---</span><br><span class=\"line\">PV <span class=\"keyword\">Name</span>               /dev/sda2</span><br><span class=\"line\">VG <span class=\"keyword\">Name</span>               VolGroup</span><br><span class=\"line\">PV <span class=\"built_in\">Size</span>               <span class=\"number\">19.51</span> GiB / not usable <span class=\"number\">3.00</span> MiB</span><br><span class=\"line\"><span class=\"keyword\">Allocatable</span>           yes (but full)</span><br><span class=\"line\">PE <span class=\"built_in\">Size</span>               <span class=\"number\">4.00</span> MiB</span><br><span class=\"line\">Total PE              <span class=\"number\">4994</span></span><br><span class=\"line\"><span class=\"keyword\">Free</span> PE               <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"built_in\">Allocated</span> PE          <span class=\"number\">4994</span></span><br><span class=\"line\">PV UUID               fcQLJh-oq2G-adfr-QeEK-sdtl-XND-m1YtPA</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">\"/dev/sdb\"</span> is a new physical volume of <span class=\"string\">\"10.00 GiB\"</span></span><br><span class=\"line\">--- NEW Physical volume ---</span><br><span class=\"line\">PV <span class=\"keyword\">Name</span>               /dev/sdb</span><br><span class=\"line\">VG <span class=\"keyword\">Name</span></span><br><span class=\"line\">PV <span class=\"built_in\">Size</span>               <span class=\"number\">10.00</span> GiB</span><br><span class=\"line\"><span class=\"keyword\">Allocatable</span>           NO</span><br><span class=\"line\">PE <span class=\"built_in\">Size</span>               <span class=\"number\">0</span></span><br><span class=\"line\">Total PE              <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">Free</span> PE               <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"built_in\">Allocated</span> PE          <span class=\"number\">0</span></span><br><span class=\"line\">PV UUID               WQpkNi-cN6-QogB-TLB2-R2wT-Agmh-BRBiUN</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>vg</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vgcreate  -s <span class=\"number\">8</span>M vgname /dev/vda1  /dev/vda2   spe<span class=\"number\">4</span>M</span><br><span class=\"line\"></span><br><span class=\"line\">vgsvgdisplayvg</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# vgcreate -s <span class=\"number\">8</span>M vgxiemx /dev/sdb</span><br><span class=\"line\">Volume group <span class=\"string\">\"vgxiemx\"</span> successfully created</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# vgs</span><br><span class=\"line\">VG       #PV #LV #SN Attr   VSize  VFree</span><br><span class=\"line\">VolGroup   <span class=\"number\">1</span>   <span class=\"number\">2</span>   <span class=\"number\">0</span> wz--n- <span class=\"number\">19.51</span>g    <span class=\"number\">0</span></span><br><span class=\"line\">vgxiemx    <span class=\"number\">1</span>   <span class=\"number\">0</span>   <span class=\"number\">0</span> wz--n-  <span class=\"number\">9.99</span>g <span class=\"number\">9.99</span>g</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# vgdisplay</span><br><span class=\"line\">--- Volume group ---</span><br><span class=\"line\">VG Name               vgxiemx</span><br><span class=\"line\">System ID</span><br><span class=\"line\">Format                lvm2</span><br><span class=\"line\">Metadata Areas        <span class=\"number\">1</span></span><br><span class=\"line\">Metadata Sequence No  <span class=\"number\">1</span></span><br><span class=\"line\">VG Access             read/write</span><br><span class=\"line\">VG Status             resizable</span><br><span class=\"line\">MAX LV                <span class=\"number\">0</span></span><br><span class=\"line\">Cur LV                <span class=\"number\">0</span></span><br><span class=\"line\">Open LV               <span class=\"number\">0</span></span><br><span class=\"line\">Max PV                <span class=\"number\">0</span></span><br><span class=\"line\">Cur PV                <span class=\"number\">1</span></span><br><span class=\"line\">Act PV                <span class=\"number\">1</span></span><br><span class=\"line\">VG Size               <span class=\"number\">9.99</span> GiB</span><br><span class=\"line\">PE Size               <span class=\"number\">8.00</span> MiB</span><br><span class=\"line\">Total PE              <span class=\"number\">1279</span></span><br><span class=\"line\">Alloc PE / Size       <span class=\"number\">0</span> / <span class=\"number\">0</span></span><br><span class=\"line\">Free  PE / Size       <span class=\"number\">1279</span> / <span class=\"number\">9.99</span> GiB</span><br><span class=\"line\">VG UUID               <span class=\"number\">5</span>WZfct-snfo-aEDl-gHuO-QDbz-v83j-L0lwmR</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>lv</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lvcreate -l <span class=\"number\">100</span> -n lvname vgnamel<span class=\"number\">100</span>pelv nvg</span><br><span class=\"line\"></span><br><span class=\"line\">lvcreate -L1000M -n lvname vgnameLK M GLlman</span><br><span class=\"line\"></span><br><span class=\"line\">lvslvdisplaylv</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# lvcreate -n lv1 -l <span class=\"number\">1279</span> vgxiemx</span><br><span class=\"line\">Logical volume <span class=\"string\">\"lv1\"</span> created</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# lvs</span><br><span class=\"line\">LV VG Attr LSize Pool Origin Data% Move Log Cpy%Sync Convert</span><br><span class=\"line\">lv_root VolGroup -wi-ao---- <span class=\"number\">17.51</span>g</span><br><span class=\"line\">lv_swap VolGroup -wi-ao---- <span class=\"number\">2.00</span>g</span><br><span class=\"line\">lv1 vgxiemx -wi-a----- <span class=\"number\">9.99</span>g</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# lvdisplay</span><br><span class=\"line\">--- Logical volume ---</span><br><span class=\"line\">LV Path /dev/vgxiemx/lv1</span><br><span class=\"line\">LV Name lv1</span><br><span class=\"line\">VG Name vgxiemx</span><br><span class=\"line\">LV UUID nViafR-nrnS-REMQ-bGOT-uhDe-Skd0-XUNwmU</span><br><span class=\"line\">LV Write Access read/write</span><br><span class=\"line\">LV Creation host, time localhost.localdomain, <span class=\"number\">2015</span><span class=\"number\">-11</span><span class=\"number\">-22</span> <span class=\"number\">01</span>:<span class=\"number\">50</span>:<span class=\"number\">41</span> +<span class=\"number\">0800</span></span><br><span class=\"line\">LV Status available</span><br><span class=\"line\"># open <span class=\"number\">0</span></span><br><span class=\"line\">LV Size <span class=\"number\">9.99</span> GiB</span><br><span class=\"line\">Current LE <span class=\"number\">1279</span></span><br><span class=\"line\">Segments <span class=\"number\">1</span></span><br><span class=\"line\">Allocation inherit</span><br><span class=\"line\">Read ahead sectors <span class=\"built_in\">auto</span></span><br><span class=\"line\">- currently <span class=\"keyword\">set</span> to <span class=\"number\">256</span></span><br><span class=\"line\">Block device <span class=\"number\">253</span>:<span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkfs.ext3  /dev/vgname/lvname </span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# mkfs -t ext3 /dev/vgxiemx/lv1</span><br><span class=\"line\">mke2fs 1.41.12 (17-May-2010)</span><br><span class=\"line\">Filesystem label=</span><br><span class=\"line\">OS type: Linux</span><br><span class=\"line\">Block <span class=\"attribute\">size</span>=4096 (<span class=\"attribute\">log</span>=2)</span><br><span class=\"line\">Fragment <span class=\"attribute\">size</span>=4096 (<span class=\"attribute\">log</span>=2)</span><br><span class=\"line\"><span class=\"attribute\">Stride</span>=0 blocks, Stripe <span class=\"attribute\">width</span>=0 blocks</span><br><span class=\"line\">655360 inodes, 2619392 blocks</span><br><span class=\"line\">130969 blocks (5.00%) reserved <span class=\"keyword\">for</span> the super user</span><br><span class=\"line\">First data <span class=\"attribute\">block</span>=0</span><br><span class=\"line\">Maximum filesystem <span class=\"attribute\">blocks</span>=2684354560</span><br><span class=\"line\">80 block groups</span><br><span class=\"line\">32768 blocks per group, 32768 fragments per group</span><br><span class=\"line\">8192 inodes per group</span><br><span class=\"line\">Superblock backups stored on blocks:</span><br><span class=\"line\">32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632</span><br><span class=\"line\"></span><br><span class=\"line\">Writing inode tables: done</span><br><span class=\"line\">Creating journal (32768 blocks): done</span><br><span class=\"line\">Writing superblocks <span class=\"keyword\">and</span> filesystem<span class=\"built_in\"> accounting </span>information: done</span><br><span class=\"line\"></span><br><span class=\"line\">This filesystem will be automatically checked every 30 mounts <span class=\"keyword\">or</span></span><br><span class=\"line\">180 days, whichever comes first.  Use tune2fs -c <span class=\"keyword\">or</span> -i <span class=\"keyword\">to</span> override.</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>lv</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mount /dev/vgname/lvname  /mnt</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# mount /dev/vgxiemx/lv1 /mnt</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost mnt]# df -l</span><br><span class=\"line\">Filesystem <span class=\"number\">1</span>K-blocks Used Available Use% Mounted on</span><br><span class=\"line\">/dev/mapper/VolGroup-lv_root <span class=\"number\">18069936</span> <span class=\"number\">6767876</span> <span class=\"number\">10384148</span> <span class=\"number\">40</span>% /</span><br><span class=\"line\">tmpfs <span class=\"number\">953788</span> <span class=\"number\">72</span> <span class=\"number\">953716</span> <span class=\"number\">1</span>% /dev/shm</span><br><span class=\"line\">/dev/sda1 <span class=\"number\">495844</span> <span class=\"number\">39915</span> <span class=\"number\">430329</span> <span class=\"number\">9</span>% /boot</span><br><span class=\"line\">/dev/mapper/vgxiemx-lv1 <span class=\"number\">10313016</span> <span class=\"number\">154232</span> <span class=\"number\">9634908</span> <span class=\"number\">2</span>% /mnt</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h2 id=\"lvm\"><a href=\"#lvm\" class=\"headerlink\" title=\"lvm\"></a>lvm</h2><h3 id=\"pv\"><a href=\"#pv\" class=\"headerlink\" title=\"pv\"></a>pv</h3><h4 id=\"pv\"><a href=\"#pv\" class=\"headerlink\" title=\"pv\"></a>pv</h4><p>pvpv</p>\n<h4 id=\"pv\"><a href=\"#pv\" class=\"headerlink\" title=\"pv\"></a>pv</h4><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">pvremove</span> /dev/vdb</span><br><span class=\"line\"></span><br><span class=\"line\">[root<span class=\"variable\">@localhost</span> /]<span class=\"comment\"># pvremove /dev/sdb</span></span><br><span class=\"line\">Labels <span class=\"literal\">on</span> physical volume <span class=\"string\">\"/dev/sdb\"</span> successfully wiped</span><br><span class=\"line\">[root<span class=\"variable\">@localhost</span> /]<span class=\"comment\"># pvs</span></span><br><span class=\"line\">PV VG Fmt Attr PSize PFree</span><br><span class=\"line\">/dev/sda2 VolGroup lvm2 a-- <span class=\"number\">19</span>.<span class=\"number\">51g</span> <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"pv\"><a href=\"#pv\" class=\"headerlink\" title=\"pv\"></a>pv</h4><p>pv/dev/sdb11G/dev/sdb2pv/dev/sdb1</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pvremove /dev/sdb1 /dev/sdb2</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost mnt]# pvs</span><br><span class=\"line\">PV         VG       Fmt  Attr PSize  PFree</span><br><span class=\"line\">/dev/sda2  VolGroup lvm2 a--  <span class=\"number\">19.51</span>g    <span class=\"number\">0</span></span><br><span class=\"line\">/dev/sdb1  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">8.00</span>m</span><br><span class=\"line\">/dev/sdb2  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb3  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb5           lvm2 a--   <span class=\"number\">2.01</span>g <span class=\"number\">2.01</span>g</span><br><span class=\"line\">/dev/sdb6           lvm2 a--   <span class=\"number\">4.96</span>g <span class=\"number\">4.96</span>g</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost mnt]# pvmove /dev/sdb1 /dev/sdb2</span><br><span class=\"line\">/dev/sdb1: Moved: <span class=\"number\">1.6</span>%</span><br><span class=\"line\">/dev/sdb1: Moved: <span class=\"number\">45.3</span>%</span><br><span class=\"line\">/dev/sdb1: Moved: <span class=\"number\">89.8</span>%</span><br><span class=\"line\">/dev/sdb1: Moved: <span class=\"number\">100.0</span>%</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost mnt]# pvs</span><br><span class=\"line\">PV         VG       Fmt  Attr PSize  PFree</span><br><span class=\"line\">/dev/sda2  VolGroup lvm2 a--  <span class=\"number\">19.51</span>g    <span class=\"number\">0</span></span><br><span class=\"line\">/dev/sdb1  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb2  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">8.00</span>m</span><br><span class=\"line\">/dev/sdb3  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb5           lvm2 a--   <span class=\"number\">2.01</span>g <span class=\"number\">2.01</span>g</span><br><span class=\"line\">/dev/sdb6           lvm2 a--   <span class=\"number\">4.96</span>g <span class=\"number\">4.96</span>g</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"vg\"><a href=\"#vg\" class=\"headerlink\" title=\"vg\"></a>vg</h3><h4 id=\"vg\"><a href=\"#vg\" class=\"headerlink\" title=\"vg\"></a>vg</h4><p>vgpvvgvgpvvg</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vgextend  /dev/sdb5  vgxiemx</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# pvs</span><br><span class=\"line\">PV VG Fmt Attr PSize PFree</span><br><span class=\"line\">/dev/sda2 VolGroup lvm2 a-- <span class=\"number\">19.51</span>g <span class=\"number\">0</span></span><br><span class=\"line\">/dev/sdb1 vgxiemx lvm2 a-- <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb2 vgxiemx lvm2 a-- <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb3 vgxiemx lvm2 a-- <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb5                 lvm2 a-- <span class=\"number\">2.01</span>g <span class=\"number\">2.01</span>g</span><br><span class=\"line\">/dev/sdb6                 lvm2 a-- <span class=\"number\">4.96</span>g <span class=\"number\">4.96</span>g</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# vgextend vgxiemx /dev/sdb5</span><br><span class=\"line\">Volume group <span class=\"string\">\"vgxiemx\"</span> successfully extended</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# pvs</span><br><span class=\"line\">PV VG Fmt Attr PSize PFree</span><br><span class=\"line\">/dev/sda2 VolGroup lvm2 a-- <span class=\"number\">19.51</span>g <span class=\"number\">0</span></span><br><span class=\"line\">/dev/sdb1 vgxiemx lvm2 a-- <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb2 vgxiemx lvm2 a-- <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb3 vgxiemx lvm2 a-- <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb5 vgxiemx lvm2 a-- <span class=\"number\">2.00</span>g <span class=\"number\">2.00</span>g</span><br><span class=\"line\">/dev/sdb6                 lvm2 a-- <span class=\"number\">4.96</span>g <span class=\"number\">4.96</span>g</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"vg\"><a href=\"#vg\" class=\"headerlink\" title=\"vg\"></a>vg</h4><p>vgpvpvpvpepvpvpv</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vgreduce vgxiemx /dev/sdb5</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# pvs</span><br><span class=\"line\">PV         VG       Fmt  Attr PSize  PFree</span><br><span class=\"line\">/dev/sda2  VolGroup lvm2 a--  <span class=\"number\">19.51</span>g    <span class=\"number\">0</span></span><br><span class=\"line\">/dev/sdb1  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb2  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb3  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb5  vgxiemx  lvm2 a--   <span class=\"number\">2.00</span>g <span class=\"number\">2.00</span>g</span><br><span class=\"line\">/dev/sdb6           lvm2 a--   <span class=\"number\">4.96</span>g <span class=\"number\">4.96</span>g</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# vgreduce vgxiemx /dev/sdb5</span><br><span class=\"line\">Removed <span class=\"string\">\"/dev/sdb5\"</span> <span class=\"keyword\">from</span> volume group <span class=\"string\">\"vgxiemx\"</span></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# pvs</span><br><span class=\"line\">PV         VG       Fmt  Attr PSize  PFree</span><br><span class=\"line\">/dev/sda2  VolGroup lvm2 a--  <span class=\"number\">19.51</span>g    <span class=\"number\">0</span></span><br><span class=\"line\">/dev/sdb1  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb2  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb3  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb5           lvm2 a--   <span class=\"number\">2.01</span>g <span class=\"number\">2.01</span>g</span><br><span class=\"line\">/dev/sdb6           lvm2 a--   <span class=\"number\">4.96</span>g <span class=\"number\">4.96</span>g</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"vg\"><a href=\"#vg\" class=\"headerlink\" title=\"vg\"></a>vg</h4><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vgremove vgxiemx</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost /]# vgremove vgxiemx</span><br><span class=\"line\">Volume<span class=\"built_in\"> group </span><span class=\"string\">\"vgxiemx\"</span> successfully removed</span><br><span class=\"line\">[root@localhost /]# vgs</span><br><span class=\"line\">VG #PV #LV #SN Attr VSize VFree</span><br><span class=\"line\">VolGroup 1 2 0 wz--n- 19.51g 0</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"lv\"><a href=\"#lv\" class=\"headerlink\" title=\"lv\"></a>lv</h3><h4 id=\"lv\"><a href=\"#lv\" class=\"headerlink\" title=\"lv\"></a>lv</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lvreduce -L 9000M /dev/vgxiemx/lv1</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost /]<span class=\"comment\"># lvreduce -L 9000M /dev/vgxiemx/lv1</span></span><br><span class=\"line\">WARNING: Reducing active logical volume to 8.79 GiB</span><br><span class=\"line\">THIS MAY DESTROY YOUR DATA (filesystem etc.)</span><br><span class=\"line\"><span class=\"keyword\">Do</span> you really want <span class=\"keyword\">to</span> reduce lv1? [y/n]: y</span><br><span class=\"line\">Reducing <span class=\"keyword\">logical</span> volume lv1 <span class=\"keyword\">to</span> <span class=\"number\">8.79</span> GiB</span><br><span class=\"line\"><span class=\"keyword\">Logical</span> volume lv1 successfully resized</span><br><span class=\"line\">[root@localhost /]<span class=\"comment\"># lvs</span></span><br><span class=\"line\">LV VG <span class=\"keyword\">Attr</span> LSize Pool Origin <span class=\"keyword\">Data</span>% <span class=\"keyword\">Move</span> <span class=\"keyword\">Log</span> Cpy%<span class=\"keyword\">Sync</span> <span class=\"keyword\">Convert</span></span><br><span class=\"line\">lv_root VolGroup -wi-ao<span class=\"comment\">---- 17.51g</span></span><br><span class=\"line\">lv_swap VolGroup -wi-ao<span class=\"comment\">---- 2.00g</span></span><br><span class=\"line\">lv1 vgxiemx -wi-a<span class=\"comment\">----- 8.79g</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"lv\"><a href=\"#lv\" class=\"headerlink\" title=\"lv\"></a>lv</h4><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lvextend -L 10000M /dev/vgxiemx/lv1</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost /]# lvextend -L 10000M /dev/vgxiemx/lv1</span><br><span class=\"line\">Extending logical volume lv1 <span class=\"keyword\">to</span> 9.77 GiB</span><br><span class=\"line\">Logical volume lv1 successfully resized</span><br><span class=\"line\">[root@localhost /]# lvs</span><br><span class=\"line\">LV VG Attr LSize<span class=\"built_in\"> Pool </span>Origin Data% Move Log Cpy%Sync Convert</span><br><span class=\"line\">lv_root VolGroup -wi-ao---- 17.51g</span><br><span class=\"line\">lv_swap VolGroup -wi-ao---- 2.00g</span><br><span class=\"line\">lv1 vgxiemx -wi-a----- 9.77g</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"lv\"><a href=\"#lv\" class=\"headerlink\" title=\"lv\"></a>lv</h4><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lvremove /dev/vgxiemx/lv1</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost /]# lvremove /dev/vgxiemx/lv1</span><br><span class=\"line\"><span class=\"keyword\">Do</span> you really want <span class=\"keyword\">to</span> <span class=\"builtin-name\">remove</span> active logical volume lv1? [y/n]: y</span><br><span class=\"line\">Logical volume <span class=\"string\">\"lv1\"</span> successfully removed</span><br><span class=\"line\">[root@localhost /]# lvs</span><br><span class=\"line\">LV VG Attr LSize<span class=\"built_in\"> Pool </span>Origin Data% Move Log Cpy%Sync Convert</span><br><span class=\"line\">lv_root VolGroup -wi-ao---- 17.51g</span><br><span class=\"line\">lv_swap VolGroup -wi-ao---- 2.00g</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">e2fsck /dev/vgxiemx/lv1</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# e2fsck -f /dev/vgxiemx/lv1</span><br><span class=\"line\">e2fsck <span class=\"number\">1.41</span><span class=\"number\">.12</span> (<span class=\"number\">17</span>-May<span class=\"number\">-2010</span>)</span><br><span class=\"line\">Pass <span class=\"number\">1</span>: Checking inodes, blocks, <span class=\"keyword\">and</span> sizes</span><br><span class=\"line\">Pass <span class=\"number\">2</span>: Checking directory structure</span><br><span class=\"line\">Pass <span class=\"number\">3</span>: Checking directory connectivity</span><br><span class=\"line\">Pass <span class=\"number\">4</span>: Checking <span class=\"built_in\">ref</span>erence counts</span><br><span class=\"line\">Pass <span class=\"number\">5</span>: Checking group summary information</span><br><span class=\"line\">/dev/vgxiemx/lv1: <span class=\"number\">11</span>/<span class=\"number\">655360</span> files (<span class=\"number\">0.0</span>% non-contiguous), <span class=\"number\">79696</span>/<span class=\"number\">2619392</span> blocks</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">resize2fs /dev/vgxiemx/lv1 <span class=\"number\">9000</span>M</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# resize2fs /dev/vgxiemx/lv1 <span class=\"number\">9000</span>M</span><br><span class=\"line\">resize2fs <span class=\"number\">1.41</span><span class=\"number\">.12</span> (<span class=\"number\">17</span>-May<span class=\"number\">-2010</span>)</span><br><span class=\"line\">Resizing the filesystem on /dev/vgxiemx/lv1 to <span class=\"number\">2304000</span> (<span class=\"number\">4</span>k) blocks.</span><br><span class=\"line\">The filesystem on /dev/vgxiemx/lv1 <span class=\"keyword\">is</span> now <span class=\"number\">2304000</span> blocks long.</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p>lvmlvmlvvgpv</p>\n<p>pv<br>vg<br>lv<br>peblock</p>\n<p>lvm</p>\n<h2 id=\"lvm\"><a href=\"#lvm\" class=\"headerlink\" title=\"lvm\"></a>lvm</h2><ol>\n<li><p></p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">fdisk</span> dev/vda</span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">partx  -<span class=\"selector-tag\">a</span>   /dev/vda</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>pv</p>\n<figure class=\"highlight irpf90\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pvcreate dev/vda1  </span><br><span class=\"line\"></span><br><span class=\"line\">pvspvdisplaypv</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# pvs</span><br><span class=\"line\">PV VG <span class=\"keyword\">Fmt</span> Attr PSize PFree</span><br><span class=\"line\">/dev/sda2 VolGroup lvm2 a-- <span class=\"number\">19.</span>1g <span class=\"number\">0</span></span><br><span class=\"line\">/dev/sdb lvm2 a-- <span class=\"number\">10.</span>0g <span class=\"number\">10.</span>0g</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# pvdisplay</span><br><span class=\"line\">--- Physical volume ---</span><br><span class=\"line\">PV <span class=\"keyword\">Name</span>               /dev/sda2</span><br><span class=\"line\">VG <span class=\"keyword\">Name</span>               VolGroup</span><br><span class=\"line\">PV <span class=\"built_in\">Size</span>               <span class=\"number\">19.51</span> GiB / not usable <span class=\"number\">3.00</span> MiB</span><br><span class=\"line\"><span class=\"keyword\">Allocatable</span>           yes (but full)</span><br><span class=\"line\">PE <span class=\"built_in\">Size</span>               <span class=\"number\">4.00</span> MiB</span><br><span class=\"line\">Total PE              <span class=\"number\">4994</span></span><br><span class=\"line\"><span class=\"keyword\">Free</span> PE               <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"built_in\">Allocated</span> PE          <span class=\"number\">4994</span></span><br><span class=\"line\">PV UUID               fcQLJh-oq2G-adfr-QeEK-sdtl-XND-m1YtPA</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">\"/dev/sdb\"</span> is a new physical volume of <span class=\"string\">\"10.00 GiB\"</span></span><br><span class=\"line\">--- NEW Physical volume ---</span><br><span class=\"line\">PV <span class=\"keyword\">Name</span>               /dev/sdb</span><br><span class=\"line\">VG <span class=\"keyword\">Name</span></span><br><span class=\"line\">PV <span class=\"built_in\">Size</span>               <span class=\"number\">10.00</span> GiB</span><br><span class=\"line\"><span class=\"keyword\">Allocatable</span>           NO</span><br><span class=\"line\">PE <span class=\"built_in\">Size</span>               <span class=\"number\">0</span></span><br><span class=\"line\">Total PE              <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">Free</span> PE               <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"built_in\">Allocated</span> PE          <span class=\"number\">0</span></span><br><span class=\"line\">PV UUID               WQpkNi-cN6-QogB-TLB2-R2wT-Agmh-BRBiUN</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>vg</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vgcreate  -s <span class=\"number\">8</span>M vgname /dev/vda1  /dev/vda2   spe<span class=\"number\">4</span>M</span><br><span class=\"line\"></span><br><span class=\"line\">vgsvgdisplayvg</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# vgcreate -s <span class=\"number\">8</span>M vgxiemx /dev/sdb</span><br><span class=\"line\">Volume group <span class=\"string\">\"vgxiemx\"</span> successfully created</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# vgs</span><br><span class=\"line\">VG       #PV #LV #SN Attr   VSize  VFree</span><br><span class=\"line\">VolGroup   <span class=\"number\">1</span>   <span class=\"number\">2</span>   <span class=\"number\">0</span> wz--n- <span class=\"number\">19.51</span>g    <span class=\"number\">0</span></span><br><span class=\"line\">vgxiemx    <span class=\"number\">1</span>   <span class=\"number\">0</span>   <span class=\"number\">0</span> wz--n-  <span class=\"number\">9.99</span>g <span class=\"number\">9.99</span>g</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# vgdisplay</span><br><span class=\"line\">--- Volume group ---</span><br><span class=\"line\">VG Name               vgxiemx</span><br><span class=\"line\">System ID</span><br><span class=\"line\">Format                lvm2</span><br><span class=\"line\">Metadata Areas        <span class=\"number\">1</span></span><br><span class=\"line\">Metadata Sequence No  <span class=\"number\">1</span></span><br><span class=\"line\">VG Access             read/write</span><br><span class=\"line\">VG Status             resizable</span><br><span class=\"line\">MAX LV                <span class=\"number\">0</span></span><br><span class=\"line\">Cur LV                <span class=\"number\">0</span></span><br><span class=\"line\">Open LV               <span class=\"number\">0</span></span><br><span class=\"line\">Max PV                <span class=\"number\">0</span></span><br><span class=\"line\">Cur PV                <span class=\"number\">1</span></span><br><span class=\"line\">Act PV                <span class=\"number\">1</span></span><br><span class=\"line\">VG Size               <span class=\"number\">9.99</span> GiB</span><br><span class=\"line\">PE Size               <span class=\"number\">8.00</span> MiB</span><br><span class=\"line\">Total PE              <span class=\"number\">1279</span></span><br><span class=\"line\">Alloc PE / Size       <span class=\"number\">0</span> / <span class=\"number\">0</span></span><br><span class=\"line\">Free  PE / Size       <span class=\"number\">1279</span> / <span class=\"number\">9.99</span> GiB</span><br><span class=\"line\">VG UUID               <span class=\"number\">5</span>WZfct-snfo-aEDl-gHuO-QDbz-v83j-L0lwmR</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>lv</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lvcreate -l <span class=\"number\">100</span> -n lvname vgnamel<span class=\"number\">100</span>pelv nvg</span><br><span class=\"line\"></span><br><span class=\"line\">lvcreate -L1000M -n lvname vgnameLK M GLlman</span><br><span class=\"line\"></span><br><span class=\"line\">lvslvdisplaylv</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# lvcreate -n lv1 -l <span class=\"number\">1279</span> vgxiemx</span><br><span class=\"line\">Logical volume <span class=\"string\">\"lv1\"</span> created</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# lvs</span><br><span class=\"line\">LV VG Attr LSize Pool Origin Data% Move Log Cpy%Sync Convert</span><br><span class=\"line\">lv_root VolGroup -wi-ao---- <span class=\"number\">17.51</span>g</span><br><span class=\"line\">lv_swap VolGroup -wi-ao---- <span class=\"number\">2.00</span>g</span><br><span class=\"line\">lv1 vgxiemx -wi-a----- <span class=\"number\">9.99</span>g</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# lvdisplay</span><br><span class=\"line\">--- Logical volume ---</span><br><span class=\"line\">LV Path /dev/vgxiemx/lv1</span><br><span class=\"line\">LV Name lv1</span><br><span class=\"line\">VG Name vgxiemx</span><br><span class=\"line\">LV UUID nViafR-nrnS-REMQ-bGOT-uhDe-Skd0-XUNwmU</span><br><span class=\"line\">LV Write Access read/write</span><br><span class=\"line\">LV Creation host, time localhost.localdomain, <span class=\"number\">2015</span><span class=\"number\">-11</span><span class=\"number\">-22</span> <span class=\"number\">01</span>:<span class=\"number\">50</span>:<span class=\"number\">41</span> +<span class=\"number\">0800</span></span><br><span class=\"line\">LV Status available</span><br><span class=\"line\"># open <span class=\"number\">0</span></span><br><span class=\"line\">LV Size <span class=\"number\">9.99</span> GiB</span><br><span class=\"line\">Current LE <span class=\"number\">1279</span></span><br><span class=\"line\">Segments <span class=\"number\">1</span></span><br><span class=\"line\">Allocation inherit</span><br><span class=\"line\">Read ahead sectors <span class=\"built_in\">auto</span></span><br><span class=\"line\">- currently <span class=\"keyword\">set</span> to <span class=\"number\">256</span></span><br><span class=\"line\">Block device <span class=\"number\">253</span>:<span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p></p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkfs.ext3  /dev/vgname/lvname </span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost ~]# mkfs -t ext3 /dev/vgxiemx/lv1</span><br><span class=\"line\">mke2fs 1.41.12 (17-May-2010)</span><br><span class=\"line\">Filesystem label=</span><br><span class=\"line\">OS type: Linux</span><br><span class=\"line\">Block <span class=\"attribute\">size</span>=4096 (<span class=\"attribute\">log</span>=2)</span><br><span class=\"line\">Fragment <span class=\"attribute\">size</span>=4096 (<span class=\"attribute\">log</span>=2)</span><br><span class=\"line\"><span class=\"attribute\">Stride</span>=0 blocks, Stripe <span class=\"attribute\">width</span>=0 blocks</span><br><span class=\"line\">655360 inodes, 2619392 blocks</span><br><span class=\"line\">130969 blocks (5.00%) reserved <span class=\"keyword\">for</span> the super user</span><br><span class=\"line\">First data <span class=\"attribute\">block</span>=0</span><br><span class=\"line\">Maximum filesystem <span class=\"attribute\">blocks</span>=2684354560</span><br><span class=\"line\">80 block groups</span><br><span class=\"line\">32768 blocks per group, 32768 fragments per group</span><br><span class=\"line\">8192 inodes per group</span><br><span class=\"line\">Superblock backups stored on blocks:</span><br><span class=\"line\">32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632</span><br><span class=\"line\"></span><br><span class=\"line\">Writing inode tables: done</span><br><span class=\"line\">Creating journal (32768 blocks): done</span><br><span class=\"line\">Writing superblocks <span class=\"keyword\">and</span> filesystem<span class=\"built_in\"> accounting </span>information: done</span><br><span class=\"line\"></span><br><span class=\"line\">This filesystem will be automatically checked every 30 mounts <span class=\"keyword\">or</span></span><br><span class=\"line\">180 days, whichever comes first.  Use tune2fs -c <span class=\"keyword\">or</span> -i <span class=\"keyword\">to</span> override.</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>lv</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mount /dev/vgname/lvname  /mnt</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# mount /dev/vgxiemx/lv1 /mnt</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost mnt]# df -l</span><br><span class=\"line\">Filesystem <span class=\"number\">1</span>K-blocks Used Available Use% Mounted on</span><br><span class=\"line\">/dev/mapper/VolGroup-lv_root <span class=\"number\">18069936</span> <span class=\"number\">6767876</span> <span class=\"number\">10384148</span> <span class=\"number\">40</span>% /</span><br><span class=\"line\">tmpfs <span class=\"number\">953788</span> <span class=\"number\">72</span> <span class=\"number\">953716</span> <span class=\"number\">1</span>% /dev/shm</span><br><span class=\"line\">/dev/sda1 <span class=\"number\">495844</span> <span class=\"number\">39915</span> <span class=\"number\">430329</span> <span class=\"number\">9</span>% /boot</span><br><span class=\"line\">/dev/mapper/vgxiemx-lv1 <span class=\"number\">10313016</span> <span class=\"number\">154232</span> <span class=\"number\">9634908</span> <span class=\"number\">2</span>% /mnt</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h2 id=\"lvm\"><a href=\"#lvm\" class=\"headerlink\" title=\"lvm\"></a>lvm</h2><h3 id=\"pv\"><a href=\"#pv\" class=\"headerlink\" title=\"pv\"></a>pv</h3><h4 id=\"pv\"><a href=\"#pv\" class=\"headerlink\" title=\"pv\"></a>pv</h4><p>pvpv</p>\n<h4 id=\"pv\"><a href=\"#pv\" class=\"headerlink\" title=\"pv\"></a>pv</h4><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">pvremove</span> /dev/vdb</span><br><span class=\"line\"></span><br><span class=\"line\">[root<span class=\"variable\">@localhost</span> /]<span class=\"comment\"># pvremove /dev/sdb</span></span><br><span class=\"line\">Labels <span class=\"literal\">on</span> physical volume <span class=\"string\">\"/dev/sdb\"</span> successfully wiped</span><br><span class=\"line\">[root<span class=\"variable\">@localhost</span> /]<span class=\"comment\"># pvs</span></span><br><span class=\"line\">PV VG Fmt Attr PSize PFree</span><br><span class=\"line\">/dev/sda2 VolGroup lvm2 a-- <span class=\"number\">19</span>.<span class=\"number\">51g</span> <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"pv\"><a href=\"#pv\" class=\"headerlink\" title=\"pv\"></a>pv</h4><p>pv/dev/sdb11G/dev/sdb2pv/dev/sdb1</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pvremove /dev/sdb1 /dev/sdb2</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost mnt]# pvs</span><br><span class=\"line\">PV         VG       Fmt  Attr PSize  PFree</span><br><span class=\"line\">/dev/sda2  VolGroup lvm2 a--  <span class=\"number\">19.51</span>g    <span class=\"number\">0</span></span><br><span class=\"line\">/dev/sdb1  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">8.00</span>m</span><br><span class=\"line\">/dev/sdb2  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb3  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb5           lvm2 a--   <span class=\"number\">2.01</span>g <span class=\"number\">2.01</span>g</span><br><span class=\"line\">/dev/sdb6           lvm2 a--   <span class=\"number\">4.96</span>g <span class=\"number\">4.96</span>g</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost mnt]# pvmove /dev/sdb1 /dev/sdb2</span><br><span class=\"line\">/dev/sdb1: Moved: <span class=\"number\">1.6</span>%</span><br><span class=\"line\">/dev/sdb1: Moved: <span class=\"number\">45.3</span>%</span><br><span class=\"line\">/dev/sdb1: Moved: <span class=\"number\">89.8</span>%</span><br><span class=\"line\">/dev/sdb1: Moved: <span class=\"number\">100.0</span>%</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost mnt]# pvs</span><br><span class=\"line\">PV         VG       Fmt  Attr PSize  PFree</span><br><span class=\"line\">/dev/sda2  VolGroup lvm2 a--  <span class=\"number\">19.51</span>g    <span class=\"number\">0</span></span><br><span class=\"line\">/dev/sdb1  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb2  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">8.00</span>m</span><br><span class=\"line\">/dev/sdb3  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb5           lvm2 a--   <span class=\"number\">2.01</span>g <span class=\"number\">2.01</span>g</span><br><span class=\"line\">/dev/sdb6           lvm2 a--   <span class=\"number\">4.96</span>g <span class=\"number\">4.96</span>g</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"vg\"><a href=\"#vg\" class=\"headerlink\" title=\"vg\"></a>vg</h3><h4 id=\"vg\"><a href=\"#vg\" class=\"headerlink\" title=\"vg\"></a>vg</h4><p>vgpvvgvgpvvg</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vgextend  /dev/sdb5  vgxiemx</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# pvs</span><br><span class=\"line\">PV VG Fmt Attr PSize PFree</span><br><span class=\"line\">/dev/sda2 VolGroup lvm2 a-- <span class=\"number\">19.51</span>g <span class=\"number\">0</span></span><br><span class=\"line\">/dev/sdb1 vgxiemx lvm2 a-- <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb2 vgxiemx lvm2 a-- <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb3 vgxiemx lvm2 a-- <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb5                 lvm2 a-- <span class=\"number\">2.01</span>g <span class=\"number\">2.01</span>g</span><br><span class=\"line\">/dev/sdb6                 lvm2 a-- <span class=\"number\">4.96</span>g <span class=\"number\">4.96</span>g</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# vgextend vgxiemx /dev/sdb5</span><br><span class=\"line\">Volume group <span class=\"string\">\"vgxiemx\"</span> successfully extended</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# pvs</span><br><span class=\"line\">PV VG Fmt Attr PSize PFree</span><br><span class=\"line\">/dev/sda2 VolGroup lvm2 a-- <span class=\"number\">19.51</span>g <span class=\"number\">0</span></span><br><span class=\"line\">/dev/sdb1 vgxiemx lvm2 a-- <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb2 vgxiemx lvm2 a-- <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb3 vgxiemx lvm2 a-- <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb5 vgxiemx lvm2 a-- <span class=\"number\">2.00</span>g <span class=\"number\">2.00</span>g</span><br><span class=\"line\">/dev/sdb6                 lvm2 a-- <span class=\"number\">4.96</span>g <span class=\"number\">4.96</span>g</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"vg\"><a href=\"#vg\" class=\"headerlink\" title=\"vg\"></a>vg</h4><p>vgpvpvpvpepvpvpv</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vgreduce vgxiemx /dev/sdb5</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# pvs</span><br><span class=\"line\">PV         VG       Fmt  Attr PSize  PFree</span><br><span class=\"line\">/dev/sda2  VolGroup lvm2 a--  <span class=\"number\">19.51</span>g    <span class=\"number\">0</span></span><br><span class=\"line\">/dev/sdb1  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb2  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb3  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb5  vgxiemx  lvm2 a--   <span class=\"number\">2.00</span>g <span class=\"number\">2.00</span>g</span><br><span class=\"line\">/dev/sdb6           lvm2 a--   <span class=\"number\">4.96</span>g <span class=\"number\">4.96</span>g</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# vgreduce vgxiemx /dev/sdb5</span><br><span class=\"line\">Removed <span class=\"string\">\"/dev/sdb5\"</span> <span class=\"keyword\">from</span> volume group <span class=\"string\">\"vgxiemx\"</span></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# pvs</span><br><span class=\"line\">PV         VG       Fmt  Attr PSize  PFree</span><br><span class=\"line\">/dev/sda2  VolGroup lvm2 a--  <span class=\"number\">19.51</span>g    <span class=\"number\">0</span></span><br><span class=\"line\">/dev/sdb1  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb2  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb3  vgxiemx  lvm2 a--   <span class=\"number\">1.01</span>g <span class=\"number\">1.01</span>g</span><br><span class=\"line\">/dev/sdb5           lvm2 a--   <span class=\"number\">2.01</span>g <span class=\"number\">2.01</span>g</span><br><span class=\"line\">/dev/sdb6           lvm2 a--   <span class=\"number\">4.96</span>g <span class=\"number\">4.96</span>g</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"vg\"><a href=\"#vg\" class=\"headerlink\" title=\"vg\"></a>vg</h4><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vgremove vgxiemx</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost /]# vgremove vgxiemx</span><br><span class=\"line\">Volume<span class=\"built_in\"> group </span><span class=\"string\">\"vgxiemx\"</span> successfully removed</span><br><span class=\"line\">[root@localhost /]# vgs</span><br><span class=\"line\">VG #PV #LV #SN Attr VSize VFree</span><br><span class=\"line\">VolGroup 1 2 0 wz--n- 19.51g 0</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"lv\"><a href=\"#lv\" class=\"headerlink\" title=\"lv\"></a>lv</h3><h4 id=\"lv\"><a href=\"#lv\" class=\"headerlink\" title=\"lv\"></a>lv</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lvreduce -L 9000M /dev/vgxiemx/lv1</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost /]<span class=\"comment\"># lvreduce -L 9000M /dev/vgxiemx/lv1</span></span><br><span class=\"line\">WARNING: Reducing active logical volume to 8.79 GiB</span><br><span class=\"line\">THIS MAY DESTROY YOUR DATA (filesystem etc.)</span><br><span class=\"line\"><span class=\"keyword\">Do</span> you really want <span class=\"keyword\">to</span> reduce lv1? [y/n]: y</span><br><span class=\"line\">Reducing <span class=\"keyword\">logical</span> volume lv1 <span class=\"keyword\">to</span> <span class=\"number\">8.79</span> GiB</span><br><span class=\"line\"><span class=\"keyword\">Logical</span> volume lv1 successfully resized</span><br><span class=\"line\">[root@localhost /]<span class=\"comment\"># lvs</span></span><br><span class=\"line\">LV VG <span class=\"keyword\">Attr</span> LSize Pool Origin <span class=\"keyword\">Data</span>% <span class=\"keyword\">Move</span> <span class=\"keyword\">Log</span> Cpy%<span class=\"keyword\">Sync</span> <span class=\"keyword\">Convert</span></span><br><span class=\"line\">lv_root VolGroup -wi-ao<span class=\"comment\">---- 17.51g</span></span><br><span class=\"line\">lv_swap VolGroup -wi-ao<span class=\"comment\">---- 2.00g</span></span><br><span class=\"line\">lv1 vgxiemx -wi-a<span class=\"comment\">----- 8.79g</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"lv\"><a href=\"#lv\" class=\"headerlink\" title=\"lv\"></a>lv</h4><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lvextend -L 10000M /dev/vgxiemx/lv1</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost /]# lvextend -L 10000M /dev/vgxiemx/lv1</span><br><span class=\"line\">Extending logical volume lv1 <span class=\"keyword\">to</span> 9.77 GiB</span><br><span class=\"line\">Logical volume lv1 successfully resized</span><br><span class=\"line\">[root@localhost /]# lvs</span><br><span class=\"line\">LV VG Attr LSize<span class=\"built_in\"> Pool </span>Origin Data% Move Log Cpy%Sync Convert</span><br><span class=\"line\">lv_root VolGroup -wi-ao---- 17.51g</span><br><span class=\"line\">lv_swap VolGroup -wi-ao---- 2.00g</span><br><span class=\"line\">lv1 vgxiemx -wi-a----- 9.77g</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"lv\"><a href=\"#lv\" class=\"headerlink\" title=\"lv\"></a>lv</h4><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lvremove /dev/vgxiemx/lv1</span><br><span class=\"line\"></span><br><span class=\"line\">[root@localhost /]# lvremove /dev/vgxiemx/lv1</span><br><span class=\"line\"><span class=\"keyword\">Do</span> you really want <span class=\"keyword\">to</span> <span class=\"builtin-name\">remove</span> active logical volume lv1? [y/n]: y</span><br><span class=\"line\">Logical volume <span class=\"string\">\"lv1\"</span> successfully removed</span><br><span class=\"line\">[root@localhost /]# lvs</span><br><span class=\"line\">LV VG Attr LSize<span class=\"built_in\"> Pool </span>Origin Data% Move Log Cpy%Sync Convert</span><br><span class=\"line\">lv_root VolGroup -wi-ao---- 17.51g</span><br><span class=\"line\">lv_swap VolGroup -wi-ao---- 2.00g</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">e2fsck /dev/vgxiemx/lv1</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# e2fsck -f /dev/vgxiemx/lv1</span><br><span class=\"line\">e2fsck <span class=\"number\">1.41</span><span class=\"number\">.12</span> (<span class=\"number\">17</span>-May<span class=\"number\">-2010</span>)</span><br><span class=\"line\">Pass <span class=\"number\">1</span>: Checking inodes, blocks, <span class=\"keyword\">and</span> sizes</span><br><span class=\"line\">Pass <span class=\"number\">2</span>: Checking directory structure</span><br><span class=\"line\">Pass <span class=\"number\">3</span>: Checking directory connectivity</span><br><span class=\"line\">Pass <span class=\"number\">4</span>: Checking <span class=\"built_in\">ref</span>erence counts</span><br><span class=\"line\">Pass <span class=\"number\">5</span>: Checking group summary information</span><br><span class=\"line\">/dev/vgxiemx/lv1: <span class=\"number\">11</span>/<span class=\"number\">655360</span> files (<span class=\"number\">0.0</span>% non-contiguous), <span class=\"number\">79696</span>/<span class=\"number\">2619392</span> blocks</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">resize2fs /dev/vgxiemx/lv1 <span class=\"number\">9000</span>M</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost /]# resize2fs /dev/vgxiemx/lv1 <span class=\"number\">9000</span>M</span><br><span class=\"line\">resize2fs <span class=\"number\">1.41</span><span class=\"number\">.12</span> (<span class=\"number\">17</span>-May<span class=\"number\">-2010</span>)</span><br><span class=\"line\">Resizing the filesystem on /dev/vgxiemx/lv1 to <span class=\"number\">2304000</span> (<span class=\"number\">4</span>k) blocks.</span><br><span class=\"line\">The filesystem on /dev/vgxiemx/lv1 <span class=\"keyword\">is</span> now <span class=\"number\">2304000</span> blocks long.</span><br></pre></td></tr></table></figure>\n\n"},{"layout":"post","title":"Linux","published":1,"author":"xiemx","comments":1,"date":"2015-11-14T20:11:14.000Z","_content":"Linux\n  \nLinux  ls \n  \n pid ID pid pid Linux pid \n\n### \n  \n#### ps\n```\n[root@localhost ~]# ps aux\nUSER PID %CPU %MEM  VSZ  RSS TTY  STAT START  TIME COMMAND\nroot   1 0.0    0.0    19356  1540   ?    Ss    02:09     0:01 /sbin/init\nroot   2  0.0    0.0   0     0   ?    S      02:09 0:00  [kthreadd]\nroot   3   0.0     0.0   0     0      ? S     02:09 0:00 [migration/0]\n\n[root@localhost ~]# ps -ef\nUID  PID   PPID  C  STIME  TTY TIME    CMD\nroot   1     0      0   02:09    ? 00:00:01   /sbin/init\nroot 2 0      0  02:09    ?   00:00:00   [kthreadd]\nroot 3     2      0   02:09    ? 00:00:00 [migration/0]\n\n[root@localhost ~]# ps -le\nF S  UID PID PPID C  PRI  NI  ADDR  SZ  WCHAN TTY  TIME  CMD\n4 S  0   1 0   0 80   0    -    4839  poll_s  ? 00:00:01  init\n1 S   0 2 0    0  80 0    - 0 kthrea ? 00:00:00  kthreadd\n1 S 0 3 2  0  -40   -    - 0 migrat   ? 00:00:00 migration/0\n\nUSER  \nUID IDUser ID \nPID IDProcess ID \nPPID IDParent Process id \nSID IDSession id \n%CPU cpu \n%MEM  \nVSZ Virtual Size \nRSS  \nTTY tty \nSTAT STAT \nSTART  \nTIME cpu \nCOMMAND  \nNI (Nice) \nPRI (Priority)\nS D= R= S= T=/ Z=\n\n```\n\n#### top\n```\n[root@localhost ~]# top\ntop - 02:45:58 up 36 min, 4 users, load average: 0.00, 0.00, 0.00\nTasks: 175 total, 1 running, 174 sleeping, 0 stopped, 0 zombie\nCpu(s): 0.3%us, 0.3%sy, 0.0%ni, 99.3%id, 0.0%wa, 0.0%hi, 0.0%si, 0.0%st\nMem: 1907580k total, 528968k used, 1378612k free, 26060k buffers\nSwap: 2097144k total, 0k used, 2097144k free, 173020k cached\nPID USER PR  NI VIRT   RES  SHR S  %CPU %MEM TIME+ COMMAND\n2603 root 20  0   15028 1372 1000 R 0.3 0.1     0:00.21   top\n1 root 20 0   19356 1540  1228 S 0.0   0.1  0:01.04   init\n2 root   20 0 0 0 0 S  0.0    0.0 0:00.00  kthreadd\n\n\n1 515\nstat \ncpu  swap\n```\n\n#### \n  ```\n[root@localhost ~]# kill -l\n1) SIGHUP 2) SIGINT 3) SIGQUIT 4) SIGILL 5) SIGTRAP\n6) SIGABRT 7) SIGBUS 8) SIGFPE 9) SIGKILL 10) SIGUSR1\n11) SIGSEGV 12) SIGUSR2 13) SIGPIPE 14) SIGALRM 15) SIGTERM\n16) SIGSTKFLT 17) SIGCHLD 18) SIGCONT 19) SIGSTOP 20) SIGTSTP\n21) SIGTTIN 22) SIGTTOU 23) SIGURG 24) SIGXCPU 25) SIGXFSZ\n26) SIGVTALRM 27) SIGPROF 28) SIGWINCH 29) SIGIO 30) SIGPWR\n31) SIGSYS 34) SIGRTMIN 35) SIGRTMIN+1 36) SIGRTMIN+2 37) SIGRTMIN+3\n38) SIGRTMIN+4 39) SIGRTMIN+5 40) SIGRTMIN+6 41) SIGRTMIN+7 42) SIGRTMIN+8\n43) SIGRTMIN+9 44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13\n48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12\n53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9 56) SIGRTMAX-8 57) SIGRTMAX-7\n58) SIGRTMAX-6 59) SIGRTMAX-5 60) SIGRTMAX-4 61) SIGRTMAX-3 62) SIGRTMAX-2\n63) SIGRTMAX-1 64) SIGRTMAX\n```\nLinux64kill\n  \n1) SIGHUP\nreload\n2) SIGINT\n(interrupt), INTR(Ctrl-C)\n9) SIGKILL\n. \n15) SIGTERM\n(terminate), SIGKILLshellkillSIGKILL\n  kill -1 2205 PID2205 kill -9 2205 2205 kill -15 2205 220515bash9\n\n#### \n  \ncpunicerenice\n  \n-20~19 0\n\n\n```\nnice -n 10 vim  10vim\n[root@localhost ~]# ps -el | grep vim\nF S UID PID PPID C PRI NI ADDR SZ WCHAN TTY TIME CMD\n0 T 0 6891 2563 0 90 10 - 35930 signal pts/2 00:00:00 vim\n\nrenice -n -10 6891 6891-10\n[root@localhost ~]# renice -n -10 6891\n6891: old priority 10, new priority -10\n\nroot\n  \n[testuser@localhost root]$ renice -n 5 6925\n6925: old priority 0, new priority 5\n  \n[testuser@localhost root]$ renice -n 2 6925\nrenice: 6925: setpriority: Permission denied\n```\n#### /\n  \n\n  \n\n* command &\n* jobs l \n* fg %n n\n* bg %n n\n  \n%njobs -l pid\n\n\n```\nvim & vim\njobs -l \nfg %1 1\nbg %2  2\nctrl+z \n\n[root@localhost ~]# vim &\n[2] 6987\n  \n[root@localhost ~]# vi /etc/resolv.conf\n[3]+ Stopped vi /etc/resolv.conf\n\n[root@localhost ~]# jobs -l\n[1] 6891 Stopped nice -n 10 vim\n[2]- 6987 Stopped (tty output) vim\n[3]+ 6989 Stopped vi /etc/resolv.conf\n\n[root@localhost ~]# bg %2\n[2]- vim &\n\n[root@localhost ~]# fg %3\n```","source":"_posts/linux-process-manager.md","raw":"---\nlayout: post\ntitle: Linux\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2015-11-15 04:11:14\ntags: [ linux, tool]\ncategories:\n    - linux\n---\nLinux\n  \nLinux  ls \n  \n pid ID pid pid Linux pid \n\n### \n  \n#### ps\n```\n[root@localhost ~]# ps aux\nUSER PID %CPU %MEM  VSZ  RSS TTY  STAT START  TIME COMMAND\nroot   1 0.0    0.0    19356  1540   ?    Ss    02:09     0:01 /sbin/init\nroot   2  0.0    0.0   0     0   ?    S      02:09 0:00  [kthreadd]\nroot   3   0.0     0.0   0     0      ? S     02:09 0:00 [migration/0]\n\n[root@localhost ~]# ps -ef\nUID  PID   PPID  C  STIME  TTY TIME    CMD\nroot   1     0      0   02:09    ? 00:00:01   /sbin/init\nroot 2 0      0  02:09    ?   00:00:00   [kthreadd]\nroot 3     2      0   02:09    ? 00:00:00 [migration/0]\n\n[root@localhost ~]# ps -le\nF S  UID PID PPID C  PRI  NI  ADDR  SZ  WCHAN TTY  TIME  CMD\n4 S  0   1 0   0 80   0    -    4839  poll_s  ? 00:00:01  init\n1 S   0 2 0    0  80 0    - 0 kthrea ? 00:00:00  kthreadd\n1 S 0 3 2  0  -40   -    - 0 migrat   ? 00:00:00 migration/0\n\nUSER  \nUID IDUser ID \nPID IDProcess ID \nPPID IDParent Process id \nSID IDSession id \n%CPU cpu \n%MEM  \nVSZ Virtual Size \nRSS  \nTTY tty \nSTAT STAT \nSTART  \nTIME cpu \nCOMMAND  \nNI (Nice) \nPRI (Priority)\nS D= R= S= T=/ Z=\n\n```\n\n#### top\n```\n[root@localhost ~]# top\ntop - 02:45:58 up 36 min, 4 users, load average: 0.00, 0.00, 0.00\nTasks: 175 total, 1 running, 174 sleeping, 0 stopped, 0 zombie\nCpu(s): 0.3%us, 0.3%sy, 0.0%ni, 99.3%id, 0.0%wa, 0.0%hi, 0.0%si, 0.0%st\nMem: 1907580k total, 528968k used, 1378612k free, 26060k buffers\nSwap: 2097144k total, 0k used, 2097144k free, 173020k cached\nPID USER PR  NI VIRT   RES  SHR S  %CPU %MEM TIME+ COMMAND\n2603 root 20  0   15028 1372 1000 R 0.3 0.1     0:00.21   top\n1 root 20 0   19356 1540  1228 S 0.0   0.1  0:01.04   init\n2 root   20 0 0 0 0 S  0.0    0.0 0:00.00  kthreadd\n\n\n1 515\nstat \ncpu  swap\n```\n\n#### \n  ```\n[root@localhost ~]# kill -l\n1) SIGHUP 2) SIGINT 3) SIGQUIT 4) SIGILL 5) SIGTRAP\n6) SIGABRT 7) SIGBUS 8) SIGFPE 9) SIGKILL 10) SIGUSR1\n11) SIGSEGV 12) SIGUSR2 13) SIGPIPE 14) SIGALRM 15) SIGTERM\n16) SIGSTKFLT 17) SIGCHLD 18) SIGCONT 19) SIGSTOP 20) SIGTSTP\n21) SIGTTIN 22) SIGTTOU 23) SIGURG 24) SIGXCPU 25) SIGXFSZ\n26) SIGVTALRM 27) SIGPROF 28) SIGWINCH 29) SIGIO 30) SIGPWR\n31) SIGSYS 34) SIGRTMIN 35) SIGRTMIN+1 36) SIGRTMIN+2 37) SIGRTMIN+3\n38) SIGRTMIN+4 39) SIGRTMIN+5 40) SIGRTMIN+6 41) SIGRTMIN+7 42) SIGRTMIN+8\n43) SIGRTMIN+9 44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13\n48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12\n53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9 56) SIGRTMAX-8 57) SIGRTMAX-7\n58) SIGRTMAX-6 59) SIGRTMAX-5 60) SIGRTMAX-4 61) SIGRTMAX-3 62) SIGRTMAX-2\n63) SIGRTMAX-1 64) SIGRTMAX\n```\nLinux64kill\n  \n1) SIGHUP\nreload\n2) SIGINT\n(interrupt), INTR(Ctrl-C)\n9) SIGKILL\n. \n15) SIGTERM\n(terminate), SIGKILLshellkillSIGKILL\n  kill -1 2205 PID2205 kill -9 2205 2205 kill -15 2205 220515bash9\n\n#### \n  \ncpunicerenice\n  \n-20~19 0\n\n\n```\nnice -n 10 vim  10vim\n[root@localhost ~]# ps -el | grep vim\nF S UID PID PPID C PRI NI ADDR SZ WCHAN TTY TIME CMD\n0 T 0 6891 2563 0 90 10 - 35930 signal pts/2 00:00:00 vim\n\nrenice -n -10 6891 6891-10\n[root@localhost ~]# renice -n -10 6891\n6891: old priority 10, new priority -10\n\nroot\n  \n[testuser@localhost root]$ renice -n 5 6925\n6925: old priority 0, new priority 5\n  \n[testuser@localhost root]$ renice -n 2 6925\nrenice: 6925: setpriority: Permission denied\n```\n#### /\n  \n\n  \n\n* command &\n* jobs l \n* fg %n n\n* bg %n n\n  \n%njobs -l pid\n\n\n```\nvim & vim\njobs -l \nfg %1 1\nbg %2  2\nctrl+z \n\n[root@localhost ~]# vim &\n[2] 6987\n  \n[root@localhost ~]# vi /etc/resolv.conf\n[3]+ Stopped vi /etc/resolv.conf\n\n[root@localhost ~]# jobs -l\n[1] 6891 Stopped nice -n 10 vim\n[2]- 6987 Stopped (tty output) vim\n[3]+ 6989 Stopped vi /etc/resolv.conf\n\n[root@localhost ~]# bg %2\n[2]- vim &\n\n[root@localhost ~]# fg %3\n```","slug":"linux-process-manager","updated":"2019-10-21T06:57:43.011Z","photos":[],"link":"","_id":"ck42dyijr00k2u9ur95q8zsgu","content":"<p>Linux</p>\n<p>Linux  ls </p>\n<p> pid ID pid pid Linux pid </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"ps\"><a href=\"#ps\" class=\"headerlink\" title=\"ps\"></a>ps</h4><figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# ps aux</span><br><span class=\"line\">USER PID %CPU %MEM  VSZ  RSS TTY  STAT START  TIME COMMAND</span><br><span class=\"line\">root   <span class=\"number\">1</span> <span class=\"number\">0.0</span>    <span class=\"number\">0.0</span>    <span class=\"number\">19356</span>  <span class=\"number\">1540</span>   ?    Ss    <span class=\"number\">02</span>:<span class=\"number\">09</span>     <span class=\"number\">0</span>:<span class=\"number\">01</span> /sbin/init</span><br><span class=\"line\">root   <span class=\"number\">2</span>  <span class=\"number\">0.0</span>    <span class=\"number\">0.0</span>   <span class=\"number\">0</span>     <span class=\"number\">0</span>   ?    S      <span class=\"number\">02</span>:<span class=\"number\">09</span> <span class=\"number\">0</span>:<span class=\"number\">00</span>  [kthreadd]</span><br><span class=\"line\">root   <span class=\"number\">3</span>   <span class=\"number\">0.0</span>     <span class=\"number\">0.0</span>   <span class=\"number\">0</span>     <span class=\"number\">0</span>      ? S     <span class=\"number\">02</span>:<span class=\"number\">09</span> <span class=\"number\">0</span>:<span class=\"number\">00</span> [migration/<span class=\"number\">0</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# ps -ef</span><br><span class=\"line\">UID  PID   PPID  C  STIME  TTY TIME    CMD</span><br><span class=\"line\">root   <span class=\"number\">1</span>     <span class=\"number\">0</span>      <span class=\"number\">0</span>   <span class=\"number\">02</span>:<span class=\"number\">09</span>    ? <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">01</span>   /sbin/init</span><br><span class=\"line\">root <span class=\"number\">2</span> <span class=\"number\">0</span>      <span class=\"number\">0</span>  <span class=\"number\">02</span>:<span class=\"number\">09</span>    ?   <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   [kthreadd]</span><br><span class=\"line\">root <span class=\"number\">3</span>     <span class=\"number\">2</span>      <span class=\"number\">0</span>   <span class=\"number\">02</span>:<span class=\"number\">09</span>    ? <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> [migration/<span class=\"number\">0</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# ps -le</span><br><span class=\"line\">F S  UID PID PPID C  PRI  NI  ADDR  SZ  WCHAN TTY  TIME  CMD</span><br><span class=\"line\"><span class=\"number\">4</span> S  <span class=\"number\">0</span>   <span class=\"number\">1</span> <span class=\"number\">0</span>   <span class=\"number\">0</span> <span class=\"number\">80</span>   <span class=\"number\">0</span>    -    <span class=\"number\">4839</span>  poll_s  ? <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">01</span>  init</span><br><span class=\"line\"><span class=\"number\">1</span> S   <span class=\"number\">0</span> <span class=\"number\">2</span> <span class=\"number\">0</span>    <span class=\"number\">0</span>  <span class=\"number\">80</span> <span class=\"number\">0</span>    - <span class=\"number\">0</span> kthrea ? <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  kthreadd</span><br><span class=\"line\"><span class=\"number\">1</span> S <span class=\"number\">0</span> <span class=\"number\">3</span> <span class=\"number\">2</span>  <span class=\"number\">0</span>  <span class=\"number\">-40</span>   -    - <span class=\"number\">0</span> migrat   ? <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> migration/<span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">USER  </span><br><span class=\"line\">UID IDUser ID </span><br><span class=\"line\">PID IDProcess ID </span><br><span class=\"line\">PPID IDParent Process id </span><br><span class=\"line\">SID IDSession id </span><br><span class=\"line\">%CPU cpu </span><br><span class=\"line\">%MEM  </span><br><span class=\"line\">VSZ Virtual Size </span><br><span class=\"line\">RSS  </span><br><span class=\"line\">TTY tty </span><br><span class=\"line\">STAT STAT </span><br><span class=\"line\">START  </span><br><span class=\"line\">TIME cpu </span><br><span class=\"line\">COMMAND  </span><br><span class=\"line\">NI (Nice) </span><br><span class=\"line\">PRI (Priority)</span><br><span class=\"line\">S D= R= S= T=/ Z=</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"top\"><a href=\"#top\" class=\"headerlink\" title=\"top\"></a>top</h4><figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# top</span><br><span class=\"line\">top - <span class=\"number\">02</span>:<span class=\"number\">45</span>:<span class=\"number\">58</span> up <span class=\"number\">36</span> min, <span class=\"number\">4</span> users, load average: <span class=\"number\">0.00</span>, <span class=\"number\">0.00</span>, <span class=\"number\">0.00</span></span><br><span class=\"line\">Tasks: <span class=\"number\">175</span> total, <span class=\"number\">1</span> running, <span class=\"number\">174</span> sleeping, <span class=\"number\">0</span> stopped, <span class=\"number\">0</span> zombie</span><br><span class=\"line\">Cpu(s): <span class=\"number\">0.3</span>%us, <span class=\"number\">0.3</span>%sy, <span class=\"number\">0.0</span>%ni, <span class=\"number\">99.3</span>%id, <span class=\"number\">0.0</span>%wa, <span class=\"number\">0.0</span>%hi, <span class=\"number\">0.0</span>%si, <span class=\"number\">0.0</span>%st</span><br><span class=\"line\">Mem: <span class=\"number\">1907580</span>k total, <span class=\"number\">528968</span>k used, <span class=\"number\">1378612</span>k free, <span class=\"number\">26060</span>k buffers</span><br><span class=\"line\">Swap: <span class=\"number\">2097144</span>k total, <span class=\"number\">0</span>k used, <span class=\"number\">2097144</span>k free, <span class=\"number\">173020</span>k cached</span><br><span class=\"line\">PID USER PR  NI VIRT   RES  SHR S  %CPU %MEM TIME+ COMMAND</span><br><span class=\"line\"><span class=\"number\">2603</span> root <span class=\"number\">20</span>  <span class=\"number\">0</span>   <span class=\"number\">15028</span> <span class=\"number\">1372</span> <span class=\"number\">1000</span> R <span class=\"number\">0.3</span> <span class=\"number\">0.1</span>     <span class=\"number\">0</span>:<span class=\"number\">00.21</span>   top</span><br><span class=\"line\"><span class=\"number\">1</span> root <span class=\"number\">20</span> <span class=\"number\">0</span>   <span class=\"number\">19356</span> <span class=\"number\">1540</span>  <span class=\"number\">1228</span> S <span class=\"number\">0.0</span>   <span class=\"number\">0.1</span>  <span class=\"number\">0</span>:<span class=\"number\">01.04</span>   init</span><br><span class=\"line\"><span class=\"number\">2</span> root   <span class=\"number\">20</span> <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">0</span> S  <span class=\"number\">0.0</span>    <span class=\"number\">0.0</span> <span class=\"number\">0</span>:<span class=\"number\">00.00</span>  kthreadd</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"number\">5</span><span class=\"number\">15</span></span><br><span class=\"line\">stat </span><br><span class=\"line\">cpu  swap</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4>  <figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# kill -l</span><br><span class=\"line\"><span class=\"number\">1</span>) SIGHUP <span class=\"number\">2</span>) SIGINT <span class=\"number\">3</span>) SIGQUIT <span class=\"number\">4</span>) SIGILL <span class=\"number\">5</span>) SIGTRAP</span><br><span class=\"line\"><span class=\"number\">6</span>) SIGABRT <span class=\"number\">7</span>) SIGBUS <span class=\"number\">8</span>) SIGFPE <span class=\"number\">9</span>) SIGKILL <span class=\"number\">10</span>) SIGUSR1</span><br><span class=\"line\"><span class=\"number\">11</span>) SIGSEGV <span class=\"number\">12</span>) SIGUSR2 <span class=\"number\">13</span>) SIGPIPE <span class=\"number\">14</span>) SIGALRM <span class=\"number\">15</span>) SIGTERM</span><br><span class=\"line\"><span class=\"number\">16</span>) SIGSTKFLT <span class=\"number\">17</span>) SIGCHLD <span class=\"number\">18</span>) SIGCONT <span class=\"number\">19</span>) SIGSTOP <span class=\"number\">20</span>) SIGTSTP</span><br><span class=\"line\"><span class=\"number\">21</span>) SIGTTIN <span class=\"number\">22</span>) SIGTTOU <span class=\"number\">23</span>) SIGURG <span class=\"number\">24</span>) SIGXCPU <span class=\"number\">25</span>) SIGXFSZ</span><br><span class=\"line\"><span class=\"number\">26</span>) SIGVTALRM <span class=\"number\">27</span>) SIGPROF <span class=\"number\">28</span>) SIGWINCH <span class=\"number\">29</span>) SIGIO <span class=\"number\">30</span>) SIGPWR</span><br><span class=\"line\"><span class=\"number\">31</span>) SIGSYS <span class=\"number\">34</span>) SIGRTMIN <span class=\"number\">35</span>) SIGRTMIN+<span class=\"number\">1</span> <span class=\"number\">36</span>) SIGRTMIN+<span class=\"number\">2</span> <span class=\"number\">37</span>) SIGRTMIN+<span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">38</span>) SIGRTMIN+<span class=\"number\">4</span> <span class=\"number\">39</span>) SIGRTMIN+<span class=\"number\">5</span> <span class=\"number\">40</span>) SIGRTMIN+<span class=\"number\">6</span> <span class=\"number\">41</span>) SIGRTMIN+<span class=\"number\">7</span> <span class=\"number\">42</span>) SIGRTMIN+<span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"number\">43</span>) SIGRTMIN+<span class=\"number\">9</span> <span class=\"number\">44</span>) SIGRTMIN+<span class=\"number\">10</span> <span class=\"number\">45</span>) SIGRTMIN+<span class=\"number\">11</span> <span class=\"number\">46</span>) SIGRTMIN+<span class=\"number\">12</span> <span class=\"number\">47</span>) SIGRTMIN+<span class=\"number\">13</span></span><br><span class=\"line\"><span class=\"number\">48</span>) SIGRTMIN+<span class=\"number\">14</span> <span class=\"number\">49</span>) SIGRTMIN+<span class=\"number\">15</span> <span class=\"number\">50</span>) SIGRTMAX<span class=\"number\">-14</span> <span class=\"number\">51</span>) SIGRTMAX<span class=\"number\">-13</span> <span class=\"number\">52</span>) SIGRTMAX<span class=\"number\">-12</span></span><br><span class=\"line\"><span class=\"number\">53</span>) SIGRTMAX<span class=\"number\">-11</span> <span class=\"number\">54</span>) SIGRTMAX<span class=\"number\">-10</span> <span class=\"number\">55</span>) SIGRTMAX<span class=\"number\">-9</span> <span class=\"number\">56</span>) SIGRTMAX<span class=\"number\">-8</span> <span class=\"number\">57</span>) SIGRTMAX<span class=\"number\">-7</span></span><br><span class=\"line\"><span class=\"number\">58</span>) SIGRTMAX<span class=\"number\">-6</span> <span class=\"number\">59</span>) SIGRTMAX<span class=\"number\">-5</span> <span class=\"number\">60</span>) SIGRTMAX<span class=\"number\">-4</span> <span class=\"number\">61</span>) SIGRTMAX<span class=\"number\">-3</span> <span class=\"number\">62</span>) SIGRTMAX<span class=\"number\">-2</span></span><br><span class=\"line\"><span class=\"number\">63</span>) SIGRTMAX<span class=\"number\">-1</span> <span class=\"number\">64</span>) SIGRTMAX</span><br></pre></td></tr></table></figure>\n\n<p>Linux64kill</p>\n<p>1) SIGHUP<br>reload<br>2) SIGINT<br>(interrupt), INTR(Ctrl-C)<br>9) SIGKILL<br>. <br>15) SIGTERM<br>(terminate), SIGKILLshellkillSIGKILL<br>  kill -1 2205 PID2205 kill -9 2205 2205 kill -15 2205 220515bash9</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>cpunicerenice</p>\n<p>-20~19 0</p>\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nice -n <span class=\"number\">10</span> vim  <span class=\"number\">10</span>vim</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# ps -el | grep vim</span><br><span class=\"line\">F S UID PID PPID C PRI NI ADDR SZ WCHAN TTY TIME CMD</span><br><span class=\"line\"><span class=\"number\">0</span> T <span class=\"number\">0</span> <span class=\"number\">6891</span> <span class=\"number\">2563</span> <span class=\"number\">0</span> <span class=\"number\">90</span> <span class=\"number\">10</span> - <span class=\"number\">35930</span> signal pts/<span class=\"number\">2</span> <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> vim</span><br><span class=\"line\"></span><br><span class=\"line\">renice -n <span class=\"number\">-10</span> <span class=\"number\">6891</span> <span class=\"number\">6891</span><span class=\"number\">-10</span></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# renice -n <span class=\"number\">-10</span> <span class=\"number\">6891</span></span><br><span class=\"line\"><span class=\"number\">6891</span>: old priority <span class=\"number\">10</span>, new priority <span class=\"number\">-10</span></span><br><span class=\"line\"></span><br><span class=\"line\">root</span><br><span class=\"line\">  </span><br><span class=\"line\">[<span class=\"symbol\">testuser@</span>localhost root]$ renice -n <span class=\"number\">5</span> <span class=\"number\">6925</span></span><br><span class=\"line\"><span class=\"number\">6925</span>: old priority <span class=\"number\">0</span>, new priority <span class=\"number\">5</span></span><br><span class=\"line\">  </span><br><span class=\"line\">[<span class=\"symbol\">testuser@</span>localhost root]$ renice -n <span class=\"number\">2</span> <span class=\"number\">6925</span></span><br><span class=\"line\">renice: <span class=\"number\">6925</span>: setpriority: Permission denied</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"/\"></a>/</h4><p></p>\n<p></p>\n<ul>\n<li>command &amp;</li>\n<li>jobs l </li>\n<li>fg %n n</li>\n<li>bg %n n</li>\n</ul>\n<p>%njobs -l pid</p>\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &amp; vim</span><br><span class=\"line\">jobs -l </span><br><span class=\"line\">fg %<span class=\"number\">1</span> <span class=\"number\">1</span></span><br><span class=\"line\">bg %<span class=\"number\">2</span>  <span class=\"number\">2</span></span><br><span class=\"line\">ctrl+z </span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# vim &amp;</span><br><span class=\"line\">[<span class=\"number\">2</span>] <span class=\"number\">6987</span></span><br><span class=\"line\">  </span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# vi /etc/resolv.conf</span><br><span class=\"line\">[<span class=\"number\">3</span>]+ Stopped vi /etc/resolv.conf</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# jobs -l</span><br><span class=\"line\">[<span class=\"number\">1</span>] <span class=\"number\">6891</span> Stopped nice -n <span class=\"number\">10</span> vim</span><br><span class=\"line\">[<span class=\"number\">2</span>]- <span class=\"number\">6987</span> Stopped (tty output) vim</span><br><span class=\"line\">[<span class=\"number\">3</span>]+ <span class=\"number\">6989</span> Stopped vi /etc/resolv.conf</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# bg %<span class=\"number\">2</span></span><br><span class=\"line\">[<span class=\"number\">2</span>]- vim &amp;</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# fg %<span class=\"number\">3</span></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>Linux</p>\n<p>Linux  ls </p>\n<p> pid ID pid pid Linux pid </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"ps\"><a href=\"#ps\" class=\"headerlink\" title=\"ps\"></a>ps</h4><figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# ps aux</span><br><span class=\"line\">USER PID %CPU %MEM  VSZ  RSS TTY  STAT START  TIME COMMAND</span><br><span class=\"line\">root   <span class=\"number\">1</span> <span class=\"number\">0.0</span>    <span class=\"number\">0.0</span>    <span class=\"number\">19356</span>  <span class=\"number\">1540</span>   ?    Ss    <span class=\"number\">02</span>:<span class=\"number\">09</span>     <span class=\"number\">0</span>:<span class=\"number\">01</span> /sbin/init</span><br><span class=\"line\">root   <span class=\"number\">2</span>  <span class=\"number\">0.0</span>    <span class=\"number\">0.0</span>   <span class=\"number\">0</span>     <span class=\"number\">0</span>   ?    S      <span class=\"number\">02</span>:<span class=\"number\">09</span> <span class=\"number\">0</span>:<span class=\"number\">00</span>  [kthreadd]</span><br><span class=\"line\">root   <span class=\"number\">3</span>   <span class=\"number\">0.0</span>     <span class=\"number\">0.0</span>   <span class=\"number\">0</span>     <span class=\"number\">0</span>      ? S     <span class=\"number\">02</span>:<span class=\"number\">09</span> <span class=\"number\">0</span>:<span class=\"number\">00</span> [migration/<span class=\"number\">0</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# ps -ef</span><br><span class=\"line\">UID  PID   PPID  C  STIME  TTY TIME    CMD</span><br><span class=\"line\">root   <span class=\"number\">1</span>     <span class=\"number\">0</span>      <span class=\"number\">0</span>   <span class=\"number\">02</span>:<span class=\"number\">09</span>    ? <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">01</span>   /sbin/init</span><br><span class=\"line\">root <span class=\"number\">2</span> <span class=\"number\">0</span>      <span class=\"number\">0</span>  <span class=\"number\">02</span>:<span class=\"number\">09</span>    ?   <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   [kthreadd]</span><br><span class=\"line\">root <span class=\"number\">3</span>     <span class=\"number\">2</span>      <span class=\"number\">0</span>   <span class=\"number\">02</span>:<span class=\"number\">09</span>    ? <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> [migration/<span class=\"number\">0</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# ps -le</span><br><span class=\"line\">F S  UID PID PPID C  PRI  NI  ADDR  SZ  WCHAN TTY  TIME  CMD</span><br><span class=\"line\"><span class=\"number\">4</span> S  <span class=\"number\">0</span>   <span class=\"number\">1</span> <span class=\"number\">0</span>   <span class=\"number\">0</span> <span class=\"number\">80</span>   <span class=\"number\">0</span>    -    <span class=\"number\">4839</span>  poll_s  ? <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">01</span>  init</span><br><span class=\"line\"><span class=\"number\">1</span> S   <span class=\"number\">0</span> <span class=\"number\">2</span> <span class=\"number\">0</span>    <span class=\"number\">0</span>  <span class=\"number\">80</span> <span class=\"number\">0</span>    - <span class=\"number\">0</span> kthrea ? <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  kthreadd</span><br><span class=\"line\"><span class=\"number\">1</span> S <span class=\"number\">0</span> <span class=\"number\">3</span> <span class=\"number\">2</span>  <span class=\"number\">0</span>  <span class=\"number\">-40</span>   -    - <span class=\"number\">0</span> migrat   ? <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> migration/<span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">USER  </span><br><span class=\"line\">UID IDUser ID </span><br><span class=\"line\">PID IDProcess ID </span><br><span class=\"line\">PPID IDParent Process id </span><br><span class=\"line\">SID IDSession id </span><br><span class=\"line\">%CPU cpu </span><br><span class=\"line\">%MEM  </span><br><span class=\"line\">VSZ Virtual Size </span><br><span class=\"line\">RSS  </span><br><span class=\"line\">TTY tty </span><br><span class=\"line\">STAT STAT </span><br><span class=\"line\">START  </span><br><span class=\"line\">TIME cpu </span><br><span class=\"line\">COMMAND  </span><br><span class=\"line\">NI (Nice) </span><br><span class=\"line\">PRI (Priority)</span><br><span class=\"line\">S D= R= S= T=/ Z=</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"top\"><a href=\"#top\" class=\"headerlink\" title=\"top\"></a>top</h4><figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# top</span><br><span class=\"line\">top - <span class=\"number\">02</span>:<span class=\"number\">45</span>:<span class=\"number\">58</span> up <span class=\"number\">36</span> min, <span class=\"number\">4</span> users, load average: <span class=\"number\">0.00</span>, <span class=\"number\">0.00</span>, <span class=\"number\">0.00</span></span><br><span class=\"line\">Tasks: <span class=\"number\">175</span> total, <span class=\"number\">1</span> running, <span class=\"number\">174</span> sleeping, <span class=\"number\">0</span> stopped, <span class=\"number\">0</span> zombie</span><br><span class=\"line\">Cpu(s): <span class=\"number\">0.3</span>%us, <span class=\"number\">0.3</span>%sy, <span class=\"number\">0.0</span>%ni, <span class=\"number\">99.3</span>%id, <span class=\"number\">0.0</span>%wa, <span class=\"number\">0.0</span>%hi, <span class=\"number\">0.0</span>%si, <span class=\"number\">0.0</span>%st</span><br><span class=\"line\">Mem: <span class=\"number\">1907580</span>k total, <span class=\"number\">528968</span>k used, <span class=\"number\">1378612</span>k free, <span class=\"number\">26060</span>k buffers</span><br><span class=\"line\">Swap: <span class=\"number\">2097144</span>k total, <span class=\"number\">0</span>k used, <span class=\"number\">2097144</span>k free, <span class=\"number\">173020</span>k cached</span><br><span class=\"line\">PID USER PR  NI VIRT   RES  SHR S  %CPU %MEM TIME+ COMMAND</span><br><span class=\"line\"><span class=\"number\">2603</span> root <span class=\"number\">20</span>  <span class=\"number\">0</span>   <span class=\"number\">15028</span> <span class=\"number\">1372</span> <span class=\"number\">1000</span> R <span class=\"number\">0.3</span> <span class=\"number\">0.1</span>     <span class=\"number\">0</span>:<span class=\"number\">00.21</span>   top</span><br><span class=\"line\"><span class=\"number\">1</span> root <span class=\"number\">20</span> <span class=\"number\">0</span>   <span class=\"number\">19356</span> <span class=\"number\">1540</span>  <span class=\"number\">1228</span> S <span class=\"number\">0.0</span>   <span class=\"number\">0.1</span>  <span class=\"number\">0</span>:<span class=\"number\">01.04</span>   init</span><br><span class=\"line\"><span class=\"number\">2</span> root   <span class=\"number\">20</span> <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">0</span> S  <span class=\"number\">0.0</span>    <span class=\"number\">0.0</span> <span class=\"number\">0</span>:<span class=\"number\">00.00</span>  kthreadd</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"number\">5</span><span class=\"number\">15</span></span><br><span class=\"line\">stat </span><br><span class=\"line\">cpu  swap</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4>  <figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# kill -l</span><br><span class=\"line\"><span class=\"number\">1</span>) SIGHUP <span class=\"number\">2</span>) SIGINT <span class=\"number\">3</span>) SIGQUIT <span class=\"number\">4</span>) SIGILL <span class=\"number\">5</span>) SIGTRAP</span><br><span class=\"line\"><span class=\"number\">6</span>) SIGABRT <span class=\"number\">7</span>) SIGBUS <span class=\"number\">8</span>) SIGFPE <span class=\"number\">9</span>) SIGKILL <span class=\"number\">10</span>) SIGUSR1</span><br><span class=\"line\"><span class=\"number\">11</span>) SIGSEGV <span class=\"number\">12</span>) SIGUSR2 <span class=\"number\">13</span>) SIGPIPE <span class=\"number\">14</span>) SIGALRM <span class=\"number\">15</span>) SIGTERM</span><br><span class=\"line\"><span class=\"number\">16</span>) SIGSTKFLT <span class=\"number\">17</span>) SIGCHLD <span class=\"number\">18</span>) SIGCONT <span class=\"number\">19</span>) SIGSTOP <span class=\"number\">20</span>) SIGTSTP</span><br><span class=\"line\"><span class=\"number\">21</span>) SIGTTIN <span class=\"number\">22</span>) SIGTTOU <span class=\"number\">23</span>) SIGURG <span class=\"number\">24</span>) SIGXCPU <span class=\"number\">25</span>) SIGXFSZ</span><br><span class=\"line\"><span class=\"number\">26</span>) SIGVTALRM <span class=\"number\">27</span>) SIGPROF <span class=\"number\">28</span>) SIGWINCH <span class=\"number\">29</span>) SIGIO <span class=\"number\">30</span>) SIGPWR</span><br><span class=\"line\"><span class=\"number\">31</span>) SIGSYS <span class=\"number\">34</span>) SIGRTMIN <span class=\"number\">35</span>) SIGRTMIN+<span class=\"number\">1</span> <span class=\"number\">36</span>) SIGRTMIN+<span class=\"number\">2</span> <span class=\"number\">37</span>) SIGRTMIN+<span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">38</span>) SIGRTMIN+<span class=\"number\">4</span> <span class=\"number\">39</span>) SIGRTMIN+<span class=\"number\">5</span> <span class=\"number\">40</span>) SIGRTMIN+<span class=\"number\">6</span> <span class=\"number\">41</span>) SIGRTMIN+<span class=\"number\">7</span> <span class=\"number\">42</span>) SIGRTMIN+<span class=\"number\">8</span></span><br><span class=\"line\"><span class=\"number\">43</span>) SIGRTMIN+<span class=\"number\">9</span> <span class=\"number\">44</span>) SIGRTMIN+<span class=\"number\">10</span> <span class=\"number\">45</span>) SIGRTMIN+<span class=\"number\">11</span> <span class=\"number\">46</span>) SIGRTMIN+<span class=\"number\">12</span> <span class=\"number\">47</span>) SIGRTMIN+<span class=\"number\">13</span></span><br><span class=\"line\"><span class=\"number\">48</span>) SIGRTMIN+<span class=\"number\">14</span> <span class=\"number\">49</span>) SIGRTMIN+<span class=\"number\">15</span> <span class=\"number\">50</span>) SIGRTMAX<span class=\"number\">-14</span> <span class=\"number\">51</span>) SIGRTMAX<span class=\"number\">-13</span> <span class=\"number\">52</span>) SIGRTMAX<span class=\"number\">-12</span></span><br><span class=\"line\"><span class=\"number\">53</span>) SIGRTMAX<span class=\"number\">-11</span> <span class=\"number\">54</span>) SIGRTMAX<span class=\"number\">-10</span> <span class=\"number\">55</span>) SIGRTMAX<span class=\"number\">-9</span> <span class=\"number\">56</span>) SIGRTMAX<span class=\"number\">-8</span> <span class=\"number\">57</span>) SIGRTMAX<span class=\"number\">-7</span></span><br><span class=\"line\"><span class=\"number\">58</span>) SIGRTMAX<span class=\"number\">-6</span> <span class=\"number\">59</span>) SIGRTMAX<span class=\"number\">-5</span> <span class=\"number\">60</span>) SIGRTMAX<span class=\"number\">-4</span> <span class=\"number\">61</span>) SIGRTMAX<span class=\"number\">-3</span> <span class=\"number\">62</span>) SIGRTMAX<span class=\"number\">-2</span></span><br><span class=\"line\"><span class=\"number\">63</span>) SIGRTMAX<span class=\"number\">-1</span> <span class=\"number\">64</span>) SIGRTMAX</span><br></pre></td></tr></table></figure>\n\n<p>Linux64kill</p>\n<p>1) SIGHUP<br>reload<br>2) SIGINT<br>(interrupt), INTR(Ctrl-C)<br>9) SIGKILL<br>. <br>15) SIGTERM<br>(terminate), SIGKILLshellkillSIGKILL<br>  kill -1 2205 PID2205 kill -9 2205 2205 kill -15 2205 220515bash9</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>cpunicerenice</p>\n<p>-20~19 0</p>\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nice -n <span class=\"number\">10</span> vim  <span class=\"number\">10</span>vim</span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# ps -el | grep vim</span><br><span class=\"line\">F S UID PID PPID C PRI NI ADDR SZ WCHAN TTY TIME CMD</span><br><span class=\"line\"><span class=\"number\">0</span> T <span class=\"number\">0</span> <span class=\"number\">6891</span> <span class=\"number\">2563</span> <span class=\"number\">0</span> <span class=\"number\">90</span> <span class=\"number\">10</span> - <span class=\"number\">35930</span> signal pts/<span class=\"number\">2</span> <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> vim</span><br><span class=\"line\"></span><br><span class=\"line\">renice -n <span class=\"number\">-10</span> <span class=\"number\">6891</span> <span class=\"number\">6891</span><span class=\"number\">-10</span></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# renice -n <span class=\"number\">-10</span> <span class=\"number\">6891</span></span><br><span class=\"line\"><span class=\"number\">6891</span>: old priority <span class=\"number\">10</span>, new priority <span class=\"number\">-10</span></span><br><span class=\"line\"></span><br><span class=\"line\">root</span><br><span class=\"line\">  </span><br><span class=\"line\">[<span class=\"symbol\">testuser@</span>localhost root]$ renice -n <span class=\"number\">5</span> <span class=\"number\">6925</span></span><br><span class=\"line\"><span class=\"number\">6925</span>: old priority <span class=\"number\">0</span>, new priority <span class=\"number\">5</span></span><br><span class=\"line\">  </span><br><span class=\"line\">[<span class=\"symbol\">testuser@</span>localhost root]$ renice -n <span class=\"number\">2</span> <span class=\"number\">6925</span></span><br><span class=\"line\">renice: <span class=\"number\">6925</span>: setpriority: Permission denied</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"/\"></a>/</h4><p></p>\n<p></p>\n<ul>\n<li>command &amp;</li>\n<li>jobs l </li>\n<li>fg %n n</li>\n<li>bg %n n</li>\n</ul>\n<p>%njobs -l pid</p>\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &amp; vim</span><br><span class=\"line\">jobs -l </span><br><span class=\"line\">fg %<span class=\"number\">1</span> <span class=\"number\">1</span></span><br><span class=\"line\">bg %<span class=\"number\">2</span>  <span class=\"number\">2</span></span><br><span class=\"line\">ctrl+z </span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# vim &amp;</span><br><span class=\"line\">[<span class=\"number\">2</span>] <span class=\"number\">6987</span></span><br><span class=\"line\">  </span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# vi /etc/resolv.conf</span><br><span class=\"line\">[<span class=\"number\">3</span>]+ Stopped vi /etc/resolv.conf</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# jobs -l</span><br><span class=\"line\">[<span class=\"number\">1</span>] <span class=\"number\">6891</span> Stopped nice -n <span class=\"number\">10</span> vim</span><br><span class=\"line\">[<span class=\"number\">2</span>]- <span class=\"number\">6987</span> Stopped (tty output) vim</span><br><span class=\"line\">[<span class=\"number\">3</span>]+ <span class=\"number\">6989</span> Stopped vi /etc/resolv.conf</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# bg %<span class=\"number\">2</span></span><br><span class=\"line\">[<span class=\"number\">2</span>]- vim &amp;</span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"symbol\">root@</span>localhost ~]# fg %<span class=\"number\">3</span></span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"SLB 502Debug","published":1,"author":"xiemx","comments":1,"date":"2018-07-19T18:07:06.000Z","_content":"502\n\n1. 502\n\n![img](/images/img_5b5183b84d4dd.png)\n\n response headercaptaincaptain502nginx proxy_passbobcat.sxldns.com.\n\n```\nset $bobcat_backend \"bobcat.sxldns.com\";\nproxy_pass http://$bobcat_backend;\n```\n\ncurlbobcat.sxldns.com,IPcurl,\n\n![img](/images/img_5b5184bfd49e3.png)\n\nnginx\n\n,nginxproxycache,nginxcacheresponsecontentnginxbackendnginx cachediskSLB502\n\n```\nproxy_cache_path /etc/nginx/china_cache levels=1:2 keys_zone=user_page_cache:100m max_size=20g inactive=60m use_temp_path=off;\n```\n\nDEBUG\n\n 1. containernginx workerPID\n\n![img](/images/img_5b5184fb1c8d4.png)\n\n2. strace\n\n![img](/images/img_5b518515e4fe7.png)\n\nstracestrace\n\nnginx cache`/etc/nginx/china_cache``no space`writev()sendfile()SLB`badgateway`.\n\nPS\n\n1. nginxproxycacheopen()diskcache\n2. debugno space\n\n\n\n```\n1.\n[root@iZ2ze2mzhjk3ou1vsnkthzZ rpm]# strace -p 3904 -v\nstrace: Process 3904 attached\nepoll_wait(8, [{EPOLLIN, {u32=69025808, u64=140003117973520}}], 512, -1) = 1\naccept4(6, {sa_family=AF_INET, sin_port=htons(59464), sin_addr=inet_addr(\"10.130.0.4\")}, [16], SOCK_NONBLOCK) = 11\nepoll_ctl(8, EPOLL_CTL_ADD, 11, {EPOLLIN|EPOLLRDHUP|EPOLLET, {u32=69027249, u64=140003117974961}}) = 0\nepoll_wait(8, [{EPOLLIN, {u32=69027249, u64=140003117974961}}], 512, 60000) = 1\nrecvfrom(11, \"GET /?key=testxxxx HTTP/1.1\\r\\nUse\"..., 1024, 0, NULL, NULL) = 88\nepoll_ctl(8, EPOLL_CTL_MOD, 11, {EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, {u32=69027249, u64=140003117974961}}) = 0\nopen(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2\", O_RDONLY|O_NONBLOCK) = 14\nfstat(14, {st_dev=makedev(253, 1), st_ino=655502, st_mode=S_IFREG|0600, st_nlink=1, st_uid=101, st_gid=101, st_blksize=4096, st_blocks=96, st_size=46750, st_atime=2018/07/17-16:34:43.967698739, st_mtime=2018/07/17-16:34:43.966698736, st_ctime=2018/07/17-16:34:43.967698739}) = 0\npread64(14, \"\\5\\0\\0\\0\\0\\0\\0\\0(\\252M[\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"..., 636, 0) = 636\ngetsockname(11, {sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"172.17.0.2\")}, [16]) = 0\nsendto(13, \"nN\\1\\0\\0\\1\\0\\0\\0\\0\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 35, 0, NULL, 0) = 35\nsendto(13, \"\\375\\215\\1\\0\\0\\1\\0\\0\\0\\0\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 35, 0, NULL, 0) = 35\nepoll_wait(8, [{EPOLLOUT, {u32=69027249, u64=140003117974961}}, {EPOLLIN, {u32=69026288, u64=140003117974000}}], 512, 5000) = 2\nrecvfrom(13, \"nN\\201\\200\\0\\1\\0\\3\\0\\0\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 4096, 0, NULL, NULL) = 147\nrecvfrom(13, \"\\375\\215\\201\\200\\0\\1\\0\\1\\0\\1\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 4096, 0, NULL, NULL) = 168\nsocket(AF_INET, SOCK_STREAM, IPPROTO_IP) = 15\nioctl(15, FIONBIO, [1]) = 0\nepoll_ctl(8, EPOLL_CTL_ADD, 15, {EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, {u32=69027488, u64=140003117975200}}) = 0\nconnect(15, {sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"54.222.148.216\")}, 16) = -1 EINPROGRESS (Operation now in progress)\nrecvfrom(13, 0x7ffd1f603790, 4096, 0, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)\nepoll_wait(8, [{EPOLLOUT, {u32=69027488, u64=140003117975200}}], 512, 20000) = 1\ngetsockopt(15, SOL_SOCKET, SO_ERROR, [0], [4]) = 0\nwritev(15, [{\"GET /?key=testxxxx HTTP/1.0\\r\\nHos\"..., 219}], 1) = 219\nepoll_wait(8, [{EPOLLIN|EPOLLOUT, {u32=69027488, u64=140003117975200}}], 512, 60000) = 1\nrecvfrom(15, \"HTTP/1.1 200 OK\\r\\nContent-Type: t\"..., 3723, 0, NULL, NULL) = 3723\nclose(14) = 0\nreadv(15, [{\"a.qnssl.com/images/265818/Fntncr\"..., 4096}], 1) = 4096\nreadv(15, [{\"w-card-price{color: #004aa0;}.s-\"..., 4096}], 1) = 4096\nreadv(15, [{\" {\\n font-family: \\\"Open Sans\"..., 4096}], 1) = 373\nopen(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014052\", O_RDWR|O_CREAT|O_EXCL, 0600) = 14\npwritev(14, [{\"\\5\\0\\0\\0\\0\\0\\0\\0\\356\\254M[\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"..., 4096}, {\"a.qnssl.com/images/265818/Fntncr\"..., 4096}, {\"w-card-price{color: #004aa0;}.s-\"..., 4096}], 3, 0) = -1 ENOSPC (No space left on device)\ngettid() = 7\nwrite(4, \"2018/07/17 08:46:33 [crit] 7#7: \"..., 328) = 328\nclose(15) = 0\nunlink(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014052\") = 0\nwrite(5, \"{ \\\"time\\\": \\\"2018-07-17T08:46:33+0\"..., 382) = 382\nclose(14) = 0\nclose(11) = 0\n\n2.\n[root@iZ2ze2mzhjk3ou1vsnkthzZ rpm]# strace -p 3904 -v\nstrace: Process 3904 attached\nepoll_wait(8, [{EPOLLIN, {u32=69025808, u64=140003117973520}}], 512, -1) = 1\naccept4(6, {sa_family=AF_INET, sin_port=htons(59360), sin_addr=inet_addr(\"10.130.0.4\")}, [16], SOCK_NONBLOCK) = 11\nepoll_ctl(8, EPOLL_CTL_ADD, 11, {EPOLLIN|EPOLLRDHUP|EPOLLET, {u32=69027248, u64=140003117974960}}) = 0\nepoll_wait(8, [{EPOLLIN, {u32=69027248, u64=140003117974960}}], 512, 60000) = 1\nrecvfrom(11, \"GET /?key=testxxxx HTTP/1.1\\r\\nUse\"..., 1024, 0, NULL, NULL) = 88\nepoll_ctl(8, EPOLL_CTL_MOD, 11, {EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, {u32=69027248, u64=140003117974960}}) = 0\nopen(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2\", O_RDONLY|O_NONBLOCK) = 14\nfstat(14, {st_dev=makedev(253, 1), st_ino=655504, st_mode=S_IFREG|0600, st_nlink=1, st_uid=101, st_gid=101, st_blksize=4096, st_blocks=96, st_size=46750, st_atime=2018/07/17-16:14:38.127407158, st_mtime=2018/07/17-16:14:38.127407158, st_ctime=2018/07/17-16:14:38.128407161}) = 0\npread64(14, \"\\5\\0\\0\\0\\0\\0\\0\\0s\\245M[\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"..., 636, 0) = 636\ngetsockname(11, {sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"172.17.0.2\")}, [16]) = 0\nsendto(12, \"\\210V\\1\\0\\0\\1\\0\\0\\0\\0\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 35, 0, NULL, 0) = 35\nsendto(12, \"\\27\\1\\1\\0\\0\\1\\0\\0\\0\\0\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 35, 0, NULL, 0) = 35\nepoll_wait(8, [{EPOLLOUT, {u32=69027248, u64=140003117974960}}, {EPOLLIN, {u32=69027728, u64=140003117975440}}], 512, 5000) = 2\nrecvfrom(12, \"\\210V\\201\\200\\0\\1\\0\\3\\0\\0\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 4096, 0, NULL, NULL) = 147\nrecvfrom(12, \"\\27\\1\\201\\200\\0\\1\\0\\1\\0\\1\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 4096, 0, NULL, NULL) = 168\nsocket(AF_INET, SOCK_STREAM, IPPROTO_IP) = 15\nioctl(15, FIONBIO, [1]) = 0\nepoll_ctl(8, EPOLL_CTL_ADD, 15, {EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, {u32=69027489, u64=140003117975201}}) = 0\nconnect(15, {sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"52.80.58.42\")}, 16) = -1 EINPROGRESS (Operation now in progress)\nrecvfrom(12, 0x7ffd1f603790, 4096, 0, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)\nepoll_wait(8, [{EPOLLOUT, {u32=69027489, u64=140003117975201}}], 512, 20000) = 1\ngetsockopt(15, SOL_SOCKET, SO_ERROR, [0], [4]) = 0\nwritev(15, [{\"GET /?key=testxxxx HTTP/1.0\\r\\nHos\"..., 219}], 1) = 219\nepoll_wait(8, [{EPOLLIN|EPOLLOUT, {u32=69027489, u64=140003117975201}}], 512, 60000) = 1\nrecvfrom(15, \"HTTP/1.1 200 OK\\r\\nContent-Type: t\"..., 3723, 0, NULL, NULL) = 3723\nclose(14) = 0\nreadv(15, [{\"a.qnssl.com/images/265818/Fntncr\"..., 4096}], 1) = 4096\nreadv(15, [{\"w-card-price{color: #004aa0;}.s-\"..., 4096}], 1) = 4096\nreadv(15, [{\" {\\n font-family: \\\"Open Sans\"..., 4096}], 1) = 2565\nopen(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014051\", O_RDWR|O_CREAT|O_EXCL, 0600) = 14\npwritev(14, [{\"\\5\\0\\0\\0\\0\\0\\0\\0(\\252M[\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"..., 4096}, {\"a.qnssl.com/images/265818/Fntncr\"..., 4096}, {\"w-card-price{color: #004aa0;}.s-\"..., 4096}], 3, 0) = 12288\nwritev(11, [{\"HTTP/1.1 200 OK\\r\\nServer: nginx/1\"..., 321}], 1) = 321\nsendfile(11, 14, [636] => [12288], 11652) = 11652\nepoll_wait(8, [{EPOLLOUT, {u32=69027489, u64=140003117975201}}], 512, 59955) = 1\nepoll_wait(8, [{EPOLLIN|EPOLLOUT, {u32=69027489, u64=140003117975201}}], 512, 59953) = 1\nreadv(15, [{\"rc=\\\"//nzr2ybsda.qnssl.com/images\"..., 1531}, {\"lass=\\\"s-nav-item\\\" target=\\\"_self\\\"\"..., 4096}, {\"lign: left; font-size: 160%;\\\">\\302\\240\"..., 4096}, {\"OQswmpPvoA0.jpg?imageMogr2/strip\"..., 4096}], 4) = 10136\npwritev(14, [{\" {\\n font-family: \\\"Open Sans\"..., 4096}, {\"lass=\\\"s-nav-item\\\" target=\\\"_self\\\"\"..., 4096}, {\"lign: left; font-size: 160%;\\\">\\302\\240\"..., 4096}], 3, 12288) = 12288\nsendfile(11, 14, [12288] => [24576], 12288) = 12288\nepoll_wait(8, [{EPOLLIN|EPOLLOUT, {u32=69027489, u64=140003117975201}}], 512, 59948) = 1\nreadv(15, [{\"olor-custom1\\\">\\347\\254\\254\\344\\270\\211\\346\\226\\271\\345\"..., 3683}, {\"container title-group-container\\\"\"..., 4096}, {\";cs=srgb&s=f71a6adc1e5953a52\"..., 4096}, {\")\\\" data-bg=\\\"//nzr2ybsda.qnssl.co\"..., 4096}], 4) = 15971\nreadv(15, [{\"\\230\\263\\345\\224\\257\\346\\231\\237\\\" title=\\\"\\346\\262\\210\\351\\230\\263\\345\\224\\257\\346\\231\\237\\345\\225\\206\"..., 4096}], 1) = 2853\npwritev(14, [{\"OQswmpPvoA0.jpg?imageMogr2/strip\"..., 4096}, {\"container title-group-container\\\"\"..., 4096}, {\";cs=srgb&s=f71a6adc1e5953a52\"..., 4096}, {\")\\\" data-bg=\\\"//nzr2ybsda.qnssl.co\"..., 4096}], 4, 24576) = 16384\nsendfile(11, 14, [24576] => [40960], 16384) = 16384\nepoll_wait(8, [{EPOLLIN|EPOLLOUT, {u32=69027489, u64=140003117975201}}], 512, 59947) = 1\nreadv(15, [{\"\n\n<d\"..., 1243}, {\"\\232\\204\\344\\270\\232\\347\\273\\251\\344\\271\\237\\345\\234\\250\\344\\270\\215\\346\\226\\255\\346\\224\\200\\345\\215\\207\\343\\200\\202</d\"..., 4096}, {\"\", 4096}, {\"\", 4096}, {\"\", 4096}], 5) = 2937\npwritev(14, [{\"\\230\\263\\345\\224\\257\\346\\231\\237\\\" title=\\\"\\346\\262\\210\\351\\230\\263\\345\\224\\257\\346\\231\\237\\345\\225\\206\"..., 4096}, {\"\\232\\204\\344\\270\\232\\347\\273\\251\\344\\271\\237\\345\\234\\250\\344\\270\\215\\346\\226\\255\\346\\224\\200\\345\\215\\207\\343\\200\\202</d\"..., 1694}], 2, 40960) = 5790 sendfile(11, 14, [40960] => [46750], 5790) = 5790\nchmod(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014051\", 0600) = 0\nrename(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014051\", \"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2\") = 0\nfstat(14, {st_dev=makedev(253, 1), st_ino=655502, st_mode=S_IFREG|0600, st_nlink=1, st_uid=101, st_gid=101, st_blksize=4096, st_blocks=96, st_size=46750, st_atime=2018/07/17-16:34:43.967698739, st_mtime=2018/07/17-16:34:43.966698736, st_ctime=2018/07/17-16:34:43.967698739}) = 0\nclose(15) = 0\nwrite(5, \"{ \\\"time\\\": \\\"2018-07-17T08:34:43+0\"..., 386) = 386\nclose(14) = 0\nsetsockopt(11, SOL_TCP, TCP_NODELAY, [1], 4) = 0\nepoll_wait(8, [{EPOLLIN|EPOLLOUT|EPOLLRDHUP, {u32=69027248, u64=140003117974960}}], 512, 65000) = 1\nrecvfrom(11, \"\", 1024, 0, NULL, NULL) = 0\nclose(11) = 0\n```","source":"_posts/slb-502-debug.md","raw":"---\nlayout: post\ntitle: SLB 502Debug\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2018-07-20 02:07:06\ntags: [ linux, nginx, debug ]\ncategories:\n    - linux\n    - nginx\n    - debug\n# permalink: '/2018/07/20/slb-502-debug'\n---\n502\n\n1. 502\n\n![img](/images/img_5b5183b84d4dd.png)\n\n response headercaptaincaptain502nginx proxy_passbobcat.sxldns.com.\n\n```\nset $bobcat_backend \"bobcat.sxldns.com\";\nproxy_pass http://$bobcat_backend;\n```\n\ncurlbobcat.sxldns.com,IPcurl,\n\n![img](/images/img_5b5184bfd49e3.png)\n\nnginx\n\n,nginxproxycache,nginxcacheresponsecontentnginxbackendnginx cachediskSLB502\n\n```\nproxy_cache_path /etc/nginx/china_cache levels=1:2 keys_zone=user_page_cache:100m max_size=20g inactive=60m use_temp_path=off;\n```\n\nDEBUG\n\n 1. containernginx workerPID\n\n![img](/images/img_5b5184fb1c8d4.png)\n\n2. strace\n\n![img](/images/img_5b518515e4fe7.png)\n\nstracestrace\n\nnginx cache`/etc/nginx/china_cache``no space`writev()sendfile()SLB`badgateway`.\n\nPS\n\n1. nginxproxycacheopen()diskcache\n2. debugno space\n\n\n\n```\n1.\n[root@iZ2ze2mzhjk3ou1vsnkthzZ rpm]# strace -p 3904 -v\nstrace: Process 3904 attached\nepoll_wait(8, [{EPOLLIN, {u32=69025808, u64=140003117973520}}], 512, -1) = 1\naccept4(6, {sa_family=AF_INET, sin_port=htons(59464), sin_addr=inet_addr(\"10.130.0.4\")}, [16], SOCK_NONBLOCK) = 11\nepoll_ctl(8, EPOLL_CTL_ADD, 11, {EPOLLIN|EPOLLRDHUP|EPOLLET, {u32=69027249, u64=140003117974961}}) = 0\nepoll_wait(8, [{EPOLLIN, {u32=69027249, u64=140003117974961}}], 512, 60000) = 1\nrecvfrom(11, \"GET /?key=testxxxx HTTP/1.1\\r\\nUse\"..., 1024, 0, NULL, NULL) = 88\nepoll_ctl(8, EPOLL_CTL_MOD, 11, {EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, {u32=69027249, u64=140003117974961}}) = 0\nopen(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2\", O_RDONLY|O_NONBLOCK) = 14\nfstat(14, {st_dev=makedev(253, 1), st_ino=655502, st_mode=S_IFREG|0600, st_nlink=1, st_uid=101, st_gid=101, st_blksize=4096, st_blocks=96, st_size=46750, st_atime=2018/07/17-16:34:43.967698739, st_mtime=2018/07/17-16:34:43.966698736, st_ctime=2018/07/17-16:34:43.967698739}) = 0\npread64(14, \"\\5\\0\\0\\0\\0\\0\\0\\0(\\252M[\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"..., 636, 0) = 636\ngetsockname(11, {sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"172.17.0.2\")}, [16]) = 0\nsendto(13, \"nN\\1\\0\\0\\1\\0\\0\\0\\0\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 35, 0, NULL, 0) = 35\nsendto(13, \"\\375\\215\\1\\0\\0\\1\\0\\0\\0\\0\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 35, 0, NULL, 0) = 35\nepoll_wait(8, [{EPOLLOUT, {u32=69027249, u64=140003117974961}}, {EPOLLIN, {u32=69026288, u64=140003117974000}}], 512, 5000) = 2\nrecvfrom(13, \"nN\\201\\200\\0\\1\\0\\3\\0\\0\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 4096, 0, NULL, NULL) = 147\nrecvfrom(13, \"\\375\\215\\201\\200\\0\\1\\0\\1\\0\\1\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 4096, 0, NULL, NULL) = 168\nsocket(AF_INET, SOCK_STREAM, IPPROTO_IP) = 15\nioctl(15, FIONBIO, [1]) = 0\nepoll_ctl(8, EPOLL_CTL_ADD, 15, {EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, {u32=69027488, u64=140003117975200}}) = 0\nconnect(15, {sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"54.222.148.216\")}, 16) = -1 EINPROGRESS (Operation now in progress)\nrecvfrom(13, 0x7ffd1f603790, 4096, 0, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)\nepoll_wait(8, [{EPOLLOUT, {u32=69027488, u64=140003117975200}}], 512, 20000) = 1\ngetsockopt(15, SOL_SOCKET, SO_ERROR, [0], [4]) = 0\nwritev(15, [{\"GET /?key=testxxxx HTTP/1.0\\r\\nHos\"..., 219}], 1) = 219\nepoll_wait(8, [{EPOLLIN|EPOLLOUT, {u32=69027488, u64=140003117975200}}], 512, 60000) = 1\nrecvfrom(15, \"HTTP/1.1 200 OK\\r\\nContent-Type: t\"..., 3723, 0, NULL, NULL) = 3723\nclose(14) = 0\nreadv(15, [{\"a.qnssl.com/images/265818/Fntncr\"..., 4096}], 1) = 4096\nreadv(15, [{\"w-card-price{color: #004aa0;}.s-\"..., 4096}], 1) = 4096\nreadv(15, [{\" {\\n font-family: \\\"Open Sans\"..., 4096}], 1) = 373\nopen(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014052\", O_RDWR|O_CREAT|O_EXCL, 0600) = 14\npwritev(14, [{\"\\5\\0\\0\\0\\0\\0\\0\\0\\356\\254M[\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"..., 4096}, {\"a.qnssl.com/images/265818/Fntncr\"..., 4096}, {\"w-card-price{color: #004aa0;}.s-\"..., 4096}], 3, 0) = -1 ENOSPC (No space left on device)\ngettid() = 7\nwrite(4, \"2018/07/17 08:46:33 [crit] 7#7: \"..., 328) = 328\nclose(15) = 0\nunlink(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014052\") = 0\nwrite(5, \"{ \\\"time\\\": \\\"2018-07-17T08:46:33+0\"..., 382) = 382\nclose(14) = 0\nclose(11) = 0\n\n2.\n[root@iZ2ze2mzhjk3ou1vsnkthzZ rpm]# strace -p 3904 -v\nstrace: Process 3904 attached\nepoll_wait(8, [{EPOLLIN, {u32=69025808, u64=140003117973520}}], 512, -1) = 1\naccept4(6, {sa_family=AF_INET, sin_port=htons(59360), sin_addr=inet_addr(\"10.130.0.4\")}, [16], SOCK_NONBLOCK) = 11\nepoll_ctl(8, EPOLL_CTL_ADD, 11, {EPOLLIN|EPOLLRDHUP|EPOLLET, {u32=69027248, u64=140003117974960}}) = 0\nepoll_wait(8, [{EPOLLIN, {u32=69027248, u64=140003117974960}}], 512, 60000) = 1\nrecvfrom(11, \"GET /?key=testxxxx HTTP/1.1\\r\\nUse\"..., 1024, 0, NULL, NULL) = 88\nepoll_ctl(8, EPOLL_CTL_MOD, 11, {EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, {u32=69027248, u64=140003117974960}}) = 0\nopen(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2\", O_RDONLY|O_NONBLOCK) = 14\nfstat(14, {st_dev=makedev(253, 1), st_ino=655504, st_mode=S_IFREG|0600, st_nlink=1, st_uid=101, st_gid=101, st_blksize=4096, st_blocks=96, st_size=46750, st_atime=2018/07/17-16:14:38.127407158, st_mtime=2018/07/17-16:14:38.127407158, st_ctime=2018/07/17-16:14:38.128407161}) = 0\npread64(14, \"\\5\\0\\0\\0\\0\\0\\0\\0s\\245M[\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"..., 636, 0) = 636\ngetsockname(11, {sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"172.17.0.2\")}, [16]) = 0\nsendto(12, \"\\210V\\1\\0\\0\\1\\0\\0\\0\\0\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 35, 0, NULL, 0) = 35\nsendto(12, \"\\27\\1\\1\\0\\0\\1\\0\\0\\0\\0\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 35, 0, NULL, 0) = 35\nepoll_wait(8, [{EPOLLOUT, {u32=69027248, u64=140003117974960}}, {EPOLLIN, {u32=69027728, u64=140003117975440}}], 512, 5000) = 2\nrecvfrom(12, \"\\210V\\201\\200\\0\\1\\0\\3\\0\\0\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 4096, 0, NULL, NULL) = 147\nrecvfrom(12, \"\\27\\1\\201\\200\\0\\1\\0\\1\\0\\1\\0\\0\\6bobcat\\6sxldns\\3com\\0\\0\"..., 4096, 0, NULL, NULL) = 168\nsocket(AF_INET, SOCK_STREAM, IPPROTO_IP) = 15\nioctl(15, FIONBIO, [1]) = 0\nepoll_ctl(8, EPOLL_CTL_ADD, 15, {EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, {u32=69027489, u64=140003117975201}}) = 0\nconnect(15, {sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"52.80.58.42\")}, 16) = -1 EINPROGRESS (Operation now in progress)\nrecvfrom(12, 0x7ffd1f603790, 4096, 0, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)\nepoll_wait(8, [{EPOLLOUT, {u32=69027489, u64=140003117975201}}], 512, 20000) = 1\ngetsockopt(15, SOL_SOCKET, SO_ERROR, [0], [4]) = 0\nwritev(15, [{\"GET /?key=testxxxx HTTP/1.0\\r\\nHos\"..., 219}], 1) = 219\nepoll_wait(8, [{EPOLLIN|EPOLLOUT, {u32=69027489, u64=140003117975201}}], 512, 60000) = 1\nrecvfrom(15, \"HTTP/1.1 200 OK\\r\\nContent-Type: t\"..., 3723, 0, NULL, NULL) = 3723\nclose(14) = 0\nreadv(15, [{\"a.qnssl.com/images/265818/Fntncr\"..., 4096}], 1) = 4096\nreadv(15, [{\"w-card-price{color: #004aa0;}.s-\"..., 4096}], 1) = 4096\nreadv(15, [{\" {\\n font-family: \\\"Open Sans\"..., 4096}], 1) = 2565\nopen(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014051\", O_RDWR|O_CREAT|O_EXCL, 0600) = 14\npwritev(14, [{\"\\5\\0\\0\\0\\0\\0\\0\\0(\\252M[\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\"..., 4096}, {\"a.qnssl.com/images/265818/Fntncr\"..., 4096}, {\"w-card-price{color: #004aa0;}.s-\"..., 4096}], 3, 0) = 12288\nwritev(11, [{\"HTTP/1.1 200 OK\\r\\nServer: nginx/1\"..., 321}], 1) = 321\nsendfile(11, 14, [636] => [12288], 11652) = 11652\nepoll_wait(8, [{EPOLLOUT, {u32=69027489, u64=140003117975201}}], 512, 59955) = 1\nepoll_wait(8, [{EPOLLIN|EPOLLOUT, {u32=69027489, u64=140003117975201}}], 512, 59953) = 1\nreadv(15, [{\"rc=\\\"//nzr2ybsda.qnssl.com/images\"..., 1531}, {\"lass=\\\"s-nav-item\\\" target=\\\"_self\\\"\"..., 4096}, {\"lign: left; font-size: 160%;\\\">\\302\\240\"..., 4096}, {\"OQswmpPvoA0.jpg?imageMogr2/strip\"..., 4096}], 4) = 10136\npwritev(14, [{\" {\\n font-family: \\\"Open Sans\"..., 4096}, {\"lass=\\\"s-nav-item\\\" target=\\\"_self\\\"\"..., 4096}, {\"lign: left; font-size: 160%;\\\">\\302\\240\"..., 4096}], 3, 12288) = 12288\nsendfile(11, 14, [12288] => [24576], 12288) = 12288\nepoll_wait(8, [{EPOLLIN|EPOLLOUT, {u32=69027489, u64=140003117975201}}], 512, 59948) = 1\nreadv(15, [{\"olor-custom1\\\">\\347\\254\\254\\344\\270\\211\\346\\226\\271\\345\"..., 3683}, {\"container title-group-container\\\"\"..., 4096}, {\";cs=srgb&s=f71a6adc1e5953a52\"..., 4096}, {\")\\\" data-bg=\\\"//nzr2ybsda.qnssl.co\"..., 4096}], 4) = 15971\nreadv(15, [{\"\\230\\263\\345\\224\\257\\346\\231\\237\\\" title=\\\"\\346\\262\\210\\351\\230\\263\\345\\224\\257\\346\\231\\237\\345\\225\\206\"..., 4096}], 1) = 2853\npwritev(14, [{\"OQswmpPvoA0.jpg?imageMogr2/strip\"..., 4096}, {\"container title-group-container\\\"\"..., 4096}, {\";cs=srgb&s=f71a6adc1e5953a52\"..., 4096}, {\")\\\" data-bg=\\\"//nzr2ybsda.qnssl.co\"..., 4096}], 4, 24576) = 16384\nsendfile(11, 14, [24576] => [40960], 16384) = 16384\nepoll_wait(8, [{EPOLLIN|EPOLLOUT, {u32=69027489, u64=140003117975201}}], 512, 59947) = 1\nreadv(15, [{\"\n\n<d\"..., 1243}, {\"\\232\\204\\344\\270\\232\\347\\273\\251\\344\\271\\237\\345\\234\\250\\344\\270\\215\\346\\226\\255\\346\\224\\200\\345\\215\\207\\343\\200\\202</d\"..., 4096}, {\"\", 4096}, {\"\", 4096}, {\"\", 4096}], 5) = 2937\npwritev(14, [{\"\\230\\263\\345\\224\\257\\346\\231\\237\\\" title=\\\"\\346\\262\\210\\351\\230\\263\\345\\224\\257\\346\\231\\237\\345\\225\\206\"..., 4096}, {\"\\232\\204\\344\\270\\232\\347\\273\\251\\344\\271\\237\\345\\234\\250\\344\\270\\215\\346\\226\\255\\346\\224\\200\\345\\215\\207\\343\\200\\202</d\"..., 1694}], 2, 40960) = 5790 sendfile(11, 14, [40960] => [46750], 5790) = 5790\nchmod(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014051\", 0600) = 0\nrename(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014051\", \"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2\") = 0\nfstat(14, {st_dev=makedev(253, 1), st_ino=655502, st_mode=S_IFREG|0600, st_nlink=1, st_uid=101, st_gid=101, st_blksize=4096, st_blocks=96, st_size=46750, st_atime=2018/07/17-16:34:43.967698739, st_mtime=2018/07/17-16:34:43.966698736, st_ctime=2018/07/17-16:34:43.967698739}) = 0\nclose(15) = 0\nwrite(5, \"{ \\\"time\\\": \\\"2018-07-17T08:34:43+0\"..., 386) = 386\nclose(14) = 0\nsetsockopt(11, SOL_TCP, TCP_NODELAY, [1], 4) = 0\nepoll_wait(8, [{EPOLLIN|EPOLLOUT|EPOLLRDHUP, {u32=69027248, u64=140003117974960}}], 512, 65000) = 1\nrecvfrom(11, \"\", 1024, 0, NULL, NULL) = 0\nclose(11) = 0\n```","slug":"slb-502-debug","updated":"2019-10-19T08:11:47.770Z","photos":[],"link":"","_id":"ck42dyijt00k5u9ur6hi5ibfd","content":"<p>502</p>\n<ol>\n<li>502</li>\n</ol>\n<p><img src=\"/images/img_5b5183b84d4dd.png\" alt=\"img\"></p>\n<p> response headercaptaincaptain502nginx proxy_passbobcat.sxldns.com.</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">set</span> <span class=\"variable\">$bobcat_backend</span> <span class=\"string\">\"bobcat.sxldns.com\"</span>;</span><br><span class=\"line\"><span class=\"attribute\">proxy_pass</span> http://<span class=\"variable\">$bobcat_backend</span>;</span><br></pre></td></tr></table></figure>\n\n<p>curlbobcat.sxldns.com,IPcurl,</p>\n<p><img src=\"/images/img_5b5184bfd49e3.png\" alt=\"img\"></p>\n<p>nginx</p>\n<p>,nginxproxycache,nginxcacheresponsecontentnginxbackendnginx cachediskSLB502</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">proxy_cache_path /etc/nginx/china_cache <span class=\"attribute\">levels</span>=1:2 <span class=\"attribute\">keys_zone</span>=user_page_cache:100m <span class=\"attribute\">max_size</span>=20g <span class=\"attribute\">inactive</span>=60m <span class=\"attribute\">use_temp_path</span>=off;</span><br></pre></td></tr></table></figure>\n\n<p>DEBUG</p>\n<ol>\n<li>containernginx workerPID</li>\n</ol>\n<p><img src=\"/images/img_5b5184fb1c8d4.png\" alt=\"img\"></p>\n<ol start=\"2\">\n<li>strace</li>\n</ol>\n<p><img src=\"/images/img_5b518515e4fe7.png\" alt=\"img\"></p>\n<p>stracestrace</p>\n<p>nginx cache<code>/etc/nginx/china_cache</code><code>no space</code>writev()sendfile()SLB<code>badgateway</code>.</p>\n<p>PS</p>\n<ol>\n<li>nginxproxycacheopen()diskcache</li>\n<li>debugno space</li>\n</ol>\n<p></p>\n<figure class=\"highlight taggerscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.</span><br><span class=\"line\">[root@iZ2ze2mzhjk3ou1vsnkthzZ rpm]# strace -p 3904 -v</span><br><span class=\"line\">strace: Process 3904 attached</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN, &#123;u32=69025808, u64=140003117973520&#125;&#125;], 512, -1) = 1</span><br><span class=\"line\">accept4(6, &#123;sa_family=AF_INET, sin_port=htons(59464), sin_addr=inet_addr(\"10.130.0.4\")&#125;, [16], SOCK_NONBLOCK) = 11</span><br><span class=\"line\">epoll_ctl(8, EPOLL_CTL_ADD, 11, &#123;EPOLLIN|EPOLLRDHUP|EPOLLET, &#123;u32=69027249, u64=140003117974961&#125;&#125;) = 0</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN, &#123;u32=69027249, u64=140003117974961&#125;&#125;], 512, 60000) = 1</span><br><span class=\"line\">recvfrom(11, \"GET /?key=testxxxx HTTP/1.1<span class=\"symbol\">\\r</span><span class=\"symbol\">\\n</span>Use\"..., 1024, 0, NULL, NULL) = 88</span><br><span class=\"line\">epoll_ctl(8, EPOLL_CTL_MOD, 11, &#123;EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, &#123;u32=69027249, u64=140003117974961&#125;&#125;) = 0</span><br><span class=\"line\">open(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2\", O_RDONLY|O_NONBLOCK) = 14</span><br><span class=\"line\">fstat(14, &#123;st_dev=makedev(253, 1), st_ino=655502, st_mode=S_IFREG|0600, st_nlink=1, st_uid=101, st_gid=101, st_blksize=4096, st_blocks=96, st_size=46750, st_atime=2018/07/17-16:34:43.967698739, st_mtime=2018/07/17-16:34:43.966698736, st_ctime=2018/07/17-16:34:43.967698739&#125;) = 0</span><br><span class=\"line\">pread64(14, \"<span class=\"symbol\">\\5</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>(<span class=\"symbol\">\\2</span>52M[<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 636, 0) = 636</span><br><span class=\"line\">getsockname(11, &#123;sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"172.17.0.2\")&#125;, [16]) = 0</span><br><span class=\"line\">sendto(13, \"nN<span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 35, 0, NULL, 0) = 35</span><br><span class=\"line\">sendto(13, \"<span class=\"symbol\">\\3</span>75<span class=\"symbol\">\\2</span>15<span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 35, 0, NULL, 0) = 35</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLOUT, &#123;u32=69027249, u64=140003117974961&#125;&#125;, &#123;EPOLLIN, &#123;u32=69026288, u64=140003117974000&#125;&#125;], 512, 5000) = 2</span><br><span class=\"line\">recvfrom(13, \"nN<span class=\"symbol\">\\2</span>01<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\3</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 4096, 0, NULL, NULL) = 147</span><br><span class=\"line\">recvfrom(13, \"<span class=\"symbol\">\\3</span>75<span class=\"symbol\">\\2</span>15<span class=\"symbol\">\\2</span>01<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 4096, 0, NULL, NULL) = 168</span><br><span class=\"line\">socket(AF_INET, SOCK_STREAM, IPPROTO_IP) = 15</span><br><span class=\"line\">ioctl(15, FIONBIO, [1]) = 0</span><br><span class=\"line\">epoll_ctl(8, EPOLL_CTL_ADD, 15, &#123;EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, &#123;u32=69027488, u64=140003117975200&#125;&#125;) = 0</span><br><span class=\"line\">connect(15, &#123;sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"54.222.148.216\")&#125;, 16) = -1 EINPROGRESS (Operation now in progress)</span><br><span class=\"line\">recvfrom(13, 0x7ffd1f603790, 4096, 0, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLOUT, &#123;u32=69027488, u64=140003117975200&#125;&#125;], 512, 20000) = 1</span><br><span class=\"line\">getsockopt(15, SOL_SOCKET, SO_ERROR, [0], [4]) = 0</span><br><span class=\"line\">writev(15, [&#123;\"GET /?key=testxxxx HTTP/1.0<span class=\"symbol\">\\r</span><span class=\"symbol\">\\n</span>Hos\"..., 219&#125;], 1) = 219</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN|EPOLLOUT, &#123;u32=69027488, u64=140003117975200&#125;&#125;], 512, 60000) = 1</span><br><span class=\"line\">recvfrom(15, \"HTTP/1.1 200 OK<span class=\"symbol\">\\r</span><span class=\"symbol\">\\n</span>Content-Type: t\"..., 3723, 0, NULL, NULL) = 3723</span><br><span class=\"line\">close(14) = 0</span><br><span class=\"line\">readv(15, [&#123;\"a.qnssl.com/images/265818/Fntncr\"..., 4096&#125;], 1) = 4096</span><br><span class=\"line\">readv(15, [&#123;\"w-card-price&#123;color: #004aa0;&#125;.s-\"..., 4096&#125;], 1) = 4096</span><br><span class=\"line\">readv(15, [&#123;\" &#123;<span class=\"symbol\">\\n</span> font-family: <span class=\"symbol\">\\\"</span>Open Sans\"..., 4096&#125;], 1) = 373</span><br><span class=\"line\">open(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014052\", O_RDWR|O_CREAT|O_EXCL, 0600) = 14</span><br><span class=\"line\">pwritev(14, [&#123;\"<span class=\"symbol\">\\5</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\3</span>56<span class=\"symbol\">\\2</span>54M[<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 4096&#125;, &#123;\"a.qnssl.com/images/265818/Fntncr\"..., 4096&#125;, &#123;\"w-card-price&#123;color: #004aa0;&#125;.s-\"..., 4096&#125;], 3, 0) = -1 ENOSPC (No space left on device)</span><br><span class=\"line\">gettid() = 7</span><br><span class=\"line\">write(4, \"2018/07/17 08:46:33 [crit] 7#7: \"..., 328) = 328</span><br><span class=\"line\">close(15) = 0</span><br><span class=\"line\">unlink(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014052\") = 0</span><br><span class=\"line\">write(5, \"&#123; <span class=\"symbol\">\\\"</span>time<span class=\"symbol\">\\\"</span>: <span class=\"symbol\">\\\"</span>2018-07-17T08:46:33+0\"..., 382) = 382</span><br><span class=\"line\">close(14) = 0</span><br><span class=\"line\">close(11) = 0</span><br><span class=\"line\"></span><br><span class=\"line\">2.</span><br><span class=\"line\">[root@iZ2ze2mzhjk3ou1vsnkthzZ rpm]# strace -p 3904 -v</span><br><span class=\"line\">strace: Process 3904 attached</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN, &#123;u32=69025808, u64=140003117973520&#125;&#125;], 512, -1) = 1</span><br><span class=\"line\">accept4(6, &#123;sa_family=AF_INET, sin_port=htons(59360), sin_addr=inet_addr(\"10.130.0.4\")&#125;, [16], SOCK_NONBLOCK) = 11</span><br><span class=\"line\">epoll_ctl(8, EPOLL_CTL_ADD, 11, &#123;EPOLLIN|EPOLLRDHUP|EPOLLET, &#123;u32=69027248, u64=140003117974960&#125;&#125;) = 0</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN, &#123;u32=69027248, u64=140003117974960&#125;&#125;], 512, 60000) = 1</span><br><span class=\"line\">recvfrom(11, \"GET /?key=testxxxx HTTP/1.1<span class=\"symbol\">\\r</span><span class=\"symbol\">\\n</span>Use\"..., 1024, 0, NULL, NULL) = 88</span><br><span class=\"line\">epoll_ctl(8, EPOLL_CTL_MOD, 11, &#123;EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, &#123;u32=69027248, u64=140003117974960&#125;&#125;) = 0</span><br><span class=\"line\">open(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2\", O_RDONLY|O_NONBLOCK) = 14</span><br><span class=\"line\">fstat(14, &#123;st_dev=makedev(253, 1), st_ino=655504, st_mode=S_IFREG|0600, st_nlink=1, st_uid=101, st_gid=101, st_blksize=4096, st_blocks=96, st_size=46750, st_atime=2018/07/17-16:14:38.127407158, st_mtime=2018/07/17-16:14:38.127407158, st_ctime=2018/07/17-16:14:38.128407161&#125;) = 0</span><br><span class=\"line\">pread64(14, \"<span class=\"symbol\">\\5</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>s<span class=\"symbol\">\\2</span>45M[<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 636, 0) = 636</span><br><span class=\"line\">getsockname(11, &#123;sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"172.17.0.2\")&#125;, [16]) = 0</span><br><span class=\"line\">sendto(12, \"<span class=\"symbol\">\\2</span>10V<span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 35, 0, NULL, 0) = 35</span><br><span class=\"line\">sendto(12, \"<span class=\"symbol\">\\2</span>7<span class=\"symbol\">\\1</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 35, 0, NULL, 0) = 35</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLOUT, &#123;u32=69027248, u64=140003117974960&#125;&#125;, &#123;EPOLLIN, &#123;u32=69027728, u64=140003117975440&#125;&#125;], 512, 5000) = 2</span><br><span class=\"line\">recvfrom(12, \"<span class=\"symbol\">\\2</span>10V<span class=\"symbol\">\\2</span>01<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\3</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 4096, 0, NULL, NULL) = 147</span><br><span class=\"line\">recvfrom(12, \"<span class=\"symbol\">\\2</span>7<span class=\"symbol\">\\1</span><span class=\"symbol\">\\2</span>01<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 4096, 0, NULL, NULL) = 168</span><br><span class=\"line\">socket(AF_INET, SOCK_STREAM, IPPROTO_IP) = 15</span><br><span class=\"line\">ioctl(15, FIONBIO, [1]) = 0</span><br><span class=\"line\">epoll_ctl(8, EPOLL_CTL_ADD, 15, &#123;EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, &#123;u32=69027489, u64=140003117975201&#125;&#125;) = 0</span><br><span class=\"line\">connect(15, &#123;sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"52.80.58.42\")&#125;, 16) = -1 EINPROGRESS (Operation now in progress)</span><br><span class=\"line\">recvfrom(12, 0x7ffd1f603790, 4096, 0, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLOUT, &#123;u32=69027489, u64=140003117975201&#125;&#125;], 512, 20000) = 1</span><br><span class=\"line\">getsockopt(15, SOL_SOCKET, SO_ERROR, [0], [4]) = 0</span><br><span class=\"line\">writev(15, [&#123;\"GET /?key=testxxxx HTTP/1.0<span class=\"symbol\">\\r</span><span class=\"symbol\">\\n</span>Hos\"..., 219&#125;], 1) = 219</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN|EPOLLOUT, &#123;u32=69027489, u64=140003117975201&#125;&#125;], 512, 60000) = 1</span><br><span class=\"line\">recvfrom(15, \"HTTP/1.1 200 OK<span class=\"symbol\">\\r</span><span class=\"symbol\">\\n</span>Content-Type: t\"..., 3723, 0, NULL, NULL) = 3723</span><br><span class=\"line\">close(14) = 0</span><br><span class=\"line\">readv(15, [&#123;\"a.qnssl.com/images/265818/Fntncr\"..., 4096&#125;], 1) = 4096</span><br><span class=\"line\">readv(15, [&#123;\"w-card-price&#123;color: #004aa0;&#125;.s-\"..., 4096&#125;], 1) = 4096</span><br><span class=\"line\">readv(15, [&#123;\" &#123;<span class=\"symbol\">\\n</span> font-family: <span class=\"symbol\">\\\"</span>Open Sans\"..., 4096&#125;], 1) = 2565</span><br><span class=\"line\">open(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014051\", O_RDWR|O_CREAT|O_EXCL, 0600) = 14</span><br><span class=\"line\">pwritev(14, [&#123;\"<span class=\"symbol\">\\5</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>(<span class=\"symbol\">\\2</span>52M[<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 4096&#125;, &#123;\"a.qnssl.com/images/265818/Fntncr\"..., 4096&#125;, &#123;\"w-card-price&#123;color: #004aa0;&#125;.s-\"..., 4096&#125;], 3, 0) = 12288</span><br><span class=\"line\">writev(11, [&#123;\"HTTP/1.1 200 OK<span class=\"symbol\">\\r</span><span class=\"symbol\">\\n</span>Server: nginx/1\"..., 321&#125;], 1) = 321</span><br><span class=\"line\">sendfile(11, 14, [636] =&gt; [12288], 11652) = 11652</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLOUT, &#123;u32=69027489, u64=140003117975201&#125;&#125;], 512, 59955) = 1</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN|EPOLLOUT, &#123;u32=69027489, u64=140003117975201&#125;&#125;], 512, 59953) = 1</span><br><span class=\"line\">readv(15, [&#123;\"rc=<span class=\"symbol\">\\\"</span>//nzr2ybsda.qnssl.com/images\"..., 1531&#125;, &#123;\"lass=<span class=\"symbol\">\\\"</span>s-nav-item<span class=\"symbol\">\\\"</span> target=<span class=\"symbol\">\\\"</span>_self<span class=\"symbol\">\\\"</span>\"..., 4096&#125;, &#123;\"lign: left; font-size: 160<span class=\"variable\">%;\\\"&gt;\\302\\240\"..., 4096&#125;, &#123;\"OQswmpPvoA0.jpg?imageMogr2/strip\"..., 4096&#125;], 4) = 10136</span></span><br><span class=\"line\"><span class=\"variable\">pwritev(14, [&#123;\" &#123;\\n font-family: \\\"Open Sans\"..., 4096&#125;, &#123;\"lass=\\\"s-nav-item\\\" target=\\\"_self\\\"\"..., 4096&#125;, &#123;\"lign: left; font-size: 160%</span>;<span class=\"symbol\">\\\"</span>&gt;<span class=\"symbol\">\\3</span>02<span class=\"symbol\">\\2</span>40\"..., 4096&#125;], 3, 12288) = 12288</span><br><span class=\"line\">sendfile(11, 14, [12288] =&gt; [24576], 12288) = 12288</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN|EPOLLOUT, &#123;u32=69027489, u64=140003117975201&#125;&#125;], 512, 59948) = 1</span><br><span class=\"line\">readv(15, [&#123;\"olor-custom1<span class=\"symbol\">\\\"</span>&gt;<span class=\"symbol\">\\3</span>47<span class=\"symbol\">\\2</span>54<span class=\"symbol\">\\2</span>54<span class=\"symbol\">\\3</span>44<span class=\"symbol\">\\2</span>70<span class=\"symbol\">\\2</span>11<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>26<span class=\"symbol\">\\2</span>71<span class=\"symbol\">\\3</span>45\"..., 3683&#125;, &#123;\"container title-group-container<span class=\"symbol\">\\\"</span>\"..., 4096&#125;, &#123;\";cs=srgb&amp;s=f71a6adc1e5953a52\"..., 4096&#125;, &#123;\")<span class=\"symbol\">\\\"</span> data-bg=<span class=\"symbol\">\\\"</span>//nzr2ybsda.qnssl.co\"..., 4096&#125;], 4) = 15971</span><br><span class=\"line\">readv(15, [&#123;\"<span class=\"symbol\">\\2</span>30<span class=\"symbol\">\\2</span>63<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>24<span class=\"symbol\">\\2</span>57<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>31<span class=\"symbol\">\\2</span>37<span class=\"symbol\">\\\"</span> title=<span class=\"symbol\">\\\"</span><span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>62<span class=\"symbol\">\\2</span>10<span class=\"symbol\">\\3</span>51<span class=\"symbol\">\\2</span>30<span class=\"symbol\">\\2</span>63<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>24<span class=\"symbol\">\\2</span>57<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>31<span class=\"symbol\">\\2</span>37<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>25<span class=\"symbol\">\\2</span>06\"..., 4096&#125;], 1) = 2853</span><br><span class=\"line\">pwritev(14, [&#123;\"OQswmpPvoA0.jpg?imageMogr2/strip\"..., 4096&#125;, &#123;\"container title-group-container<span class=\"symbol\">\\\"</span>\"..., 4096&#125;, &#123;\";cs=srgb&amp;s=f71a6adc1e5953a52\"..., 4096&#125;, &#123;\")<span class=\"symbol\">\\\"</span> data-bg=<span class=\"symbol\">\\\"</span>//nzr2ybsda.qnssl.co\"..., 4096&#125;], 4, 24576) = 16384</span><br><span class=\"line\">sendfile(11, 14, [24576] =&gt; [40960], 16384) = 16384</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN|EPOLLOUT, &#123;u32=69027489, u64=140003117975201&#125;&#125;], 512, 59947) = 1</span><br><span class=\"line\">readv(15, [&#123;\"</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;d\"..., 1243&#125;, &#123;\"<span class=\"symbol\">\\2</span>32<span class=\"symbol\">\\2</span>04<span class=\"symbol\">\\3</span>44<span class=\"symbol\">\\2</span>70<span class=\"symbol\">\\2</span>32<span class=\"symbol\">\\3</span>47<span class=\"symbol\">\\2</span>73<span class=\"symbol\">\\2</span>51<span class=\"symbol\">\\3</span>44<span class=\"symbol\">\\2</span>71<span class=\"symbol\">\\2</span>37<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>34<span class=\"symbol\">\\2</span>50<span class=\"symbol\">\\3</span>44<span class=\"symbol\">\\2</span>70<span class=\"symbol\">\\2</span>15<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>26<span class=\"symbol\">\\2</span>55<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>24<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>15<span class=\"symbol\">\\2</span>07<span class=\"symbol\">\\3</span>43<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\2</span>02&lt;/d\"..., 4096&#125;, &#123;\"\", 4096&#125;, &#123;\"\", 4096&#125;, &#123;\"\", 4096&#125;], 5) = 2937</span><br><span class=\"line\">pwritev(14, [&#123;\"<span class=\"symbol\">\\2</span>30<span class=\"symbol\">\\2</span>63<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>24<span class=\"symbol\">\\2</span>57<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>31<span class=\"symbol\">\\2</span>37<span class=\"symbol\">\\\"</span> title=<span class=\"symbol\">\\\"</span><span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>62<span class=\"symbol\">\\2</span>10<span class=\"symbol\">\\3</span>51<span class=\"symbol\">\\2</span>30<span class=\"symbol\">\\2</span>63<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>24<span class=\"symbol\">\\2</span>57<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>31<span class=\"symbol\">\\2</span>37<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>25<span class=\"symbol\">\\2</span>06\"..., 4096&#125;, &#123;\"<span class=\"symbol\">\\2</span>32<span class=\"symbol\">\\2</span>04<span class=\"symbol\">\\3</span>44<span class=\"symbol\">\\2</span>70<span class=\"symbol\">\\2</span>32<span class=\"symbol\">\\3</span>47<span class=\"symbol\">\\2</span>73<span class=\"symbol\">\\2</span>51<span class=\"symbol\">\\3</span>44<span class=\"symbol\">\\2</span>71<span class=\"symbol\">\\2</span>37<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>34<span class=\"symbol\">\\2</span>50<span class=\"symbol\">\\3</span>44<span class=\"symbol\">\\2</span>70<span class=\"symbol\">\\2</span>15<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>26<span class=\"symbol\">\\2</span>55<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>24<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>15<span class=\"symbol\">\\2</span>07<span class=\"symbol\">\\3</span>43<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\2</span>02&lt;/d\"..., 1694&#125;], 2, 40960) = 5790 sendfile(11, 14, [40960] =&gt; [46750], 5790) = 5790</span><br><span class=\"line\">chmod(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014051\", 0600) = 0</span><br><span class=\"line\">rename(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014051\", \"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2\") = 0</span><br><span class=\"line\">fstat(14, &#123;st_dev=makedev(253, 1), st_ino=655502, st_mode=S_IFREG|0600, st_nlink=1, st_uid=101, st_gid=101, st_blksize=4096, st_blocks=96, st_size=46750, st_atime=2018/07/17-16:34:43.967698739, st_mtime=2018/07/17-16:34:43.966698736, st_ctime=2018/07/17-16:34:43.967698739&#125;) = 0</span><br><span class=\"line\">close(15) = 0</span><br><span class=\"line\">write(5, \"&#123; <span class=\"symbol\">\\\"</span>time<span class=\"symbol\">\\\"</span>: <span class=\"symbol\">\\\"</span>2018-07-17T08:34:43+0\"..., 386) = 386</span><br><span class=\"line\">close(14) = 0</span><br><span class=\"line\">setsockopt(11, SOL_TCP, TCP_NODELAY, [1], 4) = 0</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN|EPOLLOUT|EPOLLRDHUP, &#123;u32=69027248, u64=140003117974960&#125;&#125;], 512, 65000) = 1</span><br><span class=\"line\">recvfrom(11, \"\", 1024, 0, NULL, NULL) = 0</span><br><span class=\"line\">close(11) = 0</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>502</p>\n<ol>\n<li>502</li>\n</ol>\n<p><img src=\"/images/img_5b5183b84d4dd.png\" alt=\"img\"></p>\n<p> response headercaptaincaptain502nginx proxy_passbobcat.sxldns.com.</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attribute\">set</span> <span class=\"variable\">$bobcat_backend</span> <span class=\"string\">\"bobcat.sxldns.com\"</span>;</span><br><span class=\"line\"><span class=\"attribute\">proxy_pass</span> http://<span class=\"variable\">$bobcat_backend</span>;</span><br></pre></td></tr></table></figure>\n\n<p>curlbobcat.sxldns.com,IPcurl,</p>\n<p><img src=\"/images/img_5b5184bfd49e3.png\" alt=\"img\"></p>\n<p>nginx</p>\n<p>,nginxproxycache,nginxcacheresponsecontentnginxbackendnginx cachediskSLB502</p>\n<figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">proxy_cache_path /etc/nginx/china_cache <span class=\"attribute\">levels</span>=1:2 <span class=\"attribute\">keys_zone</span>=user_page_cache:100m <span class=\"attribute\">max_size</span>=20g <span class=\"attribute\">inactive</span>=60m <span class=\"attribute\">use_temp_path</span>=off;</span><br></pre></td></tr></table></figure>\n\n<p>DEBUG</p>\n<ol>\n<li>containernginx workerPID</li>\n</ol>\n<p><img src=\"/images/img_5b5184fb1c8d4.png\" alt=\"img\"></p>\n<ol start=\"2\">\n<li>strace</li>\n</ol>\n<p><img src=\"/images/img_5b518515e4fe7.png\" alt=\"img\"></p>\n<p>stracestrace</p>\n<p>nginx cache<code>/etc/nginx/china_cache</code><code>no space</code>writev()sendfile()SLB<code>badgateway</code>.</p>\n<p>PS</p>\n<ol>\n<li>nginxproxycacheopen()diskcache</li>\n<li>debugno space</li>\n</ol>\n<p></p>\n<figure class=\"highlight taggerscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1.</span><br><span class=\"line\">[root@iZ2ze2mzhjk3ou1vsnkthzZ rpm]# strace -p 3904 -v</span><br><span class=\"line\">strace: Process 3904 attached</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN, &#123;u32=69025808, u64=140003117973520&#125;&#125;], 512, -1) = 1</span><br><span class=\"line\">accept4(6, &#123;sa_family=AF_INET, sin_port=htons(59464), sin_addr=inet_addr(\"10.130.0.4\")&#125;, [16], SOCK_NONBLOCK) = 11</span><br><span class=\"line\">epoll_ctl(8, EPOLL_CTL_ADD, 11, &#123;EPOLLIN|EPOLLRDHUP|EPOLLET, &#123;u32=69027249, u64=140003117974961&#125;&#125;) = 0</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN, &#123;u32=69027249, u64=140003117974961&#125;&#125;], 512, 60000) = 1</span><br><span class=\"line\">recvfrom(11, \"GET /?key=testxxxx HTTP/1.1<span class=\"symbol\">\\r</span><span class=\"symbol\">\\n</span>Use\"..., 1024, 0, NULL, NULL) = 88</span><br><span class=\"line\">epoll_ctl(8, EPOLL_CTL_MOD, 11, &#123;EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, &#123;u32=69027249, u64=140003117974961&#125;&#125;) = 0</span><br><span class=\"line\">open(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2\", O_RDONLY|O_NONBLOCK) = 14</span><br><span class=\"line\">fstat(14, &#123;st_dev=makedev(253, 1), st_ino=655502, st_mode=S_IFREG|0600, st_nlink=1, st_uid=101, st_gid=101, st_blksize=4096, st_blocks=96, st_size=46750, st_atime=2018/07/17-16:34:43.967698739, st_mtime=2018/07/17-16:34:43.966698736, st_ctime=2018/07/17-16:34:43.967698739&#125;) = 0</span><br><span class=\"line\">pread64(14, \"<span class=\"symbol\">\\5</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>(<span class=\"symbol\">\\2</span>52M[<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 636, 0) = 636</span><br><span class=\"line\">getsockname(11, &#123;sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"172.17.0.2\")&#125;, [16]) = 0</span><br><span class=\"line\">sendto(13, \"nN<span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 35, 0, NULL, 0) = 35</span><br><span class=\"line\">sendto(13, \"<span class=\"symbol\">\\3</span>75<span class=\"symbol\">\\2</span>15<span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 35, 0, NULL, 0) = 35</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLOUT, &#123;u32=69027249, u64=140003117974961&#125;&#125;, &#123;EPOLLIN, &#123;u32=69026288, u64=140003117974000&#125;&#125;], 512, 5000) = 2</span><br><span class=\"line\">recvfrom(13, \"nN<span class=\"symbol\">\\2</span>01<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\3</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 4096, 0, NULL, NULL) = 147</span><br><span class=\"line\">recvfrom(13, \"<span class=\"symbol\">\\3</span>75<span class=\"symbol\">\\2</span>15<span class=\"symbol\">\\2</span>01<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 4096, 0, NULL, NULL) = 168</span><br><span class=\"line\">socket(AF_INET, SOCK_STREAM, IPPROTO_IP) = 15</span><br><span class=\"line\">ioctl(15, FIONBIO, [1]) = 0</span><br><span class=\"line\">epoll_ctl(8, EPOLL_CTL_ADD, 15, &#123;EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, &#123;u32=69027488, u64=140003117975200&#125;&#125;) = 0</span><br><span class=\"line\">connect(15, &#123;sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"54.222.148.216\")&#125;, 16) = -1 EINPROGRESS (Operation now in progress)</span><br><span class=\"line\">recvfrom(13, 0x7ffd1f603790, 4096, 0, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLOUT, &#123;u32=69027488, u64=140003117975200&#125;&#125;], 512, 20000) = 1</span><br><span class=\"line\">getsockopt(15, SOL_SOCKET, SO_ERROR, [0], [4]) = 0</span><br><span class=\"line\">writev(15, [&#123;\"GET /?key=testxxxx HTTP/1.0<span class=\"symbol\">\\r</span><span class=\"symbol\">\\n</span>Hos\"..., 219&#125;], 1) = 219</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN|EPOLLOUT, &#123;u32=69027488, u64=140003117975200&#125;&#125;], 512, 60000) = 1</span><br><span class=\"line\">recvfrom(15, \"HTTP/1.1 200 OK<span class=\"symbol\">\\r</span><span class=\"symbol\">\\n</span>Content-Type: t\"..., 3723, 0, NULL, NULL) = 3723</span><br><span class=\"line\">close(14) = 0</span><br><span class=\"line\">readv(15, [&#123;\"a.qnssl.com/images/265818/Fntncr\"..., 4096&#125;], 1) = 4096</span><br><span class=\"line\">readv(15, [&#123;\"w-card-price&#123;color: #004aa0;&#125;.s-\"..., 4096&#125;], 1) = 4096</span><br><span class=\"line\">readv(15, [&#123;\" &#123;<span class=\"symbol\">\\n</span> font-family: <span class=\"symbol\">\\\"</span>Open Sans\"..., 4096&#125;], 1) = 373</span><br><span class=\"line\">open(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014052\", O_RDWR|O_CREAT|O_EXCL, 0600) = 14</span><br><span class=\"line\">pwritev(14, [&#123;\"<span class=\"symbol\">\\5</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\3</span>56<span class=\"symbol\">\\2</span>54M[<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 4096&#125;, &#123;\"a.qnssl.com/images/265818/Fntncr\"..., 4096&#125;, &#123;\"w-card-price&#123;color: #004aa0;&#125;.s-\"..., 4096&#125;], 3, 0) = -1 ENOSPC (No space left on device)</span><br><span class=\"line\">gettid() = 7</span><br><span class=\"line\">write(4, \"2018/07/17 08:46:33 [crit] 7#7: \"..., 328) = 328</span><br><span class=\"line\">close(15) = 0</span><br><span class=\"line\">unlink(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014052\") = 0</span><br><span class=\"line\">write(5, \"&#123; <span class=\"symbol\">\\\"</span>time<span class=\"symbol\">\\\"</span>: <span class=\"symbol\">\\\"</span>2018-07-17T08:46:33+0\"..., 382) = 382</span><br><span class=\"line\">close(14) = 0</span><br><span class=\"line\">close(11) = 0</span><br><span class=\"line\"></span><br><span class=\"line\">2.</span><br><span class=\"line\">[root@iZ2ze2mzhjk3ou1vsnkthzZ rpm]# strace -p 3904 -v</span><br><span class=\"line\">strace: Process 3904 attached</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN, &#123;u32=69025808, u64=140003117973520&#125;&#125;], 512, -1) = 1</span><br><span class=\"line\">accept4(6, &#123;sa_family=AF_INET, sin_port=htons(59360), sin_addr=inet_addr(\"10.130.0.4\")&#125;, [16], SOCK_NONBLOCK) = 11</span><br><span class=\"line\">epoll_ctl(8, EPOLL_CTL_ADD, 11, &#123;EPOLLIN|EPOLLRDHUP|EPOLLET, &#123;u32=69027248, u64=140003117974960&#125;&#125;) = 0</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN, &#123;u32=69027248, u64=140003117974960&#125;&#125;], 512, 60000) = 1</span><br><span class=\"line\">recvfrom(11, \"GET /?key=testxxxx HTTP/1.1<span class=\"symbol\">\\r</span><span class=\"symbol\">\\n</span>Use\"..., 1024, 0, NULL, NULL) = 88</span><br><span class=\"line\">epoll_ctl(8, EPOLL_CTL_MOD, 11, &#123;EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, &#123;u32=69027248, u64=140003117974960&#125;&#125;) = 0</span><br><span class=\"line\">open(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2\", O_RDONLY|O_NONBLOCK) = 14</span><br><span class=\"line\">fstat(14, &#123;st_dev=makedev(253, 1), st_ino=655504, st_mode=S_IFREG|0600, st_nlink=1, st_uid=101, st_gid=101, st_blksize=4096, st_blocks=96, st_size=46750, st_atime=2018/07/17-16:14:38.127407158, st_mtime=2018/07/17-16:14:38.127407158, st_ctime=2018/07/17-16:14:38.128407161&#125;) = 0</span><br><span class=\"line\">pread64(14, \"<span class=\"symbol\">\\5</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>s<span class=\"symbol\">\\2</span>45M[<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 636, 0) = 636</span><br><span class=\"line\">getsockname(11, &#123;sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"172.17.0.2\")&#125;, [16]) = 0</span><br><span class=\"line\">sendto(12, \"<span class=\"symbol\">\\2</span>10V<span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 35, 0, NULL, 0) = 35</span><br><span class=\"line\">sendto(12, \"<span class=\"symbol\">\\2</span>7<span class=\"symbol\">\\1</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 35, 0, NULL, 0) = 35</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLOUT, &#123;u32=69027248, u64=140003117974960&#125;&#125;, &#123;EPOLLIN, &#123;u32=69027728, u64=140003117975440&#125;&#125;], 512, 5000) = 2</span><br><span class=\"line\">recvfrom(12, \"<span class=\"symbol\">\\2</span>10V<span class=\"symbol\">\\2</span>01<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\3</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 4096, 0, NULL, NULL) = 147</span><br><span class=\"line\">recvfrom(12, \"<span class=\"symbol\">\\2</span>7<span class=\"symbol\">\\1</span><span class=\"symbol\">\\2</span>01<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\1</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\6</span>bobcat<span class=\"symbol\">\\6</span>sxldns<span class=\"symbol\">\\3</span>com<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 4096, 0, NULL, NULL) = 168</span><br><span class=\"line\">socket(AF_INET, SOCK_STREAM, IPPROTO_IP) = 15</span><br><span class=\"line\">ioctl(15, FIONBIO, [1]) = 0</span><br><span class=\"line\">epoll_ctl(8, EPOLL_CTL_ADD, 15, &#123;EPOLLIN|EPOLLOUT|EPOLLRDHUP|EPOLLET, &#123;u32=69027489, u64=140003117975201&#125;&#125;) = 0</span><br><span class=\"line\">connect(15, &#123;sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(\"52.80.58.42\")&#125;, 16) = -1 EINPROGRESS (Operation now in progress)</span><br><span class=\"line\">recvfrom(12, 0x7ffd1f603790, 4096, 0, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLOUT, &#123;u32=69027489, u64=140003117975201&#125;&#125;], 512, 20000) = 1</span><br><span class=\"line\">getsockopt(15, SOL_SOCKET, SO_ERROR, [0], [4]) = 0</span><br><span class=\"line\">writev(15, [&#123;\"GET /?key=testxxxx HTTP/1.0<span class=\"symbol\">\\r</span><span class=\"symbol\">\\n</span>Hos\"..., 219&#125;], 1) = 219</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN|EPOLLOUT, &#123;u32=69027489, u64=140003117975201&#125;&#125;], 512, 60000) = 1</span><br><span class=\"line\">recvfrom(15, \"HTTP/1.1 200 OK<span class=\"symbol\">\\r</span><span class=\"symbol\">\\n</span>Content-Type: t\"..., 3723, 0, NULL, NULL) = 3723</span><br><span class=\"line\">close(14) = 0</span><br><span class=\"line\">readv(15, [&#123;\"a.qnssl.com/images/265818/Fntncr\"..., 4096&#125;], 1) = 4096</span><br><span class=\"line\">readv(15, [&#123;\"w-card-price&#123;color: #004aa0;&#125;.s-\"..., 4096&#125;], 1) = 4096</span><br><span class=\"line\">readv(15, [&#123;\" &#123;<span class=\"symbol\">\\n</span> font-family: <span class=\"symbol\">\\\"</span>Open Sans\"..., 4096&#125;], 1) = 2565</span><br><span class=\"line\">open(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014051\", O_RDWR|O_CREAT|O_EXCL, 0600) = 14</span><br><span class=\"line\">pwritev(14, [&#123;\"<span class=\"symbol\">\\5</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>(<span class=\"symbol\">\\2</span>52M[<span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span><span class=\"symbol\">\\0</span>\"..., 4096&#125;, &#123;\"a.qnssl.com/images/265818/Fntncr\"..., 4096&#125;, &#123;\"w-card-price&#123;color: #004aa0;&#125;.s-\"..., 4096&#125;], 3, 0) = 12288</span><br><span class=\"line\">writev(11, [&#123;\"HTTP/1.1 200 OK<span class=\"symbol\">\\r</span><span class=\"symbol\">\\n</span>Server: nginx/1\"..., 321&#125;], 1) = 321</span><br><span class=\"line\">sendfile(11, 14, [636] =&gt; [12288], 11652) = 11652</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLOUT, &#123;u32=69027489, u64=140003117975201&#125;&#125;], 512, 59955) = 1</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN|EPOLLOUT, &#123;u32=69027489, u64=140003117975201&#125;&#125;], 512, 59953) = 1</span><br><span class=\"line\">readv(15, [&#123;\"rc=<span class=\"symbol\">\\\"</span>//nzr2ybsda.qnssl.com/images\"..., 1531&#125;, &#123;\"lass=<span class=\"symbol\">\\\"</span>s-nav-item<span class=\"symbol\">\\\"</span> target=<span class=\"symbol\">\\\"</span>_self<span class=\"symbol\">\\\"</span>\"..., 4096&#125;, &#123;\"lign: left; font-size: 160<span class=\"variable\">%;\\\"&gt;\\302\\240\"..., 4096&#125;, &#123;\"OQswmpPvoA0.jpg?imageMogr2/strip\"..., 4096&#125;], 4) = 10136</span></span><br><span class=\"line\"><span class=\"variable\">pwritev(14, [&#123;\" &#123;\\n font-family: \\\"Open Sans\"..., 4096&#125;, &#123;\"lass=\\\"s-nav-item\\\" target=\\\"_self\\\"\"..., 4096&#125;, &#123;\"lign: left; font-size: 160%</span>;<span class=\"symbol\">\\\"</span>&gt;<span class=\"symbol\">\\3</span>02<span class=\"symbol\">\\2</span>40\"..., 4096&#125;], 3, 12288) = 12288</span><br><span class=\"line\">sendfile(11, 14, [12288] =&gt; [24576], 12288) = 12288</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN|EPOLLOUT, &#123;u32=69027489, u64=140003117975201&#125;&#125;], 512, 59948) = 1</span><br><span class=\"line\">readv(15, [&#123;\"olor-custom1<span class=\"symbol\">\\\"</span>&gt;<span class=\"symbol\">\\3</span>47<span class=\"symbol\">\\2</span>54<span class=\"symbol\">\\2</span>54<span class=\"symbol\">\\3</span>44<span class=\"symbol\">\\2</span>70<span class=\"symbol\">\\2</span>11<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>26<span class=\"symbol\">\\2</span>71<span class=\"symbol\">\\3</span>45\"..., 3683&#125;, &#123;\"container title-group-container<span class=\"symbol\">\\\"</span>\"..., 4096&#125;, &#123;\";cs=srgb&amp;s=f71a6adc1e5953a52\"..., 4096&#125;, &#123;\")<span class=\"symbol\">\\\"</span> data-bg=<span class=\"symbol\">\\\"</span>//nzr2ybsda.qnssl.co\"..., 4096&#125;], 4) = 15971</span><br><span class=\"line\">readv(15, [&#123;\"<span class=\"symbol\">\\2</span>30<span class=\"symbol\">\\2</span>63<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>24<span class=\"symbol\">\\2</span>57<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>31<span class=\"symbol\">\\2</span>37<span class=\"symbol\">\\\"</span> title=<span class=\"symbol\">\\\"</span><span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>62<span class=\"symbol\">\\2</span>10<span class=\"symbol\">\\3</span>51<span class=\"symbol\">\\2</span>30<span class=\"symbol\">\\2</span>63<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>24<span class=\"symbol\">\\2</span>57<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>31<span class=\"symbol\">\\2</span>37<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>25<span class=\"symbol\">\\2</span>06\"..., 4096&#125;], 1) = 2853</span><br><span class=\"line\">pwritev(14, [&#123;\"OQswmpPvoA0.jpg?imageMogr2/strip\"..., 4096&#125;, &#123;\"container title-group-container<span class=\"symbol\">\\\"</span>\"..., 4096&#125;, &#123;\";cs=srgb&amp;s=f71a6adc1e5953a52\"..., 4096&#125;, &#123;\")<span class=\"symbol\">\\\"</span> data-bg=<span class=\"symbol\">\\\"</span>//nzr2ybsda.qnssl.co\"..., 4096&#125;], 4, 24576) = 16384</span><br><span class=\"line\">sendfile(11, 14, [24576] =&gt; [40960], 16384) = 16384</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN|EPOLLOUT, &#123;u32=69027489, u64=140003117975201&#125;&#125;], 512, 59947) = 1</span><br><span class=\"line\">readv(15, [&#123;\"</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;d\"..., 1243&#125;, &#123;\"<span class=\"symbol\">\\2</span>32<span class=\"symbol\">\\2</span>04<span class=\"symbol\">\\3</span>44<span class=\"symbol\">\\2</span>70<span class=\"symbol\">\\2</span>32<span class=\"symbol\">\\3</span>47<span class=\"symbol\">\\2</span>73<span class=\"symbol\">\\2</span>51<span class=\"symbol\">\\3</span>44<span class=\"symbol\">\\2</span>71<span class=\"symbol\">\\2</span>37<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>34<span class=\"symbol\">\\2</span>50<span class=\"symbol\">\\3</span>44<span class=\"symbol\">\\2</span>70<span class=\"symbol\">\\2</span>15<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>26<span class=\"symbol\">\\2</span>55<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>24<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>15<span class=\"symbol\">\\2</span>07<span class=\"symbol\">\\3</span>43<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\2</span>02&lt;/d\"..., 4096&#125;, &#123;\"\", 4096&#125;, &#123;\"\", 4096&#125;, &#123;\"\", 4096&#125;], 5) = 2937</span><br><span class=\"line\">pwritev(14, [&#123;\"<span class=\"symbol\">\\2</span>30<span class=\"symbol\">\\2</span>63<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>24<span class=\"symbol\">\\2</span>57<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>31<span class=\"symbol\">\\2</span>37<span class=\"symbol\">\\\"</span> title=<span class=\"symbol\">\\\"</span><span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>62<span class=\"symbol\">\\2</span>10<span class=\"symbol\">\\3</span>51<span class=\"symbol\">\\2</span>30<span class=\"symbol\">\\2</span>63<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>24<span class=\"symbol\">\\2</span>57<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>31<span class=\"symbol\">\\2</span>37<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>25<span class=\"symbol\">\\2</span>06\"..., 4096&#125;, &#123;\"<span class=\"symbol\">\\2</span>32<span class=\"symbol\">\\2</span>04<span class=\"symbol\">\\3</span>44<span class=\"symbol\">\\2</span>70<span class=\"symbol\">\\2</span>32<span class=\"symbol\">\\3</span>47<span class=\"symbol\">\\2</span>73<span class=\"symbol\">\\2</span>51<span class=\"symbol\">\\3</span>44<span class=\"symbol\">\\2</span>71<span class=\"symbol\">\\2</span>37<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>34<span class=\"symbol\">\\2</span>50<span class=\"symbol\">\\3</span>44<span class=\"symbol\">\\2</span>70<span class=\"symbol\">\\2</span>15<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>26<span class=\"symbol\">\\2</span>55<span class=\"symbol\">\\3</span>46<span class=\"symbol\">\\2</span>24<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\3</span>45<span class=\"symbol\">\\2</span>15<span class=\"symbol\">\\2</span>07<span class=\"symbol\">\\3</span>43<span class=\"symbol\">\\2</span>00<span class=\"symbol\">\\2</span>02&lt;/d\"..., 1694&#125;], 2, 40960) = 5790 sendfile(11, 14, [40960] =&gt; [46750], 5790) = 5790</span><br><span class=\"line\">chmod(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014051\", 0600) = 0</span><br><span class=\"line\">rename(\"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2.0000014051\", \"/etc/nginx/china_cache/2/7d/2ac65d1f9080e2baff45a4332f9017d2\") = 0</span><br><span class=\"line\">fstat(14, &#123;st_dev=makedev(253, 1), st_ino=655502, st_mode=S_IFREG|0600, st_nlink=1, st_uid=101, st_gid=101, st_blksize=4096, st_blocks=96, st_size=46750, st_atime=2018/07/17-16:34:43.967698739, st_mtime=2018/07/17-16:34:43.966698736, st_ctime=2018/07/17-16:34:43.967698739&#125;) = 0</span><br><span class=\"line\">close(15) = 0</span><br><span class=\"line\">write(5, \"&#123; <span class=\"symbol\">\\\"</span>time<span class=\"symbol\">\\\"</span>: <span class=\"symbol\">\\\"</span>2018-07-17T08:34:43+0\"..., 386) = 386</span><br><span class=\"line\">close(14) = 0</span><br><span class=\"line\">setsockopt(11, SOL_TCP, TCP_NODELAY, [1], 4) = 0</span><br><span class=\"line\">epoll_wait(8, [&#123;EPOLLIN|EPOLLOUT|EPOLLRDHUP, &#123;u32=69027248, u64=140003117974960&#125;&#125;], 512, 65000) = 1</span><br><span class=\"line\">recvfrom(11, \"\", 1024, 0, NULL, NULL) = 0</span><br><span class=\"line\">close(11) = 0</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"UDEV","published":1,"author":"xiemx","comments":1,"date":"2016-02-17T21:02:23.000Z","_content":"udevudevbusvendorudevuser spaceLinux Standard Base LSB\n\n### \n\n![image-20191018151450374](/images/image-20191018151450374.png)\n\n### rule\n\n```conf\n[mingxu.xie@cn-aux-cc udev]$ ll -R\n.:\ntotal 8\ndrwxr-xr-x 2 root root 4096 Jun  6 02:58 rules.d\n-rw-r--r-- 1 root root  218 Mar 19  2014 udev.conf\n\n./rules.d:\ntotal 32\n-rw-r--r-- 1 root root  640 Jul 31  2016 51-ec2-hvm-devices.rules\n-rw-r--r-- 1 root root  641 Jul 31  2016 52-ec2-vcpu.rules\n-rw-r--r-- 1 root root  740 Jul 31  2016 53-ec2-network-interfaces.rules\n-rw-r--r-- 1 root root  680 Jul 31  2016 60-cdrom_id.rules\n-rw-r--r-- 1 root root  326 Apr 26  2016 60-raw.rules\n-rw-r--r-- 1 root root 1343 Jul 31  2016 70-ec2-nvme-devices.rules\n-rw-r--r-- 1 root root 1424 Jul 31  2016 75-persistent-net-generator.rules\n-rwxr-xr-x 1 root root  343 Aug 21  2016 80-docker.rules\n\n#  /etc/udev/udev.conf \nudev_root=\"/dev/\"\nudev_rules=\"/etc/udev/rules.d/\"\n\n#rulerc\n[mingxu.xie@cn-aux-cc udev]$ cat rules.d/53-ec2-network-interfaces.rules\n# Copyright (C) 2012 Amazon.com, Inc. or its affiliates.\n# All Rights Reserved.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\").\n# You may not use this file except in compliance with the License.\n# A copy of the License is located at\n#\n#    http://aws.amazon.com/apache2.0/\n#\n# or in the \"license\" file accompanying this file. This file is\n# distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS\n# OF ANY KIND, either express or implied. See the License for the\n# specific language governing permissions and limitations under the\n# License.\n\nACTION==\"add\", SUBSYSTEM==\"net\", KERNEL==\"eth*\", IMPORT{program}=\"/bin/sleep 1\"\nSUBSYSTEM==\"net\", KERNEL==\"eth*\", RUN+=\"/etc/sysconfig/network-scripts/ec2net.hotplug\"\n```\n```conf\n#docker run -it --rm nginx bash\n[mingxu.xie@cn-aux-cc udev]$ udevadm monitor\nmonitor will print the received events for:\nUDEV - the event which udev sends out after rule processing\nKERNEL - the kernel uevent\n\nKERNEL[240932.229041] add      /devices/virtual/bdi/253:8 (bdi)\nKERNEL[240932.229579] add      /devices/virtual/block/dm-8 (block)\nUDEV  [240932.229612] add      /devices/virtual/bdi/253:8 (bdi)\nUDEV  [240932.229641] add      /devices/virtual/block/dm-8 (block)\nKERNEL[240932.248388] change   /devices/virtual/block/dm-8 (block)\nUDEV  [240932.272904] change   /devices/virtual/block/dm-8 (block)\nKERNEL[240932.425971] remove   /devices/virtual/block/dm-8 (block)\nUDEV  [240932.428073] remove   /devices/virtual/block/dm-8 (block)\nKERNEL[240932.456141] remove   /devices/virtual/bdi/253:8 (bdi)\nKERNEL[240932.456261] remove   /devices/virtual/block/dm-8 (block)\nUDEV  [240932.456380] remove   /devices/virtual/bdi/253:8 (bdi)\nUDEV  [240932.456419] remove   /devices/virtual/block/dm-8 (block)\nKERNEL[240932.469307] add      /devices/virtual/bdi/253:8 (bdi)\nKERNEL[240932.469384] add      /devices/virtual/block/dm-8 (block)\nUDEV  [240932.469657] add      /devices/virtual/bdi/253:8 (bdi)\nUDEV  [240932.469691] add      /devices/virtual/block/dm-8 (block)\nKERNEL[240932.488228] change   /devices/virtual/block/dm-8 (block)\nUDEV  [240932.504203] change   /devices/virtual/block/dm-8 (block)\nKERNEL[240932.636785] remove   /devices/virtual/block/dm-8 (block)\nUDEV  [240932.638755] remove   /devices/virtual/block/dm-8 (block)\nKERNEL[240932.676137] remove   /devices/virtual/bdi/253:8 (bdi)\nKERNEL[240932.676245] remove   /devices/virtual/block/dm-8 (block)\nUDEV  [240932.676367] remove   /devices/virtual/bdi/253:8 (bdi)\nUDEV  [240932.676420] remove   /devices/virtual/block/dm-8 (block)\nKERNEL[240932.683098] add      /devices/virtual/bdi/253:8 (bdi)\nKERNEL[240932.683204] add      /devices/virtual/block/dm-8 (block)\nUDEV  [240932.683384] add      /devices/virtual/bdi/253:8 (bdi)\nUDEV  [240932.683582] add      /devices/virtual/block/dm-8 (block)\nKERNEL[240932.696227] change   /devices/virtual/block/dm-8 (block)\nUDEV  [240932.712517] change   /devices/virtual/block/dm-8 (block)\nKERNEL[240932.793677] add      /devices/virtual/net/veth4d1712b (net)\nKERNEL[240932.793699] add      /devices/virtual/net/veth4d1712b/queues/rx-0 (queues)\nKERNEL[240932.793727] add      /devices/virtual/net/veth4d1712b/queues/tx-0 (queues)\nKERNEL[240932.793908] add      /devices/virtual/net/veth17f6e3e (net)\nKERNEL[240932.793930] add      /devices/virtual/net/veth17f6e3e/queues/rx-0 (queues)\nKERNEL[240932.793942] add      /devices/virtual/net/veth17f6e3e/queues/tx-0 (queues)\nUDEV  [240932.827598] add      /devices/virtual/net/veth4d1712b (net)\nUDEV  [240932.827843] add      /devices/virtual/net/veth4d1712b/queues/rx-0 (queues)\nUDEV  [240932.828121] add      /devices/virtual/net/veth4d1712b/queues/tx-0 (queues)\nKERNEL[240932.849171] add      /kernel/slab/:A-0000200/cgroup/vm_area_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.849196] add      /kernel/slab/:A-0000064/cgroup/anon_vma_chain(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.849211] add      /kernel/slab/:A-0000200/cgroup/vm_area_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.849225] add      /kernel/slab/anon_vma/cgroup/anon_vma(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.849238] add      /kernel/slab/:aA-0000192/cgroup/dentry(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.849252] add      /kernel/slab/proc_inode_cache/cgroup/proc_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.849269] add      /kernel/slab/:A-0000064/cgroup/anon_vma_chain(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.849436] add      /kernel/slab/:0000064/cgroup/kmalloc-64(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.849455] add      /kernel/slab/shmem_inode_cache/cgroup/shmem_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.849709] add      /kernel/slab/proc_inode_cache/cgroup/proc_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.850033] add      /kernel/slab/anon_vma/cgroup/anon_vma(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.850374] add      /kernel/slab/shmem_inode_cache/cgroup/shmem_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.850527] add      /kernel/slab/:aA-0000192/cgroup/dentry(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.852368] add      /kernel/slab/:0000064/cgroup/kmalloc-64(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.854849] add      /kernel/slab/:0000192/cgroup/kmalloc-192(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.854871] add      /kernel/slab/:0001024/cgroup/kmalloc-1024(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855103] add      /kernel/slab/radix_tree_node/cgroup/radix_tree_node(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.855120] add      /kernel/slab/:0000192/cgroup/kmalloc-192(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855133] add      /kernel/slab/:A-0000192/cgroup/cred_jar(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855145] add      /kernel/slab/:A-0002048/cgroup/mm_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855158] add      /kernel/slab/mqueue_inode_cache/cgroup/mqueue_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855170] add      /kernel/slab/sock_inode_cache/cgroup/sock_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855359] add      /kernel/slab/:A-0009664/cgroup/task_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.855395] add      /kernel/slab/:A-0002048/cgroup/mm_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855410] add      /kernel/slab/:A-0000704/cgroup/files_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.855445] add      /kernel/slab/mqueue_inode_cache/cgroup/mqueue_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855461] add      /kernel/slab/sighand_cache/cgroup/sighand_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.855474] add      /kernel/slab/:0001024/cgroup/kmalloc-1024(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855487] add      /kernel/slab/:A-0001024/cgroup/signal_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855499] add      /kernel/slab/:A-0000128/cgroup/pid(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.855512] add      /kernel/slab/radix_tree_node/cgroup/radix_tree_node(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.856010] add      /kernel/slab/sock_inode_cache/cgroup/sock_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.856029] add      /kernel/slab/:A-0009664/cgroup/task_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.856045] add      /kernel/slab/sighand_cache/cgroup/sighand_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.856077] add      /kernel/slab/:0000256/cgroup/kmalloc-256(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.856092] add      /kernel/slab/:A-0000704/cgroup/files_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.856104] add      /kernel/slab/:0000512/cgroup/kmalloc-512(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.856188] add      /kernel/slab/:A-0000128/cgroup/pid(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.857080] add      /kernel/slab/:A-0000192/cgroup/cred_jar(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.857105] add      /kernel/slab/:A-0001024/cgroup/signal_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.857126] add      /kernel/slab/:0000256/cgroup/kmalloc-256(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.857140] add      /kernel/slab/:0000512/cgroup/kmalloc-512(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.862157] add      /kernel/slab/xfs_inode/cgroup/xfs_inode(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.862348] add      /kernel/slab/xfs_inode/cgroup/xfs_inode(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.863008] add      /kernel/slab/inode_cache/cgroup/inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.863179] add      /kernel/slab/inode_cache/cgroup/inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.932564] add      /devices/virtual/net/veth17f6e3e (net)\nUDEV  [240932.932779] add      /devices/virtual/net/veth17f6e3e/queues/rx-0 (queues)\nUDEV  [240932.932880] add      /devices/virtual/net/veth17f6e3e/queues/tx-0 (queues)\nKERNEL[240932.960183] remove   /devices/virtual/net/veth4d1712b (net)\nUDEV  [240932.982851] remove   /devices/virtual/net/veth4d1712b (net)\nKERNEL[240933.089679] add      /kernel/slab/:0000008/cgroup/kmalloc-8(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240933.089933] add      /kernel/slab/:0000008/cgroup/kmalloc-8(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240933.150833] add      /kernel/slab/:0002048/cgroup/kmalloc-2048(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240933.150863] add      /kernel/slab/:0000096/cgroup/kmalloc-96(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240933.151052] add      /kernel/slab/:0002048/cgroup/kmalloc-2048(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240933.151130] add      /kernel/slab/:0000096/cgroup/kmalloc-96(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\n\n```","source":"_posts/udev.md","raw":"---\nlayout: post\ntitle: UDEV\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2016-02-18 05:02:23\ntags: [ udev, linux ]\ncategories:\n    - linux\n---\nudevudevbusvendorudevuser spaceLinux Standard Base LSB\n\n### \n\n![image-20191018151450374](/images/image-20191018151450374.png)\n\n### rule\n\n```conf\n[mingxu.xie@cn-aux-cc udev]$ ll -R\n.:\ntotal 8\ndrwxr-xr-x 2 root root 4096 Jun  6 02:58 rules.d\n-rw-r--r-- 1 root root  218 Mar 19  2014 udev.conf\n\n./rules.d:\ntotal 32\n-rw-r--r-- 1 root root  640 Jul 31  2016 51-ec2-hvm-devices.rules\n-rw-r--r-- 1 root root  641 Jul 31  2016 52-ec2-vcpu.rules\n-rw-r--r-- 1 root root  740 Jul 31  2016 53-ec2-network-interfaces.rules\n-rw-r--r-- 1 root root  680 Jul 31  2016 60-cdrom_id.rules\n-rw-r--r-- 1 root root  326 Apr 26  2016 60-raw.rules\n-rw-r--r-- 1 root root 1343 Jul 31  2016 70-ec2-nvme-devices.rules\n-rw-r--r-- 1 root root 1424 Jul 31  2016 75-persistent-net-generator.rules\n-rwxr-xr-x 1 root root  343 Aug 21  2016 80-docker.rules\n\n#  /etc/udev/udev.conf \nudev_root=\"/dev/\"\nudev_rules=\"/etc/udev/rules.d/\"\n\n#rulerc\n[mingxu.xie@cn-aux-cc udev]$ cat rules.d/53-ec2-network-interfaces.rules\n# Copyright (C) 2012 Amazon.com, Inc. or its affiliates.\n# All Rights Reserved.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\").\n# You may not use this file except in compliance with the License.\n# A copy of the License is located at\n#\n#    http://aws.amazon.com/apache2.0/\n#\n# or in the \"license\" file accompanying this file. This file is\n# distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS\n# OF ANY KIND, either express or implied. See the License for the\n# specific language governing permissions and limitations under the\n# License.\n\nACTION==\"add\", SUBSYSTEM==\"net\", KERNEL==\"eth*\", IMPORT{program}=\"/bin/sleep 1\"\nSUBSYSTEM==\"net\", KERNEL==\"eth*\", RUN+=\"/etc/sysconfig/network-scripts/ec2net.hotplug\"\n```\n```conf\n#docker run -it --rm nginx bash\n[mingxu.xie@cn-aux-cc udev]$ udevadm monitor\nmonitor will print the received events for:\nUDEV - the event which udev sends out after rule processing\nKERNEL - the kernel uevent\n\nKERNEL[240932.229041] add      /devices/virtual/bdi/253:8 (bdi)\nKERNEL[240932.229579] add      /devices/virtual/block/dm-8 (block)\nUDEV  [240932.229612] add      /devices/virtual/bdi/253:8 (bdi)\nUDEV  [240932.229641] add      /devices/virtual/block/dm-8 (block)\nKERNEL[240932.248388] change   /devices/virtual/block/dm-8 (block)\nUDEV  [240932.272904] change   /devices/virtual/block/dm-8 (block)\nKERNEL[240932.425971] remove   /devices/virtual/block/dm-8 (block)\nUDEV  [240932.428073] remove   /devices/virtual/block/dm-8 (block)\nKERNEL[240932.456141] remove   /devices/virtual/bdi/253:8 (bdi)\nKERNEL[240932.456261] remove   /devices/virtual/block/dm-8 (block)\nUDEV  [240932.456380] remove   /devices/virtual/bdi/253:8 (bdi)\nUDEV  [240932.456419] remove   /devices/virtual/block/dm-8 (block)\nKERNEL[240932.469307] add      /devices/virtual/bdi/253:8 (bdi)\nKERNEL[240932.469384] add      /devices/virtual/block/dm-8 (block)\nUDEV  [240932.469657] add      /devices/virtual/bdi/253:8 (bdi)\nUDEV  [240932.469691] add      /devices/virtual/block/dm-8 (block)\nKERNEL[240932.488228] change   /devices/virtual/block/dm-8 (block)\nUDEV  [240932.504203] change   /devices/virtual/block/dm-8 (block)\nKERNEL[240932.636785] remove   /devices/virtual/block/dm-8 (block)\nUDEV  [240932.638755] remove   /devices/virtual/block/dm-8 (block)\nKERNEL[240932.676137] remove   /devices/virtual/bdi/253:8 (bdi)\nKERNEL[240932.676245] remove   /devices/virtual/block/dm-8 (block)\nUDEV  [240932.676367] remove   /devices/virtual/bdi/253:8 (bdi)\nUDEV  [240932.676420] remove   /devices/virtual/block/dm-8 (block)\nKERNEL[240932.683098] add      /devices/virtual/bdi/253:8 (bdi)\nKERNEL[240932.683204] add      /devices/virtual/block/dm-8 (block)\nUDEV  [240932.683384] add      /devices/virtual/bdi/253:8 (bdi)\nUDEV  [240932.683582] add      /devices/virtual/block/dm-8 (block)\nKERNEL[240932.696227] change   /devices/virtual/block/dm-8 (block)\nUDEV  [240932.712517] change   /devices/virtual/block/dm-8 (block)\nKERNEL[240932.793677] add      /devices/virtual/net/veth4d1712b (net)\nKERNEL[240932.793699] add      /devices/virtual/net/veth4d1712b/queues/rx-0 (queues)\nKERNEL[240932.793727] add      /devices/virtual/net/veth4d1712b/queues/tx-0 (queues)\nKERNEL[240932.793908] add      /devices/virtual/net/veth17f6e3e (net)\nKERNEL[240932.793930] add      /devices/virtual/net/veth17f6e3e/queues/rx-0 (queues)\nKERNEL[240932.793942] add      /devices/virtual/net/veth17f6e3e/queues/tx-0 (queues)\nUDEV  [240932.827598] add      /devices/virtual/net/veth4d1712b (net)\nUDEV  [240932.827843] add      /devices/virtual/net/veth4d1712b/queues/rx-0 (queues)\nUDEV  [240932.828121] add      /devices/virtual/net/veth4d1712b/queues/tx-0 (queues)\nKERNEL[240932.849171] add      /kernel/slab/:A-0000200/cgroup/vm_area_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.849196] add      /kernel/slab/:A-0000064/cgroup/anon_vma_chain(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.849211] add      /kernel/slab/:A-0000200/cgroup/vm_area_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.849225] add      /kernel/slab/anon_vma/cgroup/anon_vma(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.849238] add      /kernel/slab/:aA-0000192/cgroup/dentry(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.849252] add      /kernel/slab/proc_inode_cache/cgroup/proc_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.849269] add      /kernel/slab/:A-0000064/cgroup/anon_vma_chain(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.849436] add      /kernel/slab/:0000064/cgroup/kmalloc-64(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.849455] add      /kernel/slab/shmem_inode_cache/cgroup/shmem_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.849709] add      /kernel/slab/proc_inode_cache/cgroup/proc_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.850033] add      /kernel/slab/anon_vma/cgroup/anon_vma(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.850374] add      /kernel/slab/shmem_inode_cache/cgroup/shmem_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.850527] add      /kernel/slab/:aA-0000192/cgroup/dentry(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.852368] add      /kernel/slab/:0000064/cgroup/kmalloc-64(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.854849] add      /kernel/slab/:0000192/cgroup/kmalloc-192(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.854871] add      /kernel/slab/:0001024/cgroup/kmalloc-1024(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855103] add      /kernel/slab/radix_tree_node/cgroup/radix_tree_node(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.855120] add      /kernel/slab/:0000192/cgroup/kmalloc-192(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855133] add      /kernel/slab/:A-0000192/cgroup/cred_jar(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855145] add      /kernel/slab/:A-0002048/cgroup/mm_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855158] add      /kernel/slab/mqueue_inode_cache/cgroup/mqueue_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855170] add      /kernel/slab/sock_inode_cache/cgroup/sock_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855359] add      /kernel/slab/:A-0009664/cgroup/task_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.855395] add      /kernel/slab/:A-0002048/cgroup/mm_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855410] add      /kernel/slab/:A-0000704/cgroup/files_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.855445] add      /kernel/slab/mqueue_inode_cache/cgroup/mqueue_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855461] add      /kernel/slab/sighand_cache/cgroup/sighand_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.855474] add      /kernel/slab/:0001024/cgroup/kmalloc-1024(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855487] add      /kernel/slab/:A-0001024/cgroup/signal_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.855499] add      /kernel/slab/:A-0000128/cgroup/pid(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.855512] add      /kernel/slab/radix_tree_node/cgroup/radix_tree_node(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.856010] add      /kernel/slab/sock_inode_cache/cgroup/sock_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.856029] add      /kernel/slab/:A-0009664/cgroup/task_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.856045] add      /kernel/slab/sighand_cache/cgroup/sighand_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.856077] add      /kernel/slab/:0000256/cgroup/kmalloc-256(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.856092] add      /kernel/slab/:A-0000704/cgroup/files_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.856104] add      /kernel/slab/:0000512/cgroup/kmalloc-512(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.856188] add      /kernel/slab/:A-0000128/cgroup/pid(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.857080] add      /kernel/slab/:A-0000192/cgroup/cred_jar(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.857105] add      /kernel/slab/:A-0001024/cgroup/signal_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.857126] add      /kernel/slab/:0000256/cgroup/kmalloc-256(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.857140] add      /kernel/slab/:0000512/cgroup/kmalloc-512(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.862157] add      /kernel/slab/xfs_inode/cgroup/xfs_inode(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.862348] add      /kernel/slab/xfs_inode/cgroup/xfs_inode(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240932.863008] add      /kernel/slab/inode_cache/cgroup/inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.863179] add      /kernel/slab/inode_cache/cgroup/inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240932.932564] add      /devices/virtual/net/veth17f6e3e (net)\nUDEV  [240932.932779] add      /devices/virtual/net/veth17f6e3e/queues/rx-0 (queues)\nUDEV  [240932.932880] add      /devices/virtual/net/veth17f6e3e/queues/tx-0 (queues)\nKERNEL[240932.960183] remove   /devices/virtual/net/veth4d1712b (net)\nUDEV  [240932.982851] remove   /devices/virtual/net/veth4d1712b (net)\nKERNEL[240933.089679] add      /kernel/slab/:0000008/cgroup/kmalloc-8(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240933.089933] add      /kernel/slab/:0000008/cgroup/kmalloc-8(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240933.150833] add      /kernel/slab/:0002048/cgroup/kmalloc-2048(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nKERNEL[240933.150863] add      /kernel/slab/:0000096/cgroup/kmalloc-96(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240933.151052] add      /kernel/slab/:0002048/cgroup/kmalloc-2048(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\nUDEV  [240933.151130] add      /kernel/slab/:0000096/cgroup/kmalloc-96(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)\n\n```","slug":"udev","updated":"2019-10-21T06:57:42.910Z","photos":[],"link":"","_id":"ck42dyijv00k9u9urg9hjf2jh","content":"<p>udevudevbusvendorudevuser spaceLinux Standard Base LSB</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img src=\"/images/image-20191018151450374.png\" alt=\"image-20191018151450374\"></p>\n<h3 id=\"rule\"><a href=\"#rule\" class=\"headerlink\" title=\"rule\"></a>rule</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mingxu.xie@cn-aux-cc udev]$ ll -R</span><br><span class=\"line\">.:</span><br><span class=\"line\">total 8</span><br><span class=\"line\">drwxr-xr-x 2 root root 4096 Jun  6 02:58 rules.d</span><br><span class=\"line\">-rw-r--r-- 1 root root  218 Mar 19  2014 udev.conf</span><br><span class=\"line\"></span><br><span class=\"line\">./rules.d:</span><br><span class=\"line\">total 32</span><br><span class=\"line\">-rw-r--r-- 1 root root  640 Jul 31  2016 51-ec2-hvm-devices.rules</span><br><span class=\"line\">-rw-r--r-- 1 root root  641 Jul 31  2016 52-ec2-vcpu.rules</span><br><span class=\"line\">-rw-r--r-- 1 root root  740 Jul 31  2016 53-ec2-network-interfaces.rules</span><br><span class=\"line\">-rw-r--r-- 1 root root  680 Jul 31  2016 60-cdrom_id.rules</span><br><span class=\"line\">-rw-r--r-- 1 root root  326 Apr 26  2016 60-raw.rules</span><br><span class=\"line\">-rw-r--r-- 1 root root 1343 Jul 31  2016 70-ec2-nvme-devices.rules</span><br><span class=\"line\">-rw-r--r-- 1 root root 1424 Jul 31  2016 75-persistent-net-generator.rules</span><br><span class=\"line\">-rwxr-xr-x 1 root root  343 Aug 21  2016 80-docker.rules</span><br><span class=\"line\"></span><br><span class=\"line\">#  /etc/udev/udev.conf </span><br><span class=\"line\">udev_root=&quot;/dev/&quot;</span><br><span class=\"line\">udev_rules=&quot;/etc/udev/rules.d/&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">#rulerc</span><br><span class=\"line\">[mingxu.xie@cn-aux-cc udev]$ cat rules.d/53-ec2-network-interfaces.rules</span><br><span class=\"line\"># Copyright (C) 2012 Amazon.com, Inc. or its affiliates.</span><br><span class=\"line\"># All Rights Reserved.</span><br><span class=\"line\">#</span><br><span class=\"line\"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;).</span><br><span class=\"line\"># You may not use this file except in compliance with the License.</span><br><span class=\"line\"># A copy of the License is located at</span><br><span class=\"line\">#</span><br><span class=\"line\">#    http://aws.amazon.com/apache2.0/</span><br><span class=\"line\">#</span><br><span class=\"line\"># or in the &quot;license&quot; file accompanying this file. This file is</span><br><span class=\"line\"># distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS</span><br><span class=\"line\"># OF ANY KIND, either express or implied. See the License for the</span><br><span class=\"line\"># specific language governing permissions and limitations under the</span><br><span class=\"line\"># License.</span><br><span class=\"line\"></span><br><span class=\"line\">ACTION==&quot;add&quot;, SUBSYSTEM==&quot;net&quot;, KERNEL==&quot;eth*&quot;, IMPORT&#123;program&#125;=&quot;/bin/sleep 1&quot;</span><br><span class=\"line\">SUBSYSTEM==&quot;net&quot;, KERNEL==&quot;eth*&quot;, RUN+=&quot;/etc/sysconfig/network-scripts/ec2net.hotplug&quot;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#docker run -it --rm nginx bash</span><br><span class=\"line\">[mingxu.xie@cn-aux-cc udev]$ udevadm monitor</span><br><span class=\"line\">monitor will print the received events for:</span><br><span class=\"line\">UDEV - the event which udev sends out after rule processing</span><br><span class=\"line\">KERNEL - the kernel uevent</span><br><span class=\"line\"></span><br><span class=\"line\">KERNEL[240932.229041] add      /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">KERNEL[240932.229579] add      /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.229612] add      /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">UDEV  [240932.229641] add      /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.248388] change   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.272904] change   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.425971] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.428073] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.456141] remove   /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">KERNEL[240932.456261] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.456380] remove   /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">UDEV  [240932.456419] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.469307] add      /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">KERNEL[240932.469384] add      /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.469657] add      /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">UDEV  [240932.469691] add      /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.488228] change   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.504203] change   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.636785] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.638755] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.676137] remove   /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">KERNEL[240932.676245] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.676367] remove   /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">UDEV  [240932.676420] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.683098] add      /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">KERNEL[240932.683204] add      /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.683384] add      /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">UDEV  [240932.683582] add      /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.696227] change   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.712517] change   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.793677] add      /devices/virtual/net/veth4d1712b (net)</span><br><span class=\"line\">KERNEL[240932.793699] add      /devices/virtual/net/veth4d1712b/queues/rx-0 (queues)</span><br><span class=\"line\">KERNEL[240932.793727] add      /devices/virtual/net/veth4d1712b/queues/tx-0 (queues)</span><br><span class=\"line\">KERNEL[240932.793908] add      /devices/virtual/net/veth17f6e3e (net)</span><br><span class=\"line\">KERNEL[240932.793930] add      /devices/virtual/net/veth17f6e3e/queues/rx-0 (queues)</span><br><span class=\"line\">KERNEL[240932.793942] add      /devices/virtual/net/veth17f6e3e/queues/tx-0 (queues)</span><br><span class=\"line\">UDEV  [240932.827598] add      /devices/virtual/net/veth4d1712b (net)</span><br><span class=\"line\">UDEV  [240932.827843] add      /devices/virtual/net/veth4d1712b/queues/rx-0 (queues)</span><br><span class=\"line\">UDEV  [240932.828121] add      /devices/virtual/net/veth4d1712b/queues/tx-0 (queues)</span><br><span class=\"line\">KERNEL[240932.849171] add      /kernel/slab/:A-0000200/cgroup/vm_area_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.849196] add      /kernel/slab/:A-0000064/cgroup/anon_vma_chain(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.849211] add      /kernel/slab/:A-0000200/cgroup/vm_area_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.849225] add      /kernel/slab/anon_vma/cgroup/anon_vma(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.849238] add      /kernel/slab/:aA-0000192/cgroup/dentry(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.849252] add      /kernel/slab/proc_inode_cache/cgroup/proc_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.849269] add      /kernel/slab/:A-0000064/cgroup/anon_vma_chain(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.849436] add      /kernel/slab/:0000064/cgroup/kmalloc-64(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.849455] add      /kernel/slab/shmem_inode_cache/cgroup/shmem_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.849709] add      /kernel/slab/proc_inode_cache/cgroup/proc_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.850033] add      /kernel/slab/anon_vma/cgroup/anon_vma(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.850374] add      /kernel/slab/shmem_inode_cache/cgroup/shmem_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.850527] add      /kernel/slab/:aA-0000192/cgroup/dentry(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.852368] add      /kernel/slab/:0000064/cgroup/kmalloc-64(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.854849] add      /kernel/slab/:0000192/cgroup/kmalloc-192(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.854871] add      /kernel/slab/:0001024/cgroup/kmalloc-1024(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855103] add      /kernel/slab/radix_tree_node/cgroup/radix_tree_node(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.855120] add      /kernel/slab/:0000192/cgroup/kmalloc-192(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855133] add      /kernel/slab/:A-0000192/cgroup/cred_jar(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855145] add      /kernel/slab/:A-0002048/cgroup/mm_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855158] add      /kernel/slab/mqueue_inode_cache/cgroup/mqueue_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855170] add      /kernel/slab/sock_inode_cache/cgroup/sock_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855359] add      /kernel/slab/:A-0009664/cgroup/task_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.855395] add      /kernel/slab/:A-0002048/cgroup/mm_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855410] add      /kernel/slab/:A-0000704/cgroup/files_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.855445] add      /kernel/slab/mqueue_inode_cache/cgroup/mqueue_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855461] add      /kernel/slab/sighand_cache/cgroup/sighand_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.855474] add      /kernel/slab/:0001024/cgroup/kmalloc-1024(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855487] add      /kernel/slab/:A-0001024/cgroup/signal_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855499] add      /kernel/slab/:A-0000128/cgroup/pid(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.855512] add      /kernel/slab/radix_tree_node/cgroup/radix_tree_node(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.856010] add      /kernel/slab/sock_inode_cache/cgroup/sock_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.856029] add      /kernel/slab/:A-0009664/cgroup/task_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.856045] add      /kernel/slab/sighand_cache/cgroup/sighand_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.856077] add      /kernel/slab/:0000256/cgroup/kmalloc-256(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.856092] add      /kernel/slab/:A-0000704/cgroup/files_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.856104] add      /kernel/slab/:0000512/cgroup/kmalloc-512(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.856188] add      /kernel/slab/:A-0000128/cgroup/pid(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.857080] add      /kernel/slab/:A-0000192/cgroup/cred_jar(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.857105] add      /kernel/slab/:A-0001024/cgroup/signal_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.857126] add      /kernel/slab/:0000256/cgroup/kmalloc-256(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.857140] add      /kernel/slab/:0000512/cgroup/kmalloc-512(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.862157] add      /kernel/slab/xfs_inode/cgroup/xfs_inode(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.862348] add      /kernel/slab/xfs_inode/cgroup/xfs_inode(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.863008] add      /kernel/slab/inode_cache/cgroup/inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.863179] add      /kernel/slab/inode_cache/cgroup/inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.932564] add      /devices/virtual/net/veth17f6e3e (net)</span><br><span class=\"line\">UDEV  [240932.932779] add      /devices/virtual/net/veth17f6e3e/queues/rx-0 (queues)</span><br><span class=\"line\">UDEV  [240932.932880] add      /devices/virtual/net/veth17f6e3e/queues/tx-0 (queues)</span><br><span class=\"line\">KERNEL[240932.960183] remove   /devices/virtual/net/veth4d1712b (net)</span><br><span class=\"line\">UDEV  [240932.982851] remove   /devices/virtual/net/veth4d1712b (net)</span><br><span class=\"line\">KERNEL[240933.089679] add      /kernel/slab/:0000008/cgroup/kmalloc-8(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240933.089933] add      /kernel/slab/:0000008/cgroup/kmalloc-8(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240933.150833] add      /kernel/slab/:0002048/cgroup/kmalloc-2048(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240933.150863] add      /kernel/slab/:0000096/cgroup/kmalloc-96(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240933.151052] add      /kernel/slab/:0002048/cgroup/kmalloc-2048(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240933.151130] add      /kernel/slab/:0000096/cgroup/kmalloc-96(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>udevudevbusvendorudevuser spaceLinux Standard Base LSB</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img src=\"/images/image-20191018151450374.png\" alt=\"image-20191018151450374\"></p>\n<h3 id=\"rule\"><a href=\"#rule\" class=\"headerlink\" title=\"rule\"></a>rule</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mingxu.xie@cn-aux-cc udev]$ ll -R</span><br><span class=\"line\">.:</span><br><span class=\"line\">total 8</span><br><span class=\"line\">drwxr-xr-x 2 root root 4096 Jun  6 02:58 rules.d</span><br><span class=\"line\">-rw-r--r-- 1 root root  218 Mar 19  2014 udev.conf</span><br><span class=\"line\"></span><br><span class=\"line\">./rules.d:</span><br><span class=\"line\">total 32</span><br><span class=\"line\">-rw-r--r-- 1 root root  640 Jul 31  2016 51-ec2-hvm-devices.rules</span><br><span class=\"line\">-rw-r--r-- 1 root root  641 Jul 31  2016 52-ec2-vcpu.rules</span><br><span class=\"line\">-rw-r--r-- 1 root root  740 Jul 31  2016 53-ec2-network-interfaces.rules</span><br><span class=\"line\">-rw-r--r-- 1 root root  680 Jul 31  2016 60-cdrom_id.rules</span><br><span class=\"line\">-rw-r--r-- 1 root root  326 Apr 26  2016 60-raw.rules</span><br><span class=\"line\">-rw-r--r-- 1 root root 1343 Jul 31  2016 70-ec2-nvme-devices.rules</span><br><span class=\"line\">-rw-r--r-- 1 root root 1424 Jul 31  2016 75-persistent-net-generator.rules</span><br><span class=\"line\">-rwxr-xr-x 1 root root  343 Aug 21  2016 80-docker.rules</span><br><span class=\"line\"></span><br><span class=\"line\">#  /etc/udev/udev.conf </span><br><span class=\"line\">udev_root=&quot;/dev/&quot;</span><br><span class=\"line\">udev_rules=&quot;/etc/udev/rules.d/&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">#rulerc</span><br><span class=\"line\">[mingxu.xie@cn-aux-cc udev]$ cat rules.d/53-ec2-network-interfaces.rules</span><br><span class=\"line\"># Copyright (C) 2012 Amazon.com, Inc. or its affiliates.</span><br><span class=\"line\"># All Rights Reserved.</span><br><span class=\"line\">#</span><br><span class=\"line\"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;).</span><br><span class=\"line\"># You may not use this file except in compliance with the License.</span><br><span class=\"line\"># A copy of the License is located at</span><br><span class=\"line\">#</span><br><span class=\"line\">#    http://aws.amazon.com/apache2.0/</span><br><span class=\"line\">#</span><br><span class=\"line\"># or in the &quot;license&quot; file accompanying this file. This file is</span><br><span class=\"line\"># distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS</span><br><span class=\"line\"># OF ANY KIND, either express or implied. See the License for the</span><br><span class=\"line\"># specific language governing permissions and limitations under the</span><br><span class=\"line\"># License.</span><br><span class=\"line\"></span><br><span class=\"line\">ACTION==&quot;add&quot;, SUBSYSTEM==&quot;net&quot;, KERNEL==&quot;eth*&quot;, IMPORT&#123;program&#125;=&quot;/bin/sleep 1&quot;</span><br><span class=\"line\">SUBSYSTEM==&quot;net&quot;, KERNEL==&quot;eth*&quot;, RUN+=&quot;/etc/sysconfig/network-scripts/ec2net.hotplug&quot;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#docker run -it --rm nginx bash</span><br><span class=\"line\">[mingxu.xie@cn-aux-cc udev]$ udevadm monitor</span><br><span class=\"line\">monitor will print the received events for:</span><br><span class=\"line\">UDEV - the event which udev sends out after rule processing</span><br><span class=\"line\">KERNEL - the kernel uevent</span><br><span class=\"line\"></span><br><span class=\"line\">KERNEL[240932.229041] add      /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">KERNEL[240932.229579] add      /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.229612] add      /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">UDEV  [240932.229641] add      /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.248388] change   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.272904] change   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.425971] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.428073] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.456141] remove   /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">KERNEL[240932.456261] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.456380] remove   /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">UDEV  [240932.456419] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.469307] add      /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">KERNEL[240932.469384] add      /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.469657] add      /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">UDEV  [240932.469691] add      /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.488228] change   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.504203] change   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.636785] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.638755] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.676137] remove   /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">KERNEL[240932.676245] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.676367] remove   /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">UDEV  [240932.676420] remove   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.683098] add      /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">KERNEL[240932.683204] add      /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.683384] add      /devices/virtual/bdi/253:8 (bdi)</span><br><span class=\"line\">UDEV  [240932.683582] add      /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.696227] change   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">UDEV  [240932.712517] change   /devices/virtual/block/dm-8 (block)</span><br><span class=\"line\">KERNEL[240932.793677] add      /devices/virtual/net/veth4d1712b (net)</span><br><span class=\"line\">KERNEL[240932.793699] add      /devices/virtual/net/veth4d1712b/queues/rx-0 (queues)</span><br><span class=\"line\">KERNEL[240932.793727] add      /devices/virtual/net/veth4d1712b/queues/tx-0 (queues)</span><br><span class=\"line\">KERNEL[240932.793908] add      /devices/virtual/net/veth17f6e3e (net)</span><br><span class=\"line\">KERNEL[240932.793930] add      /devices/virtual/net/veth17f6e3e/queues/rx-0 (queues)</span><br><span class=\"line\">KERNEL[240932.793942] add      /devices/virtual/net/veth17f6e3e/queues/tx-0 (queues)</span><br><span class=\"line\">UDEV  [240932.827598] add      /devices/virtual/net/veth4d1712b (net)</span><br><span class=\"line\">UDEV  [240932.827843] add      /devices/virtual/net/veth4d1712b/queues/rx-0 (queues)</span><br><span class=\"line\">UDEV  [240932.828121] add      /devices/virtual/net/veth4d1712b/queues/tx-0 (queues)</span><br><span class=\"line\">KERNEL[240932.849171] add      /kernel/slab/:A-0000200/cgroup/vm_area_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.849196] add      /kernel/slab/:A-0000064/cgroup/anon_vma_chain(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.849211] add      /kernel/slab/:A-0000200/cgroup/vm_area_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.849225] add      /kernel/slab/anon_vma/cgroup/anon_vma(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.849238] add      /kernel/slab/:aA-0000192/cgroup/dentry(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.849252] add      /kernel/slab/proc_inode_cache/cgroup/proc_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.849269] add      /kernel/slab/:A-0000064/cgroup/anon_vma_chain(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.849436] add      /kernel/slab/:0000064/cgroup/kmalloc-64(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.849455] add      /kernel/slab/shmem_inode_cache/cgroup/shmem_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.849709] add      /kernel/slab/proc_inode_cache/cgroup/proc_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.850033] add      /kernel/slab/anon_vma/cgroup/anon_vma(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.850374] add      /kernel/slab/shmem_inode_cache/cgroup/shmem_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.850527] add      /kernel/slab/:aA-0000192/cgroup/dentry(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.852368] add      /kernel/slab/:0000064/cgroup/kmalloc-64(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.854849] add      /kernel/slab/:0000192/cgroup/kmalloc-192(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.854871] add      /kernel/slab/:0001024/cgroup/kmalloc-1024(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855103] add      /kernel/slab/radix_tree_node/cgroup/radix_tree_node(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.855120] add      /kernel/slab/:0000192/cgroup/kmalloc-192(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855133] add      /kernel/slab/:A-0000192/cgroup/cred_jar(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855145] add      /kernel/slab/:A-0002048/cgroup/mm_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855158] add      /kernel/slab/mqueue_inode_cache/cgroup/mqueue_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855170] add      /kernel/slab/sock_inode_cache/cgroup/sock_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855359] add      /kernel/slab/:A-0009664/cgroup/task_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.855395] add      /kernel/slab/:A-0002048/cgroup/mm_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855410] add      /kernel/slab/:A-0000704/cgroup/files_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.855445] add      /kernel/slab/mqueue_inode_cache/cgroup/mqueue_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855461] add      /kernel/slab/sighand_cache/cgroup/sighand_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.855474] add      /kernel/slab/:0001024/cgroup/kmalloc-1024(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855487] add      /kernel/slab/:A-0001024/cgroup/signal_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.855499] add      /kernel/slab/:A-0000128/cgroup/pid(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.855512] add      /kernel/slab/radix_tree_node/cgroup/radix_tree_node(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.856010] add      /kernel/slab/sock_inode_cache/cgroup/sock_inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.856029] add      /kernel/slab/:A-0009664/cgroup/task_struct(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.856045] add      /kernel/slab/sighand_cache/cgroup/sighand_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.856077] add      /kernel/slab/:0000256/cgroup/kmalloc-256(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.856092] add      /kernel/slab/:A-0000704/cgroup/files_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.856104] add      /kernel/slab/:0000512/cgroup/kmalloc-512(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.856188] add      /kernel/slab/:A-0000128/cgroup/pid(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.857080] add      /kernel/slab/:A-0000192/cgroup/cred_jar(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.857105] add      /kernel/slab/:A-0001024/cgroup/signal_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.857126] add      /kernel/slab/:0000256/cgroup/kmalloc-256(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.857140] add      /kernel/slab/:0000512/cgroup/kmalloc-512(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.862157] add      /kernel/slab/xfs_inode/cgroup/xfs_inode(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.862348] add      /kernel/slab/xfs_inode/cgroup/xfs_inode(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240932.863008] add      /kernel/slab/inode_cache/cgroup/inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.863179] add      /kernel/slab/inode_cache/cgroup/inode_cache(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240932.932564] add      /devices/virtual/net/veth17f6e3e (net)</span><br><span class=\"line\">UDEV  [240932.932779] add      /devices/virtual/net/veth17f6e3e/queues/rx-0 (queues)</span><br><span class=\"line\">UDEV  [240932.932880] add      /devices/virtual/net/veth17f6e3e/queues/tx-0 (queues)</span><br><span class=\"line\">KERNEL[240932.960183] remove   /devices/virtual/net/veth4d1712b (net)</span><br><span class=\"line\">UDEV  [240932.982851] remove   /devices/virtual/net/veth4d1712b (net)</span><br><span class=\"line\">KERNEL[240933.089679] add      /kernel/slab/:0000008/cgroup/kmalloc-8(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240933.089933] add      /kernel/slab/:0000008/cgroup/kmalloc-8(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240933.150833] add      /kernel/slab/:0002048/cgroup/kmalloc-2048(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">KERNEL[240933.150863] add      /kernel/slab/:0000096/cgroup/kmalloc-96(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240933.151052] add      /kernel/slab/:0002048/cgroup/kmalloc-2048(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br><span class=\"line\">UDEV  [240933.151130] add      /kernel/slab/:0000096/cgroup/kmalloc-96(990:53b4e439f50242461e4c1246718e12d769d3bc4752c0f0ed5bc4f317bb4feb3d) (cgroup)</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"redis-trib.rb","published":1,"author":"xiemx","comments":1,"date":"2017-02-26T21:02:35.000Z","_content":"redis-trib.rbredisredisredissrcredisredis-trib.rbredisruby\n```\nroot@p-hsg-redis-1:~# redis-trib.rb\nUsage: redis-trib  \n\n  create          host1:port1 ... hostN:portN\n                  --replicas \n  check           host:port\n  info            host:port\n  fix             host:port\n                  --timeout \n  reshard         host:port\n                  --from \n                  --to \n                  --slots \n                  --yes\n                  --timeout \n                  --pipeline \n  rebalance       host:port\n                  --weight \n                  --auto-weights\n                  --use-empty-masters\n                  --timeout \n                  --simulate\n                  --pipeline \n                  --threshold \n  add-node        new_host:new_port existing_host:existing_port\n                  --slave\n                  --master-id \n  del-node        host:port node_id\n  set-timeout     host:port milliseconds\n  call            host:port command arg arg .. arg\n  import          host:port\n                  --from \n                  --copy\n                  --replace\n  help            (show this help)\n\nFor check, fix, reshard, del-node, set-timeout you can specify the host and port of any working node in the cluster.\n```\nredis-trib.rb\n\n* create\n* check\n* info\n* fix\n* reshardslot\n* rebalanceslot\n* add-node\n* del-node\n* set-timeout\n* call\n* importredis\n\n### create\n\ncreatereplicasreplicasslave\n```\n$ruby redis-trib.rb create 10.180.157.199:6379 10.180.157.200:6379 10.180.157.201:6379\n```\nslave\n```\n$ruby redis-trib.rb create --replicas 1 10.180.157.199:6379 10.180.157.200:6379 10.180.157.201:6379 10.180.157.202:6379  10.180.157.205:6379  10.180.157.208:6379 \n```\n\n```\n1ClusterNodedbload_info\n2master33\n3masterslotmasterslave\nhostmaster\nhosthostinterleaved\nmasterinterleavedmastermasters\nmasterslotslots_per_nodeslotmaster\nmastersmasterslots_per_nodeslotmaster16384slot\nmasterslavemasterslaveslavemastermasters\nmastersreplicasslaveslavemasterhost\nreplicasmasterreplicasslave\n4yes\n5yesflush_nodes_configmasterslotslavemastercluster meetslaveflush_nodes_configflush_nodes_config\n6epochepoch1\n7\n81ClusterNodeget_config_signaturecluster nodesnode_id1:slots|node_id2:slot2|...\n9flush_nodes_configslave\n10check_clusterslot\n11[OK] All 16384 slots covered.\n```\n\n### check\n\n\n```shell\n$ruby redis-trib.rb check 10.180.157.199:6379\n>>> Performing Cluster Check (using node 10.180.157.199:6379)\nM: b2506515b38e6bbd3034d540599f4cd2a5279ad1 10.180.157.199:6379\n   slots:0-5460 (5461 slots) master\n   1 additional replica(s)\nS: d376aaf80de0e01dde1f8cd4647d5ac3317a8641 10.180.157.205:6379\n   slots: (0 slots) slave\n   replicates e36c46dbe90960f30861af00786d4c2064e63df2\nM: 15126fb33796c2c26ea89e553418946f7443d5a5 10.180.157.201:6379\n   slots:10923-16383 (5461 slots) master\n   1 additional replica(s)\nS: 59fa6ee455f58a5076f6d6f83ddd74161fd7fb55 10.180.157.208:6379\n   slots: (0 slots) slave\n   replicates 15126fb33796c2c26ea89e553418946f7443d5a5\nS: 460b3a11e296aafb2615043291b7dd98274bb351 10.180.157.202:6379\n   slots: (0 slots) slave\n   replicates b2506515b38e6bbd3034d540599f4cd2a5279ad1\nM: e36c46dbe90960f30861af00786d4c2064e63df2 10.180.157.200:6379\n   slots:5461-10922 (5462 slots) master\n   1 additional replica(s)\n[OK] All nodes agree about slots configuration.\n>>> Check for open slots...\n>>> Check slots coverage...\n[OK] All 16384 slots covered. \n\n```\n\nload_cluster_info_from_nodeloadloadcluster nodesnodes\n\nloadcheck_cluster\n\n### info\n\ninfoinfoload_cluster_info_from_nodeClusterNodeinfo_string\n```shell\n$ruby redis-trib.rb info 10.180.157.199:6379\n10.180.157.199:6379 (b2506515...) -> 0 keys | 5461 slots | 1 slaves.\n10.180.157.201:6379 (15126fb3...) -> 0 keys | 5461 slots | 1 slaves.\n10.180.157.200:6379 (e36c46db...) -> 0 keys | 5462 slots | 1 slaves.\n[OK] 0 keys in 3 masters.\n0.00 keys per slot on average.\n\n```\n### fix\n\nfixcheckcheck_clusterfix\ntruefixslotslot\n\nfix_open_slotslot\n```\n1slotownerownerslot\n2slotmigratingslotimportingownercluster countkeysinslotimporting\n3migratingimporting1redis-trib.rbmove_slotdotsfixtrue\n4migratingimporting0importingmove_slotslotownerdotsfixcoldtrueimportingcluster stable\n5importingmigratingslotslotstable\n6migratingimportingredis-trib.rbredis-trib.rb\nfix_slots_coverageslotslot\n\n1slotredis-trib.rbslotfixslotslot\n2slotslotslot\n3slotTODOrediscluster migratingmigratingslot\n```\n\n### reshardslot\n\nreshardslotslotreshard\n\nreshard\n```\nreshard         host:port\n                --from \n                --to \n                --slots \n                --yes\n                --timeout \n                --pipeline \nhost:port\n--from slotnode id--from all\n--to slotnode id\n--slots slot\n--yesreshardyesreshard\n--timeout migrate\n--pipeline cluster getkeysinslotkey10\n```\n\n```\n1load_cluster_info_from_node\n2check_cluster\n3slot--slots\n4--tomaster\n5--frommaster--from allmasterslot--from all\n6compute_reshard_tableslotslotslotslot * (slot / slot)\n\nn = (numslots/source_tot_slots*s.slots.length)\nif i == 0\n    n = n.ceil\nelse\n    n = n.floor\nslotslotBUGgithubhttps://github.com/antirez/redis/issues/2990\n\n7reshard--yes\n8reshardslotmove_slotmove_slotdotstruepipeline\n9\n```\n```\nruby redis-trib.rb reshard --from all --to 80b661ecca260c89e3d8ea9b98f77edaeef43dcd --slots 11 10.180.157.199:6379\n>>> Performing Cluster Check (using node 10.180.157.199:6379)\nS: b2506515b38e6bbd3034d540599f4cd2a5279ad1 10.180.157.199:6379\n   slots: (0 slots) slave\n   replicates 460b3a11e296aafb2615043291b7dd98274bb351\nS: d376aaf80de0e01dde1f8cd4647d5ac3317a8641 10.180.157.205:6379\n   slots: (0 slots) slave\n   replicates e36c46dbe90960f30861af00786d4c2064e63df2\nM: 15126fb33796c2c26ea89e553418946f7443d5a5 10.180.157.201:6379\n   slots:10923-16383 (5461 slots) master\n   1 additional replica(s)\nS: 59fa6ee455f58a5076f6d6f83ddd74161fd7fb55 10.180.157.208:6379\n   slots: (0 slots) slave\n   replicates 15126fb33796c2c26ea89e553418946f7443d5a5\nM: 460b3a11e296aafb2615043291b7dd98274bb351 10.180.157.202:6379\n   slots:0-5460 (5461 slots) master\n   1 additional replica(s)\nM: 80b661ecca260c89e3d8ea9b98f77edaeef43dcd 10.180.157.200:6380\n   slots: (0 slots) master\n   0 additional replica(s)\nM: e36c46dbe90960f30861af00786d4c2064e63df2 10.180.157.200:6379\n   slots:5461-10922 (5462 slots) master\n   1 additional replica(s)\n[OK] All nodes agree about slots configuration.\n>>> Check for open slots...\n>>> Check slots coverage...\n[OK] All 16384 slots covered.\n\nReady to move 11 slots.\n  Source nodes:\n    M: 15126fb33796c2c26ea89e553418946f7443d5a5 10.180.157.201:6379\n   slots:10923-16383 (5461 slots) master\n   1 additional replica(s)\n    M: 460b3a11e296aafb2615043291b7dd98274bb351 10.180.157.202:6379\n   slots:0-5460 (5461 slots) master\n   1 additional replica(s)\n    M: e36c46dbe90960f30861af00786d4c2064e63df2 10.180.157.200:6379\n   slots:5461-10922 (5462 slots) master\n   1 additional replica(s)\n  Destination node:\n    M: 80b661ecca260c89e3d8ea9b98f77edaeef43dcd 10.180.157.200:6380\n   slots: (0 slots) master\n   0 additional replica(s)\n  Resharding plan:\n    Moving slot 5461 from e36c46dbe90960f30861af00786d4c2064e63df2\n    Moving slot 5462 from e36c46dbe90960f30861af00786d4c2064e63df2\n    Moving slot 5463 from e36c46dbe90960f30861af00786d4c2064e63df2\n    Moving slot 5464 from e36c46dbe90960f30861af00786d4c2064e63df2\n    Moving slot 0 from 460b3a11e296aafb2615043291b7dd98274bb351\n    Moving slot 1 from 460b3a11e296aafb2615043291b7dd98274bb351\n    Moving slot 2 from 460b3a11e296aafb2615043291b7dd98274bb351\n    Moving slot 10923 from 15126fb33796c2c26ea89e553418946f7443d5a5\n    Moving slot 10924 from 15126fb33796c2c26ea89e553418946f7443d5a5\n    Moving slot 10925 from 15126fb33796c2c26ea89e553418946f7443d5a5\nDo you want to proceed with the proposed reshard plan (yes/no)? yes\nMoving slot 5461 from 10.180.157.200:6379 to 10.180.157.200:6380:\nMoving slot 5462 from 10.180.157.200:6379 to 10.180.157.200:6380:\nMoving slot 5463 from 10.180.157.200:6379 to 10.180.157.200:6380:\nMoving slot 5464 from 10.180.157.200:6379 to 10.180.157.200:6380:\nMoving slot 0 from 10.180.157.202:6379 to 10.180.157.200:6380:\nMoving slot 1 from 10.180.157.202:6379 to 10.180.157.200:6380:\nMoving slot 2 from 10.180.157.202:6379 to 10.180.157.200:6380:\nMoving slot 10923 from 10.180.157.201:6379 to 10.180.157.200:6380:\nMoving slot 10924 from 10.180.157.201:6379 to 10.180.157.200:6380:\nMoving slot 10925 from 10.180.157.201:6379 to 10.180.157.200:6380:\n```\n\nmove_slotslotfixreshardrebalanceslot\n\nmove_slot\n```\n1pipelineslotkey\n2quietquiet\n3coldcoldimportingmigrating\n4dotsdotskey\n5updateupdate\n```\nmove_slot\n```\n1coldcluster importingmigratingfiximportingmigratingcold\n2cluster getkeysinslotslotpipelinekey.\n3keymigrate\n4migratefixBUSYKEYmigratereplaceBUSYKEYkeyreplacekeyfix\n5cluster getkeysinslotkey0\n6coldcluster setslotslot\n7updateslot\n8slot\n```\n### rebalanceslot\n\nrebalanceslotrebalancerebalance\n```\nrebalance       host:port\n                --weight \n                --auto-weights\n                --threshold \n                --use-empty-masters\n                --timeout \n                --simulate\n                --pipeline \n\n$ruby redis-trib.rb rebalance --threshold 1 --weight b31e3a2e=5 --weight 60b8e3a1=5 --use-empty-masters  --simulate 10.180.157.199:6379\n\n\nhost:port\n--weight node_id=weight--weight --weight b31e3a2e=5 --weight 60b8e3a1=5node_idweight1\n--auto-weightsrebalance\n--threshold slotthresholdrebalancerebalance\n--use-empty-mastersrebalancemasterslotmasterrebalance--use-empty-mastersslotrebalance\n--timeout migrate\n--simulaterebalanceslots\n--pipeline resharpipelinecluster getkeysinslotkey10\n```\nrebalance\n```\n1load_cluster_info_from_node\n2master--weight 1\n3masterslotslot *  / \n4masterslot--threshold (100-(100.0*expected/n.slots.length)).absslotmasterrebalance\n5rebalancerebalanceslotsslotbalancebalancesn\n6dst_idxsrc_idxsnslot\n\nsnbalanceslotdst_idxslotsrc_idxsnbalance0slotbalance0balance0slotslot16384rebalance\n\n7sn[dst_idx]sn[src_idx]balancesn[src_idx]sn[dst_idx]slot\n8compute_reshard_tableslotreshardreshard\n9simulate\n10simulatemove_slotslot:quiet=>true,:dots=>false,:update=>true\n11sn[dst_idx]sn[src_idx]balancebalance01\n12dst_idxsrc_idxrebalance\n```\n### add-node\n\nadd-nodemastermasterslave\n```shell\nadd-node    new_host:new_port existing_host:existing_port\n          --slave\n          --master-id \nadd-node\n\n--slaveslave\n--master-id--slave--master-idmastermaster\n```\nadd-node\n```\n$ruby redis-trib.rb add-node --slave --master-id dcb792b3e85726f012e83061bf237072dfc45f99 10.180.157.202:6379 10.180.157.199:6379\n>>> Adding node 10.180.157.202:6379 to cluster 10.180.157.199:6379\n>>> Performing Cluster Check (using node 10.180.157.199:6379)\nM: dcb792b3e85726f012e83061bf237072dfc45f99 10.180.157.199:6379\n   slots:0-5460 (5461 slots) master\n   0 additional replica(s)\nM: 464d740bf48953ebcf826f4113c86f9db3a9baf3 10.180.157.201:6379\n   slots:10923-16383 (5461 slots) master\n   0 additional replica(s)\nM: befa7e17b4e5f239e519bc74bfef3264a40f96ae 10.180.157.200:6379\n   slots:5461-10922 (5462 slots) master\n   0 additional replica(s)\n[OK] All nodes agree about slots configuration.\n>>> Check for open slots...\n>>> Check slots coverage...\n[OK] All 16384 slots covered.\n>>> Send CLUSTER MEET to node 10.180.157.202:6379 to make it join the cluster.\nWaiting for the cluster to join.\n>>> Configure node as replica of 10.180.157.199:6379.\n[OK] New node added correctly.\n```\nadd-node\n```\n1load_cluster_info_from_nodecheck_cluster\n2--slavemaster--master-idmaster--master-idget_master_with_least_replicasslavemasterslaveload_cluster_info_from_nodeload_cluster_info_from_nodeadd-nodeexisting_host:existing_portcluster nodes\n3\n4slaveokslavecluster replicatemaster\n5\n```\n### del-node\n\ndel-nodedel-nodeslot\n```\nhost:port\nnode_idid\n```\n\ndel-node\n```\n$ruby redis-trib.rb del-node 10.180.157.199:6379 d5f6d1d17426bd564a6e309f32d0f5b96962fe53\n>>> Removing node d5f6d1d17426bd564a6e309f32d0f5b96962fe53 from cluster 10.180.157.199:6379\n>>> Sending CLUSTER FORGET messages to the cluster...\n>>> SHUTDOWN the node.\n```\n\ndel-node\n```\n1load_cluster_info_from_node\n2node id\n3slot\n4cluster forgetmasterslaveslavemasterget_master_with_least_replicasadd-node--master-idmaster\n5\n```\n### set-timeout\n\nset-timeout100100cluster-node-timeout15000config setconfig rewrite\n```\nruby redis-trib.rb set-timeout 10.180.157.199:6379 30000\n>>> Reconfiguring node timeout in every cluster node...\n*** New timeout set for 10.180.157.199:6379\n*** New timeout set for 10.180.157.205:6379\n*** New timeout set for 10.180.157.201:6379\n*** New timeout set for 10.180.157.200:6379\n*** New timeout set for 10.180.157.208:6379\n>>> New node timeout set. 5 OK, 0 ERR.\n```\n### call\n\ncallcall\n```\n$ruby redis-trib.rb call 10.180.157.199:6379 get key\n>>> Calling GET key\n10.180.157.199:6379: MOVED 12539 10.180.157.201:6379\n10.180.157.205:6379: MOVED 12539 10.180.157.201:6379\n10.180.157.201:6379:\n10.180.157.200:6379: MOVED 12539 10.180.157.201:6379\n10.180.157.208:6379: MOVED 12539 10.180.157.201:6379\n```\n### importredis\n\nimportredis\n```\n1load_cluster_info_from_nodecheck_cluster\n2rediscluster_enabled\n3scan1000\n4keykeyslot\n5migrate,,slot--copycopy--replacereplace\n6scankey\n7\n--copyimport--copy\n```\nimportredisslaveredis","source":"_posts/redis-trib-rb.md","raw":"---\nlayout: post\ntitle: redis-trib.rb\npublished: true\nauthor: xiemx\ncomments: true\ndate: 2017-02-27 05:02:35\ntags: [ redis ]\ncategories:\n    - redis\n# permalink: '/2017/02/27/redis-trib-rb'\n---\nredis-trib.rbredisredisredissrcredisredis-trib.rbredisruby\n```\nroot@p-hsg-redis-1:~# redis-trib.rb\nUsage: redis-trib  \n\n  create          host1:port1 ... hostN:portN\n                  --replicas \n  check           host:port\n  info            host:port\n  fix             host:port\n                  --timeout \n  reshard         host:port\n                  --from \n                  --to \n                  --slots \n                  --yes\n                  --timeout \n                  --pipeline \n  rebalance       host:port\n                  --weight \n                  --auto-weights\n                  --use-empty-masters\n                  --timeout \n                  --simulate\n                  --pipeline \n                  --threshold \n  add-node        new_host:new_port existing_host:existing_port\n                  --slave\n                  --master-id \n  del-node        host:port node_id\n  set-timeout     host:port milliseconds\n  call            host:port command arg arg .. arg\n  import          host:port\n                  --from \n                  --copy\n                  --replace\n  help            (show this help)\n\nFor check, fix, reshard, del-node, set-timeout you can specify the host and port of any working node in the cluster.\n```\nredis-trib.rb\n\n* create\n* check\n* info\n* fix\n* reshardslot\n* rebalanceslot\n* add-node\n* del-node\n* set-timeout\n* call\n* importredis\n\n### create\n\ncreatereplicasreplicasslave\n```\n$ruby redis-trib.rb create 10.180.157.199:6379 10.180.157.200:6379 10.180.157.201:6379\n```\nslave\n```\n$ruby redis-trib.rb create --replicas 1 10.180.157.199:6379 10.180.157.200:6379 10.180.157.201:6379 10.180.157.202:6379  10.180.157.205:6379  10.180.157.208:6379 \n```\n\n```\n1ClusterNodedbload_info\n2master33\n3masterslotmasterslave\nhostmaster\nhosthostinterleaved\nmasterinterleavedmastermasters\nmasterslotslots_per_nodeslotmaster\nmastersmasterslots_per_nodeslotmaster16384slot\nmasterslavemasterslaveslavemastermasters\nmastersreplicasslaveslavemasterhost\nreplicasmasterreplicasslave\n4yes\n5yesflush_nodes_configmasterslotslavemastercluster meetslaveflush_nodes_configflush_nodes_config\n6epochepoch1\n7\n81ClusterNodeget_config_signaturecluster nodesnode_id1:slots|node_id2:slot2|...\n9flush_nodes_configslave\n10check_clusterslot\n11[OK] All 16384 slots covered.\n```\n\n### check\n\n\n```shell\n$ruby redis-trib.rb check 10.180.157.199:6379\n>>> Performing Cluster Check (using node 10.180.157.199:6379)\nM: b2506515b38e6bbd3034d540599f4cd2a5279ad1 10.180.157.199:6379\n   slots:0-5460 (5461 slots) master\n   1 additional replica(s)\nS: d376aaf80de0e01dde1f8cd4647d5ac3317a8641 10.180.157.205:6379\n   slots: (0 slots) slave\n   replicates e36c46dbe90960f30861af00786d4c2064e63df2\nM: 15126fb33796c2c26ea89e553418946f7443d5a5 10.180.157.201:6379\n   slots:10923-16383 (5461 slots) master\n   1 additional replica(s)\nS: 59fa6ee455f58a5076f6d6f83ddd74161fd7fb55 10.180.157.208:6379\n   slots: (0 slots) slave\n   replicates 15126fb33796c2c26ea89e553418946f7443d5a5\nS: 460b3a11e296aafb2615043291b7dd98274bb351 10.180.157.202:6379\n   slots: (0 slots) slave\n   replicates b2506515b38e6bbd3034d540599f4cd2a5279ad1\nM: e36c46dbe90960f30861af00786d4c2064e63df2 10.180.157.200:6379\n   slots:5461-10922 (5462 slots) master\n   1 additional replica(s)\n[OK] All nodes agree about slots configuration.\n>>> Check for open slots...\n>>> Check slots coverage...\n[OK] All 16384 slots covered. \n\n```\n\nload_cluster_info_from_nodeloadloadcluster nodesnodes\n\nloadcheck_cluster\n\n### info\n\ninfoinfoload_cluster_info_from_nodeClusterNodeinfo_string\n```shell\n$ruby redis-trib.rb info 10.180.157.199:6379\n10.180.157.199:6379 (b2506515...) -> 0 keys | 5461 slots | 1 slaves.\n10.180.157.201:6379 (15126fb3...) -> 0 keys | 5461 slots | 1 slaves.\n10.180.157.200:6379 (e36c46db...) -> 0 keys | 5462 slots | 1 slaves.\n[OK] 0 keys in 3 masters.\n0.00 keys per slot on average.\n\n```\n### fix\n\nfixcheckcheck_clusterfix\ntruefixslotslot\n\nfix_open_slotslot\n```\n1slotownerownerslot\n2slotmigratingslotimportingownercluster countkeysinslotimporting\n3migratingimporting1redis-trib.rbmove_slotdotsfixtrue\n4migratingimporting0importingmove_slotslotownerdotsfixcoldtrueimportingcluster stable\n5importingmigratingslotslotstable\n6migratingimportingredis-trib.rbredis-trib.rb\nfix_slots_coverageslotslot\n\n1slotredis-trib.rbslotfixslotslot\n2slotslotslot\n3slotTODOrediscluster migratingmigratingslot\n```\n\n### reshardslot\n\nreshardslotslotreshard\n\nreshard\n```\nreshard         host:port\n                --from \n                --to \n                --slots \n                --yes\n                --timeout \n                --pipeline \nhost:port\n--from slotnode id--from all\n--to slotnode id\n--slots slot\n--yesreshardyesreshard\n--timeout migrate\n--pipeline cluster getkeysinslotkey10\n```\n\n```\n1load_cluster_info_from_node\n2check_cluster\n3slot--slots\n4--tomaster\n5--frommaster--from allmasterslot--from all\n6compute_reshard_tableslotslotslotslot * (slot / slot)\n\nn = (numslots/source_tot_slots*s.slots.length)\nif i == 0\n    n = n.ceil\nelse\n    n = n.floor\nslotslotBUGgithubhttps://github.com/antirez/redis/issues/2990\n\n7reshard--yes\n8reshardslotmove_slotmove_slotdotstruepipeline\n9\n```\n```\nruby redis-trib.rb reshard --from all --to 80b661ecca260c89e3d8ea9b98f77edaeef43dcd --slots 11 10.180.157.199:6379\n>>> Performing Cluster Check (using node 10.180.157.199:6379)\nS: b2506515b38e6bbd3034d540599f4cd2a5279ad1 10.180.157.199:6379\n   slots: (0 slots) slave\n   replicates 460b3a11e296aafb2615043291b7dd98274bb351\nS: d376aaf80de0e01dde1f8cd4647d5ac3317a8641 10.180.157.205:6379\n   slots: (0 slots) slave\n   replicates e36c46dbe90960f30861af00786d4c2064e63df2\nM: 15126fb33796c2c26ea89e553418946f7443d5a5 10.180.157.201:6379\n   slots:10923-16383 (5461 slots) master\n   1 additional replica(s)\nS: 59fa6ee455f58a5076f6d6f83ddd74161fd7fb55 10.180.157.208:6379\n   slots: (0 slots) slave\n   replicates 15126fb33796c2c26ea89e553418946f7443d5a5\nM: 460b3a11e296aafb2615043291b7dd98274bb351 10.180.157.202:6379\n   slots:0-5460 (5461 slots) master\n   1 additional replica(s)\nM: 80b661ecca260c89e3d8ea9b98f77edaeef43dcd 10.180.157.200:6380\n   slots: (0 slots) master\n   0 additional replica(s)\nM: e36c46dbe90960f30861af00786d4c2064e63df2 10.180.157.200:6379\n   slots:5461-10922 (5462 slots) master\n   1 additional replica(s)\n[OK] All nodes agree about slots configuration.\n>>> Check for open slots...\n>>> Check slots coverage...\n[OK] All 16384 slots covered.\n\nReady to move 11 slots.\n  Source nodes:\n    M: 15126fb33796c2c26ea89e553418946f7443d5a5 10.180.157.201:6379\n   slots:10923-16383 (5461 slots) master\n   1 additional replica(s)\n    M: 460b3a11e296aafb2615043291b7dd98274bb351 10.180.157.202:6379\n   slots:0-5460 (5461 slots) master\n   1 additional replica(s)\n    M: e36c46dbe90960f30861af00786d4c2064e63df2 10.180.157.200:6379\n   slots:5461-10922 (5462 slots) master\n   1 additional replica(s)\n  Destination node:\n    M: 80b661ecca260c89e3d8ea9b98f77edaeef43dcd 10.180.157.200:6380\n   slots: (0 slots) master\n   0 additional replica(s)\n  Resharding plan:\n    Moving slot 5461 from e36c46dbe90960f30861af00786d4c2064e63df2\n    Moving slot 5462 from e36c46dbe90960f30861af00786d4c2064e63df2\n    Moving slot 5463 from e36c46dbe90960f30861af00786d4c2064e63df2\n    Moving slot 5464 from e36c46dbe90960f30861af00786d4c2064e63df2\n    Moving slot 0 from 460b3a11e296aafb2615043291b7dd98274bb351\n    Moving slot 1 from 460b3a11e296aafb2615043291b7dd98274bb351\n    Moving slot 2 from 460b3a11e296aafb2615043291b7dd98274bb351\n    Moving slot 10923 from 15126fb33796c2c26ea89e553418946f7443d5a5\n    Moving slot 10924 from 15126fb33796c2c26ea89e553418946f7443d5a5\n    Moving slot 10925 from 15126fb33796c2c26ea89e553418946f7443d5a5\nDo you want to proceed with the proposed reshard plan (yes/no)? yes\nMoving slot 5461 from 10.180.157.200:6379 to 10.180.157.200:6380:\nMoving slot 5462 from 10.180.157.200:6379 to 10.180.157.200:6380:\nMoving slot 5463 from 10.180.157.200:6379 to 10.180.157.200:6380:\nMoving slot 5464 from 10.180.157.200:6379 to 10.180.157.200:6380:\nMoving slot 0 from 10.180.157.202:6379 to 10.180.157.200:6380:\nMoving slot 1 from 10.180.157.202:6379 to 10.180.157.200:6380:\nMoving slot 2 from 10.180.157.202:6379 to 10.180.157.200:6380:\nMoving slot 10923 from 10.180.157.201:6379 to 10.180.157.200:6380:\nMoving slot 10924 from 10.180.157.201:6379 to 10.180.157.200:6380:\nMoving slot 10925 from 10.180.157.201:6379 to 10.180.157.200:6380:\n```\n\nmove_slotslotfixreshardrebalanceslot\n\nmove_slot\n```\n1pipelineslotkey\n2quietquiet\n3coldcoldimportingmigrating\n4dotsdotskey\n5updateupdate\n```\nmove_slot\n```\n1coldcluster importingmigratingfiximportingmigratingcold\n2cluster getkeysinslotslotpipelinekey.\n3keymigrate\n4migratefixBUSYKEYmigratereplaceBUSYKEYkeyreplacekeyfix\n5cluster getkeysinslotkey0\n6coldcluster setslotslot\n7updateslot\n8slot\n```\n### rebalanceslot\n\nrebalanceslotrebalancerebalance\n```\nrebalance       host:port\n                --weight \n                --auto-weights\n                --threshold \n                --use-empty-masters\n                --timeout \n                --simulate\n                --pipeline \n\n$ruby redis-trib.rb rebalance --threshold 1 --weight b31e3a2e=5 --weight 60b8e3a1=5 --use-empty-masters  --simulate 10.180.157.199:6379\n\n\nhost:port\n--weight node_id=weight--weight --weight b31e3a2e=5 --weight 60b8e3a1=5node_idweight1\n--auto-weightsrebalance\n--threshold slotthresholdrebalancerebalance\n--use-empty-mastersrebalancemasterslotmasterrebalance--use-empty-mastersslotrebalance\n--timeout migrate\n--simulaterebalanceslots\n--pipeline resharpipelinecluster getkeysinslotkey10\n```\nrebalance\n```\n1load_cluster_info_from_node\n2master--weight 1\n3masterslotslot *  / \n4masterslot--threshold (100-(100.0*expected/n.slots.length)).absslotmasterrebalance\n5rebalancerebalanceslotsslotbalancebalancesn\n6dst_idxsrc_idxsnslot\n\nsnbalanceslotdst_idxslotsrc_idxsnbalance0slotbalance0balance0slotslot16384rebalance\n\n7sn[dst_idx]sn[src_idx]balancesn[src_idx]sn[dst_idx]slot\n8compute_reshard_tableslotreshardreshard\n9simulate\n10simulatemove_slotslot:quiet=>true,:dots=>false,:update=>true\n11sn[dst_idx]sn[src_idx]balancebalance01\n12dst_idxsrc_idxrebalance\n```\n### add-node\n\nadd-nodemastermasterslave\n```shell\nadd-node    new_host:new_port existing_host:existing_port\n          --slave\n          --master-id \nadd-node\n\n--slaveslave\n--master-id--slave--master-idmastermaster\n```\nadd-node\n```\n$ruby redis-trib.rb add-node --slave --master-id dcb792b3e85726f012e83061bf237072dfc45f99 10.180.157.202:6379 10.180.157.199:6379\n>>> Adding node 10.180.157.202:6379 to cluster 10.180.157.199:6379\n>>> Performing Cluster Check (using node 10.180.157.199:6379)\nM: dcb792b3e85726f012e83061bf237072dfc45f99 10.180.157.199:6379\n   slots:0-5460 (5461 slots) master\n   0 additional replica(s)\nM: 464d740bf48953ebcf826f4113c86f9db3a9baf3 10.180.157.201:6379\n   slots:10923-16383 (5461 slots) master\n   0 additional replica(s)\nM: befa7e17b4e5f239e519bc74bfef3264a40f96ae 10.180.157.200:6379\n   slots:5461-10922 (5462 slots) master\n   0 additional replica(s)\n[OK] All nodes agree about slots configuration.\n>>> Check for open slots...\n>>> Check slots coverage...\n[OK] All 16384 slots covered.\n>>> Send CLUSTER MEET to node 10.180.157.202:6379 to make it join the cluster.\nWaiting for the cluster to join.\n>>> Configure node as replica of 10.180.157.199:6379.\n[OK] New node added correctly.\n```\nadd-node\n```\n1load_cluster_info_from_nodecheck_cluster\n2--slavemaster--master-idmaster--master-idget_master_with_least_replicasslavemasterslaveload_cluster_info_from_nodeload_cluster_info_from_nodeadd-nodeexisting_host:existing_portcluster nodes\n3\n4slaveokslavecluster replicatemaster\n5\n```\n### del-node\n\ndel-nodedel-nodeslot\n```\nhost:port\nnode_idid\n```\n\ndel-node\n```\n$ruby redis-trib.rb del-node 10.180.157.199:6379 d5f6d1d17426bd564a6e309f32d0f5b96962fe53\n>>> Removing node d5f6d1d17426bd564a6e309f32d0f5b96962fe53 from cluster 10.180.157.199:6379\n>>> Sending CLUSTER FORGET messages to the cluster...\n>>> SHUTDOWN the node.\n```\n\ndel-node\n```\n1load_cluster_info_from_node\n2node id\n3slot\n4cluster forgetmasterslaveslavemasterget_master_with_least_replicasadd-node--master-idmaster\n5\n```\n### set-timeout\n\nset-timeout100100cluster-node-timeout15000config setconfig rewrite\n```\nruby redis-trib.rb set-timeout 10.180.157.199:6379 30000\n>>> Reconfiguring node timeout in every cluster node...\n*** New timeout set for 10.180.157.199:6379\n*** New timeout set for 10.180.157.205:6379\n*** New timeout set for 10.180.157.201:6379\n*** New timeout set for 10.180.157.200:6379\n*** New timeout set for 10.180.157.208:6379\n>>> New node timeout set. 5 OK, 0 ERR.\n```\n### call\n\ncallcall\n```\n$ruby redis-trib.rb call 10.180.157.199:6379 get key\n>>> Calling GET key\n10.180.157.199:6379: MOVED 12539 10.180.157.201:6379\n10.180.157.205:6379: MOVED 12539 10.180.157.201:6379\n10.180.157.201:6379:\n10.180.157.200:6379: MOVED 12539 10.180.157.201:6379\n10.180.157.208:6379: MOVED 12539 10.180.157.201:6379\n```\n### importredis\n\nimportredis\n```\n1load_cluster_info_from_nodecheck_cluster\n2rediscluster_enabled\n3scan1000\n4keykeyslot\n5migrate,,slot--copycopy--replacereplace\n6scankey\n7\n--copyimport--copy\n```\nimportredisslaveredis","slug":"redis-trib-rb","updated":"2019-10-21T06:57:42.989Z","photos":[],"link":"","_id":"ck42dyikn00ktu9ur29eb64p9","content":"<p>redis-trib.rbredisredisredissrcredisredis-trib.rbredisruby</p>\n<figure class=\"highlight dsconfig\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">root@</span><span class=\"string\">p-hsg-</span><span class=\"string\">redis-1:</span>~<span class=\"comment\"># redis-trib.rb</span></span><br><span class=\"line\"><span class=\"string\">Usage:</span> <span class=\"string\">redis-trib </span> </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"string\">create </span>         <span class=\"string\">host1:port1 </span>... <span class=\"string\">hostN:portN</span></span><br><span class=\"line\"><span class=\"string\"> </span>                 <span class=\"built_in\">--replicas</span> </span><br><span class=\"line\">  <span class=\"string\">check </span>          <span class=\"string\">host:port</span></span><br><span class=\"line\"><span class=\"string\"> </span> <span class=\"string\">info </span>           <span class=\"string\">host:port</span></span><br><span class=\"line\"><span class=\"string\"> </span> <span class=\"string\">fix </span>            <span class=\"string\">host:port</span></span><br><span class=\"line\"><span class=\"string\"> </span>                 <span class=\"built_in\">--timeout</span> </span><br><span class=\"line\">  <span class=\"string\">reshard </span>        <span class=\"string\">host:port</span></span><br><span class=\"line\"><span class=\"string\"> </span>                 <span class=\"built_in\">--from</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--to</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--slots</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--yes</span></span><br><span class=\"line\"><span class=\"built_in\"></span>                  <span class=\"built_in\">--timeout</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--pipeline</span> </span><br><span class=\"line\">  <span class=\"string\">rebalance </span>      <span class=\"string\">host:port</span></span><br><span class=\"line\"><span class=\"string\"> </span>                 <span class=\"built_in\">--weight</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--auto-weights</span></span><br><span class=\"line\"><span class=\"built_in\"></span>                  <span class=\"built_in\">--use-empty-masters</span></span><br><span class=\"line\"><span class=\"built_in\"></span>                  <span class=\"built_in\">--timeout</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--simulate</span></span><br><span class=\"line\"><span class=\"built_in\"></span>                  <span class=\"built_in\">--pipeline</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--threshold</span> </span><br><span class=\"line\">  <span class=\"string\">add-node </span>       <span class=\"string\">new_host:new_port </span><span class=\"string\">existing_host:existing_port</span></span><br><span class=\"line\"><span class=\"string\"> </span>                 <span class=\"built_in\">--slave</span></span><br><span class=\"line\"><span class=\"built_in\"></span>                  <span class=\"built_in\">--master-id</span> </span><br><span class=\"line\">  <span class=\"string\">del-node </span>       <span class=\"string\">host:port </span><span class=\"string\">node_id</span></span><br><span class=\"line\"><span class=\"string\"> </span> <span class=\"built_in\">set-timeout</span>     <span class=\"string\">host:port </span><span class=\"string\">milliseconds</span></span><br><span class=\"line\"><span class=\"string\"> </span> <span class=\"string\">call </span>           <span class=\"string\">host:port </span><span class=\"string\">command </span><span class=\"string\">arg </span><span class=\"string\">arg </span>.. <span class=\"string\">arg</span></span><br><span class=\"line\"><span class=\"string\"> </span> <span class=\"string\">import </span>         <span class=\"string\">host:port</span></span><br><span class=\"line\"><span class=\"string\"> </span>                 <span class=\"built_in\">--from</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--copy</span></span><br><span class=\"line\"><span class=\"built_in\"></span>                  <span class=\"built_in\">--replace</span></span><br><span class=\"line\"><span class=\"built_in\"></span>  <span class=\"string\">help </span>           (<span class=\"string\">show </span><span class=\"string\">this </span><span class=\"string\">help)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">For </span><span class=\"string\">check,</span> <span class=\"string\">fix,</span> <span class=\"string\">reshard,</span> <span class=\"string\">del-node,</span> <span class=\"built_in\">set-timeout</span> <span class=\"string\">you </span><span class=\"string\">can </span><span class=\"string\">specify </span><span class=\"string\">the </span><span class=\"string\">host </span><span class=\"string\">and </span><span class=\"string\">port </span><span class=\"string\">of </span><span class=\"string\">any </span><span class=\"string\">working </span><span class=\"string\">node </span><span class=\"string\">in </span><span class=\"string\">the </span><span class=\"string\">cluster.</span></span><br></pre></td></tr></table></figure>\n\n<p>redis-trib.rb</p>\n<ul>\n<li>create</li>\n<li>check</li>\n<li>info</li>\n<li>fix</li>\n<li>reshardslot</li>\n<li>rebalanceslot</li>\n<li>add-node</li>\n<li>del-node</li>\n<li>set-timeout</li>\n<li>call</li>\n<li>importredis</li>\n</ul>\n<h3 id=\"create\"><a href=\"#create\" class=\"headerlink\" title=\"create\"></a>create</h3><p>createreplicasreplicasslave</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ruby redis-trib.rb create <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br></pre></td></tr></table></figure>\n\n<p>slave</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ruby redis-trib.rb create --replicas <span class=\"number\">1</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span>  <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.205</span>:<span class=\"number\">6379</span>  <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.208</span>:<span class=\"number\">6379</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>ClusterNodedbload_<span class=\"literal\">inf</span>o</span><br><span class=\"line\"><span class=\"number\">2</span><span class=\"literal\">master</span><span class=\"number\">3</span><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">3</span><span class=\"literal\">master</span>slot<span class=\"literal\">master</span><span class=\"literal\">slave</span></span><br><span class=\"line\">host<span class=\"literal\">master</span></span><br><span class=\"line\">hosthostinterleaved</span><br><span class=\"line\"><span class=\"literal\">master</span>interleaved<span class=\"literal\">master</span>masters</span><br><span class=\"line\"><span class=\"literal\">master</span>slotslots_per_nodeslot<span class=\"literal\">master</span></span><br><span class=\"line\">masters<span class=\"literal\">master</span>slots_per_nodeslot<span class=\"literal\">master</span><span class=\"number\">16384</span>slot</span><br><span class=\"line\"><span class=\"literal\">master</span><span class=\"literal\">slave</span><span class=\"literal\">master</span><span class=\"literal\">slave</span><span class=\"literal\">slave</span><span class=\"literal\">master</span>masters</span><br><span class=\"line\">mastersreplicas<span class=\"literal\">slave</span><span class=\"literal\">slave</span><span class=\"literal\">master</span>host</span><br><span class=\"line\">replicas<span class=\"literal\">master</span>replicas<span class=\"literal\">slave</span></span><br><span class=\"line\"><span class=\"number\">4</span>yes</span><br><span class=\"line\"><span class=\"number\">5</span>yesflush_nodes_config<span class=\"literal\">master</span>slot<span class=\"literal\">slave</span><span class=\"literal\">master</span>cluster meet<span class=\"literal\">slave</span>flush_nodes_configflush_nodes_config</span><br><span class=\"line\"><span class=\"number\">6</span>epochepoch<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">7</span></span><br><span class=\"line\"><span class=\"number\">8</span><span class=\"number\">1</span>ClusterNodeget_config_signaturecluster nodesnode_id1:slots|node_id2:slot2|...</span><br><span class=\"line\"><span class=\"number\">9</span>flush_nodes_config<span class=\"literal\">slave</span></span><br><span class=\"line\"><span class=\"number\">10</span>check_clusterslot</span><br><span class=\"line\"><span class=\"number\">11</span>[OK] All <span class=\"number\">16384</span> slots covered.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"check\"><a href=\"#check\" class=\"headerlink\" title=\"check\"></a>check</h3><p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">ruby redis-trib.rb check 10.180.157.199:6379</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Performing Cluster Check (using node 10.180.157.199:6379)</span></span><br><span class=\"line\">M: b2506515b38e6bbd3034d540599f4cd2a5279ad1 10.180.157.199:6379</span><br><span class=\"line\">   slots:0-5460 (5461 slots) master</span><br><span class=\"line\">   1 additional replica(s)</span><br><span class=\"line\">S: d376aaf80de0e01dde1f8cd4647d5ac3317a8641 10.180.157.205:6379</span><br><span class=\"line\">   slots: (0 slots) slave</span><br><span class=\"line\">   replicates e36c46dbe90960f30861af00786d4c2064e63df2</span><br><span class=\"line\">M: 15126fb33796c2c26ea89e553418946f7443d5a5 10.180.157.201:6379</span><br><span class=\"line\">   slots:10923-16383 (5461 slots) master</span><br><span class=\"line\">   1 additional replica(s)</span><br><span class=\"line\">S: 59fa6ee455f58a5076f6d6f83ddd74161fd7fb55 10.180.157.208:6379</span><br><span class=\"line\">   slots: (0 slots) slave</span><br><span class=\"line\">   replicates 15126fb33796c2c26ea89e553418946f7443d5a5</span><br><span class=\"line\">S: 460b3a11e296aafb2615043291b7dd98274bb351 10.180.157.202:6379</span><br><span class=\"line\">   slots: (0 slots) slave</span><br><span class=\"line\">   replicates b2506515b38e6bbd3034d540599f4cd2a5279ad1</span><br><span class=\"line\">M: e36c46dbe90960f30861af00786d4c2064e63df2 10.180.157.200:6379</span><br><span class=\"line\">   slots:5461-10922 (5462 slots) master</span><br><span class=\"line\">   1 additional replica(s)</span><br><span class=\"line\">[OK] All nodes agree about slots configuration.</span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Check <span class=\"keyword\">for</span> open slots...</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Check slots coverage...</span></span><br><span class=\"line\">[OK] All 16384 slots covered.</span><br></pre></td></tr></table></figure>\n\n<p>load_cluster_info_from_nodeloadloadcluster nodesnodes</p>\n<p>loadcheck_cluster</p>\n<h3 id=\"info\"><a href=\"#info\" class=\"headerlink\" title=\"info\"></a>info</h3><p>infoinfoload_cluster_info_from_nodeClusterNodeinfo_string</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">ruby redis-trib.rb info 10.180.157.199:6379</span></span><br><span class=\"line\">10.180.157.199:6379 (b2506515...) -&gt; 0 keys | 5461 slots | 1 slaves.</span><br><span class=\"line\">10.180.157.201:6379 (15126fb3...) -&gt; 0 keys | 5461 slots | 1 slaves.</span><br><span class=\"line\">10.180.157.200:6379 (e36c46db...) -&gt; 0 keys | 5462 slots | 1 slaves.</span><br><span class=\"line\">[OK] 0 keys in 3 masters.</span><br><span class=\"line\">0.00 keys per slot on average.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"fix\"><a href=\"#fix\" class=\"headerlink\" title=\"fix\"></a>fix</h3><p>fixcheckcheck_clusterfix<br>truefixslotslot</p>\n<p>fix_open_slotslot</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>slotownerownerslot</span><br><span class=\"line\"><span class=\"number\">2</span>slotmigratingslotimportingownercluster countkeysinslotimporting</span><br><span class=\"line\"><span class=\"number\">3</span>migratingimporting<span class=\"number\">1</span>redis-trib.rbmove_slotdotsfix<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"number\">4</span>migratingimporting<span class=\"number\">0</span>importingmove_slotslotownerdotsfixcold<span class=\"literal\">true</span>importingcluster stable</span><br><span class=\"line\"><span class=\"number\">5</span>importingmigratingslotslotstable</span><br><span class=\"line\"><span class=\"number\">6</span>migratingimportingredis-trib.rbredis-trib.rb</span><br><span class=\"line\">fix_slots_coverageslotslot</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">1</span>slotredis-trib.rbslotfixslotslot</span><br><span class=\"line\"><span class=\"number\">2</span>slotslotslot</span><br><span class=\"line\"><span class=\"number\">3</span>slotTODOrediscluster migratingmigratingslot</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"reshardslot\"><a href=\"#reshardslot\" class=\"headerlink\" title=\"reshardslot\"></a>reshardslot</h3><p>reshardslotslotreshard</p>\n<p>reshard</p>\n<figure class=\"highlight elm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">reshard</span>         host:<span class=\"keyword\">port</span></span><br><span class=\"line\">                <span class=\"comment\">--from </span></span><br><span class=\"line\">                <span class=\"comment\">--to </span></span><br><span class=\"line\">                <span class=\"comment\">--slots </span></span><br><span class=\"line\">                <span class=\"comment\">--yes</span></span><br><span class=\"line\">                <span class=\"comment\">--timeout </span></span><br><span class=\"line\">                <span class=\"comment\">--pipeline </span></span><br><span class=\"line\">host:<span class=\"keyword\">port</span></span><br><span class=\"line\"><span class=\"comment\">--from slotnode id--from all</span></span><br><span class=\"line\"><span class=\"comment\">--to slotnode id</span></span><br><span class=\"line\"><span class=\"comment\">--slots slot</span></span><br><span class=\"line\"><span class=\"comment\">--yesreshardyesreshard</span></span><br><span class=\"line\"><span class=\"comment\">--timeout migrate</span></span><br><span class=\"line\"><span class=\"comment\">--pipeline cluster getkeysinslotkey10</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>load_cluster_info_from_node</span><br><span class=\"line\"><span class=\"number\">2</span>check_cluster</span><br><span class=\"line\"><span class=\"number\">3</span>slot--slots</span><br><span class=\"line\"><span class=\"number\">4</span>--tomaster</span><br><span class=\"line\"><span class=\"number\">5</span>--<span class=\"keyword\">from</span>master--<span class=\"keyword\">from</span> allmasterslot--<span class=\"keyword\">from</span> all</span><br><span class=\"line\"><span class=\"number\">6</span>compute_reshard_tableslotslotslotslot * (slot / slot)</span><br><span class=\"line\"></span><br><span class=\"line\">n = (numslots/source_tot_slots*s.slots.length)</span><br><span class=\"line\"><span class=\"keyword\">if</span> i == <span class=\"number\">0</span></span><br><span class=\"line\">    n = n.ceil</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    n = n.floor</span><br><span class=\"line\">slotslotBUGgithubhttps:<span class=\"comment\">//github.com/antirez/redis/issues/2990</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">7</span>reshard--yes</span><br><span class=\"line\"><span class=\"number\">8</span>reshardslotmove_slotmove_slotdots<span class=\"literal\">true</span>pipeline</span><br><span class=\"line\"><span class=\"number\">9</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ruby redis-trib.rb reshard --<span class=\"keyword\">from</span> all --to <span class=\"number\">80</span>b661ecca260c89e3d8ea9b98f77edaeef43dcd --slots <span class=\"number\">11</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">&gt;&gt;&gt; Performing Cluster Check (using node <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span>)</span><br><span class=\"line\">S: b2506515b38e6bbd3034d540599f4cd2a5279ad1 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots: (<span class=\"number\">0</span> slots) slave</span><br><span class=\"line\">   replicates <span class=\"number\">460</span>b3a11e296aafb2615043291b7dd98274bb351</span><br><span class=\"line\">S: d376aaf80de0e01dde1f8cd4647d5ac3317a8641 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.205</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots: (<span class=\"number\">0</span> slots) slave</span><br><span class=\"line\">   replicates e36c46dbe90960f30861af00786d4c2064e63df2</span><br><span class=\"line\">M: <span class=\"number\">15126f</span>b33796c2c26ea89e553418946f7443d5a5 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">10923</span><span class=\"number\">-16383</span> (<span class=\"number\">5461</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">1</span> additional replica(s)</span><br><span class=\"line\">S: <span class=\"number\">59f</span>a6ee455f58a5076f6d6f83ddd74161fd7fb55 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.208</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots: (<span class=\"number\">0</span> slots) slave</span><br><span class=\"line\">   replicates <span class=\"number\">15126f</span>b33796c2c26ea89e553418946f7443d5a5</span><br><span class=\"line\">M: <span class=\"number\">460</span>b3a11e296aafb2615043291b7dd98274bb351 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">0</span><span class=\"number\">-5460</span> (<span class=\"number\">5461</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">1</span> additional replica(s)</span><br><span class=\"line\">M: <span class=\"number\">80</span>b661ecca260c89e3d8ea9b98f77edaeef43dcd <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span></span><br><span class=\"line\">   slots: (<span class=\"number\">0</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">0</span> additional replica(s)</span><br><span class=\"line\">M: e36c46dbe90960f30861af00786d4c2064e63df2 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">5461</span><span class=\"number\">-10922</span> (<span class=\"number\">5462</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">1</span> additional replica(s)</span><br><span class=\"line\">[OK] All nodes agree about slots configuration.</span><br><span class=\"line\">&gt;&gt;&gt; Check <span class=\"keyword\">for</span> open slots...</span><br><span class=\"line\">&gt;&gt;&gt; Check slots coverage...</span><br><span class=\"line\">[OK] All <span class=\"number\">16384</span> slots covered.</span><br><span class=\"line\"></span><br><span class=\"line\">Ready to move <span class=\"number\">11</span> slots.</span><br><span class=\"line\">  Source nodes:</span><br><span class=\"line\">    M: <span class=\"number\">15126f</span>b33796c2c26ea89e553418946f7443d5a5 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">10923</span><span class=\"number\">-16383</span> (<span class=\"number\">5461</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">1</span> additional replica(s)</span><br><span class=\"line\">    M: <span class=\"number\">460</span>b3a11e296aafb2615043291b7dd98274bb351 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">0</span><span class=\"number\">-5460</span> (<span class=\"number\">5461</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">1</span> additional replica(s)</span><br><span class=\"line\">    M: e36c46dbe90960f30861af00786d4c2064e63df2 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">5461</span><span class=\"number\">-10922</span> (<span class=\"number\">5462</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">1</span> additional replica(s)</span><br><span class=\"line\">  Destination node:</span><br><span class=\"line\">    M: <span class=\"number\">80</span>b661ecca260c89e3d8ea9b98f77edaeef43dcd <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span></span><br><span class=\"line\">   slots: (<span class=\"number\">0</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">0</span> additional replica(s)</span><br><span class=\"line\">  Resharding plan:</span><br><span class=\"line\">    Moving slot <span class=\"number\">5461</span> <span class=\"keyword\">from</span> e36c46dbe90960f30861af00786d4c2064e63df2</span><br><span class=\"line\">    Moving slot <span class=\"number\">5462</span> <span class=\"keyword\">from</span> e36c46dbe90960f30861af00786d4c2064e63df2</span><br><span class=\"line\">    Moving slot <span class=\"number\">5463</span> <span class=\"keyword\">from</span> e36c46dbe90960f30861af00786d4c2064e63df2</span><br><span class=\"line\">    Moving slot <span class=\"number\">5464</span> <span class=\"keyword\">from</span> e36c46dbe90960f30861af00786d4c2064e63df2</span><br><span class=\"line\">    Moving slot <span class=\"number\">0</span> <span class=\"keyword\">from</span> <span class=\"number\">460</span>b3a11e296aafb2615043291b7dd98274bb351</span><br><span class=\"line\">    Moving slot <span class=\"number\">1</span> <span class=\"keyword\">from</span> <span class=\"number\">460</span>b3a11e296aafb2615043291b7dd98274bb351</span><br><span class=\"line\">    Moving slot <span class=\"number\">2</span> <span class=\"keyword\">from</span> <span class=\"number\">460</span>b3a11e296aafb2615043291b7dd98274bb351</span><br><span class=\"line\">    Moving slot <span class=\"number\">10923</span> <span class=\"keyword\">from</span> <span class=\"number\">15126f</span>b33796c2c26ea89e553418946f7443d5a5</span><br><span class=\"line\">    Moving slot <span class=\"number\">10924</span> <span class=\"keyword\">from</span> <span class=\"number\">15126f</span>b33796c2c26ea89e553418946f7443d5a5</span><br><span class=\"line\">    Moving slot <span class=\"number\">10925</span> <span class=\"keyword\">from</span> <span class=\"number\">15126f</span>b33796c2c26ea89e553418946f7443d5a5</span><br><span class=\"line\">Do you want to proceed with the proposed reshard plan (yes/no)? yes</span><br><span class=\"line\">Moving slot <span class=\"number\">5461</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">5462</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">5463</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">5464</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">0</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">1</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">2</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">10923</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">10924</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">10925</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br></pre></td></tr></table></figure>\n\n<p>move_slotslotfixreshardrebalanceslot</p>\n<p>move_slot</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>pipelineslot<span class=\"type\">key</span></span><br><span class=\"line\"><span class=\"number\">2</span>quietquiet</span><br><span class=\"line\"><span class=\"number\">3</span>coldcoldimportingmigrating</span><br><span class=\"line\"><span class=\"number\">4</span>dotsdots<span class=\"type\">key</span></span><br><span class=\"line\"><span class=\"number\">5</span>updateupdate</span><br></pre></td></tr></table></figure>\n\n<p>move_slot</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>coldcluster importingmigratingfiximportingmigratingcold</span><br><span class=\"line\"><span class=\"number\">2</span>cluster getkeysinslotslotpipeline<span class=\"type\">key</span>.</span><br><span class=\"line\"><span class=\"number\">3</span><span class=\"type\">key</span>migrate</span><br><span class=\"line\"><span class=\"number\">4</span>migratefixBUSYKEYmigratereplaceBUSYKEY<span class=\"type\">key</span>replace<span class=\"type\">key</span>fix</span><br><span class=\"line\"><span class=\"number\">5</span>cluster getkeysinslot<span class=\"type\">key</span><span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"number\">6</span>coldcluster setslotslot</span><br><span class=\"line\"><span class=\"number\">7</span>updateslot</span><br><span class=\"line\"><span class=\"number\">8</span>slot</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"rebalanceslot\"><a href=\"#rebalanceslot\" class=\"headerlink\" title=\"rebalanceslot\"></a>rebalanceslot</h3><p>rebalanceslotrebalancerebalance</p>\n<figure class=\"highlight brainfuck\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">rebalance</span>       <span class=\"comment\">host:port</span></span><br><span class=\"line\"><span class=\"comment\"></span>                <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">weight</span> </span><br><span class=\"line\">                <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">auto</span><span class=\"literal\">-</span><span class=\"comment\">weights</span></span><br><span class=\"line\"><span class=\"comment\"></span>                <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">threshold</span> </span><br><span class=\"line\">                <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">use</span><span class=\"literal\">-</span><span class=\"comment\">empty</span><span class=\"literal\">-</span><span class=\"comment\">masters</span></span><br><span class=\"line\"><span class=\"comment\"></span>                <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">timeout</span> </span><br><span class=\"line\">                <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">simulate</span></span><br><span class=\"line\"><span class=\"comment\"></span>                <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">pipeline</span> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">$ruby</span> <span class=\"comment\">redis</span><span class=\"literal\">-</span><span class=\"comment\">trib</span><span class=\"string\">.</span><span class=\"comment\">rb</span> <span class=\"comment\">rebalance</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">threshold</span> <span class=\"comment\">1</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">weight</span> <span class=\"comment\">b31e3a2e=5</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">weight</span> <span class=\"comment\">60b8e3a1=5</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">use</span><span class=\"literal\">-</span><span class=\"comment\">empty</span><span class=\"literal\">-</span><span class=\"comment\">masters</span>  <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">simulate</span> <span class=\"comment\">10</span><span class=\"string\">.</span><span class=\"comment\">180</span><span class=\"string\">.</span><span class=\"comment\">157</span><span class=\"string\">.</span><span class=\"comment\">199:6379</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">host:port</span></span><br><span class=\"line\"><span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">weight</span> <span class=\"comment\">node_id=weight</span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">weight</span> <span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">weight</span> <span class=\"comment\">b31e3a2e=5</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">weight</span> <span class=\"comment\">60b8e3a1=5node_idweight1</span></span><br><span class=\"line\"><span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">auto</span><span class=\"literal\">-</span><span class=\"comment\">weightsrebalance</span></span><br><span class=\"line\"><span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">threshold</span> <span class=\"comment\">slotthresholdrebalancerebalance</span></span><br><span class=\"line\"><span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">use</span><span class=\"literal\">-</span><span class=\"comment\">empty</span><span class=\"literal\">-</span><span class=\"comment\">mastersrebalancemasterslotmasterrebalance</span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">use</span><span class=\"literal\">-</span><span class=\"comment\">empty</span><span class=\"literal\">-</span><span class=\"comment\">mastersslotrebalance</span></span><br><span class=\"line\"><span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">timeout</span> <span class=\"comment\">migrate</span></span><br><span class=\"line\"><span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">simulaterebalanceslots</span></span><br><span class=\"line\"><span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">pipeline</span> <span class=\"comment\">resharpipelinecluster</span> <span class=\"comment\">getkeysinslotkey10</span></span><br></pre></td></tr></table></figure>\n\n<p>rebalance</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>load_cluster_info_from_node</span><br><span class=\"line\"><span class=\"number\">2</span>master--weight <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">3</span>masterslotslot *  / </span><br><span class=\"line\"><span class=\"number\">4</span>masterslot--threshold (<span class=\"number\">100</span>-(<span class=\"number\">100.0</span>*expected/n.slots.length)).absslotmasterrebalance</span><br><span class=\"line\"><span class=\"number\">5</span>rebalancerebalanceslotsslotbalancebalancesn</span><br><span class=\"line\"><span class=\"number\">6</span>dst_idxsrc_idxsnslot</span><br><span class=\"line\"></span><br><span class=\"line\">snbalanceslotdst_idxslotsrc_idxsnbalance<span class=\"number\">0</span>slotbalance<span class=\"number\">0</span>balance<span class=\"number\">0</span>slotslot<span class=\"number\">16384</span>rebalance</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">7</span>sn[dst_idx]sn[src_idx]balancesn[src_idx]sn[dst_idx]slot</span><br><span class=\"line\"><span class=\"number\">8</span>compute_reshard_tableslotreshardreshard</span><br><span class=\"line\"><span class=\"number\">9</span>simulate</span><br><span class=\"line\"><span class=\"number\">10</span>simulatemove_slotslot:quiet=&gt;<span class=\"literal\">true</span>,:dots=&gt;<span class=\"literal\">false</span>,:update=&gt;<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"number\">11</span>sn[dst_idx]sn[src_idx]balancebalance<span class=\"number\">0</span><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">12</span>dst_idxsrc_idxrebalance</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"add-node\"><a href=\"#add-node\" class=\"headerlink\" title=\"add-node\"></a>add-node</h3><p>add-nodemastermasterslave</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">add-node    new_host:new_port existing_host:existing_port</span><br><span class=\"line\">          --slave</span><br><span class=\"line\">          --master-id </span><br><span class=\"line\">add-node</span><br><span class=\"line\"></span><br><span class=\"line\">--slaveslave</span><br><span class=\"line\">--master-id--slave--master-idmastermaster</span><br></pre></td></tr></table></figure>\n\n<p>add-node</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ruby redis-trib.rb add-node --slave --master-id dcb792b3e85726f012e83061bf237072dfc45f99 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">&gt;&gt;&gt; Adding node <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span> to cluster <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">&gt;&gt;&gt; Performing Cluster Check (using node <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span>)</span><br><span class=\"line\">M: dcb792b3e85726f012e83061bf237072dfc45f99 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">0</span><span class=\"number\">-5460</span> (<span class=\"number\">5461</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">0</span> additional replica(s)</span><br><span class=\"line\">M: <span class=\"number\">464</span>d740bf48953ebcf826f4113c86f9db3a9baf3 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">10923</span><span class=\"number\">-16383</span> (<span class=\"number\">5461</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">0</span> additional replica(s)</span><br><span class=\"line\">M: befa7e17b4e5f239e519bc74bfef3264a40f96ae <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">5461</span><span class=\"number\">-10922</span> (<span class=\"number\">5462</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">0</span> additional replica(s)</span><br><span class=\"line\">[OK] All nodes agree about slots configuration.</span><br><span class=\"line\">&gt;&gt;&gt; Check <span class=\"keyword\">for</span> open slots...</span><br><span class=\"line\">&gt;&gt;&gt; Check slots coverage...</span><br><span class=\"line\">[OK] All <span class=\"number\">16384</span> slots covered.</span><br><span class=\"line\">&gt;&gt;&gt; Send CLUSTER MEET to node <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span> to make it join the cluster.</span><br><span class=\"line\">Waiting <span class=\"keyword\">for</span> the cluster to join.</span><br><span class=\"line\">&gt;&gt;&gt; Configure node as replica of <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379.</span></span><br><span class=\"line\">[OK] New node added correctly.</span><br></pre></td></tr></table></figure>\n\n<p>add-node</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>load_cluster_<span class=\"literal\">inf</span>o_from_nodecheck_cluster</span><br><span class=\"line\"><span class=\"number\">2</span>--<span class=\"literal\">slave</span><span class=\"literal\">master</span>--<span class=\"literal\">master</span>-id<span class=\"literal\">master</span>--<span class=\"literal\">master</span>-idget_master_with_least_replicas<span class=\"literal\">slave</span><span class=\"literal\">master</span><span class=\"literal\">slave</span>load_cluster_<span class=\"literal\">inf</span>o_from_nodeload_cluster_<span class=\"literal\">inf</span>o_from_nodeadd-<span class=\"keyword\">node</span><span class=\"title\">existing_host</span>:existing_portcluster nodes</span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">4</span><span class=\"literal\">slave</span>ok<span class=\"literal\">slave</span>cluster replicate<span class=\"literal\">master</span></span><br><span class=\"line\"><span class=\"number\">5</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"del-node\"><a href=\"#del-node\" class=\"headerlink\" title=\"del-node\"></a>del-node</h3><p>del-nodedel-nodeslot</p>\n<figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">host:port</span><br><span class=\"line\">node_id<span class=\"built_in\">id</span></span><br></pre></td></tr></table></figure>\n\n<p>del-node</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ruby redis-trib.rb del-<span class=\"keyword\">node</span> <span class=\"title\">10</span>.<span class=\"number\">180.157</span>.<span class=\"number\">199</span>:<span class=\"number\">6379</span> d5f6d1d17426bd564a6e309f32d0f5b96962fe53</span><br><span class=\"line\">&gt;&gt;&gt; Removing <span class=\"keyword\">node</span> <span class=\"title\">d5f6d1d17426bd564a6e309f32d0f5b96962fe53</span> from cluster <span class=\"number\">10.180</span>.<span class=\"number\">157.199</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">&gt;&gt;&gt; Sending CLUSTER FORGET messages to the cluster...</span><br><span class=\"line\">&gt;&gt;&gt; SHUTDOWN the <span class=\"keyword\">node</span>.<span class=\"title\"></span></span><br></pre></td></tr></table></figure>\n\n<p>del-node</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>load_cluster_<span class=\"literal\">inf</span>o_from_node</span><br><span class=\"line\"><span class=\"number\">2</span><span class=\"keyword\">node</span> <span class=\"title\">id</span></span><br><span class=\"line\"><span class=\"number\">3</span>slot</span><br><span class=\"line\"><span class=\"number\">4</span>cluster forget<span class=\"literal\">master</span><span class=\"literal\">slave</span><span class=\"literal\">slave</span><span class=\"literal\">master</span>get_master_with_least_replicasadd-<span class=\"keyword\">node</span><span class=\"title\">--master-id</span><span class=\"literal\">master</span></span><br><span class=\"line\"><span class=\"number\">5</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"set-timeout\"><a href=\"#set-timeout\" class=\"headerlink\" title=\"set-timeout\"></a>set-timeout</h3><p>set-timeout100100cluster-node-timeout15000config setconfig rewrite</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ruby redis-trib.rb <span class=\"keyword\">set</span>-timeout <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span> <span class=\"number\">30000</span></span><br><span class=\"line\">&gt;&gt;&gt; Reconfiguring node timeout <span class=\"keyword\">in</span> every cluster node...</span><br><span class=\"line\">*** New timeout <span class=\"keyword\">set</span> <span class=\"keyword\">for</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">*** New timeout <span class=\"keyword\">set</span> <span class=\"keyword\">for</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.205</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">*** New timeout <span class=\"keyword\">set</span> <span class=\"keyword\">for</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">*** New timeout <span class=\"keyword\">set</span> <span class=\"keyword\">for</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">*** New timeout <span class=\"keyword\">set</span> <span class=\"keyword\">for</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.208</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">&gt;&gt;&gt; New node timeout <span class=\"keyword\">set</span>. <span class=\"number\">5</span> OK, <span class=\"number\">0</span> ERR.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"call\"><a href=\"#call\" class=\"headerlink\" title=\"call\"></a>call</h3><p>callcall</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ruby redis-trib.rb call <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span> <span class=\"keyword\">get</span> key</span><br><span class=\"line\">&gt;&gt;&gt; Calling GET key</span><br><span class=\"line\"><span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span>: MOVED <span class=\"number\">12539</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br><span class=\"line\"><span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.205</span>:<span class=\"number\">6379</span>: MOVED <span class=\"number\">12539</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br><span class=\"line\"><span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span>:</span><br><span class=\"line\"><span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span>: MOVED <span class=\"number\">12539</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br><span class=\"line\"><span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.208</span>:<span class=\"number\">6379</span>: MOVED <span class=\"number\">12539</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"importredis\"><a href=\"#importredis\" class=\"headerlink\" title=\"importredis\"></a>importredis</h3><p>importredis</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>load_cluster_info_from_nodecheck_cluster</span><br><span class=\"line\"><span class=\"number\">2</span>rediscluster_enabled</span><br><span class=\"line\"><span class=\"number\">3</span>scan<span class=\"number\">1000</span></span><br><span class=\"line\"><span class=\"number\">4</span><span class=\"type\">key</span><span class=\"type\">key</span>slot</span><br><span class=\"line\"><span class=\"number\">5</span>migrate,,slot--copycopy--replacereplace</span><br><span class=\"line\"><span class=\"number\">6</span>scan<span class=\"type\">key</span></span><br><span class=\"line\"><span class=\"number\">7</span></span><br><span class=\"line\">--copyimport--copy</span><br></pre></td></tr></table></figure>\n\n<p>importredisslaveredis</p>\n","site":{"data":{}},"excerpt":"","more":"<p>redis-trib.rbredisredisredissrcredisredis-trib.rbredisruby</p>\n<figure class=\"highlight dsconfig\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">root@</span><span class=\"string\">p-hsg-</span><span class=\"string\">redis-1:</span>~<span class=\"comment\"># redis-trib.rb</span></span><br><span class=\"line\"><span class=\"string\">Usage:</span> <span class=\"string\">redis-trib </span> </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"string\">create </span>         <span class=\"string\">host1:port1 </span>... <span class=\"string\">hostN:portN</span></span><br><span class=\"line\"><span class=\"string\"> </span>                 <span class=\"built_in\">--replicas</span> </span><br><span class=\"line\">  <span class=\"string\">check </span>          <span class=\"string\">host:port</span></span><br><span class=\"line\"><span class=\"string\"> </span> <span class=\"string\">info </span>           <span class=\"string\">host:port</span></span><br><span class=\"line\"><span class=\"string\"> </span> <span class=\"string\">fix </span>            <span class=\"string\">host:port</span></span><br><span class=\"line\"><span class=\"string\"> </span>                 <span class=\"built_in\">--timeout</span> </span><br><span class=\"line\">  <span class=\"string\">reshard </span>        <span class=\"string\">host:port</span></span><br><span class=\"line\"><span class=\"string\"> </span>                 <span class=\"built_in\">--from</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--to</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--slots</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--yes</span></span><br><span class=\"line\"><span class=\"built_in\"></span>                  <span class=\"built_in\">--timeout</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--pipeline</span> </span><br><span class=\"line\">  <span class=\"string\">rebalance </span>      <span class=\"string\">host:port</span></span><br><span class=\"line\"><span class=\"string\"> </span>                 <span class=\"built_in\">--weight</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--auto-weights</span></span><br><span class=\"line\"><span class=\"built_in\"></span>                  <span class=\"built_in\">--use-empty-masters</span></span><br><span class=\"line\"><span class=\"built_in\"></span>                  <span class=\"built_in\">--timeout</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--simulate</span></span><br><span class=\"line\"><span class=\"built_in\"></span>                  <span class=\"built_in\">--pipeline</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--threshold</span> </span><br><span class=\"line\">  <span class=\"string\">add-node </span>       <span class=\"string\">new_host:new_port </span><span class=\"string\">existing_host:existing_port</span></span><br><span class=\"line\"><span class=\"string\"> </span>                 <span class=\"built_in\">--slave</span></span><br><span class=\"line\"><span class=\"built_in\"></span>                  <span class=\"built_in\">--master-id</span> </span><br><span class=\"line\">  <span class=\"string\">del-node </span>       <span class=\"string\">host:port </span><span class=\"string\">node_id</span></span><br><span class=\"line\"><span class=\"string\"> </span> <span class=\"built_in\">set-timeout</span>     <span class=\"string\">host:port </span><span class=\"string\">milliseconds</span></span><br><span class=\"line\"><span class=\"string\"> </span> <span class=\"string\">call </span>           <span class=\"string\">host:port </span><span class=\"string\">command </span><span class=\"string\">arg </span><span class=\"string\">arg </span>.. <span class=\"string\">arg</span></span><br><span class=\"line\"><span class=\"string\"> </span> <span class=\"string\">import </span>         <span class=\"string\">host:port</span></span><br><span class=\"line\"><span class=\"string\"> </span>                 <span class=\"built_in\">--from</span> </span><br><span class=\"line\">                  <span class=\"built_in\">--copy</span></span><br><span class=\"line\"><span class=\"built_in\"></span>                  <span class=\"built_in\">--replace</span></span><br><span class=\"line\"><span class=\"built_in\"></span>  <span class=\"string\">help </span>           (<span class=\"string\">show </span><span class=\"string\">this </span><span class=\"string\">help)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">For </span><span class=\"string\">check,</span> <span class=\"string\">fix,</span> <span class=\"string\">reshard,</span> <span class=\"string\">del-node,</span> <span class=\"built_in\">set-timeout</span> <span class=\"string\">you </span><span class=\"string\">can </span><span class=\"string\">specify </span><span class=\"string\">the </span><span class=\"string\">host </span><span class=\"string\">and </span><span class=\"string\">port </span><span class=\"string\">of </span><span class=\"string\">any </span><span class=\"string\">working </span><span class=\"string\">node </span><span class=\"string\">in </span><span class=\"string\">the </span><span class=\"string\">cluster.</span></span><br></pre></td></tr></table></figure>\n\n<p>redis-trib.rb</p>\n<ul>\n<li>create</li>\n<li>check</li>\n<li>info</li>\n<li>fix</li>\n<li>reshardslot</li>\n<li>rebalanceslot</li>\n<li>add-node</li>\n<li>del-node</li>\n<li>set-timeout</li>\n<li>call</li>\n<li>importredis</li>\n</ul>\n<h3 id=\"create\"><a href=\"#create\" class=\"headerlink\" title=\"create\"></a>create</h3><p>createreplicasreplicasslave</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ruby redis-trib.rb create <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br></pre></td></tr></table></figure>\n\n<p>slave</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ruby redis-trib.rb create --replicas <span class=\"number\">1</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span>  <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.205</span>:<span class=\"number\">6379</span>  <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.208</span>:<span class=\"number\">6379</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>ClusterNodedbload_<span class=\"literal\">inf</span>o</span><br><span class=\"line\"><span class=\"number\">2</span><span class=\"literal\">master</span><span class=\"number\">3</span><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">3</span><span class=\"literal\">master</span>slot<span class=\"literal\">master</span><span class=\"literal\">slave</span></span><br><span class=\"line\">host<span class=\"literal\">master</span></span><br><span class=\"line\">hosthostinterleaved</span><br><span class=\"line\"><span class=\"literal\">master</span>interleaved<span class=\"literal\">master</span>masters</span><br><span class=\"line\"><span class=\"literal\">master</span>slotslots_per_nodeslot<span class=\"literal\">master</span></span><br><span class=\"line\">masters<span class=\"literal\">master</span>slots_per_nodeslot<span class=\"literal\">master</span><span class=\"number\">16384</span>slot</span><br><span class=\"line\"><span class=\"literal\">master</span><span class=\"literal\">slave</span><span class=\"literal\">master</span><span class=\"literal\">slave</span><span class=\"literal\">slave</span><span class=\"literal\">master</span>masters</span><br><span class=\"line\">mastersreplicas<span class=\"literal\">slave</span><span class=\"literal\">slave</span><span class=\"literal\">master</span>host</span><br><span class=\"line\">replicas<span class=\"literal\">master</span>replicas<span class=\"literal\">slave</span></span><br><span class=\"line\"><span class=\"number\">4</span>yes</span><br><span class=\"line\"><span class=\"number\">5</span>yesflush_nodes_config<span class=\"literal\">master</span>slot<span class=\"literal\">slave</span><span class=\"literal\">master</span>cluster meet<span class=\"literal\">slave</span>flush_nodes_configflush_nodes_config</span><br><span class=\"line\"><span class=\"number\">6</span>epochepoch<span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">7</span></span><br><span class=\"line\"><span class=\"number\">8</span><span class=\"number\">1</span>ClusterNodeget_config_signaturecluster nodesnode_id1:slots|node_id2:slot2|...</span><br><span class=\"line\"><span class=\"number\">9</span>flush_nodes_config<span class=\"literal\">slave</span></span><br><span class=\"line\"><span class=\"number\">10</span>check_clusterslot</span><br><span class=\"line\"><span class=\"number\">11</span>[OK] All <span class=\"number\">16384</span> slots covered.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"check\"><a href=\"#check\" class=\"headerlink\" title=\"check\"></a>check</h3><p></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">ruby redis-trib.rb check 10.180.157.199:6379</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Performing Cluster Check (using node 10.180.157.199:6379)</span></span><br><span class=\"line\">M: b2506515b38e6bbd3034d540599f4cd2a5279ad1 10.180.157.199:6379</span><br><span class=\"line\">   slots:0-5460 (5461 slots) master</span><br><span class=\"line\">   1 additional replica(s)</span><br><span class=\"line\">S: d376aaf80de0e01dde1f8cd4647d5ac3317a8641 10.180.157.205:6379</span><br><span class=\"line\">   slots: (0 slots) slave</span><br><span class=\"line\">   replicates e36c46dbe90960f30861af00786d4c2064e63df2</span><br><span class=\"line\">M: 15126fb33796c2c26ea89e553418946f7443d5a5 10.180.157.201:6379</span><br><span class=\"line\">   slots:10923-16383 (5461 slots) master</span><br><span class=\"line\">   1 additional replica(s)</span><br><span class=\"line\">S: 59fa6ee455f58a5076f6d6f83ddd74161fd7fb55 10.180.157.208:6379</span><br><span class=\"line\">   slots: (0 slots) slave</span><br><span class=\"line\">   replicates 15126fb33796c2c26ea89e553418946f7443d5a5</span><br><span class=\"line\">S: 460b3a11e296aafb2615043291b7dd98274bb351 10.180.157.202:6379</span><br><span class=\"line\">   slots: (0 slots) slave</span><br><span class=\"line\">   replicates b2506515b38e6bbd3034d540599f4cd2a5279ad1</span><br><span class=\"line\">M: e36c46dbe90960f30861af00786d4c2064e63df2 10.180.157.200:6379</span><br><span class=\"line\">   slots:5461-10922 (5462 slots) master</span><br><span class=\"line\">   1 additional replica(s)</span><br><span class=\"line\">[OK] All nodes agree about slots configuration.</span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Check <span class=\"keyword\">for</span> open slots...</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">&gt;&gt; Check slots coverage...</span></span><br><span class=\"line\">[OK] All 16384 slots covered.</span><br></pre></td></tr></table></figure>\n\n<p>load_cluster_info_from_nodeloadloadcluster nodesnodes</p>\n<p>loadcheck_cluster</p>\n<h3 id=\"info\"><a href=\"#info\" class=\"headerlink\" title=\"info\"></a>info</h3><p>infoinfoload_cluster_info_from_nodeClusterNodeinfo_string</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">ruby redis-trib.rb info 10.180.157.199:6379</span></span><br><span class=\"line\">10.180.157.199:6379 (b2506515...) -&gt; 0 keys | 5461 slots | 1 slaves.</span><br><span class=\"line\">10.180.157.201:6379 (15126fb3...) -&gt; 0 keys | 5461 slots | 1 slaves.</span><br><span class=\"line\">10.180.157.200:6379 (e36c46db...) -&gt; 0 keys | 5462 slots | 1 slaves.</span><br><span class=\"line\">[OK] 0 keys in 3 masters.</span><br><span class=\"line\">0.00 keys per slot on average.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"fix\"><a href=\"#fix\" class=\"headerlink\" title=\"fix\"></a>fix</h3><p>fixcheckcheck_clusterfix<br>truefixslotslot</p>\n<p>fix_open_slotslot</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>slotownerownerslot</span><br><span class=\"line\"><span class=\"number\">2</span>slotmigratingslotimportingownercluster countkeysinslotimporting</span><br><span class=\"line\"><span class=\"number\">3</span>migratingimporting<span class=\"number\">1</span>redis-trib.rbmove_slotdotsfix<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"number\">4</span>migratingimporting<span class=\"number\">0</span>importingmove_slotslotownerdotsfixcold<span class=\"literal\">true</span>importingcluster stable</span><br><span class=\"line\"><span class=\"number\">5</span>importingmigratingslotslotstable</span><br><span class=\"line\"><span class=\"number\">6</span>migratingimportingredis-trib.rbredis-trib.rb</span><br><span class=\"line\">fix_slots_coverageslotslot</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">1</span>slotredis-trib.rbslotfixslotslot</span><br><span class=\"line\"><span class=\"number\">2</span>slotslotslot</span><br><span class=\"line\"><span class=\"number\">3</span>slotTODOrediscluster migratingmigratingslot</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"reshardslot\"><a href=\"#reshardslot\" class=\"headerlink\" title=\"reshardslot\"></a>reshardslot</h3><p>reshardslotslotreshard</p>\n<p>reshard</p>\n<figure class=\"highlight elm\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">reshard</span>         host:<span class=\"keyword\">port</span></span><br><span class=\"line\">                <span class=\"comment\">--from </span></span><br><span class=\"line\">                <span class=\"comment\">--to </span></span><br><span class=\"line\">                <span class=\"comment\">--slots </span></span><br><span class=\"line\">                <span class=\"comment\">--yes</span></span><br><span class=\"line\">                <span class=\"comment\">--timeout </span></span><br><span class=\"line\">                <span class=\"comment\">--pipeline </span></span><br><span class=\"line\">host:<span class=\"keyword\">port</span></span><br><span class=\"line\"><span class=\"comment\">--from slotnode id--from all</span></span><br><span class=\"line\"><span class=\"comment\">--to slotnode id</span></span><br><span class=\"line\"><span class=\"comment\">--slots slot</span></span><br><span class=\"line\"><span class=\"comment\">--yesreshardyesreshard</span></span><br><span class=\"line\"><span class=\"comment\">--timeout migrate</span></span><br><span class=\"line\"><span class=\"comment\">--pipeline cluster getkeysinslotkey10</span></span><br></pre></td></tr></table></figure>\n\n<p></p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>load_cluster_info_from_node</span><br><span class=\"line\"><span class=\"number\">2</span>check_cluster</span><br><span class=\"line\"><span class=\"number\">3</span>slot--slots</span><br><span class=\"line\"><span class=\"number\">4</span>--tomaster</span><br><span class=\"line\"><span class=\"number\">5</span>--<span class=\"keyword\">from</span>master--<span class=\"keyword\">from</span> allmasterslot--<span class=\"keyword\">from</span> all</span><br><span class=\"line\"><span class=\"number\">6</span>compute_reshard_tableslotslotslotslot * (slot / slot)</span><br><span class=\"line\"></span><br><span class=\"line\">n = (numslots/source_tot_slots*s.slots.length)</span><br><span class=\"line\"><span class=\"keyword\">if</span> i == <span class=\"number\">0</span></span><br><span class=\"line\">    n = n.ceil</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    n = n.floor</span><br><span class=\"line\">slotslotBUGgithubhttps:<span class=\"comment\">//github.com/antirez/redis/issues/2990</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">7</span>reshard--yes</span><br><span class=\"line\"><span class=\"number\">8</span>reshardslotmove_slotmove_slotdots<span class=\"literal\">true</span>pipeline</span><br><span class=\"line\"><span class=\"number\">9</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ruby redis-trib.rb reshard --<span class=\"keyword\">from</span> all --to <span class=\"number\">80</span>b661ecca260c89e3d8ea9b98f77edaeef43dcd --slots <span class=\"number\">11</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">&gt;&gt;&gt; Performing Cluster Check (using node <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span>)</span><br><span class=\"line\">S: b2506515b38e6bbd3034d540599f4cd2a5279ad1 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots: (<span class=\"number\">0</span> slots) slave</span><br><span class=\"line\">   replicates <span class=\"number\">460</span>b3a11e296aafb2615043291b7dd98274bb351</span><br><span class=\"line\">S: d376aaf80de0e01dde1f8cd4647d5ac3317a8641 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.205</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots: (<span class=\"number\">0</span> slots) slave</span><br><span class=\"line\">   replicates e36c46dbe90960f30861af00786d4c2064e63df2</span><br><span class=\"line\">M: <span class=\"number\">15126f</span>b33796c2c26ea89e553418946f7443d5a5 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">10923</span><span class=\"number\">-16383</span> (<span class=\"number\">5461</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">1</span> additional replica(s)</span><br><span class=\"line\">S: <span class=\"number\">59f</span>a6ee455f58a5076f6d6f83ddd74161fd7fb55 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.208</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots: (<span class=\"number\">0</span> slots) slave</span><br><span class=\"line\">   replicates <span class=\"number\">15126f</span>b33796c2c26ea89e553418946f7443d5a5</span><br><span class=\"line\">M: <span class=\"number\">460</span>b3a11e296aafb2615043291b7dd98274bb351 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">0</span><span class=\"number\">-5460</span> (<span class=\"number\">5461</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">1</span> additional replica(s)</span><br><span class=\"line\">M: <span class=\"number\">80</span>b661ecca260c89e3d8ea9b98f77edaeef43dcd <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span></span><br><span class=\"line\">   slots: (<span class=\"number\">0</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">0</span> additional replica(s)</span><br><span class=\"line\">M: e36c46dbe90960f30861af00786d4c2064e63df2 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">5461</span><span class=\"number\">-10922</span> (<span class=\"number\">5462</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">1</span> additional replica(s)</span><br><span class=\"line\">[OK] All nodes agree about slots configuration.</span><br><span class=\"line\">&gt;&gt;&gt; Check <span class=\"keyword\">for</span> open slots...</span><br><span class=\"line\">&gt;&gt;&gt; Check slots coverage...</span><br><span class=\"line\">[OK] All <span class=\"number\">16384</span> slots covered.</span><br><span class=\"line\"></span><br><span class=\"line\">Ready to move <span class=\"number\">11</span> slots.</span><br><span class=\"line\">  Source nodes:</span><br><span class=\"line\">    M: <span class=\"number\">15126f</span>b33796c2c26ea89e553418946f7443d5a5 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">10923</span><span class=\"number\">-16383</span> (<span class=\"number\">5461</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">1</span> additional replica(s)</span><br><span class=\"line\">    M: <span class=\"number\">460</span>b3a11e296aafb2615043291b7dd98274bb351 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">0</span><span class=\"number\">-5460</span> (<span class=\"number\">5461</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">1</span> additional replica(s)</span><br><span class=\"line\">    M: e36c46dbe90960f30861af00786d4c2064e63df2 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">5461</span><span class=\"number\">-10922</span> (<span class=\"number\">5462</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">1</span> additional replica(s)</span><br><span class=\"line\">  Destination node:</span><br><span class=\"line\">    M: <span class=\"number\">80</span>b661ecca260c89e3d8ea9b98f77edaeef43dcd <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span></span><br><span class=\"line\">   slots: (<span class=\"number\">0</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">0</span> additional replica(s)</span><br><span class=\"line\">  Resharding plan:</span><br><span class=\"line\">    Moving slot <span class=\"number\">5461</span> <span class=\"keyword\">from</span> e36c46dbe90960f30861af00786d4c2064e63df2</span><br><span class=\"line\">    Moving slot <span class=\"number\">5462</span> <span class=\"keyword\">from</span> e36c46dbe90960f30861af00786d4c2064e63df2</span><br><span class=\"line\">    Moving slot <span class=\"number\">5463</span> <span class=\"keyword\">from</span> e36c46dbe90960f30861af00786d4c2064e63df2</span><br><span class=\"line\">    Moving slot <span class=\"number\">5464</span> <span class=\"keyword\">from</span> e36c46dbe90960f30861af00786d4c2064e63df2</span><br><span class=\"line\">    Moving slot <span class=\"number\">0</span> <span class=\"keyword\">from</span> <span class=\"number\">460</span>b3a11e296aafb2615043291b7dd98274bb351</span><br><span class=\"line\">    Moving slot <span class=\"number\">1</span> <span class=\"keyword\">from</span> <span class=\"number\">460</span>b3a11e296aafb2615043291b7dd98274bb351</span><br><span class=\"line\">    Moving slot <span class=\"number\">2</span> <span class=\"keyword\">from</span> <span class=\"number\">460</span>b3a11e296aafb2615043291b7dd98274bb351</span><br><span class=\"line\">    Moving slot <span class=\"number\">10923</span> <span class=\"keyword\">from</span> <span class=\"number\">15126f</span>b33796c2c26ea89e553418946f7443d5a5</span><br><span class=\"line\">    Moving slot <span class=\"number\">10924</span> <span class=\"keyword\">from</span> <span class=\"number\">15126f</span>b33796c2c26ea89e553418946f7443d5a5</span><br><span class=\"line\">    Moving slot <span class=\"number\">10925</span> <span class=\"keyword\">from</span> <span class=\"number\">15126f</span>b33796c2c26ea89e553418946f7443d5a5</span><br><span class=\"line\">Do you want to proceed with the proposed reshard plan (yes/no)? yes</span><br><span class=\"line\">Moving slot <span class=\"number\">5461</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">5462</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">5463</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">5464</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">0</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">1</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">2</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">10923</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">10924</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br><span class=\"line\">Moving slot <span class=\"number\">10925</span> <span class=\"keyword\">from</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span> to <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6380</span>:</span><br></pre></td></tr></table></figure>\n\n<p>move_slotslotfixreshardrebalanceslot</p>\n<p>move_slot</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>pipelineslot<span class=\"type\">key</span></span><br><span class=\"line\"><span class=\"number\">2</span>quietquiet</span><br><span class=\"line\"><span class=\"number\">3</span>coldcoldimportingmigrating</span><br><span class=\"line\"><span class=\"number\">4</span>dotsdots<span class=\"type\">key</span></span><br><span class=\"line\"><span class=\"number\">5</span>updateupdate</span><br></pre></td></tr></table></figure>\n\n<p>move_slot</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>coldcluster importingmigratingfiximportingmigratingcold</span><br><span class=\"line\"><span class=\"number\">2</span>cluster getkeysinslotslotpipeline<span class=\"type\">key</span>.</span><br><span class=\"line\"><span class=\"number\">3</span><span class=\"type\">key</span>migrate</span><br><span class=\"line\"><span class=\"number\">4</span>migratefixBUSYKEYmigratereplaceBUSYKEY<span class=\"type\">key</span>replace<span class=\"type\">key</span>fix</span><br><span class=\"line\"><span class=\"number\">5</span>cluster getkeysinslot<span class=\"type\">key</span><span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"number\">6</span>coldcluster setslotslot</span><br><span class=\"line\"><span class=\"number\">7</span>updateslot</span><br><span class=\"line\"><span class=\"number\">8</span>slot</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"rebalanceslot\"><a href=\"#rebalanceslot\" class=\"headerlink\" title=\"rebalanceslot\"></a>rebalanceslot</h3><p>rebalanceslotrebalancerebalance</p>\n<figure class=\"highlight brainfuck\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">rebalance</span>       <span class=\"comment\">host:port</span></span><br><span class=\"line\"><span class=\"comment\"></span>                <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">weight</span> </span><br><span class=\"line\">                <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">auto</span><span class=\"literal\">-</span><span class=\"comment\">weights</span></span><br><span class=\"line\"><span class=\"comment\"></span>                <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">threshold</span> </span><br><span class=\"line\">                <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">use</span><span class=\"literal\">-</span><span class=\"comment\">empty</span><span class=\"literal\">-</span><span class=\"comment\">masters</span></span><br><span class=\"line\"><span class=\"comment\"></span>                <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">timeout</span> </span><br><span class=\"line\">                <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">simulate</span></span><br><span class=\"line\"><span class=\"comment\"></span>                <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">pipeline</span> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">$ruby</span> <span class=\"comment\">redis</span><span class=\"literal\">-</span><span class=\"comment\">trib</span><span class=\"string\">.</span><span class=\"comment\">rb</span> <span class=\"comment\">rebalance</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">threshold</span> <span class=\"comment\">1</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">weight</span> <span class=\"comment\">b31e3a2e=5</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">weight</span> <span class=\"comment\">60b8e3a1=5</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">use</span><span class=\"literal\">-</span><span class=\"comment\">empty</span><span class=\"literal\">-</span><span class=\"comment\">masters</span>  <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">simulate</span> <span class=\"comment\">10</span><span class=\"string\">.</span><span class=\"comment\">180</span><span class=\"string\">.</span><span class=\"comment\">157</span><span class=\"string\">.</span><span class=\"comment\">199:6379</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">host:port</span></span><br><span class=\"line\"><span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">weight</span> <span class=\"comment\">node_id=weight</span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">weight</span> <span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">weight</span> <span class=\"comment\">b31e3a2e=5</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">weight</span> <span class=\"comment\">60b8e3a1=5node_idweight1</span></span><br><span class=\"line\"><span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">auto</span><span class=\"literal\">-</span><span class=\"comment\">weightsrebalance</span></span><br><span class=\"line\"><span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">threshold</span> <span class=\"comment\">slotthresholdrebalancerebalance</span></span><br><span class=\"line\"><span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">use</span><span class=\"literal\">-</span><span class=\"comment\">empty</span><span class=\"literal\">-</span><span class=\"comment\">mastersrebalancemasterslotmasterrebalance</span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">use</span><span class=\"literal\">-</span><span class=\"comment\">empty</span><span class=\"literal\">-</span><span class=\"comment\">mastersslotrebalance</span></span><br><span class=\"line\"><span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">timeout</span> <span class=\"comment\">migrate</span></span><br><span class=\"line\"><span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">simulaterebalanceslots</span></span><br><span class=\"line\"><span class=\"comment\"></span><span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">pipeline</span> <span class=\"comment\">resharpipelinecluster</span> <span class=\"comment\">getkeysinslotkey10</span></span><br></pre></td></tr></table></figure>\n\n<p>rebalance</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>load_cluster_info_from_node</span><br><span class=\"line\"><span class=\"number\">2</span>master--weight <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">3</span>masterslotslot *  / </span><br><span class=\"line\"><span class=\"number\">4</span>masterslot--threshold (<span class=\"number\">100</span>-(<span class=\"number\">100.0</span>*expected/n.slots.length)).absslotmasterrebalance</span><br><span class=\"line\"><span class=\"number\">5</span>rebalancerebalanceslotsslotbalancebalancesn</span><br><span class=\"line\"><span class=\"number\">6</span>dst_idxsrc_idxsnslot</span><br><span class=\"line\"></span><br><span class=\"line\">snbalanceslotdst_idxslotsrc_idxsnbalance<span class=\"number\">0</span>slotbalance<span class=\"number\">0</span>balance<span class=\"number\">0</span>slotslot<span class=\"number\">16384</span>rebalance</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">7</span>sn[dst_idx]sn[src_idx]balancesn[src_idx]sn[dst_idx]slot</span><br><span class=\"line\"><span class=\"number\">8</span>compute_reshard_tableslotreshardreshard</span><br><span class=\"line\"><span class=\"number\">9</span>simulate</span><br><span class=\"line\"><span class=\"number\">10</span>simulatemove_slotslot:quiet=&gt;<span class=\"literal\">true</span>,:dots=&gt;<span class=\"literal\">false</span>,:update=&gt;<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"number\">11</span>sn[dst_idx]sn[src_idx]balancebalance<span class=\"number\">0</span><span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">12</span>dst_idxsrc_idxrebalance</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"add-node\"><a href=\"#add-node\" class=\"headerlink\" title=\"add-node\"></a>add-node</h3><p>add-nodemastermasterslave</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">add-node    new_host:new_port existing_host:existing_port</span><br><span class=\"line\">          --slave</span><br><span class=\"line\">          --master-id </span><br><span class=\"line\">add-node</span><br><span class=\"line\"></span><br><span class=\"line\">--slaveslave</span><br><span class=\"line\">--master-id--slave--master-idmastermaster</span><br></pre></td></tr></table></figure>\n\n<p>add-node</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ruby redis-trib.rb add-node --slave --master-id dcb792b3e85726f012e83061bf237072dfc45f99 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">&gt;&gt;&gt; Adding node <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span> to cluster <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">&gt;&gt;&gt; Performing Cluster Check (using node <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span>)</span><br><span class=\"line\">M: dcb792b3e85726f012e83061bf237072dfc45f99 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">0</span><span class=\"number\">-5460</span> (<span class=\"number\">5461</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">0</span> additional replica(s)</span><br><span class=\"line\">M: <span class=\"number\">464</span>d740bf48953ebcf826f4113c86f9db3a9baf3 <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">10923</span><span class=\"number\">-16383</span> (<span class=\"number\">5461</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">0</span> additional replica(s)</span><br><span class=\"line\">M: befa7e17b4e5f239e519bc74bfef3264a40f96ae <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">   slots:<span class=\"number\">5461</span><span class=\"number\">-10922</span> (<span class=\"number\">5462</span> slots) master</span><br><span class=\"line\">   <span class=\"number\">0</span> additional replica(s)</span><br><span class=\"line\">[OK] All nodes agree about slots configuration.</span><br><span class=\"line\">&gt;&gt;&gt; Check <span class=\"keyword\">for</span> open slots...</span><br><span class=\"line\">&gt;&gt;&gt; Check slots coverage...</span><br><span class=\"line\">[OK] All <span class=\"number\">16384</span> slots covered.</span><br><span class=\"line\">&gt;&gt;&gt; Send CLUSTER MEET to node <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.202</span>:<span class=\"number\">6379</span> to make it join the cluster.</span><br><span class=\"line\">Waiting <span class=\"keyword\">for</span> the cluster to join.</span><br><span class=\"line\">&gt;&gt;&gt; Configure node as replica of <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379.</span></span><br><span class=\"line\">[OK] New node added correctly.</span><br></pre></td></tr></table></figure>\n\n<p>add-node</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>load_cluster_<span class=\"literal\">inf</span>o_from_nodecheck_cluster</span><br><span class=\"line\"><span class=\"number\">2</span>--<span class=\"literal\">slave</span><span class=\"literal\">master</span>--<span class=\"literal\">master</span>-id<span class=\"literal\">master</span>--<span class=\"literal\">master</span>-idget_master_with_least_replicas<span class=\"literal\">slave</span><span class=\"literal\">master</span><span class=\"literal\">slave</span>load_cluster_<span class=\"literal\">inf</span>o_from_nodeload_cluster_<span class=\"literal\">inf</span>o_from_nodeadd-<span class=\"keyword\">node</span><span class=\"title\">existing_host</span>:existing_portcluster nodes</span><br><span class=\"line\"><span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"number\">4</span><span class=\"literal\">slave</span>ok<span class=\"literal\">slave</span>cluster replicate<span class=\"literal\">master</span></span><br><span class=\"line\"><span class=\"number\">5</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"del-node\"><a href=\"#del-node\" class=\"headerlink\" title=\"del-node\"></a>del-node</h3><p>del-nodedel-nodeslot</p>\n<figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">host:port</span><br><span class=\"line\">node_id<span class=\"built_in\">id</span></span><br></pre></td></tr></table></figure>\n\n<p>del-node</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ruby redis-trib.rb del-<span class=\"keyword\">node</span> <span class=\"title\">10</span>.<span class=\"number\">180.157</span>.<span class=\"number\">199</span>:<span class=\"number\">6379</span> d5f6d1d17426bd564a6e309f32d0f5b96962fe53</span><br><span class=\"line\">&gt;&gt;&gt; Removing <span class=\"keyword\">node</span> <span class=\"title\">d5f6d1d17426bd564a6e309f32d0f5b96962fe53</span> from cluster <span class=\"number\">10.180</span>.<span class=\"number\">157.199</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">&gt;&gt;&gt; Sending CLUSTER FORGET messages to the cluster...</span><br><span class=\"line\">&gt;&gt;&gt; SHUTDOWN the <span class=\"keyword\">node</span>.<span class=\"title\"></span></span><br></pre></td></tr></table></figure>\n\n<p>del-node</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>load_cluster_<span class=\"literal\">inf</span>o_from_node</span><br><span class=\"line\"><span class=\"number\">2</span><span class=\"keyword\">node</span> <span class=\"title\">id</span></span><br><span class=\"line\"><span class=\"number\">3</span>slot</span><br><span class=\"line\"><span class=\"number\">4</span>cluster forget<span class=\"literal\">master</span><span class=\"literal\">slave</span><span class=\"literal\">slave</span><span class=\"literal\">master</span>get_master_with_least_replicasadd-<span class=\"keyword\">node</span><span class=\"title\">--master-id</span><span class=\"literal\">master</span></span><br><span class=\"line\"><span class=\"number\">5</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"set-timeout\"><a href=\"#set-timeout\" class=\"headerlink\" title=\"set-timeout\"></a>set-timeout</h3><p>set-timeout100100cluster-node-timeout15000config setconfig rewrite</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ruby redis-trib.rb <span class=\"keyword\">set</span>-timeout <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span> <span class=\"number\">30000</span></span><br><span class=\"line\">&gt;&gt;&gt; Reconfiguring node timeout <span class=\"keyword\">in</span> every cluster node...</span><br><span class=\"line\">*** New timeout <span class=\"keyword\">set</span> <span class=\"keyword\">for</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">*** New timeout <span class=\"keyword\">set</span> <span class=\"keyword\">for</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.205</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">*** New timeout <span class=\"keyword\">set</span> <span class=\"keyword\">for</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">*** New timeout <span class=\"keyword\">set</span> <span class=\"keyword\">for</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">*** New timeout <span class=\"keyword\">set</span> <span class=\"keyword\">for</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.208</span>:<span class=\"number\">6379</span></span><br><span class=\"line\">&gt;&gt;&gt; New node timeout <span class=\"keyword\">set</span>. <span class=\"number\">5</span> OK, <span class=\"number\">0</span> ERR.</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"call\"><a href=\"#call\" class=\"headerlink\" title=\"call\"></a>call</h3><p>callcall</p>\n<figure class=\"highlight angelscript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ruby redis-trib.rb call <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span> <span class=\"keyword\">get</span> key</span><br><span class=\"line\">&gt;&gt;&gt; Calling GET key</span><br><span class=\"line\"><span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.199</span>:<span class=\"number\">6379</span>: MOVED <span class=\"number\">12539</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br><span class=\"line\"><span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.205</span>:<span class=\"number\">6379</span>: MOVED <span class=\"number\">12539</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br><span class=\"line\"><span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span>:</span><br><span class=\"line\"><span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.200</span>:<span class=\"number\">6379</span>: MOVED <span class=\"number\">12539</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br><span class=\"line\"><span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.208</span>:<span class=\"number\">6379</span>: MOVED <span class=\"number\">12539</span> <span class=\"number\">10.180</span><span class=\"number\">.157</span><span class=\"number\">.201</span>:<span class=\"number\">6379</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"importredis\"><a href=\"#importredis\" class=\"headerlink\" title=\"importredis\"></a>importredis</h3><p>importredis</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1</span>load_cluster_info_from_nodecheck_cluster</span><br><span class=\"line\"><span class=\"number\">2</span>rediscluster_enabled</span><br><span class=\"line\"><span class=\"number\">3</span>scan<span class=\"number\">1000</span></span><br><span class=\"line\"><span class=\"number\">4</span><span class=\"type\">key</span><span class=\"type\">key</span>slot</span><br><span class=\"line\"><span class=\"number\">5</span>migrate,,slot--copycopy--replacereplace</span><br><span class=\"line\"><span class=\"number\">6</span>scan<span class=\"type\">key</span></span><br><span class=\"line\"><span class=\"number\">7</span></span><br><span class=\"line\">--copyimport--copy</span><br></pre></td></tr></table></figure>\n\n<p>importredisslaveredis</p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ck42dyibv0001u9ury6xzlk2i","category_id":"ck42dyic20004u9urn060qw0z","_id":"ck42dyicf000hu9urkd7qbln3"},{"post_id":"ck42dyic00003u9urbjdbc0c7","category_id":"ck42dyica000cu9ur2jlf7mul","_id":"ck42dyicj000ou9urtxz9x0xc"},{"post_id":"ck42dyic40006u9urfrforoeg","category_id":"ck42dyica000cu9ur2jlf7mul","_id":"ck42dyicm000uu9urnva3aylg"},{"post_id":"ck42dyic80009u9ur9e992f7x","category_id":"ck42dyica000cu9ur2jlf7mul","_id":"ck42dyico0010u9ura04scc8s"},{"post_id":"ck42dyic9000bu9urpw04vjel","category_id":"ck42dyica000cu9ur2jlf7mul","_id":"ck42dyicq0016u9ur6kd3lxiq"},{"post_id":"ck42dyice000gu9urjxfc7eto","category_id":"ck42dyicq0017u9urzxp10y94","_id":"ck42dyicu001gu9urgzby82wt"},{"post_id":"ck42dyich000ju9urruujtm2p","category_id":"ck42dyics001cu9urpi9o1eby","_id":"ck42dyicy001nu9ur5ytx6ou1"},{"post_id":"ck42dyici000lu9urqupfwrpm","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyid0001vu9uraq0g4nv6"},{"post_id":"ck42dyick000pu9uri0nvpo0n","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyid20021u9ur0dboqa88"},{"post_id":"ck42dyicz001tu9ur7bv6ouxw","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyid60025u9ur9jwjoiun"},{"post_id":"ck42dyid0001xu9ura4dhdhr0","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyid70029u9urqtz3s0mi"},{"post_id":"ck42dyicl000su9urkvrd0s52","category_id":"ck42dyid0001uu9urvlag5v12","_id":"ck42dyid8002du9ur7cwefnf7"},{"post_id":"ck42dyicm000vu9ur536spgsb","category_id":"ck42dyid20022u9uraijfbn3j","_id":"ck42dyida002iu9urzch15tgh"},{"post_id":"ck42dyid7002cu9urkz2saysu","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyidd002nu9urso0dbhau"},{"post_id":"ck42dyid9002fu9urfuauibzy","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyidf002ru9uro47ukmcu"},{"post_id":"ck42dyico000xu9ury32lrnad","category_id":"ck42dyid7002bu9urpi1q1uss","_id":"ck42dyidg002vu9uruahbsnd8"},{"post_id":"ck42dyidb002ju9uri74fw4sh","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyidh002zu9ur6os7o4v0"},{"post_id":"ck42dyidc002mu9ur0c8xnl9e","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyidi0033u9urgvtbkgxs"},{"post_id":"ck42dyicp0011u9ur16of6nsm","category_id":"ck42dyidc002ku9ur5y2ypmi8","_id":"ck42dyidj0037u9urzdx52m55"},{"post_id":"ck42dyide002qu9ur2bszti68","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyidl003bu9ur7v07x1c0"},{"post_id":"ck42dyidf002uu9ur6jevtphs","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyidm003fu9urtvvarmam"},{"post_id":"ck42dyicc000eu9urg4wl2tc5","category_id":"ck42dyico000zu9ur9oq9njcj","_id":"ck42dyidn003iu9urrnokmrds"},{"post_id":"ck42dyicc000eu9urg4wl2tc5","category_id":"ck42dyidf002su9ur4xlllc96","_id":"ck42dyidp003nu9urfc40704e"},{"post_id":"ck42dyidg002yu9urxu56xz59","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyidq003qu9ur4jmywj1s"},{"post_id":"ck42dyidi0032u9urmkcnrojw","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyids003uu9ur19jzqt70"},{"post_id":"ck42dyicp0014u9urx2uw9z9d","category_id":"ck42dyidi0030u9urnrqcnnmc","_id":"ck42dyidv003yu9urolbtewf9"},{"post_id":"ck42dyidj0036u9ur6fqwfpt3","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyidw0042u9ur5izkyjlu"},{"post_id":"ck42dyidk003au9urkecby50t","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyidx0046u9ur13dswedj"},{"post_id":"ck42dyidm003eu9urqv3w1lov","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyidx004au9urgw9fh13i"},{"post_id":"ck42dyicq0018u9urk6r2fp4k","category_id":"ck42dyidk0039u9ur4zat4odc","_id":"ck42dyidz004eu9ur4wn7wrru"},{"post_id":"ck42dyidn003hu9ur36j4sbko","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyidz004iu9uroxqlohz1"},{"post_id":"ck42dyido003mu9ur15upc9gp","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyie1004mu9urwbhz4ifs"},{"post_id":"ck42dyidp003pu9urmqwa37dg","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyie2004qu9urq67rpt65"},{"post_id":"ck42dyidr003tu9ur1ps5pf9f","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyie4004uu9urvr9irg58"},{"post_id":"ck42dyidu003xu9urmzmktedr","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyie5004yu9ur9mu4n43z"},{"post_id":"ck42dyict001eu9urhj3axxnw","category_id":"ck42dyidv003zu9urpunktu88","_id":"ck42dyie60052u9urrv2dt27b"},{"post_id":"ck42dyie3004tu9ure1sybbb2","category_id":"ck42dyics001cu9urpi9o1eby","_id":"ck42dyie70056u9urtk7jvovm"},{"post_id":"ck42dyie5004xu9ur4n2tr699","category_id":"ck42dyics001cu9urpi9o1eby","_id":"ck42dyiea0059u9urvyigen2f"},{"post_id":"ck42dyicy001qu9urk625v11n","category_id":"ck42dyico000zu9ur9oq9njcj","_id":"ck42dyieb005du9ur2gjojm92"},{"post_id":"ck42dyicy001qu9urk625v11n","category_id":"ck42dyidf002su9ur4xlllc96","_id":"ck42dyied005hu9urcrq8xb3w"},{"post_id":"ck42dyie60051u9uray962bxi","category_id":"ck42dyics001cu9urpi9o1eby","_id":"ck42dyiee005lu9urls0ukf50"},{"post_id":"ck42dyie70055u9urf3937v88","category_id":"ck42dyics001cu9urpi9o1eby","_id":"ck42dyief005pu9ur34ir3jad"},{"post_id":"ck42dyie80058u9urk08qpear","category_id":"ck42dyics001cu9urpi9o1eby","_id":"ck42dyiej005tu9uroozyvz38"},{"post_id":"ck42dyid20020u9urrxn2hq0e","category_id":"ck42dyie70054u9ur023qs6p4","_id":"ck42dyiek005xu9urhqjwvces"},{"post_id":"ck42dyiea005cu9urx0krepoc","category_id":"ck42dyics001cu9urpi9o1eby","_id":"ck42dyiel0061u9urgcxcc9er"},{"post_id":"ck42dyiec005gu9urih6b5qe3","category_id":"ck42dyics001cu9urpi9o1eby","_id":"ck42dyiem0065u9urkhl4k473"},{"post_id":"ck42dyid30024u9urt26wtcft","category_id":"ck42dyieb005eu9urm9h1r9sw","_id":"ck42dyien0068u9urx59pu9a7"},{"post_id":"ck42dyid60027u9urhtb9rqg1","category_id":"ck42dyieb005eu9urm9h1r9sw","_id":"ck42dyieo006du9ur368q1fwz"},{"post_id":"ck42dyicr001bu9urtidh4qd1","category_id":"ck42dyid20022u9uraijfbn3j","_id":"ck42dyieq006gu9urv76w8848"},{"post_id":"ck42dyicr001bu9urtidh4qd1","category_id":"ck42dyiej005uu9urifl1vh09","_id":"ck42dyies006ku9urb3dlkkcl"},{"post_id":"ck42dyiem0064u9urokuo0ek4","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyiet006ou9urdx9x0nyp"},{"post_id":"ck42dyics001du9urdlxrvzk2","category_id":"ck42dyidq003ru9urdqh8wg31","_id":"ck42dyiev006su9ur5fd8ej0v"},{"post_id":"ck42dyics001du9urdlxrvzk2","category_id":"ck42dyiem0062u9ura1veaetp","_id":"ck42dyiey006wu9urqaqf6fep"},{"post_id":"ck42dyien0067u9urtifjjla4","category_id":"ck42dyid0001uu9urvlag5v12","_id":"ck42dyiez0070u9ur6ss9wz9u"},{"post_id":"ck42dyieo006cu9urw3tn9x97","category_id":"ck42dyid0001uu9urvlag5v12","_id":"ck42dyif00074u9urhayru302"},{"post_id":"ck42dyiep006fu9uricgx4r1l","category_id":"ck42dyid0001uu9urvlag5v12","_id":"ck42dyif10078u9urwbbt7d6b"},{"post_id":"ck42dyidv0041u9urxy1z098x","category_id":"ck42dyieo006bu9ur5ieuh1nw","_id":"ck42dyif4007cu9urrzkukkx3"},{"post_id":"ck42dyier006ju9urjnalmtlb","category_id":"ck42dyics001cu9urpi9o1eby","_id":"ck42dyif6007gu9urlc8cq3q2"},{"post_id":"ck42dyidw0045u9urcfwyebxy","category_id":"ck42dyieo006bu9ur5ieuh1nw","_id":"ck42dyifb007ku9urrw8z2647"},{"post_id":"ck42dyieu006ru9urx7kxlwk3","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyifc007mu9urjy5xns99"},{"post_id":"ck42dyiew006vu9urqfy1a7g9","category_id":"ck42dyid7002bu9urpi1q1uss","_id":"ck42dyifd007ru9ura5hu3hn2"},{"post_id":"ck42dyidx0049u9urmn2e8brx","category_id":"ck42dyieo006bu9ur5ieuh1nw","_id":"ck42dyifk007uu9uruxlxiivk"},{"post_id":"ck42dyiez006zu9urh99v9jth","category_id":"ck42dyid7002bu9urpi1q1uss","_id":"ck42dyifo007xu9urjhagtzka"},{"post_id":"ck42dyif00073u9ur6m2dl089","category_id":"ck42dyid7002bu9urpi1q1uss","_id":"ck42dyifs0080u9urny0h6215"},{"post_id":"ck42dyidy004du9uri286utzh","category_id":"ck42dyiez0071u9urtp6vor4p","_id":"ck42dyift0083u9uriyjrdq8h"},{"post_id":"ck42dyif10077u9urq73wewt1","category_id":"ck42dyid7002bu9urpi1q1uss","_id":"ck42dyifu0086u9urcf9y6n6f"},{"post_id":"ck42dyif3007bu9ur7fuzduyu","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyify008au9urxozgfx0g"},{"post_id":"ck42dyicu001hu9uri210uk9c","category_id":"ck42dyidx0047u9urivti2y1b","_id":"ck42dyifz008eu9urd79362vx"},{"post_id":"ck42dyicu001hu9uri210uk9c","category_id":"ck42dyif20079u9ur78i2ztmp","_id":"ck42dyig0008iu9urqqc26zu7"},{"post_id":"ck42dyidz004hu9ur32sytjrf","category_id":"ck42dyidv003zu9urpunktu88","_id":"ck42dyig2008mu9urxnc7rpnt"},{"post_id":"ck42dyidz004hu9ur32sytjrf","category_id":"ck42dyif7007hu9ur3qe50ju3","_id":"ck42dyig3008pu9urze8afqu9"},{"post_id":"ck42dyie1004lu9ura4wmfdg4","category_id":"ck42dyifc007pu9ur7wg10ds8","_id":"ck42dyig5008tu9urjw3qce3p"},{"post_id":"ck42dyifl007wu9ur3hpvgif1","category_id":"ck42dyiez0071u9urtp6vor4p","_id":"ck42dyig6008vu9urwpc0w2ml"},{"post_id":"ck42dyicw001ju9urrx4klupl","category_id":"ck42dyidx0047u9urivti2y1b","_id":"ck42dyig7008zu9urfbmpbf9x"},{"post_id":"ck42dyicw001ju9urrx4klupl","category_id":"ck42dyif20079u9ur78i2ztmp","_id":"ck42dyig80091u9urm040f5kl"},{"post_id":"ck42dyie2004pu9ur600ottdx","category_id":"ck42dyift0084u9urzsnovddf","_id":"ck42dyigb0095u9ur2mp0yvdh"},{"post_id":"ck42dyicx001mu9urdb2amxe5","category_id":"ck42dyidx0047u9urivti2y1b","_id":"ck42dyigc0098u9urvuo67e98"},{"post_id":"ck42dyicx001mu9urdb2amxe5","category_id":"ck42dyif20079u9ur78i2ztmp","_id":"ck42dyigd009du9urv1tbmvuc"},{"post_id":"ck42dyig0008hu9urh3700er2","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyige009gu9urjx23ct61"},{"post_id":"ck42dyig1008lu9urywtlrht9","category_id":"ck42dyidq003ru9urdqh8wg31","_id":"ck42dyigf009lu9ur20kmt7cd"},{"post_id":"ck42dyig1008lu9urywtlrht9","category_id":"ck42dyiem0062u9ura1veaetp","_id":"ck42dyigh009ou9urq0bww34w"},{"post_id":"ck42dyied005ku9ur3216sak8","category_id":"ck42dyig0008ju9uray42j70i","_id":"ck42dyigi009su9ur1n4eln0f"},{"post_id":"ck42dyig2008ou9ur9yg3kdkm","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyigk009wu9ur9ngygwo3"},{"post_id":"ck42dyig5008su9ur1xno1qs7","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyigl009zu9urlludcbbf"},{"post_id":"ck42dyief005ou9uravou0m3p","category_id":"ck42dyig0008ju9uray42j70i","_id":"ck42dyigm00a3u9ur9ts99nkr"},{"post_id":"ck42dyig5008uu9urw2488pjk","category_id":"ck42dyift0084u9urzsnovddf","_id":"ck42dyigo00a7u9uree3gf390"},{"post_id":"ck42dyig7008yu9urtahqsg2f","category_id":"ck42dyift0084u9urzsnovddf","_id":"ck42dyigp00abu9urrq4it4wm"},{"post_id":"ck42dyieg005su9urt708jedd","category_id":"ck42dyig0008ju9uray42j70i","_id":"ck42dyigr00aeu9urrt1mhpbj"},{"post_id":"ck42dyig70090u9urh9tuec8y","category_id":"ck42dyift0084u9urzsnovddf","_id":"ck42dyigs00aiu9urz03abb93"},{"post_id":"ck42dyiga0094u9ur94n3k7ek","category_id":"ck42dyift0084u9urzsnovddf","_id":"ck42dyigu00amu9uraw25c22y"},{"post_id":"ck42dyiej005wu9uruzte9t7p","category_id":"ck42dyid7002bu9urpi1q1uss","_id":"ck42dyigv00aqu9uremnt1owu"},{"post_id":"ck42dyiej005wu9uruzte9t7p","category_id":"ck42dyiga0093u9urwv251ism","_id":"ck42dyigw00atu9urw2t0metu"},{"post_id":"ck42dyigb0097u9ur3m8l5chp","category_id":"ck42dyift0084u9urzsnovddf","_id":"ck42dyigx00ayu9urebyhka21"},{"post_id":"ck42dyigd009cu9uraae46azw","category_id":"ck42dyics001cu9urpi9o1eby","_id":"ck42dyigy00b1u9urxhxu4vtp"},{"post_id":"ck42dyiel0060u9ur1fmq7dra","category_id":"ck42dyig0008ju9uray42j70i","_id":"ck42dyigz00b6u9urdc462xst"},{"post_id":"ck42dyiet006nu9urx1wzlpxr","category_id":"ck42dyigf009ju9urkgmg7f4q","_id":"ck42dyih000b9u9urif21k7ey"},{"post_id":"ck42dyif5007fu9urwx15saig","category_id":"ck42dyigj009uu9ur9wgtgpof","_id":"ck42dyih200beu9ur7w849xtk"},{"post_id":"ck42dyif8007ju9ure5wm1iqx","category_id":"ck42dyigj009uu9ur9wgtgpof","_id":"ck42dyih300bhu9urggrea4gh"},{"post_id":"ck42dyifb007lu9urtzm9q0qa","category_id":"ck42dyigj009uu9ur9wgtgpof","_id":"ck42dyih500blu9ur1dxzu4lb"},{"post_id":"ck42dyigq00adu9urbzrs2eiz","category_id":"ck42dyidx0047u9urivti2y1b","_id":"ck42dyih600bpu9urb6uaj8iv"},{"post_id":"ck42dyigr00ahu9urh53qz04s","category_id":"ck42dyidx0047u9urivti2y1b","_id":"ck42dyih600btu9urvwen2ati"},{"post_id":"ck42dyifc007qu9urjilpk6xk","category_id":"ck42dyigj009uu9ur9wgtgpof","_id":"ck42dyih700bxu9urvxj4vgui"},{"post_id":"ck42dyigt00alu9urjpn5t3ml","category_id":"ck42dyid20022u9uraijfbn3j","_id":"ck42dyih800bzu9urjxjux7jr"},{"post_id":"ck42dyigv00apu9urxqhrg3cs","category_id":"ck42dyidx0047u9urivti2y1b","_id":"ck42dyiha00c3u9urtq4hyisw"},{"post_id":"ck42dyiff007tu9urbngaw0u1","category_id":"ck42dyigj009uu9ur9wgtgpof","_id":"ck42dyiha00c5u9urx1ciaccz"},{"post_id":"ck42dyigw00asu9ur59k1lnri","category_id":"ck42dyid20022u9uraijfbn3j","_id":"ck42dyihb00c9u9uro0191vdc"},{"post_id":"ck42dyigx00axu9ur34j2wuy5","category_id":"ck42dyid20022u9uraijfbn3j","_id":"ck42dyihb00cbu9urfwgrnbav"},{"post_id":"ck42dyifs007zu9urfd6v88ma","category_id":"ck42dyigw00avu9ur2bqhr7x9","_id":"ck42dyihb00cfu9urpito0i49"},{"post_id":"ck42dyigx00b0u9urcrqs040f","category_id":"ck42dyid20022u9uraijfbn3j","_id":"ck42dyihb00chu9urlyjhs0ms"},{"post_id":"ck42dyigz00b5u9ur8g0q60y9","category_id":"ck42dyid20022u9uraijfbn3j","_id":"ck42dyihc00clu9ur1o9v3tyi"},{"post_id":"ck42dyift0082u9urpu4ca5fo","category_id":"ck42dyid0001uu9urvlag5v12","_id":"ck42dyihc00cnu9urh5jmya5d"},{"post_id":"ck42dyift0082u9urpu4ca5fo","category_id":"ck42dyigy00b4u9ure176buoh","_id":"ck42dyihd00cqu9ur6d6itfze"},{"post_id":"ck42dyigz00b8u9ur3peouryf","category_id":"ck42dyid20022u9uraijfbn3j","_id":"ck42dyihd00ctu9ure2dcp42g"},{"post_id":"ck42dyih100bdu9urzuerv6vk","category_id":"ck42dyid20022u9uraijfbn3j","_id":"ck42dyihd00cwu9urnz1idw1r"},{"post_id":"ck42dyih300bgu9url7dxic2n","category_id":"ck42dyid20022u9uraijfbn3j","_id":"ck42dyihe00czu9urr1ohq7n4"},{"post_id":"ck42dyih400bku9urjjtg9xsl","category_id":"ck42dyid20022u9uraijfbn3j","_id":"ck42dyihe00d1u9urs8eyopyp"},{"post_id":"ck42dyih500bou9ur0a68v93p","category_id":"ck42dyid20022u9uraijfbn3j","_id":"ck42dyihf00d4u9urnjfegyau"},{"post_id":"ck42dyifx0089u9ur9xyj2d7r","category_id":"ck42dyih500bmu9ur6pqwm4ex","_id":"ck42dyihf00d7u9urx646eapr"},{"post_id":"ck42dyih600bsu9ur5bnjcns7","category_id":"ck42dyid20022u9uraijfbn3j","_id":"ck42dyihf00d9u9urklby313p"},{"post_id":"ck42dyige009fu9urmf7vta0g","category_id":"ck42dyiez0071u9urtp6vor4p","_id":"ck42dyihg00dbu9urdh7q0h72"},{"post_id":"ck42dyige009fu9urmf7vta0g","category_id":"ck42dyih900c1u9urpqdei5ce","_id":"ck42dyihg00ddu9urg1rj1xrb"},{"post_id":"ck42dyigf009ku9ur4g7nst10","category_id":"ck42dyiez0071u9urtp6vor4p","_id":"ck42dyihg00dfu9uraqmnuztd"},{"post_id":"ck42dyigf009ku9ur4g7nst10","category_id":"ck42dyih900c1u9urpqdei5ce","_id":"ck42dyihh00diu9ur50gwcgah"},{"post_id":"ck42dyigh009ru9ur96x379pm","category_id":"ck42dyihc00cku9urbo0awjda","_id":"ck42dyihh00dlu9urff70mtrj"},{"post_id":"ck42dyigj009vu9uroluojkw0","category_id":"ck42dyihc00cku9urbo0awjda","_id":"ck42dyihh00dnu9ur5ajg2y5n"},{"post_id":"ck42dyigk009yu9urx3kbc4fp","category_id":"ck42dyihc00cku9urbo0awjda","_id":"ck42dyihh00dpu9urv3gg1kl0"},{"post_id":"ck42dyigm00a2u9ur4vivbd1d","category_id":"ck42dyihf00d3u9urvpy0g54n","_id":"ck42dyihh00dsu9ur6s9c18bm"},{"post_id":"ck42dyign00a6u9urk67e5qr1","category_id":"ck42dyidx0047u9urivti2y1b","_id":"ck42dyihi00dvu9uru37c6map"},{"post_id":"ck42dyign00a6u9urk67e5qr1","category_id":"ck42dyihf00d8u9ur0sagxhsq","_id":"ck42dyihj00dxu9urbmicgywc"},{"post_id":"ck42dyigo00aau9urtv6ed9wt","category_id":"ck42dyico000zu9ur9oq9njcj","_id":"ck42dyihj00dzu9urob6egxbb"},{"post_id":"ck42dyigo00aau9urtv6ed9wt","category_id":"ck42dyihg00dcu9urynz8jxy3","_id":"ck42dyihj00e1u9urywot5mvn"},{"post_id":"ck42dyifu0085u9uri8y0a9sg","category_id":"ck42dyih000bcu9urasxfsqo7","_id":"ck42dyihj00e4u9ur6d3lyao6"},{"post_id":"ck42dyifu0085u9uri8y0a9sg","category_id":"ck42dyihh00dhu9urf4h8kvcs","_id":"ck42dyihk00e7u9ur9o31322l"},{"post_id":"ck42dyifz008du9urfbilrfkz","category_id":"ck42dyih000bcu9urasxfsqo7","_id":"ck42dyihk00e9u9ur4ihmky4k"},{"post_id":"ck42dyifz008du9urfbilrfkz","category_id":"ck42dyihh00dhu9urf4h8kvcs","_id":"ck42dyihk00ebu9ur3tqay25k"},{"post_id":"ck42dyigg009nu9urz1nleh1q","category_id":"ck42dyihb00ceu9urc46zok81","_id":"ck42dyihk00edu9urornfup71"},{"post_id":"ck42dyigg009nu9urz1nleh1q","category_id":"ck42dyihj00dyu9urz7m104fc","_id":"ck42dyihl00egu9urz7d4bodk"},{"post_id":"ck42dyih700bwu9urgfcgiqk6","category_id":"ck42dyihh00dou9ur31w11awk","_id":"ck42dyihl00eiu9urkjzd1bcx"},{"post_id":"ck42dyih700bwu9urgfcgiqk6","category_id":"ck42dyihj00e3u9urm7dk3xb7","_id":"ck42dyihl00elu9urhmelqu3u"},{"post_id":"ck42dyijh00jqu9urj60iu6i2","category_id":"ck42dyica000cu9ur2jlf7mul","_id":"ck42dyijp00jwu9urqsf2rruz"},{"post_id":"ck42dyijm00jru9urw3mpqfku","category_id":"ck42dyidc002ku9ur5y2ypmi8","_id":"ck42dyijr00k0u9urx1h7wsw2"},{"post_id":"ck42dyijn00jtu9ur9ciwf7nc","category_id":"ck42dyie70054u9ur023qs6p4","_id":"ck42dyijs00k3u9ur0p0mk5q9"},{"post_id":"ck42dyijo00jvu9urn6oa27sg","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyiju00k7u9uriypg9fki"},{"post_id":"ck42dyijp00jzu9uruvjqylwh","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyijv00kau9urmtxf8few"},{"post_id":"ck42dyijr00k2u9ur95q8zsgu","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyijx00kdu9uropal0rho"},{"post_id":"ck42dyijv00k9u9urg9hjf2jh","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyijx00khu9ur35nhxz3p"},{"post_id":"ck42dyijt00k5u9ur6hi5ibfd","category_id":"ck42dyicv001iu9ur046nlayu","_id":"ck42dyik300kou9ur6pulfczq"},{"post_id":"ck42dyijt00k5u9ur6hi5ibfd","category_id":"ck42dyijx00kcu9urlkd37pye","_id":"ck42dyik300kqu9urcegyzm8w"},{"post_id":"ck42dyijt00k5u9ur6hi5ibfd","category_id":"ck42dyijy00kju9ur0juzld8b","_id":"ck42dyik300ksu9ura0o91mgg"},{"post_id":"ck42dyikn00ktu9ur29eb64p9","category_id":"ck42dyigj009uu9ur9wgtgpof","_id":"ck42dyikp00kvu9uritp2inzx"}],"PostTag":[{"post_id":"ck42dyic00003u9urbjdbc0c7","tag_id":"ck42dyic50007u9urfauqb8wh","_id":"ck42dyicj000mu9urbsvp9njj"},{"post_id":"ck42dyic00003u9urbjdbc0c7","tag_id":"ck42dyicd000fu9urevocmi8l","_id":"ck42dyick000qu9urgphtc7et"},{"post_id":"ck42dyic80009u9ur9e992f7x","tag_id":"ck42dyic50007u9urfauqb8wh","_id":"ck42dyico000yu9uruoyh2v2q"},{"post_id":"ck42dyic80009u9ur9e992f7x","tag_id":"ck42dyicd000fu9urevocmi8l","_id":"ck42dyicp0012u9uro26h0os3"},{"post_id":"ck42dyic9000bu9urpw04vjel","tag_id":"ck42dyic50007u9urfauqb8wh","_id":"ck42dyicq0015u9urbsfvpc2a"},{"post_id":"ck42dyic9000bu9urpw04vjel","tag_id":"ck42dyicn000wu9uryzvhtwe6","_id":"ck42dyicr0019u9ur8km0h9z5"},{"post_id":"ck42dyicu001hu9uri210uk9c","tag_id":"ck42dyicr001au9urxarsymev","_id":"ck42dyicx001lu9urg2o7hqex"},{"post_id":"ck42dyicu001hu9uri210uk9c","tag_id":"ck42dyicp0013u9urds9e1l6x","_id":"ck42dyicy001pu9urol14f0n7"},{"post_id":"ck42dyicc000eu9urg4wl2tc5","tag_id":"ck42dyicp0013u9urds9e1l6x","_id":"ck42dyicz001su9uriiqwcqex"},{"post_id":"ck42dyicc000eu9urg4wl2tc5","tag_id":"ck42dyicr001au9urxarsymev","_id":"ck42dyid0001wu9uruqd19nij"},{"post_id":"ck42dyicc000eu9urg4wl2tc5","tag_id":"ck42dyicu001fu9urzjgc99lu","_id":"ck42dyid1001yu9ur8gg2htmf"},{"post_id":"ck42dyicw001ju9urrx4klupl","tag_id":"ck42dyicr001au9urxarsymev","_id":"ck42dyid20023u9urn6i7r52r"},{"post_id":"ck42dyicw001ju9urrx4klupl","tag_id":"ck42dyicp0013u9urds9e1l6x","_id":"ck42dyid60026u9urwywhsahf"},{"post_id":"ck42dyicw001ju9urrx4klupl","tag_id":"ck42dyicd000fu9urevocmi8l","_id":"ck42dyid7002au9ury41efvtq"},{"post_id":"ck42dyicx001mu9urdb2amxe5","tag_id":"ck42dyicr001au9urxarsymev","_id":"ck42dyid8002eu9ur1z2vpdjx"},{"post_id":"ck42dyicx001mu9urdb2amxe5","tag_id":"ck42dyicp0013u9urds9e1l6x","_id":"ck42dyida002hu9urnktd4ouz"},{"post_id":"ck42dyicx001mu9urdb2amxe5","tag_id":"ck42dyicd000fu9urevocmi8l","_id":"ck42dyidc002lu9ur6fgko0rw"},{"post_id":"ck42dyicy001qu9urk625v11n","tag_id":"ck42dyicr001au9urxarsymev","_id":"ck42dyide002pu9ursggkar98"},{"post_id":"ck42dyicy001qu9urk625v11n","tag_id":"ck42dyicp0013u9urds9e1l6x","_id":"ck42dyidf002tu9ururbf02wo"},{"post_id":"ck42dyice000gu9urjxfc7eto","tag_id":"ck42dyicx001ku9urf9ymp07j","_id":"ck42dyidg002wu9ure9edu1sh"},{"post_id":"ck42dyice000gu9urjxfc7eto","tag_id":"ck42dyicz001ru9urfrsxzj24","_id":"ck42dyidi0031u9urlr6vpref"},{"post_id":"ck42dyice000gu9urjxfc7eto","tag_id":"ck42dyid1001zu9urr6baeotp","_id":"ck42dyidj0034u9urxbgwxi5a"},{"post_id":"ck42dyich000ju9urruujtm2p","tag_id":"ck42dyid60028u9urn6t6277i","_id":"ck42dyidk0038u9urqp7j2q7u"},{"post_id":"ck42dyich000ju9urruujtm2p","tag_id":"ck42dyida002gu9urmv29ia3y","_id":"ck42dyidl003cu9urnr983ihz"},{"post_id":"ck42dyidf002uu9ur6jevtphs","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyidm003gu9urus9pgjdc"},{"post_id":"ck42dyidf002uu9ur6jevtphs","tag_id":"ck42dyicn000wu9uryzvhtwe6","_id":"ck42dyido003ku9ur8wuo7fz6"},{"post_id":"ck42dyidg002yu9urxu56xz59","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyidp003ou9urv7wan7mi"},{"post_id":"ck42dyidg002yu9urxu56xz59","tag_id":"ck42dyicn000wu9uryzvhtwe6","_id":"ck42dyidr003su9uryvvxjdx9"},{"post_id":"ck42dyici000lu9urqupfwrpm","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyidt003wu9ur2h2pfu5l"},{"post_id":"ck42dyici000lu9urqupfwrpm","tag_id":"ck42dyicu001fu9urzjgc99lu","_id":"ck42dyidv0040u9ur6j7lujvh"},{"post_id":"ck42dyidi0032u9urmkcnrojw","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyidw0044u9urosr47ahy"},{"post_id":"ck42dyidj0036u9ur6fqwfpt3","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyidx0048u9ur33tl3t5s"},{"post_id":"ck42dyidj0036u9ur6fqwfpt3","tag_id":"ck42dyicu001fu9urzjgc99lu","_id":"ck42dyidy004cu9urqfnzfpjq"},{"post_id":"ck42dyidm003eu9urqv3w1lov","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyidz004fu9urxlac4hp9"},{"post_id":"ck42dyidn003hu9ur36j4sbko","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyie0004ku9ur48oe1v5x"},{"post_id":"ck42dyido003mu9ur15upc9gp","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyie2004nu9urmraar5or"},{"post_id":"ck42dyidp003pu9urmqwa37dg","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyie3004ru9urd7bc8m5h"},{"post_id":"ck42dyick000pu9uri0nvpo0n","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyie4004vu9ur24v2l0n7"},{"post_id":"ck42dyick000pu9uri0nvpo0n","tag_id":"ck42dyicn000wu9uryzvhtwe6","_id":"ck42dyie6004zu9uri8nwj5os"},{"post_id":"ck42dyick000pu9uri0nvpo0n","tag_id":"ck42dyido003lu9urkk5gptt0","_id":"ck42dyie70053u9urtjeskhla"},{"post_id":"ck42dyicl000su9urkvrd0s52","tag_id":"ck42dyids003vu9urloa9wgdb","_id":"ck42dyie80057u9urjkgekb3i"},{"post_id":"ck42dyicl000su9urkvrd0s52","tag_id":"ck42dyicu001fu9urzjgc99lu","_id":"ck42dyiea005bu9urnurrpppf"},{"post_id":"ck42dyicl000su9urkvrd0s52","tag_id":"ck42dyidy004bu9ur8jfwlcuc","_id":"ck42dyiec005fu9urmtj8b10k"},{"post_id":"ck42dyicm000vu9ur536spgsb","tag_id":"ck42dyie0004ju9urogqeiukc","_id":"ck42dyied005ju9urdbodtqsh"},{"post_id":"ck42dyicm000vu9ur536spgsb","tag_id":"ck42dyicr001au9urxarsymev","_id":"ck42dyief005nu9urf6nxqaue"},{"post_id":"ck42dyie60051u9uray962bxi","tag_id":"ck42dyid60028u9urn6t6277i","_id":"ck42dyieg005ru9urxh5hk5v2"},{"post_id":"ck42dyie70055u9urf3937v88","tag_id":"ck42dyid60028u9urn6t6277i","_id":"ck42dyiej005vu9ursyt8490p"},{"post_id":"ck42dyico000xu9ury32lrnad","tag_id":"ck42dyie60050u9urynxy8f9o","_id":"ck42dyiek005yu9ursclxh12r"},{"post_id":"ck42dyico000xu9ury32lrnad","tag_id":"ck42dyiea005au9urlxgbu7n6","_id":"ck42dyiem0063u9ur6zk9jnkq"},{"post_id":"ck42dyico000xu9ury32lrnad","tag_id":"ck42dyicd000fu9urevocmi8l","_id":"ck42dyien0066u9uridpxskmb"},{"post_id":"ck42dyicp0011u9ur16of6nsm","tag_id":"ck42dyied005iu9ur1fa493x6","_id":"ck42dyieo006au9urqz1185do"},{"post_id":"ck42dyicp0011u9ur16of6nsm","tag_id":"ck42dyieg005qu9ur1ylt217i","_id":"ck42dyieo006eu9urz5a8vuxq"},{"post_id":"ck42dyien0067u9urtifjjla4","tag_id":"ck42dyids003vu9urloa9wgdb","_id":"ck42dyier006iu9urdykg6eru"},{"post_id":"ck42dyien0067u9urtifjjla4","tag_id":"ck42dyicu001fu9urzjgc99lu","_id":"ck42dyiet006mu9urgx486apx"},{"post_id":"ck42dyieo006cu9urw3tn9x97","tag_id":"ck42dyids003vu9urloa9wgdb","_id":"ck42dyieu006qu9urya19khyx"},{"post_id":"ck42dyicq0018u9urk6r2fp4k","tag_id":"ck42dyiel005zu9ur9gwf36l1","_id":"ck42dyiew006uu9urpt70qmv7"},{"post_id":"ck42dyicq0018u9urk6r2fp4k","tag_id":"ck42dyien0069u9urwif2fx5v","_id":"ck42dyiey006yu9ur8iur87uo"},{"post_id":"ck42dyicr001bu9urtidh4qd1","tag_id":"ck42dyie0004ju9urogqeiukc","_id":"ck42dyiez0072u9urcw0gc9ej"},{"post_id":"ck42dyiez006zu9urh99v9jth","tag_id":"ck42dyie60050u9urynxy8f9o","_id":"ck42dyif00075u9uray95j0tt"},{"post_id":"ck42dyict001eu9urhj3axxnw","tag_id":"ck42dyieu006pu9urz6azwdif","_id":"ck42dyif3007au9uriipnuwc0"},{"post_id":"ck42dyict001eu9urhj3axxnw","tag_id":"ck42dyiey006xu9ur4qy6ptn3","_id":"ck42dyif5007du9urvj27sr99"},{"post_id":"ck42dyif10077u9urq73wewt1","tag_id":"ck42dyie60050u9urynxy8f9o","_id":"ck42dyif8007iu9urkyrv1czt"},{"post_id":"ck42dyicz001tu9ur7bv6ouxw","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyifc007ou9urkjgs0tt0"},{"post_id":"ck42dyicz001tu9ur7bv6ouxw","tag_id":"ck42dyif5007eu9urdxhk7sbk","_id":"ck42dyife007su9urudxacuja"},{"post_id":"ck42dyift0082u9urpu4ca5fo","tag_id":"ck42dyids003vu9urloa9wgdb","_id":"ck42dyifx0088u9ur890skqfc"},{"post_id":"ck42dyift0082u9urpu4ca5fo","tag_id":"ck42dyicu001fu9urzjgc99lu","_id":"ck42dyify008cu9urkljz1wyh"},{"post_id":"ck42dyid0001xu9ura4dhdhr0","tag_id":"ck42dyifc007nu9urvmjubted","_id":"ck42dyig0008fu9urfcqnze5n"},{"post_id":"ck42dyid0001xu9ura4dhdhr0","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyig1008ku9ur6sfop6tl"},{"post_id":"ck42dyid0001xu9ura4dhdhr0","tag_id":"ck42dyift0081u9urf1lnlzuy","_id":"ck42dyig2008nu9urlimtzqo6"},{"post_id":"ck42dyid20020u9urrxn2hq0e","tag_id":"ck42dyifx0087u9urraismvti","_id":"ck42dyigb0096u9urh2bfy85f"},{"post_id":"ck42dyid20020u9urrxn2hq0e","tag_id":"ck42dyig0008gu9ur0ph1q6i1","_id":"ck42dyigc0099u9ur3dp73ldt"},{"post_id":"ck42dyid20020u9urrxn2hq0e","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyigd009eu9urwk7wuw2b"},{"post_id":"ck42dyid20020u9urrxn2hq0e","tag_id":"ck42dyig6008wu9ur8d3gvotr","_id":"ck42dyige009hu9ur2e1gt0qi"},{"post_id":"ck42dyigd009cu9uraae46azw","tag_id":"ck42dyid60028u9urn6t6277i","_id":"ck42dyigg009mu9urha25egsl"},{"post_id":"ck42dyid30024u9urt26wtcft","tag_id":"ck42dyig90092u9ur0sfoh5s2","_id":"ck42dyigh009pu9urhrrjpitc"},{"post_id":"ck42dyid30024u9urt26wtcft","tag_id":"ck42dyigc009au9ur8y08en6t","_id":"ck42dyigi009tu9urgu1df7ty"},{"post_id":"ck42dyid60027u9urhtb9rqg1","tag_id":"ck42dyig90092u9ur0sfoh5s2","_id":"ck42dyigm00a1u9urjy8wyvwl"},{"post_id":"ck42dyid60027u9urhtb9rqg1","tag_id":"ck42dyigc009au9ur8y08en6t","_id":"ck42dyign00a4u9ur0646fbi5"},{"post_id":"ck42dyid7002cu9urkz2saysu","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyigo00a9u9urdfnp2bnr"},{"post_id":"ck42dyid9002fu9urfuauibzy","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyigr00agu9urk8xj9o7u"},{"post_id":"ck42dyid9002fu9urfuauibzy","tag_id":"ck42dyicn000wu9uryzvhtwe6","_id":"ck42dyigs00aju9uri7uk5uuf"},{"post_id":"ck42dyigq00adu9urbzrs2eiz","tag_id":"ck42dyicr001au9urxarsymev","_id":"ck42dyigv00aou9urjhg6za88"},{"post_id":"ck42dyigq00adu9urbzrs2eiz","tag_id":"ck42dyicu001fu9urzjgc99lu","_id":"ck42dyigw00aru9urtk1v2f47"},{"post_id":"ck42dyigr00ahu9urh53qz04s","tag_id":"ck42dyicr001au9urxarsymev","_id":"ck42dyigx00awu9urc5x3jbqd"},{"post_id":"ck42dyigr00ahu9urh53qz04s","tag_id":"ck42dyicu001fu9urzjgc99lu","_id":"ck42dyigx00azu9urihrpx1uf"},{"post_id":"ck42dyigv00apu9urxqhrg3cs","tag_id":"ck42dyicr001au9urxarsymev","_id":"ck42dyigy00b3u9ur6j634bx3"},{"post_id":"ck42dyigv00apu9urxqhrg3cs","tag_id":"ck42dyicu001fu9urzjgc99lu","_id":"ck42dyigz00b7u9urvp4w7uh8"},{"post_id":"ck42dyidb002ju9uri74fw4sh","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyih000bbu9ur77cw7mzh"},{"post_id":"ck42dyidb002ju9uri74fw4sh","tag_id":"ck42dyigs00aku9ur7q4urovg","_id":"ck42dyih200bfu9uruh80ogdt"},{"post_id":"ck42dyigw00asu9ur59k1lnri","tag_id":"ck42dyie0004ju9urogqeiukc","_id":"ck42dyih400bju9urf62hq3h9"},{"post_id":"ck42dyidc002mu9ur0c8xnl9e","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyih500bnu9urprkt2qdb"},{"post_id":"ck42dyidc002mu9ur0c8xnl9e","tag_id":"ck42dyicn000wu9uryzvhtwe6","_id":"ck42dyih600bqu9ureeajt4sc"},{"post_id":"ck42dyide002qu9ur2bszti68","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyih700bvu9urflyl5ilk"},{"post_id":"ck42dyide002qu9ur2bszti68","tag_id":"ck42dyigy00b2u9ur7zgmz1jt","_id":"ck42dyih800byu9url1c6wvuy"},{"post_id":"ck42dyih100bdu9urzuerv6vk","tag_id":"ck42dyie0004ju9urogqeiukc","_id":"ck42dyiha00c2u9urg0js6rzv"},{"post_id":"ck42dyidk003au9urkecby50t","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyiha00c4u9urwlr6ardq"},{"post_id":"ck42dyidk003au9urkecby50t","tag_id":"ck42dyih000bau9urigjs2y58","_id":"ck42dyiha00c7u9uri9mlf1r7"},{"post_id":"ck42dyidr003tu9ur1ps5pf9f","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyihb00cau9urjgkd028t"},{"post_id":"ck42dyidr003tu9ur1ps5pf9f","tag_id":"ck42dyih400biu9urnb86wp1x","_id":"ck42dyihb00cdu9urlpyml5l4"},{"post_id":"ck42dyih600bsu9ur5bnjcns7","tag_id":"ck42dyie0004ju9urogqeiukc","_id":"ck42dyihb00cgu9ur9n050wxy"},{"post_id":"ck42dyidu003xu9urmzmktedr","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyihc00cju9uroquhn24q"},{"post_id":"ck42dyidu003xu9urmzmktedr","tag_id":"ck42dyih600bru9urx6qzmjlo","_id":"ck42dyihc00cmu9urf4rc142b"},{"post_id":"ck42dyidv0041u9urxy1z098x","tag_id":"ck42dyih800c0u9urh0mksjyc","_id":"ck42dyihc00cpu9ur1ixpxmj0"},{"post_id":"ck42dyidv0041u9urxy1z098x","tag_id":"ck42dyigc009au9ur8y08en6t","_id":"ck42dyihd00csu9urhnq00f6z"},{"post_id":"ck42dyidw0045u9urcfwyebxy","tag_id":"ck42dyih800c0u9urh0mksjyc","_id":"ck42dyihd00cvu9urfsexq3u4"},{"post_id":"ck42dyidw0045u9urcfwyebxy","tag_id":"ck42dyigc009au9ur8y08en6t","_id":"ck42dyihe00cyu9ur49e26sts"},{"post_id":"ck42dyidx0049u9urmn2e8brx","tag_id":"ck42dyih800c0u9urh0mksjyc","_id":"ck42dyihf00d2u9ur56zjnejx"},{"post_id":"ck42dyidx0049u9urmn2e8brx","tag_id":"ck42dyigc009au9ur8y08en6t","_id":"ck42dyihf00d5u9urxc13mc7f"},{"post_id":"ck42dyidy004du9uri286utzh","tag_id":"ck42dyihe00d0u9ur8v091aav","_id":"ck42dyihg00dgu9urwa3ym47b"},{"post_id":"ck42dyidy004du9uri286utzh","tag_id":"ck42dyihf00d6u9ur5p6xje4u","_id":"ck42dyihh00dju9urud3bzbm1"},{"post_id":"ck42dyidy004du9uri286utzh","tag_id":"ck42dyigc009au9ur8y08en6t","_id":"ck42dyihh00dmu9ur9lc8kn66"},{"post_id":"ck42dyidz004hu9ur32sytjrf","tag_id":"ck42dyieu006pu9urz6azwdif","_id":"ck42dyihh00dru9ur829mi0yn"},{"post_id":"ck42dyidz004hu9ur32sytjrf","tag_id":"ck42dyihh00dku9urz7dtvfy7","_id":"ck42dyihi00duu9urelyfq2rq"},{"post_id":"ck42dyie1004lu9ura4wmfdg4","tag_id":"ck42dyihh00dqu9ur7kuad7qx","_id":"ck42dyihj00e2u9ur3odegb7s"},{"post_id":"ck42dyie1004lu9ura4wmfdg4","tag_id":"ck42dyihf00d6u9ur5p6xje4u","_id":"ck42dyihk00e5u9urvcg4ctxi"},{"post_id":"ck42dyie1004lu9ura4wmfdg4","tag_id":"ck42dyicu001fu9urzjgc99lu","_id":"ck42dyihk00e8u9urzt6ol9jr"},{"post_id":"ck42dyie2004pu9ur600ottdx","tag_id":"ck42dyihj00e0u9urgl6skth4","_id":"ck42dyihk00ecu9ur7cbmyhy7"},{"post_id":"ck42dyie2004pu9ur600ottdx","tag_id":"ck42dyicd000fu9urevocmi8l","_id":"ck42dyihk00eeu9ur8o13nlh0"},{"post_id":"ck42dyie2004pu9ur600ottdx","tag_id":"ck42dyieu006pu9urz6azwdif","_id":"ck42dyihl00ehu9urdwlrz1sv"},{"post_id":"ck42dyie3004tu9ure1sybbb2","tag_id":"ck42dyid60028u9urn6t6277i","_id":"ck42dyihl00eju9ur2wkapnl8"},{"post_id":"ck42dyie3004tu9ure1sybbb2","tag_id":"ck42dyihk00eau9ur39oduqtb","_id":"ck42dyihl00emu9urx3ssaxiv"},{"post_id":"ck42dyie5004xu9ur4n2tr699","tag_id":"ck42dyid60028u9urn6t6277i","_id":"ck42dyihm00enu9urku7445tx"},{"post_id":"ck42dyie5004xu9ur4n2tr699","tag_id":"ck42dyicu001fu9urzjgc99lu","_id":"ck42dyihm00epu9urr9o4c3aa"},{"post_id":"ck42dyie5004xu9ur4n2tr699","tag_id":"ck42dyihf00d6u9ur5p6xje4u","_id":"ck42dyihm00equ9urifao4xr4"},{"post_id":"ck42dyie80058u9urk08qpear","tag_id":"ck42dyid60028u9urn6t6277i","_id":"ck42dyihm00esu9urfi8y5a3m"},{"post_id":"ck42dyie80058u9urk08qpear","tag_id":"ck42dyihl00eku9ur7k8nvoux","_id":"ck42dyihm00etu9urj3rzjt3l"},{"post_id":"ck42dyie80058u9urk08qpear","tag_id":"ck42dyida002gu9urmv29ia3y","_id":"ck42dyihm00euu9urn179kvdf"},{"post_id":"ck42dyiea005cu9urx0krepoc","tag_id":"ck42dyid60028u9urn6t6277i","_id":"ck42dyihn00ewu9urd7cfdf8p"},{"post_id":"ck42dyiea005cu9urx0krepoc","tag_id":"ck42dyihm00eou9urt2bgo0je","_id":"ck42dyihn00exu9ur6vodd7vz"},{"post_id":"ck42dyiea005cu9urx0krepoc","tag_id":"ck42dyihm00eru9urgjz163h1","_id":"ck42dyihn00ezu9urq507stxz"},{"post_id":"ck42dyiec005gu9urih6b5qe3","tag_id":"ck42dyid60028u9urn6t6277i","_id":"ck42dyihn00f0u9urwkgkg3gu"},{"post_id":"ck42dyiec005gu9urih6b5qe3","tag_id":"ck42dyicu001fu9urzjgc99lu","_id":"ck42dyihn00f2u9urh1ctlbj9"},{"post_id":"ck42dyiec005gu9urih6b5qe3","tag_id":"ck42dyihf00d6u9ur5p6xje4u","_id":"ck42dyihn00f3u9ura4yuubim"},{"post_id":"ck42dyied005ku9ur3216sak8","tag_id":"ck42dyihn00eyu9ur9dgzyic5","_id":"ck42dyiho00f5u9urgdpz259r"},{"post_id":"ck42dyief005ou9uravou0m3p","tag_id":"ck42dyihn00eyu9ur9dgzyic5","_id":"ck42dyiho00f6u9urgrr823n4"},{"post_id":"ck42dyief005ou9uravou0m3p","tag_id":"ck42dyicd000fu9urevocmi8l","_id":"ck42dyiho00f8u9urdxxazn3f"},{"post_id":"ck42dyieg005su9urt708jedd","tag_id":"ck42dyihn00eyu9ur9dgzyic5","_id":"ck42dyiho00f9u9urz94emfwh"},{"post_id":"ck42dyiej005wu9uruzte9t7p","tag_id":"ck42dyiho00f7u9urip5269fo","_id":"ck42dyihp00fcu9ura1vw22nn"},{"post_id":"ck42dyiej005wu9uruzte9t7p","tag_id":"ck42dyiea005au9urlxgbu7n6","_id":"ck42dyihp00fdu9urv7h0jox2"},{"post_id":"ck42dyiej005wu9uruzte9t7p","tag_id":"ck42dyie60050u9urynxy8f9o","_id":"ck42dyihp00ffu9urten3n6fy"},{"post_id":"ck42dyiej005wu9uruzte9t7p","tag_id":"ck42dyihn00eyu9ur9dgzyic5","_id":"ck42dyihp00fgu9ur9qeenpq8"},{"post_id":"ck42dyiel0060u9ur1fmq7dra","tag_id":"ck42dyihn00eyu9ur9dgzyic5","_id":"ck42dyihp00fiu9ur6ifpl79d"},{"post_id":"ck42dyiel0060u9ur1fmq7dra","tag_id":"ck42dyihp00feu9urhxscum4w","_id":"ck42dyihp00fju9uriu8ixbkg"},{"post_id":"ck42dyiem0064u9urokuo0ek4","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyihq00flu9ur4oqielpn"},{"post_id":"ck42dyiem0064u9urokuo0ek4","tag_id":"ck42dyihp00fhu9uro65lsr2z","_id":"ck42dyihq00fmu9urru4o6wej"},{"post_id":"ck42dyiep006fu9uricgx4r1l","tag_id":"ck42dyids003vu9urloa9wgdb","_id":"ck42dyihq00fou9urtd60rjdl"},{"post_id":"ck42dyiep006fu9uricgx4r1l","tag_id":"ck42dyicu001fu9urzjgc99lu","_id":"ck42dyihq00fpu9ur4e908krx"},{"post_id":"ck42dyiep006fu9uricgx4r1l","tag_id":"ck42dyihp00fku9urda6xei40","_id":"ck42dyihr00fru9ur0q6zz126"},{"post_id":"ck42dyier006ju9urjnalmtlb","tag_id":"ck42dyid60028u9urn6t6277i","_id":"ck42dyihr00ftu9urzrthqzts"},{"post_id":"ck42dyier006ju9urjnalmtlb","tag_id":"ck42dyihq00fnu9ur42lwtdzi","_id":"ck42dyihr00fuu9urrs6eqtwy"},{"post_id":"ck42dyier006ju9urjnalmtlb","tag_id":"ck42dyids003vu9urloa9wgdb","_id":"ck42dyihs00fwu9urou8k1ji7"},{"post_id":"ck42dyier006ju9urjnalmtlb","tag_id":"ck42dyihf00d6u9ur5p6xje4u","_id":"ck42dyihs00fxu9uricoz9x84"},{"post_id":"ck42dyiet006nu9urx1wzlpxr","tag_id":"ck42dyihr00fsu9urru5br8tf","_id":"ck42dyihs00fzu9ur4fqav6sx"},{"post_id":"ck42dyiet006nu9urx1wzlpxr","tag_id":"ck42dyihf00d6u9ur5p6xje4u","_id":"ck42dyihs00g0u9urrc7wmuxy"},{"post_id":"ck42dyieu006ru9urx7kxlwk3","tag_id":"ck42dyihs00fyu9ur2gi22qa4","_id":"ck42dyihs00g3u9urov3axzez"},{"post_id":"ck42dyieu006ru9urx7kxlwk3","tag_id":"ck42dyihs00g1u9ur9axqsee0","_id":"ck42dyihs00g4u9urricz05kv"},{"post_id":"ck42dyieu006ru9urx7kxlwk3","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyiht00g6u9uru9hmtzp6"},{"post_id":"ck42dyiew006vu9urqfy1a7g9","tag_id":"ck42dyie60050u9urynxy8f9o","_id":"ck42dyiht00g7u9ur3yqu2ji6"},{"post_id":"ck42dyiew006vu9urqfy1a7g9","tag_id":"ck42dyihs00g2u9urrjn6k1tn","_id":"ck42dyiht00g9u9urid4rszbg"},{"post_id":"ck42dyif00073u9ur6m2dl089","tag_id":"ck42dyie60050u9urynxy8f9o","_id":"ck42dyiht00gau9ury8ggflho"},{"post_id":"ck42dyif00073u9ur6m2dl089","tag_id":"ck42dyiht00g5u9urowiuqr23","_id":"ck42dyiht00gcu9ur0iiuu5am"},{"post_id":"ck42dyif3007bu9ur7fuzduyu","tag_id":"ck42dyicn000wu9uryzvhtwe6","_id":"ck42dyiht00geu9ureas9bwl7"},{"post_id":"ck42dyif3007bu9ur7fuzduyu","tag_id":"ck42dyiht00g8u9urdtz45wp4","_id":"ck42dyihu00gfu9urs54ffimn"},{"post_id":"ck42dyif3007bu9ur7fuzduyu","tag_id":"ck42dyiht00gbu9ur14cfoknx","_id":"ck42dyihu00ghu9urb0esxi8w"},{"post_id":"ck42dyif3007bu9ur7fuzduyu","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyihu00giu9urng5j3i06"},{"post_id":"ck42dyif5007fu9urwx15saig","tag_id":"ck42dyiht00gdu9ur5ve4jfhr","_id":"ck42dyihu00gku9ur752xy26o"},{"post_id":"ck42dyif8007ju9ure5wm1iqx","tag_id":"ck42dyiht00gdu9ur5ve4jfhr","_id":"ck42dyihu00glu9urhp98h9wo"},{"post_id":"ck42dyifb007lu9urtzm9q0qa","tag_id":"ck42dyiht00gdu9ur5ve4jfhr","_id":"ck42dyihv00gnu9ur71fg4l2a"},{"post_id":"ck42dyifc007qu9urjilpk6xk","tag_id":"ck42dyiht00gdu9ur5ve4jfhr","_id":"ck42dyihv00gpu9urn96awhj5"},{"post_id":"ck42dyiff007tu9urbngaw0u1","tag_id":"ck42dyiht00gdu9ur5ve4jfhr","_id":"ck42dyihw00gsu9urn7dbhl4x"},{"post_id":"ck42dyiff007tu9urbngaw0u1","tag_id":"ck42dyigc009au9ur8y08en6t","_id":"ck42dyihw00gtu9ur39fogio9"},{"post_id":"ck42dyifl007wu9ur3hpvgif1","tag_id":"ck42dyihe00d0u9ur8v091aav","_id":"ck42dyihx00gxu9urv4v3006v"},{"post_id":"ck42dyifl007wu9ur3hpvgif1","tag_id":"ck42dyihw00guu9urlaicbxdm","_id":"ck42dyihx00gyu9ur9spv1wtz"},{"post_id":"ck42dyifl007wu9ur3hpvgif1","tag_id":"ck42dyihw00gvu9ur30ud9v4z","_id":"ck42dyihx00h0u9urlbpbmnmy"},{"post_id":"ck42dyifs007zu9urfd6v88ma","tag_id":"ck42dyihx00gwu9urw0rf50zd","_id":"ck42dyihy00h2u9urymi8gc1g"},{"post_id":"ck42dyifs007zu9urfd6v88ma","tag_id":"ck42dyigc009au9ur8y08en6t","_id":"ck42dyihy00h3u9uro1o02i92"},{"post_id":"ck42dyifu0085u9uri8y0a9sg","tag_id":"ck42dyihx00h1u9urgf9hgvwo","_id":"ck42dyihy00h5u9ur1io8vp1n"},{"post_id":"ck42dyifu0085u9uri8y0a9sg","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyihy00h6u9urft6ph631"},{"post_id":"ck42dyifx0089u9ur9xyj2d7r","tag_id":"ck42dyihx00h1u9urgf9hgvwo","_id":"ck42dyihz00h8u9urwke4850k"},{"post_id":"ck42dyifx0089u9ur9xyj2d7r","tag_id":"ck42dyicn000wu9uryzvhtwe6","_id":"ck42dyihz00h9u9urs9jqkjsh"},{"post_id":"ck42dyifz008du9urfbilrfkz","tag_id":"ck42dyihx00h1u9urgf9hgvwo","_id":"ck42dyihz00hbu9ur2f09t9d8"},{"post_id":"ck42dyifz008du9urfbilrfkz","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyihz00hcu9urp9xerzz4"},{"post_id":"ck42dyig0008hu9urh3700er2","tag_id":"ck42dyihz00hau9urfoa42nfp","_id":"ck42dyii000heu9urdkl17et2"},{"post_id":"ck42dyig0008hu9urh3700er2","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyii000hfu9urk4kh5fsu"},{"post_id":"ck42dyig1008lu9urywtlrht9","tag_id":"ck42dyii000hdu9urfv876hk0","_id":"ck42dyii100hku9ur43zpn33b"},{"post_id":"ck42dyig1008lu9urywtlrht9","tag_id":"ck42dyii000hgu9urkj2kgmfj","_id":"ck42dyii100hlu9urcjvfvdx1"},{"post_id":"ck42dyig1008lu9urywtlrht9","tag_id":"ck42dyii000hhu9urc5sao756","_id":"ck42dyii100hnu9urtf4fw89u"},{"post_id":"ck42dyig1008lu9urywtlrht9","tag_id":"ck42dyihf00d6u9ur5p6xje4u","_id":"ck42dyii100hou9urj2sab8lb"},{"post_id":"ck42dyig2008ou9ur9yg3kdkm","tag_id":"ck42dyii000hju9urskkl3gg6","_id":"ck42dyii200hqu9urapn04lh1"},{"post_id":"ck42dyig2008ou9ur9yg3kdkm","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyii200hru9urfi0gxe05"},{"post_id":"ck42dyig5008su9ur1xno1qs7","tag_id":"ck42dyii000hju9urskkl3gg6","_id":"ck42dyii200htu9urdoqyk6db"},{"post_id":"ck42dyig5008su9ur1xno1qs7","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyii200huu9urt4qd0xsr"},{"post_id":"ck42dyig5008uu9urw2488pjk","tag_id":"ck42dyihj00e0u9urgl6skth4","_id":"ck42dyii300hwu9urq219fcb7"},{"post_id":"ck42dyig5008uu9urw2488pjk","tag_id":"ck42dyicd000fu9urevocmi8l","_id":"ck42dyii300hxu9urk1oq3rz8"},{"post_id":"ck42dyig5008uu9urw2488pjk","tag_id":"ck42dyieu006pu9urz6azwdif","_id":"ck42dyii400hzu9urs1qjsdoy"},{"post_id":"ck42dyig7008yu9urtahqsg2f","tag_id":"ck42dyihj00e0u9urgl6skth4","_id":"ck42dyii400i0u9urh0mk8de9"},{"post_id":"ck42dyig7008yu9urtahqsg2f","tag_id":"ck42dyicd000fu9urevocmi8l","_id":"ck42dyii400i2u9urv15uw6a3"},{"post_id":"ck42dyig7008yu9urtahqsg2f","tag_id":"ck42dyieu006pu9urz6azwdif","_id":"ck42dyii400i3u9ur5u2l7a5b"},{"post_id":"ck42dyig70090u9urh9tuec8y","tag_id":"ck42dyihj00e0u9urgl6skth4","_id":"ck42dyii500i5u9urau9wv444"},{"post_id":"ck42dyig70090u9urh9tuec8y","tag_id":"ck42dyicd000fu9urevocmi8l","_id":"ck42dyii500i6u9urp23027pc"},{"post_id":"ck42dyig70090u9urh9tuec8y","tag_id":"ck42dyieu006pu9urz6azwdif","_id":"ck42dyii500i8u9urjizkx542"},{"post_id":"ck42dyiga0094u9ur94n3k7ek","tag_id":"ck42dyihj00e0u9urgl6skth4","_id":"ck42dyii500i9u9urltxrdway"},{"post_id":"ck42dyiga0094u9ur94n3k7ek","tag_id":"ck42dyicd000fu9urevocmi8l","_id":"ck42dyii500ibu9urkvjuzhha"},{"post_id":"ck42dyiga0094u9ur94n3k7ek","tag_id":"ck42dyieu006pu9urz6azwdif","_id":"ck42dyii500icu9ur88hbaylz"},{"post_id":"ck42dyigb0097u9ur3m8l5chp","tag_id":"ck42dyihj00e0u9urgl6skth4","_id":"ck42dyii600ieu9urgnv76c3o"},{"post_id":"ck42dyigb0097u9ur3m8l5chp","tag_id":"ck42dyieu006pu9urz6azwdif","_id":"ck42dyii600ifu9ur6x4pvuvd"},{"post_id":"ck42dyigb0097u9ur3m8l5chp","tag_id":"ck42dyicd000fu9urevocmi8l","_id":"ck42dyii600ihu9urdn0b1rgv"},{"post_id":"ck42dyige009fu9urmf7vta0g","tag_id":"ck42dyihe00d0u9ur8v091aav","_id":"ck42dyii600iiu9urfw7c93jn"},{"post_id":"ck42dyige009fu9urmf7vta0g","tag_id":"ck42dyiht00gdu9ur5ve4jfhr","_id":"ck42dyii700iku9urhh3v6q9v"},{"post_id":"ck42dyige009fu9urmf7vta0g","tag_id":"ck42dyii500iau9urga7q9wcf","_id":"ck42dyii700ilu9ura7enki2b"},{"post_id":"ck42dyige009fu9urmf7vta0g","tag_id":"ck42dyigc009au9ur8y08en6t","_id":"ck42dyii800inu9uresadxk0z"},{"post_id":"ck42dyigf009ku9ur4g7nst10","tag_id":"ck42dyii500iau9urga7q9wcf","_id":"ck42dyii800iou9urv1zcvq7l"},{"post_id":"ck42dyigf009ku9ur4g7nst10","tag_id":"ck42dyiht00gdu9ur5ve4jfhr","_id":"ck42dyii900ipu9ur2eh7cnkh"},{"post_id":"ck42dyigf009ku9ur4g7nst10","tag_id":"ck42dyii600iju9urr7ktt5qw","_id":"ck42dyii900iru9urxk7tdq20"},{"post_id":"ck42dyigg009nu9urz1nleh1q","tag_id":"ck42dyie60050u9urynxy8f9o","_id":"ck42dyii900itu9uremqpv0zg"},{"post_id":"ck42dyigg009nu9urz1nleh1q","tag_id":"ck42dyii700imu9urbert1af4","_id":"ck42dyii900iuu9ur29494qai"},{"post_id":"ck42dyigg009nu9urz1nleh1q","tag_id":"ck42dyiho00f7u9urip5269fo","_id":"ck42dyiia00iwu9ur5ccswsqp"},{"post_id":"ck42dyigj009vu9uroluojkw0","tag_id":"ck42dyii900isu9urowo2jazt","_id":"ck42dyiia00ixu9ur3owhvyqr"},{"post_id":"ck42dyigk009yu9urx3kbc4fp","tag_id":"ck42dyii900isu9urowo2jazt","_id":"ck42dyiia00izu9urobwr0cgs"},{"post_id":"ck42dyigm00a2u9ur4vivbd1d","tag_id":"ck42dyiia00iyu9urrnjipz74","_id":"ck42dyiia00j1u9urce1libhd"},{"post_id":"ck42dyign00a6u9urk67e5qr1","tag_id":"ck42dyiia00iyu9urrnjipz74","_id":"ck42dyiib00j3u9uruuf2v4hj"},{"post_id":"ck42dyign00a6u9urk67e5qr1","tag_id":"ck42dyicr001au9urxarsymev","_id":"ck42dyiib00j4u9ur02lpewfn"},{"post_id":"ck42dyigo00aau9urtv6ed9wt","tag_id":"ck42dyicp0013u9urds9e1l6x","_id":"ck42dyiie00j6u9urzj7xqqj4"},{"post_id":"ck42dyigo00aau9urtv6ed9wt","tag_id":"ck42dyihn00eyu9ur9dgzyic5","_id":"ck42dyiie00j7u9uryop4ynva"},{"post_id":"ck42dyigo00aau9urtv6ed9wt","tag_id":"ck42dyicu001fu9urzjgc99lu","_id":"ck42dyiif00j9u9ur1xdgst5x"},{"post_id":"ck42dyigx00axu9ur34j2wuy5","tag_id":"ck42dyie0004ju9urogqeiukc","_id":"ck42dyiif00jau9uragivqdzn"},{"post_id":"ck42dyigx00axu9ur34j2wuy5","tag_id":"ck42dyii700imu9urbert1af4","_id":"ck42dyiig00jcu9urcip88oio"},{"post_id":"ck42dyigx00b0u9urcrqs040f","tag_id":"ck42dyie0004ju9urogqeiukc","_id":"ck42dyiig00jeu9ureu2wksbv"},{"post_id":"ck42dyigx00b0u9urcrqs040f","tag_id":"ck42dyii000hhu9urc5sao756","_id":"ck42dyiih00jfu9ur9u60f4hn"},{"post_id":"ck42dyigx00b0u9urcrqs040f","tag_id":"ck42dyii600iju9urr7ktt5qw","_id":"ck42dyiih00jhu9urqhb779c0"},{"post_id":"ck42dyigz00b5u9ur8g0q60y9","tag_id":"ck42dyie0004ju9urogqeiukc","_id":"ck42dyiih00jiu9ursan1i05c"},{"post_id":"ck42dyigz00b5u9ur8g0q60y9","tag_id":"ck42dyiig00jdu9urlw24oezi","_id":"ck42dyiih00jku9urenry8dok"},{"post_id":"ck42dyih300bgu9url7dxic2n","tag_id":"ck42dyie0004ju9urogqeiukc","_id":"ck42dyiih00jlu9uru0yp6mf5"},{"post_id":"ck42dyih300bgu9url7dxic2n","tag_id":"ck42dyiih00jgu9ur5nrdsysp","_id":"ck42dyiih00jnu9uruyiciv6g"},{"post_id":"ck42dyih700bwu9urgfcgiqk6","tag_id":"ck42dyiih00jju9urmx4rdpsj","_id":"ck42dyiii00jou9urm52gq8ar"},{"post_id":"ck42dyih700bwu9urgfcgiqk6","tag_id":"ck42dyiih00jmu9urasncektx","_id":"ck42dyiii00jpu9ursnv2jl0u"},{"post_id":"ck42dyijh00jqu9urj60iu6i2","tag_id":"ck42dyic50007u9urfauqb8wh","_id":"ck42dyijn00jsu9ur31h64zh2"},{"post_id":"ck42dyijh00jqu9urj60iu6i2","tag_id":"ck42dyicd000fu9urevocmi8l","_id":"ck42dyijo00juu9urohptiq9r"},{"post_id":"ck42dyijm00jru9urw3mpqfku","tag_id":"ck42dyied005iu9ur1fa493x6","_id":"ck42dyijp00jyu9ur1ldf0ie1"},{"post_id":"ck42dyijo00jvu9urn6oa27sg","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyijr00k1u9ur9u2705pa"},{"post_id":"ck42dyijo00jvu9urn6oa27sg","tag_id":"ck42dyicn000wu9uryzvhtwe6","_id":"ck42dyijt00k4u9ural2ek47d"},{"post_id":"ck42dyijr00k2u9ur95q8zsgu","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyiju00k8u9urb1436t4z"},{"post_id":"ck42dyijr00k2u9ur95q8zsgu","tag_id":"ck42dyihm00eru9urgjz163h1","_id":"ck42dyijw00kbu9urkkz04zct"},{"post_id":"ck42dyijn00jtu9ur9ciwf7nc","tag_id":"ck42dyifx0087u9urraismvti","_id":"ck42dyijx00kfu9ursjmv9ojs"},{"post_id":"ck42dyijn00jtu9ur9ciwf7nc","tag_id":"ck42dyijp00jxu9ur8vcz71gx","_id":"ck42dyijx00kgu9urls8wni95"},{"post_id":"ck42dyijt00k5u9ur6hi5ibfd","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyijy00kiu9urfwxvnox4"},{"post_id":"ck42dyijt00k5u9ur6hi5ibfd","tag_id":"ck42dyihn00eyu9ur9dgzyic5","_id":"ck42dyijz00kku9urw7poeuxq"},{"post_id":"ck42dyijt00k5u9ur6hi5ibfd","tag_id":"ck42dyicu001fu9urzjgc99lu","_id":"ck42dyijz00klu9ur8nczl6m1"},{"post_id":"ck42dyijp00jzu9uruvjqylwh","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyijz00kmu9urbok48ulw"},{"post_id":"ck42dyijp00jzu9uruvjqylwh","tag_id":"ck42dyiju00k6u9urthco91fm","_id":"ck42dyik200knu9ur8npbusfj"},{"post_id":"ck42dyijv00k9u9urg9hjf2jh","tag_id":"ck42dyijx00keu9urz1mm4nvm","_id":"ck42dyik300kpu9ureulx7te0"},{"post_id":"ck42dyijv00k9u9urg9hjf2jh","tag_id":"ck42dyidd002ou9ury4lltdgw","_id":"ck42dyik300kru9ur0j7rseg0"},{"post_id":"ck42dyikn00ktu9ur29eb64p9","tag_id":"ck42dyiht00gdu9ur5ve4jfhr","_id":"ck42dyiko00kuu9uru0oebf70"}],"Tag":[{"name":"apache","_id":"ck42dyic50007u9urfauqb8wh"},{"name":"webserver","_id":"ck42dyicd000fu9urevocmi8l"},{"name":"command","_id":"ck42dyicn000wu9uryzvhtwe6"},{"name":"iis","_id":"ck42dyicp0013u9urds9e1l6x"},{"name":"windows","_id":"ck42dyicr001au9urxarsymev"},{"name":"debug","_id":"ck42dyicu001fu9urzjgc99lu"},{"name":"aws","_id":"ck42dyicx001ku9urf9ymp07j"},{"name":"lambda","_id":"ck42dyicz001ru9urfrsxzj24"},{"name":"cloudfront","_id":"ck42dyid1001zu9urr6baeotp"},{"name":"mysql","_id":"ck42dyid60028u9urn6t6277i"},{"name":"mysql-proxy","_id":"ck42dyida002gu9urmv29ia3y"},{"name":"linux","_id":"ck42dyidd002ou9ury4lltdgw"},{"name":"cpulimit","_id":"ck42dyido003lu9urkk5gptt0"},{"name":"php","_id":"ck42dyids003vu9urloa9wgdb"},{"name":"dedecms","_id":"ck42dyidy004bu9ur8jfwlcuc"},{"name":"zabbix","_id":"ck42dyie0004ju9urogqeiukc"},{"name":"python","_id":"ck42dyie60050u9urynxy8f9o"},{"name":"django","_id":"ck42dyiea005au9urlxgbu7n6"},{"name":"dns","_id":"ck42dyied005iu9ur1fa493x6"},{"name":"view","_id":"ck42dyieg005qu9ur1ylt217i"},{"name":"domain","_id":"ck42dyiel005zu9ur9gwf36l1"},{"name":"statusCode","_id":"ck42dyien0069u9urwif2fx5v"},{"name":"http","_id":"ck42dyieu006pu9urz6azwdif"},{"name":"cache","_id":"ck42dyiey006xu9ur4qy6ptn3"},{"name":"iptables","_id":"ck42dyif5007eu9urdxhk7sbk"},{"name":"iscsi","_id":"ck42dyifc007nu9urvmjubted"},{"name":"store","_id":"ck42dyift0081u9urf1lnlzuy"},{"name":"k8s","_id":"ck42dyifx0087u9urraismvti"},{"name":"tcpdump","_id":"ck42dyig0008gu9ur0ph1q6i1"},{"name":"network","_id":"ck42dyig6008wu9ur8d3gvotr"},{"name":"keepalived","_id":"ck42dyig90092u9ur0sfoh5s2"},{"name":"cluster","_id":"ck42dyigc009au9ur8y08en6t"},{"name":"arp","_id":"ck42dyigs00aku9ur7q4urovg"},{"name":"kernal","_id":"ck42dyigy00b2u9ur7zgmz1jt"},{"name":"acl","_id":"ck42dyih000bau9urigjs2y58"},{"name":"commands","_id":"ck42dyih400biu9urnb86wp1x"},{"name":"yum","_id":"ck42dyih600bru9urx6qzmjlo"},{"name":"lvs","_id":"ck42dyih800c0u9urh0mksjyc"},{"name":"memcached","_id":"ck42dyihe00d0u9ur8v091aav"},{"name":"database","_id":"ck42dyihf00d6u9ur5p6xje4u"},{"name":"mime-type","_id":"ck42dyihh00dku9urz7dtvfy7"},{"name":"mssql","_id":"ck42dyihh00dqu9ur7kuad7qx"},{"name":"tomcat","_id":"ck42dyihj00e0u9urgl6skth4"},{"name":"binlog","_id":"ck42dyihk00eau9ur39oduqtb"},{"name":"amoeba","_id":"ck42dyihl00eku9ur7k8nvoux"},{"name":"mysqlcheck","_id":"ck42dyihm00eou9urt2bgo0je"},{"name":"tool","_id":"ck42dyihm00eru9urgjz163h1"},{"name":"nginx","_id":"ck42dyihn00eyu9ur9dgzyic5"},{"name":"uwsgi","_id":"ck42dyiho00f7u9urip5269fo"},{"name":"websocket","_id":"ck42dyihp00feu9urhxscum4w"},{"name":"ntp","_id":"ck42dyihp00fhu9uro65lsr2z"},{"name":"CMS","_id":"ck42dyihp00fku9urda6xei40"},{"name":"phpmyadmin","_id":"ck42dyihq00fnu9ur42lwtdzi"},{"name":"postgresql","_id":"ck42dyihr00fsu9urru5br8tf"},{"name":"pxe","_id":"ck42dyihs00fyu9ur2gi22qa4"},{"name":"kickstart","_id":"ck42dyihs00g1u9ur9axqsee0"},{"name":"socket","_id":"ck42dyihs00g2u9urrjn6k1tn"},{"name":"mail","_id":"ck42dyiht00g5u9urowiuqr23"},{"name":"rbash","_id":"ck42dyiht00g8u9urdtz45wp4"},{"name":"bash","_id":"ck42dyiht00gbu9ur14cfoknx"},{"name":"redis","_id":"ck42dyiht00gdu9ur5ve4jfhr"},{"name":"repcache","_id":"ck42dyihw00guu9urlaicbxdm"},{"name":"magent","_id":"ck42dyihw00gvu9ur30ud9v4z"},{"name":"rhcs","_id":"ck42dyihx00gwu9urw0rf50zd"},{"name":"shell","_id":"ck42dyihx00h1u9urgf9hgvwo"},{"name":"ssh","_id":"ck42dyihz00hau9urfoa42nfp"},{"name":"statsd","_id":"ck42dyii000hdu9urfv876hk0"},{"name":"graphite","_id":"ck42dyii000hgu9urkj2kgmfj"},{"name":"monitor","_id":"ck42dyii000hhu9urc5sao756"},{"name":"tcp","_id":"ck42dyii000hju9urskkl3gg6"},{"name":"twemproxy","_id":"ck42dyii500iau9urga7q9wcf"},{"name":"memcache","_id":"ck42dyii600iju9urr7ktt5qw"},{"name":"issue","_id":"ck42dyii700imu9urbert1af4"},{"name":"vagrant","_id":"ck42dyii900isu9urowo2jazt"},{"name":"vcenter","_id":"ck42dyiia00iyu9urrnjipz74"},{"name":"mongo","_id":"ck42dyiig00jdu9urlw24oezi"},{"name":"scripts","_id":"ck42dyiih00jgu9ur5nrdsysp"},{"name":"zentaopms","_id":"ck42dyiih00jju9urmx4rdpsj"},{"name":"deployment","_id":"ck42dyiih00jmu9urasncektx"},{"name":"ingress","_id":"ck42dyijp00jxu9ur8vcz71gx"},{"name":"lvm","_id":"ck42dyiju00k6u9urthco91fm"},{"name":"udev","_id":"ck42dyijx00keu9urz1mm4nvm"}]}}